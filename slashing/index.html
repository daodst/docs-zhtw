
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../distribute/">
      
      
        <link rel="next" href="../staking/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.6">
    
    
      
        <title>å‰Šæ¸› - DAODSTæ–‡æª”</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ded33207.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DAODSTæ–‡æª”" class="md-header__button md-logo" aria-label="DAODSTæ–‡æª”" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DAODSTæ–‡æª”
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              å‰Šæ¸›
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="https://zh-tw.docs.daodst.com" hreflang="zh" class="md-select__link">
                    ä¸­æ–‡
                  </a>
                </li>
              
                <li class="md-select__item">
                  <a href="https://docs.daodst.com" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../protocol/stcd/" class="md-tabs__link">
        ğŸ”å”è­°
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../modules_accounts/" class="md-tabs__link md-tabs__link--active">
        ğŸ§±æ¨¡å¡Š
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../gateway/run/" class="md-tabs__link">
        âœˆç¶²é—œå’Œé©—è­‰å™¨
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../chat/installation/" class="md-tabs__link">
        ğŸ“èŠå¤©
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../faq/" class="md-tabs__link">
      ğŸ“‹å¸¸è¦‹å•é¡Œ
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DAODSTæ–‡æª”" class="md-nav__button md-logo" aria-label="DAODSTæ–‡æª”" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    DAODSTæ–‡æª”
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          ğŸ”å”è­°
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          ğŸ”å”è­°
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1_1" id="__nav_1_1_label" tabindex="0">
          å‘½ä»¤è¡Œç•Œé¢
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          å‘½ä»¤è¡Œç•Œé¢
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/stcd/" class="md-nav__link">
        å®‰è£
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/stcd/config/" class="md-nav__link">
        é…ç½®
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/stcd/single-node/" class="md-nav__link">
        å–®ç¯€é»
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/stcd/command/" class="md-nav__link">
        CLIå‘½ä»¤
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/account/" class="md-nav__link">
        å¸³è™Ÿ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/chainid/" class="md-nav__link">
        éˆID
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/encode/" class="md-nav__link">
        ç·¨ç¢¼
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/gas/" class="md-nav__link">
        Gaså’Œæ‰‹çºŒè²»
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/keyring/" class="md-nav__link">
        å¯†é‘°ç’°
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/key-management/" class="md-nav__link">
        å¯†é‘°ç®¡ç†
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/state-migrate/" class="md-nav__link">
        ç‹€æ…‹å°å…¥å°å‡º
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/pending/" class="md-nav__link">
        ç­‰å¾…éšŠåˆ—
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/multsign/" class="md-nav__link">
        å¤šç°½
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/coin/" class="md-nav__link">
        ä»£å¹£
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/transfer/" class="md-nav__link">
        äº¤æ˜“
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          ğŸ§±æ¨¡å¡Š
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          ğŸ§±æ¨¡å¡Š
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules_accounts/" class="md-nav__link">
        æ¨¡å¡Šè³¬è™Ÿ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../evm/" class="md-nav__link">
        ä»¥å¤ªåŠè™›æ“¬æ©Ÿ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chat/" class="md-nav__link">
        èŠå¤©
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/" class="md-nav__link">
        ç¶²é—œ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contract/" class="md-nav__link">
        åˆç´„
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pledge/" class="md-nav__link">
        èŠå¤©è³ªæŠ¼
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../auth/" class="md-nav__link">
        èªè­‰
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bank/" class="md-nav__link">
        éŠ€è¡Œ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gov/" class="md-nav__link">
        æ²»ç†
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mint/" class="md-nav__link">
        é‘„é€ 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../distribute/" class="md-nav__link">
        åˆ†é…
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          å‰Šæ¸›
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        å‰Šæ¸›
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    æ‘˜è¦
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    æ¦‚å¿µ
  </a>
  
    <nav class="md-nav" aria-label="æ¦‚å¿µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ç‹€æ…‹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    å¢“ç¢‘ä¸Šé™
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    é•è¦æ™‚é–“è»¸
  </a>
  
    <nav class="md-nav" aria-label="é•è¦æ™‚é–“è»¸">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    å–®æ¬¡æˆ–é›™é‡ç°½åé•è¦
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    å¤šæ¬¡é›™é‡ç°½åé•è¦
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    ç‹€æ…‹
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    ç°½åä¿¡æ¯ï¼ˆæ´»æ€§ï¼‰
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messages" class="md-nav__link">
    Messages
  </a>
  
    <nav class="md-nav" aria-label="Messages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unjail" class="md-nav__link">
    Unjail
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    é–‹å§‹å€å¡Š
  </a>
  
    <nav class="md-nav" aria-label="é–‹å§‹å€å¡Š">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#liveness-tracking" class="md-nav__link">
    Liveness Tracking
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hooks" class="md-nav__link">
    Hooks
  </a>
  
    <nav class="md-nav" aria-label="Hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#staking-hooks" class="md-nav__link">
    Staking hooks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    é©—è­‰è€…ç¶å®š
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tags" class="md-nav__link">
    Tags
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#msgserver" class="md-nav__link">
    MsgServer
  </a>
  
    <nav class="md-nav" aria-label="MsgServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#msgunjail" class="md-nav__link">
    MsgUnjail
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../staking/" class="md-nav__link">
        DPOSè³ªæŠ¼
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          âœˆç¶²é—œå’Œé©—è­‰å™¨
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          âœˆç¶²é—œå’Œé©—è­‰å™¨
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          è¨­ç½®å’Œé…å¯˜
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          è¨­ç½®å’Œé…å¯˜
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/run/" class="md-nav__link">
        é‹è¡Œé©—è­‰å™¨
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/config/" class="md-nav__link">
        é…å¯˜
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/disk-usage/" class="md-nav__link">
        ç¡¬ç¢Ÿä½¿ç”¨å„ªåŒ–
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/state-sync/" class="md-nav__link">
        ç‹€æ…‹åŒæ­¥
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/mempool/" class="md-nav__link">
        è¨˜æ†¶é«”æ± 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/faq/" class="md-nav__link">
        å¸¸è¦‹å•é¡Œ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/security/" class="md-nav__link">
        å®‰å…¨
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          é™ç´š
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          é™ç´š
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade/" class="md-nav__link">
        æ¦‚è¿°
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade/list/" class="md-nav__link">
        å‡ç´šæ¸…å–®
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade/hard-fork/" class="md-nav__link">
        ç¡¬åˆ†å‰å‡ç´š
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade/auto/" class="md-nav__link">
        è‡ªå‹•å‡ç´š
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade/manual/" class="md-nav__link">
        æ‰‹å‹•å‡ç´š
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade/rollback/" class="md-nav__link">
        å›æ»¾
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade/template/" class="md-nav__link">
        ææ¡ˆæ¨¡æ¿
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/testnet/" class="md-nav__link">
        æ¸¬è©¦ç¶²
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/mainnet/" class="md-nav__link">
        ä¸»ç¶²
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          ç¶²é—œæ“ä½œæŒ‡å—
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          ç¶²é—œæ“ä½œæŒ‡å—
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/guide-linux/" class="md-nav__link">
        æ“ä½œæŒ‡å—(linux)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/guide-win/" class="md-nav__link">
        æ“ä½œæŒ‡å—(win)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gateway/key-backup/" class="md-nav__link">
        é‡‘é‘°å‚™ä»½å’Œæ¢å¾©
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          ğŸ“èŠå¤©
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          ğŸ“èŠå¤©
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chat/installation/" class="md-nav__link">
        å®‰è£å•Ÿå‹•
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chat/chat_doc/" class="md-nav__link">
        æ–‡æª”
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chat/client_server/" class="md-nav__link">
        å®¢æˆ¶ç«¯-æœå‹™ç«¯API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chat/server_server/" class="md-nav__link">
        æœå‹™ç«¯-æœå‹™ç«¯API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chat/customise_doc/" class="md-nav__link">
        å®šåˆ¶
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chat/voip_signaling/" class="md-nav__link">
        å‘¼å«æµç¨‹
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chat/optional_cfg/" class="md-nav__link">
        å¯é¸é…ç½®*
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chat/faq/" class="md-nav__link">
        å¸¸è¦‹å•é¡Œ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        ğŸ“‹å¸¸è¦‹å•é¡Œ
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    æ‘˜è¦
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    æ¦‚å¿µ
  </a>
  
    <nav class="md-nav" aria-label="æ¦‚å¿µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ç‹€æ…‹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    å¢“ç¢‘ä¸Šé™
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    é•è¦æ™‚é–“è»¸
  </a>
  
    <nav class="md-nav" aria-label="é•è¦æ™‚é–“è»¸">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    å–®æ¬¡æˆ–é›™é‡ç°½åé•è¦
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    å¤šæ¬¡é›™é‡ç°½åé•è¦
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    ç‹€æ…‹
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    ç°½åä¿¡æ¯ï¼ˆæ´»æ€§ï¼‰
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messages" class="md-nav__link">
    Messages
  </a>
  
    <nav class="md-nav" aria-label="Messages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unjail" class="md-nav__link">
    Unjail
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    é–‹å§‹å€å¡Š
  </a>
  
    <nav class="md-nav" aria-label="é–‹å§‹å€å¡Š">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#liveness-tracking" class="md-nav__link">
    Liveness Tracking
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hooks" class="md-nav__link">
    Hooks
  </a>
  
    <nav class="md-nav" aria-label="Hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#staking-hooks" class="md-nav__link">
    Staking hooks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    é©—è­‰è€…ç¶å®š
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tags" class="md-nav__link">
    Tags
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#msgserver" class="md-nav__link">
    MsgServer
  </a>
  
    <nav class="md-nav" aria-label="MsgServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#msgunjail" class="md-nav__link">
    MsgUnjail
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<!--
order: 20
title: Slashing Overview
parent:
  title: "slashing"
-->

<h1 id="_1"><code>å‰Šå‡(æ‡²ç½°)</code></h1>
<h2 id="_2">æ‘˜è¦</h2>
<p>æœ¬ç¯€è¦å®šäº†å‰Šæ¸›æ¨¡å¡Šã€‚</p>
<p>å‰Šæ¸›æ¨¡å¡Šä½¿å¾—åŸºæ–¼Cosmos SDKçš„å€å¡Šéˆèƒ½å¤ é€šéæ‡²ç½°å…·æœ‰æ¬Šç›Šåƒ¹å€¼çš„å”è­°èªå¯çš„åƒèˆ‡è€…ä¾†æ¸›å°‘å…¶å¯èƒ½å°è‡´çš„è¡Œç‚ºé¢¨éšªã€‚</p>
<p>æ‡²ç½°å¯èƒ½åŒ…æ‹¬ä½†ä¸é™æ–¼ï¼š:</p>
<ul>
<li>éŠ·æ¯€ä»–å€‘æŒæœ‰çš„ä¸€å®šæ•¸é‡çš„æ¬Šç›Šä»½é¡</li>
<li>åœ¨ä¸€æ®µæ™‚é–“å…§å–æ¶ˆä»–å€‘å°æœªä¾†å€å¡Šçš„æŠ•ç¥¨æ¬Šé™ã€‚</li>
</ul>
<h2 id="_3">æ¦‚å¿µ</h2>
<h3 id="_4">ç‹€æ…‹</h3>
<p>åœ¨ä»»ä½•æ™‚å€™ï¼Œç‹€æ…‹æ©Ÿä¸­éƒ½æœ‰ä»»æ„æ•¸é‡çš„é©—è­‰è€…è¨»å†Šã€‚
æ¯å€‹å€å¡Šï¼Œé ‚éƒ¨çš„ MaxValidatorsï¼ˆç”± x/staking å®šç¾©ï¼‰æœªè¢«ç›£ç¦çš„é©—è­‰è€…è®Šæˆäº† bondedï¼Œé€™æ„å‘³è‘—ä»–å€‘å¯ä»¥æå‡ºå’ŒæŠ•ç¥¨æ”¯æŒå€å¡Šã€‚
è¢« bonded çš„é©—è­‰è€… at stakeï¼Œé€™æ„å‘³è‘—ä»–å€‘å’Œä»–å€‘çš„å§”è¨—äººçš„éƒ¨åˆ†æˆ–å…¨éƒ¨æ¬Šç›Šä»½é¡æœƒå› ç‚ºä»–å€‘çŠ¯äº†å”è­°éŒ¯èª¤è€Œé­å—é¢¨éšªã€‚</p>
<p>å°æ–¼æ¯å€‹é©—è­‰è€…ï¼Œæˆ‘å€‘ä¿ç•™ä¸€å€‹ ValidatorSigningInfo è¨˜éŒ„ï¼Œå…¶ä¸­åŒ…å«æœ‰é—œé©—è­‰è€…æ´»å‹•ç‹€æ…‹å’Œå…¶ä»–é•åç›¸é—œå±¬æ€§çš„ä¿¡æ¯ã€‚</p>
<h3 id="_5">å¢“ç¢‘ä¸Šé™</h3>
<p>ç‚ºäº†æ¸›è¼•æœ€åˆå¯èƒ½å‡ºç¾çš„éæƒ¡æ„å”è­°éŒ¯èª¤çš„å½±éŸ¿ï¼ŒCosmos Hub ç‚ºæ¯å€‹é©—è­‰è€…å¯¦ç¾äº†ä¸€å€‹ å¢“ç¢‘ ä¸Šé™ï¼Œé€™åªå…è¨±é©—è­‰è€…å› é›™é‡ç°½ç½²éŒ¯èª¤è€Œè¢«æ‡²ç½°ä¸€æ¬¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨éŒ¯èª¤åœ°é…ç½®äº† HSM ä¸¦é›™é‡ç°½ç½²äº†ä¸€å †èˆŠå€å¡Šï¼Œæ‚¨åªæœƒå› ç‚ºç¬¬ä¸€æ¬¡é›™é‡ç°½ç½²è€Œå—åˆ°æ‡²ç½°ï¼ˆç„¶å¾Œç«‹å³è¢«å¢“ç¢‘åŒ–ï¼‰ã€‚é€™ä»ç„¶æ˜¯ç›¸ç•¶æ˜‚è²´çš„ï¼Œå› æ­¤éœ€è¦ç›¡é‡é¿å…ï¼Œä½†æ˜¯å¢“ç¢‘ä¸Šé™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ¸›è¼•äº†æ„å¤–éŒ¯èª¤é…ç½®çš„ç¶“æ¿Ÿå½±éŸ¿ã€‚</p>
<p>æ´»å‹•æ€§éŒ¯èª¤ï¼ˆLiveness faultsï¼‰æ²’æœ‰ä¸Šé™ï¼Œå› ç‚ºå®ƒå€‘ä¸èƒ½å †ç–Šåœ¨ä¸€èµ·ã€‚ç•¶é•è¦ç™¼ç”Ÿæ™‚ï¼Œæ´»å‹•æ€§éŒ¯èª¤è¢«â€œæª¢æ¸¬â€å‡ºä¾†ï¼Œä¸¦ä¸”é©—è­‰è€…ç«‹å³è¢«ç›£ç¦ï¼Œå› æ­¤ä»–å€‘ä¸å¯èƒ½åœ¨è§£ç›£ä¹‹å‰å¤šæ¬¡çŠ¯éŒ¯ã€‚</p>
<h3 id="_6">é•è¦æ™‚é–“è»¸</h3>
<p>ç‚ºäº†èªªæ˜ <code>slashing</code> æ¨¡å¡Šå¦‚ä½•é€šé Tendermint å…±è­˜è™•ç†æäº¤çš„è­‰æ“šï¼Œè«‹è€ƒæ…®ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<p><strong>å®šç¾©</strong>:</p>
<p><em>C<sub>n</sub></em> : é•è¦è¡Œç‚º <code>n</code> ç™¼ç”Ÿ
<em>D<sub>n</sub></em> : ç™¼ç¾é•è¦è¡Œç‚º <code>n</code>
<em>V<sub>b</sub></em> : å·²ç¶å®šçš„é©—è­‰è€…
<em>V<sub>u</sub></em> : æœªç¶å®šçš„é©—è­‰è€…</p>
<h4 id="_7">å–®æ¬¡æˆ–é›™é‡ç°½åé•è¦</h4>
<p>&lt;-----------------&gt;</p>
<p>ç•¶ç™¼ç¾å–®æ¬¡é•è¦è¡Œç‚ºå¾Œï¼Œé©—è­‰è€…æœƒè¢«è§£é™¤ç¶å®šä¸¦è¢«æ‰£é™¤é•è¦è¡Œç‚ºçš„å…¨éƒ¨æ‡²ç½°ã€‚</p>
<h4 id="_8">å¤šæ¬¡é›™é‡ç°½åé•è¦</h4>
<p>&lt;---------------------------&gt;</p>
<p>ç•¶ç™¼ç¾å¤šæ¬¡é•è¦è¡Œç‚ºå¾Œï¼Œé©—è­‰è€…æœƒè¢«æ‹˜ç•™ä¸¦è¢«æ‰£é™¤å…¶ä¸­ä¸€æ¬¡é•è¦è¡Œç‚ºçš„æ‡²ç½°ã€‚ç”±æ–¼é©—è­‰è€…å·²è¢«å¢“ç¢‘åŒ–ï¼Œå› æ­¤ç„¡æ³•é‡æ–°åŠ å…¥é©—è­‰è€…é›†åˆã€‚</p>
<h2 id="_9">ç‹€æ…‹</h2>
<h2 id="_10">ç°½åä¿¡æ¯ï¼ˆæ´»æ€§ï¼‰</h2>
<p>æ¯å€‹å€å¡Šéƒ½åŒ…å«å‰ä¸€å€‹å€å¡Šçš„é©—è­‰è€…é æäº¤é›†åˆï¼Œç¨±ç‚º Tendermint æä¾›çš„ LastCommitInfoã€‚
åªè¦ LastCommitInfo åŒ…å«è¶…éç¸½æŠ•ç¥¨æ¬Šçš„ 2/3 çš„é æäº¤ï¼Œå°±æ˜¯æœ‰æ•ˆçš„ã€‚é€™å€‹æ©Ÿåˆ¶å¯ä»¥ç¢ºä¿ç¶²çµ¡çš„å®‰å…¨æ€§å’Œæ´»æ€§ã€‚</p>
<p>æè­°è€…æœƒå—åˆ°æ¿€å‹µï¼Œå°‡æ‰€æœ‰é©—è­‰è€…çš„é æäº¤åŒ…å«åœ¨ Tendermint çš„ <code>LastCommitInfo</code> ä¸­ï¼Œé€šéæ ¹æ®åŒ…å«åœ¨ <code>LastCommitInfo</code> ä¸­çš„æŠ•ç¥¨æ¬Šèˆ‡ 2/3 æŠ•ç¥¨æ¬Šä¹‹å·®æ¯”ä¾‹æé«˜é¡å¤–è²»ç”¨ã€‚</p>
<pre><code>type LastCommitInfo struct {
    Round int32
    Votes []VoteInfo
}
</code></pre>
<p>å¦‚æœé©—è­‰è€…æœªèƒ½åœ¨æŸäº›å€å¡Šçš„ <code>L</code>astCommitInfo` ä¸­è¢«åŒ…å«ï¼Œä»–å€‘å°‡å—åˆ°æ‡²ç½°ï¼Œè‡ªå‹•è¢«æ‹˜ç•™ï¼Œå¯èƒ½è¢«å‰Šæ¸›çå‹µï¼Œä¸¦è§£é™¤ç¶å®šã€‚</p>
<p>æœ‰é—œé©—è­‰è€…æ´»æ€§çš„ä¿¡æ¯é€šé ValidatorSigningInfo è¿›è¡Œè·Ÿè¸ªã€‚å®ƒåœ¨å­˜å‚¨åº“ä¸­æŒ‰ä»¥ä¸‹æ–¹å¼è¿›è¡Œç´¢å¼•ï¼š</p>
<ul>
<li>ValidatorSigningInfo: <code>0x01 | ConsAddrLen (1 byte) | ConsAddress -&gt; ProtocolBuffer(ValSigningInfo)</code></li>
<li>MissedBlocksBitArray: <code>0x02 | ConsAddrLen (1 byte) | ConsAddress | LittleEndianUint64(signArrayIndex) -&gt; VarInt(didMiss)</code> (varint æ˜¯ä¸€ç¨®æ•¸å­—ç·¨ç¢¼æ ¼å¼ã€‚)</li>
</ul>
<p>ç¬¬ä¸€å€‹æ˜ å°„å…è¨±æˆ‘å€‘æ ¹æ“šé©—è­‰è€…çš„å…±è­˜åœ°å€è¼•é¬†æŸ¥æ‰¾é©—è­‰è€…çš„æœ€è¿‘ç°½åä¿¡æ¯ã€‚</p>
<p>ç¬¬äºŒå€‹æ˜ å°„ (<code>MissedBlocksBitArray</code>) å……ç•¶å¤§å°ç‚º <code>SignedBlocksWindow</code> çš„ä½æ•¸çµ„ï¼Œå‘Šè¨´æˆ‘å€‘é©—è­‰è€…æ˜¯å¦éŒ¯éäº†ä½æ•¸çµ„ä¸­çµ¦å®šç´¢å¼•çš„å€å¡Šã€‚
ä½æ•¸çµ„ä¸­çš„ç´¢å¼•ä»¥å°ç«¯ uint64 çš„å½¢å¼çµ¦å‡ºã€‚
çµæœæ˜¯ä¸€å€‹ <code>varint</code>ï¼Œå–å€¼ç‚º <code>0</code>æˆ– <code>1</code>ï¼Œå…¶ä¸­ <code>0</code> è¡¨ç¤ºé©—è­‰è€…æœªéŒ¯éï¼ˆå·²ç°½ç½²ï¼‰ç›¸æ‡‰çš„å€å¡Šï¼Œè€Œ <code>1</code> è¡¨ç¤ºä»–å€‘éŒ¯éäº†è©²å€å¡Šï¼ˆæœªç°½ç½²ï¼‰ã€‚</p>
<p>è«‹æ³¨æ„ï¼Œ<code>MissedBlocksBitArray</code> ä¸æ˜¯åœ¨å‰é¢æ˜ç¢ºåˆå§‹åŒ–çš„ã€‚
ç•¶æˆ‘å€‘åœ¨æ–°ç¶å®šçš„é©—è­‰è€…çš„å‰ <code>SignedBlocksWindow</code> å€‹å€å¡Šä¸­é€²è¡Œé€²åº¦æ™‚ï¼Œå°‡æ·»åŠ éµã€‚
<code>SignedBlocksWindow</code> åƒæ•¸å®šç¾©ç”¨æ–¼è·Ÿè¸ªé©—è­‰è€…æ´»æ€§çš„æ»‘å‹•çª—å£çš„å¤§å°ï¼ˆå€å¡Šæ•¸ï¼‰ã€‚</p>
<p>è·Ÿè¸ªé©—è­‰è€…æ´»æ€§å­˜å„²çš„ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/slashing/v1beta1/slashing.proto#L11-L33</p>
<h2 id="messages">Messages</h2>
<p>åœ¨æœ¬ç¯€ä¸­ï¼Œæˆ‘å€‘æè¿°äº†é‡å°â€œæ‡²ç½°â€æ¨¡å¡Šçš„æ¶ˆæ¯è™•ç†éç¨‹ã€‚</p>
<h3 id="unjail">Unjail</h3>
<p>å¦‚æœé©—è­‰è€…å› åœæ©Ÿè€Œè¢«è‡ªå‹•è§£é™¤ç¶å®šï¼Œä¸¦å¸Œæœ›é‡æ–°ä¸Šç·šä¸¦å¯èƒ½é‡æ–°åŠ å…¥ç¶å®šé›†ï¼Œå‰‡å¿…é ˆç™¼é€ <code>MsgUnjail</code>ï¼š</p>
<pre><code class="language-protobuf">// MsgUnjail is an sdk.Msg used for unjailing a jailed validator, thus returning
// them into the bonded validator set, so they can begin receiving provisions
// and rewards again.
message MsgUnjail {
  string validator_addr = 1;
}
</code></pre>
<p>Below is a pseudocode of the <code>MsgSrv/Unjail</code> RPC:</p>
<pre><code>unjail(tx MsgUnjail)
    validator = getValidator(tx.ValidatorAddr)
    if validator == nil
      fail with &quot;No validator found&quot;

    if getSelfDelegation(validator) == 0
      fail with &quot;validator must self delegate before unjailing&quot;

    if !validator.Jailed
      fail with &quot;Validator not jailed, cannot unjail&quot;

    info = GetValidatorSigningInfo(operator)
    if info.Tombstoned
      fail with &quot;Tombstoned validator cannot be unjailed&quot;
    if block time &lt; info.JailedUntil
      fail with &quot;Validator still jailed, cannot unjail until period has expired&quot;

    validator.Jailed = false
    setValidator(validator)

    return
</code></pre>
<p>å¦‚æœé©—è­‰è€…æ“æœ‰è¶³å¤ çš„è‚¡ä»½ä»¥é€²å…¥å‰ <code>n = MaximumBondedValidators å</code>ï¼Œå®ƒå°‡è‡ªå‹•é‡æ–°ç¶å®šï¼Œ
ä»ç„¶å§”è¨—çµ¦è©²é©—è­‰è€…çš„æ‰€æœ‰å§”è¨—è€…å°‡é‡æ–°ç¶å®šä¸¦é–‹å§‹å†æ¬¡æ”¶é›†ä½£é‡‘å’Œçå‹µã€‚</p>
<h2 id="_11">é–‹å§‹å€å¡Š</h2>
<h3 id="liveness-tracking">Liveness Tracking</h3>
<p>åœ¨æ¯å€‹å€å¡Šé–‹å§‹æ™‚ï¼Œæˆ‘å€‘æœƒæ›´æ–°æ¯å€‹é©—è­‰è€…çš„ <code>ValidatorSigningInfo</code>ï¼Œä¸¦æª¢æŸ¥å®ƒå€‘æ˜¯å¦åœ¨ä¸€å€‹æ»‘å‹•çª—å£å…§è·¨è¶Šäº†å­˜æ´»é–¾å€¼ã€‚
é€™å€‹æ»‘å‹•çª—å£ç”± <code>SignedBlocksWindow</code> å®šç¾©ï¼Œä¸¦ä¸”æ­¤çª—å£ä¸­çš„ç´¢å¼•ç”±é©—è­‰è€…çš„ <code>ValidatorSigningInfo</code> ä¸­çš„ <code>IndexOffset</code> ç¢ºå®šã€‚
å°æ–¼æ¯å€‹è™•ç†çš„å€å¡Šï¼Œç„¡è«–é©—è­‰è€…æ˜¯å¦ç°½ç½²ï¼Œéƒ½æœƒå¢åŠ  <code>I</code>ndexOffset<code>ã€‚ä¸€æ—¦ç¢ºå®šç´¢å¼•ï¼Œå°±æœƒç›¸æ‡‰åœ°æ›´æ–°</code>MissedBlocksBitArray<code>å’Œ</code>MissedBlocksCounter`ã€‚</p>
<p>æœ€å¾Œï¼Œç‚ºäº†ç¢ºå®šé©—è­‰è€…æ˜¯å¦è·¨è¶Šäº†å­˜æ´»é–¾å€¼ï¼Œæˆ‘å€‘æœƒå–å¾—æœ€å¤§éŒ¯éå€å¡Šæ•¸ maxMissedï¼Œ
å®ƒç­‰æ–¼ <code>SignedBlocksWindow - (MinSignedPerWindow * SignedBlocksWindow)</code>ï¼Œ
ä»¥åŠå¯ä»¥ç¢ºå®šå­˜æ´»æ€§çš„æœ€å°é«˜åº¦ minHeightã€‚å¦‚æœç•¶å‰å€å¡Šé«˜åº¦å¤§æ–¼ minHeightï¼Œ
ä¸¦ä¸”é©—è­‰è€…çš„ <code>MissedBlocksCounter</code> å¤§æ–¼ <code>maxMissed</code>ï¼Œå‰‡æœƒå°å…¶é€²è¡Œæ‡²ç½°ï¼Œ
æ‡²ç½°æ–¹å¼æ˜¯å‰Šæ¸› <code>SlashFractionDowntime</code> çš„è²¢ç»å€¼ï¼Œä¸¦å°‡å…¶é—œæŠ¼åœ¨ <code>DowntimeJailDuration</code> çš„æ™‚é–“å…§
åŒæ™‚é‡ç½®ä»¥ä¸‹å€¼ï¼š<code>MissedBlocksBitArray</code>ã€<code>MissedBlocksCounter</code> å’Œ <code>IndexOffset</code>ã€‚</p>
<p><strong>æ³¨æ„</strong>: å­˜æ´»æ€§æ‡²ç½°<strong><em>ä¸æœƒ</em></strong>å°è‡´å¢“ç¢‘åŒ–ã€‚</p>
<pre><code class="language-go">height := block.Height

for vote in block.LastCommitInfo.Votes {
  signInfo := GetValidatorSigningInfo(vote.Validator.Address)

  // This is a relative index, so we counts blocks the validator SHOULD have
  // signed. We use the 0-value default signing info if not present, except for
  // start height.
  index := signInfo.IndexOffset % SignedBlocksWindow()
  signInfo.IndexOffset++

  // Update MissedBlocksBitArray and MissedBlocksCounter. The MissedBlocksCounter
  // just tracks the sum of MissedBlocksBitArray. That way we avoid needing to
  // read/write the whole array each time.
  missedPrevious := GetValidatorMissedBlockBitArray(vote.Validator.Address, index)
  missed := !signed

  switch {
  case !missedPrevious &amp;&amp; missed:
    // array index has changed from not missed to missed, increment counter
    SetValidatorMissedBlockBitArray(vote.Validator.Address, index, true)
    signInfo.MissedBlocksCounter++

  case missedPrevious &amp;&amp; !missed:
    // array index has changed from missed to not missed, decrement counter
    SetValidatorMissedBlockBitArray(vote.Validator.Address, index, false)
    signInfo.MissedBlocksCounter--

  default:
    // array index at this index has not changed; no need to update counter
  }

  if missed {
    // emit events...
  }

  minHeight := signInfo.StartHeight + SignedBlocksWindow()
  maxMissed := SignedBlocksWindow() - MinSignedPerWindow()

  // If we are past the minimum height and the validator has missed too many
  // jail and slash them.
  if height &gt; minHeight &amp;&amp; signInfo.MissedBlocksCounter &gt; maxMissed {
    validator := ValidatorByConsAddr(vote.Validator.Address)

    // emit events...

    // We need to retrieve the stake distribution which signed the block, so we
    // subtract ValidatorUpdateDelay from the block height, and subtract an
    // additional 1 since this is the LastCommit.
    //
    // Note, that this CAN result in a negative &quot;distributionHeight&quot; up to
    // -ValidatorUpdateDelay-1, i.e. at the end of the pre-genesis block (none) = at the beginning of the genesis block.
    // That's fine since this is just used to filter unbonding delegations &amp; redelegations.
    distributionHeight := height - sdk.ValidatorUpdateDelay - 1

    Slash(vote.Validator.Address, distributionHeight, vote.Validator.Power, SlashFractionDowntime())
    Jail(vote.Validator.Address)

    signInfo.JailedUntil = block.Time.Add(DowntimeJailDuration())

    // We need to reset the counter &amp; array so that the validator won't be
    // immediately slashed for downtime upon rebonding.
    signInfo.MissedBlocksCounter = 0
    signInfo.IndexOffset = 0
    ClearValidatorMissedBlockBitArray(vote.Validator.Address)
  }

  SetValidatorSigningInfo(vote.Validator.Address, signInfo)
}
</code></pre>
<h2 id="hooks">Hooks</h2>
<p>æœ¬ç¯€åŒ…å«æ¨¡çµ„çš„ hooks æè¿°ã€‚Hooks æ˜¯ç•¶äº‹ä»¶è§¸ç™¼æ™‚è‡ªå‹•åŸ·è¡Œçš„æ“ä½œã€‚</p>
<h3 id="staking-hooks">Staking hooks</h3>
<p>å‰Šæ¸›æ¨¡çµ„å¯¦ç¾äº†åœ¨ <code>x/staking</code> ä¸­å®šç¾©çš„ <code>StakingHooks</code>ï¼Œç”¨æ–¼è¨˜éŒ„é©—è­‰è€…çš„ä¿¡æ¯ã€‚
åœ¨æ‡‰ç”¨ç¨‹åºåˆå§‹åŒ–æœŸé–“ï¼Œé€™äº› <code>hooks</code> æ‡‰è©²åœ¨æ¬Šç›Šç¶å®šæ¨¡çµ„çµæ§‹ä¸­è¨»å†Šã€‚</p>
<p>ä»¥ä¸‹ hooks å½±éŸ¿å‰Šæ¸›ç‹€æ…‹ï¼š</p>
<ul>
<li><code>AfterValidatorBonded</code> æœƒæ ¹æ“šä»¥ä¸‹éƒ¨åˆ†çš„æè¿°å‰µå»ºä¸€å€‹ <code>V</code>alidatorSigningInfo` å¯¦ä¾‹ã€‚</li>
<li><code>AfterValidatorCreated</code> å­˜å„²é©—è­‰è€…çš„å…±è­˜å¯†é‘°ã€‚</li>
<li><code>AfterValidatorRemoved</code> åˆªé™¤é©—è­‰è€…çš„å…±è­˜å¯†é‘°ã€‚</li>
</ul>
<h3 id="_12">é©—è­‰è€…ç¶å®š</h3>
<p>åœ¨æ–°é©—è­‰è€…é¦–æ¬¡æˆåŠŸç¶å®šæ™‚ï¼Œæˆ‘å€‘ç‚ºæ–°ç¶å®šçš„é©—è­‰è€…å‰µå»ºä¸€å€‹æ–°çš„ <code>ValidatorSigningInfo</code> çµæ§‹ï¼Œå…¶ <code>StartHeight</code> ç‚ºç•¶å‰å€å¡Šçš„é«˜åº¦ã€‚</p>
<pre><code>onValidatorBonded(address sdk.ValAddress)

  signingInfo, found = GetValidatorSigningInfo(address)
  if !found {
    signingInfo = ValidatorSigningInfo {
      StartHeight         : CurrentHeight,
      IndexOffset         : 0,
      JailedUntil         : time.Unix(0, 0),
      Tombstone           : false,
      MissedBloskCounter  : 0
    }
    setValidatorSigningInfo(signingInfo)
  }

  return
</code></pre>
<h2 id="tags">Tags</h2>
<p>å‰Šæ¸›æ¨¡çµ„ç™¼å‡ºä»¥ä¸‹äº‹ä»¶/æ¨™ç±¤ï¼š</p>
<h2 id="msgserver">MsgServer</h2>
<h3 id="msgunjail">MsgUnjail</h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Attribute Key</th>
<th>Attribute Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>message</td>
<td>module</td>
<td>slashing</td>
</tr>
<tr>
<td>message</td>
<td>sender</td>
<td>{validatorAddress}</td>
</tr>
</tbody>
</table>
<h1 id="keeper">Keeper</h1>
<h2 id="beginblocker-handlevalidatorsignature">BeginBlocker: HandleValidatorSignature</h2>
<table>
<thead>
<tr>
<th>Type</th>
<th>Attribute Key</th>
<th>Attribute Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>slash</td>
<td>address</td>
<td>{validatorConsensusAddress}</td>
</tr>
<tr>
<td>slash</td>
<td>power</td>
<td>{validatorPower}</td>
</tr>
<tr>
<td>slash</td>
<td>reason</td>
<td>{slashReason}</td>
</tr>
<tr>
<td>slash</td>
<td>jailed [0]</td>
<td>{validatorConsensusAddress}</td>
</tr>
</tbody>
</table>
<ul>
<li>[0] åªæœ‰åœ¨é©—è­‰è€…è¢«æŠ•å…¥ç›£ç„æ™‚æ‰æœƒåŒ…æ‹¬ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>Type</th>
<th>Attribute Key</th>
<th>Attribute Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>liveness</td>
<td>address</td>
<td>{validatorConsensusAddress}</td>
</tr>
<tr>
<td>liveness</td>
<td>missed_blocks</td>
<td>{missedBlocksCounter}</td>
</tr>
<tr>
<td>liveness</td>
<td>height</td>
<td>{blockHeight}</td>
</tr>
</tbody>
</table>
<p>Slash</p>
<ul>
<li>èˆ‡ <code>HandleValidatorSignature</code> ä¸­çš„ <code>slash</code> äº‹ä»¶ç›¸åŒï¼Œä½†ä¸åŒ…æ‹¬ <code>jailed</code> å±¬æ€§ã€‚</li>
</ul>
<p>Jail</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Attribute Key</th>
<th>Attribute Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>slash</td>
<td>jailed</td>
<td>{validatorAddress}</td>
</tr>
</tbody>
</table>
<h2 id="_13">æ¬Šç›Šå¢“ç¢‘</h2>
<h3 id="_14">æ‘˜è¦</h3>
<p>åœ¨ç•¶å‰çš„ slashing æ¨¡çµ„å¯¦ç¾ä¸­ï¼Œç•¶å…±è­˜å¼•æ“é€šçŸ¥ç‹€æ…‹æ©Ÿå‡ºç¾é©—è­‰è€…å…±è­˜éŒ¯èª¤æ™‚ï¼Œè©²é©—è­‰è€…æœƒè¢«éƒ¨åˆ†å‰Šæ¸›ï¼Œä¸¦é€²å…¥â€œç›£ç„æœŸâ€ï¼Œ
åœ¨æ­¤æœŸé–“ä¸å…è¨±å…¶é‡æ–°åŠ å…¥é©—è­‰è€…é›†åˆã€‚
ç„¶è€Œï¼Œç”±æ–¼å…±è­˜éŒ¯èª¤å’Œ ABCI çš„æ€§è³ªï¼Œå¯èƒ½æœƒå­˜åœ¨ä¸€æ®µæ™‚é–“çš„å»¶é²ï¼Œä½¿å¾—é•è¦è¡Œç‚ºç™¼ç”Ÿå¾Œçš„è­‰æ“šåˆ°é”ç‹€æ…‹æ©Ÿï¼ˆé€™æ˜¯å­˜åœ¨è§£é™¤ç¶å®šæœŸçš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼‰ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæ¬Šç›Šå¢“ç¢‘çš„æ¦‚å¿µåƒ…é©ç”¨æ–¼å­˜åœ¨å»¶é²çš„éŒ¯èª¤ï¼Œä¾‹å¦‚ç”±æ–¼ä¸å¯é æ¸¬çš„è­‰æ“šå‚³æ’­å±¤å»¶é²ä»¥åŠé©—è­‰è€…æœ‰é¸æ“‡æ€§åœ°æ­ç¤ºé›™ç°½åï¼ˆä¾‹å¦‚å‘ä¸ç¶“å¸¸åœ¨ç·šçš„è¼•å®¢æˆ¶ç«¯æ­ç¤ºï¼‰ï¼Œ
è­‰æ“šè¡¨æ˜é©—è­‰è€…é›™é‡ç°½åå¯èƒ½éœ€è¦ä¸€æ®µæ™‚é–“æ‰èƒ½åˆ°é”ç‹€æ…‹æ©Ÿã€‚
å¦ä¸€æ–¹é¢ï¼Œæ´»æ€§å‰Šæ¸›æœƒåœ¨é•è¦è¡Œç‚ºç™¼ç”Ÿå¾Œç«‹å³æª¢æ¸¬åˆ°ï¼Œå› æ­¤ä¸éœ€è¦å‰Šæ¸›æœŸã€‚
é©—è­‰è€…ç«‹å³é€²å…¥ç›£ç„æœŸï¼Œä»–å€‘ä¸èƒ½å†çŠ¯æ´»æ€§éŒ¯èª¤ï¼Œç›´åˆ°è§£é™¤ç›£ç„ã€‚
å°‡ä¾†å¯èƒ½æœƒå‡ºç¾å…¶ä»–é¡å‹çš„æ‹œå åº­éŒ¯èª¤ï¼Œä¾‹å¦‚å°‡ç„¡æ•ˆææ¡ˆä½œç‚ºäº¤æ˜“æäº¤çš„è­‰æ“šã€‚
ç•¶å¯¦æ–½æ™‚ï¼Œå¿…é ˆæ±ºå®šé€™äº›æœªä¾†çš„æ‹œå åº­éŒ¯èª¤æ˜¯å¦æœƒå°è‡´å¢“ç¢‘ï¼ˆå¦‚æœä¸æ˜¯ï¼Œå‰Šæ¸›é‡‘é¡å°‡ä¸æœƒå—åˆ°å‰Šæ¸›æœŸçš„é™åˆ¶ï¼‰ã€‚</p>
</blockquote>
<p>åœ¨ç›®å‰çš„ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œ
ä¸€æ—¦éªŒè¯è€…ç”±äºå…±è¯†é”™è¯¯è€Œè¢«å…³è¿›ç›‘ç‹±ï¼Œç»è¿‡JailPeriodï¼ˆç›‘ç‹±æ—¶æœŸï¼‰åï¼Œä»–ä»¬å¯ä»¥å‘é€ä¸€ä¸ªunjailï¼ˆè§£é™¤ç›‘ç¦ï¼‰äº¤æ˜“æ¥è§£é™¤è‡ªå·±çš„ç›‘ç¦çŠ¶æ€ï¼Œä»è€Œé‡æ–°åŠ å…¥éªŒè¯è€…é›†åˆã€‚
è¿™æ ·çš„è®¾è®¡å…è®¸éªŒè¯è€…åœ¨è¢«æƒ©ç½šå¹¶å®Œæˆç›‘ç¦æœŸåæœ‰æœºä¼šæ¢å¤å…¶éªŒè¯è€…èº«ä»½ã€‚</p>
<p>slashingæ¨¡å—çš„ä¸€ä¸ªâ€œè®¾è®¡æ„¿æœ›â€æ˜¯ï¼Œå¦‚æœåœ¨æ‰§è¡Œè¯æ®ï¼ˆå¹¶å°†éªŒè¯è€…å…³è¿›ç›‘ç‹±ï¼‰ä¹‹å‰å‘ç”Ÿäº†å¤šæ¬¡è¿è§„è¡Œä¸ºï¼Œ
é‚£ä¹ˆéªŒè¯è€…åº”è¯¥åªå—åˆ°æœ€ä¸¥é‡è¿è§„è¡Œä¸ºçš„æƒ©ç½šï¼Œè€Œä¸æ˜¯ç´¯ç§¯æƒ©ç½š
ä¾‹å¦‚ï¼Œå¦‚æœäº‹ä»¶çš„é¡ºåºæ˜¯ï¼š</p>
<p>1.é©—è­‰è€…AçŠ¯ä¸‹é•è¦è¡Œç‚º1ï¼ˆåƒ¹å€¼30%å‰Šæ¸›ï¼‰
2.é©—è­‰è€…AçŠ¯ä¸‹é•è¦è¡Œç‚º2ï¼ˆåƒ¹å€¼40%å‰Šæ¸›ï¼‰
3.é©—è­‰è€…AçŠ¯ä¸‹é•è¦è¡Œç‚º3ï¼ˆåƒ¹å€¼35%å‰Šæ¸›ï¼‰
4.é•è¦è¡Œç‚º1çš„è­‰æ“šåˆ°é”ç‹€æ…‹æ©Ÿï¼ˆä¸¦å°‡é©—è­‰è€…é—œå…¥ç›£ç„ï¼‰
5.é•è¦è¡Œç‚º2çš„è­‰æ“šåˆ°é”ç‹€æ…‹æ©Ÿ
6.é•è¦è¡Œç‚º3çš„è­‰æ“šåˆ°é”ç‹€æ…‹æ©Ÿ</p>
<p>åªæœ‰é•è¦è¡Œç‚º2æ‡‰è©²ç”Ÿæ•ˆå…¶å‰Šæ¸›ï¼Œå› ç‚ºå®ƒæ˜¯æœ€é«˜çš„ã€‚
é€™æ¨£åšæ˜¯ç‚ºäº†åœ¨é©—è­‰è€…çš„å…±è­˜å¯†é‘°è¢«ç ´å£çš„æƒ…æ³ä¸‹ï¼Œå³ä½¿é»‘å®¢å°å¤šå€‹å€å¡Šé€²è¡Œé›™é‡ç°½åï¼Œä»–å€‘ä¹Ÿåªæœƒè¢«æ‡²ç½°ä¸€æ¬¡
å› ç‚ºï¼Œè§£é™¤ç›£ç¦å¿…é ˆä½¿ç”¨é©—è­‰è€…çš„æ“ä½œå¯†é‘°ï¼Œä»–å€‘æœ‰æ©Ÿæœƒé‡æ–°ä¿è­·ä»–å€‘çš„å…±è­˜å¯†é‘°ï¼Œç„¶å¾Œä½¿ç”¨ä»–å€‘çš„æ“ä½œå¯†é‘°ç™¼å‡ºä¿¡è™Ÿè¡¨æ˜ä»–å€‘å·²ç¶“æº–å‚™å¥½ã€‚
æˆ‘å€‘å°‡åœ¨é€™æ®µæœŸé–“å…§åƒ…è¿½è¸ªæœ€å¤§é•è¦è¡Œç‚ºï¼Œç¨±ç‚º"å‰Šæ¸›æœŸ"ã€‚</p>
<p>ä¸€æ—¦é©—è­‰è€…é€šéè§£é™¤ç›£ç¦é‡æ–°åŠ å…¥ï¼Œæˆ‘å€‘å°‡é–‹å§‹ä¸€å€‹æ–°çš„å‰Šæ¸›æœŸï¼›
å¦‚æœä»–å€‘åœ¨è§£é™¤ç›£ç¦å¾ŒçŠ¯ä¸‹æ–°çš„é•è¦è¡Œç‚ºï¼Œå‰‡å°‡åœ¨å‰ä¸€å€‹å‰Šæ¸›æœŸçš„æœ€åš´é‡é•è¦è¡Œç‚ºåŸºç¤ä¸Šç´¯è¨ˆå‰Šæ¸›ã€‚</p>
<p>ç„¶è€Œï¼Œé›–ç„¶é•è¦è¡Œç‚ºæ˜¯æ ¹æ“šå‰Šæ¸›æœŸé€²è¡Œåˆ†çµ„ï¼Œä½†ç”±æ–¼è­‰æ“šå¯ä»¥åœ¨é•è¦è¡Œç‚ºä¹‹å¾Œçš„"è§£é™¤ç¶å®šæœŸ"å…§æäº¤ï¼Œ
æˆ‘å€‘ä»ç„¶å¿…é ˆå…è¨±æäº¤å…ˆå‰å‰Šæ¸›æœŸçš„è­‰æ“šã€‚
ä¾‹å¦‚ï¼Œå¦‚æœäº‹ä»¶çš„é †åºæ˜¯ï¼š</p>
<p>1.é©—è­‰è€…AçŠ¯ä¸‹é•è¦è¡Œç‚º1ï¼ˆåƒ¹å€¼30%å‰Šæ¸›ï¼‰
2.é©—è­‰è€…AçŠ¯ä¸‹é•è¦è¡Œç‚º2ï¼ˆåƒ¹å€¼40%å‰Šæ¸›ï¼‰
3.é•è¦è¡Œç‚º1çš„è­‰æ“šåˆ°é”ç‹€æ…‹æ©Ÿï¼ˆé©—è­‰è€…Aè¢«ç›£ç¦ï¼‰
4.é©—è­‰è€…Aè§£é™¤ç›£ç¦</p>
<p>æˆ‘å€‘ç¾åœ¨é€²å…¥äº†ä¸€å€‹æ–°çš„å‰Šæ¸›æœŸï¼Œä½†æ˜¯æˆ‘å€‘ä»ç„¶å¿…é ˆç‚ºä¹‹å‰çš„é•è¦è¡Œç‚ºç•™ä¸‹ç©ºé–“ï¼Œå› ç‚ºé•è¦è¡Œç‚º2çš„è­‰æ“šå¯èƒ½ä»æœƒå‡ºç¾ã€‚
éš¨è‘—å‰Šæ¸›æœŸæ•¸é‡çš„å¢åŠ ï¼Œå®ƒæœƒå¸¶ä¾†æ›´å¤šçš„è¤‡é›œæ€§ï¼Œå› ç‚ºæˆ‘å€‘å¿…é ˆè·Ÿè¸ªæ¯å€‹å‰Šæ¸›æœŸçš„æœ€é«˜é•è¦è¡Œç‚ºé‡‘é¡ã€‚
é€™å¯èƒ½æœƒå¢åŠ ä¸€äº›è¤‡é›œæ€§ï¼Œä½†é€™æ˜¯å¿…è¦çš„ï¼Œä»¥ç¢ºä¿æ•´å€‹ç¶²çµ¡çš„å®‰å…¨å’Œç©©å®šã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæ ¹æ“šâ€œå‰Šæ¸›â€æ¨¡å¡Šçš„è¦ç¯„ï¼Œæ¯ç•¶é©—è­‰å™¨å–æ¶ˆç¶å®šç„¶å¾Œé‡æ–°ç¶å®šæ™‚ï¼Œå°±æœƒå‰µå»ºä¸€å€‹æ–°çš„å‰Šæ¸›æœŸã€‚é€™å¯èƒ½æ‡‰è©²æ›´æ”¹ç‚ºè¢«ç›£ç¦/è§£é™¤ç›£ç¦ã€‚æœ‰é—œæ›´å¤šè©³ç´°ä¿¡æ¯ï¼Œè«‹åƒè¦‹å•é¡Œ <a href="https://github.com/cosmos/cosmos-sdk/issues/3205">#3205</a>ã€‚
åœ¨æ¥ä¸‹ä¾†çš„å…§å®¹ä¸­ï¼Œæˆ‘å°‡å‡è¨­æˆ‘å€‘åªæœ‰åœ¨é©—è­‰å™¨è¢«è§£é™¤ç›£ç¦æ™‚æ‰é–‹å§‹ä¸€å€‹æ–°çš„å‰Šæ¸›æœŸã€‚</p>
</blockquote>
<p>æœ€å¤§å‰Šå‡æœŸæ•°æ˜¯ <code>len(UnbondingPeriod) / len(JailPeriod)</code>ã€‚
Gaia ä¸­ <code>UnbondingPeriod</code> å’Œ <code>JailPeriod</code> çš„é»˜è®¤å€¼åˆ†åˆ«ä¸º 3 å‘¨å’Œ 2 å¤©ã€‚è¿™æ„å‘³ç€æ¯ä¸ªéªŒè¯å™¨å¯èƒ½åŒæ—¶è¢«è·Ÿè¸ªå¤šè¾¾ 11 ä¸ªå‰Šå‡æœŸã€‚
å¦‚æœæˆ‘ä»¬å°† <code>JailPeriod &gt;= UnbondingPeriod</code>ï¼Œæˆ‘ä»¬åªéœ€è¦è·Ÿè¸ª 1 ä¸ªå‰Šå‡æœŸï¼ˆå³ä¸éœ€è¦è·Ÿè¸ªå‰Šå‡æœŸï¼‰ã€‚</p>
<p>ç›®å‰ï¼Œåœ¨ç›£ç¦æœŸå¯¦ç¾ä¸­ï¼Œä¸€æ—¦é©—è­‰å™¨è§£é™¤ç›£ç¦ï¼Œæ‰€æœ‰å§”è¨—çµ¦ä»–å€‘çš„å§”è¨—äººï¼ˆæ²’æœ‰å–æ¶ˆç¶å®š/é‡æ–°å§”è¨—ï¼‰éƒ½æœƒç•™åœ¨ä»–å€‘èº«é‚Šã€‚
é‘’æ–¼å…±è­˜å®‰å…¨æ•…éšœéå¸¸åš´é‡ï¼ˆæ¯”æ´»æ€§æ•…éšœåš´é‡å¾—å¤šï¼‰ï¼Œè®“å§”è¨—äººä¸è‡ªå‹•é‡æ–°å§”è¨—çµ¦é©—è­‰å™¨å¯èƒ½æ˜¯æ˜æ™ºçš„é¸æ“‡ã€‚</p>
<h3 id="_15">æè­°ï¼šç„¡é™ç›£ç¦</h3>
<p>æˆ‘å€‘å»ºè­°å°‡å…±è­˜å®‰å…¨æ•…éšœçš„â€œç›£ç¦æ™‚é–“â€è¨­ç½®ç‚ºç„¡é™ï¼ˆå³å¢“ç¢‘ç‹€æ…‹ï¼‰ã€‚
é€™å¯¦éš›ä¸Šå°‡é©—è­‰å™¨è¸¢å‡ºé©—è­‰å™¨é›†åˆï¼Œä¸¦ä¸”ä¸å…è¨±å®ƒå€‘é‡æ–°é€²å…¥é©—è­‰å™¨é›†åˆã€‚
ä»–å€‘çš„æ‰€æœ‰å§”è¨—äººï¼ˆåŒ…æ‹¬æ“ä½œå“¡æœ¬èº«ï¼‰å¿…é ˆå–æ¶ˆç¶å®šæˆ–é‡æ–°å§”è¨—ã€‚
å¦‚æœé©—è­‰å™¨æ“ä½œå“¡é¡˜æ„ï¼Œå¯ä»¥å‰µå»ºä¸€å€‹æ–°çš„é©—è­‰å™¨ï¼Œå¸¶æœ‰æ–°çš„æ“ä½œå“¡å¯†é‘°å’Œå…±è­˜å¯†é‘°ï¼Œä½†æ˜¯ä»–å€‘å¿…é ˆâ€œé‡æ–°è´å¾—â€ä»–å€‘çš„å§”è¨—ã€‚</p>
<p>å¯¦ç¾å¢“ç¢‘ç³»çµ±ä¸¦ä¸”æ“ºè„«æ‡²ç½°æœŸè¿½è¸ªå°‡ä½¿ <code>slashing</code> æ¨¡å¡Šè®Šå¾—æ›´ç°¡å–®ï¼Œ
ç‰¹åˆ¥æ˜¯å› ç‚ºæˆ‘å€‘å¯ä»¥åˆªé™¤stakingæ¨¡å¡Šä¸­ä½¿ç”¨çš„<code>slashing</code>æ¨¡å¡Šå®šç¾©çš„æ‰€æœ‰é‰¤å­ï¼ˆ<code>slashing</code>æ¨¡å¡Šä»ç„¶ä½¿ç”¨<code>staking</code>ä¸­å®šç¾©çš„é‰¤å­</p>
<h3 id="_16">å•æ¬¡æƒ©ç½šé‡‘é¢</h3>
<p>å¦ä¸€å€‹å¯ä»¥é€²è¡Œçš„å„ªåŒ–æ˜¯ï¼Œå¦‚æœæˆ‘å€‘å‡è¨­æ‰€æœ‰Tendermintå…±è­˜çš„ABCIæ•…éšœéƒ½æœƒè¢«å‰Šæ¸›ç›¸åŒçš„é‡‘é¡ï¼Œ
æˆ‘å€‘å°±ä¸å¿…è·Ÿè¸ªâ€œæœ€å¤§å‰Šæ¸›é‡‘é¡â€ã€‚
ä¸€æ—¦ç™¼ç”ŸABCIæ•…éšœï¼Œæˆ‘å€‘å°±ä¸å¿…æ“”å¿ƒæ¯”è¼ƒæœªä¾†å¯èƒ½ç™¼ç”Ÿçš„æ•…éšœï¼Œä»¥æ‰¾åˆ°æœ€å¤§å‰Šæ¸›é‡‘é¡ã€‚</p>
<p>ç›®å‰å”¯ä¸€çš„ Tendermint ABCI æ•…éšœæ˜¯ï¼š</p>
<ul>
<li>ä¸åˆç†çš„é æäº¤ï¼ˆé›™é‡ç°½åï¼‰</li>
</ul>
<p>ç›®å‰è¨ˆåŠƒåœ¨ä¸ä¹…çš„å°‡ä¾†åŒ…æ‹¬ä»¥ä¸‹æ•…éšœï¼š</p>
<ul>
<li>åœ¨æœªç¶å®šæœŸé–“ç°½ç½²é æäº¤ï¼ˆéœ€è¦ä½¿è¼•å®¢æˆ¶ç«¯äºŒåˆ†æ³•å®‰å…¨ï¼‰</li>
</ul>
<p>é‘‘æ–¼é€™äº›æ•…éšœéƒ½æ˜¯å¯æ­¸å› çš„æ‹œå åº­æ•…éšœï¼Œæˆ‘å€‘å¯èƒ½å¸Œæœ›å°å®ƒå€‘é€²è¡Œç›¸åŒçš„æ‡²ç½°ï¼Œå› æ­¤æˆ‘å€‘å¯ä»¥å¯¦æ–½ä¸Šè¿°æ›´æ”¹ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæ­¤æ›´æ”¹å¯èƒ½å°ç•¶å‰çš„Tendermintå…±è­˜ç®—æ³•æœ‰æ„ç¾©ï¼Œ
ä½†å°æ–¼ä¸åŒçš„å…±è­˜ç®—æ³•æˆ–æœªä¾†å¯èƒ½å¸Œæœ›ä»¥ä¸åŒç´šåˆ¥é€²è¡Œæ‡²ç½°ï¼ˆä¾‹å¦‚éƒ¨åˆ†æ‡²ç½°ï¼‰çš„Tendermintç‰ˆæœ¬å¯èƒ½æ²’æœ‰æ„ç¾©ã€‚</p>
</blockquote>
<h2 id="parameters">Parameters(åƒæ•¸)</h2>
<p>æ‡²ç½°æ¨¡çµ„åŒ…å«ä»¥ä¸‹åƒæ•¸</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>SignedBlocksWindow</td>
<td>string (int64)</td>
<td>"100"</td>
</tr>
<tr>
<td>MinSignedPerWindow</td>
<td>string (dec)</td>
<td>"0.500000000000000000"</td>
</tr>
<tr>
<td>DowntimeJailDuration</td>
<td>string (ns)</td>
<td>"600000000000"</td>
</tr>
<tr>
<td>SlashFractionDoubleSign</td>
<td>string (dec)</td>
<td>"0.050000000000000000"</td>
</tr>
<tr>
<td>SlashFractionDowntime</td>
<td>string (dec)</td>
<td>"0.010000000000000000"</td>
</tr>
</tbody>
</table>
<h2 id="cli">CLI</h2>
<p>ç”¨æˆ¶å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰æŸ¥è©¢å’Œèˆ‡<code>slashing</code>æ¨¡çµ„é€²è¡Œäº’å‹•ã€‚</p>
<h3 id="query">Query</h3>
<p><code>query</code>å‘½ä»¤å…è¨±ç”¨æˆ¶æŸ¥è©¢<code>slashing</code>ç‹€æ…‹ã€‚</p>
<pre><code class="language-bash">stcd query slashing --help
</code></pre>
<h4 id="params">params</h4>
<p>paramså‘½ä»¤å…è¨±ç”¨æˆ¶æŸ¥è©¢slashingæ¨¡çµ„çš„å‰µä¸–åƒæ•¸ã€‚</p>
<pre><code class="language-bash">stcd query slashing params [flags]
</code></pre>
<p>ç¯„ä¾‹:</p>
<pre><code class="language-bash">stcd query slashing params
</code></pre>
<p>ç¯„ä¾‹è¼¸å‡º:</p>
<pre><code class="language-bash">downtime_jail_duration: 600s
min_signed_per_window: &quot;0.500000000000000000&quot;
signed_blocks_window: &quot;100&quot;
slash_fraction_double_sign: &quot;0.050000000000000000&quot;
slash_fraction_downtime: &quot;0.010000000000000000&quot;
</code></pre>
<h4 id="signing-info">signing-info</h4>
<p><code>signing-info</code>å‘½ä»¤å…è¨±ç”¨æˆ¶ä½¿ç”¨å…±è­˜å…¬é‘°æŸ¥è©¢é©—è­‰è€…çš„ç°½åä¿¡æ¯ã€‚</p>
<pre><code class="language-bash">stcd query slashing signing-infos [flags]
</code></pre>
<p>ç¯„ä¾‹:</p>
<pre><code class="language-bash">stcd query slashing signing-info '{&quot;@type&quot;:&quot;/cosmos.crypto.ed25519.PubKey&quot;,&quot;key&quot;:&quot;Auxs3865HpB/EfssYOzfqNhEJjzys6jD5B6tPgC8=&quot;}'

</code></pre>
<p>ç¯„ä¾‹è¼¸å‡º:</p>
<pre><code class="language-bash">address: cosmosvalcons1nrqsld3aw6lh6t082frdqc84uwxn0t958c
index_offset: &quot;2068&quot;
jailed_until: &quot;1970-01-01T00:00:00Z&quot;
missed_blocks_counter: &quot;0&quot;
start_height: &quot;0&quot;
tombstoned: false
</code></pre>
<h4 id="signing-infos">signing-infos</h4>
<p><code>signing-infos</code>å‘½ä»¤å…è¨±ç”¨æˆ¶æŸ¥è©¢æ‰€æœ‰é©—è­‰è€…çš„ç°½åä¿¡æ¯ã€‚</p>
<pre><code class="language-bash">stcd query slashing signing-infos [flags]
</code></pre>
<p>ç¯„ä¾‹:</p>
<pre><code class="language-bash">stcd query slashing signing-infos
</code></pre>
<p>ç¯„ä¾‹è¼¸å‡º:</p>
<pre><code class="language-bash">info:
- address: cosmosvalcons1nrqsld3aw6lh6t082frdqc84uwxn0t958c
  index_offset: &quot;2075&quot;
  jailed_until: &quot;1970-01-01T00:00:00Z&quot;
  missed_blocks_counter: &quot;0&quot;
  start_height: &quot;0&quot;
  tombstoned: false
pagination:
  next_key: null
  total: &quot;0&quot;
</code></pre>
<h3 id="_17">äº¤æ˜“</h3>
<p><code>tx</code>å‘½ä»¤å…è¨±ç”¨æˆ¶èˆ‡<code>slashing</code>æ¨¡çµ„é€²è¡Œäº’å‹•ã€‚</p>
<pre><code class="language-bash"> tx slashing --help
</code></pre>
<h4 id="unjail_1">unjail</h4>
<p><code>unjail</code>å‘½ä»¤å…è¨±ç”¨æˆ¶è§£ç¦å…ˆå‰å› åœæ©Ÿæ™‚é–“è€Œè¢«ç¦ç”¨çš„é©—è­‰è€…ã€‚</p>
<pre><code class="language-bash">  simd tx slashing unjail --from mykey [flags]
</code></pre>
<p>ç¯„ä¾‹:</p>
<pre><code class="language-bash">stcd tx slashing unjail --from mykey
</code></pre>
<h2 id="grpc">gRPC</h2>
<p>ç”¨æˆ¶å¯ä»¥ä½¿ç”¨gRPCç«¯é»æŸ¥è©¢<code>slashing</code>æ¨¡çµ„ã€‚</p>
<h3 id="params_1">Params</h3>
<p><code>Params</code>ç«¯é»å…è¨±ç”¨æˆ¶æŸ¥è©¢å‰Šæ¸›æ¨¡çµ„çš„åƒæ•¸ã€‚</p>
<pre><code class="language-bash">cosmos.slashing.v1beta1.Query/Params
</code></pre>
<p>ç¯„ä¾‹:</p>
<pre><code class="language-bash">grpcurl -plaintext localhost:9090 cosmos.slashing.v1beta1.Query/Params
</code></pre>
<p>ç¯„ä¾‹è¼¸å‡º:</p>
<pre><code class="language-bash">{
  &quot;params&quot;: {
    &quot;signedBlocksWindow&quot;: &quot;100&quot;,
    &quot;minSignedPerWindow&quot;: &quot;NTAwMDAwMDAwMDAwMDAwMDAw&quot;,
    &quot;downtimeJailDuration&quot;: &quot;600s&quot;,
    &quot;slashFractionDoubleSign&quot;: &quot;NTAwMDAwMDAwMDAwMDAwMDA=&quot;,
    &quot;slashFractionDowntime&quot;: &quot;MTAwMDAwMDAwMDAwMDAwMDA=&quot;
  }
}
</code></pre>
<h3 id="signinginfo">SigningInfo</h3>
<p>SigningInfoæŸ¥è©¢çµ¦å®šå…±è­˜åœ°å€çš„ç°½åä¿¡æ¯ã€‚</p>
<pre><code class="language-bash">cosmos.slashing.v1beta1.Query/SigningInfo
</code></pre>
<p>ç¯„ä¾‹:</p>
<pre><code class="language-bash">grpcurl -plaintext -d '{&quot;cons_address&quot;:&quot;cosmosvalcons1nrqsld3aw6lh6t082frdqc84uwxn0t958c&quot;}' localhost:9090 cosmos.slashing.v1beta1.Query/SigningInfo
</code></pre>
<p>ç¯„ä¾‹è¼¸å‡º:</p>
<pre><code class="language-bash">{
  &quot;valSigningInfo&quot;: {
    &quot;address&quot;: &quot;cosmosvalcons1nrqsld3aw6lh6t082frdqc84uwxn0t958c&quot;,
    &quot;indexOffset&quot;: &quot;3493&quot;,
    &quot;jailedUntil&quot;: &quot;1970-01-01T00:00:00Z&quot;
  }
}
</code></pre>
<h3 id="signinginfos">SigningInfos</h3>
<p><code>SigningInfos</code>æŸ¥è©¢æ‰€æœ‰é©—è­‰è€…çš„ç°½åä¿¡æ¯ã€‚</p>
<pre><code class="language-bash">cosmos.slashing.v1beta1.Query/SigningInfos
</code></pre>
<p>ç¯„ä¾‹:</p>
<pre><code class="language-bash">grpcurl -plaintext localhost:9090 cosmos.slashing.v1beta1.Query/SigningInfos
</code></pre>
<p>ç¯„ä¾‹è¼¸å‡º:</p>
<pre><code class="language-bash">{
  &quot;info&quot;: [
    {
      &quot;address&quot;: &quot;cosmosvalcons1nrqslkwd3pz096lh6t082frdqc84uwxn0t958c&quot;,
      &quot;indexOffset&quot;: &quot;2467&quot;,
      &quot;jailedUntil&quot;: &quot;1970-01-01T00:00:00Z&quot;
    }
  ],
  &quot;pagination&quot;: {
    &quot;total&quot;: &quot;1&quot;
  }
}
</code></pre>
<h2 id="rest">REST</h2>
<p>ç”¨æˆ¶å¯ä»¥ä½¿ç”¨RESTç«¯é»æŸ¥è©¢<code>slashing</code>æ¨¡çµ„ã€‚</p>
<h3 id="params_2">Params</h3>
<pre><code class="language-bash">/cosmos/slashing/v1beta1/params
</code></pre>
<p>ç¯„ä¾‹:</p>
<pre><code class="language-bash">curl &quot;localhost:1317/cosmos/slashing/v1beta1/params&quot;
</code></pre>
<p>ç¯„ä¾‹è¼¸å‡º:</p>
<pre><code class="language-bash">{
  &quot;params&quot;: {
    &quot;signed_blocks_window&quot;: &quot;100&quot;,
    &quot;min_signed_per_window&quot;: &quot;0.500000000000000000&quot;,
    &quot;downtime_jail_duration&quot;: &quot;600s&quot;,
    &quot;slash_fraction_double_sign&quot;: &quot;0.050000000000000000&quot;,
    &quot;slash_fraction_downtime&quot;: &quot;0.010000000000000000&quot;
}
</code></pre>
<h3 id="signing_info">signing_info</h3>
<pre><code class="language-bash">/cosmos/slashing/v1beta1/signing_infos/%s
</code></pre>
<p>ç¯„ä¾‹:</p>
<pre><code class="language-bash">curl &quot;localhost:1317/cosmos/slashing/v1beta1/signing_infos/cosmosvalcons1nrqslkwd3pz096lh6t082frdqc84uwxn0t958c&quot;
</code></pre>
<p>ç¯„ä¾‹è¼¸å‡º:</p>
<pre><code class="language-bash">{
  &quot;val_signing_info&quot;: {
    &quot;address&quot;: &quot;cosmosvalcons1nrqslkwd3pz096lh6t082frdqc84uwxn0t958c&quot;,
    &quot;start_height&quot;: &quot;0&quot;,
    &quot;index_offset&quot;: &quot;4184&quot;,
    &quot;jailed_until&quot;: &quot;1970-01-01T00:00:00Z&quot;,
    &quot;tombstoned&quot;: false,
    &quot;missed_blocks_counter&quot;: &quot;0&quot;
  }
}
</code></pre>
<h3 id="signing_infos">signing_infos</h3>
<pre><code class="language-bash">/cosmos/slashing/v1beta1/signing_infos
</code></pre>
<p>ç¯„ä¾‹:</p>
<pre><code class="language-bash">curl &quot;localhost:1317/cosmos/slashing/v1beta1/signing_infos
</code></pre>
<p>ç¯„ä¾‹è¼¸å‡º:</p>
<pre><code class="language-bash">{
  &quot;info&quot;: [
    {
      &quot;address&quot;: &quot;cosmosvalcons1nrqslkwd3pz096lh6t082frdqc84uwxn0t958c&quot;,
      &quot;start_height&quot;: &quot;0&quot;,
      &quot;index_offset&quot;: &quot;4169&quot;,
      &quot;jailed_until&quot;: &quot;1970-01-01T00:00:00Z&quot;,
      &quot;tombstoned&quot;: false,
      &quot;missed_blocks_counter&quot;: &quot;0&quot;
    }
  ],
  &quot;pagination&quot;: {
    &quot;next_key&quot;: null,
    &quot;total&quot;: &quot;1&quot;
  }
}
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.51198bba.min.js"></script>
      
    
  </body>
</html>