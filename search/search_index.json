{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"DAODST\u200b\u6587\u6a94\u200b\u9996\u9875","text":""},{"location":"api/","title":"Home","text":""},{"location":"api/#cli","title":"cli","text":""},{"location":"api/#eth-json-grpc","title":"eth json grpc","text":""},{"location":"api/#cosmos-grpc","title":"cosmos grpc","text":""},{"location":"auth/","title":"<code>auth</code>","text":""},{"location":"auth/#_1","title":"\u6458\u8981","text":"<p>\u200b\u672c\u6587\u200b\u6a94\u200b\u6307\u5b9a\u200b\u4e86\u200b auth(\u200b\u6388\u6b0a\u200b) \u200b\u6a21\u584a\u200b\u3002</p> <p>auth \u200b\u6a21\u584a\u200b\u8ca0\u8cac\u200b\u6307\u5b9a\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u57fa\u672c\u200b\u4ea4\u6613\u200b\u548c\u200b\u5e33\u6236\u200b\u985e\u578b\u200b\uff0c\u200b\u56e0\u70ba\u200b SDK \u200b\u672c\u8eab\u200b\u5c0d\u200b\u9019\u4e9b\u200b\u7d30\u7bc0\u200b\u662f\u200b\u4e0d\u200b\u53ef\u77e5\u200b\u7684\u200b\u3002 \u200b\u5b83\u200b\u5305\u542b\u200b ante \u200b\u8655\u7406\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u5176\u4e2d\u200b\u57f7\u884c\u200b\u6240\u6709\u200b\u57fa\u672c\u200b\u4ea4\u6613\u200b\u6709\u6548\u6027\u200b\u6aa2\u67e5\u200b\uff08\u200b\u7c3d\u540d\u200b\u3001\u200b\u96a8\u6a5f\u6578\u200b\u3001\u200b\u8f14\u52a9\u200b\u5b57\u200b\u6bb5\u200b\uff09\uff0c \u200b\u4e26\u516c\u958b\u200b account keeper\uff0c\u200b\u5141\u8a31\u200b\u5176\u4ed6\u200b\u6a21\u584a\u200b\u8b80\u53d6\u200b\u3001\u200b\u5beb\u5165\u200b\u548c\u200b\u4fee\u6539\u200b\u8cec\u6236\u200b\u3002</p>"},{"location":"auth/#_2","title":"\u6982\u5ff5","text":""},{"location":"auth/#gas-fees","title":"Gas(\u200b\u6c14\u4f53\u200b) &amp; Fees\uff08\u200b\u624b\u7eed\u8d39\u200b\uff09","text":"<p>\u200b\u5c0d\u200b\u65bc\u200b\u7db2\u7d61\u200b\u904b\u71df\u200b\u5546\u4f86\u200b\u8aaa\u200b\uff0c\u200b\u8cbb\u7528\u200b\u6709\u200b\u5169\u500b\u200b\u76ee\u7684\u200b\u3002</p> <p>\u200b\u624b\u7eed\u8d39\u200b\u9650\u5236\u200b\u4e86\u200b\u6bcf\u500b\u200b\u5b8c\u6574\u200b\u7bc0\u9ede\u200b\u5b58\u5132\u200b\u7684\u200b\u72c0\u614b\u200b\u7684\u200b\u589e\u9577\u200b\uff0c\u200b\u4e26\u5141\u8a31\u200b\u5c0d\u200b\u7d93\u6fdf\u200b\u50f9\u503c\u200b\u5f88\u5c0f\u200b\u7684\u200b\u4ea4\u6613\u200b\u9032\u884c\u200b\u901a\u7528\u200b\u5be9\u67e5\u200b\u3002 \u200b\u624b\u7eed\u8d39\u200b\u6700\u9069\u200b\u5408\u4f5c\u200b\u70ba\u200b\u53cd\u5783\u573e\u200b\u90f5\u4ef6\u200b\u6a5f\u5236\u200b\uff0c\u200b\u5176\u4e2d\u200b\u9a57\u8b49\u8005\u200b\u5c0d\u200b\u7db2\u7d61\u200b\u7684\u200b\u4f7f\u7528\u200b\u548c\u200b\u7528\u6236\u200b\u8eab\u4efd\u200b\u4e0d\u611f\u200b\u8208\u8da3\u200b\u3002</p> <p>\u200b\u624b\u7eed\u8d39\u200b\u7531\u200b\u4ea4\u6613\u200b\u63d0\u4f9b\u200b\u7684\u200b gas \u200b\u9650\u984d\u200b\u548c\u200b gas \u200b\u50f9\u683c\u200b\u6c7a\u5b9a\u200b\uff0c\u200b\u5176\u4e2d\u200b</p> <pre><code>fees = ceil(gasLimit * gasPrices)\u3002\n</code></pre> <p>Txs \u200b\u6703\u70ba\u200b\u6240\u6709\u200b\u72c0\u614b\u200b\u8b80\u200b/\u200b\u5beb\u200b\u3001\u200b\u7c3d\u540d\u9a57\u8b49\u200b\u4ee5\u53ca\u200b\u8207\u200b tx \u200b\u5927\u5c0f\u200b\u6210\u200b\u6bd4\u4f8b\u200b\u7684\u200b\u6210\u672c\u200b\u7522\u751f\u200b gas \u200b\u6210\u672c\u200b\u3002 \u200b\u904b\u71df\u200b\u5546\u61c9\u200b\u5728\u200b\u555f\u52d5\u200b\u7bc0\u9ede\u200b\u6642\u200b\u8a2d\u7f6e\u200b\u6700\u4f4e\u200b gas \u200b\u50f9\u683c\u200b\u3002 \u200b\u4ed6\u5011\u200b\u5fc5\u9808\u200b\u5728\u200b\u4ed6\u5011\u200b\u5e0c\u671b\u200b\u652f\u6301\u200b\u7684\u200b\u6bcf\u500b\u200b\u4ee3\u5e63\u200b\u9762\u984d\u200b\u4e2d\u200b\u8a2d\u7f6e\u200b gas \u200b\u7684\u200b\u55ae\u4f4d\u200b\u6210\u672c\u200b\uff1a</p> <pre><code>`stcd start ... --minimum-gas-prices=5000000000dst`\n</code></pre> <p>\u200b\u5728\u5c07\u200b\u4ea4\u6613\u200b\u6dfb\u52a0\u200b\u5230\u200bmempool\u200b\u6216\u200bgossipping\u200b\u4ea4\u6613\u200b\u6642\u200b\uff0c\u200b\u9a57\u8b49\u5668\u200b\u6703\u200b\u6aa2\u67e5\u200b\u4ea4\u6613\u200b\u7684\u200bgas\u200b\u50f9\u683c\u200b\uff08\u200b\u7531\u200b\u63d0\u4f9b\u200b\u7684\u200b\u624b\u7eed\u8d39\u200b\u78ba\u5b9a\u200b\uff09\u200b\u662f\u5426\u200b\u6eff\u8db3\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u6700\u4f4e\u200bgas\u200b\u50f9\u683c\u200b\u3002 \u200b\u63db\u53e5\u200b\u8a71\u200b\u8aaa\u200b\uff0c\u200b\u4ea4\u6613\u200b\u5fc5\u9808\u200b\u63d0\u4f9b\u200b\u81f3\u5c11\u200b\u4e00\u7a2e\u200b\u8207\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u6700\u4f4e\u200bgas\u200b\u50f9\u683c\u200b\u76f8\u5339\u914d\u200b\u7684\u200b\u5e63\u7a2e\u200b\u7684\u200b\u8cbb\u7528\u200b\u3002</p> <p>Tendermint \u200b\u76ee\u524d\u200b\u4e0d\u200b\u63d0\u4f9b\u200b\u57fa\u200b\u65bc\u200b\u624b\u7eed\u8d39\u200b\u7684\u200b\u5167\u200b\u5b58\u6c60\u200b\u512a\u5148\u7d1a\u200b\u6392\u5e8f\u200b\uff0c\u200b\u4e26\u4e14\u200b\u57fa\u200b\u65bc\u200b\u624b\u7eed\u8d39\u200b\u7684\u200b\u5167\u200b\u5b58\u6c60\u200b\u904e\u6ffe\u200b\u662f\u200b\u7bc0\u9ede\u200b\u672c\u5730\u200b\u7684\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u5171\u8b58\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u3002 \u200b\u4f46\u662f\u200b\u5728\u200b\u8a2d\u7f6e\u200b\u6700\u4f4e\u200b gas \u200b\u50f9\u683c\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u9019\u7a2e\u200b\u6a5f\u5236\u200b\u53ef\u4ee5\u200b\u7531\u200b\u7bc0\u9ede\u200b\u904b\u71df\u200b\u5546\u5be6\u65bd\u200b\u3002</p> <p>\u200b\u7531\u200b\u65bc\u200b\u4ee3\u5e63\u200b\u7684\u200b\u5e02\u5834\u200b\u50f9\u503c\u200b\u6703\u200b\u6ce2\u52d5\u200b\uff0c\u200b\u56e0\u6b64\u200b\u9810\u8a08\u9a57\u200b\u8b49\u5668\u200b\u6703\u52d5\u614b\u200b\u5730\u5c07\u200b\u5176\u200b\u6700\u4f4e\u200b\u6c7d\u6cb9\u200b\u50f9\u683c\u8abf\u200b\u6574\u5230\u200b\u9f13\u52f5\u200b\u4f7f\u7528\u200b\u7db2\u7d61\u200b\u7684\u200b\u6c34\u5e73\u200b\u3002</p>"},{"location":"auth/#_3","title":"\u72c0\u614b","text":""},{"location":"auth/#_4","title":"\u5e33\u6236","text":"<p>\u200b\u5e33\u6236\u200b\u5305\u542b\u200b SDK \u200b\u5340\u584a\u200b\u93c8\u200b\u552f\u4e00\u200b\u6a19\u8b58\u200b\u7684\u200b\u5916\u90e8\u200b\u7528\u6236\u200b\u7684\u200b\u8eab\u4efd\u200b\u9a57\u8b49\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5305\u62ec\u200b\u516c\u9470\u200b\u3001\u200b\u5730\u5740\u200b\u548c\u200b\u7528\u200b\u65bc\u200b\u91cd\u653e\u200b\u4fdd\u8b77\u200b\u7684\u200b\u5e33\u865f\u200b/\u200b\u5e8f\u5217\u200b\u865f\u200b\u3002 \u200b\u70ba\u200b\u4e86\u200b\u63d0\u9ad8\u6548\u7387\u200b\uff0c\u200b\u7531\u200b\u65bc\u200b\u9084\u5fc5\u9808\u200b\u7372\u53d6\u200b\u5e33\u6236\u200b\u9918\u984d\u200b\u4ee5\u200b\u652f\u4ed8\u200b\u8cbb\u7528\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5e33\u6236\u200b\u7d50\u69cb\u200b\u9084\u5c07\u200b\u7528\u6236\u200b\u7684\u200b\u9918\u984d\u200b\u5b58\u5132\u70ba\u200b\u201csdk.Coins\u201d\u3002</p> <p>\u200b\u8cec\u6236\u200b\u4f5c\u70ba\u200b\u63a5\u53e3\u200b\u5c0d\u200b\u5916\u516c\u200b\u958b\u200b\uff0c\u200b\u4e26\u5728\u200b\u5167\u90e8\u5b58\u200b\u5132\u70ba\u200b\u57fa\u672c\u200b\u8cec\u6236\u200b\u6216\u200b\u6b78\u5c6c\u200b\u8cec\u6236\u200b\u3002 \u200b\u5e0c\u671b\u200b\u6dfb\u52a0\u200b\u66f4\u591a\u200b\u5e33\u6236\u200b\u985e\u578b\u200b\u7684\u200b\u6a21\u584a\u200b\u5ba2\u6236\u200b\u53ef\u4ee5\u200b\u9019\u6a23\u200b\u505a\u200b\u3002</p> <ul> <li><code>0x01 | Address -&gt; ProtocolBuffer(account)</code></li> </ul>"},{"location":"auth/#_5","title":"\u8cec\u6236\u200b\u63a5\u53e3","text":"<p>\u200b\u5e33\u6236\u200b\u63a5\u53e3\u200b\u516c\u958b\u200b\u4e86\u200b\u8b80\u53d6\u200b\u548c\u200b\u5beb\u5165\u200b\u6a19\u6e96\u200b\u5e33\u6236\u200b\u4fe1\u606f\u200b\u7684\u200b\u65b9\u6cd5\u200b\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u6240\u6709\u200b\u9019\u4e9b\u200b\u65b9\u6cd5\u200b\u90fd\u200b\u5728\u200b\u78ba\u8a8d\u200b\u63a5\u53e3\u200b\u7684\u200b\u5e33\u6236\u200b\u7d50\u69cb\u200b\u4e0a\u200b\u904b\u884c\u200b - \u200b\u70ba\u200b\u4e86\u200b\u5c07\u5e33\u200b\u6236\u200b\u5beb\u5165\u200b\u5b58\u50a8\u200b\uff0c\u200b\u9700\u8981\u200b\u4f7f\u7528\u200baccount keeper\u3002</p> <pre><code>// AccountI \u200b\u662f\u200b\u4e00\u500b\u200b\u63a5\u53e3\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u5728\u200b\u72c0\u614b\u200b\u5167\u200b\u7684\u200b\u7d66\u5b9a\u200b\u5730\u5740\u200b\u5b58\u5132\u4ee3\u5e63\u200b\u3002\n// \u200b\u5b83\u200b\u5047\u5b9a\u200b\u7528\u200b\u65bc\u200b\u91cd\u64ad\u200b\u4fdd\u8b77\u200b\u7684\u200b\u5e8f\u5217\u200b\u865f\u200b\u6982\u5ff5\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u5148\u524d\u200b\u4fee\u526a\u200b\u5e33\u6236\u200b\u7684\u200b\u91cd\u64ad\u200b\u4fdd\u8b77\u200b\u7684\u200b\u5e33\u865f\u200b\u6982\u5ff5\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u7528\u200b\u65bc\u200b\u8eab\u4efd\u200b\u9a57\u8b49\u200b\u76ee\u7684\u200b\u7684\u200b\u516c\u9470\u200b\u3002\n// \u200b\u5728\u200b\u5be6\u73fe\u200b AccountI \u200b\u7684\u200b\u5177\u9ad4\u200b\u7d50\u69cb\u200b\u4e2d\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u8a31\u591a\u200b\u8907\u200b\u96dc\u7684\u200b\u689d\u4ef6\u200b\u3002\ntype AccountI interface {\n    proto.Message\n\n    GetAddress() sdk.AccAddress\n    SetAddress(sdk.AccAddress) error // errors if already set.\n\n    GetPubKey() crypto.PubKey // can return nil.\n    SetPubKey(crypto.PubKey) error\n\n    GetAccountNumber() uint64\n    SetAccountNumber(uint64) error\n\n    GetSequence() uint64\n    SetSequence(uint64) error\n\n    // Ensure that account implements stringer\n    String() string\n}\n</code></pre>"},{"location":"auth/#base-account","title":"Base Account","text":"<p>\u200b\u57fa\u672c\u200b\u8cec\u6236\u200b\u662f\u200b\u6700\u200b\u7c21\u55ae\u200b\u548c\u200b\u6700\u5e38\u898b\u200b\u7684\u200b\u8cec\u6236\u200b\u985e\u578b\u200b\uff0c\u200b\u5b83\u200b\u53ea\u200b\u5b58\u5132\u200b\u6240\u6709\u200b\u5fc5\u9700\u200b\u7684\u200b \u200b\u76f4\u63a5\u200b\u5728\u200b\u7d50\u69cb\u200b\u4e2d\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b\u3002</p> <pre><code>// BaseAccount defines a base account type. It contains all the necessary fields\n// for basic account functionality. Any custom account type should extend this\n// type for additional functionality (e.g. vesting).\nmessage BaseAccount {\n  string address = 1;\n  google.protobuf.Any pub_key = 2;\n  uint64 account_number = 3;\n  uint64 sequence       = 4;\n}\n</code></pre>"},{"location":"auth/#antehandlers","title":"AnteHandlers","text":"<p><code>x/auth</code> \u200b\u6a21\u584a\u200b\u76ee\u524d\u200b\u6c92\u6709\u200b\u81ea\u5df1\u200b\u7684\u200b\u4ea4\u6613\u200b\u8655\u7406\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u4f46\u200b\u78ba\u5be6\u200b\u66b4\u9732\u200b\u4e86\u200b\u7279\u6b8a\u200b\u7684\u200b <code>AnteHandler</code>\uff0c\u200b\u7528\u200b\u65bc\u200b\u5c0d\u200b\u4ea4\u6613\u200b\u57f7\u884c\u200b\u57fa\u672c\u200b\u7684\u200b\u6709\u6548\u6027\u200b\u6aa2\u67e5\u200b\uff0c\u200b\u9019\u6a23\u200b\u5b83\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u62cb\u51fa\u200b\u5167\u200b\u5b58\u6c60\u200b\u3002 <code>AnteHandler</code> \u200b\u53ef\u4ee5\u200b\u770b\u4f5c\u200b\u662f\u200b\u4e00\u7d44\u200b\u88dd\u98fe\u5668\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u6aa2\u67e5\u200b\u7576\u524d\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u7684\u200b\u4e8b\u52d9\u200b , \u200b\u53ef\u89c1\u200b ADR 010.</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u5728\u200b <code>CheckTx</code> \u200b\u548c\u200b <code>DeliverTx</code> \u200b\u4e0a\u200b\u90fd\u200b\u6703\u200b\u8abf\u7528\u200b <code>AnteHandler</code>\uff0c\u200b\u56e0\u70ba\u200b Tendermint \u200b\u63d0\u8b70\u8005\u200b\u76ee\u524d\u200b\u6709\u200b\u80fd\u529b\u200b\u5c07\u5931\u6557\u200b\u7684\u200b <code>CheckTx</code> \u200b\u5305\u542b\u200b\u5728\u200b\u4ed6\u5011\u200b\u63d0\u8b70\u200b\u7684\u200b\u5340\u584a\u200b\u4ea4\u6613\u200b\u4e2d\u200b\u3002</p>"},{"location":"auth/#_6","title":"\u88dd\u98fe\u5668","text":"<p>The auth module provides <code>AnteDecorator</code>s that are recursively chained together into a single <code>AnteHandler</code> in the following order:</p> <ul> <li> <p><code>SetUpContextDecorator</code>: \u200b\u5728\u200b <code>Context</code> \u200b\u4e2d\u8a2d\u200b\u7f6e\u200b <code>GasMeter</code> \u200b\u4e26\u7528\u200b defer \u200b\u5b50\u53e5\u200b\u5305\u88dd\u4e0b\u200b\u4e00\u500b\u200b <code>AnteHandler</code> \u200b\u4ee5\u200b\u5f9e\u200b <code>AnteHandler</code> \u200b\u93c8\u4e2d\u200b\u7684\u200b\u4efb\u4f55\u200b\u4e0b\u6587\u200b <code>OutOfGas</code> panic\u200b\u4e2d\u200b\u6062\u200b\u5fa9\u200b\uff0c\u200b\u4ee5\u200b\u8fd4\u56de\u200b\u932f\u8aa4\u200b\u4ee5\u53ca\u200b\u6709\u95dc\u200b\u63d0\u4f9b\u200b\u7684\u200bgas\u200b\u548c\u200b\u4f7f\u7528\u200b\u7684\u200bgas\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002</p> </li> <li> <p><code>RejectExtensionOptionsDecorator</code>: \u200b\u62d2\u7d55\u200b\u6240\u6709\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u6027\u200b\u5730\u200b\u5305\u542b\u200b\u5728\u200b protobuf \u200b\u4e8b\u52d9\u4e2d\u200b\u7684\u200b\u64f4\u5c55\u200b\u9078\u9805\u200b\u3002</p> </li> <li> <p><code>MempoolFeeDecorator</code>: \u200b\u5728\u200b <code>CheckTx</code> \u200b\u671f\u9593\u200b\u6aa2\u67e5\u200b <code>tx</code> \u200b\u8cbb\u7528\u200b\u662f\u5426\u200b\u9ad8\u200b\u65bc\u200b\u672c\u5730\u200b\u5167\u5b58\u6c60\u200b <code>minFee</code> \u200b\u53c3\u6578\u200b\u3002</p> </li> <li> <p><code>ValidateBasicDecorator</code>: \u200b\u8abf\u7528\u200b <code>tx.ValidateBasic</code> \u200b\u4e26\u200b\u8fd4\u56de\u200b\u4efb\u4f55\u200b\u975e\u200bnil\u200b\u932f\u8aa4\u200b\u3002</p> </li> <li> <p><code>TxTimeoutHeightDecorator</code>: \u200b\u6aa2\u67e5\u200b\u201ctx\u201d\u200b\u9ad8\u5ea6\u200b\u8d85\u6642\u200b\u3002</p> </li> <li> <p><code>ValidateMemoDecorator</code>: \u200b\u4f7f\u7528\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u53c3\u6578\u9a57\u8b49\u200b\u201ctx\u201d\u200b\u5099\u5fd8\u200b\u9304\u4e26\u200b\u8fd4\u56de\u200b\u4efb\u4f55\u200b\u975e\u200bnil\u200b\u932f\u8aa4\u200b\u3002</p> </li> <li> <p><code>ConsumeGasTxSizeDecorator</code>: \u200b\u6839\u64da\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u53c3\u6578\u200b\u6d88\u8017\u200b\u8207\u200b\u201ctx\u201d\u200b\u5927\u5c0f\u200b\u6210\u200b\u6bd4\u4f8b\u200b\u7684\u200bgas\u3002</p> </li> <li> <p><code>DeductFeeDecorator</code>: \u200b\u5f9e\u200b <code>tx</code> \u200b\u7684\u200b\u7b2c\u4e00\u200b\u500b\u200b\u7c3d\u540d\u8005\u200b\u90a3\u88e1\u200b\u6263\u9664\u200b <code>FeeAmount</code>\u3002 \u200b\u5982\u679c\u200b\u555f\u7528\u200b\u4e86\u200b <code>x/feegrant</code> \u200b\u6a21\u584a\u200b\u4e26\u8a2d\u200b\u7f6e\u200b\u4e86\u200b\u8cbb\u7528\u200b\u6388\u4e88\u200b\u8005\u200b\uff0c\u200b\u5b83\u5c07\u200b\u5f9e\u8cbb\u7528\u200b\u6388\u4e88\u200b\u8005\u200b\u5e33\u6236\u200b\u4e2d\u200b\u6263\u9664\u200b\u8cbb\u7528\u200b\u3002</p> </li> <li> <p><code>SetPubKeyDecorator</code>: \u200b\u5f9e\u200b\u5c1a\u672a\u200b\u5728\u200b\u72c0\u614b\u6a5f\u200b\u548c\u200b\u7576\u524d\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u4fdd\u5b58\u200b\u76f8\u61c9\u200b\u516c\u9470\u200b\u7684\u200b\u201ctx\u201d\u200b\u7c3d\u540d\u8005\u200b\u8a2d\u7f6e\u200b\u516c\u9470\u200b\u3002</p> </li> <li> <p><code>ValidateSigCountDecorator</code>: \u200b\u6839\u64da\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u53c3\u6578\u9a57\u8b49\u200b <code>tx</code> \u200b\u4e2d\u200b\u7684\u200b\u7c3d\u540d\u200b\u6578\u91cf\u200b\u3002</p> </li> <li> <p><code>SigGasConsumeDecorator</code>: \u200b\u70ba\u200b\u6bcf\u500b\u200b\u7c3d\u540d\u200b\u6d88\u8017\u200b\u53c3\u6578\u5b9a\u200b\u7fa9\u7684\u200bgas\u200b\u91cf\u200b\u3002 \u200b\u9019\u200b\u9700\u8981\u200b\u5728\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u70ba\u200b\u6240\u6709\u200b\u7c3d\u540d\u8005\u200b\u8a2d\u7f6e\u200b\u516c\u9470\u4f5c\u200b\u70ba\u200b SetPubKeyDecorator \u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u3002</p> </li> <li> <p><code>SigVerificationDecorator</code>: \u200b\u9a57\u8b49\u200b\u6240\u6709\u200b\u7c3d\u540d\u200b\u662f\u5426\u200b\u6709\u6548\u200b\u3002 \u200b\u9019\u200b\u9700\u8981\u200b\u5728\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u70ba\u200b\u6240\u6709\u200b\u7c3d\u540d\u8005\u200b\u8a2d\u7f6e\u200b\u516c\u9470\u4f5c\u200b\u70ba\u200b SetPubKeyDecorator \u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u3002</p> </li> <li> <p><code>IncrementSequenceDecorator</code>: \u200b\u589e\u52a0\u200b\u6bcf\u500b\u200b\u7c3d\u540d\u8005\u200b\u7684\u200b\u5e33\u6236\u200b\u5e8f\u5217\u200b\u4ee5\u200b\u9632\u6b62\u200b\u91cd\u653e\u200b\u653b\u64ca\u200b\u3002</p> </li> </ul>"},{"location":"auth/#keepers","title":"Keepers","text":"<p>auth\u200b\u6a21\u584a\u200b\u53ea\u200b\u66b4\u9732\u200b\u4e86\u200b\u4e00\u500b\u200bkeeper\uff0c\u200b\u5373\u200baccount keeper\uff0c\u200b\u53ef\u4ee5\u200b\u7528\u4f86\u200b\u8b80\u200b\u5beb\u200baccount\u3002</p>"},{"location":"auth/#account-keeper","title":"Account Keeper","text":"<p>\u200b\u76ee\u524d\u200b\u53ea\u6709\u200b\u4e00\u500b\u200b\u5b8c\u5168\u200b\u6b0a\u9650\u200b\u7684\u200b\u8cec\u6236\u200b\u7ba1\u7406\u200b\u54e1\u200b\u88ab\u200b\u516c\u958b\u200b\uff0c\u200b\u5b83\u200b\u6709\u200b\u80fd\u529b\u200b\u8b80\u5beb\u200b\u6240\u6709\u200b\u8cec\u6236\u200b\u7684\u200b\u6240\u6709\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u4e26\u200b\u8fed\u4ee3\u200b\u6240\u6709\u200b\u5b58\u5132\u200b\u7684\u200b\u8cec\u6236\u200b\u3002</p> <pre><code>// AccountKeeperI is the interface contract that x/auth's keeper implements.\ntype AccountKeeperI interface {\n    // Return a new account with the next account number and the specified address. Does not save the new account to the store.\n    NewAccountWithAddress(sdk.Context, sdk.AccAddress) types.AccountI\n\n    // Return a new account with the next account number. Does not save the new account to the store.\n    NewAccount(sdk.Context, types.AccountI) types.AccountI\n\n    // Check if an account exists in the store.\n    HasAccount(sdk.Context, sdk.AccAddress) bool\n\n    // Retrieve an account from the store.\n    GetAccount(sdk.Context, sdk.AccAddress) types.AccountI\n\n    // Set an account in the store.\n    SetAccount(sdk.Context, types.AccountI)\n\n    // Remove an account from the store.\n    RemoveAccount(sdk.Context, types.AccountI)\n\n    // Iterate over all accounts, calling the provided function. Stop iteration when it returns true.\n    IterateAccounts(sdk.Context, func(types.AccountI) bool)\n\n    // Fetch the public key of an account at a specified address\n    GetPubKey(sdk.Context, sdk.AccAddress) (crypto.PubKey, error)\n\n    // Fetch the sequence of an account at a specified address.\n    GetSequence(sdk.Context, sdk.AccAddress) (uint64, error)\n\n    // Fetch the next account number, and increment the internal counter.\n    GetNextAccountNumber(sdk.Context) uint64\n}\n</code></pre>"},{"location":"auth/#client","title":"Client","text":""},{"location":"auth/#auth_1","title":"Auth","text":""},{"location":"auth/#cli","title":"CLI","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b CLI \u200b\u67e5\u8a62\u200b\u201cauth\u201d\u200b\u6a21\u584a\u200b\u4e26\u8207\u200b\u4e4b\u200b\u4ea4\u4e92\u200b\u3002</p>"},{"location":"auth/#query","title":"Query","text":"<p><code>query</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b <code>auth</code> \u200b\u72c0\u614b\u200b\u3002</p> <pre><code>stcd query auth --help\n</code></pre>"},{"location":"auth/#account","title":"account","text":"<p><code>account</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u901a\u904e\u200b\u5730\u5740\u200b\u67e5\u8a62\u200b\u5e33\u6236\u200b\u3002</p> <pre><code>stcd query auth account [address] [flags]\n</code></pre> <p>\u200b\u4f8b\u5b50\u200b:</p> <pre><code>simd query auth account cosmos1...\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>'@type': /cosmos.auth.v1beta1.BaseAccount\naccount_number: \"0\"\naddress: cosmos1zwg6tpl8aw4rawv8sgag9086lpw5hv33u5ctr2\npub_key:\n  '@type': /cosmos.crypto.secp256k1.PubKey\n  key: ApDrE38zZdd7wLmFS9YmqO684y5DG6fjZ4rVeihF/AQD\nsequence: \"1\"\n</code></pre>"},{"location":"auth/#accounts","title":"accounts","text":"<p><code>accounts</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u53ef\u7528\u200b\u7684\u200b\u5e33\u6236\u200b\u3002</p> <pre><code>stcd query auth accounts [flags]\n</code></pre> <p>\u200b\u4f8b\u5b50\u200b:</p> <pre><code>stcd query auth accounts\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>accounts:\n- '@type': /cosmos.auth.v1beta1.BaseAccount\n  account_number: \"0\"\n  address: cosmos1zwg6tpl8aw4rawv8sgag9086lpw5hv33u5ctr2\n  pub_key:\n    '@type': /cosmos.crypto.secp256k1.PubKey\n    key: ApDrE38zZdd7wLmFS9YmqO684y5DG6fjZ4rVeihF/AQD\n  sequence: \"1\"\n- '@type': /cosmos.auth.v1beta1.ModuleAccount\n  base_account:\n    account_number: \"8\"\n    address: cosmos1yl6hdjhmkf37639730gffanpzndzdpmhwlkfhr\n    pub_key: null\n    sequence: \"0\"\n  name: transfer\n  permissions:\n  - minter\n  - burner\n- '@type': /cosmos.auth.v1beta1.ModuleAccount\n  base_account:\n    account_number: \"4\"\n    address: cosmos1fl48vsnmsdzcv85q5d2q4z5ajdha8yu34mf0eh\n    pub_key: null\n    sequence: \"0\"\n  name: bonded_tokens_pool\n  permissions:\n  - burner\n  - staking\n- '@type': /cosmos.auth.v1beta1.ModuleAccount\n  base_account:\n    account_number: \"5\"\n    address: cosmos1tygms3xhhs3yv487phx3dw4a95jn7t7lpm470r\n    pub_key: null\n    sequence: \"0\"\n  name: not_bonded_tokens_pool\n  permissions:\n  - burner\n  - staking\n- '@type': /cosmos.auth.v1beta1.ModuleAccount\n  base_account:\n    account_number: \"6\"\n    address: cosmos10d07y265gmmuvt4z0w9aw880jnsr700j6zn9kn\n    pub_key: null\n    sequence: \"0\"\n  name: gov\n  permissions:\n  - burner\n- '@type': /cosmos.auth.v1beta1.ModuleAccount\n  base_account:\n    account_number: \"3\"\n    address: cosmos1jv65s3grqf6v6jl3dp4t6c9t9rk99cd88lyufl\n    pub_key: null\n    sequence: \"0\"\n  name: distribution\n  permissions: []\n- '@type': /cosmos.auth.v1beta1.BaseAccount\n  account_number: \"1\"\n  address: cosmos147k3r7v2tvwqhcmaxcfql7j8rmkrlsemxshd3j\n  pub_key: null\n  sequence: \"0\"\n- '@type': /cosmos.auth.v1beta1.ModuleAccount\n  base_account:\n    account_number: \"7\"\n    address: cosmos1m3h30wlvsf8llruxtpukdvsy0km2kum8g38c8q\n    pub_key: null\n    sequence: \"0\"\n  name: mint\n  permissions:\n  - minter\n- '@type': /cosmos.auth.v1beta1.ModuleAccount\n  base_account:\n    account_number: \"2\"\n    address: cosmos17xpfvakm2amg962yls6f84z3kell8c5lserqta\n    pub_key: null\n    sequence: \"0\"\n  name: fee_collector\n  permissions: []\npagination:\n  next_key: null\n  total: \"0\"\n</code></pre>"},{"location":"auth/#params","title":"params(\u200b\u53c3\u6578\u200b)","text":"<p><code>params</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7576\u524d\u200b\u7684\u200b\u6388\u6b0a\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>stcd query auth params [flags]\n</code></pre> <p>\u200b\u4f8b\u5b50\u200b:</p> <pre><code>stcd query auth params\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>max_memo_characters: \"256\"\nsig_verify_cost_ed25519: \"590\"\nsig_verify_cost_secp256k1: \"1000\"\ntx_sig_limit: \"7\"\ntx_size_cost_per_byte: \"10\"\n</code></pre>"},{"location":"auth/#grpc","title":"gRPC","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b gRPC \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b\u201cauth\u201d\u200b\u6a21\u584a\u200b\u3002</p>"},{"location":"auth/#account_1","title":"Account","text":"<p><code>account</code> \u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u901a\u904e\u200b\u5730\u5740\u200b\u67e5\u8a62\u200b\u5e33\u6236\u200b\u3002</p> <pre><code>cosmos.auth.v1beta1.Query/Account\n</code></pre> <p>\u200b\u4f8b\u5b50\u200b:</p> <pre><code>grpcurl -plaintext \\\n    -d '{\"address\":\"cosmos1..\"}' \\\n    localhost:9090 \\\n    cosmos.auth.v1beta1.Query/Account\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"account\":{\n    \"@type\":\"/cosmos.auth.v1beta1.BaseAccount\",\n    \"address\":\"cosmos1zwg6tpl8aw4rawv8sgag9086lpw5hv33u5ctr2\",\n    \"pubKey\":{\n      \"@type\":\"/cosmos.crypto.secp256k1.PubKey\",\n      \"key\":\"ApDrE38zZdd7wLmFS9YmqO684y5DG6fjZ4rVeihF/AQD\"\n    },\n    \"sequence\":\"1\"\n  }\n}\n</code></pre>"},{"location":"auth/#accounts_1","title":"Accounts","text":"<p><code>accounts</code> \u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u53ef\u7528\u200b\u7684\u200b\u5e33\u6236\u200b\u3002</p> <pre><code>cosmos.auth.v1beta1.Query/Accounts\n</code></pre> <p>\u200b\u4f8b\u5b50\u200b:</p> <pre><code>grpcurl -plaintext \\\n    localhost:9090 \\\n    cosmos.auth.v1beta1.Query/Accounts\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n   \"accounts\":[\n      {\n         \"@type\":\"/cosmos.auth.v1beta1.BaseAccount\",\n         \"address\":\"cosmos1zwg6tpl8aw4rawv8sgag9086lpw5hv33u5ctr2\",\n         \"pubKey\":{\n            \"@type\":\"/cosmos.crypto.secp256k1.PubKey\",\n            \"key\":\"ApDrE38zZdd7wLmFS9YmqO684y5DG6fjZ4rVeihF/AQD\"\n         },\n         \"sequence\":\"1\"\n      },\n      {\n         \"@type\":\"/cosmos.auth.v1beta1.ModuleAccount\",\n         \"baseAccount\":{\n            \"address\":\"cosmos1yl6hdjhmkf37639730gffanpzndzdpmhwlkfhr\",\n            \"accountNumber\":\"8\"\n         },\n         \"name\":\"transfer\",\n         \"permissions\":[\n            \"minter\",\n            \"burner\"\n         ]\n      },\n      {\n         \"@type\":\"/cosmos.auth.v1beta1.ModuleAccount\",\n         \"baseAccount\":{\n            \"address\":\"cosmos1fl48vsnmsdzcv85q5d2q4z5ajdha8yu34mf0eh\",\n            \"accountNumber\":\"4\"\n         },\n         \"name\":\"bonded_tokens_pool\",\n         \"permissions\":[\n            \"burner\",\n            \"staking\"\n         ]\n      },\n      {\n         \"@type\":\"/cosmos.auth.v1beta1.ModuleAccount\",\n         \"baseAccount\":{\n            \"address\":\"cosmos1tygms3xhhs3yv487phx3dw4a95jn7t7lpm470r\",\n            \"accountNumber\":\"5\"\n         },\n         \"name\":\"not_bonded_tokens_pool\",\n         \"permissions\":[\n            \"burner\",\n            \"staking\"\n         ]\n      },\n      {\n         \"@type\":\"/cosmos.auth.v1beta1.ModuleAccount\",\n         \"baseAccount\":{\n            \"address\":\"cosmos10d07y265gmmuvt4z0w9aw880jnsr700j6zn9kn\",\n            \"accountNumber\":\"6\"\n         },\n         \"name\":\"gov\",\n         \"permissions\":[\n            \"burner\"\n         ]\n      },\n      {\n         \"@type\":\"/cosmos.auth.v1beta1.ModuleAccount\",\n         \"baseAccount\":{\n            \"address\":\"cosmos1jv65s3grqf6v6jl3dp4t6c9t9rk99cd88lyufl\",\n            \"accountNumber\":\"3\"\n         },\n         \"name\":\"distribution\"\n      },\n      {\n         \"@type\":\"/cosmos.auth.v1beta1.BaseAccount\",\n         \"accountNumber\":\"1\",\n         \"address\":\"cosmos147k3r7v2tvwqhcmaxcfql7j8rmkrlsemxshd3j\"\n      },\n      {\n         \"@type\":\"/cosmos.auth.v1beta1.ModuleAccount\",\n         \"baseAccount\":{\n            \"address\":\"cosmos1m3h30wlvsf8llruxtpukdvsy0km2kum8g38c8q\",\n            \"accountNumber\":\"7\"\n         },\n         \"name\":\"mint\",\n         \"permissions\":[\n            \"minter\"\n         ]\n      },\n      {\n         \"@type\":\"/cosmos.auth.v1beta1.ModuleAccount\",\n         \"baseAccount\":{\n            \"address\":\"cosmos17xpfvakm2amg962yls6f84z3kell8c5lserqta\",\n            \"accountNumber\":\"2\"\n         },\n         \"name\":\"fee_collector\"\n      }\n   ],\n   \"pagination\":{\n      \"total\":\"9\"\n   }\n}\n</code></pre>"},{"location":"auth/#params_1","title":"Params","text":"<p><code>params</code> \u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7576\u524d\u200b\u7684\u200b\u8eab\u4efd\u200b\u9a57\u8b49\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>cosmos.auth.v1beta1.Query/Params\n</code></pre> <p>\u200b\u4f8b\u5b50\u200b:</p> <pre><code>grpcurl -plaintext \\\n    localhost:9090 \\\n    cosmos.auth.v1beta1.Query/Params\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"params\": {\n    \"maxMemoCharacters\": \"256\",\n    \"txSigLimit\": \"7\",\n    \"txSizeCostPerByte\": \"10\",\n    \"sigVerifyCostEd25519\": \"590\",\n    \"sigVerifyCostSecp256k1\": \"1000\"\n  }\n}\n</code></pre>"},{"location":"auth/#rest","title":"REST","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b REST \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b\u201cauth\u201d\u200b\u6a21\u584a\u200b\u3002</p>"},{"location":"auth/#account_2","title":"Account","text":"<p><code>account</code> \u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u901a\u904e\u200b\u5730\u5740\u200b\u67e5\u8a62\u200b\u5e33\u6236\u200b\u3002</p> <pre><code>/cosmos/auth/v1beta1/account?address={address}\n</code></pre>"},{"location":"auth/#accounts_2","title":"Accounts","text":"<p><code>accounts</code> \u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u53ef\u7528\u200b\u7684\u200b\u5e33\u6236\u200b\u3002</p> <pre><code>/cosmos/auth/v1beta1/accounts\n</code></pre>"},{"location":"auth/#params_2","title":"Params","text":"<p><code>params</code> \u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7576\u524d\u200b\u7684\u200b\u8eab\u4efd\u200b\u9a57\u8b49\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>/cosmos/auth/v1beta1/params\n</code></pre>"},{"location":"auth/#parameters","title":"Parameters","text":"<p>auth \u200b\u6a21\u584a\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u53c3\u6578\u200b\uff1a</p> Key Type Example MaxMemoCharacters uint64 256 TxSigLimit uint64 7 TxSizeCostPerByte uint64 10 SigVerifyCostED25519 uint64 590 SigVerifyCostSecp256k1 uint64 1000"},{"location":"bank/","title":"<code>x/bank</code>","text":""},{"location":"bank/#abstract","title":"Abstract","text":"<p>\u200b\u672c\u6587\u200b\u6a94\u200b\u8a73\u7d30\u200b\u8aaa\u660e\u200b\u4e86\u200b bank \u200b\u6a21\u584a\u200b</p> <p>bank \u200b\u6a21\u584a\u200b\u8ca0\u8cac\u200b\u8655\u7406\u200b\u8cec\u6236\u200b\u4e4b\u9593\u200b\u7684\u200b\u591a\u200b\u8cc7\u7522\u4ee3\u5e63\u200b\u8f49\u8cec\u200b\uff0c\u200b\u4e26\u200b\u8ddf\u8e2a\u200b\u7279\u6b8a\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u7684\u200b\u507d\u200b\u8f49\u8cec\u200b\uff0c \u200b\u9019\u4e9b\u200b\u507d\u200b\u8f49\u8cec\u200b\u5fc5\u9808\u200b\u4ee5\u200b\u4e0d\u540c\u200b\u7684\u200b\u65b9\u5f0f\u200b\u8207\u200b\u7279\u5b9a\u200b\u985e\u578b\u200b\u7684\u200b\u8cec\u6236\u200b\u4e00\u8d77\u200b\u5de5\u4f5c\u200b\uff08\u200b\u7279\u5225\u200b\u662f\u200b\u59d4\u200b\u8a17\u200b/\u200b\u53d6\u6d88\u200b\u59d4\u200b\u8a17\u200b\u7684\u200b\u6b78\u5c6c\u200b\u8cec\u6236\u200b\uff09\u3002 \u200b\u5b83\u200b\u516c\u958b\u200b\u4e86\u200b\u5e7e\u500b\u200b\u5177\u6709\u200b\u4e0d\u540c\u200b\u529f\u80fd\u200b\u7684\u200b\u63a5\u53e3\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u8207\u200b\u5fc5\u9808\u200b\u6539\u8b8a\u200b\u7528\u6236\u200b\u9918\u984d\u200b\u7684\u200b\u5176\u4ed6\u200b\u6a21\u584a\u200b\u9032\u884c\u200b\u5b89\u5168\u200b\u4ea4\u4e92\u200b\u3002</p> <p>\u200b\u6b64\u5916\u200b\uff0c\u200b\u9280\u884c\u200b\u6a21\u584a\u9084\u200b\u8ddf\u8e2a\u200b\u4e26\u200b\u63d0\u4f9b\u200b\u67e5\u8a62\u200b\u652f\u63f4\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u7684\u200b\u6240\u6709\u200b\u8cc7\u7522\u200b\u7684\u200b\u7e3d\u4f9b\u200b\u61c9\u91cf\u200b\u3002 \u200b\u4f8b\u5982\u200b\uff0c\u200b\u5982\u679c\u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u652f\u63f4\u200b\u591a\u7a2e\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u5247\u9280\u884c\u200b\u6a21\u584a\u200b\u53ef\u4ee5\u200b\u63d0\u4f9b\u200b\u67e5\u8a62\u200b\u65b9\u6cd5\u200b\u4f86\u200b\u7372\u53d6\u200b\u6240\u6709\u200b\u4ee3\u5e63\u200b\u7684\u200b\u7e3d\u4f9b\u200b\u61c9\u91cf\u200b\u3002 \u200b\u9019\u200b\u53ef\u4ee5\u200b\u5e6b\u52a9\u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u958b\u767c\u200b\u4eba\u54e1\u200b\u4e86\u89e3\u200b\u5176\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u4e2d\u200b\u6240\u6709\u200b\u8cc7\u7522\u200b\u7684\u200b\u7e3d\u91cf\u200b\uff0c\u200b\u4e26\u76e3\u6e2c\u200b\u662f\u5426\u200b\u5b58\u5728\u200b\u8d85\u51fa\u200b\u9810\u671f\u200b\u7684\u200b\u7e3d\u4f9b\u200b\u61c9\u91cf\u200b\u3002</p>"},{"location":"bank/#_1","title":"\u4f9b\u61c9","text":"<p>supply \u200b\u529f\u80fd\u200b:</p> <ul> <li>\u200b\u88ab\u52d5\u200b\u5730\u200b\u8ffd\u200b\u8e64\u200b\u93c8\u200b\u5167\u200b\u786c\u200b\u5e63\u200b\u7684\u200b\u7e3d\u200b\u4f9b\u200b\u61c9\u200b\u91cf\u200b,</li> <li>\u200b\u70ba\u200b\u6a21\u584a\u200b\u6301\u6709\u200b/\u200b\u8207\u200b\u201cCoins\u201d\u200b\u4ea4\u4e92\u200b\u63d0\u4f9b\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u4e26\u200b\u5f15\u5165\u200b\u4e0d\u8b8a\u91cf\u200b\u6aa2\u67e5\u200b\u4ee5\u9a57\u200b\u8b49\u93c8\u200b\u7684\u200b\u7e3d\u4f9b\u200b\u61c9\u91cf\u200b\u3002</li> </ul>"},{"location":"bank/#_2","title":"\u7e3d\u4f9b\u200b\u61c9\u91cf","text":"<p>\u200b\u8a72\u200b\u7db2\u7d61\u200b\u7684\u200b\u7e3d\u4f9b\u200b\u61c9\u91cf\u200b\u7b49\u200b\u65bc\u200b\u6240\u6709\u200b\u8cec\u6236\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u4ee3\u5e63\u200b\u7684\u200b\u7e3d\u200b\u548c\u200b\u3002 \u200b\u6bcf\u7576\u200b\u4e00\u500b\u200b\u4ee3\u5e63\u200b\u88ab\u200b\u9444\u9020\u200b\uff08\u200b\u4f8b\u5982\u200b\u4f5c\u70ba\u200b\u901a\u8139\u200b\u6a5f\u5236\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff09\u200b\u6216\u200b\u92b7\u6bc0\u200b\uff08\u200b\u4f8b\u5982\u200b\u7531\u200b\u65bc\u200b\u61f2\u7f70\u200b\u6216\u200b\u5982\u679c\u200b\u6cbb\u7406\u200b\u63d0\u6848\u200b\u88ab\u200b\u5426\u6c7a\u200b\uff09\u200b\u6642\u200b\uff0c\u200b\u7e3d\u4f9b\u200b\u61c9\u91cf\u200b\u90fd\u200b\u6703\u200b\u66f4\u65b0\u200b\u3002</p>"},{"location":"bank/#_3","title":"\u6a21\u584a\u200b\u8cec\u6236","text":"<p>\u200b\u4f9b\u61c9\u200b\u529f\u80fd\u200b\u5f15\u5165\u200b\u4e86\u200b\u4e00\u7a2e\u200b\u65b0\u578b\u200b\u7684\u200b auth.Account \uff0c\u200b\u6a21\u584a\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u5b83\u200b\u4f86\u200b\u5206\u914d\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u4e26\u5728\u200b\u7279\u6b8a\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u9444\u9020\u200b\u6216\u200b\u71c3\u71d2\u4ee3\u5e63\u200b\u3002 \u200b\u5728\u200b\u57fa\u672c\u200b\u5c64\u200b\u9762\u4e0a\u200b\uff0c\u200b\u9019\u4e9b\u200b\u6a21\u584a\u200b\u8cec\u6236\u200b\u80fd\u5920\u200b\u5411\u200b auth.Account \u200b\u548c\u200b\u5176\u4ed6\u200b\u6a21\u584a\u200b\u8cec\u6236\u200b\u767c\u9001\u200b/\u200b\u63a5\u6536\u200b\u4ee3\u5e63\u200b\u3002 \u200b\u9019\u7a2e\u200b\u8a2d\u8a08\u200b\u53d6\u4ee3\u200b\u4e86\u200b\u4ee5\u524d\u200b\u7684\u200b\u66ff\u4ee3\u200b\u8a2d\u8a08\u200b\uff0c\u200b\u5373\u200b\u70ba\u200b\u4e86\u200b\u6301\u6709\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u6a21\u584a\u200b\u6703\u200b\u71c3\u71d2\u200b\u4f86\u200b\u81ea\u767c\u200b\u9001\u65b9\u200b\u8cec\u6236\u200b\u7684\u200b\u50b3\u5165\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u7136\u5f8c\u5728\u200b\u5167\u90e8\u200b\u8ddf\u8e2a\u200b\u9019\u4e9b\u200b\u4ee3\u5e63\u200b\u3002 \u200b\u7a0d\u200b\u5f8c\u200b\uff0c\u200b\u70ba\u200b\u4e86\u200b\u767c\u9001\u4ee3\u5e63\u200b\uff0c\u200b\u6a21\u584a\u200b\u9700\u8981\u200b\u5728\u200b\u76ee\u6a19\u200b\u8cec\u6236\u200b\u5167\u200b\u6709\u6548\u200b\u5730\u9444\u200b\u9020\u4ee3\u5e63\u200b\u3002\u200b\u65b0\u200b\u8a2d\u8a08\u200b\u6d88\u9664\u200b\u4e86\u200b\u6a21\u584a\u200b\u4e4b\u9593\u200b\u91cd\u200b\u8907\u200b\u7684\u200b\u908f\u8f2f\u200b\uff0c\u200b\u4ee5\u200b\u57f7\u884c\u200b\u6b64\u6703\u8a08\u200b\u3002</p> <p>ModuleAccount \u200b\u63a5\u53e3\u200b\u5b9a\u7fa9\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>type ModuleAccount interface {\n  auth.Account               // same methods as the Account interface\n\n  GetName() string           // name of the module; used to obtain the address\n  GetPermissions() []string  // permissions of module account\n  HasPermission(string) bool\n}\n</code></pre> <p>WARNING! \u200b\u4efb\u4f55\u200b\u5141\u8a31\u200b\u76f4\u63a5\u200b\u6216\u9593\u200b\u63a5\u767c\u200b\u9001\u200b\u8cc7\u91d1\u200b\u7684\u200b\u6a21\u584a\u200b\u6216\u200b\u6d88\u606f\u200b\u8655\u200b\u7406\u5668\u200b\u5fc5\u9808\u200b\u660e\u78ba\u200b\u4fdd\u8b49\u200b\u9019\u4e9b\u200b\u8cc7\u91d1\u200b\u4e0d\u80fd\u200b\u767c\u200b\u9001\u5230\u200b\u6a21\u584a\u200b\u8cec\u6236\u200b\uff08\u200b\u9664\u975e\u200b\u5141\u8a31\u200b\uff09\u3002</p> <p>\u200b\u4f9b\u61c9\u200b Keeper \u200b\u9084\u70ba\u200b\u8207\u200b ModuleAccount \u200b\u76f8\u95dc\u200b\u7684\u200b auth Keeper \u200b\u548c\u200b bank Keeper \u200b\u5f15\u5165\u200b\u4e86\u200b\u65b0\u200b\u7684\u200b\u5305\u88dd\u200b\u51fd\u6578\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u80fd\u5920\u200b\uff1a</p> <p>-\u200b\u901a\u904e\u200b\u63d0\u4f9b\u200b Name \u200b\u4f86\u200b\u7372\u53d6\u200b\u548c\u200b\u8a2d\u7f6e\u200b ModuleAccount\u3002 - \u200b\u50c5\u901a\u904e\u200b\u50b3\u905e\u200b Name \u200b\u5c31\u200b\u53ef\u4ee5\u200b\u5c07\u4ee3\u5e63\u200b\u5f9e\u200b\u5176\u4ed6\u200b ModuleAccount \u200b\u6216\u200b\u6a19\u51c6\u200b Account \u200b\u767c\u200b\u9001\u5230\u200b\u5176\u4ed6\u200b\u8cec\u6236\u200b\u3002 - \u200b\u70ba\u200b ModuleAccount \u200b\u9444\u9020\u200b\u6216\u200b\u71c3\u71d2\u4ee3\u5e63\u200b\uff08\u200b\u53d7\u5176\u200b\u6b0a\u9650\u200b\u9650\u5236\u200b\uff09\u3002</p>"},{"location":"bank/#_4","title":"\u6b0a\u9650","text":"<p>\u200b\u6bcf\u500b\u200b ModuleAccount \u200b\u90fd\u200b\u6709\u200b\u4e00\u7d44\u200b\u4e0d\u540c\u200b\u7684\u200b\u6b0a\u9650\u200b\uff0c\u200b\u9019\u4e9b\u200b\u6b0a\u9650\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e0d\u540c\u200b\u7684\u200b\u5c0d\u8c61\u200b\u529f\u80fd\u200b\u4ee5\u200b\u57f7\u884c\u200b\u67d0\u4e9b\u200b\u64cd\u4f5c\u200b\u3002 \u200b\u5728\u200b\u5275\u5efa\u4f9b\u200b\u61c9\u200b Keeper \u200b\u6642\u200b\uff0c\u200b\u9700\u8981\u200b\u8a3b\u200b\u518a\u200b\u6b0a\u200b\u9650\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u6bcf\u6b21\u200b ModuleAccount \u200b\u8abf\u7528\u200b\u5141\u8a31\u200b\u7684\u200b\u51fd\u6578\u200b\u6642\u200b\uff0cKeeper \u200b\u90fd\u200b\u53ef\u4ee5\u200b\u67e5\u627e\u200b\u7279\u5b9a\u200b\u8cec\u6236\u200b\u7684\u200b\u6b0a\u9650\u4e26\u200b\u57f7\u884c\u200b\u6216\u200b\u4e0d\u200b\u57f7\u884c\u200b\u64cd\u4f5c\u200b\u3002</p> <p>\u200b\u53ef\u7528\u200b\u7684\u200b\u6b0a\u9650\u6709\u200b\uff1a</p> <ul> <li><code>Minter</code>: \u200b\u5141\u8a31\u200b\u6a21\u7d44\u200b\u5e33\u6236\u200b\u9444\u9020\u4ee3\u5e63\u200b\u3002</li> <li><code>Burner</code>: \u200b\u5141\u8a31\u200b\u6a21\u7d44\u200b\u5e33\u6236\u92b7\u200b\u6bc0\u4ee3\u5e63\u200b\u3002</li> <li><code>Staking</code>: \u200b\u5141\u8a31\u200b\u6a21\u7d44\u200b\u5e33\u6236\u200b\u57f7\u884c\u200b\u8207\u200b\u6b0a\u76ca\u200b\u8b49\u660e\u200b\u76f8\u95dc\u200b\u7684\u200b\u64cd\u4f5c\u200b\u3002</li> </ul>"},{"location":"bank/#_5","title":"\u5167\u5bb9","text":""},{"location":"bank/#_6","title":"\u72c0\u614b","text":"<p>x/bank \u200b\u6a21\u584a\u200b\u4e3b\u8981\u200b\u7dad\u8b77\u200b\u4e09\u500b\u200b\u4e3b\u8981\u200b\u5c0d\u8c61\u200b\u7684\u200b\u72c0\u614b\u200b\uff0c\u200b\u5206\u5225\u200b\u662f\u200b\u8cec\u6236\u200b\u9918\u984d\u200b\u3001\u200b\u8cc7\u7522\u5143\u200b\u6578\u64da\u200b\u548c\u200b\u6240\u6709\u200b\u9918\u984d\u200b\u7684\u200b\u7e3d\u4f9b\u200b\u61c9\u91cf\u200b\u3002</p> <ul> <li>\u200b\u4f9b\u61c9\u200b: <code>0x0 | byte(denom) -&gt; byte(amount)</code></li> <li>\u200b\u8cc7\u7522\u5143\u200b\u6578\u64da\u200b: <code>0x1 | byte(denom) -&gt; ProtocolBuffer(Metadata)</code></li> <li>\u200b\u9918\u984d\u200b: <code>0x2 | byte(address length) | []byte(address) | []byte(balance.Denom) -&gt; ProtocolBuffer(balance)</code></li> </ul>"},{"location":"bank/#keepers","title":"Keepers","text":"<p>\u200b\u9280\u884c\u200b\u6a21\u584a\u200b\u70ba\u200b\u5176\u4ed6\u200b\u6a21\u584a\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u5c0e\u51fa\u200b\u7684\u200bkeeper\u200b\u63a5\u53e3\u200b\uff0c\u200b\u9019\u4e9b\u200b\u63a5\u53e3\u200b\u53ef\u4ee5\u200b\u7528\u4f86\u200b\u8b80\u53d6\u200b\u6216\u200b\u66f4\u65b0\u200b\u8cec\u6236\u200b\u9918\u984d\u200b\u3002 \u200b\u5728\u200b\u4f7f\u7528\u200b\u9019\u4e9b\u200b\u63a5\u53e3\u200b\u6642\u200b\uff0c\u200b\u6a21\u584a\u200b\u61c9\u8a72\u200b\u9078\u64c7\u200b\u5177\u6709\u200b\u6240\u200b\u9700\u200b\u529f\u80fd\u200b\u7684\u200b\u6700\u4f4e\u200b\u6b0a\u9650\u200b\u63a5\u53e3\u200b\u3002\u200b\u9019\u6a23\u200b\u505a\u200b\u6709\u52a9\u200b\u65bc\u200b\u78ba\u4fdd\u200b\u6a21\u584a\u200b\u4e4b\u9593\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u548c\u200b\u9694\u96e2\u200b\u3002</p> <p>\u200b\u6700\u4f73\u200b\u5be6\u8e10\u200b\u8981\u6c42\u200b\u4ed4\u7d30\u200b\u5be9\u67e5\u200bbank\u200b\u6a21\u584a\u200b\u7684\u200b\u4ee3\u78bc\u200b\uff0c\u200b\u4ee5\u78ba\u200b\u4fdd\u6b0a\u9650\u200b\u8a2d\u7f6e\u200b\u7b26\u5408\u200b\u9810\u671f\u200b\u3002 \u200b\u9019\u6a23\u200b\u53ef\u4ee5\u200b\u907f\u514d\u200b\u6f5b\u5728\u200b\u7684\u200b\u5b89\u5168\u200b\u98a8\u96aa\u200b\uff0c\u200b\u4e26\u78ba\u200b\u4fdd\u6a21\u584a\u200b\u4e4b\u9593\u200b\u7684\u200b\u6b63\u78ba\u200b\u5354\u540c\u200b\u3002 \u200b\u5728\u200b\u958b\u767c\u200b\u904e\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u61c9\u8a72\u200b\u5c0d\u4ee3\u78bc\u200b\u9032\u884c\u200b\u8a73\u7d30\u200b\u6aa2\u67e5\u200b\uff0c\u200b\u78ba\u4fdd\u6b0a\u200b\u9650\u200b\u9650\u5236\u200b\u5f97\u7576\u200b\u3002</p>"},{"location":"bank/#blocklisting-addresses","title":"\u5c01\u9396\u200b\u5730\u5740\u200b(Blocklisting Addresses)","text":"<p>x/bank\u200b\u6a21\u584a\u200b\u63a5\u53d7\u200b\u4e00\u500b\u200b\u5730\u5740\u200bmap\uff0c\u200b\u9019\u4e9b\u200b\u5730\u5740\u200b\u88ab\u200b\u8a8d\u70ba\u200b\u662f\u200b\u88ab\u200b\u5217\u5165\u200b\u9ed1\u540d\u200b\u55ae\u200b\u7684\u200b\uff0c \u200b\u7121\u6cd5\u200b\u901a\u904e\u200b\u5982\u200bMsgSend\u200b\u4ee5\u53ca\u200b\u76f4\u63a5\u200bAPI\u200b\u8abf\u7528\u200b\uff08\u200b\u5982\u200bSendCoinsFromModuleToAccount\uff09\u200b\u76f4\u63a5\u200b\u548c\u200b\u660e\u78ba\u200b\u5730\u200b\u63a5\u6536\u200b\u8cc7\u91d1\u200b\u3002</p> <p>\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u9019\u4e9b\u200b\u88ab\u200b\u5217\u5165\u200b\u9ed1\u540d\u200b\u55ae\u200b\u7684\u200b\u5730\u5740\u200b\u5c07\u88ab\u200b\u963b\u6b62\u200b\u5f9e\u200b\u5176\u4ed6\u200b\u8cec\u6236\u200b\u6216\u200b\u6a21\u584a\u200b\u63a5\u6536\u200b\u8cc7\u91d1\u200b\u3002 \u200b\u9019\u200b\u6709\u52a9\u200b\u65bc\u200b\u9632\u6b62\u200b\u60e1\u610f\u884c\u200b\u70ba\u200b\u6216\u200b\u9075\u5b88\u200b\u76e3\u7ba1\u200b\u8981\u6c42\u200b\uff0c\u200b\u78ba\u4fdd\u200b\u7db2\u7d61\u200b\u7684\u200b\u5b89\u5168\u200b\u548c\u200b\u7a69\u5b9a\u200b\u3002\u200b\u7136\u800c\u200b\uff0c\u200b\u5728\u200b\u5be6\u65bd\u200b\u9019\u7a2e\u200b\u9650\u5236\u200b\u6642\u200b\uff0c\u200b\u61c9\u200b\u6ce8\u610f\u200b\u5c0a\u91cd\u200b\u7528\u6236\u200b\u7684\u200b\u96b1\u79c1\u200b\u548c\u200b\u6b0a\u76ca\u200b\uff0c\u200b\u907f\u514d\u200b\u6feb\u7528\u200b\u5c01\u9396\u200b\u529f\u80fd\u200b\u3002</p> <p>\u200b\u901a\u5e38\u200b\uff0c\u200b\u9019\u4e9b\u200b\u88ab\u200b\u5217\u5165\u200b\u9ed1\u540d\u200b\u55ae\u200b\u7684\u200b\u5730\u5740\u200b\u662f\u200b\u6a21\u584a\u200b\u8cec\u6236\u200b\u3002\u200b\u5982\u679c\u200b\u9019\u4e9b\u200b\u5730\u5740\u200b\u5728\u200b\u72c0\u614b\u6a5f\u200b\u9810\u671f\u200b\u898f\u5247\u200b\u4e4b\u5916\u200b\u63a5\u6536\u200b\u8cc7\u91d1\u200b\uff0c\u200b\u5f88\u200b\u53ef\u80fd\u200b\u6703\u7834\u58de\u200b\u4e0d\u200b\u8b8a\u6027\u200b\uff0c\u200b\u4e26\u200b\u53ef\u80fd\u200b\u5c0e\u81f4\u200b\u7db2\u7d61\u200b\u505c\u6b62\u200b\u904b\u884c\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u9632\u6b62\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u7684\u200b\u767c\u751f\u200b\uff0c\u200b\u5efa\u8b70\u200b\u5bc6\u5207\u200b\u76e3\u63a7\u200b\u9019\u4e9b\u200b\u5730\u5740\u200b\u7684\u200b\u8cc7\u91d1\u200b\u63a5\u6536\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u4e26\u78ba\u200b\u4fdd\u5176\u200b\u9075\u5faa\u200b\u72c0\u614b\u6a5f\u200b\u7684\u200b\u898f\u5247\u200b\u3002 \u200b\u540c\u6642\u200b\uff0c\u200b\u5efa\u7acb\u200b\u6709\u6548\u200b\u7684\u200b\u7570\u5e38\u200b\u8655\u7406\u200b\u6a5f\u5236\u200b\u548c\u200b\u5b89\u5168\u7b56\u7565\u200b\uff0c\u200b\u4ee5\u200b\u9632\u6b62\u200b\u9019\u4e9b\u200b\u5730\u5740\u200b\u5728\u200b\u4e0d\u200b\u7b26\u5408\u200b\u72c0\u614b\u200b\u6a5f\u898f\u5247\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u63a5\u6536\u200b\u8cc7\u91d1\u200b\u3002 \u200b\u9019\u6a23\u200b\u53ef\u4ee5\u200b\u78ba\u4fdd\u200b\u7db2\u7d61\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u548c\u200b\u7a69\u200b\u5b9a\u6027\u200b\uff0c\u200b\u9632\u6b62\u200b\u6f5b\u5728\u200b\u7684\u200b\u7db2\u7d61\u200b\u6545\u969c\u200b\u3002</p> <p>\u200b\u901a\u904e\u200b\u5411\u200bx/bank\u200b\u6a21\u584a\u200b\u63d0\u4f9b\u200b\u4e00\u7d44\u200b\u88ab\u200b\u5217\u5165\u200b\u9ed1\u540d\u200b\u55ae\u200b\u7684\u200b\u5730\u5740\u200b\uff0c \u200b\u5982\u679c\u200b\u7528\u6236\u200b\u6216\u200b\u5ba2\u6236\u200b\u7aef\u5617\u8a66\u200b\u76f4\u63a5\u200b\u6216\u9593\u200b\u63a5\u5411\u200b\u5217\u5165\u200b\u9ed1\u540d\u200b\u55ae\u200b\u7684\u200b\u8cec\u6236\u200b\u767c\u9001\u200b\u8cc7\u91d1\u200b\uff0c\u200b\u64cd\u4f5c\u200b\u5c07\u6703\u200b\u62cb\u51fa\u200b\u4e00\u500b\u200b\u932f\u8aa4\u200b\u3002</p> <p>\u200b\u9019\u6a23\u200b\u7684\u200b\u8a2d\u8a08\u200b\u53ef\u4ee5\u200b\u9632\u6b62\u200b\u88ab\u200b\u5217\u5165\u200b\u9ed1\u540d\u200b\u55ae\u200b\u7684\u200b\u5730\u5740\u200b\u901a\u904e\u200b\u5404\u7a2e\u200b\u9014\u5f91\u200b\u63a5\u6536\u200b\u8cc7\u91d1\u200b\uff0c\u200b\u78ba\u4fdd\u200b\u7db2\u7d61\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u548c\u200b\u5408\u898f\u6027\u200b\u3002 \u200b\u4f46\u200b\u5728\u200b\u5be6\u65bd\u200b\u9019\u4e9b\u200b\u63aa\u65bd\u200b\u6642\u200b\uff0c\u200b\u4e5f\u200b\u9700\u8981\u200b\u6ce8\u610f\u200b\u9075\u5faa\u200b\u76f8\u95dc\u200b\u6cd5\u5f8b\u200b\u6cd5\u898f\u200b\uff0c\u200b\u5c0a\u91cd\u200b\u7528\u6236\u200b\u7684\u200b\u96b1\u79c1\u200b\u548c\u200b\u6b0a\u76ca\u200b\u3002 \u200b\u5728\u200b\u8a2d\u8a08\u200b\u548c\u200b\u5be6\u65bd\u200b\u5c01\u9396\u200b\u7b56\u7565\u200b\u6642\u200b\uff0c\u200b\u8981\u78ba\u200b\u4fdd\u5176\u200b\u5408\u7406\u200b\u4e14\u200b\u4e0d\u200b\u5f71\u97ff\u200b\u6b63\u5e38\u200b\u7528\u6236\u200b\u7684\u200b\u4f7f\u7528\u200b\u3002</p>"},{"location":"bank/#basekeeper","title":"BaseKeeper","text":"<p>BaseKeeper \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u5b8c\u5168\u200b\u7684\u200b\u6b0a\u9650\u8a2a\u554f\u200b\uff1a\u200b\u5177\u6709\u200b\u4efb\u610f\u200b\u4fee\u6539\u200b\u4efb\u4f55\u200b\u8cec\u6236\u200b\u9918\u984d\u200b\u4ee5\u53ca\u200b\u9444\u9020\u200b\u6216\u92b7\u200b\u6bc0\u4ee3\u5e63\u200b\u7684\u200b\u80fd\u529b\u200b\u3002 \u200b\u901a\u904e\u200b\u4f7f\u7528\u200b\u5e36\u6709\u200b WithMintCoinsRestriction \u200b\u7684\u200b BaseKeeper\uff0c\u200b\u53ef\u4ee5\u200b\u5be6\u73fe\u200b\u5c0d\u200b\u6bcf\u500b\u200b\u6a21\u7d44\u200b\u9444\u5e63\u200b\u6b0a\u9650\u200b\u7684\u200b\u9650\u5236\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u7d66\u4e88\u200b\u7279\u5b9a\u200b\u7684\u200b\u9444\u5e63\u200b\u9650\u5236\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c\u200b\u50c5\u9444\u9020\u200b\u7279\u5b9a\u200b\u9762\u984d\u200b\u7684\u200b\u4ee3\u5e63\u200b\uff09\u3002\u200b\u9019\u6a23\u200b\u53ef\u4ee5\u200b\u78ba\u4fdd\u200b\u6bcf\u500b\u200b\u6a21\u7d44\u50c5\u200b\u80fd\u200b\u6309\u7167\u200b\u9810\u5b9a\u200b\u7684\u200b\u898f\u5247\u200b\u9032\u884c\u200b\u9444\u5e63\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u63d0\u9ad8\u200b\u5340\u584a\u200b\u93c8\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u548c\u200b\u53ef\u63a7\u6027\u200b\u3002</p> <pre><code>// Keeper \u200b\u5b9a\u7fa9\u4e86\u200b\u4e00\u500b\u200b\u6a21\u7d44\u200b\u63a5\u53e3\u200b\uff0c\u200b\u8a72\u200b\u63a5\u53e3\u200b\u6709\u52a9\u200b\u65bc\u200b\u5728\u200b\u8cec\u6236\u200b\u4e4b\u9593\u200b\u5be6\u73fe\u200b\u4ee3\u5e63\u200b\u7684\u200b\u8f49\u79fb\u200b\u3002\ntype Keeper interface {\n    SendKeeper\n\n    InitGenesis(sdk.Context, *types.GenesisState)\n    ExportGenesis(sdk.Context) *types.GenesisState\n\n    GetSupply(ctx sdk.Context, denom string) sdk.Coin\n    GetPaginatedTotalSupply(ctx sdk.Context, pagination *query.PageRequest) (sdk.Coins, *query.PageResponse, error)\n    IterateTotalSupply(ctx sdk.Context, cb func(sdk.Coin) bool)\n    GetDenomMetaData(ctx sdk.Context, denom string) (types.Metadata, bool)\n    SetDenomMetaData(ctx sdk.Context, denomMetaData types.Metadata)\n    IterateAllDenomMetaData(ctx sdk.Context, cb func(types.Metadata) bool)\n\n    SendCoinsFromModuleToAccount(ctx sdk.Context, senderModule string, recipientAddr sdk.AccAddress, amt sdk.Coins) error\n    SendCoinsFromModuleToModule(ctx sdk.Context, senderModule, recipientModule string, amt sdk.Coins) error\n    SendCoinsFromAccountToModule(ctx sdk.Context, senderAddr sdk.AccAddress, recipientModule string, amt sdk.Coins) error\n    DelegateCoinsFromAccountToModule(ctx sdk.Context, senderAddr sdk.AccAddress, recipientModule string, amt sdk.Coins) error\n    UndelegateCoinsFromModuleToAccount(ctx sdk.Context, senderModule string, recipientAddr sdk.AccAddress, amt sdk.Coins) error\n    MintCoins(ctx sdk.Context, moduleName string, amt sdk.Coins) error\n    BurnCoins(ctx sdk.Context, moduleName string, amt sdk.Coins) error\n\n    DelegateCoins(ctx sdk.Context, delegatorAddr, moduleAccAddr sdk.AccAddress, amt sdk.Coins) error\n    UndelegateCoins(ctx sdk.Context, moduleAccAddr, delegatorAddr sdk.AccAddress, amt sdk.Coins) error\n\n    types.QueryServer\n}\n</code></pre>"},{"location":"bank/#sendkeeper","title":"SendKeeper","text":"<p>Send Keeper \u200b\u63d0\u4f9b\u200b\u5c0d\u200b\u8cec\u6236\u200b\u9918\u984d\u200b\u7684\u200b\u8a2a\u554f\u200b\u4ee5\u53ca\u200b\u5728\u200b\u8cec\u6236\u200b\u4e4b\u9593\u200b\u8f49\u79fb\u4ee3\u5e63\u200b\u7684\u200b\u529f\u80fd\u200b\u3002Send Keeper \u200b\u4e0d\u6703\u200b\u6539\u8b8a\u4ee3\u5e63\u200b\u7e3d\u4f9b\u200b\u61c9\u91cf\u200b\uff08\u200b\u5373\u4e0d\u6703\u200b\u9444\u9020\u200b\u6216\u92b7\u200b\u6bc0\u4ee3\u5e63\u200b\uff09\u3002</p> <pre><code>// SendKeeper \u200b\u5b9a\u7fa9\u4e86\u200b\u4e00\u500b\u200b\u6a21\u7d44\u200b\u63a5\u53e3\u200b\uff0c\u200b\u8a72\u200b\u63a5\u53e3\u200b\u6709\u52a9\u200b\u65bc\u200b\u5728\u200b\u8cec\u6236\u200b\u4e4b\u9593\u200b\u8f49\u79fb\u4ee3\u5e63\u200b\uff0c\u200b\u800c\u200b\u4e0d\u200b\u5177\u6709\u200b\u5275\u5efa\u4ee3\u5e63\u200b\u7684\u200b\u53ef\u80fd\u6027\u200b\u3002\ntype SendKeeper interface {\n    ViewKeeper\n\n    InputOutputCoins(ctx sdk.Context, inputs []types.Input, outputs []types.Output) error\n    SendCoins(ctx sdk.Context, fromAddr sdk.AccAddress, toAddr sdk.AccAddress, amt sdk.Coins) error\n\n    GetParams(ctx sdk.Context) types.Params\n    SetParams(ctx sdk.Context, params types.Params)\n\n    IsSendEnabledCoin(ctx sdk.Context, coin sdk.Coin) bool\n    IsSendEnabledCoins(ctx sdk.Context, coins ...sdk.Coin) error\n\n    BlockedAddr(addr sdk.AccAddress) bool\n}\n</code></pre>"},{"location":"bank/#viewkeeper","title":"ViewKeeper","text":"<p>View Keeper \u200b\u63d0\u4f9b\u200b\u5c0d\u200b\u8cec\u6236\u200b\u9918\u984d\u200b\u7684\u200b\u53ea\u200b\u8b80\u200b\u8a2a\u554f\u200b\u3002View Keeper \u200b\u4e0d\u200b\u5177\u6709\u200b\u4fee\u6539\u200b\u9918\u984d\u200b\u7684\u200b\u529f\u80fd\u200b\u3002\u200b\u6240\u6709\u200b\u9918\u984d\u200b\u67e5\u8a62\u200b\u7684\u200b\u6642\u9593\u200b\u8907\u200b\u96dc\u5ea6\u200b\u90fd\u200b\u662f\u200b O(1)\u3002</p> <pre><code>// ViewKeeper \u200b\u5b9a\u7fa9\u4e86\u200b\u4e00\u500b\u200b\u6a21\u7d44\u200b\u63a5\u53e3\u200b\uff0c\u200b\u8a72\u200b\u63a5\u53e3\u200b\u6709\u52a9\u200b\u65bc\u200b\u5be6\u73fe\u200b\u5c0d\u200b\u8cec\u6236\u200b\u9918\u984d\u200b\u7684\u200b\u53ea\u200b\u8b80\u200b\u8a2a\u554f\u200b\u3002\ntype ViewKeeper interface {\n    ValidateBalance(ctx sdk.Context, addr sdk.AccAddress) error\n    HasBalance(ctx sdk.Context, addr sdk.AccAddress, amt sdk.Coin) bool\n\n    GetAllBalances(ctx sdk.Context, addr sdk.AccAddress) sdk.Coins\n    GetAccountsBalances(ctx sdk.Context) []types.Balance\n    GetBalance(ctx sdk.Context, addr sdk.AccAddress, denom string) sdk.Coin\n    LockedCoins(ctx sdk.Context, addr sdk.AccAddress) sdk.Coins\n    SpendableCoins(ctx sdk.Context, addr sdk.AccAddress) sdk.Coins\n\n    IterateAccountBalances(ctx sdk.Context, addr sdk.AccAddress, cb func(coin sdk.Coin) (stop bool))\n    IterateAllBalances(ctx sdk.Context, cb func(address sdk.AccAddress, coin sdk.Coin) (stop bool))\n}\n</code></pre>"},{"location":"bank/#messages","title":"Messages","text":""},{"location":"bank/#msgsend","title":"MsgSend","text":"<p>\u200b\u5f9e\u200b\u4e00\u500b\u200b\u5730\u5740\u200b\u5411\u200b\u53e6\u200b\u4e00\u500b\u200b\u5730\u5740\u200b\u767c\u9001\u4ee3\u5e63\u200b\u3002 +++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/bank/v1beta1/tx.proto#L19-L28</p> <p>\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u6d88\u606f\u200b\u5c07\u6703\u200b\u5931\u6557\u200b\uff1a:</p> <ul> <li>\u200b\u4ee3\u5e63\u200b\u672a\u200b\u555f\u7528\u200b\u767c\u9001\u200b\u529f\u80fd\u200b</li> <li>to \u200b\u5730\u5740\u200b\u53d7\u9650\u200b</li> </ul>"},{"location":"bank/#_7","title":"\u4e8b\u4ef6","text":"<p>\u200b\u9280\u884c\u200b\u6a21\u7d44\u200b\u767c\u51fa\u200b\u4ee5\u4e0b\u200b\u4e8b\u4ef6\u200b\uff1a</p>"},{"location":"bank/#handlers","title":"Handlers","text":""},{"location":"bank/#msgsend_1","title":"MsgSend","text":"Type Attribute Key Attribute Value transfer recipient {recipientAddress} transfer amount {amount} message module bank message action send message sender {senderAddress}"},{"location":"bank/#keeper-events","title":"Keeper events","text":"<p>In addition to handlers events, the bank keeper will produce events when the following methods are called (or any method which ends up calling them)</p>"},{"location":"bank/#mintcoins","title":"MintCoins","text":"<pre><code>{\n  \"type\": \"coinbase\",\n  \"attributes\": [\n    {\n      \"key\": \"minter\",\n      \"value\": \"{{sdk.AccAddress of the module minting coins}}\",\n      \"index\": true\n    },\n    {\n      \"key\": \"amount\",\n      \"value\": \"{{sdk.Coins being minted}}\",\n      \"index\": true\n    }\n  ]\n}\n</code></pre> <pre><code>{\n  \"type\": \"coin_received\",\n  \"attributes\": [\n    {\n      \"key\": \"receiver\",\n      \"value\": \"{{sdk.AccAddress of the module minting coins}}\",\n      \"index\": true\n    },\n    {\n      \"key\": \"amount\",\n      \"value\": \"{{sdk.Coins being received}}\",\n      \"index\": true\n    }\n  ]\n}\n</code></pre>"},{"location":"bank/#burncoins","title":"BurnCoins","text":"<pre><code>{\n  \"type\": \"burn\",\n  \"attributes\": [\n    {\n      \"key\": \"burner\",\n      \"value\": \"{{sdk.AccAddress of the module burning coins}}\",\n      \"index\": true\n    },\n    {\n      \"key\": \"amount\",\n      \"value\": \"{{sdk.Coins being burned}}\",\n      \"index\": true\n    }\n  ]\n}\n</code></pre> <pre><code>{\n  \"type\": \"coin_spent\",\n  \"attributes\": [\n    {\n      \"key\": \"spender\",\n      \"value\": \"{{sdk.AccAddress of the module burning coins}}\",\n      \"index\": true\n    },\n    {\n      \"key\": \"amount\",\n      \"value\": \"{{sdk.Coins being burned}}\",\n      \"index\": true\n    }\n  ]\n}\n</code></pre>"},{"location":"bank/#addcoins","title":"addCoins","text":"<pre><code>{\n  \"type\": \"coin_received\",\n  \"attributes\": [\n    {\n      \"key\": \"receiver\",\n      \"value\": \"{{sdk.AccAddress of the address beneficiary of the coins}}\",\n      \"index\": true\n    },\n    {\n      \"key\": \"amount\",\n      \"value\": \"{{sdk.Coins being received}}\",\n      \"index\": true\n    }\n  ]\n}\n</code></pre>"},{"location":"bank/#subunlockedcoinsdelegatecoins","title":"subUnlockedCoins/DelegateCoins","text":"<pre><code>{\n  \"type\": \"coin_spent\",\n  \"attributes\": [\n    {\n      \"key\": \"spender\",\n      \"value\": \"{{sdk.AccAddress of the address which is spending coins}}\",\n      \"index\": true\n    },\n    {\n      \"key\": \"amount\",\n      \"value\": \"{{sdk.Coins being spent}}\",\n      \"index\": true\n    }\n  ]\n}\n</code></pre>"},{"location":"bank/#_8","title":"\u53c3\u6578","text":"<p>\u200b\u9280\u884c\u200b\u6a21\u7d44\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u53c3\u6578\u200b\uff1a</p> Key Type Example SendEnabled []SendEnabled [{denom: \"stake\", enabled: true }] DefaultSendEnabled bool true"},{"location":"bank/#sendenabled","title":"SendEnabled","text":"<p>send_enabled \u200b\u53c3\u6578\u200b\u662f\u200b\u4e00\u500b\u200b\u7531\u200b SendEnabled \u200b\u689d\u76ee\u200b\u7d44\u6210\u200b\u7684\u200b\u6578\u7d44\u200b\uff0c\u200b\u5c07\u4ee3\u5e63\u200b\u9762\u503c\u200b\u6620\u5c04\u200b\u5230\u200b\u5b83\u5011\u200b\u7684\u200b send_enabled \u200b\u72c0\u614b\u200b\u3002 \u200b\u6b64\u200b\u5217\u8868\u200b\u4e2d\u200b\u7684\u200b\u689d\u76ee\u200b\u512a\u5148\u200b\u65bc\u200b DefaultSendEnabled \u200b\u8a2d\u7f6e\u200b\u3002</p>"},{"location":"bank/#defaultsendenabled","title":"DefaultSendEnabled","text":"<p>\u200b\u9664\u975e\u200b\u7279\u5225\u200b\u5305\u542b\u200b\u5728\u200b SendEnabled \u200b\u53c3\u6578\u200b\u7684\u200b\u6578\u7d44\u200b\u4e2d\u200b\uff0c\u200b\u5426\u5247\u200b\u4ee3\u5e63\u200b\u9762\u984d\u200b\u4e0d\u53d7\u200b\u5f71\u97ff\u200b\u3002</p>"},{"location":"chat/","title":"\u804a\u5929","text":"<p>\u200b\u804a\u5929\u200b\u6a21\u584a\u200b\u8ca0\u8cac\u7528\u200b\u6236\u93c8\u200b\u4e0a\u200b\u804a\u5929\u200b\u76f8\u95dc\u200b\u7684\u200b\u8cc7\u6599\u200b\u7ba1\u7406\u200b\uff0c\u200b\u5305\u62ec\u200b\u7528\u6236\u200b\u7684\u200b\u93c8\u200b\u4e0a\u200b\u8cc7\u8a0a\u200b\u5b58\u5132\u200b\u7b49\u200b</p> <pre><code>chat/\n\u251c\u2500\u2500 client\n\u2502   \u2514\u2500\u2500 rest\n\u2502        \u251c\u2500\u2500 error.go          # \u200b\u4ecb\u9762\u200b\u932f\u8aa4\u200b\u96c6\u200b\n\u2502        \u251c\u2500\u2500 grpc.go           # grpc\u200b\u67e5\u8be2\u65b9\u6cd5\u200b\n\u2502        \u251c\u2500\u2500 handle_account.go # grpc\u200b\u67fb\u200b\u8a62\u200b\u65b9\u6cd5\u200b\n\u2502        \u251c\u2500\u2500 handle_chat.go    # chat\u200b\u6a21\u584a\u200b\u6d88\u606f\u200b\u524d\u7f6e\u200b\u8655\u7406\u200b\n\u2502        \u251c\u2500\u2500 query.go          # \u200b\u4ecb\u9762\u200b\u67fb\u200b\u8a62\u51fd\u6578\u200b\n\u2502        \u251c\u2500\u2500 rest.go           # \u200b\u6d88\u606f\u200b\u8207\u200b\u67fb\u200b\u8a62\u200b\u8def\u7531\u200b\u7684\u200b\u6ce8\u518c\u200b\n\u2502        \u2514\u2500\u2500 tx.go             # tx\u200b\u76f8\u95dc\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u5305\u62ec\u200b\u5ee3\u64ad\u200b\u7b49\u200b\n\u251c\u2500\u2500 keeper\n\u2502   \u251c\u2500\u2500 genesis.go        # \u200b\u6a21\u584a\u200b\u7684\u200b\u72c0\u614b\u5316\u200b\u548c\u200b\u532f\u51fa\u200b\n\u2502   \u251c\u2500\u2500 keeper.go         # \u200b\u5b58\u5132\u200b\u7ba1\u7406\u5668\u200b\uff0c\u200b\u8655\u7406\u200b\u6a21\u584a\u200b\u7684\u200b\u696d\u52d9\u200b\u908f\u8f2f\u200b\uff0c\u200b\u4e26\u6709\u200b\u8a31\u53ef\u6b0a\u200b\u8a2a\u554f\u200b\u72c0\u614b\u200b\u6a39\u200b\u7684\u200b\u7279\u5b9a\u200b\u5b50\u6a39\u200b\n\u2502   \u251c\u2500\u2500 msg_server.go     # \u200b\u63d0\u4f9b\u200b\u4e0a\u93c8\u200b\u6d88\u606f\u200b\u7684\u200b\u670d\u52d9\u200b\u8655\u7406\u200b\u908f\u8f2f\u200b\n\u2502   \u251c\u2500\u2500 params.go         # \u200b\u6a21\u584a\u200b\u53c3\u6578\u200b\u7684\u200b\u8a2d\u5b9a\u200b\u548c\u200b\u7372\u53d6\u200b\n\u2502   \u251c\u2500\u2500 query.go          # \u200b\u72c0\u614b\u200b\u67fb\u200b\u8a62\u51fd\u6578\u200b\n\u251c\u2500\u2500 types\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 codec.go          # \u200b\u7de8\u78bc\u200b\u6ce8\u518c\u200b\u985e\u578b\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 errors.go         # \u200b\u6a21\u584a\u200b\u7279\u5b9a\u200b\u7684\u200b\u932f\u8aa4\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 events.go         # \u200b\u5411\u200bTendermint PubSub/Websocket\u200b\u66b4\u9732\u200b\u7684\u200b\u4e8b\u4ef6\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 genesis.go        # \u200b\u6a21\u584a\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 interface.go      # \u200b\u6a21\u584a\u200b\u7684\u200b\u4ecb\u9762\u200b\u96c6\u5408\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 keys.go           # \u200b\u6a21\u584a\u200b\u5b58\u5132\u200bkey\u200b\u4ee5\u53ca\u200b\u4e00\u4e9b\u200b\u5176\u4ed6\u200b\u7684\u200b\u5e38\u6578\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 msg.go            # \u200b\u804a\u5929\u200b\u6a21\u584a\u200b\u4ea4\u6613\u200b\u6d88\u606f\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 params.go         # \u200b\u6a21\u584a\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6cbb\u7406\u200b\u6a21\u584a\u200b\u4fee\u6539\u200b\u7684\u200b\u81ea\u5b9a\u200b\u7fa9\u53c3\u6578\u200b\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 types.go          # \u200b\u6a21\u584a\u200b\u7684\u200b\u985e\u578b\u200b\u96c6\u5408\u200b\n\u251c\u2500\u2500 genesis.go            # ABCI\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\u521d\u59cb\u5316\u200b\u548c\u200b\u532f\u51fa\u200b\u529f\u80fd\u200b\n\u251c\u2500\u2500 handler.go            # \u200b\u6d88\u606f\u200b\u8def\u7531\u200b\n\u2514\u2500\u2500 module.go             # \u200b\u6a21\u584a\u200b\u7ba1\u7406\u5668\u200b\u7684\u200b\u6a21\u584a\u200b\u8a2d\u5b9a\u200b\n</code></pre>"},{"location":"chat/#_1","title":"\u76ee\u9304","text":""},{"location":"chat/#_2","title":"\u804a\u5929","text":"<p>DaoDst\u200b\u4f5c\u70ba\u200b\u4e00\u500b\u200b\u5e36\u200b\u6709\u200b\u53bb\u200b\u4e2d\u5fc3\u5316\u200b\u804a\u5929\u200b\u7684\u200b\u5340\u584a\u200b\u93c8\u200b\uff0c\u200b\u5176\u4e2d\u200b\u804a\u5929\u200b\u7684\u200b\u6578\u64da\u200b\u7684\u200b\u93c8\u200b\u4e0a\u200b\u7ba1\u7406\u200b\uff0c\u200b\u4e3b\u8981\u200b\u5c31\u662f\u200b\u901a\u904e\u200b'x/chat'\u200b\u6a21\u584a\u200b\u9032\u884c\u200b\uff0c</p> <p>\u200b\u7576\u7528\u200b\u6236\u200b\u8a3b\u200b\u518a\u200b\u804a\u5929\u200b\u6642\u200b\uff0c\u200b\u6703\u200b\u767c\u8d77\u200b\u5ee3\u64ad\u200b\uff0c\u200b\u5c07\u7528\u6236\u200b\u7684\u200b\u5730\u5740\u200b\uff0c\u200b\u9598\u9053\u200b\uff0cdid\uff0c\u200b\u804a\u5929\u200b\u7b49\u200b\u8cc7\u8a0a\u200b\u8a18\u9304\u200b\u5230\u200b\u93c8\u200b\u4e0a\u200b\u3002</p> <p>\u200b\u7576\u200b\u5176\u4ed6\u200b\u529f\u80fd\u200b\u6216\u200b\u6a21\u584a\u200b\u9700\u8981\u200b\u8abf\u7528\u200b\u9019\u4e9b\u200b\u6578\u64da\u200b\u6642\u200b\uff0c\u200b\u4e5f\u200b\u9700\u8981\u200b\u901a\u904e\u200bchat\u200b\u6a21\u584a\u200b\u7372\u53d6\u200b</p>"},{"location":"chat/#_3","title":"\u72c0\u614b","text":"<p>Chat\u200b\u6a21\u584a\u200b\u5b58\u5132\u200b\u4e86\u95dc\u200b\u65bc\u200b\u804a\u5929\u200b\u7528\u6236\u200b\u7684\u200b\u57fa\u790e\u200b\u93c8\u4e0a\u200b\u6578\u64da\u200b</p> <pre><code>// \u200b\u7528\u6237\u200b\u4fe1\u606f\u200b\ntype UserInfo struct {\n    //\u200b\u9322\u5305\u200b\u5730\u5740\u200b\n    FromAddress string `json:\"from_address\" yaml:\"from_address\"`\n    //\u200b\u6ce8\u518c\u200b\u9598\u9053\u200b\n    RegisterNodeAddress string `json:\"register_node_address\" yaml:\"register_node_address\"`\n    //\u200b\u7576\u524d\u200b\u9598\u9053\u200b\n    NodeAddress string `json:\"node_address\" yaml:\"node_address\"`\n    //\u200b\u901a\u8a0a\u9304\u200b\n    AddressBook string `json:\"address_book\" yaml:\"address_book\"`\n    //\u200b\u901a\u8a0a\u9304\u200b\u9ed1\u540d\u200b\u55ae\u200b\uff08\u200b\u7528\u6236\u200b\u516c\u958b\u91d1\u200b\u9470\u200b\u52a0\u5bc6\u200b\uff09\n    ChatBlacklist string `json:\"chat_blacklist\" yaml:\"chat_blacklist\"`\n    //\u200b\u804a\u5929\u200b\u9650\u5236\u200b\u6a21\u5f0f\u200b\uff08fee | any | list\uff09\n    ChatRestrictedMode string `json:\"chat_restricted_mode\" yaml:\"chat_restricted_mode\"`\n    //\u200b\u901a\u8a0a\u9304\u200b\u767d\u540d\u200b\u55ae\u200b\uff08\u200b\u7528\u6236\u200b\u516c\u958b\u91d1\u200b\u9470\u200b\u52a0\u5bc6\u200b\uff09\n    ChatWhitelist string `json:\"chat_whitelist\" yaml:\"chat_whitelist\"`\n    //\u200b\u804a\u5929\u200b\u6536\u8cbb\u8cbb\u7528\u200b\n    ChatFee types.Coin `json:\"chat_fee\" yaml:\"chat_fee\"`\n    //\u200b\u6301\u6709\u200bdid\n    Mobile []string `json:\"mobile\" yaml:\"mobile\"`\n    //\u200b\u6700\u200b\u5f8c\u200b\u66f4\u65b0\u200b\u6642\u9593\u200b\n    UpdateTime int64 `json:\"update_time\" yaml:\"update_time\"`\n    //\u200b\u901a\u8a0a\u9304\u200b\u9ed1\u540d\u200b\u55ae\u200b\uff08\u200b\u9598\u9053\u200b\u516c\u958b\u91d1\u200b\u9470\u200b\u52a0\u5bc6\u200b\uff09\n    ChatBlackEncList string `json:\"chat_black_enc_list\" yaml:\"chat_black_enc_list\"`\n    //\u200b\u901a\u8a0a\u9304\u200b\u767d\u540d\u200b\u55ae\u200b\uff08\u200b\u9598\u9053\u200b\u516c\u958b\u91d1\u200b\u9470\u200b\u52a0\u5bc6\u200b\uff09\n    ChatWhiteEncList string `json:\"chat_white_enc_list\" yaml:\"chat_white_enc_list\" `\n    //\u200b\u5099\u200b\u8a3b\u200b\n    Remarks string `json:\"remarks\" yaml:\"remarks\"`\n}\n</code></pre> <p>\u200b\u7528\u6236\u200b\u5728\u200b\u6ce8\u518c\u200b\u7684\u200b\u6642\u5019\u200b\u6703\u5c07\u200b\u5176\u200b\u521d\u59cb\u5316\u200b\uff0c</p> <p>\u200b\u5176\u4e2d\u200bChatRestrictedMode\uff0cChatFee\u200b\u5169\u500b\u95dc\u200b\u65bc\u200b\u804a\u5929\u200b\u6536\u8cbb\u200b\u7684\u200b\u53c3\u6578\u6703\u200b\u6709\u200b\u9810\u8a2d\u503c\u200b</p> <p>Chat\u200b\u6a21\u584a\u200b\u7684\u200b\u5927\u591a\u200b\u6578\u696d\u52d9\u200b\u908f\u8f2f\u200b\u90fd\u200b\u662f\u200b\u57fa\u200b\u65bc\u200b\u6b64\u200b\u7d50\u69cb\u9ad4\u200b\u7684\u200b</p>"},{"location":"chat/#did","title":"DID","text":"<p>\u200b\u7528\u200b\u6236\u200b\u8a3b\u200b\u518a\u200b\u6642\u200b\u9700\u8981\u200b\u9078\u64c7\u200b\u6240\u5c6c\u200b\u7684\u200b\u9598\u9053\u200b\uff0c\u200b\u4e26\u9078\u64c7\u5c6c\u200b\u65bc\u200b\u9598\u9053\u200b\u7684\u200b\u4e00\u500b\u200b\u865f\u78bc\u200b\u6bb5\u200b \u200b\u5728\u200b\u6b64\u865f\u200b\u78bc\u6bb5\u200b\u4e0b\u200b\uff0c\u200b\u7528\u6236\u5c07\u200b\u5f97\u5230\u200b\u4e00\u500b\u200b\u5c08\u5c6c\u200b\u7684\u200b\u865f\u78bc\u200b\uff08DID\uff09\uff0c\u200b\u6b64\u865f\u200b\u78bc\u6b78\u5c6c\u200b\u8207\u200b\u9322\u200b\u5305\u200b\u5730\u5740\u200b\uff08\u200b\u5373\u4f7f\u200b\u9598\u9053\u200b\u4e0d\u518d\u200b\u5b58\u5728\u200b\uff09 \u200b\u8655\u7406\u200b\u524d\u7f6e\u200b\u865f\u78bc\u200b\u6bb5\u200b\u5916\u200b\uff0c\u200b\u5f8c\u200b\u7e8c\u200b\u7684\u200b\u865f\u78bc\u200b\u662f\u200b\u905e\u589e\u200b\u7684\u200b</p> <p>\u200b\u6bd4\u5982\u200b\u67d0\u9598\u200b\u9053\u200b\u4e0b\u200b8888888\u200b\u865f\u78bc\u200b\u6bb5\u200b\uff0c\u200b\u6b64\u865f\u200b\u78bc\u6bb5\u200b\u4e0b\u200b\u865f\u78bc\u200b\u5df2\u200b\u7d93\u5230\u200b\u9054\u200b1234 \u200b\u90a3\u9ebc\u200b\u4e0b\u200b\u4e00\u500b\u200b\u9078\u64c7\u200b\u6b64\u865f\u200b\u78bc\u6bb5\u200b\u7684\u200b\u4eba\u200b\uff0c\u200b\u7372\u5f97\u200b\u7684\u200b\u865f\u78bc\u200b\u5c07\u6703\u200b\u662f\u200b88888881235</p> <p>\u200b\u9664\u4e86\u200b\u6ce8\u518c\u200b\u5916\u200b\uff0c\u200b\u9084\u200b\u53ef\u4ee5\u200b\u4e3b\u52d5\u92b7\u200b\u6bc0\u4f86\u200b\u7372\u5f97\u200bDID</p> <p>did \u200b\u53ef\u4ee5\u200b\u901a\u200b\u4e3b\u52a8\u200b\u8f6c\u8ba9\u200b</p>"},{"location":"chat/#_4","title":"\u92b7\u6bc0\u200b\u8207\u200b\u8cea\u62bc","text":"<p>\u200b\u6ce8\u518c\u200b\u804a\u5929\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u9500\u6bc1\u200b\u4e00\u5b9a\u200b\u6570\u91cf\u200b\u7684\u200bDST,\u200b\u540c\u65f6\u200b\uff0c\u200b\u6ce8\u518c\u200b\u5408\u7ea6\u200b\u5c06\u4f1a\u200b\u81ea\u52a8\u200b\u628a\u200b\u9500\u6bc1\u200b\u5f97\u5230\u200b\u7684\u200b\u54c8\u5e0c\u200b\u5e01\u200b\u8d28\u62bc\u200b\u5230\u200b Pledge \u200b\u6a21\u5757\u200b\uff0c\u200b\u7531\u6b64\u200b\u83b7\u5f97\u200b\u8d28\u62bc\u200b\u5956\u52b1\u200b</p>"},{"location":"chat/#_5","title":"\u804a\u5929\u200b\u6536\u8cbb\u200b\u6a21\u5f0f","text":"<p>\u200b\u7528\u200b\u6236\u200b\u8a3b\u200b\u518a\u200b\u6642\u200b\uff0c\u200b\u9ed8\u8a8d\u200b\u7684\u200b\u804a\u5929\u200b\u6536\u8cbb\u200b\u6a21\u5f0f\u200b\u70ba\u200b\u201d\u200b\u6536\u8cbb\u200b\u201c\uff0c\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u81ea\u884c\u200b\u767c\u200b\u6d88\u606f\u200b\u4e0a\u93c8\u200b\u66f4\u6539\u200b</p> <p>\u200b\u6709\u200b\u5982\u4e0b\u200b\u4e09\u7a2e\u200b\u6a21\u5f0f\u200b</p> <ul> <li>\u200b\u6536\u8cbb\u200b\u6a21\u5f0f\u200b</li> </ul> <p>\u200b\u958b\u555f\u200b\u6536\u8cbb\u200b\u6a21\u5f0f\u200b\u5f8c\u200b\uff0c\u200b\u4e3b\u52d5\u200b\u767c\u8d77\u200b\u804a\u5929\u200b\u6216\u8005\u200b\u62c9\u5165\u200b\u623f\u9593\u200b\u9700\u8981\u200b\u652f\u4ed8\u200b\u4e00\u5b9a\u200b\u8cbb\u7528\u200b</p> <ul> <li>\u200b\u516c\u958b\u200b\u6a21\u5f0f\u200b</li> </ul> <p>\u200b\u958b\u555f\u200b\u516c\u958b\u200b\u6a21\u5f0f\u200b\u5f8c\u200b\uff0c\u200b\u4efb\u4f55\u4eba\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u4e3b\u52d5\u200b\u5411\u200b\u4f60\u200b\u767c\u8d77\u200b\u804a\u5929\u200b</p> <ul> <li>\u200b\u767d\u540d\u200b\u55ae\u200b\u6a21\u5f0f\u200b</li> </ul> <p>\u200b\u958b\u555f\u200b\u767d\u540d\u200b\u55ae\u200b\u6a21\u5f0f\u200b\u5f8c\u200b\uff0c\u200b\u53ea\u6709\u200b\u5728\u200b\u767d\u540d\u200b\u55ae\u5167\u200b\u7684\u200b\u5730\u5740\u200b\u53ef\u4ee5\u200b\u5411\u200b\u4f60\u200b\u767c\u8d77\u200b\u804a\u5929\u200b\uff08\u200b\u767d\u540d\u200b\u55ae\u200b\u7684\u200b\u8a2d\u5b9a\u200b\u540c\u5c6c\u200b\u65bc\u200bchat\u200b\u6a21\u584a\u200b\uff09</p>"},{"location":"chat/#_6","title":"\u529f\u80fd","text":"<p>\u200b\u804a\u5929\u200b\u6a21\u584a\u200b' Keeper '\u200b\u6388\u4e88\u200b\u5c0d\u200b\u804a\u5929\u200b\u6a21\u584a\u200b\u72c0\u614b\u200b\u7684\u200b\u5b58\u53d6\u200b\u6b0a\u9650\u200b \u200b\u4e26\u5be6\u73fe\u200b' statedb\u3002 \u200b\u4ecb\u9762\u200b\uff0c\u200b\u4ee5\u200b\u652f\u6301\u200b' StateDB '\u200b\u5be6\u73fe\u200b\u3002 Keeper\u200b\u5305\u542b\u200b\u4e00\u500b\u200b\u5141\u8a31\u200b\u8cc7\u6599\u200b\u5eab\u200b\u7684\u200b\u5b58\u5132\u9375\u200b \u200b\u5beb\u5165\u200b\u53ea\u80fd\u200b\u7531\u200bChat\u200b\u6a21\u584a\u200b\u8a2a\u554f\u200b\u7684\u200b\u591a\u5eab\u200b\u7684\u200b\u5177\u9ad4\u5b50\u200b\u6a39\u200b\u3002 \u200b\u800c\u200b\u4e0d\u662f\u200b\u4f7f\u7528\u200b\u6a39\u200b\u548c\u200b\u8cc7\u6599\u200b\u5eab\u200b\u9032\u884c\u200b\u67fb\u200b\u8a62\u200b\u548c\u200b\u6301\u4e45\u200b\u5316\u200b\uff08' StateDB '\u200b\u5be6\u73fe\u200b\uff09\uff0c DaoDst\u200b\u4f7f\u7528\u200bCosmos\u200b\u7684\u200b\u201cKVStore\u201d\uff08\u200b\u9375\u503c\u200b\u5b58\u5132\u200b\uff09\u200b\u548c\u200bCosmos SDK\u200b\u7684\u200b\u201cKeeper\u201d\u200b\u4f86\u200b\u4fc3\u9032\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u652f\u6301\u200b\u4ecb\u9762\u200b\u529f\u80fd\u200b\uff0c\u200b\u5b83\u5c0e\u5165\u200b\u4e86\u200b4\u200b\u500b\u200b\u6a21\u584a\u200bKeepers:</p> <ul> <li><code>auth</code>: \u200b\u5e33\u865f\u200b\u7684\u200b\u589e\u5220\u200b\u6539\u67e5\u200b</li> <li><code>bank</code>: \u200b\u4f9b\u61c9\u91cf\u200b\u548c\u200b\u9918\u984d\u200b\u7684\u200b\u589e\u5220\u200b\u6539\u67e5\u200b</li> <li><code>comm</code>: \u200b\u9598\u9053\u200b\u76f8\u95dc\u200b\u8cc7\u6599\u200b\u7684\u200b\u7ba1\u7406\u200b</li> <li><code>pledge</code>: \u200b\u8cea\u62bc\u200b\u3001\u200b\u92b7\u6bc0\u200b\u8207\u200b\u734e\u52f5\u200b</li> </ul> <pre><code>type Keeper struct {\n    storeKey   sdk.StoreKey\n    cdc        codec.BinaryCodec\n    paramstore paramtypes.Subspace\n\n    accountKeeper types.AccountKeeper\n    bankKeeper    types.BankKeeper\n    commKeeper    commkeeper.Keeper\n    pledgeKeeper  pledgekeeper.Keeper\n}\n\n</code></pre>"},{"location":"chat/#_7","title":"\u6d88\u606f","text":""},{"location":"chat/#msgsendgift","title":"MsgSendGift","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\u5c07\u200b\u5730\u5740\u200b\u6ce8\u518c\u200b\u5230\u200bchat\u200b\u6a21\u584a\u200b\uff0c\u200b\u4e26\u200b\u521d\u59cb\u5316\u200b\u5c0d\u61c9\u200b\u8cc7\u8a0a\u200b\n</code></pre> <pre><code>      type MsgRegister struct {\n          FromAddress    string     `protobuf:\"bytes,1,opt,name=from_address,json=fromAddress,proto3\" json:\"from_address,omitempty\" yaml:\"from_address\"`\n          NodeAddress    string     `protobuf:\"bytes,2,opt,name=node_address,json=nodeAddress,proto3\" json:\"node_address,omitempty\" yaml:\"node_address\"`\n          MortgageAmount types.Coin `protobuf:\"bytes,3,opt,name=mortgage_amount,json=mortgageAmount,proto3\" json:\"mortgage_amount\" yaml:\"mortgage_amount\"`\n          MobilePrefix   string     `protobuf:\"bytes,4,opt,name=mobile_prefix,json=mobilePrefix,proto3\" json:\"mobile_prefix,omitempty\" yaml:\"mobile_prefix\"`\n      }\n</code></pre>"},{"location":"chat/#msgsetchatinfo","title":"MsgSetChatInfo","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\u4fee\u6539\u200b\u5730\u5740\u200b\u5c0d\u61c9\u200b\u7684\u200bchat\u200b\u6a21\u584a\u200b\u5b58\u5132\u200b\u7684\u200b\u6578\u64da\u200b\uff0c\u200b\u8a72\u200b\u6d88\u606f\u200b\u63a5\u53d7\u200b\u5168\u91cf\u200b\u7684\u200b\u7528\u6236\u200b\u6578\u64da\u200b\uff0c\u200b\u4e26\u8986\u84cb\u200b\u539f\u4f86\u200b\u7684\u200b\u6578\u64da\u200b\n</code></pre> <pre><code>    type MsgSetChatInfo struct {\n        FromAddress        string     `protobuf:\"bytes,1,opt,name=from_address,json=fromAddress,proto3\" json:\"from_address,omitempty\" yaml:\"from_address\"`\n        NodeAddress        string     `protobuf:\"bytes,2,opt,name=node_address,json=nodeAddress,proto3\" json:\"node_address,omitempty\" yaml:\"node_address\"`\n        AddressBook        string     `protobuf:\"bytes,3,opt,name=address_book,json=addressBook,proto3\" json:\"address_book,omitempty\" yaml:\"address_book\"`\n        ChatBlacklist      string     `protobuf:\"bytes,4,opt,name=chat_blacklist,json=chatBlacklist,proto3\" json:\"chat_blacklist,omitempty\" yaml:\"chat_blacklist\"`\n        ChatRestrictedMode string     `protobuf:\"bytes,5,opt,name=chat_restricted_mode,json=chatRestrictedMode,proto3\" json:\"chat_restricted_mode,omitempty\" yaml:\"chat_limit\"`\n        ChatFee            types.Coin `protobuf:\"bytes,6,opt,name=chat_fee,json=chatFee,proto3\" json:\"chat_fee\" yaml:\"chat_fee\"`\n        ChatWhitelist      string     `protobuf:\"bytes,7,opt,name=chat_whitelist,json=chatWhitelist,proto3\" json:\"chat_whitelist,omitempty\" yaml:\"chat_whitelist\"`\n        UpdateTime         int64      `protobuf:\"varint,8,opt,name=update_time,json=updateTime,proto3\" json:\"update_time,omitempty\" yaml:\"update_time\"`\n        ChatBlacklistEnc   string     `protobuf:\"bytes,9,opt,name=chat_blacklist_enc,json=chatBlacklistEnc,proto3\" json:\"chat_blacklist_enc,omitempty\" yaml:\"chat_blacklist_enc\"`\n        ChatWhitelistEnc   string     `protobuf:\"bytes,10,opt,name=chat_whitelist_enc,json=chatWhitelistEnc,proto3\" json:\"chat_whitelist_enc,omitempty\" yaml:\"chat_whitelist_enc\"`\n    }\n</code></pre>"},{"location":"chat/#msgburngetmobile","title":"MsgBurnGetMobile","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\u901a\u904e\u200b\u92b7\u6bc0\u200b\u7684\u200b\u7ba1\u9053\u200b\u7372\u5f97\u200bdid\uff0c\u200b\u7372\u5f97\u200b\u7684\u200bdid\u200b\u7684\u200b\u9996\u78bc\u200b\u70ba\u200b\u9078\u64c7\u200b\u7684\u200bdid\u200b\u865f\u6bb5\u200b\uff0c\u200b\u5c3e\u78bc\u5247\u200b\u5728\u200b\u6b64\u865f\u200b\u6bb5\u200b\u4e0b\u200b\u905e\u589e\u200b\n\n\u200b\u5982\u679c\u200b\u865f\u6bb5\u200b\u8207\u200b\u9598\u9053\u200b\u4e0d\u200b\u5339\u914d\u200b\u6216\u865f\u200b\u6bb5\u200b\u4e0b\u200b\u865f\u78bc\u200b\u5df2\u6eff\u200b\uff0c\u200b\u5247\u7372\u53d6\u200b\u5931\u6557\u200b\n</code></pre> <pre><code>    type MsgBurnGetMobile struct {\n        FromAddress  string `protobuf:\"bytes,1,opt,name=from_address,json=fromAddress,proto3\" json:\"from_address,omitempty\" yaml:\"from_address\"`\n        MobilePrefix string `protobuf:\"bytes,2,opt,name=mobile_prefix,json=mobilePrefix,proto3\" json:\"mobile_prefix,omitempty\" yaml:\"mobile_prefix\"`\n    }\n</code></pre>"},{"location":"chat/#msgmobiletransfer","title":"MsgMobileTransfer","text":"<pre><code>\u200b\u6301\u6709\u200b\u7684\u200bdid\u200b\u53ef\u4ee5\u200b\u8f49\u8b93\u200b\n\n\u200b\u5982\u679c\u200b\u5c0d\u65b9\u200b\u6301\u6709\u200b\u7684\u200bdid\u200b\u5df2\u7d93\u200b\u5230\u200b\u9054\u200b\u6700\u5927\u200b\u6301\u6709\u200b\u91cf\u200b\uff0c\u200b\u5247\u8f49\u200b\u8b93\u200b\u5931\u6557\u200b\n</code></pre> <pre><code>    type MsgMobileTransfer struct {\n        FromAddress string `protobuf:\"bytes,1,opt,name=from_address,json=fromAddress,proto3\" json:\"from_address,omitempty\" yaml:\"from_address\"`\n        ToAddress   string `protobuf:\"bytes,2,opt,name=to_address,json=toAddress,proto3\" json:\"to_address,omitempty\" yaml:\"to_address\"`\n        Mobile      string `protobuf:\"bytes,3,opt,name=mobile,proto3\" json:\"mobile,omitempty\" yaml:\"mobile\"`\n    }\n</code></pre>"},{"location":"chat/#msgchatsendgift","title":"MsgChatSendGift","text":"<pre><code>\u200b\u804a\u5929\u200b\u652f\u4ed8\u200b\uff0c\u200b\u5982\u679c\u200b\u5c0d\u65b9\u200b\u8a2d\u5b9a\u200b\u4e86\u200b\u804a\u5929\u200b\u6536\u8cbb\u200b\uff0c\u200b\u9700\u8981\u200b\u767c\u8d77\u200b\u6b64\u200b\u6d88\u606f\u200b\u7d66\u5c0d\u65b9\u200b\u652f\u4ed8\u200b\u4e00\u5b9a\u200btoken\n</code></pre> <pre><code>    type MsgChatSendGift struct {\n        FromAddress string     `protobuf:\"bytes,1,opt,name=from_address,json=fromAddress,proto3\" json:\"from_address,omitempty\" yaml:\"from_address\"`\n        ToAddress   string     `protobuf:\"bytes,2,opt,name=to_address,json=toAddress,proto3\" json:\"to_address,omitempty\" yaml:\"to_address\"`\n        GiftValue   types.Coin `protobuf:\"bytes,3,opt,name=gift_value,json=giftValue,proto3\" json:\"gift_value\" yaml:\"gift_value\"`\n    }\n</code></pre>"},{"location":"chat/#_8","title":"\u53c3\u6578","text":"<p>chat\u200b\u6a21\u584a\u200b\u5305\u542b\u200b\u5982\u4e0b\u200b\u6a21\u584a\u200b\u53c3\u6578\u200b</p>"},{"location":"chat/#_9","title":"\u53c3\u6578","text":"Key \u200b\u7c7b\u578b\u200b \u200b\u9884\u8bbe\u503c\u200b <code>MaxPhoneNumber</code> uint64 <code>10</code> <code>DestroyPhoneNumberCoin</code> github.com/cosmos/cosmos-sdk/types.Coin <code>100000000000000000000dst</code> <code>ChatFee</code> github.com/cosmos/cosmos-sdk/types.Coin <code>1000000000000000000dst</code> <code>MinRegisterBurnAmount</code> github.com/cosmos/cosmos-sdk/types.Coin <code>100000000000000000000dst</code>"},{"location":"contract/","title":"\u5408\u7d04","text":"<p>\u200b\u6b64\u200b\u6a21\u5757\u200b\u8d1f\u8d23\u200b\u548c\u200bevm\u200b\u6709\u5173\u200b\u7684\u200b\u4ea4\u6613\u200b\u548c\u200b\u67e5\u8be2\u200b</p> <pre><code>chat/\n\u251c\u2500\u2500 client\n\u2502   \u2514\u2500\u2500 rest\n\u2502        \u251c\u2500\u2500 error.go          # \u200b\u4ecb\u9762\u200b\u932f\u8aa4\u200b\u96c6\u200b\n\u2502        \u251c\u2500\u2500 grpc.go           # grpc\u200b\u67fb\u200b\u8a62\u200b\u65b9\u6cd5\u200b\n\u2502        \u251c\u2500\u2500 handle_comm.go    # comm\u200b\u6a21\u584a\u200b\u6d88\u606f\u200b\u524d\u7f6e\u200b\u8655\u7406\u200b\n\u2502        \u251c\u2500\u2500 query.go          # \u200b\u4ecb\u9762\u200b\u67fb\u200b\u8a62\u51fd\u6578\u200b\n\u2502        \u251c\u2500\u2500 rest.go           # \u200b\u6d88\u606f\u200b\u8207\u200b\u67fb\u200b\u8a62\u200b\u8def\u7531\u200b\u7684\u200b\u6ce8\u518c\u200b\n\u2502        \u2514\u2500\u2500 tx.go             # tx\u200b\u76f8\u95dc\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u5305\u62ec\u200b\u5ee3\u64ad\u200b\u7b49\u200b\n\u251c\u2500\u2500 keeper\n\u2502   \u251c\u2500\u2500 genesis.go        # \u200b\u6a21\u584a\u200b\u7684\u200b\u72c0\u614b\u5316\u200b\u548c\u200b\u532f\u51fa\u200b\n\u2502   \u251c\u2500\u2500 keeper.go         # \u200b\u5b58\u5132\u200b\u7ba1\u7406\u5668\u200b\uff0c\u200b\u8655\u7406\u200b\u6a21\u584a\u200b\u7684\u200b\u696d\u52d9\u200b\u908f\u8f2f\u200b\uff0c\u200b\u4e26\u6709\u200b\u8a31\u53ef\u6b0a\u200b\u8a2a\u554f\u200b\u72c0\u614b\u200b\u6a39\u200b\u7684\u200b\u7279\u5b9a\u200b\u5b50\u6a39\u200b\n\u2502   \u251c\u2500\u2500 msg_server.go     # \u200b\u63d0\u4f9b\u200b\u4e0a\u93c8\u200b\u6d88\u606f\u200b\u7684\u200b\u670d\u52d9\u200b\u8655\u7406\u200b\u908f\u8f2f\u200b\n\u2502   \u251c\u2500\u2500 params.go         # \u200b\u6a21\u584a\u200b\u53c3\u6578\u200b\u7684\u200b\u8a2d\u5b9a\u200b\u548c\u200b\u7372\u53d6\u200b\n\u2502   \u251c\u2500\u2500 query.go          # \u200b\u72c0\u614b\u200b\u67fb\u200b\u8a62\u51fd\u6578\u200b\n\u2502   \u251c\u2500\u2500 medal.go          # hash\u200b\u5e01\u200b\u8d28\u62bc\u200b\u8ba1\u7b97\u200b\u76f8\u5173\u200b\u903b\u8f91\u200b\u7b97\u6cd5\u200b\n\u2502   \u2514\u2500\u2500 mingkeeper.go     # \u200b\u94f8\u9020\u200b\u589e\u53d1\u200b\u76f8\u5173\u200b\u903b\u8f91\u200b\u7b97\u6cd5\u200b\n\u251c\u2500\u2500 types\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 codec.go          # \u200b\u7de8\u78bc\u200b\u6ce8\u518c\u200b\u985e\u578b\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 errors.go         # \u200b\u6a21\u584a\u200b\u7279\u5b9a\u200b\u7684\u200b\u932f\u8aa4\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 events.go         # \u200b\u5411\u200bTendermint PubSub/Websocket\u200b\u66b4\u9732\u200b\u7684\u200b\u4e8b\u4ef6\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 genesis.go        # \u200b\u6a21\u584a\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 interface.go      # \u200b\u6a21\u584a\u200b\u7684\u200b\u4ecb\u9762\u200b\u96c6\u5408\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 keys.go           # \u200b\u6a21\u584a\u200b\u5b58\u5132\u200bkey\u200b\u4ee5\u53ca\u200b\u4e00\u4e9b\u200b\u5176\u4ed6\u200b\u7684\u200b\u5e38\u6578\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 msg.go            # \u200b\u804a\u5929\u200b\u6a21\u584a\u200b\u4ea4\u6613\u200b\u6d88\u606f\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 params.go         # \u200b\u6a21\u584a\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6cbb\u7406\u200b\u6a21\u584a\u200b\u4fee\u6539\u200b\u7684\u200b\u81ea\u5b9a\u200b\u7fa9\u53c3\u6578\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 interface.go      # \u200b\u5f15\u5165\u200b\u7684\u200b\u5916\u90e8\u200b\u6a21\u5757\u200b\u5b9e\u73b0\u200b\u7684\u200b\u65b9\u6cd5\u200b\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 types.go          # \u200b\u6a21\u584a\u200b\u7684\u200b\u985e\u578b\u200b\u96c6\u5408\u200b\n\u251c\u2500\u2500 genesis.go            # ABCI\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\u521d\u59cb\u5316\u200b\u548c\u200b\u532f\u51fa\u200b\u529f\u80fd\u200b\n\u251c\u2500\u2500 handler.go            # \u200b\u6d88\u606f\u200b\u8def\u7531\u200b\n\u2514\u2500\u2500 module.go             # \u200b\u6a21\u584a\u200b\u7ba1\u7406\u5668\u200b\u7684\u200b\u6a21\u584a\u200b\u8a2d\u5b9a\u200b\n</code></pre>"},{"location":"contract/#_1","title":"\u6982\u8ff0","text":""},{"location":"contract/#_2","title":"\u5408\u7d04","text":"<pre><code>Contract\u200b\u8ca0\u8cac\u200b\u548c\u200bevm\u200b\u5408\u7d04\u200b\u7684\u200b\u6709\u200b\u95dc\u5167\u5bb9\u200b\n</code></pre>"},{"location":"contract/#_3","title":"\u4e00\u9375\u200b\u767c\u5e63","text":"<pre><code>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6d88\u606f\u200b\u76f4\u63a5\u200b\u5728\u200bevm\u200b\u4e0a\u767c\u200b\u4f48\u200b\u81ea\u5df1\u200b\u7684\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u53ea\u200b\u9700\u8981\u200b\u4e0a\u200b\u50b3\u4ee3\u5e63\u200b\u7684\u200b\u4e00\u4e9b\u200b\u57fa\u672c\u200b\u8cc7\u8a0a\u200b\u5373\u53ef\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u90e8\u7f72\u200b\u4ee3\u5e63\u200b\u5408\u7d04\u200b\n\u200b\u4e00\u5207\u90fd\u5728\u200b\u5408\u7d04\u200b\u5167\u90e8\u200b\u81ea\u52d5\u200b\u5b8c\u6210\u200b\n</code></pre>"},{"location":"contract/#_4","title":"\u8de8\u93c8\u200b\u8f49\u5e33","text":"<pre><code>\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6b64\u200b\u6a21\u584a\u200b\u5be6\u73fe\u200bDaoDst\u200b\u5230\u200b\u5916\u93c8\u200b\u7684\u200b\u4ee3\u5e63\u200b\u6620\u5c04\u200b\u8f49\u5e33\u200b\uff08\u200b\u5982\u200bETH\uff09\uff0c\u200b\u8de8\u93c8\u200b\u652f\u6301\u200b\u96d9\u5411\u200b\n\n\u200b\u7576\u200bDaoDst\u200b\u5411\u200b\u5916\u90e8\u200b\u93c8\u200b\u8de8\u93c8\u200b\u8f49\u5e33\u200b\u6642\u200b\uff0c\u200b\u6703\u5c07\u200bDaodst\u200b\u5167\u90e8\u200b\u7684\u200b\u9918\u984d\u200b\u51cd\u7d50\u200b\uff0c\u200b\u540c\u6642\u200b\uff0c\u200b\u5916\u90e8\u200b\u93c8\u5408\u7d04\u200b\u589e\u767c\u200b\u5c0d\u200b\u61c9\u4ee3\u5e63\u200b\n\u200b\u5c0d\u61c9\u200b\u7684\u200b\uff0c\u200b\u9032\u884c\u200b\u76f8\u53cd\u200b\u64cd\u4f5c\u200b\u6642\u200b\uff0c\u200b\u5916\u90e8\u200b\u93c8\u92b7\u6bc0\u200b\uff0cDaodst\u200b\u89e3\u51cd\u200b\n</code></pre>"},{"location":"contract/#_5","title":"\u529f\u80fd","text":"<p>\u200b\u5408\u7ea6\u200b\u6a21\u584a\u200b' Keeper '\u200b\u6388\u4e88\u200b\u5c0d\u200b\u804a\u5929\u200b\u6a21\u584a\u200b\u72c0\u614b\u200b\u7684\u200b\u5b58\u53d6\u200b\u6b0a\u9650\u200b \u200b\u4e26\u5be6\u73fe\u200b' statedb\u3002 \u200b\u4ecb\u9762\u200b\uff0c\u200b\u4ee5\u200b\u652f\u6301\u200b' StateDB '\u200b\u5be6\u73fe\u200b\u3002 Keeper\u200b\u5305\u542b\u200b\u4e00\u500b\u200b\u5141\u8a31\u200b\u8cc7\u6599\u200b\u5eab\u200b\u7684\u200b\u5b58\u5132\u9375\u200b \u200b\u5beb\u5165\u200b\u53ea\u80fd\u200b\u7531\u200bChat\u200b\u6a21\u584a\u200b\u8a2a\u554f\u200b\u7684\u200b\u591a\u5eab\u200b\u7684\u200b\u5177\u9ad4\u5b50\u200b\u6a39\u200b\u3002 \u200b\u800c\u200b\u4e0d\u662f\u200b\u4f7f\u7528\u200b\u6a39\u200b\u548c\u200b\u8cc7\u6599\u200b\u5eab\u200b\u9032\u884c\u200b\u67fb\u200b\u8a62\u200b\u548c\u200b\u6301\u4e45\u200b\u5316\u200b\uff08' StateDB '\u200b\u5be6\u73fe\u200b\uff09\uff0c DaoDst\u200b\u4f7f\u7528\u200bCosmos\u200b\u7684\u200b\u201cKVStore\u201d\uff08\u200b\u9375\u503c\u200b\u5b58\u5132\u200b\uff09\u200b\u548c\u200bCosmos SDK\u200b\u7684\u200b\u201cKeeper\u201d\u200b\u4f86\u200b\u4fc3\u9032\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u652f\u6301\u200b\u4ecb\u9762\u200b\u529f\u80fd\u200b\uff0c\u200b\u5b83\u5c0e\u5165\u200b\u4e86\u200b7\u200b\u500b\u200b\u6a21\u584a\u200bKeepers:</p> <ul> <li><code>auth</code>: \u200b\u5e33\u865f\u200b\u7684\u200b\u589e\u5220\u200b\u6539\u67e5\u200b</li> <li><code>bank</code>: \u200b\u4f9b\u61c9\u91cf\u200b\u548c\u200b\u9918\u984d\u200b\u7684\u200b\u589e\u5220\u200b\u6539\u67e5\u200b</li> <li><code>staking</code>: \u200b\u9598\u9053\u200b\u76f8\u95dc\u200b\u8cc7\u6599\u200b\u7684\u200b\u7ba1\u7406\u200b</li> <li><code>pledge</code>: \u200b\u804a\u5929\u200b\u76f8\u5173\u200b\u6570\u636e\u200b\u7684\u200b\u7ba1\u7406\u200b</li> <li><code>evm</code>: evm\u200b\u76f8\u5173\u200b\u6570\u636e\u200b\u7684\u200b\u7ba1\u7406\u200b</li> <li><code>chat</code>: \u200b\u804a\u5929\u200b\u76f8\u95dc\u200b\u8cc7\u6599\u200b\u7684\u200b\u7ba1\u7406\u200b</li> <li><code>gateway</code>: \u200b\u9598\u9053\u200b\u8cc7\u6599\u200b\u7ba1\u7406\u200b</li> </ul> <pre><code>    type Keeper struct {\n        storeKey   sdk.StoreKey\n        cdc        codec.BinaryCodec\n        paramstore paramtypes.Subspace\n\n        stakingKeeper *stakingKeeper.Keeper\n        accountKeeper types.AccountKeeper\n        BankKeeper    types.BankKeeper\n        pledgeKeeper  types.PledgeKeeper\n        evmKeeper     types.EVMKeeper\n        chatKeeper    types.ChatKeeper\n        gatewayKeeper types.GatewayKeeper\n        erc20Keeper   erc20keeper.Keeper\n    }\n</code></pre>"},{"location":"contract/#_6","title":"\u6d88\u606f","text":""},{"location":"contract/#msgapptokenissue","title":"MsgAppTokenIssue","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\uff0c\u200b\u767c\u8d77\u200b\u4e00\u9375\u200b\u767c\u5e63\u200b\n</code></pre> <pre><code>    type MsgAppTokenIssue struct {\n        FromAddress   string `protobuf:\"bytes,1,opt,name=from_address,json=fromAddress,proto3\" json:\"from_address,omitempty\" yaml:\"from_address\"`\n        Name          string `protobuf:\"bytes,2,opt,name=name,proto3\" json:\"name,omitempty\" yaml:\"name\"`\n        Symbol        string `protobuf:\"bytes,3,opt,name=symbol,proto3\" json:\"symbol,omitempty\" yaml:\"symbol\"`\n        PreMintAmount string `protobuf:\"bytes,4,opt,name=pre_mint_amount,json=preMintAmount,proto3\" json:\"pre_mint_amount,omitempty\" yaml:\"pre_mint_amount\"`\n        Decimals      string `protobuf:\"bytes,5,opt,name=decimals,proto3\" json:\"decimals,omitempty\" yaml:\"decimals\"`\n        LogoUrl       string `protobuf:\"bytes,6,opt,name=logo_url,json=logoUrl,proto3\" json:\"logo_url,omitempty\" yaml:\"logo_url\"`\n    }\n</code></pre>"},{"location":"contract/#msgcrosschainout","title":"MsgCrossChainOut","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\uff0c\u200b\u5f9e\u200bDaoDst\u200b\u5411\u5916\u200b\u767c\u8d77\u200b\u8de8\u93c8\u200b\u8f49\u5e33\u200b\n</code></pre> <pre><code>    type MsgCrossChainOut struct {\n        SendAddress string `protobuf:\"bytes,1,opt,name=send_address,json=sendAddress,proto3\" json:\"send_address,omitempty\" yaml:\"send_address\"`\n        ToAddress   string `protobuf:\"bytes,2,opt,name=to_address,json=toAddress,proto3\" json:\"to_address,omitempty\" yaml:\"to_address\"`\n        Coins       string `protobuf:\"bytes,3,opt,name=coins,proto3\" json:\"coins,omitempty\" yaml:\"coins\"`\n        ChainType   string `protobuf:\"bytes,4,opt,name=chain_type,json=chainType,proto3\" json:\"chain_type,omitempty\" yaml:\"chain_type\"`\n        Remark      string `protobuf:\"bytes,5,opt,name=remark,proto3\" json:\"remark,omitempty\" yaml:\"remark\"`\n    }\n</code></pre>"},{"location":"contract/#msgcrosschainin","title":"MsgCrossChainIn","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\uff0c\u200b\u5f9e\u200b\u5916\u90e8\u200b\u93c8\u200b\u767c\u8d77\u200b\u5411\u200bDaoDst\u200b\u7684\u200b\u8de8\u93c8\u200b\u8f49\u5e33\u200b\n</code></pre> <pre><code>    type MsgCrossChainIn struct {\n        SendAddress string `protobuf:\"bytes,1,opt,name=send_address,json=sendAddress,proto3\" json:\"send_address,omitempty\" yaml:\"send_address\"`\n        Coins       string `protobuf:\"bytes,2,opt,name=coins,proto3\" json:\"coins,omitempty\" yaml:\"coins\"`\n        ChainType   string `protobuf:\"bytes,3,opt,name=chain_type,json=chainType,proto3\" json:\"chain_type,omitempty\" yaml:\"chain_type\"`\n        Remark      string `protobuf:\"bytes,4,opt,name=remark,proto3\" json:\"remark,omitempty\" yaml:\"remark\"`\n        TxHash      string `protobuf:\"bytes,5,opt,name=tx_hash,json=txHash,proto3\" json:\"tx_hash,omitempty\" yaml:\"tx_hash\"`\n    }\n</code></pre>"},{"location":"distribute/","title":"<code>\u200b\u5206\u914d\u200b</code>","text":""},{"location":"distribute/#_2","title":"\u6982\u89bd","text":"<p>\u200b\u9019\u500b\u200b \u200b\u7c21\u55ae\u200b \u200b\u7684\u200b\u5206\u914d\u200b\u6a5f\u5236\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u4e00\u7a2e\u200b\u88ab\u52d5\u200b\u5730\u5728\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4e4b\u9593\u200b\u5206\u914d\u200b\u734e\u52f5\u200b\u7684\u200b\u529f\u80fd\u200b\u65b9\u6cd5\u200b\u3002\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u9019\u7a2e\u200b\u6a5f\u5236\u200b\u5728\u200b\u734e\u52f5\u200b\u5206\u914d\u200b\u7684\u200b\u7cbe\u78ba\u6027\u200b\u4e0a\u200b\u4e0d\u5982\u200b\u4e3b\u52d5\u200b\u734e\u52f5\u200b\u5206\u914d\u200b\u6a5f\u5236\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5c07\u4f86\u6703\u200b\u9032\u884c\u200b\u5347\u7d1a\u200b\u3002</p> <p>\u200b\u8a72\u200b\u6a5f\u5236\u200b\u7684\u200b\u904b\u4f5c\u200b\u65b9\u5f0f\u200b\u5982\u4e0b\u200b\uff1a\u200b\u6536\u96c6\u200b\u5230\u200b\u7684\u200b\u734e\u52f5\u200b\u5728\u200b\u5168\u5c40\u200b\u7bc4\u570d\u200b\u5167\u200b\u9032\u884c\u532f\u200b\u7e3d\u200b\uff0c\u200b\u4e26\u88ab\u200b\u52d5\u5730\u200b\u5206\u914d\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u3002 \u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u90fd\u200b\u6709\u200b\u6a5f\u6703\u200b\u5411\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6536\u53d6\u200b\u4f63\u91d1\u200b\uff0c\u200b\u4f5c\u70ba\u200b\u4ee3\u8868\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6536\u53d6\u200b\u734e\u52f5\u200b\u7684\u200b\u5831\u916c\u200b\u3002 \u200b\u8cbb\u7528\u200b\u76f4\u63a5\u200b\u6536\u5165\u200b\u5168\u5c40\u200b\u734e\u52f5\u200b\u6c60\u548c\u9a57\u200b\u8b49\u8005\u200b\u63d0\u6848\u4eba\u200b\u734e\u52f5\u200b\u6c60\u200b\u3002 \u200b\u7531\u200b\u65bc\u200b\u88ab\u52d5\u200b\u8a18\u8cec\u200b\u7684\u200b\u7279\u6027\u200b\uff0c\u200b\u6bcf\u7576\u200b\u5f71\u97ff\u200b\u734e\u52f5\u200b\u5206\u914d\u200b\u901f\u7387\u200b\u7684\u200b\u53c3\u6578\u200b\u767c\u751f\u200b\u8b8a\u5316\u6642\u200b\uff0c\u200b\u4e5f\u200b\u5fc5\u9808\u200b\u9032\u884c\u200b\u734e\u52f5\u200b\u7684\u200b\u63d0\u53d6\u200b\u3002</p> <ul> <li>\u200b\u6bcf\u7576\u200b\u63d0\u6b3e\u200b\u6642\u200b\uff0c\u200b\u5fc5\u9808\u200b\u63d0\u53d6\u200b\u81ea\u5df1\u200b\u6709\u6b0a\u200b\u7372\u5f97\u200b\u7684\u200b\u6700\u5927\u200b\u91d1\u984d\u200b\uff0c\u200b\u4e0d\u7559\u200b\u4efb\u4f55\u200b\u9918\u984d\u200b\u5728\u200b\u6c60\u4e2d\u200b\u3002</li> <li>\u200b\u6bcf\u7576\u200b\u5c07\u4ee3\u5e63\u200b\u7d81\u5b9a\u200b\u3001\u200b\u89e3\u7d81\u200b\u6216\u200b\u91cd\u65b0\u200b\u59d4\u200b\u8a17\u200b\u7d66\u73fe\u200b\u6709\u200b\u8cec\u6236\u200b\u6642\u200b\uff0c\u200b\u5fc5\u9808\u200b\u5b8c\u5168\u200b\u63d0\u53d6\u200b\u734e\u52f5\u200b\uff08\u200b\u56e0\u70ba\u200b\u61f6\u60f0\u200b\u8a18\u8cec\u200b\u7684\u200b\u898f\u5247\u200b\u767c\u751f\u200b\u8b8a\u5316\u200b\uff09\u3002</li> <li>\u200b\u6bcf\u7576\u9a57\u200b\u8b49\u8005\u200b\u9078\u64c7\u200b\u66f4\u6539\u200b\u734e\u52f5\u200b\u4f63\u91d1\u200b\u6642\u200b\uff0c\u200b\u5fc5\u9808\u200b\u540c\u6642\u200b\u63d0\u53d6\u200b\u6240\u6709\u200b\u7d2f\u7a4d\u200b\u7684\u200b\u4f63\u91d1\u200b\u734e\u52f5\u200b\u3002</li> </ul> <p>\u200b\u672c\u6587\u200b\u6240\u200b\u6982\u8ff0\u200b\u7684\u200b\u5206\u914d\u200b\u6a5f\u5236\u200b\u7528\u200b\u65bc\u200b\u5728\u200b\u9a57\u8b49\u8005\u200b\u548c\u200b\u76f8\u95dc\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4e4b\u9593\u200b\u61f6\u6027\u200b\u5730\u200b\u5206\u914d\u200b\u4ee5\u4e0b\u200b\u734e\u52f5\u200b\uff1a</p> <ul> <li>\u200b\u591a\u4ee3\u200b\u5e63\u624b\u7e8c\u200b\u8cbb\u4ee5\u200b\u793e\u6703\u5316\u200b\u65b9\u5f0f\u200b\u5206\u914d\u200b</li> <li>\u200b\u63d0\u6848\u4eba\u200b\u734e\u52f5\u200b\u6c60\u200b</li> <li>\u200b\u901a\u8139\u200b\u7684\u200bDst\u200b\u4f9b\u61c9\u200b</li> <li>\u200b\u9a57\u8b49\u8005\u200b\u5f9e\u200b\u5176\u59d4\u200b\u8a17\u200b\u4eba\u200b\u80a1\u4efd\u200b\u6240\u200b\u7372\u5f97\u200b\u7684\u200b\u6240\u6709\u200b\u734e\u52f5\u200b\u4e2d\u200b\u62bd\u53d6\u200b\u4f63\u91d1\u200b</li> </ul> <p>\u200b\u624b\u7e8c\u200b\u8cbb\u6703\u200b\u532f\u96c6\u200b\u5230\u200b\u5168\u5c40\u200b\u5171\u4eab\u200b\u6c60\u200b\u4ee5\u53ca\u200b\u7279\u5b9a\u200b\u65bc\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u63d0\u6848\u4eba\u200b\u734e\u52f5\u200b\u6c60\u4e2d\u200b\u3002\u200b\u4f7f\u7528\u200b\u7684\u200b\u6a5f\u5236\u200b\u5141\u200b\u8a31\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7368\u7acb\u4e14\u200b\u60f0\u6027\u200b\u5730\u200b\u63d0\u53d6\u200b\u4ed6\u5011\u200b\u7684\u200b\u734e\u52f5\u200b\u3002</p>"},{"location":"distribute/#_3","title":"\u7f3a\u9ede","text":"<p>\u200b\u4f5c\u70ba\u200b\u61f6\u60f0\u200b\u8a08\u7b97\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u90fd\u200b\u6301\u6709\u200b\u4e00\u500b\u200b\u7279\u5b9a\u200b\u65bc\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u7d2f\u7a4d\u200b\u689d\u6b3e\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u4f30\u8a08\u200b\u5168\u5c40\u200b\u624b\u7e8c\u200b\u8cbb\u6c60\u200b\u4e2d\u200b\u6301\u6709\u200b\u7684\u200b\u4ee3\u5e63\u200b\u4e2d\u61c9\u200b\u652f\u4ed8\u200b\u7d66\u4ed6\u200b\u5011\u200b\u7684\u200b\u5927\u81f4\u200b\u516c\u5e73\u200b\u4efd\u984d\u200b\u3002</p> <pre><code>entitlement = delegator-accumulation / all-delegators-accumulation\n</code></pre> <p>\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u90fd\u200b\u6709\u200b\u6301\u7e8c\u200b\u4e14\u200b\u76f8\u7b49\u200b\u7684\u200b\u734e\u52f5\u200b\u4ee3\u5e63\u200b\u6d41\u5165\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u9019\u7a2e\u200b\u5206\u914d\u200b\u6a5f\u5236\u5c07\u200b\u7b49\u540c\u200b\u65bc\u200b\u4e3b\u52d5\u200b\u5206\u914d\u200b\uff08\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u55ae\u7368\u200b\u5206\u914d\u200b\u7d66\u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\uff09\u3002 \u200b\u7136\u800c\u200b\uff0c\u200b\u9019\u662f\u200b\u4e0d\u5207\u200b\u5be6\u969b\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6703\u200b\u6839\u64da\u200b\u734e\u52f5\u200b\u4ee3\u5e63\u200b\u6d41\u5165\u200b\u7684\u200b\u6ce2\u52d5\u200b\u4ee5\u53ca\u200b\u5176\u4ed6\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u734e\u52f5\u200b\u63d0\u53d6\u200b\u7684\u200b\u6642\u6a5f\u200b\uff0c\u200b\u8207\u200b\u4e3b\u52d5\u200b\u5206\u914d\u200b\u7522\u751f\u200b\u504f\u5dee\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u60a8\u200b\u78ba\u5be6\u200b\u77e5\u9053\u200b\u5373\u5c07\u200b\u6709\u200b\u5927\u91cf\u200b\u734e\u52f5\u200b\u6d41\u5165\u200b\uff0c\u200b\u60a8\u200b\u5c07\u6709\u200b\u52d5\u529b\u200b\u7b49\u5f85\u200b\u9019\u4e00\u200b\u4e8b\u4ef6\u200b\u4e4b\u5f8c\u518d\u200b\u9032\u884c\u200b\u63d0\u53d6\u200b\uff0c\u200b\u9019\u5c07\u200b\u589e\u52a0\u200b\u60a8\u200b\u73fe\u6709\u200b\u7d2f\u7a4d\u503c\u200b accum \u200b\u7684\u200b\u50f9\u503c\u200b\u3002\u200b\u6b32\u4e86\u89e3\u200b\u66f4\u591a\u200b\u8a73\u60c5\u200b\uff0c\u200b\u8acb\u200b\u53c3\u95b1\u200b #2764 \u200b\u4e86\u89e3\u200b\u66f4\u591a\u200b\u8a73\u60c5\u200b\u3002</p>"},{"location":"distribute/#_4","title":"\u5c0d\u200b\u62b5\u62bc\u200b\u7684\u200b\u5f71\u97ff","text":"<p>\u200b\u5728\u200bBPoS\uff08\u200b\u6b0a\u76ca\u200b\u8b49\u660e\u200b\uff09\u200b\u4e2d\u200b\uff0c\u200b\u5c0d\u200bDst\u200b\u4f9b\u61c9\u200b\u6536\u53d6\u200b\u4f63\u91d1\u200b\u7684\u200b\u540c\u6642\u200b\uff0c\u200b\u9084\u5141\u8a31\u200b\u81ea\u52d5\u200b\u7d81\u5b9a\u200bDst\u200b\u4f9b\u61c9\u200b\uff08\u200b\u76f4\u63a5\u200b\u5206\u914d\u200b\u7d66\u7d81\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\uff09\uff0c\u200b\u9019\u5728\u200b\u672c\u8cea\u200b\u4e0a\u200b\u662f\u200b\u6709\u200b\u554f\u984c\u200b\u7684\u200b\u3002 \u200b\u9019\u5169\u7a2e\u200b\u6a5f\u5236\u200b\u5728\u200b\u6839\u672c\u200b\u4e0a\u200b\u662f\u200b\u4e92\u65a5\u200b\u7684\u200b\u3002\u200b\u5982\u679c\u200b\u4f63\u91d1\u200b\u548c\u200b\u81ea\u52d5\u200b\u7d81\u5b9a\u200b\u6a5f\u5236\u200b\u540c\u6642\u200b\u61c9\u7528\u200b\u65bc\u200b\u62b5\u62bc\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u90a3\u9ebc\u200b\u4efb\u4f55\u200b\u9a57\u8b49\u8005\u200b\u8207\u200b\u5176\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4e4b\u9593\u200b\u7684\u200b\u62b5\u62bc\u200b\u4ee3\u5e63\u200b\u5206\u914d\u200b\u5c07\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b\u767c\u751f\u200b\u8b8a\u5316\u200b\u3002 \u200b\u9019\u5c31\u200b\u9700\u8981\u200b\u5c0d\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u8a18\u9304\u200b\u9032\u884c\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u8a08\u7b97\u200b\uff0c\u200b\u9019\u5728\u200b\u8a08\u7b97\u200b\u4e0a\u200b\u662f\u200b\u76f8\u7576\u200b\u6602\u8cb4\u200b\u7684\u200b\u3002</p> <p>\u200b\u7e3d\u200b\u4e4b\u200b\uff0c\u200b\u6211\u5011\u200b\u53ea\u80fd\u200b\u9078\u64c7\u200b\u5728\u200bDst\u200b\u4f63\u91d1\u200b\u548c\u200b\u672a\u200b\u7d81\u5b9a\u200b\u7684\u200bDst\u200b\u4f9b\u61c9\u200b\u4e4b\u9593\u200b\uff0c\u200b\u6216\u8005\u200b\u5728\u200b\u7121\u200bDst\u200b\u4f63\u91d1\u200b\u7684\u200b\u7d81\u5b9a\u200bDst\u200b\u4f9b\u61c9\u200b\u4e4b\u9593\u200b\u9032\u884c\u200b\u9078\u64c7\u200b\uff0c\u200b\u6211\u5011\u200b\u9078\u64c7\u200b\u5be6\u65bd\u200b\u524d\u8005\u200b\u3002 \u200b\u5e0c\u671b\u200b\u91cd\u65b0\u200b\u7d81\u5b9a\u200b\u5176\u4f9b\u200b\u61c9\u200b\u7684\u200b\u5229\u76ca\u200b\u76f8\u95dc\u8005\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u8a2d\u7f6e\u200b\u4e00\u500b\u200b\u8173\u672c\u200b\uff0c\u200b\u5b9a\u671f\u200b\u63d0\u53d6\u200b\u4e26\u200b\u91cd\u65b0\u200b\u7d81\u5b9a\u200b\u734e\u52f5\u200b\u3002</p>"},{"location":"distribute/#_5","title":"\u5167\u5bb9","text":""},{"location":"distribute/#_6","title":"\u6982\u5ff5","text":"<p>\u200b\u5728\u200b\u6b0a\u76ca\u200b\u8b49\u660e\u200b\uff08PoS\uff09\u200b\u5340\u584a\u200b\u93c8\u200b\u4e2d\u200b\uff0c\u200b\u5f9e\u200b\u4ea4\u6613\u200b\u624b\u7e8c\u200b\u8cbb\u4e2d\u200b\u7372\u5f97\u200b\u7684\u200b\u734e\u52f5\u5c07\u200b\u652f\u4ed8\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u3002\u200b\u624b\u7e8c\u8cbb\u200b\u5206\u914d\u200b\u6a21\u584a\u200b\u5c07\u734e\u52f5\u200b\u516c\u5e73\u200b\u5730\u200b\u5206\u914d\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u76f8\u61c9\u59d4\u200b\u8a17\u200b\u4eba\u200b\u3002</p> <p>\u200b\u734e\u52f5\u200b\u662f\u200b\u6309\u200b\u5468\u671f\u200b\u8a08\u7b97\u200b\u7684\u200b\u3002\u200b\u6bcf\u7576\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u767c\u751f\u200b\u8b8a\u5316\u6642\u200b\uff0c\u200b\u5468\u671f\u200b\u5c31\u200b\u6703\u200b\u66f4\u65b0\u200b\uff0c\u200b\u4f8b\u5982\u200b\uff0c\u200b\u7576\u9a57\u200b\u8b49\u8005\u200b\u6536\u5230\u200b\u65b0\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u6642\u200b\u3002\u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u8a08\u7b97\u59d4\u200b\u8a17\u200b\u958b\u59cb\u200b\u524d\u200b\u7684\u200b\u6574\u500b\u200b\u5468\u671f\u200b\u7684\u200b\u7e3d\u734e\u52f5\u200b\uff0c\u200b\u518d\u200b\u6e1b\u53bb\u200b\u7576\u524d\u200b\u7684\u200b\u7e3d\u734e\u52f5\u200b\u4f86\u200b\u8a08\u7b97\u200b\u55ae\u500b\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u734e\u52f5\u200b\u3002</p> <p>\u200b\u7576\u9a57\u200b\u8b49\u8005\u200b\u88ab\u200b\u79fb\u9664\u200b\u6216\u9a57\u200b\u8b49\u8005\u200b\u8981\u6c42\u200b\u63d0\u6b3e\u200b\u6642\u200b\uff0c\u200b\u6703\u200b\u652f\u4ed8\u200b\u4f63\u91d1\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u3002 \u200b\u5728\u200b\u6bcf\u500b\u200b <code>BeginBlock</code> \u200b\u64cd\u4f5c\u200b\u4e2d\u200b\uff0c\u200b\u90fd\u200b\u6703\u200b\u8a08\u7b97\u4e26\u200b\u589e\u52a0\u200b\u4f63\u91d1\u200b\uff0c\u200b\u4ee5\u200b\u66f4\u65b0\u200b\u7d2f\u8a08\u200b\u7684\u200b\u624b\u7e8c\u200b\u8cbb\u91d1\u984d\u200b\u3002 \u200b\u7576\u59d4\u200b\u8a17\u200b\u767c\u751f\u200b\u8b8a\u5316\u200b\u6216\u200b\u88ab\u200b\u79fb\u9664\u200b\uff0c\u200b\u6216\u8005\u200b\u8acb\u6c42\u200b\u63d0\u6b3e\u200b\u6642\u200b\uff0c\u200b\u734e\u52f5\u5c07\u200b\u5206\u914d\u200b\u7d66\u59d4\u200b\u8a17\u200b\u4eba\u200b\u3002 \u200b\u5728\u200b\u5206\u914d\u200b\u734e\u52f5\u200b\u4e4b\u524d\u200b\uff0c\u200b\u5c07\u61c9\u7528\u200b\u5728\u7576\u200b\u524d\u59d4\u200b\u8a17\u200b\u671f\u9593\u200b\u5167\u200b\u5c0d\u9a57\u200b\u8b49\u8005\u200b\u6240\u200b\u505a\u200b\u7684\u200b\u6240\u6709\u200b\u61f2\u7f70\u200b\u3002</p>"},{"location":"distribute/#f1","title":"F1 \u200b\u624b\u7eed\u8d39\u200b\u5206\u914d\u200b\u4e2d\u200b\u7684\u200b\u5f15\u7528\u200b\u8ba1\u6570","text":"<p>\u200b\u5728\u200b F1 \u200b\u8cbb\u7528\u200b\u5206\u914d\u200b\u4e2d\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6536\u5230\u200b\u7684\u200b\u734e\u52f5\u200b\u662f\u200b\u5728\u200b\u4ed6\u5011\u200b\u64a4\u56de\u200b\u59d4\u200b\u8a17\u200b\u6642\u8a08\u7b97\u200b\u7684\u200b\u3002\u200b\u9019\u500b\u200b\u8a08\u7b97\u200b\u5fc5\u9808\u200b\u8b80\u53d6\u200b\u734e\u52f5\u200b\u7e3d\u200b\u548c\u200b\u9664\u4ee5\u200b\u4ed6\u5011\u200b\u5728\u200b\u59d4\u200b\u8a17\u200b\u7d50\u675f\u200b\u6642\u200b\u7684\u200b\u4ee3\u5e63\u4efd\u984d\u200b\u6240\u5728\u200b\u6642\u671f\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u70ba\u200b\u64a4\u56de\u200b\u800c\u200b\u5275\u5efa\u200b\u7684\u200b\u6700\u5f8c\u4e00\u500b\u200b\u6642\u671f\u200b\u3002</p> <p>\u200b\u6b64\u5916\u200b\uff0c\u200b\u7531\u200b\u65bc\u200b\u8655\u7f70\u200b\u6703\u200b\u6539\u8b8a\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6240\u200b\u6301\u6709\u200b\u7684\u200b\u4ee3\u5e63\u200b\u6578\u91cf\u200b\uff08\u200b\u4f46\u200b\u6211\u5011\u200b\u63a1\u7528\u200b\u61f6\u60f0\u200b\u8a08\u7b97\u200b\uff0c\u200b\u53ea\u200b\u5728\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u53d6\u6d88\u200b\u59d4\u200b\u8a17\u200b\u6642\u8a08\u7b97\u200b\uff09\uff0c \u200b\u6211\u5011\u200b\u5fc5\u9808\u200b\u5728\u200b\u59d4\u200b\u8a17\u200b\u4eba\u59d4\u200b\u8a17\u200b\u548c\u200b\u64a4\u56de\u200b\u734e\u52f5\u200b\u4e4b\u9593\u200b\u767c\u751f\u200b\u7684\u200b\u4efb\u4f55\u200b\u8655\u7f70\u200b\u4e4b\u524d\u200b/\u200b\u4e4b\u200b\u5f8c\u200b\u7684\u200b\u55ae\u7368\u200b\u6642\u671f\u200b\u5167\u8a08\u7b97\u200b\u734e\u52f5\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u50cf\u59d4\u200b\u8a17\u200b\u4e00\u6a23\u200b\uff0c\u200b\u8655\u7f70\u200b\u4e5f\u200b\u5f15\u7528\u200b\u4e86\u200b\u7531\u200b\u8655\u7f70\u200b\u4e8b\u4ef6\u200b\u7d50\u675f\u200b\u7684\u200b\u6642\u671f\u200b\u3002</p> <p>\u200b\u5c0d\u200b\u65bc\u200b\u6240\u6709\u200b\u4e0d\u518d\u200b\u88ab\u200b\u4efb\u4f55\u200b\u59d4\u200b\u8a17\u200b\u6216\u200b\u4efb\u4f55\u200b\u8655\u7f70\u200b\u5f15\u7528\u200b\u7684\u200b\u5b58\u5132\u200b\u6b77\u53f2\u200b\u734e\u52f5\u200b\u8a18\u9304\u200b\uff0c\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u5b89\u5168\u200b\u5730\u200b\u522a\u9664\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u5011\u200b\u6c38\u9060\u200b\u4e0d\u6703\u200b\u88ab\u200b\u8b80\u53d6\u200b\uff08\u200b\u672a\u4f86\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u548c\u200b\u672a\u4f86\u200b\u7684\u200b\u8655\u7f70\u200b\u5c07\u59cb\u7d42\u200b\u5f15\u7528\u200b\u672a\u4f86\u200b\u7684\u200b\u6642\u671f\u200b\uff09\u3002 \u200b\u9019\u662f\u200b\u901a\u904e\u200b\u8ddf\u8e2a\u200b\u6bcf\u500b\u200b\u6b77\u53f2\u200b\u734e\u52f5\u200b\u5b58\u5132\u689d\u200b\u76ee\u7684\u200b ReferenceCount \u200b\u4f86\u200b\u5be6\u73fe\u200b\u7684\u200b\u3002\u200b\u6bcf\u6b21\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u5f15\u7528\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b\u7684\u200b\u65b0\u200b\u5c0d\u8c61\u200b\uff08\u200b\u59d4\u200b\u8a17\u200b\u6216\u200b\u8655\u7f70\u200b\uff09\u200b\u6642\u200b\uff0c\u200b\u5f15\u7528\u200b\u8a08\u6578\u200b\u5c31\u200b\u6703\u200b\u589e\u52a0\u200b\u3002 \u200b\u6bcf\u6b21\u200b\u522a\u9664\u200b\u4e00\u500b\u200b\u4ee5\u524d\u200b\u9700\u8981\u200b\u5f15\u7528\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b\u7684\u200b\u5c0d\u8c61\u200b\u6642\u200b\uff0c\u200b\u5f15\u7528\u200b\u8a08\u6578\u200b\u5c31\u200b\u6703\u200b\u6e1b\u5c11\u200b\u3002 \u200b\u5982\u679c\u200b\u5f15\u7528\u200b\u8a08\u6578\u200b\u964d\u81f3\u200b\u96f6\u200b\uff0c\u200b\u5247\u522a\u200b\u9664\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b\u3002</p>"},{"location":"distribute/#_7","title":"\u72c0\u614b","text":""},{"location":"distribute/#_8","title":"\u8cbb\u7528\u200b\u6c60","text":"<p>\u200b\u6240\u6709\u200b\u5168\u7403\u200b\u8ffd\u8e2a\u200b\u7684\u200b\u5206\u914d\u200b\u53c3\u6578\u200b\u90fd\u200b\u5b58\u5132\u200b\u5728\u200b FeePool \u200b\u4e2d\u200b\u3002\u200b\u734e\u52f5\u200b\u5f9e\u200b\u6b64\u8655\u200b\u6536\u96c6\u200b\u4e26\u200b\u6dfb\u52a0\u200b\u5230\u200b\u734e\u52f5\u200b\u6c60\u200b\uff0c\u200b\u7136\u200b\u5f8c\u200b\u5206\u914d\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b/\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u3002</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u734e\u52f5\u200b\u6c60\u200b\u6301\u6709\u200b\u5341\u9032\u200b\u5236\u786c\u5e63\u200b <code>DecCoins</code>\uff0c\u200b\u4ee5\u4fbf\u200b\u5f9e\u81a8\u8139\u200b\u7b49\u200b\u64cd\u4f5c\u200b\u4e2d\u200b\u7372\u5f97\u200b\u786c\u5e63\u200b\u7684\u200b\u5c0f\u6578\u200b\u90e8\u5206\u200b\u3002\u200b\u7576\u786c\u5e63\u200b\u5f9e\u6c60\u200b\u4e2d\u200b\u5206\u914d\u200b\u6642\u200b\uff0c\u200b\u5b83\u5011\u200b\u5c07\u88ab\u200b\u622a\u65b7\u200b\u56de\u975e\u200b\u5341\u9032\u5236\u200b\u7684\u200b <code>sdk.Coins</code>\u3002</p> <ul> <li>FeePool: <code>0x00 -&gt; ProtocolBuffer(FeePool)</code></li> </ul> <pre><code>// coins with decimal\ntype DecCoins []DecCoin\n\ntype DecCoin struct {\n    Amount sdk.Dec\n    Denom  string\n}\n</code></pre> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/distribution/v1beta1/distribution.proto#L94-L101</p>"},{"location":"distribute/#_9","title":"\u9a57\u8b49\u200b\u4eba\u200b\u5206\u914d","text":"<p>\u200b\u76f8\u95dc\u9a57\u200b\u8b49\u4eba\u200b\u7684\u200b\u9a57\u8b49\u200b\u4eba\u200b\u5206\u914d\u200b\u4fe1\u606f\u200b\u6bcf\u6b21\u200b\u90fd\u200b\u6703\u200b\u66f4\u65b0\u200b\uff1a</p> <ol> <li>\u200b\u5411\u9a57\u200b\u8b49\u4eba\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u91d1\u984d\u200b\u66f4\u65b0\u200b\uff0c</li> <li>\u200b\u9a57\u8b49\u200b\u4eba\u200b\u6210\u529f\u200b\u63d0\u4ea4\u200b\u5340\u584a\u200b\u4e26\u7372\u200b\u5f97\u200b\u734e\u52f5\u200b\uff0c</li> <li>\u200b\u4efb\u4f55\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5f9e\u9a57\u200b\u8b49\u4eba\u200b\u4e2d\u200b\u64a4\u56de\u200b\u59d4\u200b\u8a17\u200b</li> <li> <p>\u200b\u9a57\u8b49\u200b\u4eba\u200b\u64a4\u56de\u200b\u5176\u200b\u4f63\u91d1\u200b\u3002</p> </li> <li> <p>ValidatorDistInfo: <code>0x02 | ValOperatorAddrLen (1 byte) | ValOperatorAddr -&gt; ProtocolBuffer(validatorDistribution)</code></p> </li> </ol> <pre><code>type ValidatorDistInfo struct {\n    OperatorAddress     sdk.AccAddress\n    SelfBondRewards     sdk.DecCoins\n    ValidatorCommission types.ValidatorAccumulatedCommission\n}\n</code></pre>"},{"location":"distribute/#_10","title":"\u59d4\u200b\u8a17\u200b\u5206\u914d","text":"<p>\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u5206\u914d\u200b\u53ea\u200b\u9700\u8981\u200b\u8a18\u9304\u200b\u5b83\u200b\u6700\u200b\u5f8c\u200b\u4e00\u6b21\u200b\u63d0\u53d6\u200b\u8cbb\u7528\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u3002 \u200b\u56e0\u70ba\u200b\u6bcf\u6b21\u200b\u59d4\u200b\u8a17\u200b\u7684\u200b\u5c6c\u6027\u200b\u66f4\u6539\u200b\uff08\u200b\u5982\u7d81\u200b\u5b9a\u4ee3\u5e63\u200b\u7b49\u200b\uff09\u200b\u6642\u200b\u90fd\u200b\u5fc5\u9808\u200b\u63d0\u53d6\u200b\u8cbb\u7528\u200b\uff0c \u200b\u6240\u4ee5\u200b\u5b83\u200b\u7684\u200b\u5c6c\u6027\u5c07\u200b\u4fdd\u6301\u200b\u4e0d\u8b8a\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u7d2f\u7a4d\u200b\u56e0\u5b50\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u88ab\u200b\u52d5\u5730\u200b\u8a08\u7b97\u200b\uff0c\u200b\u53ea\u200b\u9700\u200b\u77e5\u9053\u200b\u6700\u200b\u5f8c\u200b\u4e00\u6b21\u200b\u63d0\u6b3e\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u548c\u200b\u7576\u524d\u200b\u7684\u200b\u5c6c\u6027\u200b\u3002</p> <ul> <li>DelegationDistInfo: <code>0x02 | DelegatorAddrLen (1 byte) | DelegatorAddr | ValOperatorAddrLen (1 byte) | ValOperatorAddr -&gt; ProtocolBuffer(delegatorDist)</code></li> </ul> <pre><code>type DelegationDistInfo struct {\n    WithdrawalHeight int64    // last time this delegation withdrew rewards\n}\n</code></pre>"},{"location":"distribute/#_11","title":"\u958b\u59cb\u200b\u5340\u584a","text":"<p>\u200b\u5728\u200b\u6bcf\u500b\u200bBeginBlock\u200b\u4e2d\u200b\uff0c\u200b\u4e0a\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b\u6536\u5230\u200b\u7684\u200b\u6240\u6709\u200b\u8cbb\u7528\u200b\u90fd\u200b\u8f49\u79fb\u200b\u5230\u200b\u5206\u914d\u200b\u7684\u200bModuleAccount\u200b\u5e33\u6236\u200b\u3002 \u200b\u7576\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6216\u9a57\u200b\u8b49\u4eba\u200b\u64a4\u56de\u200b\u4ed6\u5011\u200b\u7684\u200b\u734e\u52f5\u200b\u6642\u200b\uff0c\u200b\u5b83\u5011\u200b\u6703\u200b\u5f9e\u200bModuleAccount\u200b\u4e2d\u200b\u6263\u9664\u200b\u3002 \u200b\u5728\u200b\u958b\u59cb\u200b\u5340\u584a\u200b\u671f\u9593\u200b\uff0c\u200b\u5c0d\u200b\u6536\u96c6\u200b\u7684\u200b\u8cbb\u7528\u200b\u7684\u200b\u4e0d\u540c\u200b\u7d22\u8ce0\u200b\u9032\u884c\u200b\u4ee5\u4e0b\u200b\u66f4\u65b0\u200b\uff1a</p> <ul> <li>\u200b\u4e0a\u200b\u4e00\u500b\u200b\u9ad8\u5ea6\u200b\u7684\u200b\u5340\u584a\u200b\u63d0\u8b70\u8005\u200b\u53ca\u5176\u200b\u59d4\u200b\u8a17\u200b\u4eba\u6703\u200b\u6536\u5230\u200b1\uff05\u200b\u81f3\u200b5\uff05\u200b\u7684\u200b\u8cbb\u7528\u200b\u734e\u52f5\u200b\u3002</li> <li>\u200b\u793e\u5340\u200b\u5132\u5099\u200b\u7a05\u6703\u200b\u88ab\u200b\u6536\u53d6\u200b\u3002</li> <li>\u200b\u5176\u9918\u200b\u90e8\u5206\u200b\u6309\u200b\u6295\u7968\u200b\u6b0a\u200b\u6bd4\u4f8b\u200b\u5206\u914d\u200b\u7d66\u200b\u6240\u6709\u200b\u5df2\u200b\u62b5\u62bc\u200b\u7684\u200b\u9a57\u8b49\u200b\u4eba\u200b\u3002</li> </ul> <p>\u200b\u70ba\u200b\u4e86\u200b\u6fc0\u52f5\u9a57\u200b\u8b49\u4eba\u200b\u7b49\u5f85\u200b\u4e26\u5728\u5340\u200b\u584a\u200b\u4e2d\u200b\u5305\u542b\u200b\u984d\u5916\u200b\u7684\u200b\u9810\u200b\u63d0\u4ea4\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5340\u584a\u200b\u63d0\u8b70\u200b\u4eba\u200b\u7684\u200b\u734e\u52f5\u200b\u662f\u200b\u5f9e\u200bTendermint\u200b\u9810\u200b\u63d0\u4ea4\u200b\u4fe1\u606f\u200b\u4e2d\u8a08\u7b97\u200b\u51fa\u4f86\u200b\u7684\u200b\u3002</p>"},{"location":"distribute/#_12","title":"\u5206\u914d\u200b\u65b9\u6848","text":"<p>\u200b\u5047\u8a2d\u200b <code>fees</code> \u200b\u662f\u200b\u5728\u200b\u4e0a\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b\u6536\u96c6\u200b\u7684\u200b\u7e3d\u8cbb\u7528\u200b\uff0c\u200b\u5305\u62ec\u200b\u7528\u200b\u65bc\u200b\u62b5\u62bc\u200b\u734e\u52f5\u200b\u7684\u200b\u901a\u81a8\u6027\u200b\u734e\u52f5\u200b\u3002 \u200b\u6240\u6709\u200b\u8cbb\u7528\u200b\u90fd\u200b\u5728\u200b\u5340\u584a\u200b\u671f\u9593\u200b\u6536\u96c6\u200b\u5230\u200b\u7279\u5b9a\u200b\u7684\u200b\u6a21\u7d44\u200b\u5e33\u6236\u200b\u4e2d\u200b\u3002\u200b\u5728\u200b <code>BeginBlock</code> \u200b\u968e\u6bb5\u200b\uff0c\u200b\u5b83\u5011\u200b\u5c07\u88ab\u200b\u767c\u200b\u9001\u5230\u200b <code>distribution</code> \u200b\u4e2d\u200b\u3002 \u200b\u4e0d\u6703\u200b\u767c\u751f\u200b\u5176\u4ed6\u200b\u4ee3\u5e63\u200b\u7684\u200b\u767c\u9001\u200b\u3002\u200b\u76f8\u53cd\u200b\uff0c\u200b\u6bcf\u500b\u200b\u5e33\u6236\u200b\u6709\u6b0a\u200b\u7372\u5f97\u200b\u7684\u200b\u734e\u52f5\u5c07\u200b\u88ab\u200b\u5b58\u5132\u4e0b\u200b\u4f86\u200b\uff0c\u200b\u4e26\u4e14\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b FundCommunityPool\u3001WithdrawValidatorCommission \u200b\u548c\u200b WithdrawDelegatorReward \u200b\u6d88\u606f\u200b\u89f8\u767c\u200b\u63d0\u6b3e\u200b\u3002</p>"},{"location":"distribute/#_13","title":"\u793e\u5340\u200b\u5132\u5099\u200b\u734e\u52f5","text":"<p>\u200b\u793e\u5340\u200b\u5132\u5099\u200b\u6c60\u5c07\u200b\u7372\u5f97\u200b community_tax * fees\uff0c\u200b\u4ee5\u53ca\u200b\u5728\u9a57\u200b\u8b49\u4eba\u200b\u7372\u5f97\u200b\u7e3d\u734e\u52f5\u200b\u5f8c\u200b\u5269\u9918\u200b\u7684\u200b\u96f6\u982d\u200b\uff0c\u200b\u9019\u4e9b\u200b\u96f6\u982d\u200b\u7e3d\u662f\u200b\u5411\u4e0b\u200b\u820d\u5165\u200b\u5230\u200b\u6700\u200b\u63a5\u8fd1\u200b\u7684\u200b\u6574\u6578\u503c\u200b\u3002</p>"},{"location":"distribute/#_14","title":"\u9a57\u8b49\u200b\u4eba\u200b\u734e\u52f5","text":"<p>\u200b\u63d0\u6848\u4eba\u200b\u5c07\u7372\u200b\u5f97\u200b\u57fa\u790e\u200b\u734e\u52f5\u200b fees * baseproposerreward \u200b\u548c\u200b\u734e\u52f5\u200b\u91d1\u200b fees * bonusproposerreward * P\uff0c\u200b\u5176\u4e2d\u200b P =\uff08\u200b\u5305\u62ec\u200b\u9810\u200b\u63d0\u4ea4\u200b\u7684\u200b\u9a57\u8b49\u200b\u4eba\u200b\u7e3d\u6b0a\u76ca\u200b / \u200b\u7e3d\u9a57\u200b\u8b49\u4eba\u200b\u6b0a\u76ca\u200b\uff09\u3002 \u200b\u63d0\u6848\u4eba\u200b\u5305\u542b\u200b\u7684\u200b\u9810\u200b\u63d0\u4ea4\u200b\u8d8a\u200b\u591a\u200b\uff0cP \u200b\u5c31\u200b\u8d8a\u200b\u5927\u200b\u3002 P \u200b\u6c38\u9060\u200b\u4e0d\u6703\u200b\u5927\u200b\u65bc\u200b 1.00\uff08\u200b\u56e0\u70ba\u200b\u53ea\u6709\u200b\u7d81\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u200b\u4eba\u624d\u200b\u80fd\u200b\u63d0\u4f9b\u200b\u6709\u6548\u200b\u7684\u200b\u9810\u200b\u63d0\u4ea4\u200b\uff09\uff0c\u200b\u4e26\u4e14\u200b\u59cb\u7d42\u200b\u5927\u200b\u65bc\u200b 2/3\u3002</p> <p>\u200b\u5269\u9918\u200b\u7684\u200b\u8cbb\u7528\u5c07\u200b\u6309\u7167\u200b\u9a57\u8b49\u200b\u4eba\u200b\u7684\u200b\u5171\u8b58\u200b\u6b0a\u91cd\u200b\u6bd4\u4f8b\u200b\u5206\u914d\u200b\u7d66\u200b\u6240\u6709\u200b\u7d81\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u200b\u4eba\u200b\uff0c\u200b\u5305\u62ec\u200b\u63d0\u6848\u4eba\u200b\u3002</p> <pre><code>powFrac = validator power / total bonded validator power\nproposerMul = baseproposerreward + bonusproposerreward * P\nvoteMul = 1 - communitytax - proposerMul\n</code></pre> <p>\u200b\u7e3d\u9ad4\u200b\u800c\u8a00\u200b\uff0c\u200b\u63d0\u6848\u4eba\u200b\u5c07\u7372\u200b\u5f97\u200b fees * (voteMul * powFrac + proposerMul) \u200b\u7684\u200b\u734e\u52f5\u200b\u3002 \u200b\u6240\u6709\u200b\u5176\u4ed6\u200b\u9a57\u8b49\u200b\u4eba\u5c07\u200b\u7372\u5f97\u200b fees * voteMul * powFrac \u200b\u7684\u200b\u734e\u52f5\u200b\u3002</p>"},{"location":"distribute/#_15","title":"\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u734e\u52f5","text":"<p>\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u4eba\u200b\u7684\u200b\u734e\u52f5\u5c07\u200b\u5206\u914d\u200b\u7d66\u5176\u59d4\u200b\u8a17\u200b\u4eba\u200b\u3002\u200b\u9a57\u8b49\u200b\u4eba\u200b\u9084\u6709\u200b\u4e00\u500b\u200b\u81ea\u6211\u200b\u59d4\u200b\u8a17\u200b\uff0c\u200b\u5176\u200b\u5728\u200b\u5206\u914d\u200b\u8a08\u7b97\u200b\u4e2d\u200b\u88ab\u200b\u8996\u70ba\u200b\u5e38\u898f\u59d4\u200b\u8a17\u200b\u3002</p> <p>\u200b\u9a57\u8b49\u200b\u4eba\u200b\u8a2d\u7f6e\u200b\u4f63\u91d1\u200b\u7387\u200b\u3002\u200b\u4f63\u91d1\u200b\u7387\u200b\u662f\u200b\u9748\u6d3b\u200b\u7684\u200b\uff0c\u200b\u4f46\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u4eba\u200b\u90fd\u200b\u8a2d\u7f6e\u200b\u4e86\u200b\u4e00\u500b\u200b\u6700\u9ad8\u200b\u8cbb\u7387\u200b\u548c\u200b\u6700\u9ad8\u200b\u6bcf\u65e5\u200b\u589e\u9577\u200b\u7387\u200b\u3002\u200b\u9019\u4e9b\u200b\u6700\u9ad8\u503c\u200b\u4e0d\u80fd\u200b\u8d85\u904e\u200b\uff0c\u200b\u4ee5\u200b\u4fdd\u8b77\u59d4\u200b\u8a17\u200b\u4eba\u200b\u514d\u53d7\u200b\u9a57\u8b49\u200b\u4eba\u200b\u4f63\u91d1\u200b\u7387\u200b\u7684\u200b\u7a81\u7136\u200b\u589e\u52a0\u200b\uff0c\u200b\u4ee5\u200b\u9632\u6b62\u200b\u9a57\u8b49\u200b\u4eba\u200b\u7372\u53d6\u200b\u6240\u6709\u200b\u734e\u52f5\u200b\u3002</p> <p>\u200b\u64cd\u4f5c\u8005\u200b\u6709\u200b\u8cc7\u683c\u200b\u7372\u5f97\u200b\u7684\u200b\u672a\u200b\u7d50\u7b97\u200b\u734e\u52f5\u200b\u5b58\u5132\u200b\u5728\u200b<code>ValidatorAccumulatedCommission</code>\u200b\u4e2d\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6709\u200b\u8cc7\u683c\u200b\u7372\u5f97\u200b\u7684\u200b\u734e\u52f5\u200b\u5b58\u5132\u200b\u5728\u200b<code>ValidatorCurrentRewards</code>\u200b\u4e2d\u200b\u3002 F1\u200b\u8cbb\u7528\u200b\u5206\u914d\u200b\u65b9\u6848\u200b\u7528\u200b\u65bc\u200b\u8a08\u7b97\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u734e\u52f5\u200b\uff0c\u200b\u56e0\u70ba\u200b\u4ed6\u5011\u200b\u64a4\u56de\u200b\u6216\u200b\u66f4\u65b0\u200b\u5176\u59d4\u200b\u8a17\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e0d\u200b\u5728\u200b<code>BeginBlock</code>\u200b\u4e2d\u8655\u7406\u200b\u3002</p>"},{"location":"distribute/#_16","title":"\u5206\u914d\u200b\u793a\u4f8b","text":"<p>\u200b\u5c0d\u200b\u65bc\u200b\u9019\u500b\u200b\u793a\u4f8b\u200b\u5206\u914d\u200b\uff0c\u200b\u5e95\u5c64\u200b\u5171\u8b58\u200b\u5f15\u64ce\u200b\u6839\u64da\u200b\u53c3\u200b\u8207\u200b\u62b5\u62bc\u200b\u7684\u200b\u7e3d\u7b97\u529b\u200b\uff0c\u200b\u6309\u200b\u6bd4\u4f8b\u200b\u9078\u64c7\u200b\u5340\u584a\u200b\u63d0\u8b70\u8005\u200b\u3002</p> <p>\u200b\u6240\u6709\u200b\u9a57\u8b49\u200b\u4eba\u200b\u5728\u200b\u5305\u542b\u200b\u9810\u200b\u63d0\u4ea4\u200b(pre-commit)\u200b\u5230\u200b\u5176\u200b\u5efa\u8b70\u200b\u7684\u200b\u5340\u584a\u200b\u65b9\u9762\u200b\u8868\u73fe\u200b\u76f8\u540c\u200b\u3002 \u200b\u7136\u200b\u5f8c\u200b\u4fdd\u6301\u200b(\u200b\u5305\u542b\u200b\u9810\u200b\u63d0\u4ea4\u200b\u7684\u200b\u6578\u91cf\u200b) / (\u200b\u7e3d\u200b\u62b5\u62bc\u200b\u9a57\u8b49\u200b\u4eba\u7b97\u529b\u200b)\u200b\u7684\u200b\u5e38\u6578\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u9a57\u8b49\u200b\u4eba\u200b\u7684\u200b\u6524\u200b\u92b7\u5340\u200b\u584a\u200b\u734e\u52f5\u200b\u70ba\u200b(\u200b\u9a57\u8b49\u200b\u4eba\u7b97\u529b\u200b / \u200b\u7e3d\u200b\u62b5\u62bc\u200b\u7b97\u529b\u200b) * (1-\u200b\u793e\u5340\u200b\u7a05\u7387\u200b)\u200b\u7684\u200b\u7e3d\u734e\u52f5\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u55ae\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u734e\u52f5\u200b\u70ba\u200b:</p> <pre><code>(delegator proportion of the validator power / validator power) * (validator power / total bonded power)\n  * (1 - community tax rate) * (1 - validator commision rate)\n= (delegator proportion of the validator power / total bonded power) * (1 -\ncommunity tax rate) * (1 - validat\n\n\n# Messages\n\n## MsgSetWithdrawAddress\n\nBy default, the withdraw address is the delegator address. To change its withdraw address, a delegator must send a `MsgSetWithdrawAddress` message.\nChanging the withdraw address is possible only if the parameter `WithdrawAddrEnabled` is set to `true`.\n\nThe withdraw address cannot be any of the module accounts. These accounts are blocked from being withdraw addresses by being added to the distribution keeper's `blockedAddrs` array at initialization.\n\nResponse:\n\n+++ https://github.com/cosmos/cosmos-sdk/blob/v0.42.4/proto/cosmos/distribution/v1beta1/tx.proto#L29-L37\n\n```go\nfunc (k Keeper) SetWithdrawAddr(ctx sdk.Context, delegatorAddr sdk.AccAddress, withdrawAddr sdk.AccAddress) error\n    if k.blockedAddrs[withdrawAddr.String()] {\n        fail with \"`{withdrawAddr}` is not allowed to receive external funds\"\n    }\n\n    if !k.GetWithdrawAddrEnabled(ctx) {\n        fail with `ErrSetWithdrawAddrDisabled`\n    }\n\n    k.SetDelegatorWithdrawAddr(ctx, delegatorAddr, withdrawAddr)\n</code></pre>"},{"location":"distribute/#msgwithdrawdelegatorreward","title":"MsgWithdrawDelegatorReward","text":"<p>\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u53ef\u4ee5\u200b\u63d0\u53d6\u200b\u5176\u734e\u52f5\u200b\u3002 \u200b\u5728\u200b\u5206\u914d\u200b\u6a21\u7d44\u200b\u5167\u90e8\u200b\uff0c\u200b\u6b64\u200b\u4ea4\u6613\u200b\u540c\u6642\u200b\u522a\u200b\u9664\u4e86\u200b\u5148\u524d\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u53ca\u5176\u200b\u76f8\u95dc\u200b\u734e\u52f5\u200b\uff0c\u200b\u5c31\u200b\u597d\u50cf\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u53ea\u662f\u200b\u958b\u59cb\u200b\u4e86\u200b\u76f8\u540c\u200b\u50f9\u503c\u200b\u7684\u200b\u65b0\u59d4\u200b\u8a17\u200b\u4e00\u6a23\u200b\u3002 \u200b\u734e\u52f5\u200b\u7acb\u5373\u200b\u5f9e\u200b\u5206\u914d\u200b\u300cModuleAccount\u300d\u200b\u767c\u200b\u9001\u5230\u200b\u63d0\u53d6\u200b\u5730\u5740\u200b\u3002 \u200b\u4efb\u4f55\u200b\u5269\u9918\u200b\u7684\u200b\u90e8\u5206\u200b\uff08\u200b\u622a\u65b7\u200b\u5c0f\u6578\u200b\uff09\u200b\u90fd\u200b\u6703\u767c\u200b\u9001\u5230\u200b\u793e\u5340\u6c60\u200b\u3002 \u200b\u59d4\u200b\u8a17\u200b\u958b\u59cb\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u7576\u524d\u200b\u7684\u200b\u9a57\u8b49\u200b\u4eba\u200b\u9031\u671f\u200b\uff0c\u200b\u4e26\u5c07\u200b\u4e0a\u200b\u4e00\u500b\u200b\u9031\u671f\u200b\u7684\u200b\u5f15\u7528\u200b\u8a08\u6578\u200b\u6e1b\u5c11\u200b\u3002 \u200b\u63d0\u53d6\u200b\u7684\u200b\u91d1\u984d\u200b\u5f9e\u9a57\u200b\u8b49\u4eba\u200b\u7684\u200b\u300cValidatorOutstandingRewards\u300d\u200b\u8b8a\u91cf\u200b\u4e2d\u200b\u6263\u9664\u200b\u3002</p> <p>In the F1 distribution, the total rewards are calculated per validator period, and a delegator receives a piece of those rewards in proportion to their stake in the validator. In basic F1, the total rewards that all the delegators are entitled to between to periods is calculated the following way. Let <code>R(X)</code> be the total accumulated rewards up to period <code>X</code> divided by the tokens staked at that time. The delegator allocation is <code>R(X) * delegator_stake</code>. Then the rewards for all the delegators for staking between periods <code>A</code> and <code>B</code> are <code>(R(B) - R(A)) * total stake</code>. However, these calculated rewards don't account for slashing.</p> <p>\u200b\u5728\u200bF1\u200b\u5206\u914d\u200b\u4e2d\u200b\uff0c\u200b\u7e3d\u734e\u52f5\u200b\u662f\u200b\u6839\u64da\u9a57\u200b\u8b49\u4eba\u200b\u9031\u671f\u200b\u9032\u884c\u200b\u8a08\u7b97\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6309\u200b\u5176\u200b\u5728\u200b\u9a57\u8b49\u200b\u4eba\u200b\u4e2d\u200b\u7684\u200b\u6301\u80a1\u200b\u6bd4\u4f8b\u200b\u7372\u5f97\u200b\u5176\u4e2d\u200b\u4e00\u90e8\u5206\u200b\u734e\u52f5\u200b\u3002 \u200b\u5728\u200b\u57fa\u672c\u200b\u7684\u200bF1\u200b\u5206\u914d\u200b\u4e2d\u200b\uff0c\u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5728\u200b\u5169\u500b\u200b\u9031\u671f\u200b\u4e4b\u9593\u200b\u6709\u6b0a\u200b\u7372\u5f97\u200b\u7684\u200b\u7e3d\u734e\u52f5\u200b\u8a08\u7b97\u200b\u5982\u4e0b\u200b: \u200b\u8b93\u200b<code>R(X)</code>\u200b\u8868\u793a\u200b\u5230\u671f\u200b\u9593\u200bX\u200b\u70ba\u6b62\u200b\u7d2f\u7a4d\u200b\u7684\u200b\u7e3d\u734e\u52f5\u200b\uff0c\u200b\u4e26\u200b\u9664\u4ee5\u200b\u7576\u6642\u200b\u62b5\u62bc\u200b\u7684\u200b\u4ee3\u5e63\u200b\u6578\u91cf\u200b\u3002\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u5206\u914d\u200b\u70ba\u200b<code>R(X) * \u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u62b5\u62bc\u200b\u91cf\u200b</code>\u3002 \u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u5728\u200b\u671f\u9593\u200bA\u200b\u548c\u200bB\u200b\u4e4b\u9593\u200b\u62b5\u62bc\u200b\u7684\u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u734e\u52f5\u200b\u70ba\u200b<code>(R(B) - R(A)) * \u200b\u7e3d\u200b\u62b5\u62bc\u200b\u6578\u91cf\u200b</code>\u3002 \u200b\u4f46\u662f\u200b\uff0c\u200b\u9019\u4e9b\u200b\u8a08\u7b97\u200b\u51fa\u4f86\u200b\u7684\u200b\u734e\u52f5\u200b\u4e26\u672a\u200b\u8003\u616e\u200b\u6e1b\u7522\u200b\u3002</p> <p>\u200b\u8003\u616e\u200b\u5230\u200b\u6e1b\u7522\u200b\u9700\u8981\u200b\u8fed\u4ee3\u200b\u8a08\u7b97\u200b\u3002 \u200b\u8b93\u200b <code>F(X)</code> \u200b\u8868\u793a\u200b\u5728\u200b\u671f\u9593\u200b <code>X</code> \u200b\u767c\u751f\u200b\u7684\u200b\u61f2\u7f70\u200b\u4e8b\u4ef6\u200b\u4e2d\u8981\u200b\u6e1b\u5c11\u200b\u7684\u200b\u9a57\u8b49\u200b\u4eba\u200b\u7684\u200b\u6bd4\u4f8b\u200b\u3002 \u200b\u5982\u679c\u200b\u9a57\u8b49\u200b\u4eba\u200b\u5728\u200b\u671f\u9593\u200b <code>P1, ..., PN</code> \u200b\u88ab\u200b\u524a\u6e1b\u200b\uff0c\u200b\u5176\u4e2d\u200b <code>A &lt; P1</code>\uff0c<code>PN &lt; B</code>\uff0c\u200b\u5247\u200b\u5206\u914d\u200b\u6a21\u584a\u5c07\u200b\u6309\u200b\u4ee5\u4e0b\u200b\u65b9\u5f0f\u200b\u8a08\u7b97\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u734e\u52f5\u200b <code>T(A, B)</code>\uff1a\u00b7</p> <pre><code>stake := initial stake\nrewards := 0\nprevious := A\nfor P in P1, ..., PN`:\n    rewards = (R(P) - previous) * stake\n    stake = stake * F(P)\n    previous = P\nrewards = rewards + (R(B) - R(PN)) * stake\n</code></pre> <p>\u200b\u6b77\u53f2\u200b\u734e\u52f5\u200b\u662f\u200b\u901a\u904e\u200b\u56de\u653e\u200b\u6240\u6709\u200b\u7684\u200b\u524a\u6e1b\u200b\u4e8b\u4ef6\u200b\uff0c\u200b\u4e26\u5728\u200b\u6bcf\u500b\u200b\u6b65\u9a5f\u200b\u4e2d\u200b\u6e1b\u5c11\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u6301\u80a1\u200b\u91cf\u4f86\u200b\u9032\u884c\u200b\u8ffd\u6eaf\u200b\u8a08\u7b97\u200b\u7684\u200b\u3002 \u200b\u6700\u7d42\u200b\u8a08\u7b97\u51fa\u200b\u7684\u200b\u62b5\u62bc\u200b\u91cf\u200b\u8207\u200b\u5be6\u969b\u59d4\u200b\u8a17\u200b\u4e2d\u200b\u62b5\u62bc\u200b\u7684\u200b\u4ee3\u5e63\u200b\u76f8\u7576\u200b\uff0c\u200b\u4f46\u200b\u7531\u200b\u65bc\u200b\u6368\u200b\u5165\u8aa4\u200b\u5dee\u200b\u53ef\u80fd\u200b\u5b58\u5728\u200b\u4e00\u5b9a\u200b\u7684\u200b\u8aa4\u5dee\u200b\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.42.4/proto/cosmos/distribution/v1beta1/tx.proto#L42-L50</p>"},{"location":"distribute/#withdrawvalidatorcommission","title":"WithdrawValidatorCommission","text":"<p>\u200b\u9a57\u8b49\u200b\u4eba\u200b\u53ef\u4ee5\u200b\u767c\u9001\u200b\u300cWithdrawValidatorCommission\u300d\u200b\u8a0a\u606f\u4f86\u200b\u63d0\u53d6\u200b\u5176\u7d2f\u7a4d\u200b\u4f63\u91d1\u200b\u3002 \u200b\u4f63\u91d1\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u300cBeginBlock\u300d\u200b\u671f\u9593\u200b\u8a08\u7b97\u200b\uff0c\u200b\u56e0\u6b64\u200b\u7121\u9700\u200b\u8fed\u4ee3\u200b\u5373\u53ef\u200b\u63d0\u53d6\u200b\u3002 \u200b\u63d0\u53d6\u200b\u7684\u200b\u91d1\u984d\u200b\u5f9e\u9a57\u200b\u8b49\u4eba\u200b\u7684\u200b\u300cValidatorOutstandingRewards\u300d\u200b\u8b8a\u6578\u200b\u4e2d\u200b\u6263\u9664\u200b\u3002 \u200b\u53ea\u80fd\u200b\u767c\u9001\u200b\u6574\u6578\u200b\u91d1\u984d\u200b\u3002\u200b\u5982\u679c\u200b\u7d2f\u7a4d\u200b\u734e\u52f5\u200b\u6709\u200b\u5c0f\u6578\u200b\uff0c\u200b\u5247\u5728\u200b\u767c\u9001\u200b\u63d0\u6b3e\u200b\u4e4b\u524d\u200b\u5c07\u5176\u200b\u622a\u65b7\u200b\uff0c\u200b\u5269\u9918\u200b\u90e8\u5206\u200b\u7559\u5f85\u200b\u4ee5\u200b\u5f8c\u200b\u63d0\u53d6\u200b\u3002</p>"},{"location":"distribute/#fundcommunitypool","title":"\u8cc7\u52a9\u200b\u793e\u5340\u200b\u57fa\u91d1\u200b\u6c60\u200b\uff08FundCommunityPool\uff09","text":"<p>\u200b\u9019\u500b\u200b\u6d88\u606f\u200b\u76f4\u63a5\u200b\u5c07\u4ee3\u5e63\u200b\u5f9e\u200b\u767c\u9001\u8005\u200b\u767c\u200b\u9001\u5230\u200b\u793e\u5340\u6c60\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u7121\u6cd5\u200b\u5c07\u91d1\u984d\u200b\u5f9e\u200b\u767c\u9001\u8005\u200b\u8f49\u79fb\u200b\u5230\u200b\u5206\u914d\u200b\u6a21\u584a\u200b\u5e33\u6236\u200b\uff0c\u200b\u5247\u200b\u4ea4\u6613\u200b\u5c07\u5931\u6557\u200b\u3002</p> <pre><code>func (k Keeper) FundCommunityPool(ctx sdk.Context, amount sdk.Coins, sender sdk.AccAddress) error {\n    if err := k.bankKeeper.SendCoinsFromAccountToModule(ctx, sender, types.ModuleName, amount); err != nil {\n        return err\n    }\n\n    feePool := k.GetFeePool(ctx)\n    feePool.CommunityPool = feePool.CommunityPool.Add(sdk.NewDecCoinsFromCoins(amount...)...)\n    k.SetFeePool(ctx, feePool)\n\n    return nil\n}\n</code></pre>"},{"location":"distribute/#_17","title":"\u5e38\u898b\u200b\u7684\u200b\u5206\u914d\u200b\u64cd\u4f5c\u200b\uff1a","text":"<p>\u200b\u9019\u4e9b\u200b\u64cd\u4f5c\u200b\u5728\u200b\u8a31\u591a\u200b\u4e0d\u540c\u200b\u7684\u200b\u8a0a\u606f\u200b\u4e2d\u200b\u9032\u884c\u200b\u3002</p>"},{"location":"distribute/#_18","title":"\u521d\u59cb\u5316\u200b\u59d4\u200b\u8a17\u200b\u3002","text":"<p>\u200b\u6bcf\u6b21\u200b\u66f4\u6539\u200b\u59d4\u200b\u8a17\u200b\u6642\u200b\uff0c\u200b\u90fd\u200b\u6703\u200b\u63d0\u53d6\u200b\u734e\u52f5\u4e26\u200b\u91cd\u65b0\u200b\u521d\u59cb\u5316\u200b\u59d4\u200b\u8a17\u200b\u3002 \u200b\u521d\u59cb\u5316\u200b\u59d4\u200b\u8a17\u200b\u6703\u200b\u589e\u52a0\u200b\u9a57\u8b49\u200b\u4eba\u200b\u7684\u200b\u9031\u671f\u200b\uff0c\u200b\u4e26\u200b\u8ddf\u8e2a\u200b\u59d4\u200b\u8a17\u200b\u7684\u200b\u8d77\u59cb\u200b\u9031\u671f\u200b\u3002</p> <pre><code>// initialize starting info for a new delegation\nfunc (k Keeper) initializeDelegation(ctx sdk.Context, val sdk.ValAddress, del sdk.AccAddress) {\n    // period has already been incremented - we want to store the period ended by this delegation action\n    previousPeriod := k.GetValidatorCurrentRewards(ctx, val).Period - 1\n\n    // increment reference count for the period we're going to track\n    k.incrementReferenceCount(ctx, val, previousPeriod)\n\n    validator := k.stakingKeeper.Validator(ctx, val)\n    delegation := k.stakingKeeper.Delegation(ctx, del, val)\n\n    // calculate delegation stake in tokens\n    // we don't store directly, so multiply delegation shares * (tokens per share)\n    // note: necessary to truncate so we don't allow withdrawing more rewards than owed\n    stake := validator.TokensFromSharesTruncated(delegation.GetShares())\n    k.SetDelegatorStartingInfo(ctx, val, del, types.NewDelegatorStartingInfo(previousPeriod, stake, uint64(ctx.BlockHeight())))\n}\n</code></pre>"},{"location":"distribute/#hooks","title":"Hooks","text":"<p>\u200b\u672c\u6a21\u584a\u200b\u53ef\u4ee5\u200b\u8abf\u7528\u200b\u548c\u200b\u8abf\u7528\u200b\u53ef\u7528\u200b\u7684\u200b\u9264\u5b50\u200b\u3002</p>"},{"location":"distribute/#_19","title":"\u5275\u5efa\u200b\u6216\u200b\u4fee\u6539\u200b\u59d4\u200b\u8a17\u200b\u5206\u914d\u200b\u3002","text":"<ul> <li>triggered-by: <code>staking.MsgDelegate</code>, <code>staking.MsgBeginRedelegate</code>, <code>staking.MsgUndelegate</code></li> </ul>"},{"location":"distribute/#_20","title":"\u59d4\u200b\u8a17\u200b\u4e4b\u524d","text":"<ul> <li>\u200b\u59d4\u200b\u8a17\u200b\u734e\u52f5\u200b\u6703\u200b\u63d0\u53d6\u200b\u5230\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u63d0\u53d6\u200b\u5730\u5740\u200b\u3002   \u200b\u734e\u52f5\u200b\u5305\u62ec\u200b\u7576\u524d\u200b\u9031\u671f\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u200b\u5305\u62ec\u200b\u958b\u59cb\u200b\u7684\u200b\u9031\u671f\u200b\u3002</li> <li>\u200b\u9a57\u8b49\u8005\u200b\u9031\u671f\u200b\u6703\u200b\u589e\u52a0\u200b\u3002   \u200b\u9a57\u8b49\u8005\u200b\u9031\u671f\u200b\u6703\u200b\u589e\u52a0\u200b\uff0c\u200b\u56e0\u70ba\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u6b0a\u529b\u200b\u548c\u200b\u4efd\u984d\u200b\u5206\u914d\u200b\u53ef\u80fd\u200b\u5df2\u7d93\u200b\u767c\u751f\u200b\u8b8a\u5316\u200b\u3002</li> <li>\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u958b\u59cb\u200b\u9031\u671f\u200b\u7684\u200b\u53c3\u8003\u200b\u8a08\u6578\u6703\u200b\u6e1b\u5c11\u200b\u3002</li> </ul>"},{"location":"distribute/#_21","title":"\u59d4\u200b\u8a17\u200b\u4e4b\u540e","text":"<p>\u200b\u59d4\u6d3e\u200b\u7684\u200b\u8d77\u59cb\u200b\u9ad8\u5ea6\u200b\u8a2d\u5b9a\u200b\u70ba\u200b\u4e0a\u200b\u4e00\u6642\u200b\u6bb5\u200b\u3002 \u200b\u7531\u200b\u65bc\u200b\u524d\u200b\u9264\u200b\uff0c\u200b\u9019\u6bb5\u200b\u6642\u9593\u200b\u662f\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7372\u5f97\u200b\u734e\u52f5\u200b\u7684\u200b\u6700\u200b\u5f8c\u200b\u4e00\u6bb5\u200b\u6642\u9593\u200b\u3002</p>"},{"location":"distribute/#_22","title":"\u9a57\u8b49\u8005\u200b\u5275\u5efa","text":"<ul> <li>triggered-by: <code>staking.MsgCreateValidator</code></li> </ul> <p>\u200b\u7576\u5275\u200b\u5efa\u9a57\u200b\u8b49\u8005\u200b\u6642\u200b\uff0c\u200b\u4ee5\u4e0b\u200b\u9a57\u8b49\u8005\u200b\u8b8a\u91cf\u200b\u6703\u200b\u88ab\u200b\u521d\u59cb\u5316\u200b\uff1a</p> <ul> <li>\u200b\u6b77\u53f2\u200b\u734e\u52f5\u200b</li> <li>\u200b\u7576\u524d\u200b\u7d2f\u7a4d\u200b\u734e\u52f5\u200b</li> <li>\u200b\u7d2f\u7a4d\u200b\u4f63\u91d1\u200b</li> <li>\u200b\u7e3d\u672a\u200b\u7d50\u7b97\u200b\u734e\u52f5\u200b</li> <li>\u200b\u9031\u671f\u200b</li> </ul> <p>\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u6240\u6709\u200b\u503c\u200b\u90fd\u200b\u8a2d\u7f6e\u200b\u70ba\u200b<code>0</code>\uff0c\u200b\u9664\u4e86\u200b\u9031\u671f\u200b\uff0c\u200b\u5b83\u200b\u88ab\u200b\u8a2d\u7f6e\u200b\u70ba\u200b<code>1</code>\u3002</p>"},{"location":"distribute/#_23","title":"\u9a57\u8b49\u8005\u200b\u79fb\u9664","text":"<ul> <li>triggered-by: <code>staking.RemoveValidator</code></li> </ul> <p>\u200b\u672a\u200b\u7d50\u7b97\u200b\u7684\u200b\u4f63\u91d1\u200b\u88ab\u200b\u767c\u200b\u9001\u5230\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u81ea\u6211\u200b\u59d4\u200b\u8a17\u200b\u63d0\u6b3e\u200b\u5730\u5740\u200b\u3002 \u200b\u5269\u9918\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u734e\u52f5\u200b\u88ab\u200b\u767c\u200b\u9001\u5230\u200b\u793e\u5340\u200b\u8cbb\u7528\u200b\u6c60\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u53ea\u6709\u200b\u7576\u9a57\u200b\u8b49\u8005\u200b\u6c92\u6709\u200b\u5269\u9918\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u6642\u200b\uff0c\u200b\u624d\u200b\u6703\u200b\u5c07\u5176\u200b\u522a\u9664\u200b\u3002 \u200b\u6b64\u6642\u200b\uff0c\u200b\u6240\u6709\u200b\u672a\u200b\u7d50\u7b97\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u734e\u52f5\u200b\u90fd\u200b\u5df2\u200b\u88ab\u200b\u63d0\u53d6\u200b\u3002 \u200b\u4efb\u4f55\u200b\u5269\u9918\u200b\u7684\u200b\u734e\u52f5\u200b\u90fd\u200b\u662f\u200b\u5fae\u4e0d\u8db3\u9053\u200b\u7684\u200b\u91d1\u984d\u200b\u3002</p>"},{"location":"distribute/#_24","title":"\u9a57\u8b49\u8005\u200b\u88ab\u200b\u524a\u6e1b","text":"<ul> <li> <p>triggered-by: <code>staking.Slash</code></p> </li> <li> <p>\u200b\u7576\u524d\u9a57\u200b\u8b49\u5668\u200b\u9031\u671f\u200b\u53c3\u8003\u200b\u8a08\u6578\u200b\u589e\u52a0\u200b\u3002   \u200b\u53c3\u8003\u200b\u8a08\u6578\u200b\u589e\u52a0\u200b\u662f\u200b\u56e0\u70ba\u200b\u524a\u6e1b\u200b\u4e8b\u4ef6\u200b\u5275\u5efa\u200b\u4e86\u200b\u5c0d\u200b\u5b83\u200b\u7684\u200b\u5f15\u7528\u200b\u3002</p> </li> <li>\u200b\u9a57\u8b49\u5668\u200b\u9031\u671f\u200b\u589e\u52a0\u200b\u3002</li> <li>\u200b\u524a\u6e1b\u200b\u4e8b\u4ef6\u200b\u88ab\u200b\u5b58\u5132\u200b\u4ee5\u4f9b\u200b\u4ee5\u200b\u5f8c\u200b\u4f7f\u7528\u200b\u3002   \u200b\u7576\u8a08\u7b97\u59d4\u200b\u8a17\u200b\u4eba\u200b\u734e\u52f5\u200b\u6642\u200b\uff0c\u200b\u524a\u6e1b\u200b\u4e8b\u4ef6\u200b\u5c07\u88ab\u200b\u5f15\u7528\u200b\u3002</li> </ul>"},{"location":"distribute/#_25","title":"\u4e8b\u4ef6","text":"<p>\u200b\u5206\u767c\u200b\u6a21\u584a\u200b\u767c\u51fa\u200b\u4ee5\u4e0b\u200b\u4e8b\u4ef6\u200b\uff1a</p>"},{"location":"distribute/#beginblocker","title":"BeginBlocker","text":"Type Attribute Key Attribute Value proposer_reward validator {validatorAddress} proposer_reward reward {proposerReward} commission amount {commissionAmount} commission validator {validatorAddress} rewards amount {rewardAmount} rewards validator {validatorAddress}"},{"location":"distribute/#handlers","title":"Handlers","text":""},{"location":"distribute/#msgsetwithdrawaddress","title":"MsgSetWithdrawAddress","text":"Type Attribute Key Attribute Value set_withdraw_address withdraw_address {withdrawAddress} message module distribution message action set_withdraw_address message sender {senderAddress}"},{"location":"distribute/#msgwithdrawdelegatorreward_1","title":"MsgWithdrawDelegatorReward","text":"Type Attribute Key Attribute Value withdraw_rewards amount {rewardAmount} withdraw_rewards validator {validatorAddress} message module distribution message action withdraw_delegator_reward message sender {senderAddress}"},{"location":"distribute/#msgwithdrawvalidatorcommission","title":"MsgWithdrawValidatorCommission","text":"Type Attribute Key Attribute Value withdraw_commission amount {commissionAmount} message module distribution message action withdraw_validator_commission message sender {senderAddress}"},{"location":"distribute/#_26","title":"\u53c3\u6578","text":"<p>\u200b\u5206\u767c\u200b\u6a21\u584a\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u53c3\u6578\u200b\uff1a</p> Key Type Example communitytax string (dec) \"0.020000000000000000\" [0] baseproposerreward string (dec) \"0.010000000000000000\" [0] bonusproposerreward string (dec) \"0.040000000000000000\" [0] withdrawaddrenabled bool true <ul> <li>[0] <code>communitytax</code>, <code>baseproposerreward</code> and <code>bonusproposerreward</code> \u200b\u9019\u4e9b\u200b\u53c3\u6578\u200b\u5fc5\u9808\u200b\u662f\u200b\u6b63\u6578\u200b\uff0c\u200b\u5b83\u5011\u200b\u7684\u200b\u7e3d\u200b\u548c\u200b\u4e0d\u80fd\u200b\u8d85\u904e\u200b1.00\u3002</li> </ul>"},{"location":"evm/","title":"\u4ee5\u592a\u200b\u574a\u200b\u865b\u64ec\u6a5f","text":"<p>\u200b\u672c\u6587\u200b\u6a94\u5c07\u200b\u4ee5\u592a\u200b\u574a\u200b\u865b\u64ec\u6a5f\u200b (EVM) \u200b\u7684\u200b\u898f\u7bc4\u5b9a\u200b\u7fa9\u70ba\u200b Cosmos SDK \u200b\u6a21\u584a\u200b\u3002</p> <p>\u200b\u81ea\u200b2015\u200b\u5e74\u200b\u5f15\u5165\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ee5\u4f86\u200b\uff0c\u200b\u901a\u904e\u200b[\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b]\u200b\u63a7\u5236\u200b\u6578\u5b57\u200b\u8cc7\u7522\u200b\u7684\u200b\u80fd\u529b\u200b\u5438\u5f15\u200b\u4e86\u200b\u5927\u91cf\u200b\u958b\u767c\u200b\u4eba\u54e1\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u200b\u865b\u64ec\u6a5f\u200b (EVM) \u200b\u4e0a\u69cb\u200b\u5efa\u53bb\u200b\u4e2d\u5fc3\u5316\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u3002 \u200b\u8a72\u200b\u793e\u5340\u200b\u4e0d\u65b7\u200b\u5275\u5efa\u5ee3\u6cdb\u200b\u7684\u200b\u5de5\u5177\u200b\u4e26\u200b\u5f15\u5165\u200b\u6a19\u6e96\u200b\uff0c\u200b\u9019\u9032\u200b\u4e00\u6b65\u200b\u63d0\u9ad8\u200b\u4e86\u200b EVM \u200b\u517c\u5bb9\u200b\u6280\u8853\u200b\u7684\u200b\u63a1\u200b\u7528\u7387\u200b\u3002</p> <p>\u200b\u7136\u800c\u200b\uff0c\u200b\u57fa\u200b\u65bc\u200b EVM \u200b\u7684\u200b\u93c8\u200b\uff08\u200b\u4f8b\u5982\u200b\u4ee5\u592a\u200b\u574a\u200b\uff09\u200b\u7684\u200b\u589e\u9577\u200b\u63ed\u793a\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u53ef\u64f4\u200b\u5c55\u6027\u200b\u6311\u6230\u200b\uff0c\u200b\u9019\u4e9b\u200b\u6311\u6230\u200b\u901a\u5e38\u200b\u88ab\u200b\u7a31\u200b\u70ba\u200b\u53bb\u200b\u4e2d\u5fc3\u5316\u200b\u3001\u200b\u5b89\u5168\u6027\u200b\u548c\u200b\u53ef\u200b\u64f4\u200b\u5c55\u6027\u200b\u7684\u200b\u4e09\u96e3\u200b\u56f0\u5883\u200b\u3002 \u200b\u958b\u767c\u200b\u4eba\u54e1\u200b\u5c0d\u200b\u9ad8\u6602\u200b\u7684\u200b gas \u200b\u8cbb\u7528\u200b\u3001\u200b\u7de9\u6162\u200b\u7684\u200b\u4ea4\u6613\u200b\u901f\u5ea6\u200b\u548c\u200b\u541e\u5410\u91cf\u200b\u4ee5\u53ca\u200b\u93c8\u200b\u7279\u5b9a\u200b\u7684\u200b\u6cbb\u7406\u200b\u611f\u5230\u200b\u6cae\u55aa\u200b\uff0c\u200b\u9019\u4e9b\u200b\u6cbb\u7406\u200b\u7531\u200b\u65bc\u200b\u5176\u5ee3\u6cdb\u200b\u90e8\u7f72\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u800c\u200b\u53ea\u80fd\u200b\u7d93\u6b77\u200b\u7de9\u6162\u200b\u7684\u200b\u8b8a\u5316\u200b\u3002 \u200b\u9700\u8981\u200b\u4e00\u7a2e\u200b\u89e3\u6c7a\u200b\u65b9\u6848\u200b\u4f86\u200b\u6d88\u9664\u200b\u5728\u200b\u719f\u6089\u200b\u7684\u200b EVM \u200b\u74b0\u5883\u200b\u4e2d\u69cb\u200b\u5efa\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u958b\u200b\u767c\u4eba\u54e1\u200b\u7684\u200b\u9019\u4e9b\u200b\u9867\u616e\u200b\u3002</p> <p><code>x/evm</code> \u200b\u6a21\u584a\u200b\u5728\u200b\u53ef\u200b\u64f4\u5c55\u200b\u3001\u200b\u9ad8\u200b\u541e\u5410\u91cf\u200b\u7684\u200b\u6b0a\u76ca\u200b\u8b49\u660e\u5340\u200b\u584a\u200b\u93c8\u200b\u4e0a\u200b\u63d0\u4f9b\u200b\u9019\u7a2e\u200b EVM \u200b\u719f\u6089\u200b\u5ea6\u200b\u3002 \u200b\u5b83\u69cb\u200b\u5efa\u70ba\u200b Cosmos SDK \u200b\u6a21\u584a\u200b\uff0c\u200b\u5141\u8a31\u200b\u90e8\u7f72\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u3001\u200b\u8207\u200b EVM \u200b\u72c0\u614b\u6a5f\u200b\u4ea4\u4e92\u200b\uff08\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\uff09 \uff0c\u200b\u4ee5\u53ca\u200b EVM \u200b\u5de5\u5177\u200b\u7684\u200b\u4f7f\u7528\u200b\u3002 \u200b\u5b83\u200b\u53ef\u7528\u200b\u65bc\u200b Cosmos \u200b\u7279\u5b9a\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5340\u584a\u200b\u93c8\u200b\uff0c\u200b\u901a\u904e\u200b Tendermint Core \u200b\u7684\u200b\u9ad8\u200b\u4ea4\u6613\u200b\u541e\u5410\u91cf\u200b\u3001\u200b\u5feb\u901f\u200b\u7684\u200b\u4ea4\u6613\u200b\u7d42\u7d50\u6027\u200b\u548c\u200b IBC \u200b\u7684\u200b\u6c34\u5e73\u200b\u53ef\u64f4\u200b\u5c55\u6027\u200b\u4f86\u200b\u7de9\u89e3\u200b\u4e0a\u8ff0\u200b\u554f\u984c\u200b\u3002</p>"},{"location":"evm/#_1","title":"\u5167\u5bb9","text":"<ol> <li>\u200b\u6982\u5ff5\u200b</li> <li>\u200b\u72c0\u614b\u200b</li> <li>\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b</li> <li>\u200b\u4ea4\u6613\u200b</li> <li>ABCI</li> <li>\u200b\u9264\u5b50\u200b</li> <li>\u200b\u4e8b\u4ef6\u200b</li> <li>\u200b\u53c3\u6578\u200b</li> <li>\u200b\u5ba2\u6236\u200b\u7aef\u200b</li> </ol>"},{"location":"evm/#_2","title":"\u6a21\u584a\u200b\u67b6\u69cb","text":"<p>\u200b\u6ce8\u610f\u200b:: \u200b\u5982\u679c\u200b\u60a8\u200b\u4e0d\u200b\u719f\u6089\u200b SDK \u200b\u6a21\u584a\u200b\u7684\u200b\u6574\u9ad4\u200b\u6a21\u584a\u200b\u7d50\u69cb\u200b\uff0c\u200b\u8acb\u5148\u200b\u95b1\u8b80\u200b\u6b64\u200b \u200b\u6587\u6a94\u200b \u200b\u4f5c\u70ba\u200b\u5148\u6c7a\u200b\u689d\u4ef6\u200b\u3002</p> <pre><code>evm/\n\u251c\u2500\u2500 client\n\u2502   \u2514\u2500\u2500 cli\n\u2502       \u251c\u2500\u2500 query.go      # \u200b\u6a21\u584a\u200b\u7684\u200b CLI \u200b\u67e5\u8a62\u200b\u547d\u4ee4\u200b\n\u2502    \u00a0\u00a0 \u2514\u2500\u2500 tx.go         # \u200b\u6a21\u584a\u200b\u7684\u200b CLI \u200b\u4ea4\u6613\u200b\u547d\u4ee4\u200b\n\u251c\u2500\u2500 keeper\n\u2502   \u251c\u2500\u2500 abci.go           # ABCI \u200b\u958b\u59cb\u200b\u51fa\u584a\u200b \u200b\u548c\u200b \u200b\u7d50\u675f\u200b\u51fa\u584a\u200b \u200b\u908f\u8f2f\u200b\n\u2502   \u251c\u2500\u2500 keeper.go         # \u200b\u8655\u7406\u200b\u6a21\u584a\u200b\u7684\u200b\u696d\u52d9\u200b\u908f\u8f2f\u200b\u3002\n\u2502   \u251c\u2500\u2500 params.go         # \u200b\u53c3\u6578\u200b\u7372\u200b\u53d6\u5668\u200b\u548c\u200b\u8a2d\u7f6e\u5668\u200b\n\u2502   \u251c\u2500\u2500 querier.go        # \u200b\u72c0\u614b\u200b\u67e5\u8a62\u200b\u51fd\u6578\u200b\n\u2502   \u2514\u2500\u2500 statedb.go        # \u200b\u4f86\u200b\u81ea\u200b types/statedb \u200b\u4e26\u50b3\u5165\u200b sdk.Context \u200b\u7684\u200b\u51fd\u6578\u200b\n\u251c\u2500\u2500 types\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 chain_config.go\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 codec.go          # \u200b\u7de8\u78bc\u985e\u200b\u578b\u200b\u8a3b\u200b\u518a\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 errors.go         # \u200b\u7279\u5b9a\u200b\u65bc\u200b\u6a21\u584a\u200b\u7684\u200b\u932f\u8aa4\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 events.go         # \u200b\u66b4\u9732\u200b\u7d66\u200b Tendermint PubSub/Websocket \u200b\u7684\u200b\u4e8b\u4ef6\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 genesis.go        # \u200b\u6a21\u584a\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 journal.go        # \u200b\u4ee5\u592a\u200b\u574a\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u4ea4\u6613\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 keys.go           # \u200b\u5b58\u5132\u5bc6\u200b\u9470\u200b\u548c\u200b\u5be6\u7528\u200b\u51fd\u6578\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 logs.go           # \u200b\u93c8\u5347\u7d1a\u200b\u5f8c\u200b\u6301\u4e45\u200b\u5316\u200b Ethereum tx \u200b\u767b\u9304\u200b\u72c0\u614b\u200b\u7684\u200b\u985e\u578b\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 msg.go            #EVM \u200b\u6a21\u584a\u200b\u4ea4\u6613\u200b\u6d88\u606f\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 params.go         # \u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u6cbb\u7406\u200b\u53c3\u6578\u200b\u66f4\u200b\u6539\u5efa\u200b\u8b70\u81ea\u5b9a\u200b\u7fa9\u7684\u200b\u6a21\u584a\u200b\u53c3\u6578\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 state_object.go   # EVM \u200b\u72c0\u614b\u200b\u5c0d\u8c61\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 statedb.go        # StateDb\u200b\u63a5\u53e3\u200b\u7684\u200b\u5be6\u73fe\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 storage.go        # \u200b\u4f7f\u7528\u200b\u6578\u7d44\u200b\u5be6\u73fe\u200b\u4ee5\u592a\u200b\u574a\u200b\u72c0\u614b\u200b\u5b58\u5132\u200b\u6620\u5c04\u200b\u4ee5\u200b\u9632\u6b62\u200b\u975e\u78ba\u200b\u5b9a\u6027\u200b\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 tx_data.go        # \u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u985e\u578b\u200b\n\u251c\u2500\u2500 genesis.go            # ABCI InitGenesis \u200b\u548c\u200b ExportGenesis \u200b\u529f\u80fd\u200b\n\u251c\u2500\u2500 handler.go            # \u200b\u6d88\u606f\u200b\u8def\u7531\u200b\n\u2514\u2500\u2500 module.go             # \u200b\u6a21\u584a\u200b\u7ba1\u7406\u5668\u200b\u7684\u200b\u6a21\u584a\u200b\u8a2d\u7f6e\u200b\n</code></pre>"},{"location":"evm/#_3","title":"\u6982\u5ff5","text":""},{"location":"evm/#evm","title":"EVM","text":"<p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u865b\u64ec\u6a5f\u200b (EVM) \u200b\u662f\u200b\u4e00\u7a2e\u200b\u8a08\u7b97\u200b\u5f15\u64ce\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5c07\u5176\u8996\u200b\u70ba\u200b\u7531\u6578\u200b\u5343\u53f0\u200b\u904b\u884c\u200b\u4ee5\u592a\u200b\u574a\u200b\u5ba2\u6236\u200b\u7aef\u7684\u200b\u9023\u63a5\u200b\u8a08\u7b97\u6a5f\u200b\uff08\u200b\u7bc0\u9ede\u200b\uff09\u200b\u7dad\u8b77\u200b\u7684\u200b\u55ae\u4e00\u200b\u5be6\u9ad4\u200b\u3002 \u200b\u4f5c\u70ba\u200b\u865b\u64ec\u6a5f\u200b (VM)\uff0cEVM \u200b\u8ca0\u8cac\u78ba\u200b\u5b9a\u6027\u200b\u5730\u8a08\u7b97\u200b\u72c0\u614b\u200b\u8b8a\u5316\u200b\uff0c\u200b\u800c\u200b\u4e0d\u7ba1\u200b\u5176\u74b0\u5883\u200b\uff08\u200b\u786c\u4ef6\u200b\u548c\u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u200b\uff09\u200b\u5982\u4f55\u200b\u3002 \u200b\u9019\u200b\u610f\u5473\u8457\u200b\u5728\u200b\u7d66\u5b9a\u200b\u76f8\u540c\u200b\u7684\u200b\u8d77\u59cb\u200b\u72c0\u614b\u200b\u548c\u200b\u4ea4\u6613\u200b (tx) \u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u6bcf\u500b\u200b\u7bc0\u9ede\u200b\u90fd\u200b\u5fc5\u9808\u200b\u7372\u5f97\u200b\u5b8c\u5168\u76f8\u540c\u200b\u7684\u200b\u7d50\u679c\u200b\u3002</p> <p>EVM \u200b\u88ab\u200b\u8a8d\u70ba\u200b\u662f\u200b\u8655\u7406\u200b \u200b\u667a\u80fd\u200b\u5408\u7d04\u200b \u200b\u90e8\u7f72\u200b\u548c\u200b\u57f7\u884c\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u5354\u8b70\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u3002</p> <p>\u200b\u8981\u660e\u200b\u78ba\u5340\u200b\u5206\u200b\uff1a</p> <ul> <li>\u200b\u4ee5\u592a\u200b\u574a\u200b\u5354\u8b70\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u93c8\u200b\uff0c\u200b\u6240\u6709\u200b\u4ee5\u592a\u200b\u574a\u200b\u8cec\u6236\u200b\u548c\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u90fd\u200b\u5b58\u5728\u200b\u65bc\u200b\u5176\u4e2d\u200b\u3002   \u200b\u5b83\u200b\u5728\u200b\u93c8\u200b\u4e2d\u200b\u7684\u200b\u4efb\u4f55\u200b\u7d66\u5b9a\u200b\u584a\u200b\u4e2d\u200b\u53ea\u6709\u200b\u4e00\u500b\u200b\u898f\u7bc4\u72c0\u614b\u200b\uff08\u200b\u4e00\u7a2e\u200b\u6578\u64da\u200b\u7d50\u69cb\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u4fdd\u5b58\u200b\u6240\u6709\u200b\u5e33\u6236\u200b\uff09\u3002</li> <li>\u200b\u7136\u800c\u200b\uff0cEVM \u200b\u662f\u200b \u200b\u72c0\u614b\u6a5f\u200b\uff0c\u200b\u5b83\u5b9a\u200b\u7fa9\u4e86\u200b\u5f9e\u200b\u4e00\u500b\u200b\u584a\u200b\u5230\u200b\u53e6\u200b\u4e00\u500b\u200b\u584a\u200b\u8a08\u7b97\u200b\u65b0\u200b\u6709\u6548\u200b\u72c0\u614b\u200b\u7684\u200b\u898f\u5247\u200b\u3002   \u200b\u5b83\u200b\u662f\u200b\u4e00\u500b\u200b\u9694\u96e2\u200b\u7684\u200b\u904b\u884c\u200b\u6642\u200b\uff0c\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u5728\u200b EVM \u200b\u5167\u904b\u884c\u200b\u7684\u200b\u4ee3\u78bc\u200b\u7121\u6cd5\u200b\u8a2a\u554f\u200b\u7db2\u7d61\u200b\u3001\u200b\u6587\u4ef6\u200b\u7cfb\u7d71\u200b\u6216\u200b\u5176\u4ed6\u200b\u9032\u7a0b\u200b\uff08\u200b\u4e0d\u662f\u200b\u5916\u90e8\u200b API\uff09\u3002</li> </ul> <p><code>x/evm</code> \u200b\u6a21\u584a\u5c07\u200b EVM \u200b\u5be6\u73fe\u200b\u70ba\u200b Cosmos SDK \u200b\u6a21\u584a\u200b\u3002 \u200b\u5b83\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u901a\u904e\u200b\u63d0\u4ea4\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u4e26\u5728\u200b\u7d66\u5b9a\u200b\u72c0\u614b\u200b\u4e0a\u200b\u57f7\u884c\u200b\u5305\u542b\u200b\u7684\u200b\u6d88\u606f\u200b\u4f86\u200b\u8207\u200b EVM \u200b\u4ea4\u4e92\u200b\uff0c\u200b\u4ee5\u5f15\u200b\u767c\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002</p>"},{"location":"evm/#_4","title":"\u72c0\u614b","text":"<p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u72c0\u614b\u200b\u662f\u200b\u4e00\u7a2e\u200b\u6578\u64da\u200b\u7d50\u69cb\u200b\uff0c\u200b\u5be6\u73fe\u200b\u70ba\u200b Merkle Patricia Tree\uff0c\u200b\u5c07\u200b\u6240\u6709\u200b\u8cec\u6236\u200b\u4fdd\u5b58\u200b\u5728\u200b\u93c8\u200b\u4e0a\u200b\u3002 EVM \u200b\u5c0d\u8a72\u200b\u6578\u64da\u200b\u7d50\u69cb\u200b\u9032\u884c\u200b\u66f4\u6539\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u7522\u751f\u200b\u5177\u6709\u200b\u4e0d\u540c\u200b\u72c0\u614b\u200b\u6839\u200b\u7684\u200b\u65b0\u200b\u72c0\u614b\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u4ee5\u592a\u200b\u574a\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u8996\u70ba\u200b\u4e00\u689d\u200b\u72c0\u614b\u200b\u93c8\u200b\uff0c\u200b\u5b83\u200b\u901a\u904e\u200b\u4f7f\u7528\u200b EVM \u200b\u5728\u200b\u5340\u584a\u200b\u4e2d\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u4f86\u200b\u5f9e\u200b\u4e00\u7a2e\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u5230\u200b\u53e6\u200b\u4e00\u7a2e\u200b\u72c0\u614b\u200b\u3002 \u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b txs \u200b\u584a\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u5b83\u200b\u7684\u200b\u584a\u982d\u200b\uff08\u200b\u7236\u200b\u54c8\u5e0c\u200b\u3001\u200b\u584a\u865f\u200b\u3001\u200b\u6642\u9593\u200b\u6233\u200b\u3001\u200b\u96a8\u6a5f\u6578\u200b\u3001\u200b\u6536\u64da\u200b\u2026\u2026\uff09\u200b\u4f86\u200b\u63cf\u8ff0\u200b\u3002</p>"},{"location":"evm/#_5","title":"\u8cec\u865f","text":"<p>\u200b\u6709\u200b\u5169\u7a2e\u200b\u985e\u578b\u200b\u7684\u200b\u5e33\u6236\u200b\u53ef\u4ee5\u200b\u5b58\u5132\u200b\u5728\u200b\u7d66\u5b9a\u200b\u5730\u5740\u200b\u7684\u200b\u72c0\u614b\u200b\u4e2d\u200b\uff1a</p> <ul> <li>\u200b\u5916\u90e8\u200b\u64c1\u6709\u200b\u8cec\u6236\u200b (EOA)\uff1a\u200b\u5177\u6709\u200b\u96a8\u6a5f\u6578\u200b\uff08tx \u200b\u8a08\u6578\u5668\u200b\uff09\u200b\u548c\u200b\u4f59\u984d\u200b</li> <li>\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\uff1a\u200b\u5177\u6709\u200b\u96a8\u6a5f\u6578\u200b\u3001\u200b\u9918\u984d\u200b\u3001\uff08\u200b\u4e0d\u53ef\u200b\u8b8a\u200b\uff09\u200b\u4ee3\u78bc\u200b\u54c8\u5e0c\u200b\u3001\u200b\u5b58\u5132\u6839\u200b\uff08\u200b\u53e6\u200b\u4e00\u500b\u200b Merkle Patricia Trie\uff09</li> </ul> <p>\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u5c31\u200b\u50cf\u200b\u5340\u584a\u200b\u93c8\u200b\u4e0a\u200b\u7684\u200b\u5e38\u898f\u200b\u8cec\u6236\u200b\u4e00\u6a23\u200b\uff0c\u200b\u5b83\u200b\u9084\u4ee5\u200b\u4ee5\u592a\u200b\u574a\u200b\u7279\u5b9a\u200b\u7684\u200b\u4e8c\u200b\u9032\u5236\u200b\u683c\u5f0f\u200b\u5b58\u5132\u200b\u53ef\u200b\u57f7\u884c\u4ee3\u78bc\u200b\uff0c\u200b\u7a31\u70ba\u200b EVM \u200b\u5b57\u200b\u7bc0\u78bc\u200b\u3002 \u200b\u5b83\u5011\u200b\u901a\u5e38\u200b\u662f\u200b\u7528\u4ee5\u200b\u592a\u574a\u200b\u9ad8\u7d1a\u200b\u8a9e\u8a00\u200b\u7de8\u5beb\u200b\u7684\u200b\uff0c\u200b\u4f8b\u5982\u200b Solidity\uff0c\u200b\u5b83\u200b\u88ab\u200b\u7de8\u8b6f\u6210\u200b EVM \u200b\u5b57\u200b\u7bc0\u78bc\u200b\u4e26\u901a\u904e\u200b\u4f7f\u7528\u200b\u4ee5\u592a\u200b\u574a\u200b\u5ba2\u6236\u200b\u7aef\u200b\u63d0\u4ea4\u200b\u4ea4\u6613\u200b\u90e8\u7f72\u200b\u5728\u200b\u5340\u584a\u200b\u93c8\u200b\u4e0a\u200b\u3002</p>"},{"location":"evm/#_6","title":"\u7d50\u69cb","text":"<p>EVM \u200b\u4f5c\u70ba\u200b\u57fa\u200b\u65bc\u200b\u5806\u68e7\u200b\u7684\u200b\u6a5f\u5668\u200b\u904b\u884c\u200b\u3002 \u200b\u5b83\u200b\u7684\u200b\u4e3b\u8981\u200b\u67b6\u69cb\u200b\u7d44\u4ef6\u200b\u5305\u62ec\u200b\uff1a</p> <ul> <li>Virtual ROM\uff1a\u200b\u5408\u7d04\u4ee3\u78bc\u200b\u5728\u200b\u8655\u7406\u200btxs\u200b\u6642\u200b\u88ab\u200b\u62c9\u5165\u200b\u9019\u500b\u200b\u53ea\u8b80\u200b\u5167\u5b58\u200b</li> <li>\u200b\u6a5f\u5668\u200b\u72c0\u614b\u200b\uff08\u200b\u6613\u200b\u5931\u6027\u200b\uff09\uff1a\u200b\u96a8\u8457\u200b EVM \u200b\u904b\u884c\u200b\u800c\u200b\u8b8a\u5316\u200b\uff0c\u200b\u4e26\u5728\u200b\u8655\u7406\u200b\u6bcf\u500b\u200b tx \u200b\u5f8c\u200b\u88ab\u200b\u6e05\u9664\u200b<ul> <li>\u200b\u7a0b\u5e8f\u200b\u8a08\u6578\u5668\u200b\uff08PC\uff09</li> <li>Gas\u200b\u200b\uff1a\u200b\u8ddf\u8e2a\u200b\u4f7f\u7528\u200b\u4e86\u200b\u591a\u5c11\u200b gas   *\u200b\u5806\u68e7\u200b\u548c\u200b\u5167\u5b58\u200b\uff1a\u200b\u8a08\u7b97\u200b\u72c0\u614b\u200b\u8b8a\u5316\u200b</li> </ul> </li> <li>\u200b\u8a2a\u554f\u200b\u5e33\u6236\u200b\u5b58\u5132\u200b\uff08\u200b\u6301\u4e45\u200b\uff09</li> </ul>"},{"location":"evm/#_7","title":"\u667a\u80fd\u200b\u5408\u7d04\u200b\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db","text":"<p>\u200b\u901a\u5e38\u200b\uff0c\u200b\u667a\u80fd\u200b\u5408\u7d04\u6703\u200b\u516c\u958b\u200b\u4e00\u500b\u200b\u516c\u5171\u200b ABI\uff0c\u200b\u9019\u662f\u200b\u4e00\u500b\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u8207\u200b\u5408\u7d04\u200b\u4ea4\u4e92\u200b\u7684\u200b\u53d7\u200b\u652f\u6301\u200b\u65b9\u5f0f\u200b\u7684\u200b\u5217\u8868\u200b\u3002 \u200b\u8981\u200b\u8207\u200b\u5408\u7d04\u200b\u4ea4\u4e92\u200b\u4e26\u8abf\u200b\u7528\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\uff0c\u200b\u7528\u6236\u5c07\u200b\u63d0\u4ea4\u200b\u4e00\u500b\u200b\u651c\u5e36\u200b\u4efb\u610f\u200b\u6578\u91cf\u200b\u6c23\u9ad4\u200b\u7684\u200b\u4ea4\u6613\u200b\u548c\u200b\u6839\u64da\u200b ABI \u200b\u683c\u5f0f\u5316\u200b\u7684\u200b\u6578\u64da\u200b\u6709\u6548\u200b\u8ca0\u8f09\u200b\uff0c\u200b\u6307\u5b9a\u200b\u4ea4\u4e92\u200b\u985e\u578b\u200b\u548c\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u53c3\u6578\u200b\u3002 \u200b\u7576\u200b\u6536\u5230\u200b tx \u200b\u6642\u200b\uff0cEVM \u200b\u4f7f\u7528\u200b tx \u200b\u8ca0\u8f09\u200b\u57f7\u884c\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u7684\u200b EVM \u200b\u5b57\u200b\u7bc0\u78bc\u200b\u3002</p>"},{"location":"evm/#evm_1","title":"\u57f7\u884c\u200b EVM \u200b\u5b57\u200b\u7bc0\u78bc","text":"<p>\u200b\u5408\u7d04\u200b\u7684\u200b EVM \u200b\u5b57\u200b\u7bc0\u78bc\u200b\u7531\u200b\u57fa\u672c\u64cd\u4f5c\u200b\uff08\u200b\u52a0\u6cd5\u200b\u3001\u200b\u4e58\u6cd5\u200b\u3001\u200b\u5b58\u5132\u200b\u7b49\u200b\uff09\u200b\u7d44\u6210\u200b\uff0c\u200b\u7a31\u70ba\u200b\u64cd\u4f5c\u200b\u78bc\u200b\u3002 \u200b\u6bcf\u500b\u200b Opcode \u200b\u57f7\u884c\u200b\u90fd\u200b\u9700\u8981\u200b\u7528\u200b tx \u200b\u652f\u4ed8\u200b\u7684\u200b gas\u3002 \u200b\u56e0\u6b64\u200b\uff0cEVM \u200b\u88ab\u200b\u8a8d\u70ba\u200b\u662f\u200b\u6e96\u5716\u9748\u200b\u5b8c\u5099\u200b\u7684\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u200b\u5141\u8a31\u200b\u4efb\u610f\u200b\u8a08\u7b97\u200b\uff0c\u200b\u4f46\u200b\u5408\u7d04\u57f7\u200b\u884c\u671f\u200b\u9593\u200b\u7684\u200b\u8a08\u7b97\u91cf\u200b\u50c5\u9650\u200b\u65bc\u200b tx \u200b\u4e2d\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6c23\u9ad4\u91cf\u200b\u3002</p> <p>\u200b\u6bcf\u500b\u200b\u64cd\u4f5c\u200b\u78bc\u200b\u7684\u200b gas \u200b\u6210\u672c\u200b \u200b\u53cd\u6620\u200b\u4e86\u200b\u5728\u200b\u5be6\u969b\u200b\u8a08\u7b97\u6a5f\u200b\u786c\u4ef6\u200b\u4e0a\u904b\u884c\u200b\u9019\u4e9b\u200b\u64cd\u4f5c\u200b\u7684\u200b\u6210\u672c\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c<code>ADD = 3gas</code> \u200b\u548c\u200b <code>SSTORE = 100gas</code>\uff09\u3002 \u200b\u8981\u200b\u8a08\u7b97\u200b\u4ea4\u6613\u200b\u7684\u200b gas \u200b\u6d88\u8017\u91cf\u200b\uff0c\u200b\u8acb\u5c07\u200b gas \u200b\u6210\u672c\u200b\u4e58\u4ee5\u200b gas price\uff0c\u200b\u9019\u200b\u53ef\u80fd\u200b\u6703\u200b\u6839\u64da\u200b\u7576\u6642\u200b\u7db2\u7d61\u200b\u7684\u200b\u9700\u6c42\u200b\u800c\u200b\u8b8a\u5316\u200b\u3002 \u200b\u5982\u679c\u200b\u7db2\u7d61\u200b\u8ca0\u8f09\u200b\u5f88\u91cd\u200b\uff0c\u200b\u60a8\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u652f\u4ed8\u200b\u66f4\u200b\u9ad8\u200b\u7684\u200b gas \u200b\u50f9\u683c\u200b\u624d\u80fd\u200b\u57f7\u884c\u200b\u60a8\u200b\u7684\u200b\u4ea4\u6613\u200b\u3002 \u200b\u5982\u679c\u200b\u9054\u5230\u200b\u6c23\u9ad4\u200b\u9650\u5236\u200b\uff08\u200b\u6c23\u9ad4\u200b\u7570\u5e38\u200b\uff09\uff0c\u200b\u5247\u4e0d\u6703\u200b\u5c0d\u200b\u4ee5\u592a\u200b\u574a\u200b\u72c0\u614b\u200b\u9032\u884c\u200b\u4efb\u4f55\u200b\u66f4\u6539\u200b\uff0c\u200b\u9664\u975e\u200b\u767c\u9001\u8005\u200b\u7684\u200b\u96a8\u6a5f\u6578\u200b\u589e\u52a0\u200b\u4e26\u4e14\u200b\u4ed6\u5011\u200b\u7684\u200b\u9918\u984d\u200b\u4e0b\u964d\u200b\u4ee5\u200b\u652f\u4ed8\u200b\u6d6a\u8cbb\u200b EVM \u200b\u6642\u9593\u200b\u7684\u200b\u8cbb\u7528\u200b\u3002</p> <p>\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u8abf\u7528\u200b\u5176\u4ed6\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u3002 \u200b\u6bcf\u6b21\u200b\u8abf\u7528\u200b\u65b0\u5408\u7d04\u200b\u90fd\u200b\u6703\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b EVM \u200b\u5be6\u4f8b\u200b\uff08\u200b\u5305\u62ec\u200b\u65b0\u200b\u7684\u200b\u5806\u68e7\u200b\u548c\u200b\u5167\u5b58\u200b\uff09\u3002 \u200b\u6bcf\u6b21\u200b\u8abf\u7528\u200b\u90fd\u200b\u6703\u5c07\u200b\u6c99\u7bb1\u200b\u72c0\u614b\u200b\u50b3\u905e\u200b\u7d66\u4e0b\u200b\u4e00\u500b\u200b EVM\u3002 \u200b\u5982\u679c\u200b\u6c23\u9ad4\u200b\u7528\u200b\u5b8c\u200b\uff0c\u200b\u6240\u6709\u200b\u72c0\u614b\u200b\u8b8a\u5316\u200b\u90fd\u5c07\u200b\u88ab\u200b\u4e1f\u68c4\u200b\u3002 \u200b\u5426\u5247\u200b\uff0c\u200b\u5b83\u5011\u200b\u5c07\u88ab\u200b\u4fdd\u7559\u200b\u3002</p> <p>\u200b\u5982\u200b\u9700\u9032\u200b\u4e00\u6b65\u200b\u95b1\u8b80\u200b\uff0c\u200b\u8acb\u200b\u53c3\u95b1\u200b\uff1a</p> <ul> <li>EVM</li> <li>EVM Architecture</li> <li>What is Ethereum</li> <li>Opcodes</li> </ul>"},{"location":"evm/#daodst-geth","title":"Daodst \u200b\u4f5c\u70ba\u200b Geth \u200b\u5be6\u73fe","text":"<p>Daodst \u200b\u5305\u542b\u200b Golang \u200b\u4e2d\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u5354\u8b70\u200b (Geth) \u200b\u4f5c\u70ba\u200b Cosmos SDK \u200b\u6a21\u584a\u200b\u7684\u200b\u5be6\u73fe\u200b\u3002 Geth \u200b\u5305\u542b\u200b\u4e00\u500b\u200b EVM \u200b\u7684\u200b\u5be6\u73fe\u200b\u4f86\u200b\u8a08\u7b97\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002 \u200b\u67e5\u770b\u200b go-ethereum \u200b\u6e90\u4ee3\u78bc\u200b \u200b\u4e86\u89e3\u200b EVM \u200b\u64cd\u4f5c\u200b\u78bc\u662f\u200b\u5982\u4f55\u200b\u5be6\u73fe\u200b\u7684\u200b\u3002 \u200b\u6b63\u5982\u200b Geth \u200b\u53ef\u4ee5\u200b\u4f5c\u70ba\u200b\u4ee5\u592a\u200b\u574a\u200b\u7bc0\u9ede\u200b\u904b\u884c\u200b\u4e00\u6a23\u200b\uff0cDaodst \u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f5c\u70ba\u200b\u7bc0\u9ede\u200b\u904b\u884c\u200b\u4ee5\u8a08\u7b97\u200b EVM \u200b\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002</p>"},{"location":"evm/#json-rpc","title":"JSON-RPC","text":"<p>JSON-RPC \u200b\u662f\u200b\u4e00\u7a2e\u200b\u7121\u72c0\u614b\u200b\u3001\u200b\u8f15\u91cf\u200b\u7d1a\u200b\u7684\u200b\u9060\u7a0b\u200b\u904e\u7a0b\u200b\u8abf\u7528\u200b (RPC) \u200b\u5354\u8b70\u200b\u3002 \u200b\u8a72\u200b\u898f\u7bc4\u200b\u4e3b\u8981\u200b\u5b9a\u7fa9\u4e86\u200b\u5e7e\u7a2e\u200b\u6578\u64da\u200b\u7d50\u69cb\u200b\u53ca\u5176\u200b\u8655\u7406\u200b\u898f\u5247\u200b\u3002 \u200b\u5b83\u200b\u8207\u200b\u50b3\u8f38\u200b\u7121\u95dc\u200b\uff0c\u200b\u56e0\u70ba\u200b\u9019\u4e9b\u200b\u6982\u5ff5\u200b\u53ef\u4ee5\u200b\u5728\u200b\u540c\u4e00\u200b\u9032\u7a0b\u200b\u4e2d\u200b\u3001\u200b\u901a\u904e\u200b\u5957\u200b\u63a5\u5b57\u200b\u3001\u200b\u901a\u904e\u200b HTTP \u200b\u6216\u200b\u5728\u200b\u8a31\u591a\u200b\u4e0d\u540c\u200b\u7684\u200b\u6d88\u606f\u200b\u50b3\u905e\u200b\u74b0\u5883\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u3002 \u200b\u5b83\u200b\u4f7f\u7528\u200b JSON (RFC 4627) \u200b\u4f5c\u70ba\u200b\u6578\u64da\u200b\u683c\u5f0f\u200b\u3002</p> <p>** JSON-RPC \u200b\u7bc4\u4f8b\u200b: <code>eth_call</code> **</p> <p>JSON-RPC \u200b\u65b9\u6cd5\u200b\u5141\u8a31\u200b\u60a8\u200b\u6839\u64da\u200b\u5408\u7d04\u200b\u57f7\u884c\u200b\u6d88\u606f\u200b\u3002 \u200b\u901a\u5e38\u200b\uff0c\u200b\u60a8\u200b\u9700\u8981\u200b\u5c07\u200b\u4ea4\u6613\u200b\u767c\u200b\u9001\u5230\u200b Geth \u200b\u7bc0\u9ede\u200b\u4ee5\u5c07\u200b\u5176\u200b\u5305\u542b\u200b\u5728\u200b\u5167\u200b\u5b58\u6c60\u200b\u4e2d\u200b\uff0c\u200b\u7136\u5f8c\u7bc0\u200b\u9ede\u4e4b\u9593\u200b\u76f8\u4e92\u200b\u50b3\u64ad\u200b\uff0c\u200b\u6700\u7d42\u200b\u4ea4\u6613\u200b\u88ab\u200b\u5305\u542b\u200b\u5728\u200b\u4e00\u500b\u200b\u584a\u200b\u4e2d\u4e26\u200b\u88ab\u200b\u57f7\u884c\u200b\u3002 \u200b\u7136\u800c\u200b\uff0c<code>eth_call</code> \u200b\u5141\u8a31\u200b\u60a8\u200b\u5c07\u6578\u200b\u64da\u767c\u200b\u9001\u5230\u200b\u5408\u7d04\u200b\uff0c\u200b\u4e26\u5728\u200b\u4e0d\u200b\u63d0\u4ea4\u200b\u4ea4\u6613\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u67e5\u770b\u200b\u6703\u200b\u767c\u751f\u200b\u4ec0\u9ebc\u200b\u3002</p> <p>\u200b\u5728\u200bGeth\u200b\u5be6\u73fe\u200b\u4e2d\u200b\uff0c\u200b\u8abf\u7528\u200b\u7aef\u9ede\u200b\u5927\u81f4\u200b\u7d93\u904e\u200b\u4ee5\u4e0b\u200b\u6b65\u9a5f\u200b\uff1a</p> <ol> <li><code>eth_call</code> \u200b\u8acb\u6c42\u200b\u8f49\u63db\u200b\u70ba\u200b\u4f7f\u7528\u200b <code>eth</code> \u200b\u547d\u540d\u200b\u7a7a\u9593\u200b\u8abf\u7528\u200b <code>func (s *PublicBlockchainAPI) Call()</code> \u200b\u51fd\u6578\u200b</li> <li><code>Call()</code> \u200b\u88ab\u200b\u8ce6\u4e88\u200b\u4ea4\u6613\u200b\u53c3\u6578\u200b\u3001\u200b\u8981\u200b\u8abf\u7528\u200b\u7684\u200b\u584a\u200b\u548c\u200b\u53ef\u9078\u200b\u53c3\u6578\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u4fee\u6539\u200b\u8981\u200b\u8abf\u7528\u200b\u7684\u200b\u72c0\u614b\u200b\u3002    \u200b\u7136\u5f8c\u5b83\u200b\u8abf\u7528\u200b <code>DoCall()</code>\u3002</li> <li><code>DoCall()</code>    \u200b\u5c07\u53c3\u6578\u200b\u8f49\u63db\u200b\u70ba\u200b<code>ethtypes.message</code>\uff0c\u200b\u5be6\u4f8b\u5316\u200b EVM \u200b\u4e26\u200b\u4f7f\u7528\u200b<code>core.ApplyMessage</code>\u200b\u61c9\u7528\u200b\u6d88\u606f\u200b</li> <li><code>ApplyMessage()</code>    \u200b\u8abf\u7528\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b<code>TransitionDb()</code></li> <li><code>TransitionDb()</code> <code>Create()</code> \u200b\u662f\u200b\u4e00\u500b\u200b\u65b0\u5408\u7d04\u200b\u6216\u8005\u200b <code>Call()</code> \u200b\u662f\u200b\u4e00\u500b\u200b\u5408\u7d04\u200b</li> <li><code>evm.Call()</code>    \u200b\u904b\u884c\u200b\u89e3\u91cb\u5668\u200b evm.interpreter.Run() \u200b\u4f86\u200b\u57f7\u884c\u200b\u6d88\u606f\u200b\u3002    \u200b\u5982\u679c\u200b\u57f7\u884c\u200b\u5931\u6557\u200b\uff0c\u200b\u72c0\u614b\u5c07\u200b\u6062\u200b\u5fa9\u200b\u70ba\u57f7\u200b\u884c\u524d\u200b\u62cd\u651d\u200b\u7684\u200b\u5feb\u7167\u200b\u4e26\u200b\u6d88\u8017\u200b gas\u3002</li> <li><code>Run()</code>    \u200b\u57f7\u884c\u200b\u5faa\u74b0\u4ee5\u200b\u57f7\u884c\u200b\u64cd\u4f5c\u200b\u78bc\u200b\u3002</li> </ol>"},{"location":"evm/#db","title":"\u72c0\u614b\u200bDB","text":"<p>\u200b\u4f86\u200b\u81ea\u200b go-ethereum \u200b\u7684\u200b <code>StateDB</code> \u200b\u63a5\u53e3\u200b\u8868\u793a\u200b\u7528\u200b\u65bc\u200b\u5b8c\u6574\u200b\u72c0\u614b\u200b\u67e5\u8a62\u200b\u7684\u200b EVM \u200b\u6578\u64da\u5eab\u200b\u3002 EVM \u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u7531\u200b\u8a72\u200b\u63a5\u53e3\u200b\u555f\u7528\u200b\uff0c\u200b\u5728\u200b <code>x/evm</code> \u200b\u6a21\u584a\u200b\u4e2d\u200b\u7531\u200b <code>Keeper</code> \u200b\u5be6\u73fe\u200b\u3002 \u200b\u8a72\u200b\u63a5\u53e3\u200b\u7684\u200b\u5be6\u73fe\u200b\u4f7f\u200b Daodst EVM \u200b\u517c\u5bb9\u200b\u3002</p>"},{"location":"evm/#_8","title":"\u5171\u8b58\u200b\u5f15\u64ce","text":"<p>\u200b\u4f7f\u7528\u200b <code>x/evm</code> \u200b\u6a21\u584a\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u901a\u904e\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5340\u584a\u200b\u93c8\u200b\u63a5\u53e3\u200b (ABCI) \u200b\u8207\u200b Tendermint \u200b\u6838\u5fc3\u200b\u5171\u8b58\u200b\u5f15\u64ce\u200b\u4ea4\u4e92\u200b\u3002 \u200b\u8a72\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u548c\u200b Tendermint Core \u200b\u5171\u540c\u200b\u69cb\u6210\u200b\u4e86\u200b\u904b\u884c\u200b\u5b8c\u6574\u200b\u5340\u584a\u200b\u93c8\u4e26\u200b\u5c07\u696d\u52d9\u200b\u908f\u8f2f\u200b\u8207\u200b\u53bb\u200b\u4e2d\u5fc3\u5316\u200b\u6578\u64da\u200b\u5b58\u5132\u76f8\u200b\u7d50\u5408\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u3002</p> <p>\u200b\u63d0\u4ea4\u200b\u7d66\u200b <code>x/evm</code> \u200b\u6a21\u584a\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e8b\u52d9\u200b\u5728\u200b\u57f7\u884c\u200b\u548c\u200b\u66f4\u6539\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u72c0\u614b\u200b\u4e4b\u524d\u200b\u53c3\u8207\u200b\u6b64\u5171\u8b58\u200b\u904e\u7a0b\u200b\u3002 \u200b\u6211\u5011\u200b\u9f13\u52f5\u200b\u4e86\u89e3\u200b Tendermint \u200b\u5171\u8b58\u200b\u5f15\u64ce\u200b \u200b\u7684\u200b\u57fa\u790e\u200b\u77e5\u8b58\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u8a73\u7d30\u200b\u4e86\u89e3\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b.</p>"},{"location":"evm/#_9","title":"\u4ea4\u6613\u200b\u8a18\u9304","text":"<p>\u200b\u5728\u200b\u6bcf\u500b\u200b<code>x/evm</code>\u200b\u4ea4\u6613\u200b\u4e2d\u200b\uff0c\u200b\u7d50\u679c\u200b\u5305\u542b\u200b\u4f86\u200b\u81ea\u72c0\u200b\u614b\u6a5f\u200b\u57f7\u884c\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b<code>\u200b\u65e5\u8a8c\u200b</code>\uff0cJSON-RPC Web3 \u200b\u670d\u52d9\u5668\u200b\u4f7f\u7528\u200b\u9019\u4e9b\u200b\u65e5\u8a8c\u200b\u9032\u884c\u200b\u904e\u6ffe\u5668\u200b\u67e5\u8a62\u200b\u548c\u200b\u8655\u7406\u200b EVM \u200b\u639b\u9264\u200b\u3002</p> <p>tx \u200b\u65e5\u8a8c\u200b\u5728\u200b tx \u200b\u57f7\u200b\u884c\u671f\u200b\u9593\u200b\u5b58\u5132\u200b\u5728\u200b\u81e8\u6642\u200b\u5b58\u5132\u4e2d\u200b\uff0c\u200b\u7136\u5f8c\u5728\u200b\u4e8b\u52d9\u8655\u200b\u7406\u5f8c\u901a\u904e\u200b cosmos events \u200b\u767c\u51fa\u200b\u3002 \u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b gRPC \u200b\u548c\u200b JSON-RPC \u200b\u67e5\u8a62\u200b\u5b83\u5011\u200b\u3002</p>"},{"location":"evm/#block-bloom","title":"Block Bloom","text":"<p>\u200b\u5e03\u9686\u200b\u662f\u200b\u53ef\u7528\u200b\u65bc\u200b\u904e\u6ffe\u5668\u200b\u67e5\u8a62\u200b\u7684\u200b\u6bcf\u500b\u200b\u584a\u200b\u7684\u200b\u5e03\u9686\u200b\u904e\u6ffe\u5668\u200b\u503c\u200b\uff08\u200b\u4ee5\u5b57\u7bc0\u200b\u70ba\u200b\u55ae\u4f4d\u200b\uff09\u3002 \u200b\u584a\u200b bloom \u200b\u503c\u5b58\u200b\u5132\u5728\u200b\u77ac\u614b\u200b\u5b58\u5132\u4e2d\u200b\uff0c\u200b\u7136\u5f8c\u5728\u200b EndBlock \u200b\u8655\u7406\u200b\u671f\u9593\u200b\u901a\u904e\u200b cosmos \u200b\u4e8b\u4ef6\u200b\u767c\u51fa\u200b\u3002 \u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b gRPC \u200b\u548c\u200b JSON-RPC \u200b\u67e5\u8a62\u200b\u5b83\u5011\u200b\u3002</p> <p>:::\u200b\u63d0\u793a\u200b</p> <p>\ud83d\udc49 \u200b\u6ce8\u610f\u200b: \u200b\u7531\u200b\u65bc\u200b\u5b83\u5011\u200b\u4e0d\u200b\u5b58\u5132\u200b\u5728\u200b\u72c0\u614b\u200b\u4e2d\u200b\uff0c\u200b\u4e8b\u52d9\u200b\u65e5\u8a8c\u200b\u548c\u200b\u584a\u200b\u7dbb\u200b\u653e\u5728\u200b\u5347\u7d1a\u200b\u5f8c\u200b\u4e0d\u6703\u200b\u6301\u4e45\u200b\u5316\u200b\u3002 \u200b\u7528\u6236\u200b\u5fc5\u9808\u200b\u5728\u200b\u5347\u7d1a\u200b\u5f8c\u200b\u4f7f\u7528\u200b\u5b58\u6a94\u200b\u7bc0\u9ede\u200b\u624d\u80fd\u200b\u7372\u5f97\u200b\u907a\u7559\u93c8\u200b\u4e8b\u4ef6\u200b\u3002 :::</p>"},{"location":"evm/#_10","title":"\u72c0\u614b","text":"<p>\u200b\u672c\u7bc0\u200b\u6982\u8ff0\u200b\u5b58\u5132\u200b\u5728\u200b <code>x/evm</code> \u200b\u6a21\u584a\u200b\u72c0\u614b\u200b\u4e2d\u200b\u7684\u200b\u5c0d\u8c61\u200b\uff0c\u200b\u6e90\u81ea\u200b go-ethereum <code>StateDB</code> \u200b\u63a5\u53e3\u200b\u7684\u200b\u529f\u80fd\u200b\uff0c\u200b\u53ca\u5176\u200b\u901a\u904e\u200b Keeper \u200b\u7684\u200b\u5be6\u73fe\u200b\u4ee5\u53ca\u200b\u5275\u4e16\u6642\u200b\u7684\u200b\u72c0\u614b\u200b\u5be6\u73fe\u200b\u3002</p>"},{"location":"evm/#_11","title":"\u72c0\u614b\u200b\u5c0d\u8c61","text":"<p><code>x/evm</code> \u200b\u6a21\u584a\u200b\u4fdd\u6301\u200b\u4ee5\u4e0b\u200b\u72c0\u614b\u200b\u7684\u200b\u5c0d\u8c61\u200b\uff1a</p>"},{"location":"evm/#_12","title":"\u72c0\u614b","text":"\u8aaa\u660e\u200b Key Value Store Code \u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u5b57\u200b\u7bc0\u78bc\u200b <code>[]byte{1} + []byte(address)</code> <code>[]byte{code}</code> KV Storage \u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u5b58\u5132\u200b <code>[]byte{2} + [32]byte{key}</code> <code>[32]byte(value)</code> KV Block Bloom Block bloom filter\uff0c\u200b\u7528\u200b\u65bc\u200b\u7d2f\u52a0\u200b\u7576\u524d\u200b\u584a\u200b\u7684\u200bbloom filter\uff0c\u200b\u767c\u200b\u9001\u5230\u200bend blocker\u200b\u7684\u200b\u4e8b\u4ef6\u200b. <code>[]byte{1} + []byte(tx.Hash)</code> <code>protobuf([]Log)</code> Transient Tx Index \u200b\u7576\u524d\u200b\u5340\u584a\u200b\u4e2d\u200b\u7576\u524d\u200b\u4ea4\u6613\u200b\u7684\u200b\u7d22\u5f15\u200b\u3002 <code>[]byte{2}</code> <code>BigEndian(uint64)</code> Transient Log Size \u200b\u5230\u200b\u76ee\u524d\u200b\u70ba\u6b62\u200b\u5728\u200b\u7576\u524d\u200b\u584a\u200b\u4e2d\u200b\u767c\u51fa\u200b\u7684\u200b\u65e5\u8a8c\u200b\u6578\u200b\u3002\u200b\u7528\u200b\u65bc\u200b\u6c7a\u5b9a\u5f8c\u7e8c\u200b\u65e5\u8a8c\u200b\u7684\u200b\u65e5\u8a8c\u200b\u7d22\u5f15\u200b. <code>[]byte{3}</code> <code>BigEndian(uint64)</code> Transient Gas Used \u200b\u7576\u524d\u200bcosmos-sdk tx\u200b\u7684\u200bethereum\u200b\u6d88\u606f\u200b\u4f7f\u7528\u200b\u7684\u200bgas\u200b\u91cf\u200b\uff0c\u200b\u7576\u200bcosmos-sdk tx\u200b\u5305\u542b\u200b\u591a\u689d\u200bethereum\u200b\u6d88\u606f\u200b\u6642\u200b\u9700\u8981\u200b\u3002 <code>[]byte{4}</code> <code>BigEndian(uint64)</code> Transient"},{"location":"evm/#db_1","title":"\u72c0\u614b\u200bDB","text":"<p><code>StateDB</code> \u200b\u63a5\u53e3\u200b\u7531\u200b <code>x/evm/statedb</code> \u200b\u6a21\u584a\u200b\u4e2d\u200b\u7684\u200b <code>StateDB</code> \u200b\u5be6\u73fe\u200b\uff0c\u200b\u4ee3\u8868\u200b\u4e00\u500b\u200b EVM \u200b\u6578\u64da\u5eab\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u5408\u7d04\u200b\u548c\u200b\u8cec\u6236\u200b\u7684\u200b\u5b8c\u6574\u200b\u72c0\u614b\u200b\u67e5\u8a62\u200b\u3002 \u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u200b\u5354\u8b70\u200b\u4e2d\u200b\uff0c<code>StateDB</code> \u200b\u7528\u200b\u65bc\u200b\u5b58\u5132\u200b IAVL \u200b\u6a39\u4e2d\u200b\u7684\u200b\u4efb\u4f55\u200b\u5167\u5bb9\u200b\uff0c\u200b\u4e26\u8ca0\u8cac\u200b\u7de9\u5b58\u200b\u548c\u200b\u5b58\u5132\u200b\u5d4c\u5957\u200b\u72c0\u614b\u200b\u3002</p> <pre><code>// github.com/ethereum/go-ethereum/core/vm/interface.go\ntype StateDB interface {\n CreateAccount(common.Address)\n\n SubBalance(common.Address, *big.Int)\n AddBalance(common.Address, *big.Int)\n GetBalance(common.Address) *big.Int\n\n GetNonce(common.Address) uint64\n SetNonce(common.Address, uint64)\n\n GetCodeHash(common.Address) common.Hash\n GetCode(common.Address) []byte\n SetCode(common.Address, []byte)\n GetCodeSize(common.Address) int\n\n AddRefund(uint64)\n SubRefund(uint64)\n GetRefund() uint64\n\n GetCommittedState(common.Address, common.Hash) common.Hash\n GetState(common.Address, common.Hash) common.Hash\n SetState(common.Address, common.Hash, common.Hash)\n\n Suicide(common.Address) bool\n HasSuicided(common.Address) bool\n\n // Exist reports whether the given account exists in state.\n // Notably this should also return true for suicided accounts.\n Exist(common.Address) bool\n // Empty returns whether the given account is empty. Empty\n // is defined according to EIP161 (balance = nonce = code = 0).\n Empty(common.Address) bool\n\n PrepareAccessList(sender common.Address, dest *common.Address, precompiles []common.Address, txAccesses types.AccessList)\n AddressInAccessList(addr common.Address) bool\n SlotInAccessList(addr common.Address, slot common.Hash) (addressOk bool, slotOk bool)\n // AddAddressToAccessList adds the given address to the access list. This operation is safe to perform\n // even if the feature/fork is not active yet\n AddAddressToAccessList(addr common.Address)\n // AddSlotToAccessList adds the given (address,slot) to the access list. This operation is safe to perform\n // even if the feature/fork is not active yet\n AddSlotToAccessList(addr common.Address, slot common.Hash)\n\n RevertToSnapshot(int)\n Snapshot() int\n\n AddLog(*types.Log)\n AddPreimage(common.Hash, []byte)\n\n ForEachStorage(common.Address, func(common.Hash, common.Hash) bool) error\n}\n</code></pre> <p>The <code>StateDB</code> in the <code>x/evm</code> provides the following functionalities:</p>"},{"location":"evm/#crud","title":"\u4ee5\u592a\u200b\u574a\u200b\u8cec\u6236\u200b\u7684\u200b CRUD","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5f9e\u200b\u63d0\u4f9b\u200b\u7684\u200b\u5730\u5740\u200b\u5275\u5efa\u200b <code>EthAccount</code> \u200b\u5be6\u4f8b\u200b\uff0c\u200b\u4e26\u200b\u4f7f\u7528\u200b <code>createAccount()</code> \u200b\u5c07\u503c\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u5b58\u5132\u200b\u5728\u200b <code>AccountKeeper</code> \u200b\u4e0a\u200b\u3002 \u200b\u5982\u679c\u200b\u5177\u6709\u200b\u7d66\u5b9a\u200b\u5730\u5740\u200b\u7684\u200b\u5e33\u6236\u200b\u5df2\u7d93\u200b\u5b58\u5728\u200b\uff0c\u200b\u6b64\u51fd\u6578\u200b\u9084\u6703\u200b\u91cd\u7f6e\u200b\u8207\u200b\u8a72\u200b\u5730\u5740\u200b\u95dc\u806f\u200b\u7684\u200b\u4efb\u4f55\u200b\u9810\u5148\u200b\u5b58\u5728\u200b\u7684\u200b\u4ee3\u78bc\u200b\u548c\u200b\u5b58\u5132\u200b\u3002</p> <p>\u200b\u4e00\u500b\u200b\u8cec\u6236\u200b\u7684\u200b\u8ca8\u5e63\u200b\u9918\u984d\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b <code>BankKeeper</code> \u200b\u9032\u884c\u200b\u7ba1\u7406\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>GetBalance()</code> \u200b\u8b80\u200b\u53d6\u4e26\u200b\u4f7f\u7528\u200b <code>AddBalance()</code> \u200b\u548c\u200b <code>SubBalance()</code> \u200b\u9032\u884c\u200b\u66f4\u65b0\u200b\u3002</p> <ul> <li><code>GetBalance()</code> \u200b\u8fd4\u56de\u200b\u6240\u200b\u63d0\u4f9b\u200b\u5730\u5740\u200b\u7684\u200b EVM \u200b\u8ca8\u5e63\u200b\u9918\u984d\u200b\u3002   \u200b\u8ca8\u5e63\u200b\u540d\u7a31\u200b\u662f\u200b\u5f9e\u200b\u6a21\u584a\u200b\u53c3\u6578\u200b\u4e2d\u200b\u7372\u53d6\u200b\u7684\u200b\u3002</li> <li><code>AddBalance()</code> \u200b\u901a\u904e\u200b\u9444\u9020\u200b\u65b0\u8ca8\u5e63\u200b\u4e26\u5c07\u200b\u5176\u200b\u8f49\u79fb\u200b\u5230\u200b\u5730\u5740\u200b\u4f86\u200b\u5c07\u7d66\u200b\u5b9a\u91d1\u200b\u984d\u200b\u6dfb\u52a0\u200b\u5230\u200b\u5730\u5740\u200b\u8ca8\u5e63\u200b\u9918\u984d\u200b\u4e2d\u200b\u3002   \u200b\u8ca8\u5e63\u200b\u540d\u7a31\u200b\u662f\u200b\u5f9e\u200b\u6a21\u584a\u200b\u53c3\u6578\u200b\u4e2d\u200b\u7372\u53d6\u200b\u7684\u200b\u3002</li> <li><code>SubBalance()</code> \u200b\u901a\u904e\u200b\u5c07\u8ca8\u5e63\u200b\u8f49\u79fb\u200b\u5230\u200b\u8a17\u200b\u7ba1\u200b\u8cec\u6236\u200b\u7136\u5f8c\u92b7\u6bc0\u200b\u5b83\u5011\u200b\u4f86\u200b\u5f9e\u200b\u5730\u5740\u200b\u9918\u984d\u200b\u4e2d\u200b\u6e1b\u53bb\u200b\u7d66\u5b9a\u200b\u7684\u200b\u91d1\u984d\u200b\u3002   \u200b\u8ca8\u5e63\u200b\u540d\u7a31\u200b\u662f\u200b\u5f9e\u200b\u6a21\u584a\u200b\u53c3\u6578\u200b\u4e2d\u200b\u7372\u53d6\u200b\u7684\u200b\u3002   \u200b\u5982\u679c\u200b\u91d1\u984d\u200b\u70ba\u8ca0\u200b\u6216\u200b\u7528\u6236\u200b\u6c92\u6709\u200b\u8db3\u5920\u200b\u7684\u200b\u8cc7\u91d1\u200b\u9032\u884c\u200b\u8f49\u8cec\u200b\uff0c\u200b\u6b64\u51fd\u6578\u200b\u5c07\u57f7\u200b\u884c\u7a7a\u200b\u64cd\u4f5c\u200b\u3002</li> </ul> <p>\u200b\u96a8\u6a5f\u6578\u200b\uff08\u200b\u6216\u200b\u4ea4\u6613\u200b\u5e8f\u5217\u200b\uff09\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u8eab\u4efd\u200b\u9a57\u8b49\u200b\u6a21\u584a\u200b<code>AccountKeeper</code>\u200b\u5f9e\u200b\u8cec\u6236\u200b <code>Sequence</code> \u200b\u4e2d\u200b\u7372\u53d6\u200b\u3002</p> <ul> <li><code>GetNonce()</code> \u200b\u6aa2\u7d22\u200b\u5177\u6709\u200b\u7d66\u5b9a\u200b\u5730\u5740\u200b\u7684\u200b\u5e33\u6236\u4e26\u200b\u8fd4\u56de\u200b tx \u200b\u5e8f\u5217\u200b\uff08\u200b\u5373\u200b\u96a8\u6a5f\u6578\u200b\uff09\u3002   \u200b\u5982\u679c\u200b\u627e\u200b\u4e0d\u5230\u200b\u8a72\u200b\u5e33\u6236\u200b\uff0c\u200b\u8a72\u200b\u51fd\u6578\u200b\u5c07\u57f7\u200b\u884c\u7a7a\u200b\u64cd\u4f5c\u200b\u3002</li> <li><code>SetNonce()</code> \u200b\u5c07\u7d66\u5b9a\u200b\u7684\u200b\u96a8\u6a5f\u6578\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u5730\u5740\u200b\u5e33\u6236\u200b\u7684\u200b\u5e8f\u5217\u200b\u3002   \u200b\u5982\u679c\u200b\u8a72\u200b\u5e33\u6236\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u5c07\u5f9e\u200b\u8a72\u200b\u5730\u5740\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u65b0\u200b\u5e33\u6236\u200b\u3002</li> </ul> <p>\u200b\u5305\u542b\u200b\u4efb\u610f\u200b\u5408\u7d04\u200b\u908f\u8f2f\u200b\u7684\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u5b57\u200b\u7bc0\u78bc\u200b\u5b58\u5132\u200b\u5728\u200b <code>EVMKeeper</code> \u200b\u4e0a\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>GetCodeHash()</code> , <code>GetCode()</code> \u200b\u548c\u200b <code>GetCodeSize()</code> \u200b\u67e5\u8a62\u200b\uff0c\u200b\u4e26\u200b\u4f7f\u7528\u200b <code>SetCode()</code> \u200b\u66f4\u65b0\u200b\u3002</p> <ul> <li><code>GetCodeHash()</code> \u200b\u5f9e\u5b58\u200b\u5132\u4e2d\u200b\u7372\u53d6\u200b\u5e33\u6236\u4e26\u200b\u8fd4\u56de\u200b\u5176\u4ee3\u78bc\u200b\u54c8\u5e0c\u200b\u3002   \u200b\u5982\u679c\u200b\u8cec\u6236\u200b\u4e0d\u200b\u5b58\u5728\u200b\u6216\u200b\u4e0d\u662f\u200b EthAccount \u200b\u985e\u578b\u200b\uff0c\u200b\u5247\u200b\u8fd4\u56de\u200b\u7a7a\u4ee3\u78bc\u200b\u54c8\u5e0c\u200b\u503c\u200b\u3002</li> <li><code>GetCode()</code> \u200b\u8fd4\u56de\u200b\u8207\u200b\u7d66\u5b9a\u200b\u5730\u5740\u200b\u95dc\u806f\u200b\u7684\u200b\u4ee3\u78bc\u200b\u5b57\u7bc0\u200b\u6578\u7d44\u200b\u3002   \u200b\u5982\u679c\u200b\u4f86\u200b\u81ea\u200b\u5e33\u6236\u200b\u7684\u200b\u4ee3\u78bc\u200b\u54c8\u5e0c\u200b\u70ba\u7a7a\u200b\uff0c\u200b\u5247\u6b64\u200b\u51fd\u6578\u200b\u8fd4\u56de\u200b nil\u3002</li> <li><code>SetCode()</code> \u200b\u5c07\u4ee3\u78bc\u200b\u5b57\u200b\u7bc0\u6578\u200b\u7d44\u5b58\u200b\u5132\u5230\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b KVStore\uff0c\u200b\u4e26\u5c07\u4ee3\u78bc\u200b\u54c8\u5e0c\u200b\u8a2d\u7f6e\u200b\u5230\u200b\u7d66\u5b9a\u200b\u7684\u200b\u5e33\u6236\u200b\u3002   \u200b\u5982\u679c\u200b\u4ee3\u78bc\u200b\u70ba\u200b\u7a7a\u200b\uff0c\u200b\u5247\u5c07\u200b\u5f9e\u200b\u5b58\u5132\u4e2d\u200b\u522a\u9664\u200b\u8a72\u4ee3\u78bc\u200b\u3002</li> <li><code>GetCodeSize()</code> \u200b\u8fd4\u56de\u200b\u8207\u200b\u6b64\u200b\u5c0d\u8c61\u200b\u95dc\u806f\u200b\u7684\u200b\u5408\u7d04\u4ee3\u78bc\u200b\u7684\u200b\u5927\u5c0f\u200b\uff0c\u200b\u5982\u679c\u200b\u6c92\u6709\u5247\u200b\u8fd4\u56de\u200b\u96f6\u200b\u3002</li> </ul> <p>\u200b\u9700\u8981\u200b\u8ddf\u8e2a\u200b\u9000\u9084\u200b\u7684\u200b\u6c23\u9ad4\u200b\u4e26\u5c07\u200b\u5176\u200b\u5b58\u5132\u200b\u5728\u200b\u55ae\u7368\u200b\u7684\u200b\u8b8a\u91cf\u200b\u4e2d\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u5728\u200b EVM \u200b\u57f7\u884c\u200b\u5b8c\u6210\u200b\u5f8c\u200b\u5c07\u5176\u200b\u5f9e\u200b\u6c23\u9ad4\u200b\u4f7f\u7528\u200b\u503c\u4e2d\u200b\u6e1b\u53bb\u200b/\u200b\u6dfb\u52a0\u200b\u5230\u200b\u6c23\u9ad4\u200b\u4f7f\u7528\u200b\u503c\u4e2d\u200b\u3002\u200b\u9000\u6b3e\u200b\u503c\u200b\u5728\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u548c\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u7d50\u675f\u200b\u6642\u200b\u88ab\u200b\u6e05\u9664\u200b\u3002</p> <ul> <li><code>AddRefund()</code> \u200b\u5c07\u7d66\u5b9a\u200b\u7684\u200b\u6c23\u9ad4\u91cf\u200b\u6dfb\u52a0\u200b\u5230\u200b\u5167\u5b58\u200b\u4e2d\u200b\u7684\u200b\u9000\u6b3e\u200b\u503c\u200b\u3002</li> <li><code>SubRefund()</code> \u200b\u5f9e\u200b\u5167\u5b58\u200b\u4e2d\u200b\u7684\u200b\u9000\u6b3e\u200b\u503c\u4e2d\u200b\u6e1b\u53bb\u200b\u7d66\u5b9a\u200b\u7684\u200b\u6c23\u9ad4\u91cf\u200b\u3002   \u200b\u5982\u679c\u200b gas \u200b\u91cf\u200b\u5927\u200b\u65bc\u200b\u7576\u524d\u200b\u9000\u6b3e\u200b\uff0c\u200b\u6b64\u51fd\u200b\u6578\u5c07\u200b panic\u3002</li> <li><code>GetRefund()</code> \u200b\u8fd4\u56de\u200b tx \u200b\u57f7\u884c\u200b\u5b8c\u6210\u200b\u5f8c\u200b\u53ef\u7528\u200b\u65bc\u200b\u8fd4\u56de\u200b\u7684\u200b\u6c23\u9ad4\u91cf\u200b\u3002   \u200b\u8a72\u503c\u200b\u5728\u200b\u6bcf\u6b21\u200b\u4ea4\u6613\u200b\u6642\u200b\u91cd\u7f6e\u200b\u70ba\u200b 0\u3002</li> </ul> <p>\u200b\u72c0\u614b\u200b\u5b58\u5132\u200b\u5728\u200b<code>EVMKeeper</code>\u200b\u4e0a\u200b\u3002 \u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>GetCommittedState()</code>\u3001<code>GetState()</code> \u200b\u67e5\u8a62\u4e26\u200b\u4f7f\u7528\u200b <code>SetState()</code> \u200b\u66f4\u65b0\u200b\u3002</p> <ul> <li><code>GetCommittedState()</code> \u200b\u8fd4\u56de\u200b\u5b58\u5132\u200b\u4e2d\u70ba\u200b\u7d66\u5b9a\u9375\u200b\u54c8\u5e0c\u200b\u8a2d\u7f6e\u200b\u7684\u200b\u503c\u200b\u3002   \u200b\u5982\u679c\u200b\u5bc6\u200b\u9470\u200b\u672a\u200b\u8a3b\u200b\u518a\u200b\uff0c\u200b\u5247\u6b64\u200b\u51fd\u6578\u200b\u8fd4\u56de\u200b\u7a7a\u6563\u5217\u200b\u3002</li> <li><code>GetState()</code> \u200b\u8fd4\u56de\u200b\u7d66\u5b9a\u9375\u200b\u54c8\u5e0c\u200b\u7684\u200b\u5167\u5b58\u200b\u4e2d\u81df\u200b\u72c0\u614b\u200b\uff0c   \u200b\u5982\u679c\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u5247\u5f9e\u200b KVStore \u200b\u52a0\u8f09\u200b\u63d0\u4ea4\u200b\u7684\u200b\u503c\u200b\u3002</li> <li><code>SetState()</code> \u200b\u5c07\u7d66\u5b9a\u200b\u7684\u200b\u54c8\u5e0c\u200b\u503c\u200b\uff08\u200b\u9375\u200b\u3001\u200b\u503c\u200b\uff09\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u72c0\u614b\u200b\u3002   \u200b\u5982\u679c\u200b\u503c\u6563\u200b\u5217\u70ba\u200b\u7a7a\u200b\uff0c\u200b\u5247\u6b64\u200b\u51fd\u6578\u200b\u5f9e\u200b\u72c0\u614b\u200b\u4e2d\u200b\u522a\u200b\u9664\u9375\u200b\uff0c   \u200b\u65b0\u503c\u200b\u5148\u200b\u4fdd\u6301\u200b\u81df\u72c0\u614b\u200b\uff0c\u200b\u6700\u200b\u5f8c\u200b\u63d0\u4ea4\u200b\u7d66\u200bKVStore\u3002</li> </ul> <p>\u200b\u5e33\u6236\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u81ea\u6bba\u200b\u72c0\u614b\u200b\u3002 \u200b\u7576\u5408\u7d04\u200b\u81ea\u6bba\u200b\u6642\u200b\uff0c\u200b\u8cec\u6236\u200b\u88ab\u200b\u6a19\u8a18\u200b\u70ba\u200b\u81ea\u6bba\u200b\uff0c\u200b\u7576\u63d0\u200b\u4ea4\u4ee3\u200b\u78bc\u6642\u200b\uff0c\u200b\u5b58\u5132\u200b\u548c\u200b\u8cec\u6236\u200b\u88ab\u200b\u522a\u9664\u200b\uff08\u200b\u5f9e\u4e0b\u200b\u4e00\u500b\u200b\u584a\u200b\u958b\u59cb\u200b\uff09\u3002</p> <ul> <li><code>Suicide()</code> \u200b\u5c07\u7d66\u5b9a\u200b\u5e33\u6236\u200b\u6a19\u8a18\u200b\u70ba\u200b\u5df2\u200b\u81ea\u6bba\u4e26\u200b\u6e05\u9664\u200b EVM \u200b\u4ee3\u5e63\u200b\u7684\u200b\u5e33\u6236\u200b\u9918\u984d\u200b\u3002</li> <li><code>HasSuicided()</code> \u200b\u67e5\u8a62\u200b\u5167\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6a19\u8a8c\u200b\u4ee5\u200b\u6aa2\u67e5\u200b\u5e33\u6236\u200b\u662f\u5426\u200b\u5df2\u200b\u5728\u200b\u7576\u524d\u200b\u4ea4\u6613\u200b\u4e2d\u200b\u88ab\u200b\u6a19\u8a18\u200b\u70ba\u200b\u81ea\u6bba\u200b\u3002   \u200b\u88ab\u200b\u81ea\u6bba\u200b\u7684\u200b\u8cec\u6236\u5c07\u200b\u5728\u200b\u67e5\u8a62\u200b\u671f\u9593\u200b\u8fd4\u56de\u200b\u70ba\u200b\u975e\u200b\u96f6\u200b\uff0c\u200b\u4e26\u5728\u200b\u63d0\u4ea4\u200b\u584a\u200b\u5f8c\u200b\u201c\u200b\u6e05\u9664\u200b\u201d\u3002</li> </ul> <p>\u200b\u8981\u200b\u6aa2\u67e5\u200b\u5e33\u6236\u200b\u662f\u5426\u200b\u5b58\u5728\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b <code>Exist()</code> \u200b\u548c\u200b <code>Empty()</code>\u3002</p> <ul> <li>\u200b\u5982\u679c\u200b\u7d66\u5b9a\u200b\u5e33\u6236\u200b\u5b58\u5728\u200b\u65bc\u200b\u5b58\u5132\u4e2d\u200b\u6216\u200b\u5df2\u200b\u88ab\u200b\u6a19\u8a18\u200b\u70ba\u200b\u5df2\u200b\u81ea\u6bba\u200b\uff0c\u200b\u5247\u200b <code>Exist()</code> \u200b\u8fd4\u56de\u200b true\u3002</li> <li>\u200b\u5982\u679c\u200b\u5730\u5740\u200b\u6eff\u8db3\u200b\u4ee5\u4e0b\u200b\u689d\u4ef6\u200b\uff0c<code>Empty()</code> \u200b\u8fd4\u56de\u200b true\uff1a<ul> <li>nonce\u200b\u70ba\u200b 0</li> <li>evm \u200b\u8ca8\u5e63\u200b \u200b\u7684\u200b\u9918\u984d\u200b\u70ba\u200b 0</li> <li>\u200b\u5e33\u6236\u200bcode hash\u200b\u70ba\u7a7a\u200b</li> </ul> </li> </ul>"},{"location":"evm/#eip2930-functionality","title":"EIP2930 functionality","text":"<p>\u200b\u652f\u6301\u200b\u5305\u542b\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b\u3001\u200b\u4ea4\u6613\u200b\u8a08\u5283\u200b\u8a2a\u554f\u200b\u7684\u200b\u5730\u5740\u200b\u548c\u200b\u5b58\u5132\u5bc6\u200b\u9470\u200b\u5217\u8868\u200b\u7684\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u3002 \u200b\u8a2a\u554f\u200b\u5217\u8868\u200b\u72c0\u614b\u200b\u4fdd\u5b58\u200b\u5728\u200b\u5167\u5b58\u200b\u4e2d\u200b\uff0c\u200b\u4e26\u5728\u200b\u4e8b\u52d9\u200b\u63d0\u4ea4\u200b\u5f8c\u200b\u4e1f\u68c4\u200b\u3002</p> <ul> <li><code>PrepareAccessList()</code> \u200b\u8655\u7406\u200b\u57f7\u884c\u95dc\u200b\u65bc\u200b EIP-2929 \u200b\u548c\u200b EIP-2930 \u200b\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u7684\u200b\u6e96\u5099\u200b\u6b65\u9a5f\u200b\u3002   \u200b\u50c5\u7576\u200b Yolov3/Berlin/2929+2930 \u200b\u9069\u7528\u200b\u65bc\u200b\u7576\u524d\u200b\u7de8\u865f\u200b\u6642\u200b\u624d\u200b\u61c9\u200b\u8abf\u7528\u200b\u6b64\u200b\u65b9\u6cd5\u200b\u3002<ul> <li>\u200b\u5c07\u767c\u4ef6\u200b\u4eba\u200b\u6dfb\u52a0\u200b\u5230\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b (EIP-2929)</li> <li>\u200b\u5c07\u200b\u76ee\u7684\u5730\u200b\u6dfb\u52a0\u200b\u5230\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b (EIP-2929)</li> <li>\u200b\u5c07\u9810\u200b\u7de8\u8b6f\u200b\u6dfb\u52a0\u200b\u5230\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b (EIP-2929)</li> <li>\u200b\u6dfb\u52a0\u200b\u53ef\u9078\u200b\u7684\u200b tx \u200b\u8a2a\u554f\u200b\u5217\u8868\u200b\u7684\u200b\u5167\u5bb9\u200b (EIP-2930)</li> </ul> </li> <li>\u200b\u5982\u679c\u200b\u5730\u5740\u200b\u5df2\u200b\u8a3b\u200b\u518a\u200b\uff0c<code>AddressInAccessList()</code> \u200b\u8fd4\u56de\u200b true\u3002</li> <li><code>SlotInAccessList()</code> \u200b\u6aa2\u67e5\u200b\u5730\u5740\u200b\u548c\u200b\u63d2\u69fd\u200b\u662f\u5426\u200b\u5df2\u200b\u8a3b\u200b\u518a\u200b\u3002</li> <li><code>AddAddressToAccessList()</code> \u200b\u5c07\u7d66\u5b9a\u200b\u5730\u5740\u200b\u6dfb\u52a0\u200b\u5230\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b\u3002   \u200b\u5982\u679c\u200b\u8a72\u200b\u5730\u5740\u200b\u5df2\u7d93\u200b\u5728\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b\u4e2d\u200b\uff0c\u200b\u5247\u6b64\u200b\u51fd\u6578\u57f7\u200b\u884c\u7a7a\u200b\u64cd\u4f5c\u200b\u3002</li> <li><code>AddSlotToAccessList()</code> \u200b\u5c07\u7d66\u5b9a\u200b\u7684\u200b\uff08\u200b\u5730\u5740\u200b\u3001\u200b\u69fd\u200b\uff09\u200b\u6dfb\u52a0\u200b\u5230\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b\u4e2d\u200b\u3002   \u200b\u5982\u679c\u200b\u5730\u5740\u200b\u548c\u200b\u63d2\u69fd\u200b\u5df2\u7d93\u200b\u5728\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b\u4e2d\u200b\uff0c\u200b\u5247\u6b64\u200b\u51fd\u6578\u57f7\u200b\u884c\u7a7a\u200b\u64cd\u4f5c\u200b\u3002</li> </ul>"},{"location":"evm/#_13","title":"\u5feb\u7167\u200b\u72c0\u614b\u200b\u548c\u200b\u6062\u200b\u5fa9\u200b\u529f\u80fd","text":"<p>EVM \u200b\u4f7f\u7528\u200b\u72c0\u614b\u200b\u6062\u200b\u5fa9\u200b\u7570\u5e38\u4f86\u200b\u8655\u7406\u200b\u932f\u8aa4\u200b\u3002 \u200b\u9019\u6a23\u200b\u7684\u200b\u7570\u5e38\u5c07\u200b\u64a4\u6d88\u200b\u5c0d\u200b\u7576\u524d\u200b\u8abf\u7528\u200b\uff08\u200b\u53ca\u5176\u200b\u6240\u6709\u200b\u5b50\u200b\u8abf\u7528\u200b\uff09\u200b\u4e2d\u200b\u7684\u200b\u72c0\u614b\u200b\u6240\u200b\u505a\u200b\u7684\u200b\u6240\u6709\u200b\u66f4\u6539\u200b\uff0c\u200b\u4e26\u4e14\u200b\u8abf\u7528\u8005\u200b\u53ef\u4ee5\u200b\u8655\u7406\u200b\u932f\u8aa4\u200b\u4e26\u4e14\u200b\u4e0d\u6703\u200b\u50b3\u64ad\u200b\u3002 \u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>Snapshot()</code> \u200b\u901a\u904e\u200b\u4fee\u8a02\u200b\u8b58\u5225\u200b\u7576\u524d\u200b\u72c0\u614b\u200b\uff0c\u200b\u4e26\u200b\u4f7f\u7528\u200b <code>RevertToSnapshot()</code> \u200b\u5c07\u72c0\u614b\u200b\u6062\u200b\u5fa9\u200b\u5230\u200b\u7d66\u5b9a\u200b\u4fee\u8a02\u200b\u4ee5\u200b\u652f\u6301\u200b\u6b64\u200b\u529f\u80fd\u200b\u3002 - <code>Snapshot()</code> \u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u65b0\u200b\u5feb\u7167\u200b\u4e26\u200b\u8fd4\u56de\u200b\u6a19\u8b58\u7b26\u200b\u3002 - <code>RevertToSnapshot(rev)</code> \u200b\u64a4\u6d88\u200b\u6240\u6709\u200b\u4fee\u6539\u200b\uff0c\u200b\u76f4\u81f3\u200b\u6a19\u8b58\u200b\u70ba\u200b <code>rev</code> \u200b\u7684\u200b\u5feb\u7167\u200b\u3002</p> <p>Daodst \u200b\u6539\u7de8\u200b\u4e86\u200b go-ethereum journal implementation \u200b\u4f86\u200b\u652f\u6301\u200b\u9019\u4e00\u9ede\u200b\uff0c\u200b\u5b83\u200b\u4f7f\u7528\u200b\u65e5\u8a8c\u200b\u5217\u8868\u200b\u70ba\u200b\u4e86\u200b\u8a18\u9304\u200b\u5230\u200b\u76ee\u524d\u200b\u70ba\u6b62\u200b\u5b8c\u6210\u200b\u7684\u200b\u6240\u6709\u200b\u72c0\u614b\u200b\u4fee\u6539\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5feb\u7167\u200b\u7531\u65e5\u8a8c\u200b\u5217\u8868\u200b\u4e2d\u200b\u7684\u200b\u552f\u4e00\u200b ID \u200b\u548c\u200b\u7d22\u5f15\u200b\u7d44\u6210\u200b\uff0c\u200b\u8981\u200b\u6062\u200b\u5fa9\u200b\u70ba\u200b\u5feb\u7167\u200b\uff0c\u200b\u5b83\u200b\u53ea\u662f\u200b\u4ee5\u200b\u76f8\u53cd\u200b\u7684\u200b\u9806\u5e8f\u200b\u5728\u200b\u5feb\u7167\u200b\u7d22\u5f15\u200b\u4e4b\u200b\u5f8c\u200b\u64a4\u6d88\u200b\u65e5\u8a8c\u200b\u65e5\u8a8c\u200b\u3002</p>"},{"location":"evm/#_14","title":"\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u65e5\u200b\u8a8c","text":"<p>\u200b\u4f7f\u7528\u200b <code>AddLog()</code>\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5c07\u7d66\u5b9a\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b <code>Log</code> \u200b\u9644\u52a0\u200b\u5230\u200b\u8207\u200b\u4fdd\u5b58\u200b\u5728\u200b\u7576\u524d\u200b\u72c0\u614b\u200b\u7684\u200b\u4ea4\u6613\u200b\u54c8\u5e0c\u200b\u95dc\u806f\u200b\u7684\u200b\u65e5\u8a8c\u200b\u5217\u8868\u200b\u4e2d\u200b\u3002 \u200b\u8a72\u200b\u51fd\u6578\u200b\u9084\u5728\u200b\u8a2d\u7f6e\u200b\u8981\u200b\u5b58\u5132\u200b\u7684\u200b\u65e5\u8a8c\u200b\u4e4b\u524d\u200b\u586b\u5beb\u200b tx hash\u3001block hash\u3001tx index \u200b\u548c\u200b log index \u200b\u5b57\u200b\u6bb5\u200b\u3002</p>"},{"location":"evm/#keeper","title":"Keeper","text":"<p>EVM \u200b\u6a21\u584a\u200b<code>Keeper</code>\u200b\u6388\u4e88\u200b\u5c0d\u200b EVM \u200b\u6a21\u584a\u200b\u72c0\u614b\u200b\u7684\u200b\u8a2a\u554f\u200b\u6b0a\u9650\u200b\uff0c\u200b\u4e26\u5be6\u73fe\u200b <code>statedb.Keeper</code> \u200b\u63a5\u53e3\u200b\u4ee5\u200b\u652f\u6301\u200b <code>StateDB</code> \u200b\u5be6\u73fe\u200b\u3002 Keeper \u200b\u5305\u542b\u200b\u4e00\u500b\u200b\u5b58\u5132\u5bc6\u200b\u9470\u200b\uff0c\u200b\u5141\u8a31\u200b DB \u200b\u5beb\u5165\u200b\u53ea\u80fd\u200b\u7531\u200b EVM \u200b\u6a21\u584a\u200b\u8a2a\u554f\u200b\u7684\u200b\u591a\u200b\u5b58\u5132\u200b\u7684\u200b\u5177\u9ad4\u5b50\u200b\u6a39\u200b\u3002 Daodst \u200b\u6c92\u6709\u200b\u4f7f\u7528\u200b trie \u200b\u548c\u200b\u6578\u64da\u5eab\u200b\u9032\u884c\u200b\u67e5\u8a62\u200b\u548c\u200b\u6301\u4e45\u200b\u5316\u200b\uff08 <code>StateDB</code> \u200b\u5be6\u73fe\u200b\uff09\uff0c\u200b\u800c\u662f\u200b\u4f7f\u7528\u200b Cosmos \u200b\u7684\u200b <code>KVStore</code>\uff08\u200b\u9375\u503c\u200b\u5b58\u5132\u200b\uff09\u200b\u548c\u200b Cosmos SDK \u200b\u7684\u200b<code>Keeper</code>\u200b\u4f86\u200b\u4fc3\u9032\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u652f\u6301\u200b\u63a5\u53e3\u200b\u529f\u80fd\u200b\uff0c\u200b\u5b83\u5c0e\u5165\u200b\u4e86\u200b 4 \u200b\u500b\u200b\u6a21\u584a\u200b Keepers\uff1a</p> <ul> <li><code>auth</code>\uff1aCRUD \u200b\u5e33\u6236\u200b</li> <li><code>bank</code>\uff1a\u200b\u6703\u8a08\u200b\uff08\u200b\u4f9b\u61c9\u200b\uff09\u200b\u548c\u200b\u4f59\u984d\u200b\u7684\u200b CRUD</li> <li><code>staking</code>\uff1a\u200b\u67e5\u8a62\u200b\u6b77\u53f2\u200b\u6a19\u982d\u200b</li> <li><code>fee market</code>\uff1a\u200b\u8655\u7406\u200b<code>DynamicFeeTx</code>\u200b\u7684\u200bEIP1559\u200b\u57fa\u672c\u200b\u8cbb\u7528\u200b    \u200b\u5728\u200b<code>ChainConfig</code>\u200b\u53c3\u6578\u200b\u4e0a\u200b\u6fc0\u6d3b\u200b<code>London</code>\u200b\u786c\u200b\u5206\u53c9\u200b\u4e4b\u200b\u5f8c\u200b</li> </ul> <pre><code>type Keeper struct {\n // Protobuf codec\n cdc codec.BinaryCodec\n // Store key required for the EVM Prefix KVStore. It is required by:\n // - storing account's Storage State\n // - storing account's Code\n // - storing Bloom filters by block height. Needed for the Web3 API.\n // For the full list, check the module specification\n storeKey sdk.StoreKey\n\n // key to access the transient store, which is reset on every block during Commit\n transientKey sdk.StoreKey\n\n // module specific parameter space that can be configured through governance\n paramSpace paramtypes.Subspace\n // access to account state\n accountKeeper types.AccountKeeper\n // update balance and accounting operations with coins\n bankKeeper types.BankKeeper\n // access historical headers for EVM state transition execution\n stakingKeeper types.StakingKeeper\n // fetch EIP1559 base fee and parameters\n feeMarketKeeper types.FeeMarketKeeper\n\n // chain ID number obtained from the context's chain id\n eip155ChainID *big.Int\n\n // Tracer used to collect execution traces from the EVM transaction execution\n tracer string\n // trace EVM state transition execution. This value is obtained from the `--trace` flag.\n // For more info check https://geth.ethereum.org/docs/dapp/tracing\n debug bool\n\n // EVM Hooks for tx post-processing\n hooks types.EvmHooks\n}\n</code></pre>"},{"location":"evm/#_15","title":"\u5275\u4e16\u72c0\u614b","text":"<p><code>x/evm</code> \u200b\u6a21\u584a\u200b <code>GenesisState</code> \u200b\u5b9a\u7fa9\u4e86\u200b\u5f9e\u200b\u5148\u524d\u200b\u5c0e\u51fa\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u521d\u59cb\u5316\u200b\u93c8\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u72c0\u614b\u200b\u3002 \u200b\u5b83\u200b\u5305\u542b\u200b <code>GenesisAccounts</code> \u200b\u548c\u200b\u6a21\u584a\u200b\u53c3\u6578\u200b</p> <pre><code>type GenesisState struct {\n  // accounts is an array containing the ethereum genesis accounts.\n  Accounts []GenesisAccount `protobuf:\"bytes,1,rep,name=accounts,proto3\" json:\"accounts\"`\n  // params defines all the parameters of the module.\n  Params Params `protobuf:\"bytes,2,opt,name=params,proto3\" json:\"params\"`\n}\n</code></pre>"},{"location":"evm/#_16","title":"\u5275\u4e16\u200b\u8cec\u865f","text":"<p><code>GenesisAccount</code> \u200b\u985e\u578b\u200b\u5c0d\u200b\u61c9\u200b\u65bc\u200b\u4ee5\u592a\u200b\u574a\u200b<code>GenesisAccount</code> \u200b\u985e\u578b\u200b\u7684\u200b\u6539\u7de8\u200b\u3002 \u200b\u5b83\u5b9a\u200b\u7fa9\u4e86\u200b\u4e00\u500b\u200b\u5728\u200b\u5275\u4e16\u72c0\u614b\u200b\u4e0b\u200b\u88ab\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u8cec\u6236\u200b\u3002</p> <p>\u200b\u5b83\u200b\u7684\u200b\u4e3b\u8981\u200b\u5340\u5225\u200b\u5728\u200b\u65bc\u200b Daodst \u200b\u4e0a\u200b\u7684\u200b\u90a3\u500b\u200b\u4f7f\u7528\u200b\u81ea\u5b9a\u200b\u7fa9\u7684\u200b<code>Storage</code>\u200b\u985e\u578b\u200b\uff0c\u200b\u8a72\u985e\u200b\u578b\u200b\u4f7f\u7528\u200b\u5207\u7247\u200b\u800c\u200b\u4e0d\u662f\u200b evm<code>State</code>\u200b\u7684\u200b\u6620\u5c04\u200b\uff08\u200b\u7531\u200b\u65bc\u200b\u975e\u78ba\u200b\u5b9a\u6027\u200b\uff09\uff0c\u200b\u4e26\u4e14\u200b\u5b83\u200b\u4e0d\u200b\u5305\u542b\u200b\u79c1\u9470\u200b\u5b57\u200b\u6bb5\u200b\u3002</p> <p>\u200b\u540c\u6a23\u200b\u91cd\u8981\u200b\u7684\u200b\u662f\u200b\u8981\u200b\u6ce8\u610f\u200b\uff0c\u200b\u7531\u200b\u65bc\u200b Cosmos SDK \u200b\u4e0a\u200b\u7684\u200b<code>auth</code>\u200b\u6a21\u584a\u200b\u7ba1\u7406\u200b\u5e33\u6236\u200b\u72c0\u614b\u200b\uff0c<code>Address</code>\u200b\u5b57\u6bb5\u200b\u5fc5\u9808\u200b\u5c0d\u200b\u61c9\u200b\u65bc\u200b\u5b58\u5132\u200b\u5728\u200b<code>auth</code>\u200b\u6a21\u584a\u200b<code>Keeper</code>\u200b\u4e2d\u200b\u7684\u200b\u73fe\u6709\u200b<code>EthAccount</code>\uff08\u200b\u5373\u200b<code>AccountKeeper</code>\uff09\u3002</p> <p>\u200b\u5730\u5740\u200b\u4f7f\u7528\u200b EIP55 \u200b\u5341\u516d\u200b\u9032\u5236\u200b [\u200b\u683c\u5f0f\u200b] \u200b\u5728\u200b <code>genesis.json</code> \u200b\u4e0a\u200b\u3002</p> <pre><code>type GenesisAccount struct {\n  // address defines an ethereum hex formated address of an account\n  Address string `protobuf:\"bytes,1,opt,name=address,proto3\" json:\"address,omitempty\"`\n  // code defines the hex bytes of the account code.\n  Code string `protobuf:\"bytes,2,opt,name=code,proto3\" json:\"code,omitempty\"`\n  // storage defines the set of state key values for the account.\n  Storage Storage `protobuf:\"bytes,3,rep,name=storage,proto3,castrepeated=Storage\" json:\"storage\"`\n}\n</code></pre>"},{"location":"evm/#_17","title":"\u72c0\u614b\u200b\u8f49\u63db","text":"<p><code>x/evm</code> \u200b\u6a21\u584a\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u63d0\u4ea4\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b (<code>Tx</code>) \u200b\u4e26\u57f7\u884c\u200b\u5b83\u5011\u200b\u5305\u542b\u200b\u7684\u200b\u6d88\u606f\u200b\u4ee5\u200b\u5728\u200b\u7d66\u5b9a\u200b\u72c0\u614b\u200b\u4e0a\u200b\u5f15\u767c\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002</p> <p>\u200b\u7528\u6236\u200b\u5728\u200b\u5ba2\u6236\u200b\u7aef\u200b\u63d0\u4ea4\u200b\u4ea4\u6613\u200b\u4ee5\u5c07\u200b\u5176\u5ee3\u200b\u64ad\u5230\u200b\u7db2\u7d61\u200b\u3002 \u200b\u7576\u200b\u4ea4\u6613\u200b\u5728\u200b\u5171\u8b58\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u88ab\u200b\u5305\u542b\u200b\u5728\u200b\u4e00\u500b\u200b\u584a\u200b\u4e2d\u6642\u200b\uff0c\u200b\u5b83\u5c07\u200b\u5728\u200b\u670d\u52d9\u5668\u200b\u7aef\u200b\u57f7\u884c\u200b\u3002 \u200b\u6211\u5011\u200b\u5f37\u70c8\u200b\u5efa\u8b70\u200b\u60a8\u200b\u4e86\u89e3\u200b Tendermint \u200b\u5171\u8b58\u200b\u5f15\u64ce\u200b \u200b\u7684\u200b\u57fa\u790e\u200b\u77e5\u8b58\u200b\uff0c\u200b\u4ee5\u200b\u8a73\u7d30\u200b\u4e86\u89e3\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b.</p>"},{"location":"evm/#_18","title":"\u5ba2\u6236\u200b\u7aef","text":"<p>:::\u200b\u63d0\u793a\u200b \ud83d\udc49 \u200b\u9019\u662f\u200b\u57fa\u200b\u65bc\u200b <code>eth_sendTransaction</code> JSON-RPC :::</p> <ol> <li> <p>\u200b\u7528\u6236\u200b\u4f7f\u7528\u200b\u4ee5\u592a\u200b\u574a\u200b\u517c\u5bb9\u200b\u7684\u200b\u5ba2\u6236\u200b\u7aef\u200b\u6216\u200b\u9322\u200b\u5305\u200b\uff08\u200b\u4f8b\u5982\u200b Metamask\u3001WalletConnect\u3001Ledger \u200b\u7b49\u200b\uff09\u200b\u901a\u904e\u200b\u53ef\u7528\u200b\u7684\u200b JSON-RPC \u200b\u7aef\u9ede\u200b\u4e4b\u4e00\u200b\u63d0\u4ea4\u200b\u4ea4\u6613\u200b\uff1a</p> <ul> <li>eth\uff08\u200b\u516c\u5171\u200b\uff09\u200b\u547d\u540d\u200b\u7a7a\u9593\u200b\uff1a <code>eth_sendTransaction</code> \u200b\u548c\u200b <code>eth_sendRawTransaction</code></li> <li>\u200b\u500b\u200b\u4eba\u200b\uff08\u200b\u79c1\u6709\u200b\uff09\u200b\u547d\u540d\u200b\u7a7a\u9593\u200b\uff1a <code>personal_sendTransaction</code></li> </ul> </li> <li> <p>\u200b\u5728\u200b\u4f7f\u7528\u200b SetTxDefaults \u200b\u586b\u5145\u200b RPC \u200b\u4e8b\u52d9\u5f8c\u5275\u200b\u5efa\u4e00\u500b\u200b MsgEthereumTx \u200b\u5be6\u4f8b\u200b\uff0c\u200b\u4ee5\u200b\u4f7f\u7528\u200b\u9ed8\u200b\u8a8d\u503c\u200b\u586b\u5145\u200b\u7f3a\u5931\u200b\u7684\u200b tx \u200b\u53c3\u6578\u200b</p> </li> <li>\u200b\u4f7f\u7528\u200b ValidateBasic() \u200b\u9a57\u8b49\u200b <code>Tx</code> \u200b\u5b57\u200b\u6bb5\u200b\uff08\u200b\u7121\u72c0\u614b\u200b\uff09</li> <li><code>Tx</code> \u200b\u4f7f\u7528\u200b\u8207\u200b\u767c\u4ef6\u200b\u4eba\u200b\u5730\u5740\u200b\u95dc\u806f\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\u548c\u200b\u4f86\u200b\u81ea\u200b <code>ChainConfig</code> \u200b\u7684\u200b\u6700\u65b0\u200b\u4ee5\u592a\u200b\u574a\u200b\u786c\u200b\u5206\u53c9\u200b\uff08<code>London</code>\u3001<code>Berlin</code> \u200b\u7b49\u200b\uff09\u200b\u7c3d\u540d\u200b</li> <li><code>Tx</code> \u200b\u662f\u200b\u4f7f\u7528\u200b Cosmos Config \u200b\u69cb\u5efa\u5668\u200b\u5f9e\u200b msg \u200b\u5b57\u6bb5\u200b\u69cb\u5efa\u200b\u7684\u200b</li> <li><code>Tx</code> \u200b\u5728\u200b\u540c\u6b65\u200b\u6a21\u5f0f\u200b\u4e2d\u5ee3\u64ad\u200b    \u200b\u78ba\u4fdd\u200b\u7b49\u5f85\u200b <code>CheckTx</code> \u200b\u57f7\u884c\u97ff\u200b\u61c9\u200b\u3002    \u200b\u5728\u200b\u6dfb\u52a0\u200b\u5230\u5171\u8b58\u200b\u5f15\u64ce\u200b\u7684\u200b\u5167\u200b\u5b58\u6c60\u200b\u4e4b\u524d\u200b\uff0c\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4f7f\u7528\u200b<code>CheckTx()</code>\u200b\u9a57\u8b49\u200b\u4ea4\u6613\u200b\u3002</li> <li>JSON-RPC \u200b\u7528\u6236\u200b\u6536\u5230\u200b\u5e36\u6709\u200b\u4ea4\u6613\u200b\u5b57\u6bb5\u200b\u7684\u200b <code>RLP</code> \u200b\u54c8\u5e0c\u200b\u7684\u200b\u97ff\u61c9\u200b\u3002    \u200b\u6b64\u200b\u54c8\u5e0c\u200b\u4e0d\u540c\u200b\u65bc\u200b SDK \u200b\u4ea4\u6613\u200b\u4f7f\u7528\u200b\u7684\u200b\u9ed8\u8a8d\u200b\u54c8\u5e0c\u200b\uff0c\u200b\u5f8c\u200b\u8005\u200b\u8a08\u7b97\u200b\u4ea4\u6613\u200b\u5b57\u7bc0\u200b\u7684\u200b<code>sha256</code>\u200b\u54c8\u5e0c\u200b\u3002</li> </ol>"},{"location":"evm/#_19","title":"\u670d\u52d9\u7aef","text":"<p>\u200b\u4e00\u65e6\u200b\u5728\u200b\u5171\u8b58\u200b\u671f\u9593\u200b\u63d0\u4ea4\u200b\u4e86\u200b\u4e00\u500b\u200b\u584a\u200b\uff08\u200b\u5305\u542b\u200b\u201cTx\u201d\uff09\uff0c\u200b\u5b83\u200b\u5c31\u200b\u6703\u200b\u5728\u200b\u670d\u52d9\u5668\u200b\u7aef\u7684\u200b\u4e00\u7cfb\u5217\u200b ABCI \u200b\u6d88\u606f\u200b\u4e2d\u61c9\u7528\u200b\u65bc\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u3002</p> <p>\u200b\u6bcf\u500b\u200b <code>Tx</code> \u200b\u90fd\u200b\u7531\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u901a\u904e\u200b\u8abf\u7528\u200b <code>RunTx</code> \u200b\u4f86\u200b\u8655\u7406\u200b\u3002 \u200b\u5728\u200b\u5c0d\u200b <code>Tx</code> \u200b\u4e2d\u200b\u7684\u200b\u6bcf\u500b\u200b <code>sdk.Msg</code> \u200b\u9032\u884c\u200b\u7121\u72c0\u200b\u614b\u9a57\u8b49\u200b\u5f8c\u200b\uff0c<code>AnteHandler</code> \u200b\u78ba\u8a8d\u200b <code>Tx</code> \u200b\u662f\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u9084\u662f\u200b SDK \u200b\u4ea4\u6613\u200b\u3002 \u200b\u4f5c\u70ba\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5b83\u200b\u5305\u542b\u200b\u6d88\u606f\u200b\uff0c\u200b\u7136\u5f8c\u7531\u200b <code>x/evm</code> \u200b\u6a21\u584a\u200b\u8655\u7406\u200b\u4ee5\u200b\u66f4\u65b0\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u72c0\u614b\u200b\u3002</p>"},{"location":"evm/#_20","title":"\u524d\u7f6e\u200b\u8655\u7406\u200b\u7a0b\u5e8f","text":"<p><code>anteHandler</code> \u200b\u70ba\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u904b\u884c\u200b\u3002 \u200b\u5b83\u200b\u6aa2\u67e5\u200b <code>Tx</code> \u200b\u662f\u5426\u662f\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u4e26\u5c07\u200b\u5176\u200b\u8def\u7531\u200b\u5230\u200b\u5167\u90e8\u200b ante \u200b\u8655\u7406\u200b\u7a0b\u5e8f\u200b\u3002 \u200b\u5728\u200b\u9019\u88e1\u200b\uff0c<code>Tx</code> \u200b\u4f7f\u7528\u200b EthereumTx \u200b\u64f4\u5c55\u200b\u9078\u9805\u200b\u9032\u884c\u200b\u8655\u7406\u200b\uff0c\u200b\u4ee5\u200b\u4e0d\u540c\u200b\u65bc\u200b\u6b63\u5e38\u200b\u7684\u200b Cosmos SDK \u200b\u4ea4\u6613\u200b\u4f86\u200b\u8655\u7406\u200b\u5b83\u5011\u200b\u3002 <code>antehandler</code> \u200b\u904b\u884c\u200b\u4e00\u7cfb\u5217\u200b\u9078\u9805\u200b\u53ca\u5176\u200b\u91dd\u5c0d\u200b\u6bcf\u500b\u200b <code>Tx</code> \u200b\u7684\u200b <code>AnteHandle</code> \u200b\u51fd\u6578\u200b\uff1a</p> <ul> <li><code>EthSetUpContextDecorator()</code> \u200b\u6539\u7de8\u200b\u81ea\u200b cosmos-sdk \u200b\u7684\u200b SetUpContextDecorator\uff0c\u200b\u5b83\u200b\u901a\u904e\u200b\u5c07\u71c3\u200b\u6c23\u8868\u8a2d\u200b\u7f6e\u200b\u70ba\u200b\u7121\u9650\u4f86\u200b\u5ffd\u7565\u200b\u71c3\u6c23\u200b\u6d88\u8017\u200b</li> <li><code>EthValidateBasicDecorator(evmKeeper)</code> \u200b\u9a57\u8b49\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b Cosmos <code>Tx</code> \u200b\u6d88\u606f\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b</li> <li><code>EthSigVerificationDecorator(evmKeeper)</code> \u200b\u9a57\u200b\u8b49\u200b\u8a3b\u200b\u518a\u200b\u7684\u200b\u93c8\u200b ID \u200b\u662f\u5426\u200b\u8207\u200b\u6d88\u606f\u200b\u4e0a\u200b\u7684\u200b\u76f8\u540c\u200b\uff0c\u200b\u4e26\u4e14\u200b\u7c3d\u540d\u8005\u200b\u5730\u5740\u200b\u662f\u5426\u200b\u8207\u200b\u6d88\u606f\u200b\u4e0a\u5b9a\u200b\u7fa9\u7684\u200b\u76f8\u5339\u914d\u200b\u3002   RecheckTx \u200b\u4e0d\u6703\u200b\u8df3\u904e\u200b\u5b83\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u200b\u8a2d\u7f6e\u200b\u4e86\u200b<code>From</code>\u200b\u5730\u5740\u200b\uff0c\u200b\u9019\u5c0d\u200b\u65bc\u200b\u5176\u4ed6\u200b ante \u200b\u8655\u7406\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u5de5\u4f5c\u200b\u81f3\u95dc\u200b\u91cd\u8981\u200b\u3002   RecheckTx \u200b\u5931\u6557\u5c07\u200b\u963b\u6b62\u200b tx \u200b\u88ab\u200b\u5305\u542b\u200b\u5230\u200b\u584a\u200b\u4e2d\u200b\uff0c\u200b\u7279\u5225\u200b\u662f\u7576\u200b CheckTx \u200b\u6210\u529f\u200b\u6642\u200b\uff0c\u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u7528\u6236\u200b\u5c07\u4e0d\u6703\u200b\u770b\u5230\u200b\u932f\u8aa4\u200b\u6d88\u606f\u200b\u3002   -<code>EthAccountVerificationDecorator(ak, bankKeeper, evmKeeper)</code>   \u200b\u5c07\u9a57\u8b49\u200b\u767c\u9001\u200b\u65b9\u9918\u984d\u200b\u662f\u5426\u200b\u5927\u200b\u65bc\u200b\u7e3d\u200b\u4ea4\u6613\u6210\u672c\u200b\u3002   \u200b\u5982\u679c\u200b\u8a72\u200b\u5e33\u6236\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u5373\u7121\u6cd5\u200b\u5728\u200b\u5b58\u5132\u4e2d\u200b\u627e\u5230\u200b\uff0c\u200b\u5247\u8a72\u200b\u5e33\u6236\u5c07\u200b\u88ab\u200b\u8a2d\u7f6e\u200b\u5230\u200b\u5b58\u5132\u4e2d\u200b\u3002   \u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u6b64\u200b AnteHandler \u200b\u88dd\u98fe\u200b\u5668\u5c07\u200b\u5931\u6557\u200b\uff1a<ul> <li>\u200b\u4efb\u4f55\u200b\u6d88\u606f\u200b\u90fd\u200b\u4e0d\u662f\u200b MsgEthereumTx</li> <li>\u200b\u767c\u4ef6\u200b\u4eba\u200b\u5730\u5740\u200b\u70ba\u7a7a\u200b</li> <li>\u200b\u8cec\u6236\u200b\u9918\u984d\u200b\u4f4e\u200b\u65bc\u200b\u4ea4\u6613\u6210\u672c\u200b</li> </ul> </li> <li><code>EthNonceVerificationDecorator(ak)</code> \u200b\u9a57\u8b49\u200b\u4ea4\u6613\u200b\u96a8\u6a5f\u6578\u200b\u662f\u5426\u200b\u6709\u6548\u200b\u4e26\u200b\u7b49\u540c\u200b\u65bc\u200b\u767c\u9001\u65b9\u200b\u8cec\u6236\u200b\u7684\u200b\u7576\u524d\u200b\u96a8\u6a5f\u6578\u200b\u3002</li> <li><code>EthGasConsumeDecorator(evmKeeper)</code> \u200b\u9a57\u8b49\u200b\u4ee5\u592a\u200b\u574a\u200b tx \u200b\u6d88\u606f\u200b\u662f\u5426\u200b\u8db3\u4ee5\u200b\u652f\u4ed8\u200b\u56fa\u6709\u200b\u6c23\u9ad4\u200b\uff08\u200b\u50c5\u5728\u200b CheckTx \u200b\u671f\u9593\u200b\uff09\u200b\u4e26\u4e14\u200b\u767c\u9001\u200b\u65b9\u6709\u200b\u8db3\u5920\u200b\u7684\u200b\u9918\u984d\u200b\u4f86\u200b\u652f\u4ed8\u200b\u6c23\u9ad4\u200b\u6210\u672c\u200b\u3002   \u200b\u4ea4\u6613\u200b\u7684\u200b\u56fa\u6709\u200b\u6c23\u9ad4\u200b\u662f\u200b\u4ea4\u6613\u200b\u5728\u200b\u57f7\u884c\u200b\u4e4b\u524d\u200b\u4f7f\u7528\u200b\u7684\u200b\u6c23\u9ad4\u91cf\u200b\u3002   \u200b\u6c23\u9ad4\u200b\u662f\u200b\u4e00\u500b\u200b\u5e38\u6578\u503c\u200b\u52a0\u4e0a\u200b\u4ea4\u6613\u200b\u63d0\u4f9b\u200b\u7684\u200b\u984d\u5916\u200b\u6578\u64da\u200b\u5b57\u7bc0\u200b\u6240\u7522\u751f\u200b\u7684\u200b\u4efb\u4f55\u200b\u6210\u672c\u200b\u3002   \u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u6b64\u200b AnteHandler \u200b\u88dd\u98fe\u200b\u5668\u5c07\u200b\u5931\u6557\u200b\uff1a<ul> <li>\u200b\u4ea4\u6613\u200b\u5305\u542b\u200b\u591a\u500b\u200b\u6d88\u606f\u200b</li> <li>\u200b\u6d88\u606f\u200b\u4e0d\u662f\u200b MsgEthereumTx</li> <li>\u200b\u627e\u200b\u4e0d\u5230\u200b\u767c\u4ef6\u200b\u4eba\u200b\u5e33\u6236\u200b</li> <li>\u200b\u4ea4\u6613\u200b\u7684\u200b gas limit \u200b\u4f4e\u200b\u65bc\u200b\u56fa\u6709\u200b gas</li> <li>\u200b\u7528\u6236\u200b\u6c92\u6709\u200b\u8db3\u5920\u200b\u7684\u200b\u9918\u984d\u200b\u4f86\u200b\u6263\u9664\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\uff08gas_limit * gas_price\uff09</li> <li>\u200b\u4ea4\u6613\u200b\u6216\u5340\u200b\u584a\u200b\u7164\u6c23\u8868\u7528\u200b\u5b8c\u200b\u7164\u6c23\u200b</li> </ul> </li> <li><code>CanTransferDecorator(evmKeeper, feeMarketKeeper)</code> \u200b\u5f9e\u200b\u6d88\u606f\u200b\u4e2d\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b EVM \u200b\u4e26\u8abf\u200b\u7528\u200b BlockContext CanTransfer \u200b\u51fd\u6578\u200b\u4f86\u200b\u67e5\u770b\u200b\u8a72\u200b\u5730\u5740\u200b\u662f\u5426\u200b\u53ef\u4ee5\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u3002</li> <li><code>EthIncrementSenderSequenceDecorator(ak)</code> \u200b\u8655\u7406\u905e\u200b\u589e\u7c3d\u200b\u540d\u8005\u200b\uff08\u200b\u5373\u767c\u200b\u9001\u8005\u200b\uff09\u200b\u7684\u200b\u5e8f\u5217\u200b\u3002   \u200b\u5982\u679c\u200b\u4ea4\u6613\u200b\u662f\u200b\u5408\u7d04\u200b\u5275\u5efa\u200b\uff0c\u200b\u5247\u96a8\u6a5f\u200b\u6578\u5c07\u200b\u5728\u200b\u4ea4\u6613\u200b\u57f7\u200b\u884c\u671f\u200b\u9593\u200b\u905e\u589e\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u5728\u200b\u6b64\u200b AnteHandler \u200b\u88dd\u98fe\u5668\u200b\u5167\u200b\u3002</li> </ul> <p>\u200b\u9078\u9805\u200b <code>authante.NewMempoolFeeDecorator()</code>\u3001<code>authante.NewTxTimeoutHeightDecorator()</code> \u200b\u548c\u200b <code>authante.NewValidateMemoDecorator(ak)</code> \u200b\u8207\u200b Cosmos <code>Tx</code> \u200b\u76f8\u540c\u200b\u3002 \u200b\u55ae\u64ca\u200b\u6b64\u8655\u200b\u4e86\u89e3\u200b\u6709\u95dc\u200b <code>anteHandler</code> \u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"evm/#evm_2","title":"EVM \u200b\u6a21\u584a","text":"<p>\u200b\u901a\u904e\u200b <code>antehandler</code> \u200b\u9a57\u8b49\u200b\u5f8c\u200b\uff0c<code>Tx</code> \u200b\u4e2d\u200b\u7684\u200b\u6bcf\u500b\u200b <code>sdk.Msg</code>\uff08\u200b\u5728\u200b\u672c\u4f8b\u200b\u4e2d\u70ba\u200b <code>MsgEthereumTx</code>\uff09 \u200b\u50b3\u905e\u7d66\u200b <code>x/evm</code> \u200b\u6a21\u584a\u200b\u4e2d\u200b\u7684\u200b Msg Handler\uff0c\u200b\u4e26\u901a\u904e\u200b\u4ee5\u4e0b\u200b\u6b65\u9a5f\u200b\u904b\u884c\u200b\uff1a</p> <ol> <li>\u200b\u5c07\u200b <code>Msg</code> \u200b\u8f49\u63db\u200b\u70ba\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b <code>Tx</code> \u200b\u985e\u578b\u200b</li> <li>\u200b\u5c07\u200b <code>Tx</code> \u200b\u8207\u200b <code>EVMConfig</code> \u200b\u4e00\u8d77\u200b\u61c9\u7528\u200b\u4e26\u5617\u8a66\u200b\u57f7\u884c\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\uff0c\u200b\u53ea\u6709\u200b\u5728\u200b\u4ea4\u6613\u200b\u672a\u5931\u6557\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u624d\u200b\u6703\u200b\u6301\u4e45\u200b\u5316\u200b\uff08\u200b\u63d0\u4ea4\u200b\uff09\u200b\u5230\u5e95\u200b\u5c64\u200b KVStore\uff1a    1.\u200b\u78ba\u8a8d\u200b\u5275\u5efa\u200b\u4e86\u200b<code>EVMConfig</code><ol> <li>\u200b\u4f7f\u7528\u200b\u4f86\u200b\u81ea\u200b\u201cEVMConfig\u201d\u200b\u7684\u200b\u93c8\u200b\u914d\u7f6e\u200b\u503c\u200b\u5275\u5efa\u200b\u4ee5\u592a\u200b\u574a\u200b\u7c3d\u540d\u8005\u200b</li> <li>\u200b\u5c07\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u54c8\u5e0c\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\uff08\u200b\u81e8\u6642\u200b\uff09\u200b\u81e8\u6642\u200b\u5b58\u5132\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u5b83\u200b\u4e5f\u200b\u53ef\u7528\u200b\u65bc\u200b StateDB \u200b\u51fd\u6578\u200b    4.\u200b\u751f\u6210\u200b\u65b0\u200b\u7684\u200bEVM\u200b\u5be6\u4f8b\u200b</li> <li>\u200b\u78ba\u8a8d\u200b\u7528\u200b\u65bc\u200b\u5408\u7d04\u200b\u5275\u5efa\u200b (<code>EnableCreate</code>) \u200b\u548c\u200b\u5408\u7d04\u200b\u57f7\u884c\u200b (<code>EnableCall</code>) \u200b\u7684\u200b EVM \u200b\u53c3\u6578\u200b\u5df2\u200b\u555f\u7528\u200b    6.\u200b\u61c9\u7528\u200b\u6d88\u606f\u200b\u3002\u200b\u5982\u679c\u200b<code>To</code>\u200b\u5730\u5740\u200b\u70ba\u200b<code>nil</code>\uff0c\u200b\u5247\u200b\u4f7f\u7528\u200b\u4ee3\u78bc\u200b\u4f5c\u70ba\u200b\u90e8\u7f72\u200b\u4ee3\u78bc\u200b\u5275\u200b\u5efa\u65b0\u200b\u5408\u7d04\u200b\u3002 Else \u200b\u4ee5\u7d66\u5b9a\u200b\u8f38\u5165\u200b\u4f5c\u70ba\u200b\u53c3\u6578\u200b\u5728\u200b\u7d66\u5b9a\u200b\u5730\u5740\u200b\u8abf\u7528\u200b\u5408\u7d04\u200b    7.\u200b\u8a08\u7b97\u200bevm\u200b\u64cd\u4f5c\u200b\u4f7f\u7528\u200b\u7684\u200bgas</li> </ol> </li> <li>\u200b\u5982\u679c\u200b<code>Tx</code>\u200b\u7533\u8acb\u200b\u6210\u529f\u200b<ol> <li>\u200b\u57f7\u884c\u200b EVM <code>Tx</code> \u200b\u5f8c\u200b\u8655\u7406\u639b\u200b\u9264\u200b\u3002\u200b\u5982\u679c\u200b\u9264\u5b50\u200b\u8fd4\u56de\u200b\u932f\u8aa4\u200b\uff0c\u200b\u5247\u9084\u539f\u200b\u6574\u500b\u200b\u201cTx\u201d    2.\u200b\u6309\u7167\u200b\u4ee5\u592a\u200b\u574a\u200bgas\u200b\u8a18\u8cec\u200b\u898f\u5247\u200b\u8fd4\u9084\u200bgas</li> <li>\u200b\u4f7f\u7528\u200b\u5f9e\u200b tx \u200b\u751f\u6210\u200b\u7684\u200b\u65e5\u8a8c\u200b\u66f4\u65b0\u200b\u584a\u200b\u5e03\u9686\u200b\u904e\u6ffe\u5668\u200b\u503c\u200b</li> <li>\u200b\u70ba\u200b\u4ea4\u6613\u200b\u5b57\u6bb5\u200b\u548c\u200b tx \u200b\u65e5\u8a8c\u200b\u767c\u51fa\u200b SDK \u200b\u4e8b\u4ef6\u200b</li> </ol> </li> </ol>"},{"location":"evm/#_21","title":"\u4ea4\u6613","text":"<p>\u200b\u672c\u200b\u90e8\u5206\u200b\u5b9a\u7fa9\u4e86\u200b\u5c0e\u81f4\u200b\u4e0a\u200b\u4e00\u7bc0\u200b\u4e2d\u5b9a\u200b\u7fa9\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u7684\u200b <code>sdk.Msg</code> \u200b\u5177\u9ad4\u200b\u985e\u578b\u200b\u3002</p>"},{"location":"evm/#msgethereumtx","title":"<code>MsgEthereumTx</code>","text":"<p>EVM \u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u4f7f\u7528\u200b\u201cMsgEthereumTx\u201d\u200b\u4f86\u200b\u5be6\u73fe\u200b\u3002 \u200b\u6b64\u200b\u6d88\u606f\u200b\u5c07\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b (<code>TxData</code>) \u200b\u5c01\u88dd\u200b\u70ba\u200b <code>sdk.Msg</code>\u3002 \u200b\u5b83\u200b\u5305\u542b\u200b\u5fc5\u8981\u200b\u7684\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u5b57\u200b\u6bb5\u200b\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c<code>MsgEthereumTx</code> \u200b\u5be6\u73fe\u200b\u4e86\u200b <code>sdk.Msg</code> \u200b\u548c\u200b  <code>sdk.Tx</code> \u200b\u63a5\u53e3\u200b\u3002 \u200b\u901a\u5e38\u200b\uff0cSDK \u200b\u6d88\u606f\u200b\u53ea\u200b\u5be6\u73fe\u200b\u524d\u8005\u200b\uff0c\u200b\u800c\u5f8c\u8005\u200b\u662f\u200b\u4e00\u7d44\u200b\u6d88\u606f\u200b\u6346\u200b\u7d81\u200b\u5728\u200b\u4e00\u8d77\u200b\u3002</p> <p>\u200b\u672c\u200b\u90e8\u5206\u200b\u5b9a\u7fa9\u4e86\u200b\u5c0e\u81f4\u200b\u4e0a\u200b\u4e00\u7bc0\u200b\u4e2d\u5b9a\u200b\u7fa9\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u7684\u200b <code>sdk.Msg</code> \u200b\u5177\u9ad4\u200b\u985e\u578b\u200b\u3002</p>"},{"location":"evm/#msgethereumtx_1","title":"<code>MsgEthereumTx</code>","text":"<p>EVM \u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u4f7f\u7528\u200b <code>MsgEthereumTx</code>\u200b\u4f86\u200b\u5be6\u73fe\u200b\u3002 \u200b\u6b64\u200b\u6d88\u606f\u200b\u5c07\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b (<code>TxData</code>) \u200b\u5c01\u88dd\u200b\u70ba\u200b <code>sdk.Msg</code>\u3002 \u200b\u5b83\u200b\u5305\u542b\u200b\u5fc5\u8981\u200b\u7684\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u5b57\u200b\u6bb5\u200b\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c<code>MsgEthereumTx</code> \u200b\u5be6\u73fe\u200b\u4e86\u200b <code>sdk.Msg</code> \u200b\u548c\u200b  <code>sdk.Tx</code> \u200b\u63a5\u53e3\u200b\u3002</p> <p>\u200b\u901a\u5e38\u200b\uff0cSDK \u200b\u6d88\u606f\u200b\u53ea\u200b\u5be6\u73fe\u200b\u524d\u8005\u200b\uff0c\u200b\u800c\u5f8c\u8005\u200b\u662f\u200b\u4e00\u7d44\u200b\u6d88\u606f\u200b\u6346\u200b\u7d81\u200b\u5728\u200b\u4e00\u8d77\u200b\u3002</p> <pre><code>type MsgEthereumTx struct {\n // inner transaction data\n Data *types.Any `protobuf:\"bytes,1,opt,name=data,proto3\" json:\"data,omitempty\"`\n // DEPRECATED: encoded storage size of the transaction\n Size_ float64 `protobuf:\"fixed64,2,opt,name=size,proto3\" json:\"-\"`\n // transaction hash in hex format\n Hash string `protobuf:\"bytes,3,opt,name=hash,proto3\" json:\"hash,omitempty\" rlp:\"-\"`\n // ethereum signer address in hex format. This address value is checked\n // against the address derived from the signature (V, R, S) using the\n // secp256k1 elliptic curve\n From string `protobuf:\"bytes,4,opt,name=from,proto3\" json:\"from,omitempty\"`\n}\n</code></pre> <p>\u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u5247\u6b64\u200b\u6d88\u606f\u200b\u5b57\u200b\u6bb5\u9a57\u8b49\u200b\u9810\u8a08\u6703\u200b\u5931\u6557\u200b\uff1a</p> <ul> <li><code>From</code> \u200b\u5b57\u6bb5\u200b\u5df2\u5b9a\u200b\u7fa9\u4e14\u200b\u5730\u5740\u200b\u7121\u6548\u200b</li> <li><code>TxData</code> \u200b\u7121\u72c0\u200b\u614b\u9a57\u8b49\u200b\u5931\u6557\u200b</li> </ul> <p>\u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u4ea4\u6613\u200b\u57f7\u884c\u200b\u9810\u8a08\u6703\u200b\u5931\u6557\u200b\uff1a</p> <ul> <li>\u200b\u4efb\u4f55\u200b\u81ea\u5b9a\u200b\u7fa9\u7684\u200b<code>AnteHandler</code>\u200b\u4ee5\u592a\u200b\u574a\u200b\u88dd\u98fe\u5668\u200b\u6aa2\u67e5\u200b\u90fd\u200b\u5931\u6557\u200b\u4e86\u200b\uff1a<ul> <li>\u200b\u4ea4\u6613\u200b\u7684\u200b\u6700\u4f4e\u200bgas\u200b\u91cf\u200b\u8981\u6c42\u200b</li> <li>Tx \u200b\u767c\u4ef6\u200b\u4eba\u200b\u5e33\u6236\u200b\u4e0d\u200b\u5b58\u5728\u200b\u6216\u200b\u6c92\u200b\u6709\u200b\u8db3\u5920\u200b\u7684\u200b\u8cbb\u7528\u200b\u9918\u984d\u200b</li> <li>\u200b\u8cec\u6236\u200b\u5e8f\u5217\u200b\u8207\u200b\u4ea4\u6613\u200b<code>Data.AccountNonce</code>\u200b\u4e0d\u200b\u5339\u914d\u200b</li> <li>\u200b\u6d88\u606f\u200b\u7c3d\u540d\u9a57\u8b49\u200b\u5931\u6557\u200b</li> </ul> </li> <li>EVM \u200b\u5408\u7d04\u200b\u5275\u5efa\u200b\uff08\u200b\u5373\u200b <code>evm.Create</code>\uff09\u200b\u5931\u6557\u200b\uff0c\u200b\u6216\u200b <code>evm.Call</code> \u200b\u5931\u6557\u200b</li> </ul>"},{"location":"evm/#_22","title":"\u8f49\u63db","text":"<p><code>MsgEthreumTx</code> \u200b\u53ef\u4ee5\u200b\u8f49\u63db\u200b\u70ba\u200b go-ethereum <code>Transaction</code> \u200b\u548c\u200b <code>Message</code> \u200b\u985e\u578b\u200b \u200b\u70ba\u200b\u4e86\u200b\u5275\u5efa\u200b\u548c\u200b\u8abf\u7528\u200b evm \u200b\u5408\u7d04\u200b\u3002</p> <pre><code>// AsTransaction creates an Ethereum Transaction type from the msg fields\nfunc (msg MsgEthereumTx) AsTransaction() *ethtypes.Transaction {\n txData, err := UnpackTxData(msg.Data)\n if err != nil {\n  return nil\n }\n\n return ethtypes.NewTx(txData.AsEthereumData())\n}\n\n// AsMessage returns the transaction as a core.Message.\nfunc (tx *Transaction) AsMessage(s Signer, baseFee *big.Int) (Message, error) {\n msg := Message{\n  nonce:      tx.Nonce(),\n  gasLimit:   tx.Gas(),\n  gasPrice:   new(big.Int).Set(tx.GasPrice()),\n  gasFeeCap:  new(big.Int).Set(tx.GasFeeCap()),\n  gasTipCap:  new(big.Int).Set(tx.GasTipCap()),\n  to:         tx.To(),\n  amount:     tx.Value(),\n  data:       tx.Data(),\n  accessList: tx.AccessList(),\n  isFake:     false,\n }\n // If baseFee provided, set gasPrice to effectiveGasPrice.\n if baseFee != nil {\n  msg.gasPrice = math.BigMin(msg.gasPrice.Add(msg.gasTipCap, baseFee), msg.gasFeeCap)\n }\n var err error\n msg.from, err = Sender(s, tx)\n return msg, err\n}\n</code></pre>"},{"location":"evm/#_23","title":"\u7c3d\u540d","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u4f7f\u200b\u7c3d\u540d\u9a57\u8b49\u200b\u6709\u6548\u200b\uff0c<code>TxData</code> \u200b\u5fc5\u9808\u200b\u5305\u542b\u200b\u4f86\u200b\u81ea\u200b <code>Signer</code> \u200b\u7684\u200b <code>v | r | s</code> \u200b\u503c\u200b\u3002 Sign \u200b\u8a08\u7b97\u200b secp256k1 ECDSA \u200b\u7c3d\u540d\u4e26\u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\u3002 \u200b\u6839\u64da\u200b EIP155 \u200b\u6a19\u6e96\u200b\uff0c\u200b\u5b83\u200b\u9700\u8981\u200b\u4e00\u500b\u200b\u5bc6\u200b\u9470\u200b\u74b0\u7c3d\u200b\u540d\u8005\u200b\u548c\u200b chainID \u200b\u4f86\u200b\u7c3d\u7f72\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u3002 \u200b\u6b64\u200b\u65b9\u6cd5\u200b\u5728\u200b\u586b\u5145\u200b\u4ea4\u6613\u200b\u7c3d\u540d\u200b\u7684\u200b V\u3001R\u3001S \u200b\u5b57\u6bb5\u200b\u6642\u200b\u6539\u8b8a\u200b\u4ea4\u6613\u200b\u3002 \u200b\u5982\u679c\u200b\u672a\u70ba\u200b\u6d88\u606f\u200b\u5b9a\u7fa9\u767c\u4ef6\u200b\u4eba\u200b\u5730\u5740\u200b\u6216\u200b\u767c\u4ef6\u200b\u4eba\u200b\u672a\u200b\u5728\u200b\u5bc6\u200b\u9470\u74b0\u200b\u4e0a\u200b\u8a3b\u200b\u518a\u200b\uff0c\u200b\u5247\u8a72\u200b\u51fd\u6578\u5c07\u200b\u5931\u6557\u200b\u3002</p> <pre><code>// Sign calculates a secp256k1 ECDSA signature and signs the transaction. It\n// takes a keyring signer and the chainID to sign an Ethereum transaction according to\n// EIP155 standard.\n// This method mutates the transaction as it populates the V, R, S\n// fields of the Transaction's Signature.\n// The function will fail if the sender address is not defined for the msg or if\n// the sender is not registered on the keyring\nfunc (msg *MsgEthereumTx) Sign(ethSigner ethtypes.Signer, keyringSigner keyring.Signer) error {\n from := msg.GetFrom()\n if from.Empty() {\n  return fmt.Errorf(\"sender address not defined for message\")\n }\n\n tx := msg.AsTransaction()\n txHash := ethSigner.Hash(tx)\n\n sig, _, err := keyringSigner.SignByAddress(from, txHash.Bytes())\n if err != nil {\n  return err\n }\n\n tx, err = tx.WithSignature(ethSigner, sig)\n if err != nil {\n  return err\n }\n\n msg.FromEthereumTx(tx)\n return nil\n}\n</code></pre>"},{"location":"evm/#txdata","title":"TxData","text":"<p><code>MsgEthereumTx</code> \u200b\u652f\u6301\u200b\u4f86\u200b\u81ea\u200b go-ethereum \u200b\u7684\u200b 3 \u200b\u7a2e\u200b\u6709\u6548\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u985e\u578b\u200b\uff1a <code>LegacyTx</code>\u3001<code>AccessListTx</code> \u200b\u548c\u200b <code>DynamicFeeTx</code>\u3002 \u200b\u9019\u4e9b\u200b\u985e\u578b\u200b\u88ab\u200b\u5b9a\u7fa9\u70ba\u200b protobuf \u200b\u6d88\u606f\u200b\uff0c\u200b\u4e26\u200b\u6253\u5305\u200b\u5230\u200b <code>MsgEthereumTx</code> \u200b\u5b57\u6bb5\u200b\u4e2d\u200b\u7684\u200b <code>proto.Any</code> \u200b\u63a5\u53e3\u200b\u985e\u578b\u200b\u4e2d\u200b\u3002</p> <ul> <li><code>LegacyTx</code>: EIP-155 \u200b\u4ea4\u6613\u200b\u985e\u578b\u200b</li> <li><code>DynamicFeeTx</code>\uff1aEIP-1559 \u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u3002</li> <li><code>AccessListTx</code>\uff1aEIP-2930 \u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u3002</li> </ul>"},{"location":"evm/#legacytx","title":"<code>LegacyTx</code>","text":"<p>\u200b\u5e38\u89c4\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u7684\u200b\u4ea4\u6613\u200b\u6570\u636e\u200b\u3002</p> <pre><code>type LegacyTx struct {\n // nonce corresponds to the account nonce (transaction sequence).\n Nonce uint64 `protobuf:\"varint,1,opt,name=nonce,proto3\" json:\"nonce,omitempty\"`\n // gas price defines the value for each gas unit\n GasPrice *github_com_cosmos_cosmos_sdk_types.Int `protobuf:\"bytes,2,opt,name=gas_price,json=gasPrice,proto3,customtype=github.com/cosmos/cosmos-sdk/types.Int\" json:\"gas_price,omitempty\"`\n // gas defines the gas limit defined for the transaction.\n GasLimit uint64 `protobuf:\"varint,3,opt,name=gas,proto3\" json:\"gas,omitempty\"`\n // hex formatted address of the recipient\n To string `protobuf:\"bytes,4,opt,name=to,proto3\" json:\"to,omitempty\"`\n // value defines the unsigned integer value of the transaction amount.\n Amount *github_com_cosmos_cosmos_sdk_types.Int `protobuf:\"bytes,5,opt,name=value,proto3,customtype=github.com/cosmos/cosmos-sdk/types.Int\" json:\"value,omitempty\"`\n // input defines the data payload bytes of the transaction.\n Data []byte `protobuf:\"bytes,6,opt,name=data,proto3\" json:\"data,omitempty\"`\n // v defines the signature value\n V []byte `protobuf:\"bytes,7,opt,name=v,proto3\" json:\"v,omitempty\"`\n // r defines the signature value\n R []byte `protobuf:\"bytes,8,opt,name=r,proto3\" json:\"r,omitempty\"`\n // s define the signature value\n S []byte `protobuf:\"bytes,9,opt,name=s,proto3\" json:\"s,omitempty\"`\n}\n</code></pre> <p>\u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u5247\u6b64\u200b\u6d88\u606f\u200b\u5b57\u200b\u6bb5\u9a57\u8b49\u200b\u9810\u8a08\u6703\u200b\u5931\u6557\u200b\uff1a</p> <ul> <li><code>GasPrice</code> \u200b\u7121\u6548\u200b\uff08<code>nil</code>\uff0c\u200b\u8ca0\u6578\u200b\u6216\u200b\u8d85\u51fa\u200b int256 \u200b\u7bc4\u570d\u200b\uff09</li> <li><code>Fee</code> (gasprice * gaslimit) \u200b\u7121\u6548\u200b</li> <li><code>Amount</code> \u200b\u7121\u6548\u200b\uff08\u200b\u8ca0\u6578\u200b\u6216\u200b\u8d85\u51fa\u200b int256 \u200b\u7bc4\u570d\u200b\uff09</li> <li><code>To</code> \u200b\u5730\u5740\u200b\u7121\u6548\u200b\uff08\u200b\u7121\u6548\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u5341\u516d\u200b\u9032\u5236\u200b\u5730\u5740\u200b\uff09</li> </ul>"},{"location":"evm/#dynamicfeetx","title":"<code>DynamicFeeTx</code>","text":"<p>EIP-1559\u200b\u52d5\u614b\u200b\u624b\u7e8c\u8cbb\u200b\u4ea4\u6613\u200b\u7684\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u3002</p> <pre><code>type DynamicFeeTx struct {\n // destination EVM chain ID\n ChainID *github_com_cosmos_cosmos_sdk_types.Int `protobuf:\"bytes,1,opt,name=chain_id,json=chainId,proto3,customtype=github.com/cosmos/cosmos-sdk/types.Int\" json:\"chainID\"`\n // nonce corresponds to the account nonce (transaction sequence).\n Nonce uint64 `protobuf:\"varint,2,opt,name=nonce,proto3\" json:\"nonce,omitempty\"`\n // gas tip cap defines the max value for the gas tip\n GasTipCap *github_com_cosmos_cosmos_sdk_types.Int `protobuf:\"bytes,3,opt,name=gas_tip_cap,json=gasTipCap,proto3,customtype=github.com/cosmos/cosmos-sdk/types.Int\" json:\"gas_tip_cap,omitempty\"`\n // gas fee cap defines the max value for the gas fee\n GasFeeCap *github_com_cosmos_cosmos_sdk_types.Int `protobuf:\"bytes,4,opt,name=gas_fee_cap,json=gasFeeCap,proto3,customtype=github.com/cosmos/cosmos-sdk/types.Int\" json:\"gas_fee_cap,omitempty\"`\n // gas defines the gas limit defined for the transaction.\n GasLimit uint64 `protobuf:\"varint,5,opt,name=gas,proto3\" json:\"gas,omitempty\"`\n // hex formatted address of the recipient\n To string `protobuf:\"bytes,6,opt,name=to,proto3\" json:\"to,omitempty\"`\n // value defines the the transaction amount.\n Amount *github_com_cosmos_cosmos_sdk_types.Int `protobuf:\"bytes,7,opt,name=value,proto3,customtype=github.com/cosmos/cosmos-sdk/types.Int\" json:\"value,omitempty\"`\n // input defines the data payload bytes of the transaction.\n Data     []byte     `protobuf:\"bytes,8,opt,name=data,proto3\" json:\"data,omitempty\"`\n Accesses AccessList `protobuf:\"bytes,9,rep,name=accesses,proto3,castrepeated=AccessList\" json:\"accessList\"`\n // v defines the signature value\n V []byte `protobuf:\"bytes,10,opt,name=v,proto3\" json:\"v,omitempty\"`\n // r defines the signature value\n R []byte `protobuf:\"bytes,11,opt,name=r,proto3\" json:\"r,omitempty\"`\n // s define the signature value\n S []byte `protobuf:\"bytes,12,opt,name=s,proto3\" json:\"s,omitempty\"`\n}\n</code></pre> <p>\u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u5247\u6b64\u200b\u6d88\u606f\u200b\u5b57\u200b\u6bb5\u9a57\u8b49\u200b\u9810\u8a08\u6703\u200b\u5931\u6557\u200b\uff1a</p> <ul> <li><code>GasTipCap</code> \u200b\u7121\u6548\u200b\uff08<code>nil</code>\u3001\u200b\u8ca0\u503c\u200b\u6216\u200b\u6ea2\u51fa\u200b int256\uff09</li> <li><code>GasFeeCap</code> \u200b\u7121\u6548\u200b\uff08<code>nil</code>\u3001\u200b\u8ca0\u503c\u200b\u6216\u200b\u6ea2\u51fa\u200b int256\uff09</li> <li><code>GasFeeCap</code> \u200b\u5c0f\u200b\u65bc\u200b <code>GasTipCap</code></li> <li><code>Fee</code> (gas price * gas limit) \u200b\u7121\u6548\u200b\uff08\u200b\u6ea2\u51fa\u200b int256\uff09</li> <li><code>Amount</code> \u200b\u7121\u6548\u200b\uff08\u200b\u8ca0\u6578\u200b\u6216\u200b\u6ea2\u51fa\u200b int256\uff09</li> <li><code>To</code> \u200b\u5730\u5740\u200b\u7121\u6548\u200b\uff08\u200b\u7121\u6548\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u5341\u516d\u200b\u9032\u5236\u200b\u5730\u5740\u200b\uff09</li> <li><code>ChainID</code> \u200b\u70ba\u200b <code>nil</code></li> </ul>"},{"location":"evm/#accesslisttx","title":"<code>AccessListTx</code>","text":"<p>EIP-2930\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b\u4ea4\u6613\u200b\u7684\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u3002</p> <pre><code>type AccessListTx struct {\n // destination EVM chain ID\n ChainID *github_com_cosmos_cosmos_sdk_types.Int `protobuf:\"bytes,1,opt,name=chain_id,json=chainId,proto3,customtype=github.com/cosmos/cosmos-sdk/types.Int\" json:\"chainID\"`\n // nonce corresponds to the account nonce (transaction sequence).\n Nonce uint64 `protobuf:\"varint,2,opt,name=nonce,proto3\" json:\"nonce,omitempty\"`\n // gas price defines the value for each gas unit\n GasPrice *github_com_cosmos_cosmos_sdk_types.Int `protobuf:\"bytes,3,opt,name=gas_price,json=gasPrice,proto3,customtype=github.com/cosmos/cosmos-sdk/types.Int\" json:\"gas_price,omitempty\"`\n // gas defines the gas limit defined for the transaction.\n GasLimit uint64 `protobuf:\"varint,4,opt,name=gas,proto3\" json:\"gas,omitempty\"`\n // hex formatted address of the recipient\n To string `protobuf:\"bytes,5,opt,name=to,proto3\" json:\"to,omitempty\"`\n // value defines the unsigned integer value of the transaction amount.\n Amount *github_com_cosmos_cosmos_sdk_types.Int `protobuf:\"bytes,6,opt,name=value,proto3,customtype=github.com/cosmos/cosmos-sdk/types.Int\" json:\"value,omitempty\"`\n // input defines the data payload bytes of the transaction.\n Data     []byte     `protobuf:\"bytes,7,opt,name=data,proto3\" json:\"data,omitempty\"`\n Accesses AccessList `protobuf:\"bytes,8,rep,name=accesses,proto3,castrepeated=AccessList\" json:\"accessList\"`\n // v defines the signature value\n V []byte `protobuf:\"bytes,9,opt,name=v,proto3\" json:\"v,omitempty\"`\n // r defines the signature value\n R []byte `protobuf:\"bytes,10,opt,name=r,proto3\" json:\"r,omitempty\"`\n // s define the signature value\n S []byte `protobuf:\"bytes,11,opt,name=s,proto3\" json:\"s,omitempty\"`\n}\n</code></pre> <p>\u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u5247\u6b64\u200b\u6d88\u606f\u200b\u5b57\u200b\u6bb5\u9a57\u8b49\u200b\u9810\u8a08\u6703\u200b\u5931\u6557\u200b\uff1a</p> <ul> <li><code>GasPrice</code> \u200b\u7121\u6548\u200b\uff08<code>nil</code>\u3001\u200b\u8ca0\u6578\u200b\u6216\u200b\u6ea2\u51fa\u200b int256\uff09</li> <li><code>Fee</code> (gas price * gas limit) \u200b\u7121\u6548\u200b\uff08\u200b\u6ea2\u51fa\u200b int256\uff09</li> <li><code>Amount</code> \u200b\u7121\u6548\u200b\uff08\u200b\u8ca0\u6578\u200b\u6216\u200b\u6ea2\u51fa\u200b int256\uff09</li> <li><code>To</code> \u200b\u5730\u5740\u200b\u7121\u6548\u200b\uff08\u200b\u7121\u6548\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u5341\u516d\u200b\u9032\u5236\u200b\u5730\u5740\u200b\uff09</li> <li><code>ChainID</code> \u200b\u70ba\u200b <code>nil</code></li> </ul>"},{"location":"evm/#abci","title":"ABCI","text":"<p>\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5340\u584a\u200b\u93c8\u200b\u63a5\u53e3\u200b (ABCI) \u200b\u5141\u8a31\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u8207\u200b Tendermint \u200b\u5171\u8b58\u200b\u5f15\u64ce\u200b\u9032\u884c\u200b\u4ea4\u4e92\u200b\u3002 \u200b\u8a72\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u8207\u200b Tendermint \u200b\u4fdd\u6301\u200b\u591a\u500b\u200b ABCI \u200b\u9023\u63a5\u200b\u3002 \u200b\u8207\u200b <code>x/evm</code> \u200b\u6700\u76f8\u95dc\u200b\u7684\u200b\u662f\u200b \u200b\u63d0\u4ea4\u200b\u6642\u200b\u7684\u200b\u5171\u8b58\u200b\u9023\u63a5\u200b\u3002 \u200b\u6b64\u9023\u63a5\u200b\u8ca0\u8cac\u584a\u200b\u57f7\u884c\u200b\u4e26\u8abf\u200b\u7528\u200b\u51fd\u6578\u200b<code>InitChain</code>\uff08\u200b\u5305\u542b\u200b<code>InitGenesis</code>\uff09\uff0c<code>BeginBlock</code>\uff0c<code>DeliverTx</code>\uff0c<code>EndBlock</code>\uff0c<code>Commit</code>\u3002 <code>InitChain</code> \u200b\u50c5\u5728\u200b\u7b2c\u4e00\u6b21\u200b\u555f\u52d5\u200b\u65b0\u5340\u200b\u584a\u200b\u93c8\u6642\u200b\u8abf\u7528\u200b\uff0c\u200b\u4e26\u4e14\u200b\u70ba\u200b\u584a\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u500b\u200b\u4ea4\u6613\u200b\u8abf\u7528\u200b <code>DeliverTx</code>\u3002</p>"},{"location":"evm/#_24","title":"\u521d\u59cb\u5316\u200b\u5275\u4e16","text":"<p><code>InitGenesis</code> \u200b\u901a\u904e\u5c07\u200b <code>GenesisState</code> \u200b\u5b57\u6bb5\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u5b58\u5132\u4f86\u200b\u521d\u59cb\u5316\u200b EVM \u200b\u6a21\u584a\u200b\u5275\u4e16\u72c0\u614b\u200b\u3002 \u200b\u7279\u5225\u200b\u662f\u200b\uff0c\u200b\u5b83\u200b\u8a2d\u7f6e\u200b\u53c3\u6578\u200b\u548c\u200b\u5275\u4e16\u200b\u5e33\u6236\u200b\uff08\u200b\u72c0\u614b\u200b\u548c\u200b\u4ee3\u78bc\u200b\uff09\u3002</p>"},{"location":"evm/#_25","title":"\u5c0e\u51fa\u200b\u5275\u4e16","text":"<p><code>ExportGenesis</code> ABCI \u200b\u51fd\u6578\u200b\u5c0e\u51fa\u200b EVM \u200b\u6a21\u584a\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\u3002 \u200b\u7279\u5225\u200b\u662f\u200b\uff0c\u200b\u5b83\u200b\u6aa2\u7d22\u200b\u6240\u6709\u200b\u5e33\u6236\u200b\u53ca\u5176\u200b\u5b57\u200b\u7bc0\u78bc\u200b\u3001\u200b\u9918\u984d\u200b\u548c\u200b\u5b58\u5132\u200b\u3001\u200b\u4ea4\u6613\u65e5\u200b\u8a8c\u200b\u3001 \u200b\u4ee5\u53ca\u200b EVM \u200b\u53c3\u6578\u200b\u548c\u200b\u93c8\u200b\u914d\u7f6e\u200b\u3002</p>"},{"location":"evm/#beginblock","title":"BeginBlock","text":"<p>EVM \u200b\u6a21\u584a\u200b<code>BeginBlock</code>\u200b\u908f\u8f2f\u200b\u5728\u200b\u8655\u7406\u200b\u4ea4\u6613\u200b\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u4e4b\u524d\u200b\u57f7\u884c\u200b\u3002 \u200b\u8a72\u200b\u529f\u80fd\u200b\u7684\u200b\u4e3b\u8981\u200b\u76ee\u6a19\u200b\u662f\u200b\uff1a</p> <ul> <li>\u200b\u8a2d\u7f6e\u200b\u7576\u524d\u200b\u5340\u584a\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u5340\u584a\u982d\u200b\u3001\u200b\u5b58\u5132\u200b\u3001\u200b\u7164\u6c23\u8868\u200b\u7b49\u200b\u3002   \u200b\u4e00\u65e6\u200b\u5728\u200b EVM \u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u671f\u9593\u200b\u8abf\u7528\u200b\u4e86\u200b StateDB \u200b\u51fd\u6578\u200b\u4e4b\u4e00\u200b\uff0cKeeper \u200b\u5c31\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u9019\u4e9b\u200b\u51fd\u6578\u200b\u3002</li> <li>\u200b\u8a2d\u7f6e\u200b EIP155 <code>ChainID</code> \u200b\u7de8\u865f\u200b\uff08\u200b\u5f9e\u200b\u5b8c\u6574\u200b\u7684\u200b\u93c8\u200b ID \u200b\u7372\u5f97\u200b\uff09\uff0c\u200b\u4ee5\u9632\u200b\u4e4b\u524d\u200b\u5728\u200b <code>InitChain</code> \u200b\u671f\u9593\u200b\u672a\u200b\u8a2d\u7f6e\u200b\u5b83\u200b</li> </ul>"},{"location":"evm/#_26","title":"\u7d50\u675f\u200b\u51fa\u584a","text":"<p>EVM \u200b\u6a21\u584a\u200b\u7684\u200b<code>EndBlock</code>\u200b\u908f\u8f2f\u200b\u767c\u751f\u200b\u5728\u200b\u57f7\u884c\u200b\u5b8c\u200b\u4ea4\u6613\u200b\u7684\u200b\u6240\u6709\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u4e4b\u200b\u5f8c\u200b\u3002 \u200b\u8a72\u200b\u529f\u80fd\u200b\u7684\u200b\u4e3b\u8981\u200b\u76ee\u6a19\u200b\u662f\u200b\uff1a</p> <ul> <li>\u200b\u767c\u51fa\u200b\u584a\u200b\u7dbb\u200b\u653e\u200b\u4e8b\u4ef6\u200b<ul> <li>\u200b\u9019\u662f\u200b\u7531\u200b\u65bc\u200b web3 \u200b\u517c\u5bb9\u6027\u200b\uff0c\u200b\u56e0\u70ba\u200b\u4ee5\u592a\u200b\u574a\u200b\u6a19\u982d\u200b\u5305\u542b\u200b\u6b64\u985e\u200b\u578b\u200b\u4f5c\u70ba\u200b\u5b57\u200b\u6bb5\u200b\u3002   JSON-RPC \u200b\u670d\u52d9\u200b\u4f7f\u7528\u200b\u6b64\u200b\u4e8b\u4ef6\u200b\u67e5\u8a62\u200b\u5f9e\u200b Tendermint \u200b\u6a19\u982d\u200b\u69cb\u9020\u200b\u4ee5\u592a\u200b\u574a\u200b\u6a19\u982d\u200b\u3002</li> <li>\u200b\u584a\u200b\u5e03\u9686\u200b\u904e\u6ffe\u5668\u200b\u503c\u200b\u5f9e\u200b\u77ac\u614b\u200b\u5b58\u5132\u4e2d\u200b\u7372\u53d6\u200b\uff0c\u200b\u7136\u5f8c\u767c\u51fa\u200b</li> </ul> </li> </ul>"},{"location":"evm/#_27","title":"\u9264\u5b50","text":"<p><code>x/evm</code> \u200b\u6a21\u584a\u200b\u5be6\u73fe\u200b\u4e86\u200b\u4e00\u500b\u200b <code>EvmHooks</code> \u200b\u63a5\u53e3\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5916\u90e8\u200b\u64f4\u5c55\u200b\u548c\u200b\u5b9a\u5236\u200b <code>Tx</code> \u200b\u8655\u7406\u200b\u908f\u8f2f\u200b\u3002</p> <p>\u200b\u9019\u200b\u652f\u6301\u200b EVM \u200b\u5408\u7d04\u200b\u8abf\u7528\u200b\u539f\u751f\u200b cosmos \u200b\u6a21\u584a\u200b</p> <ol> <li>\u200b\u5b9a\u7fa9\u65e5\u8a8c\u200b\u7c3d\u540d\u200b\u4e26\u5f9e\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u767c\u51fa\u200b\u7279\u5b9a\u200b\u65e5\u8a8c\u200b\uff0c</li> <li>\u200b\u5728\u200b\u672c\u6a5f\u200b tx \u200b\u8655\u7406\u4ee3\u78bc\u200b\u4e2d\u8b58\u5225\u200b\u9019\u4e9b\u200b\u65e5\u8a8c\u200b\uff0c\u200b\u4ee5\u53ca\u200b</li> <li>\u200b\u5c07\u5b83\u200b\u5011\u200b\u8f49\u63db\u200b\u70ba\u200b\u672c\u5730\u200b\u6a21\u584a\u200b\u8abf\u7528\u200b\u3002</li> </ol> <p>\u200b\u70ba\u200b\u6b64\u200b\uff0c\u200b\u63a5\u53e3\u200b\u5305\u542b\u200b\u4e00\u500b\u200b PostTxProcessing \u200b\u639b\u9264\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u5728\u200b EvmKeeper \u200b\u4e2d\u200b\u8a3b\u200b\u518a\u200b\u81ea\u200b\u5b9a\u200b\u7fa9\u200b\u7684\u200b Tx \u200b\u639b\u9264\u200b\u3002 \u200b\u9019\u4e9b\u200b<code>Tx</code>\u200b\u639b\u9264\u200b\u5728\u200b EVM \u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u5b8c\u6210\u200b\u4e26\u4e14\u200b\u4e0d\u6703\u200b\u5931\u6557\u200b\u5f8c\u200b\u9032\u884c\u200b\u8655\u7406\u200b\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0cEVM \u200b\u6a21\u584a\u200b\u4e2d\u200b\u6c92\u200b\u6709\u5be6\u200b\u73fe\u9ed8\u200b\u8a8d\u639b\u200b\u9264\u200b\u3002</p> <pre><code>type EvmHooks interface {\n // Must be called after tx is processed successfully, if return an error, the whole transaction is reverted.\n PostTxProcessing(ctx sdk.Context, msg core.Message, receipt *ethtypes.Receipt) error\n}\n</code></pre>"},{"location":"evm/#posttxprocessing","title":"<code>PostTxProcessing</code>","text":"<p><code>PostTxProcessing</code> \u200b\u50c5\u5728\u200b EVM \u200b\u4e8b\u52d9\u200b\u200b\u200b\u200b\u6210\u529f\u200b\u5b8c\u6210\u200b\u5f8c\u200b\u8abf\u7528\u200b\uff0c\u200b\u4e26\u5c07\u200b\u8abf\u7528\u59d4\u200b\u8a17\u200b\u7d66\u5e95\u200b\u5c64\u639b\u200b\u9264\u200b\u3002 \u200b\u5982\u679c\u200b\u6c92\u6709\u200b\u9264\u5b50\u200b\u88ab\u200b\u8a3b\u200b\u518a\u200b\uff0c\u200b\u9019\u500b\u200b\u51fd\u6578\u200b\u8fd4\u56de\u200b\u4e00\u500b\u200b<code>nil</code> \u200b\u932f\u8aa4\u200b\u3002 .</p> <pre><code>func (k *Keeper) PostTxProcessing(ctx sdk.Context, msg core.Message, receipt *ethtypes.Receipt) error {\n if k.hooks == nil {\n  return nil\n }\n return k.hooks.PostTxProcessing(k.Ctx(), msg, receipt)\n}\n</code></pre> <p>\u200b\u5b83\u200b\u8207\u200b EVM \u200b\u4e8b\u52d9\u200b\u200b\u200b\u200b\u5728\u200b\u76f8\u540c\u200b\u7684\u200b\u7de9\u5b58\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u57f7\u884c\u200b\uff0c\u200b\u5982\u679c\u200b\u5b83\u200b\u8fd4\u56de\u200b\u932f\u8aa4\u200b\uff0c\u200b\u6574\u500b\u200b EVM \u200b\u4e8b\u52d9\u200b\u200b\u200b\u200b\u5c07\u88ab\u200b\u9084\u539f\u200b\uff0c\u200b\u5982\u679c\u200b hook \u200b\u5be6\u73fe\u200b\u8005\u200b\u4e0d\u60f3\u200b\u9084\u539f\u200b tx\uff0c\u200b\u4ed6\u5011\u200b\u7e3d\u662f\u200b\u53ef\u4ee5\u200b\u8fd4\u56de\u200b <code>nil</code>\u3002</p> <p>\u200b\u9264\u5b50\u200b\u8fd4\u56de\u200b\u7684\u200b\u932f\u8aa4\u200b\u88ab\u200b\u8f49\u63db\u200b\u70ba\u200b VM \u200b\u932f\u8aa4\u200b<code>\u200b\u7121\u6cd5\u200b\u8655\u7406\u200b\u672c\u6a5f\u200b\u65e5\u8a8c\u200b</code>\uff0c\u200b\u8a73\u7d30\u200b\u7684\u200b\u932f\u8aa4\u200b\u6d88\u606f\u200b\u5b58\u5132\u200b\u5728\u200b\u8fd4\u56de\u503c\u200b\u4e2d\u200b\u3002 \u200b\u6d88\u606f\u200b\u7570\u6b65\u200b\u767c\u200b\u9001\u5230\u200b\u672c\u6a5f\u200b\u6a21\u584a\u200b\uff0c\u200b\u8abf\u7528\u8005\u200b\u7121\u6cd5\u6355\u200b\u7372\u200b\u548c\u200b\u6062\u200b\u5fa9\u200b\u932f\u8aa4\u200b\u3002</p> <p>** \u200b\u7528\u4f8b\u200b\uff1a\u200b\u5728\u200b Daodst \u200b\u4e0a\u200b\u8abf\u7528\u200b\u539f\u751f\u200b ERC20 \u200b\u6a21\u584a\u200b **</p> <p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u53d6\u81ea\u200b Daodst erc20 \u200b\u6a21\u584a\u200b \u200b\u7684\u200b\u793a\u4f8b\u200b\uff0c\u200b\u5c55\u793a\u200b\u4e86\u200b<code>EVMHooks</code>\u200b\u5982\u4f55\u200b\u652f\u6301\u200b\u8abf\u7528\u200b\u539f\u751f\u200b\u6a21\u584a\u200b\u4ee5\u5c07\u200b ERC-20 \u200b\u4ee3\u5e63\u200b\u8f49\u63db\u200b\u70ba\u200b Cosmos \u200b\u539f\u751f\u200b\u4ee3\u5e63\u200b\u7684\u200b\u5408\u7d04\u200b\u3002 \u200b\u6309\u7167\u200b\u4e0a\u9762\u200b\u7684\u200b\u6b65\u9a5f\u200b\u3002</p> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u50cf\u200b\u9019\u6a23\u200b\u5728\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u4e2d\u5b9a\u200b\u7fa9\u4e26\u200b\u767c\u51fa\u200b\u4e00\u500b\u200b\u201cTransfer\u201d\u200b\u65e5\u8a8c\u200b\u7c3d\u540d\u200b\uff1a</p> <pre><code>event Transfer(address indexed from, address indexed to, uint256 value);\n\nfunction _transfer(address sender, address recipient, uint256 amount) internal virtual {\n  require(sender != address(0), \"ERC20: transfer from the zero address\");\n  require(recipient != address(0), \"ERC20: transfer to the zero address\");\n\n  _beforeTokenTransfer(sender, recipient, amount);\n\n  _balances[sender] = _balances[sender].sub(amount, \"ERC20: transfer amount exceeds balance\");\n  _balances[recipient] = _balances[recipient].add(amount);\n  emit Transfer(sender, recipient, amount);\n}\n</code></pre> <p>\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5c07\u5411\u200b <code>EvmKeeper</code> \u200b\u8a3b\u200b\u518a\u200b\u4e00\u200b\u500b\u200b <code>BankSendHook</code>\u3002 \u200b\u5b83\u8b58\u5225\u200b\u4ee5\u592a\u200b\u574a\u200b tx <code>Log</code> \u200b\u4e26\u5c07\u200b\u5176\u200b\u8f49\u63db\u200b\u70ba\u200b\u5c0d\u200b\u9280\u884c\u200b\u6a21\u584a\u200b\u7684\u200b <code>SendCoinsFromAccountToAccount</code> \u200b\u65b9\u6cd5\u200b\u7684\u200b\u8abf\u7528\u200b\uff1a</p> <pre><code>\nconst ERC20EventTransfer = \"Transfer\"\n\n// PostTxProcessing implements EvmHooks.PostTxProcessing\nfunc (k Keeper) PostTxProcessing(\n ctx sdk.Context,\n msg core.Message,\n receipt *ethtypes.Receipt,\n) error {\n params := h.k.GetParams(ctx)\n if !params.EnableErc20 || !params.EnableEVMHook {\n  // no error is returned to allow for other post-processing txs\n  // to pass\n  return nil\n }\n\n erc20 := contracts.ERC20BurnableContract.ABI\n\n for i, log := range receipt.Logs {\n  if len(log.Topics) &lt; 3 {\n   continue\n  }\n\n  eventID := log.Topics[0] // event ID\n\n  event, err := erc20.EventByID(eventID)\n  if err != nil {\n   // invalid event for ERC20\n   continue\n  }\n\n  if event.Name != types.ERC20EventTransfer {\n   h.k.Logger(ctx).Info(\"emitted event\", \"name\", event.Name, \"signature\", event.Sig)\n   continue\n  }\n\n  transferEvent, err := erc20.Unpack(event.Name, log.Data)\n  if err != nil {\n   h.k.Logger(ctx).Error(\"failed to unpack transfer event\", \"error\", err.Error())\n   continue\n  }\n\n  if len(transferEvent) == 0 {\n   continue\n  }\n\n  tokens, ok := transferEvent[0].(*big.Int)\n  // safety check and ignore if amount not positive\n  if !ok || tokens == nil || tokens.Sign() != 1 {\n   continue\n  }\n\n  // check that the contract is a registered token pair\n  contractAddr := log.Address\n\n  id := h.k.GetERC20Map(ctx, contractAddr)\n\n  if len(id) == 0 {\n   // no token is registered for the caller contract\n   continue\n  }\n\n  pair, found := h.k.GetTokenPair(ctx, id)\n  if !found {\n   continue\n  }\n\n  // check that conversion for the pair is enabled\n  if !pair.Enabled {\n   // continue to allow transfers for the ERC20 in case the token pair is disabled\n   h.k.Logger(ctx).Debug(\n    \"ERC20 token -&gt; Cosmos coin conversion is disabled for pair\",\n    \"coin\", pair.Denom, \"contract\", pair.Erc20Address,\n   )\n   continue\n  }\n\n  // ignore as the burning always transfers to the zero address\n  to := common.BytesToAddress(log.Topics[2].Bytes())\n  if !bytes.Equal(to.Bytes(), types.ModuleAddress.Bytes()) {\n   continue\n  }\n\n  // check that the event is Burn from the ERC20Burnable interface\n  // NOTE: assume that if they are burning the token that has been registered as a pair, they want to mint a Cosmos coin\n\n  // create the corresponding sdk.Coin that is paired with ERC20\n  coins := sdk.Coins{{Denom: pair.Denom, Amount: sdk.NewIntFromBigInt(tokens)}}\n\n  // Mint the coin only if ERC20 is external\n  switch pair.ContractOwner {\n  case types.OWNER_MODULE:\n   _, err = h.k.CallEVM(ctx, erc20, types.ModuleAddress, contractAddr, true, \"burn\", tokens)\n  case types.OWNER_EXTERNAL:\n   err = h.k.bankKeeper.MintCoins(ctx, types.ModuleName, coins)\n  default:\n   err = types.ErrUndefinedOwner\n  }\n\n  if err != nil {\n   h.k.Logger(ctx).Debug(\n    \"failed to process EVM hook for ER20 -&gt; coin conversion\",\n    \"coin\", pair.Denom, \"contract\", pair.Erc20Address, \"error\", err.Error(),\n   )\n   continue\n  }\n\n  // Only need last 20 bytes from log.topics\n  from := common.BytesToAddress(log.Topics[1].Bytes())\n  recipient := sdk.AccAddress(from.Bytes())\n\n  // transfer the tokens from ModuleAccount to sender address\n  if err := h.k.bankKeeper.SendCoinsFromModuleToAccount(ctx, types.ModuleName, recipient, coins); err != nil {\n   h.k.Logger(ctx).Debug(\n    \"failed to process EVM hook for ER20 -&gt; coin conversion\",\n    \"tx-hash\", receipt.TxHash.Hex(), \"log-idx\", i,\n    \"coin\", pair.Denom, \"contract\", pair.Erc20Address, \"error\", err.Error(),\n   )\n   continue\n  }\n }\n\n return nil\n</code></pre> <p>\u200b\u6700\u200b\u5f8c\u200b\uff0c\u200b\u5728\u200b app.go \u200b\u4e2d\u200b\u8a3b\u200b\u518a\u200b\u9264\u200b\u5b50\u200b\uff1a</p> <pre><code>app.EvmKeeper = app.EvmKeeper.SetHooks(app.Erc20Keeper)\n</code></pre>"},{"location":"evm/#_28","title":"\u4e8b\u4ef6","text":"<p><code>x/evm</code> \u200b\u6a21\u584a\u200b\u5728\u200b\u72c0\u614b\u200b\u57f7\u884c\u200b\u5f8c\u200b\u767c\u51fa\u200b Cosmos SDK \u200b\u4e8b\u4ef6\u200b\u3002 EVM \u200b\u6a21\u584a\u200b\u767c\u51fa\u200b\u76f8\u95dc\u200b\u4ea4\u6613\u200b\u5b57\u6bb5\u200b\u7684\u200b\u4e8b\u4ef6\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4ea4\u6613\u65e5\u200b\u8a8c\u200b\uff08\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e8b\u4ef6\u200b\uff09\u3002</p>"},{"location":"evm/#msgethereumtx_2","title":"MsgEthereumTx","text":"\u7c7b\u578b\u200b \u200b\u5c5e\u6027\u200b Key \u200b\u5c5e\u6027\u200b Value ethereum_tx <code>\"amount\"</code> <code>{amount}</code> ethereum_tx <code>\"recipient\"</code> <code>{hex_address}</code> ethereum_tx <code>\"contract\"</code> <code>{hex_address}</code> ethereum_tx <code>\"txHash\"</code> <code>{tendermint_hex_hash}</code> ethereum_tx <code>\"ethereumTxHash\"</code> <code>{hex_hash}</code> ethereum_tx <code>\"txIndex\"</code> <code>{tx_index}</code> ethereum_tx <code>\"txGasUsed\"</code> <code>{gas_used}</code> tx_log <code>\"txLog\"</code> <code>{tx_log}</code> message <code>\"sender\"</code> <code>{eth_address}</code> message <code>\"action\"</code> <code>\"ethereum\"</code> message <code>\"module\"</code> <code>\"evm\"</code> <p>\u200b\u6b64\u5916\u200b\uff0cEVM \u200b\u6a21\u584a\u200b\u5728\u200b<code>EndBlock</code>\u200b\u671f\u9593\u200b\u70ba\u200b\u904e\u6ffe\u5668\u200b\u67e5\u8a62\u200b\u584a\u200b bloom \u200b\u767c\u51fa\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\u3002</p>"},{"location":"evm/#abci_1","title":"ABCI","text":"\u985e\u578b\u200b \u200b\u5c6c\u6027\u200b Key \u200b\u5c6c\u6027\u200b Value block_bloom <code>\"bloom\"</code> <code>string(bloomBytes)</code>"},{"location":"evm/#_29","title":"\u53c3\u6578","text":"<p>evm \u200b\u6a21\u584a\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u53c3\u6578\u200b\uff1a</p>"},{"location":"evm/#_30","title":"\u6a21\u584a\u200b\u53c3\u6578","text":"Key \u200b\u6578\u64da\u200b\u985e\u578b\u200b \u200b\u9ed8\u200b\u8a8d\u503c\u200b <code>EVMDenom</code> string <code>\"dst\"</code> <code>EnableCreate</code> bool <code>true</code> <code>EnableCall</code> bool <code>true</code> <code>ExtraEIPs</code> []int TBD <code>ChainConfig</code> ChainConfig See ChainConfig <p>:::\u200b\u63d0\u793a\u200b \u200b\u6ce8\u610f\u200b\uff1aSDK \u200b\u61c9\u7528\u200b\u60f3\u8981\u200b\u5c0e\u5165\u200b EVM \u200b\u6a21\u584a\u200b\u4f5c\u70ba\u200b\u4f9d\u8cf4\u200b \u200b\u5c07\u200b\u9700\u8981\u200b\u8a2d\u7f6e\u200b\u81ea\u5df1\u200b\u7684\u200b <code>evm_denom</code>\uff08\u200b\u5373\u200b\u4e0d\u662f\u200b <code>\"dst\"</code>\uff09\u3002 :::</p>"},{"location":"evm/#enablecreate","title":"EnableCreate","text":"<p>EnableCreate \u200b\u53c3\u6578\u200b\u5207\u63db\u200b\u4f7f\u7528\u200b<code>vm.Create</code>\u200b\u51fd\u6578\u200b\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002 \u200b\u7576\u200b\u7981\u7528\u200b\u8a72\u200b\u53c3\u6578\u200b\u6642\u200b\uff0c\u200b\u5b83\u5c07\u200b\u963b\u6b62\u200b\u6240\u6709\u200b\u5408\u7d04\u200b\u5275\u5efa\u200b\u529f\u80fd\u200b\u3002</p>"},{"location":"evm/#enablecall","title":"EnableCall","text":"<p>EnableCall \u200b\u53c3\u6578\u200b\u5207\u63db\u200b\u4f7f\u7528\u200b <code>vm.Call</code> \u200b\u51fd\u6578\u200b\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002 \u200b\u7576\u8a72\u200b\u53c3\u6578\u200b\u88ab\u200b\u7981\u7528\u200b\u6642\u200b\uff0c\u200b\u5b83\u5c07\u200b\u963b\u6b62\u200b\u8cec\u6236\u200b\u4e4b\u9593\u200b\u7684\u200b\u8f49\u8cec\u200b\u548c\u200b\u57f7\u884c\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u8abf\u7528\u200b\u3002</p>"},{"location":"evm/#extra-eips","title":"Extra EIPs","text":"<p>\u200b\u984d\u5916\u200b\u7684\u200b EIPs \u200b\u53c3\u6578\u200b\u5728\u200b\u61c9\u7528\u200b\u81ea\u5b9a\u200b\u7fa9\u8df3\u200b\u8f49\u8868\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b VM <code>Config</code> \u200b\u4e0a\u5b9a\u200b\u7fa9\u4e86\u200b\u4e00\u7d44\u200b\u53ef\u200b\u6fc0\u6d3b\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u6539\u9032\u200b\u5efa\u8b70\u200b (EIPs)\u3002</p> <p>:::\u200b\u63d0\u793a\u200b \u200b\u6ce8\u610f\u200b: \u200b\u5176\u4e2d\u200b\u4e00\u4e9b\u200b EIP \u200b\u5df2\u7d93\u200b\u901a\u904e\u200b\u93c8\u200b\u914d\u7f6e\u200b\u555f\u7528\u200b\uff0c\u200b\u5177\u9ad4\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u786c\u200b\u5206\u53c9\u200b\u6578\u91cf\u200b\u3002 :::</p> <p>\u200b\u652f\u6301\u200b\u7684\u200b\u53ef\u200b\u6fc0\u6d3b\u200b EIPS \u200b\u662f\u200b\uff1a</p> <ul> <li>EIP 1344</li> <li>EIP 1884</li> <li>EIP 2200</li> <li>EIP 2315</li> <li>EIP 2929</li> <li>EIP 3198</li> <li>EIP 3529</li> </ul>"},{"location":"evm/#chain-config","title":"Chain Config","text":"<p><code>ChainConfig</code> \u200b\u662f\u200b\u4e00\u7a2e\u200b protobuf \u200b\u5305\u88dd\u5668\u200b\u985e\u578b\u200b\uff0c\u200b\u5b83\u200b\u5305\u542b\u200b\u8207\u200b go-ethereum <code>ChainConfig</code> \u200b\u53c3\u6578\u200b\u76f8\u540c\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u4f46\u200b\u4f7f\u7528\u200b<code>*sdk.Int</code> \u200b\u985e\u578b\u200b\u800c\u200b\u4e0d\u662f\u200b<code>*big.Int</code>\u3002</p> <p>\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u9664\u4e86\u200b<code>ConstantinopleBlock</code>\u200b\u4e4b\u5916\u200b\u7684\u200b\u6240\u6709\u200b\u584a\u200b\u914d\u7f6e\u200b\u5b57\u6bb5\u200b\u90fd\u200b\u5728\u200b\u5275\u4e16\u7d00\u200b\uff08\u200b\u9ad8\u5ea6\u200b 0\uff09\u200b\u555f\u7528\u200b\u3002</p>"},{"location":"evm/#chainconfig","title":"\u9ed8\u8ba4\u200b ChainConfig","text":"\u540d\u79f0\u200b \u200b\u9ed8\u8ba4\u503c\u200b HomesteadBlock 0 DAOForkBlock 0 DAOForkSupport <code>true</code> EIP150Block 0 EIP150Hash <code>0x0000000000000000000000000000000000000000000000000000000000000000</code> EIP155Block 0 EIP158Block 0 ByzantiumBlock 0 ConstantinopleBlock 0 PetersburgBlock 0 IstanbulBlock 0 MuirGlacierBlock 0 BerlinBlock 0 LondonBlock 0 ArrowGlacierBlock 0 GrayGlacierBlock 0 MergeNetsplitBlock 0 ShanghaiBlock 0 CancunBlock. 0"},{"location":"evm/#_31","title":"\u5ba2\u6236\u200b\u7aef","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b CLI\u3001JSON-RPC\u3001gRPC \u200b\u6216\u200b REST \u200b\u67e5\u8a62\u200b <code>evm</code> \u200b\u6a21\u584a\u200b\u4e26\u8207\u200b\u4e4b\u200b\u4ea4\u4e92\u200b\u3002</p>"},{"location":"evm/#cli","title":"CLI","text":"<p>\u200b\u5728\u200b\u4e0b\u9762\u200b\u627e\u5230\u200b\u4f7f\u7528\u200b <code>x/evm</code> \u200b\u6a21\u584a\u200b\u6dfb\u52a0\u200b\u7684\u200b <code>stcd</code> \u200b\u547d\u4ee4\u200b\u5217\u8868\u200b\u3002 \u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>stcd -h</code> \u200b\u547d\u4ee4\u200b\u7372\u53d6\u200b\u5b8c\u6574\u200b\u5217\u8868\u200b\u3002</p>"},{"location":"evm/#_32","title":"\u67e5\u8a62","text":"<p><code>query</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b <code>evm</code> \u200b\u72c0\u614b\u200b\u3002</p> <p><code>code</code></p> <p>\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u5730\u5740\u200b\u7684\u200b\u667a\u80fd\u200b\u5408\u7d04\u4ee3\u78bc\u200b\u3002</p> <pre><code>stcd query evm code ADDRESS [flags]\n</code></pre> <pre><code># Example\n$ stcd query evm code 0x7bf7b17da59880d9bcca24915679668db75f9397\n\n# Output\ncode: \"0xef616c92f3cfc9e92dc270d6acff9cea213cecc7020a76ee4395af09bdceb4837a1ebdb5735e11e7d3adb6104e0c3ac55180b4ddf5e54d022cc5e8837f6a4f971b\"\n</code></pre> <p><code>storage</code></p> <p>\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u5177\u6709\u200b\u7d66\u5b9a\u9375\u200b\u548c\u200b\u9ad8\u5ea6\u200b\u7684\u200b\u5e33\u6236\u200b\u7684\u200b\u5b58\u5132\u200b\u3002</p> <pre><code>stcd query evm storage ADDRESS KEY [flags]\n</code></pre> <pre><code># Example\n$ stcd query evm storage 0x0f54f47bf9b8e317b214ccd6a7c3e38b893cd7f0 0 --height 0\n\n# Output\nvalue: \"0x0000000000000000000000000000000000000000000000000000000000000000\"\n</code></pre>"},{"location":"evm/#_33","title":"\u4ea4\u6613","text":"<p><code>tx</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u8207\u200b <code>evm</code> \u200b\u6a21\u584a\u200b\u9032\u884c\u200b\u4ea4\u4e92\u200b\u3002</p> <p><code>raw</code></p> <p>\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u5f9e\u200b\u539f\u59cb\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u69cb\u5efa\u200b cosmos \u200b\u4ea4\u6613\u200b\u3002</p> <pre><code>stcd tx evm raw TX_HEX [flags]\n</code></pre> <pre><code># Example\n$ stcd tx evm raw 0xf9ff74c86aefeb5f6019d77280bbb44fb695b4d45cfe97e6eed7acd62905f4a85034d5c68ed25a2e7a8eeb9baf1b84\n\n# Output\nvalue: \"0x0000000000000000000000000000000000000000000000000000000000000000\"\n</code></pre>"},{"location":"evm/#grpc","title":"gRPC","text":""},{"location":"evm/#_34","title":"\u67e5\u8a62","text":"Verb Method \u200b\u8aaa\u660e\u200b <code>gRPC</code> <code>ethermint.evm.v1.Query/Account</code> \u200b\u7372\u53d6\u200b\u4ee5\u592a\u200b\u574a\u200b\u8cec\u6236\u200b <code>gRPC</code> <code>ethermint.evm.v1.Query/CosmosAccount</code> \u200b\u7372\u53d6\u200b\u4ee5\u592a\u200b\u574a\u200b\u8cec\u6236\u200b\u7684\u200b Cosmos \u200b\u5730\u5740\u200b <code>gRPC</code> <code>ethermint.evm.v1.Query/ValidatorAccount</code> \u200b\u5f9e\u9a57\u200b\u8b49\u8005\u200b\u5171\u8b58\u200b\u5730\u5740\u200b\u7372\u53d6\u200b\u4ee5\u592a\u200b\u574a\u200b\u8cec\u6236\u200b <code>gRPC</code> <code>ethermint.evm.v1.Query/Balance</code> \u200b\u7372\u53d6\u200b\u55ae\u500b\u200b EthAccount \u200b\u7684\u200b EVM \u200b\u9762\u984d\u200b\u9918\u984d\u200b. <code>gRPC</code> <code>ethermint.evm.v1.Query/Storage</code> \u200b\u7372\u53d6\u200b\u55ae\u500b\u200b\u8cec\u6236\u200b\u6240\u6709\u200b\u5e63\u7684\u200b\u9918\u984d\u200b <code>gRPC</code> <code>ethermint.evm.v1.Query/Code</code> \u200b\u7372\u53d6\u200b\u55ae\u500b\u200b\u8cec\u6236\u200b\u6240\u6709\u200b\u5e63\u7684\u200b\u9918\u984d\u200b <code>gRPC</code> <code>ethermint.evm.v1.Query/Params</code> \u200b\u7372\u53d6\u200bx/evm\u200b\u6a21\u584a\u200b\u7684\u200b\u53c3\u6578\u200b <code>gRPC</code> <code>ethermint.evm.v1.Query/EthCall</code> \u200b\u5be6\u73fe\u200b eth_call rpc api <code>gRPC</code> <code>ethermint.evm.v1.Query/EstimateGas</code> \u200b\u5be6\u73fe\u200b eth_estimateGas rpc api <code>gRPC</code> <code>ethermint.evm.v1.Query/TraceTx</code> \u200b\u5be6\u73fe\u200b debug_traceTransaction rpc api <code>gRPC</code> <code>ethermint.evm.v1.Query/TraceBlock</code> \u200b\u5be6\u73fe\u200b debug_traceBlockByNumber \u200b\u548c\u200b debug_traceBlockByHash rpc api <code>GET</code> <code>/ethermint/evm/v1/account/{address}</code> \u200b\u7372\u53d6\u200b\u4ee5\u592a\u200b\u574a\u200b\u8cec\u6236\u200b <code>GET</code> <code>/ethermint/evm/v1/cosmos_account/{address}</code> \u200b\u7372\u53d6\u200b\u4ee5\u592a\u200b\u574a\u200b\u8cec\u6236\u200b\u7684\u200b Cosmos \u200b\u5730\u5740\u200b <code>GET</code> <code>/ethermint/evm/v1/validator_account/{cons_address}</code> \u200b\u5f9e\u9a57\u200b\u8b49\u8005\u200b\u5171\u8b58\u200b\u5730\u5740\u200b\u7372\u53d6\u200b\u4ee5\u592a\u200b\u574a\u200b\u8cec\u6236\u200b <code>GET</code> <code>/ethermint/evm/v1/balances/{address}</code> \u200b\u7372\u53d6\u200b\u55ae\u500b\u200b EthAccount \u200b\u7684\u200b EVM \u200b\u9762\u984d\u200b\u9918\u984d\u200b. <code>GET</code> <code>/ethermint/evm/v1/storage/{address}/{key}</code> \u200b\u7372\u53d6\u200b\u55ae\u500b\u200b\u8cec\u6236\u200b\u6240\u6709\u200b\u5e63\u7684\u200b\u9918\u984d\u200b <code>GET</code> <code>/ethermint/evm/v1/codes/{address}</code> \u200b\u7372\u53d6\u200b\u55ae\u500b\u200b\u8cec\u6236\u200b\u6240\u6709\u200b\u5e63\u7684\u200b\u9918\u984d\u200b <code>GET</code> <code>/ethermint/evm/v1/params</code> \u200b\u7372\u53d6\u200bx/evm\u200b\u6a21\u584a\u200b\u7684\u200b\u53c3\u6578\u200b <code>GET</code> <code>/ethermint/evm/v1/eth_call</code> \u200b\u5be6\u73fe\u200b eth_call rpc api <code>GET</code> <code>/ethermint/evm/v1/estimate_gas</code> \u200b\u5be6\u73fe\u200b eth_estimateGas rpc api <code>GET</code> <code>/ethermint/evm/v1/trace_tx</code> \u200b\u5be6\u73fe\u200b debug_traceTransaction rpc api <code>GET</code> <code>/ethermint/evm/v1/trace_block</code> \u200b\u5be6\u73fe\u200b debug_traceBlockByNumber \u200b\u548c\u200b debug_traceBlockByHash rpc api"},{"location":"evm/#_35","title":"\u4ea4\u6613","text":"Verb Method \u200b\u8aaa\u660e\u200b <code>gRPC</code> <code>ethermint.evm.v1.Msg/EthereumTx</code> \u200b\u63d0\u4ea4\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b <code>POST</code> <code>/ethermint/evm/v1/ethereum_tx</code> \u200b\u63d0\u4ea4\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613"},{"location":"faq/","title":"\u901a\u7528\u200bFAQ","text":"<p>\u200b\u67e5\u770b\u200b\u95dc\u65bc\u5728\u200b DST \u200b\u4e0a\u200b\u7684\u200b\u5e38\u898b\u200b\u554f\u984c\u200b\u89e3\u7b54\u200b\u3002</p>"},{"location":"faq/#app","title":"APP","text":"APP\u200b\u67e5\u8a62\u200b\u6578\u64da\u200b\u70ba\u200b\u4f55\u6703\u9a57\u8b49\u200b\u5931\u6557\u200b? <p> APP\u200b\u7684\u200b\u9918\u984d\u200b\u67e5\u8a62\u200b\u548c\u200bTX\u200b\u7d50\u679c\u200b\u7684\u200b\u67e5\u8a62\u200b\u662f\u200b\u6709\u9632\u200b\u4f5c\u5f0a\u200b\u6821\u9a57\u200b\u6a5f\u5236\u200b\uff0c\u200b\u5982\u679c\u200b\u6821\u9a57\u200b\u7d50\u679c\u200b\u4e0d\u6b63\u200b\u78ba\u200b\uff0c\u200b\u5247\u6703\u200b\u9047\u5230\u200b\u6578\u64da\u200b\u67e5\u8a62\u200b\u6821\u9a57\u200b\u5931\u6557\u200b\u3002 </p> <p> APP\u200b\u555f\u52d5\u200b\u6642\u6703\u200b\u521d\u59cb\u5316\u200b\u9a57\u8b49\u200b\u7528\u6236\u200b\u7aef\u200b\uff0c\u200b\u5728\u200b\u53ef\u7528\u200b\u9598\u9053\u200b\u7bc0\u9ede\u88e1\u200b\u9762\u9078\u200b\u53d6\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u7576\u67e5\u200b\u8a62\u9918\u984d\u200b\u548c\u200b\u67fb\u200b\u8a62\u200bTX\u200b\u72c0\u614b\u200b\u6642\u200b\uff0c\u200b\u67e5\u8a62\u200b\u7d50\u679c\u200b\u6703\u200b\u548c\u200b\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u9032\u884c\u200b\u6821\u9a57\u200b\uff0c\u200b\u5982\u679c\u200b\u6821\u9a57\u200b\u4e0d\u901a\u200b\u904e\u5247\u200b\u6703\u200b\u63d0\u793a\u200b\u932f\u8aa4\u200b</p>"},{"location":"faq/#_1","title":"\u7db2\u8def\u200b\u76f8\u95dc","text":"\u670d\u52d9\u5668\u200b\u9700\u8981\u200b\u958b\u653e\u200b\u54ea\u4e9b\u200b\u7aef\u53e3\u200b\u865f\u200b? <p> TCP\u200b\u958b\u653e\u200b\u7aef\u53e3\u200b\uff1a1317 , 8545 , 23478 , 26656 , 26657 , 28008 , 28043 , 50327 , 50328 </p> <p> UDP\u200b\u958b\u653e\u200b\u7aef\u53e3\u200b\uff1a3478, 50000~55000 </p> \u200b\u9598\u9053\u200b\u5730\u5740\u200b\u70ba\u200b\u4f55\u6703\u9a57\u8b49\u200b\u5931\u6557\u200b\uff1f \u200b\u5982\u4f55\u200b\u89e3\u51b3\u200b\uff1f <p> 1.\u200b\u9996\u5148\u200b\u89e3\u91cb\u200b\u4e0b\u200b\u70ba\u200b\u4ec0\u9ebc\u200b\u6703\u200b\u51fa\u73fe\u200b\u9598\u9053\u200b\u5730\u5740\u200b\u9a57\u8b49\u200b\u5931\u6557\u200b </p> <p> \u200b\u7531\u200b\u65bc\u200b\u9598\u9053\u200b\u5730\u5740\u200b\u9700\u8981\u200b\u5c0d\u5916\u200b\u63d0\u4f9b\u200b\u670d\u52d9\u200b\uff0c\u200b\u9019\u5c31\u200b\u8981\u6c42\u200b\u9598\u9053\u200b\u5730\u5740\u200b\u5c0d\u5916\u200b\u5fc5\u9808\u200b\u662f\u200b\u958b\u653e\u200b\u7684\u200b\u3002 </p> <p> \u200b\u56d9\u200b\u6b64\u200b\uff0c\u200b\u5728\u200b\u8a2d\u5b9a\u200b\u9598\u9053\u200b\u5730\u5740\u200b\u6642\u200b\uff0c\u200b\u6703\u200b\u901a\u904e\u200b\u4e92\u806f\u7db2\u200b\u53bb\u200b\u6e2c\u8a66\u200b\u5730\u5740\u200b\u7684\u9023\u200b\u901a\u6027\u200b\u3002 \u200b\u7576\u8acb\u6c42\u200b\u767c\u9001\u200b\u5931\u6557\u200b\u6216\u8005\u200b\u8acb\u6c42\u200b\u7d50\u679c\u200b\u4e0d\u6b63\u200b\u78ba\u6642\u200b\uff0c\u200b\u5c31\u6703\u200b\u62cb\u51fa\u200b\u9598\u9053\u200b\u5730\u5740\u200b\u9a57\u8b49\u200b\u5931\u6557\u200b\u7684\u200b\u932f\u8aa4\u200b\u3002 </p> <p> 2.\u200b\u5982\u4f55\u200b\u89e3\u51b3\u200b\u9598\u9053\u200b\u5730\u5740\u200b\u9a57\u8b49\u200b\u5931\u6557\u200b\u7684\u200b\u554f\u984c\u200b </p> <p> \u200b\u9598\u9053\u200b\u5730\u5740\u200b\u9a57\u8b49\u200b\u5931\u6557\u200b\u672c\u8cea\u200b\u4e0a\u200b\u9084\u662f\u200b\u7db2\u7d61\u200b\u8a2a\u554f\u200b\u4e0d\u901a\u200b\uff0c\u200b\u8981\u200b\u5f9e\u200b\u7db2\u8def\u5c64\u200b\u4f86\u200b\u89e3\u51b3\u200b\u3002 \u200b\u89e3\u51b3\u200b\u9700\u8981\u200b\u4e00\u5b9a\u200b\u7684\u200b\u52d5\u624b\u200b\u80fd\u529b\u200b\uff0c\u200b\u5982\u679c\u200b\u6709\u200b\u56f0\u96e3\u200b\u5efa\u8b70\u200b\u5c0b\u627e\u200b\u5c0f\u5925\u4f34\u200b\u4f86\u200b\u5e6b\u52a9\u200b\u3002 <ul> <li>\u200b\u9996\u5148\u200b\u6aa2\u67e5\u200b\u8def\u7531\u5668\u200b\u8a2d\u5b9a\u200b\u662f\u5426\u200b\u6b63\u78ba\u200b\uff0c\u200b\u662f\u5426\u200b\u6b63\u78ba\u200b\u8a2d\u5b9a\u200b\u4e86\u200b\u57e0\u200b\u6620\u5c04\u200b\uff08\u200b\u9700\u8981\u200b\u6620\u5c04\u200b\u7684\u200b\u57e0\u200b\u865f\u6e05\u55ae\u200b\u53c3\u200b\u6537\u200b\u7576\u200b\u524d\u200b\u9801\u200b\u9762\u200b\u7684\u200b\u4ecb\u200b\u7d39\u200b\uff09</li> <li>\u200b\u5982\u679c\u200b\u9084\u672a\u200b\u89e3\u51b3\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u6aa2\u67e5\u200b\u670d\u52d9\u5668\u200b\u7684\u200b\u9632\u706b\u200b\u7246\u200b\u662f\u5426\u200b\u555f\u7528\u200b\uff0c\u200b\u5982\u679c\u200b\u5df2\u200b\u555f\u52d5\u200b\u8acb\u200b\u6aa2\u67e5\u200b\u9700\u8981\u200b\u958b\u653e\u200b\u7684\u200b\u57e0\u200b\u6e05\u55ae\u200b\u662f\u5426\u200b\u90fd\u200b\u5df2\u7d93\u200b\u958b\u653e\u200b\u4e86\u200b.</li> <li>\u200b\u5982\u679c\u200b\u9084\u672a\u200b\u89e3\u51b3\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u806f\u7cfb\u200b\u7576\u524d\u200b\u7684\u200b\u7db2\u7d61\u4f9b\u200b\u61c9\u5546\u200b\uff0c\u200b\u5411\u200b\u5176\u200b\u8aaa\u660e\u200b\u9700\u8981\u200b\u958b\u653e\u200b\u7684\u200b\u57e0\u200b\u6e05\u55ae\u200b\uff0c\u200b\u8b93\u200b\u5176\u200b\u5e6b\u52a9\u200b\u89e3\u6c7a\u200b.</li>"},{"location":"gateway/","title":"\u7db2\u95dc","text":"<p>\u200b\u6b64\u6a21\u584a\u200b\u8ca0\u8cac\u7db2\u200b\u95dc\u93c8\u200b\u4e0a\u200b\u6578\u64da\u200b\u7684\u200b\u7ba1\u7406\u200b</p> <pre><code>chat/\n\u251c\u2500\u2500 client\n\u2502   \u2514\u2500\u2500 rest\n\u2502        \u251c\u2500\u2500 error.go          # \u200b\u4ecb\u9762\u200b\u932f\u8aa4\u200b\u96c6\u200b\n\u2502        \u251c\u2500\u2500 grpc.go           # grpc\u200b\u67fb\u200b\u8a62\u200b\u65b9\u6cd5\u200b\n\u2502        \u251c\u2500\u2500 handle_comm.go    # comm\u200b\u6a21\u584a\u200b\u6d88\u606f\u200b\u524d\u7f6e\u200b\u8655\u7406\u200b\n\u2502        \u251c\u2500\u2500 handle_msg.go    # comm\u200b\u6a21\u584a\u200b\u6d88\u606f\u200b\u524d\u7f6e\u200b\u8655\u7406\u200b\n\u2502        \u251c\u2500\u2500 query.go          # \u200b\u4ecb\u9762\u200b\u67fb\u200b\u8a62\u51fd\u6578\u200b\n\u2502        \u251c\u2500\u2500 rest.go           # \u200b\u6d88\u606f\u200b\u8207\u200b\u67fb\u200b\u8a62\u200b\u8def\u7531\u200b\u7684\u200b\u6ce8\u518c\u200b\n\u2502        \u2514\u2500\u2500 tx.go             # tx\u200b\u76f8\u95dc\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u5305\u62ec\u200b\u5ee3\u64ad\u200b\u7b49\u200b\n\u251c\u2500\u2500 keeper\n\u2502   \u251c\u2500\u2500 hooks.go          # \u200b\u9264\u5b50\u200b\u51fd\u6578\u200b\uff0c\u200b\u88ab\u200b\u5176\u4ed6\u200b\u6a21\u584a\u200b\u908f\u8f2f\u200b\u89f8\u767c\u200b\n\u2502   \u251c\u2500\u2500 keeper.go         # \u200b\u5b58\u5132\u200b\u7ba1\u7406\u5668\u200b\uff0c\u200b\u8655\u7406\u200b\u6a21\u584a\u200b\u7684\u200b\u696d\u52d9\u200b\u908f\u8f2f\u200b\uff0c\u200b\u4e26\u6709\u200b\u8a31\u53ef\u6b0a\u200b\u8a2a\u554f\u200b\u72c0\u614b\u200b\u6a39\u200b\u7684\u200b\u7279\u5b9a\u200b\u5b50\u6a39\u200b\n\u2502   \u251c\u2500\u2500 msg_server.go     # \u200b\u63d0\u4f9b\u200b\u4e0a\u93c8\u200b\u6d88\u606f\u200b\u7684\u200b\u670d\u52d9\u200b\u8655\u7406\u200b\u908f\u8f2f\u200b\n\u2502   \u251c\u2500\u2500 params.go         # \u200b\u6a21\u584a\u200b\u53c3\u6578\u200b\u7684\u200b\u8a2d\u5b9a\u200b\u548c\u200b\u7372\u53d6\u200b\n\u2502   \u251c\u2500\u2500 query.go          # \u200b\u72c0\u614b\u200b\u67fb\u200b\u8a62\u51fd\u6578\u200b\n\u251c\u2500\u2500 types\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 codec.go          # \u200b\u7de8\u78bc\u200b\u6ce8\u518c\u200b\u985e\u578b\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 errors.go         # \u200b\u6a21\u584a\u200b\u7279\u5b9a\u200b\u7684\u200b\u932f\u8aa4\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 events.go         # \u200b\u5411\u200bTendermint PubSub/Websocket\u200b\u66b4\u9732\u200b\u7684\u200b\u4e8b\u4ef6\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 genesis.go        # \u200b\u6a21\u584a\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 interface.go      # \u200b\u6a21\u584a\u200b\u7684\u200b\u4ecb\u9762\u200b\u96c6\u5408\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 keys.go           # \u200b\u6a21\u584a\u200b\u5b58\u5132\u200bkey\u200b\u4ee5\u53ca\u200b\u4e00\u4e9b\u200b\u5176\u4ed6\u200b\u7684\u200b\u5e38\u6578\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 msg.go            # \u200b\u804a\u5929\u200b\u6a21\u584a\u200b\u4ea4\u6613\u200b\u6d88\u606f\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 params.go         # \u200b\u6a21\u584a\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6cbb\u7406\u200b\u6a21\u584a\u200b\u4fee\u6539\u200b\u7684\u200b\u81ea\u5b9a\u200b\u7fa9\u53c3\u6578\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 interface.go      # \u200b\u5f15\u5165\u200b\u7684\u200b\u5916\u90e8\u200b\u6a21\u5757\u200b\u5b9e\u73b0\u200b\u7684\u200b\u65b9\u6cd5\u200b\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 types.go          # \u200b\u6a21\u584a\u200b\u7684\u200b\u985e\u578b\u200b\u96c6\u5408\u200b\n\u251c\u2500\u2500 genesis.go            # ABCI\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\u521d\u59cb\u5316\u200b\u548c\u200b\u532f\u51fa\u200b\u529f\u80fd\u200b\n\u251c\u2500\u2500 handler.go            # \u200b\u6d88\u606f\u200b\u8def\u7531\u200b\n\u2514\u2500\u2500 module.go             # \u200b\u6a21\u584a\u200b\u7ba1\u7406\u5668\u200b\u7684\u200b\u6a21\u584a\u200b\u8a2d\u5b9a\u200b\n</code></pre>"},{"location":"gateway/#_1","title":"\u76ee\u5f55","text":""},{"location":"gateway/#_2","title":"\u7db2\u95dc","text":"<p>gateway\u200b\u6a21\u584a\u200b\u8ca0\u8cac\u7db2\u200b\u95dc\u93c8\u200b\u4e0a\u200b\u6578\u64da\u200b\u7684\u200b\u7ba1\u7406\u200b,\u200b\u5305\u62ec\u200b\u865f\u78bc\u200b\u6bb5\u200b\u7684\u200b\u6b78\u5c6c\u200b\uff0c\u200b\u7372\u5f97\u200b\u7b49\u200b</p>"},{"location":"gateway/#_3","title":"\u7db2\u95dc\u200b\u4fe1\u606f","text":"<p>\u200b\u7db2\u200b\u95dc\u200b\u8a3b\u200b\u518a\u200b\u9700\u8981\u200b\u586b\u5beb\u200b\u7db2\u95dc\u200b\u7684\u200b\u540d\u7a31\u200b\u3001\u200b\u7db2\u95dc\u200b\u901a\u8a0a\u200b\u5730\u5740\u200b\u3001APP\u200b\u6253\u5305\u200b\u7684\u200b\u540d\u7a31\u200b\u53ca\u200b\u9996\u500b\u200b\u865f\u78bc\u200b\u6bb5\u200b\u4fe1\u606f\u200b\u3002\u200b\u7db2\u95dc\u200b\u901a\u8a0a\u200b\u5730\u5740\u200b\u652f\u6301\u200bIP\u200b\u53ca\u200b\u57df\u540d\u200b\uff0c\u200b\u9700\u8981\u200b\u7d81\u5b9a\u200b50327\u200b\u901a\u8a0a\u200b\u7aef\u53e3\u200b\u3002 APP\u200b\u5305\u540d\u200b\u9700\u8981\u200b\u4ee5\u5c0f\u5beb\u200b\u5b57\u6bcd\u200b\u958b\u982d\u200b\u9032\u884c\u200b\u547d\u540d\u200b\uff0c\u200b\u9577\u200b\u5ea6\u200b\u4e0d\u53ef\u200b\u8d85\u904e\u200b32\u200b\u4f4d\u200b\u3002 \u200b\u7db2\u95dc\u200b\u4e0d\u200b\u53ef\u4ee5\u200b\u91cd\u200b\u8907\u200b\u8a3b\u200b\u518a\u200b\uff0c\u200b\u6bcf\u500b\u200bDPOS\u200b\u7bc0\u9ede\u200b\u53ea\u80fd\u200b\u8a3b\u200b\u518a\u200b\u4e00\u200b\u500b\u200b\u7db2\u200b\u95dc\u200b\u3002\u200b\u7db2\u95dc\u200b\u4fe1\u606f\u200b\u652f\u6301\u200b\u4fee\u6539\u200b\u540d\u7a31\u200b\u548c\u200b\u7db2\u95dc\u200b\u901a\u8a0a\u200b\u5730\u5740\u200b\u3002 \ud83d\udea8 \u200b\u5371\u96aa\u200b: \u200b\u4e00\u65e6\u200b\u4fee\u6539\u200b\u7db2\u95dc\u200b\u901a\u8a0a\u200b\u5730\u5740\u200b\u5f8c\u200b\uff0c\u200b\u7db2\u95dc\u200b\u7684\u200b\u804a\u5929\u200b\u4fe1\u606f\u200b\u5c07\u6703\u200b\u88ab\u200b\u91cd\u7f6e\u200b\uff0c\u200b\u8acb\u200b\u8b39\u614e\u200b\u64cd\u4f5c\u200b\u3002</p>"},{"location":"gateway/#_4","title":"\u865f\u78bc\u200b\u6bb5","text":"<p>\u200b\u9996\u6b21\u200b\u8a3b\u200b\u518a\u200b\u7db2\u200b\u95dc\u200b\u5fc5\u200b\u9808\u200b\u586b\u200b\u5beb\u200b\u4e00\u200b\u500b\u200b\u865f\u200b\u78bc\u200b\u6bb5\u200b\uff0c\u200b\u8a72\u865f\u200b\u78bc\u6bb5\u200b\u6703\u6a19\u200b\u8a18\u70ba\u200b\u7db2\u95dc\u200b\u7684\u200b\u9996\u500b\u200b\u865f\u78bc\u200b\u6bb5\u200b\u4f5c\u70ba\u200b\u901a\u8a0a\u200b\u57df\u540d\u200b\u4f7f\u7528\u200b\u3002 \u200b\u865f\u78bc\u200b\u6bb5\u9577\u200b\u5ea6\u200b\u53ef\u4ee5\u200b\u70ba\u200b5\u30016\u30017\uff0c\u200b\u7576\u7db2\u200b\u95dc\u865f\u200b\u78bc\u6bb5\u200b\u984d\u5ea6\u200b\u8db3\u5920\u200b\u6642\u200b\uff0c\u200b\u652f\u6301\u200b\u6dfb\u52a0\u200b\u591a\u500b\u200b\u865f\u78bc\u200b\u6bb5\u200b\u3002 \u200b\u865f\u78bc\u200b\u6bb5\u200b\u5206\u70ba\u200b\u4e09\u7a2e\u200b\u72c0\u614b\u200b :\u200b\u7d81\u5b9a\u200b\u4e2d\u200b\u3001\u200b\u8d16\u56de\u200b\u4e2d\u200b\u3001\u200b\u548c\u200b\u5df2\u89e3\u200b\u7d81\u200b\u3002\u200b\u5df2\u200b\u7d81\u5b9a\u200b\u548c\u200b\u8d16\u200b\u56de\u4e2d\u200b\u7684\u200b\u865f\u78bc\u200b\u6bb5\u200b\u4e0d\u80fd\u200b\u88ab\u200b\u5176\u4ed6\u200b\u7db2\u95dc\u200b\u6240\u200b\u4f7f\u7528\u200b\uff0c\u200b\u8d16\u56de\u200b\u4e2d\u200b\u7684\u200b\u865f\u78bc\u200b\u6bb5\u200b\u9ed8\u8a8d\u200b\u4e00\u5e74\u200b\u7684\u200b\u4fdd\u8b77\u671f\u200b\uff0c\u200b\u7576\u7db2\u95dc\u200b\u6240\u6709\u8005\u200b\u518d\u6b21\u200b\u8cea\u62bc\u200b\u5f8c\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u518d\u6b21\u200b\u9078\u64c7\u200b\u8a72\u200b\u865f\u78bc\u200b\u6bb5\u200b\u4e26\u9032\u884c\u200b\u7d81\u5b9a\u200b\u3002 \u200b\u5df2\u89e3\u200b\u7d81\u200b\u7684\u200b\u865f\u78bc\u200b\u6bb5\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u6240\u6709\u200b\u7db2\u95dc\u200b\u518d\u6b21\u200b\u4f7f\u7528\u200b\u3002</p>"},{"location":"gateway/#_5","title":"\u7db2\u95dc\u8cea\u200b\u62bc\u200b\u8207\u200b\u8d16\u200b\u56de","text":"<p>\u200b\u9ed8\u8a8d\u200b\u6bcf\u8cea\u200b\u62bc\u200b10\u200b\u500b\u200bFM\u200b\u53ef\u4ee5\u200b\u7372\u5f97\u200b\u4e00\u500b\u200b\u7db2\u95dc\u200b\u865f\u78bc\u200b\u6bb5\u200b\u984d\u5ea6\u200b\u3002 \u200b\u7576\u7db2\u95dc\u200b\u6240\u6709\u8005\u200b\u9032\u884c\u200bDPOS\u200b\u8d16\u200b\u56de\u6642\u200b\uff0c\u200b\u5c0d\u61c9\u200b\u6bcf\u200b\u8d16\u200b\u56de\u200b10\u200b\u500b\u200bFM\u200b\u5c31\u8981\u200b\u5c0d\u61c9\u200b\u8d16\u200b\u56de\u4e00\u500b\u200b\u865f\u78bc\u200b\u6bb5\u200b\u6216\u200b\u6e1b\u5c11\u200b\u5c0d\u200b\u61c9\u865f\u200b\u78bc\u6bb5\u200b\u7684\u200b\u984d\u5ea6\u200b\u3002 \u200b\u7576\u200b\u90e8\u5206\u200b\u8d16\u200b\u56de\u6642\u200b\uff0c\u200b\u9996\u500b\u200b\u865f\u78bc\u200b\u6bb5\u200b\u4e0d\u200b\u5141\u8a31\u200b\u8d16\u200b\u56de\u200b\uff0c\u200b\u53ea\u80fd\u200b\u9078\u64c7\u200b\u5176\u4ed6\u200b\u865f\u78bc\u200b\u6bb5\u200b\u3002\u200b\u5982\u679c\u200b\u662f\u200b\u8cea\u62bc\u200b\u5168\u90e8\u200b\u8d16\u56de\u200b\uff0c\u200b\u5247\u8d16\u56de\u200b\u6240\u6709\u200b\u865f\u78bc\u200b\u6bb5\u200b\u3002 \u200b\u5168\u90e8\u200b\u8cea\u62bc\u200b\u8d16\u200b\u56de\u200b\u5f8c\u200b\uff0c\u200b\u7db2\u95dc\u200b\u72c0\u614b\u200b\u8b8a\u70ba\u200b\u4e0d\u53ef\u200b\u7528\u72c0\u614b\u200b\u3002</p>"},{"location":"gateway/#_6","title":"\u529f\u80fd","text":"<p>\u200b\u5408\u7d04\u200b\u6a21\u584a\u200b<code>Keeper</code>\u200b\u6388\u4e88\u200b\u5c0d\u200b\u804a\u5929\u200b\u6a21\u584a\u200b\u72c0\u614b\u200b\u7684\u200b\u5b58\u53d6\u200b\u6b0a\u9650\u4e26\u200b\u5be6\u73fe\u200b<code>statedb</code>\uff0c\u200b\u4ee5\u200b\u652f\u6301\u200b<code>StateDB</code>\u200b\u5be6\u73fe\u200b\u3002 Keeper\u200b\u5305\u542b\u200b\u4e00\u500b\u200b\u5141\u8a31\u200b\u8cc7\u6599\u200b\u5eab\u200b\u7684\u200b\u5b58\u5132\u9375\u200b\u5beb\u5165\u200b\u53ea\u80fd\u200b\u7531\u200bChat\u200b\u6a21\u584a\u200b\u8a2a\u554f\u200b\u7684\u200b\u591a\u5eab\u200b\u7684\u200b\u5177\u9ad4\u5b50\u200b\u6a39\u200b\u3002 \u200b\u800c\u200b\u4e0d\u662f\u200b\u4f7f\u7528\u200b\u6a39\u200b\u548c\u200b\u8cc7\u6599\u200b\u5eab\u200b\u9032\u884c\u200b\u67fb\u200b\u8a62\u200b\u548c\u200b\u6301\u4e45\u200b\u5316\u200b\uff08<code>StateDB</code>\u200b\u5be6\u73fe\u200b\uff09\uff0cDaoDst\u200b\u4f7f\u7528\u200bCosmos\u200b\u7684\u200b<code>KVStore</code>\uff08\u200b\u9375\u503c\u200b\u5b58\u5132\u200b\uff09\u200b\u548c\u200bCosmos SDK\u200b\u7684\u200b<code>Keeper</code>\u200b\u4f86\u200b\u4fc3\u9032\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u652f\u6301\u200b\u4ecb\u9762\u200b\u529f\u80fd\u200b\uff0c\u200b\u5b83\u5c0e\u5165\u200b\u4e86\u200b7\u200b\u500b\u200b\u6a21\u584a\u200bKeepers:</p> <ul> <li><code>auth</code>: \u200b\u5e33\u865f\u200b\u7684\u200b\u589e\u522a\u200b\u6539\u67e5\u200b</li> <li><code>bank</code>: \u200b\u4f9b\u61c9\u91cf\u200b\u548c\u200b\u9918\u984d\u200b\u7684\u200b\u589e\u522a\u200b\u6539\u67e5\u200b</li> <li><code>staking</code>: \u200b\u9598\u9053\u200b\u76f8\u95dc\u200b\u8cc7\u6599\u200b\u7684\u200b\u7ba1\u7406\u200b</li> <li><code>pledge</code>: \u200b\u804a\u5929\u200b\u76f8\u95dc\u200b\u6578\u64da\u200b\u7684\u200b\u7ba1\u7406\u200b</li> <li><code>evm</code>: evm\u200b\u76f8\u95dc\u200b\u6578\u64da\u200b\u7684\u200b\u7ba1\u7406\u200b</li> <li><code>chat</code>: \u200b\u804a\u5929\u200b\u76f8\u95dc\u200b\u8cc7\u6599\u200b\u7684\u200b\u7ba1\u7406\u200b</li> <li><code>gateway</code>: \u200b\u9598\u9053\u200b\u8cc7\u6599\u200b\u7ba1\u7406\u200b</li> </ul> <pre><code>    type Keeper struct {\n        storeKey   sdk.StoreKey\n        cdc        codec.BinaryCodec\n        paramstore paramtypes.Subspace\n\n        stakingKeeper *stakingKeeper.Keeper\n        accountKeeper types.AccountKeeper\n        BankKeeper    types.BankKeeper\n        pledgeKeeper  types.PledgeKeeper\n        evmKeeper     types.EVMKeeper\n        chatKeeper    types.ChatKeeper\n        gatewayKeeper types.GatewayKeeper\n        erc20Keeper   erc20keeper.Keeper\n    }\n</code></pre>"},{"location":"gateway/#_7","title":"\u6d88\u606f","text":""},{"location":"gateway/#msgapptokenissue","title":"MsgAppTokenIssue","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\uff0c\u200b\u5099\u4efd\u200b\u7db2\u95dc\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u5bc6\u200b\u9470\u200b\u7b49\u200b\u4fe1\u606f\u200b\n</code></pre> <pre><code>    type MsgGatewayUpload struct {\n        FromAddress    string `protobuf:\"bytes,1,opt,name=fromAddress,proto3\" json:\"fromAddress,omitempty\" yaml:\"from_address\"`\n        GatewayKeyInfo []byte `protobuf:\"bytes,2,opt,name=GatewayKeyInfo,proto3\" json:\"GatewayKeyInfo,omitempty\" yaml:\"gateway_key_info\"`\n    }\n</code></pre>"},{"location":"gateway/#msggatewayregister","title":"MsgGatewayRegister","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\uff0c\u200b\u8a3b\u200b\u518a\u200b\u6210\u200b\u70ba\u200b\u7db2\u200b\u95dc\u200b\uff0c\u200b\u4e26\u7372\u200b\u5f97\u200bdid\u200b\u865f\u6bb5\u200b\n</code></pre> <pre><code>    type MsgGatewayRegister struct {\n        Address string `protobuf:\"bytes,1,opt,name=address,proto3\" json:\"address,omitempty\"`\n        GatewayName string `protobuf:\"bytes,2,opt,name=gateway_name,json=gatewayName,proto3\" json:\"gateway_name,omitempty\"`\n        GatewayUrl string `protobuf:\"bytes,3,opt,name=gateway_url,json=gatewayUrl,proto3\" json:\"gateway_url,omitempty\"`\n        Delegation string `protobuf:\"bytes,4,opt,name=delegation,proto3\" json:\"delegation,omitempty\"`\n        IndexNumber []string `protobuf:\"bytes,5,rep,name=index_number,json=indexNumber,proto3\" json:\"index_number,omitempty\"`\n    }\n</code></pre>"},{"location":"gateway/#msggatewayindexnum","title":"MsgGatewayIndexNum","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\uff0c\u200b\u7db2\u95dc\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u8cea\u62bc\u200b\u7372\u53d6\u200b\u984d\u5916\u200b\u7684\u200bdid\u200b\u865f\u78bc\u200b\u6bb5\u200b\n</code></pre> <pre><code>    type MsgGatewayIndexNum struct {\n        DelegatorAddress string `protobuf:\"bytes,1,opt,name=delegator_address,json=delegatorAddress,proto3\" json:\"delegator_address,omitempty\" yaml:\"delegator_address\"`\n        ValidatorAddress string `protobuf:\"bytes,2,opt,name=validator_address,json=validatorAddress,proto3\" json:\"validator_address,omitempty\" yaml:\"validator_address\"`\n        IndexNumber []string `protobuf:\"bytes,3,rep,name=index_number,json=indexNumber,proto3\" json:\"index_number,omitempty\"`\n    }\n</code></pre>"},{"location":"gateway/#msggatewayundelegate","title":"MsgGatewayUndelegate","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\uff0c\u200b\u7db2\u95dc\u200b\u53ef\u4ee5\u200b\u8d16\u200b\u56de\u8cea\u200b\u62bc\u200b\n</code></pre> <pre><code>    type MsgGatewayUndelegate struct {\n        DelegatorAddress string      `protobuf:\"bytes,1,opt,name=delegator_address,json=delegatorAddress,proto3\" json:\"delegator_address,omitempty\" yaml:\"delegator_address\"`\n        ValidatorAddress string      `protobuf:\"bytes,2,opt,name=validator_address,json=validatorAddress,proto3\" json:\"validator_address,omitempty\" yaml:\"validator_address\"`\n        Amount           types1.Coin `protobuf:\"bytes,3,opt,name=amount,proto3\" json:\"amount\"`\n        IndexNumber []string `protobuf:\"bytes,4,rep,name=index_number,json=indexNumber,proto3\" json:\"index_number,omitempty\"`\n    }\n</code></pre>"},{"location":"gateway/#_8","title":"\u53c3\u6578","text":"<p>gateway\u200b\u6a21\u584a\u200b\u5305\u542b\u200b\u5982\u4e0b\u200b\u6a21\u584a\u200b\u53c3\u6578\u200b</p>"},{"location":"gateway/#_9","title":"\u53c3\u6578","text":"Key \u200b\u985e\u578b\u200b \u200b\u9810\u8a2d\u503c\u200b <code>IndexNumHeight</code> int64 <code>100</code> <code>RedeemFeeHeight</code> int64 <code>432000</code> <code>RedeemFee</code> github_com_cosmos_cosmos_sdk_types.Dec <code>0.1</code> <code>MinDelegate</code> github_com_cosmos_cosmos_sdk_types.Coin <code>10000000000000000000000fm</code> <code>Validity</code> int64 <code>5256000</code>"},{"location":"gov/","title":"\u6cbb\u7406","text":""},{"location":"gov/#_1","title":"<code>\u200b\u6cbb\u7406\u200b</code>","text":""},{"location":"gov/#_2","title":"\u6458\u8981","text":"<p>\u200b\u672c\u6587\u200b\u660e\u786e\u200b\u4e86\u200b\u6cbb\u7406\u200b\u6a21\u5757\u200b\u3002</p> <p>\u200b\u8a72\u6a21\u200b\u7d44\u4f7f\u200b\u57fa\u200b\u65bc\u200b Cosmos-SDK \u200b\u7684\u200b\u5340\u584a\u200b\u93c8\u80fd\u5920\u200b\u652f\u6301\u200b\u93c8\u4e0a\u200b\u6cbb\u7406\u200b\u7cfb\u7d71\u200b\u3002 \u200b\u5728\u200b\u6b64\u7cfb\u7d71\u200b\u4e2d\u200b\uff0c\u200b\u93c8\u200b\u7684\u200b\u539f\u751f\u200b\u62b5\u62bc\u200b\u4ee3\u5e63\u200b\u6301\u6709\u8005\u200b\u53ef\u4ee5\u200b\u6309\u7167\u200b 1 \u200b\u4ee3\u5e63\u200b 1 \u200b\u7968\u200b\u7684\u200b\u57fa\u790e\u200b\u9032\u884c\u200b\u6295\u7968\u200b\u3002 \u200b\u63a5\u4e0b\u200b\u4f86\u200b\u662f\u200b\u8a72\u200b\u6a21\u7d44\u200b\u76ee\u524d\u200b\u652f\u6301\u200b\u7684\u200b\u529f\u80fd\u200b\u5217\u8868\u200b\uff1a</p> <ul> <li>\u200b\u63d0\u6848\u200b\u63d0\u4ea4\u200b: \u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u63d0\u4ea4\u200b\u5e36\u6709\u200b\u62bc\u91d1\u200b\u7684\u200b\u63d0\u6848\u200b\u3002\u200b\u4e00\u65e6\u200b\u9054\u5230\u200b\u6700\u4f4e\u200b\u62bc\u91d1\u200b\uff0c\u200b\u63d0\u6848\u200b\u4fbf\u200b\u9032\u5165\u200b\u6295\u7968\u200b\u671f\u200b\u3002</li> <li>\u200b\u6295\u7968\u200b: \u200b\u53c3\u8207\u8005\u200b\u53ef\u4ee5\u200b\u5c0d\u9054\u200b\u5230\u200b MinDeposit \u200b\u7684\u200b\u63d0\u6848\u200b\u9032\u884c\u200b\u6295\u7968\u200b\u3002</li> <li>\u200b\u7e7c\u627f\u200b\u548c\u200b\u61f2\u7f70\u200b: \u200b\u5982\u679c\u200b\u4ee3\u8868\u4eba\u200b\u81ea\u5df1\u200b\u4e0d\u200b\u6295\u7968\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5c07\u7e7c\u627f\u200b\u5176\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u6295\u7968\u200b\u3002</li> <li>\u200b\u7533\u9818\u200b\u62bc\u91d1\u200b: \u200b\u5982\u679c\u200b\u63d0\u6848\u200b\u88ab\u200b\u63a5\u53d7\u200b\u6216\u200b\u63d0\u6848\u200b\u5f9e\u200b\u672a\u200b\u9032\u5165\u200b\u6295\u7968\u200b\u671f\u200b\uff0c\u200b\u62bc\u91d1\u200b\u652f\u4ed8\u200b\u7684\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u6536\u56de\u200b\u4ed6\u5011\u200b\u7684\u200b\u62bc\u91d1\u200b\u3002</li> </ul>"},{"location":"gov/#_3","title":"\u5167\u5bb9","text":""},{"location":"gov/#_4","title":"\u6982\u5ff5","text":"<p>\u200b\u514d\u8cac\u200b\u8072\u660e\u200b\uff1a\u200b\u9019\u662f\u200b\u4e00\u500b\u200b\u9032\u884c\u200b\u4e2d\u200b\u7684\u200b\u5de5\u4f5c\u200b\u3002\u200b\u6a5f\u5236\u200b\u53ef\u80fd\u200b\u6703\u200b\u767c\u751f\u200b\u8b8a\u5316\u200b\u3002</p> <p>\u200b\u6cbb\u7406\u200b\u904e\u7a0b\u200b\u53ef\u5206\u200b\u70ba\u200b\u4ee5\u4e0b\u200b\u5e7e\u500b\u200b\u6b65\u9a5f\u200b\uff1a</p> <ul> <li>\u200b\u63d0\u6848\u200b\u63d0\u4ea4\u200b: \u200b\u5411\u5340\u200b\u584a\u200b\u93c8\u200b\u63d0\u4ea4\u200b\u63d0\u6848\u200b\u6642\u200b\uff0c\u200b\u9700\u8981\u200b\u9644\u4e0a\u200b\u4e00\u5b9a\u200b\u6578\u91cf\u200b\u7684\u200b\u62bc\u91d1\u200b\u3002</li> <li>\u200b\u6295\u7968\u200b: \u200b\u4e00\u65e6\u200b\u62bc\u91d1\u200b\u9054\u5230\u200b\u4e00\u5b9a\u200b\u7684\u200b\u6578\u503c\u200b\uff08MinDeposit\uff09\uff0c\u200b\u63d0\u6848\u200b\u5c31\u200b\u6703\u200b\u5f97\u5230\u200b\u78ba\u8a8d\u200b\uff0c\u200b\u6295\u7968\u200b\u4fbf\u6703\u200b\u958b\u59cb\u200b\u3002\u200b\u7d81\u5b9a\u200bAtom\u200b\u6301\u6709\u8005\u200b\u96a8\u5f8c\u200b\u53ef\u4ee5\u200b\u767c\u9001\u200bTxGovVote\u200b\u4ea4\u6613\u200b\u4f86\u200b\u5c0d\u200b\u63d0\u6848\u200b\u9032\u884c\u200b\u6295\u7968\u200b\u3002</li> <li>\u200b\u5982\u679c\u200b\u63d0\u6848\u200b\u6d89\u53ca\u200b\u8edf\u9ad4\u200b\u5347\u7d1a\u200b\uff1a</li> <li>\u200b\u4fe1\u865f\u200b: \u200b\u9a57\u8b49\u8005\u200b\u958b\u59cb\u200b\u767c\u51fa\u200b\u4fe1\u865f\u200b\uff0c\u200b\u8868\u793a\u200b\u4ed6\u5011\u200b\u5df2\u200b\u6e96\u5099\u200b\u597d\u200b\u5207\u63db\u200b\u5230\u200b\u65b0\u200b\u7248\u672c\u200b\u3002</li> <li>\u200b\u5207\u63db\u200b: \u200b\u4e00\u65e6\u200b\u8d85\u904e\u200b75%\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u767c\u51fa\u200b\u4fe1\u865f\u200b\u8868\u793a\u200b\u4ed6\u5011\u200b\u5df2\u200b\u6e96\u5099\u200b\u597d\u200b\u5207\u63db\u200b\uff0c\u200b\u4ed6\u5011\u200b\u7684\u200b\u8edf\u4ef6\u200b\u5c07\u81ea\u52d5\u200b\u5207\u63db\u200b\u5230\u200b\u65b0\u200b\u7248\u672c\u200b\u3002</li> </ul>"},{"location":"gov/#_5","title":"\u63d0\u6848\u200b\u63d0\u4ea4","text":""},{"location":"gov/#_6","title":"\u63d0\u4ea4\u200b\u63d0\u6848\u200b\u7684\u200b\u6b0a\u5229","text":"<p>\u200b\u4efb\u4f55\u200b Dst \u200b\u6301\u6709\u8005\u200b\uff0c\u200b\u7121\u8ad6\u200b\u662f\u200b\u7d81\u5b9a\u200b\u9084\u662f\u200b\u672a\u200b\u7d81\u5b9a\u200b\uff0c\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u767c\u9001\u200b\u4e00\u500b\u200b TxGovProposal \u200b\u4ea4\u6613\u200b\u4f86\u200b\u63d0\u4ea4\u200b\u63d0\u6848\u200b\u3002 \u200b\u4e00\u65e6\u200b\u63d0\u4ea4\u200b\u63d0\u6848\u200b\uff0c\u200b\u5b83\u5c07\u200b\u7531\u200b\u5176\u200b\u552f\u4e00\u200b\u7684\u200b proposalID \u200b\u9032\u884c\u8b58\u5225\u200b\u3002</p>"},{"location":"gov/#_7","title":"\u63d0\u6848\u200b\u985e\u578b","text":"<p>\u200b\u5728\u200b\u6cbb\u7406\u200b\u6a21\u7d44\u200b\u7684\u200b\u521d\u59cb\u200b\u7248\u672c\u200b\u4e2d\u200b\uff0c\u200b\u6709\u4e94\u7a2e\u200b\u985e\u578b\u200b\u7684\u200b\u63d0\u6848\u200b\uff1a</p> <ul> <li><code>TextProposal(\u200b\u6587\u672c\u200b\u63d0\u6848\u200b)</code> \u200b\u6240\u6709\u200b\u4e0d\u200b\u6d89\u53ca\u200b\u6e90\u4ee3\u78bc\u200b\u4fee\u6539\u200b\u7684\u200b\u63d0\u6848\u200b\u90fd\u5c6c\u200b\u65bc\u200b\u6b64\u985e\u200b\u578b\u200b\u3002   \u200b\u4f8b\u5982\u200b\uff0c\u200b\u610f\u898b\u200b\u8abf\u67e5\u5c07\u200b\u4f7f\u7528\u200b\u985e\u578b\u200b\u70ba\u200bTextProposal\u200b\u7684\u200b\u63d0\u6848\u200b\u3002   \u200b\u9019\u7a2e\u200b\u63d0\u6848\u200b\u4e3b\u8981\u200b\u7528\u200b\u65bc\u200b\u5728\u200b\u793e\u5340\u200b\u4e2d\u200b\u5fb5\u6c42\u200b\u610f\u898b\u200b\u3001\u200b\u9032\u884c\u200b\u8a0e\u8ad6\u200b\u6216\u200b\u5efa\u8b70\u200b\uff0c\u200b\u5c0d\u5340\u200b\u584a\u200b\u93c8\u200b\u7db2\u7d61\u200b\u672c\u8eab\u200b\u6c92\u6709\u200b\u76f4\u63a5\u200b\u5f71\u97ff\u200b\u3002   \u200b\u901a\u904e\u200b\u9019\u7a2e\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u793e\u5340\u200b\u6210\u54e1\u200b\u53ef\u4ee5\u200b\u53c3\u8207\u200b\u6c7a\u7b56\u200b\u904e\u7a0b\u200b\uff0c\u200b\u5206\u4eab\u200b\u4ed6\u5011\u200b\u7684\u200b\u89c0\u9ede\u200b\u548c\u200b\u60f3\u6cd5\u200b\u3002</li> <li><code>SoftwareUpgradeProposal(\u200b\u8edf\u4ef6\u200b\u5347\u7d1a\u200b\u63d0\u6848\u200b)</code>. \u200b\u82e5\u200b\u63d0\u6848\u200b\u88ab\u200b\u63a5\u53d7\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u9700\u200b\u6309\u7167\u200b\u63d0\u6848\u200b\u7684\u200b\u8981\u6c42\u200b\u66f4\u65b0\u200b\u4ed6\u5011\u200b\u7684\u200b\u8edf\u4ef6\u200b\u3002</li> <li><code>CommunityPoolSpendProposal(\u200b\u793e\u5340\u200b\u57fa\u91d1\u200b\u63d0\u6848\u200b )</code> \u200b\u793e\u5340\u200b\u57fa\u91d1\u200b\u63d0\u6848\u200b\uff08Community Pool Proposal\uff09\u200b\u8a73\u7d30\u200b\u8aaa\u660e\u200b\u4e86\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200b\u793e\u5340\u200b\u57fa\u91d1\u200b\uff0c   \u200b\u5305\u62ec\u200b\u5efa\u8b70\u200b\u4f7f\u7528\u200b\u591a\u5c11\u200b\u4ee3\u5e63\u200b\u4ee5\u53ca\u200b\u63a5\u6536\u200b\u65b9\u8cec\u200b\u6236\u200b\u3002</li> <li><code>ParameterChangeProposal(\u200b\u53c3\u6578\u200b\u66f4\u6539\u200b\u63d0\u6848\u200b)</code> \u200b\u5b9a\u7fa9\u200b\u66f4\u6539\u200b\u4e00\u500b\u200b\u6216\u200b\u591a\u500b\u200b\u53c3\u6578\u200b\u7684\u200b\u63d0\u6848\u200b\u3002   \u200b\u5982\u679c\u200b\u88ab\u200b\u63a5\u53d7\u200b\uff0c\u200b\u5728\u200b\u6295\u7968\u200b\u671f\u7d50\u675f\u200b\u5f8c\u200b\uff0c\u200b\u63d0\u6848\u200b\u8655\u200b\u7406\u5668\u200b\u5c07\u81ea\u52d5\u200b\u66f4\u65b0\u200b\u6240\u200b\u8981\u6c42\u200b\u7684\u200b\u53c3\u6578\u200b\u66f4\u6539\u200b\u3002</li> </ul> <p>\u200b\u5176\u4ed6\u200b\u6a21\u584a\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u5be6\u73fe\u200b\u81ea\u5df1\u200b\u7684\u200b\u63d0\u6848\u200b\u985e\u578b\u200b\u548c\u200b\u8655\u200b\u7406\u5668\u200b\u4f86\u200b\u64f4\u5c55\u200b\u6cbb\u7406\u200b\u6a21\u584a\u200b\u3002 \u200b\u9019\u4e9b\u200b\u985e\u578b\u200b\u901a\u904e\u200b\u6cbb\u7406\u200b\u6a21\u584a\u200b\uff08\u200b\u4f8b\u5982\u200bParamChangeProposal\uff09\u200b\u9032\u200b\u884c\u200b\u8a3b\u200b\u518a\u200b\u548c\u200b\u8655\u200b\u7406\u200b\uff0c \u200b\u7136\u5f8c\u5728\u200b\u63d0\u6848\u200b\u901a\u904e\u200b\u6642\u200b\u57f7\u884c\u200b\u76f8\u61c9\u200b\u6a21\u584a\u200b\u7684\u200b\u63d0\u6848\u200b\u8655\u200b\u7406\u5668\u200b\u3002 \u200b\u9019\u500b\u200b\u81ea\u5b9a\u200b\u7fa9\u8655\u200b\u7406\u5668\u200b\u53ef\u4ee5\u200b\u57f7\u884c\u200b\u4efb\u610f\u200b\u72c0\u614b\u200b\u66f4\u6539\u200b\u3002</p>"},{"location":"gov/#_8","title":"\u4fdd\u8b49\u91d1","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u9632\u6b62\u200b\u5783\u573e\u200b\u8a0a\u606f\u200b\uff0c\u200b\u63d0\u6848\u200b\u5fc5\u9808\u200b\u5728\u200bMinDeposit\u200b\u53c3\u6578\u200b\u4e2d\u5b9a\u200b\u7fa9\u7684\u200b\u8ca8\u5e63\u200b\u4e2d\u200b\u63d0\u4ea4\u200b\u4fdd\u8b49\u91d1\u200b\u3002\u200b\u53ea\u6709\u200b\u7576\u200b\u63d0\u6848\u200b\u7684\u200b\u4fdd\u8b49\u91d1\u200b\u7b49\u200b\u65bc\u200bMinDeposit\u200b\u6642\u200b\uff0c\u200b\u6295\u7968\u200b\u671f\u624d\u6703\u200b\u958b\u59cb\u200b\u3002</p> <p>\u200b\u63d0\u4ea4\u200b\u63d0\u6848\u200b\u6642\u200b\uff0c\u200b\u5fc5\u9808\u200b\u9644\u5e36\u200b\u4e00\u500b\u200b\u4fdd\u8b49\u91d1\u200b\uff0c\u200b\u8a72\u200b\u4fdd\u8b49\u200b\u91d1\u5fc5\u9808\u200b\u662f\u200b\u6b63\u6578\u200b\uff0c\u200b\u4f46\u200b\u53ef\u4ee5\u200b\u5c0f\u200b\u65bc\u200bMinDeposit\u3002\u200b\u63d0\u4ea4\u8005\u200b\u4e0d\u200b\u9700\u8981\u200b\u81ea\u5df1\u200b\u652f\u4ed8\u200b\u5168\u90e8\u200b\u4fdd\u8b49\u91d1\u200b\u3002\u200b\u5982\u679c\u200b\u63d0\u6848\u200b\u7684\u200b\u4fdd\u8b49\u200b\u91d1\u5c0f\u200b\u65bc\u200bMinDeposit\uff0c\u200b\u5176\u4ed6\u200b\u4ee3\u5e63\u200b\u6301\u6709\u8005\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u767c\u9001\u200bDeposit\u200b\u4ea4\u6613\u200b\u4f86\u200b\u589e\u52a0\u200b\u63d0\u6848\u200b\u7684\u200b\u4fdd\u8b49\u91d1\u200b\u3002\u200b\u4fdd\u8b49\u200b\u91d1\u5c07\u200b\u88ab\u200b\u5b58\u653e\u200b\u5728\u200b\u6cbb\u7406\u200bModuleAccount\u200b\u7684\u200b\u8a17\u200b\u7ba1\u4e2d\u200b\uff0c\u200b\u76f4\u5230\u200b\u63d0\u6848\u200b\u6700\u7d42\u200b\u78ba\u5b9a\u200b\uff08\u200b\u901a\u904e\u200b\u6216\u200b\u62d2\u7d55\u200b\uff09\u3002</p> <p>\u200b\u4e00\u65e6\u200b\u63d0\u6848\u200b\u7684\u200b\u4fdd\u8b49\u200b\u91d1\u9054\u200b\u5230\u200bMinDeposit\uff0c\u200b\u5b83\u5c07\u200b\u9032\u5165\u200b\u6295\u7968\u200b\u671f\u200b\u3002\u200b\u5982\u679c\u200b\u63d0\u6848\u200b\u7684\u200b\u4fdd\u8b49\u91d1\u200b\u5728\u200bMaxDepositPeriod\u200b\u4e4b\u524d\u200b\u672a\u9054\u200b\u5230\u200bMinDeposit\uff0c\u200b\u63d0\u6848\u200b\u5c07\u95dc\u9589\u200b\uff0c\u200b\u4efb\u4f55\u4eba\u200b\u90fd\u200b\u4e0d\u80fd\u200b\u518d\u200b\u5411\u200b\u5176\u200b\u5b58\u6b3e\u200b\u3002</p>"},{"location":"gov/#_9","title":"\u4fdd\u8b49\u91d1\u200b\u9000\u6b3e\u200b\u548c\u200b\u92b7\u6bc0","text":"<p>\u200b\u7576\u200b\u63d0\u6848\u200b\u6700\u7d42\u200b\u78ba\u5b9a\u200b\u6642\u200b\uff0c\u200b\u4fdd\u8b49\u200b\u91d1\u4e2d\u200b\u7684\u200b\u4ee3\u5e63\u5c07\u200b\u6839\u64da\u200b\u63d0\u6848\u200b\u7684\u200b\u6700\u7d42\u200b\u7d50\u679c\u200b\u9032\u884c\u200b\u9000\u6b3e\u200b\u6216\u200b\u92b7\u6bc0\u200b\uff1a</p> <ul> <li>\u200b\u5982\u679c\u200b\u63d0\u6848\u200b\u88ab\u200b\u6279\u51c6\u200b\uff0c\u200b\u6216\u8005\u200b\u88ab\u200b\u62d2\u7d55\u200b\u4f46\u200b\u672a\u200b\u88ab\u200b\u5426\u6c7a\u200b\uff0c\u200b\u4fdd\u8b49\u200b\u91d1\u5c07\u200b\u81ea\u52d5\u200b\u9000\u200b\u9084\u7d66\u200b\u5404\u81ea\u200b\u7684\u200b\u5b58\u6b3e\u4eba\u200b\uff08\u200b\u5f9e\u200b\u6cbb\u7406\u200bModuleAccount\u200b\u8f49\u79fb\u200b\uff09\u3002\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u53ea\u8981\u200b\u63d0\u6848\u200b\u5f97\u5230\u200b\u8655\u7406\u200b\u4e26\u4e14\u200b\u672a\u200b\u88ab\u200b\u5426\u6c7a\u200b\uff0c\u200b\u53c3\u8207\u8005\u200b\u5c31\u200b\u4e0d\u6703\u200b\u5931\u53bb\u200b\u4ed6\u5011\u200b\u7684\u200b\u4fdd\u8b49\u91d1\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u9f13\u52f5\u200b\u7528\u6236\u200b\u7a4d\u6975\u200b\u53c3\u200b\u8207\u200b\u6cbb\u7406\u200b\u904e\u7a0b\u200b\u3002</li> <li>\u200b\u7576\u200b\u63d0\u6848\u200b\u4ee5\u8d85\u7d1a\u200b\u591a\u200b\u6578\u7968\u200b\u88ab\u200b\u5426\u6c7a\u200b\u6642\u200b\uff0c\u200b\u4fdd\u8b49\u200b\u91d1\u5c07\u200b\u5f9e\u200b\u6cbb\u7406\u200bModuleAccount\u200b\u4e2d\u200b\u88ab\u200b\u92b7\u6bc0\u200b\u3002</li> </ul>"},{"location":"gov/#vote","title":"Vote","text":""},{"location":"gov/#participants","title":"Participants","text":"<p>\u200b\u53c3\u8207\u8005\u200b \u200b\u662f\u200b\u6307\u200b\u5728\u200b\u5340\u584a\u200b\u93c8\u200b\u6cbb\u7406\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u6709\u6b0a\u200b\u5c0d\u200b\u63d0\u6848\u200b\u9032\u884c\u200b\u6295\u7968\u200b\u7684\u200b\u7528\u6236\u200b\u3002 \u200b\u53c3\u8207\u8005\u200b\u662f\u200b\u7d81\u5b9a\u200b\u7684\u200bDst\u200b\u6301\u6709\u8005\u200b\u3002 \u200b\u672a\u200b\u7d81\u5b9a\u200b\u7684\u200bDst\u200b\u6301\u6709\u8005\u200b\u548c\u200b\u5176\u4ed6\u200b\u7528\u6236\u200b\u7121\u6b0a\u200b\u53c3\u200b\u8207\u200b\u6cbb\u7406\u200b\u3002 \u200b\u7136\u800c\u200b\uff0c\u200b\u4ed6\u5011\u200b\u53ef\u4ee5\u200b\u63d0\u4ea4\u200b\u548c\u200b\u70ba\u200b\u63d0\u6848\u200b\u4ed8\u4fdd\u8b49\u200b\u91d1\u200b\u3002</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u67d0\u4e9b\u200b\u201c\u200b\u53c3\u8207\u8005\u200b\u201d\u200b\u53ef\u80fd\u200b\u88ab\u200b\u7981\u6b62\u200b\u5728\u200b\u7279\u5b9a\u200b\u9a57\u8b49\u8005\u200b\u4e0b\u200b\u5c0d\u200b\u63d0\u6848\u200b\u9032\u884c\u200b\u6295\u7968\u200b\uff1a</p> <ul> <li>\u200b\u7576\u200b\u63d0\u6848\u200b\u9032\u5165\u200b\u6295\u7968\u200b\u671f\u200b\u5f8c\u200b\uff0c\u200b\u53c3\u8207\u8005\u5c07\u200bDst\u200b\u7d81\u5b9a\u200b\u6216\u200b\u89e3\u7d81\u200b\u5230\u200b\u8a72\u9a57\u200b\u8b49\u8005\u200b\u3002</li> <li>\u200b\u5728\u200b\u63d0\u6848\u200b\u9032\u5165\u200b\u6295\u7968\u200b\u671f\u200b\u5f8c\u200b\uff0c\u200b\u53c3\u8207\u8005\u200b\u6210\u70ba\u200b\u4e86\u200b\u9a57\u8b49\u8005\u200b\u3002</li> </ul> <p>\u200b\u9019\u4e26\u200b\u4e0d\u59a8\u200b\u7919\u200b\u201c\u200b\u53c3\u8207\u8005\u200b\u201d\u200b\u5c07\u200bDst\u200b\u7d81\u5b9a\u200b\u5230\u200b\u5176\u4ed6\u200b\u9a57\u8b49\u8005\u200b\u4e26\u9032\u884c\u200b\u6295\u7968\u200b\u3002 \u200b\u4f8b\u5982\u200b\uff0c\u200b\u5982\u679c\u200b\u4e00\u500b\u200b\u201c\u200b\u53c3\u8207\u8005\u200b\u201d\u200b\u5728\u200b\u63d0\u6848\u200b\u9032\u5165\u200b\u6295\u7968\u200b\u671f\u200b\u4e4b\u524d\u200b\u5c07\u200b\u4e00\u4e9b\u200bAtoms\u200b\u7d81\u5b9a\u200b\u5230\u9a57\u200b\u8b49\u8005\u200bA\uff0c\u200b\u800c\u200b\u5728\u200b\u63d0\u6848\u200b\u9032\u5165\u200b\u6295\u7968\u200b\u671f\u4e4b\u5f8c\u5c07\u200b\u5176\u4ed6\u200bDst\u200b\u7d81\u5b9a\u200b\u5230\u9a57\u200b\u8b49\u8005\u200bB\uff0c\u200b\u90a3\u9ebc\u200b\u53ea\u6709\u200b\u5728\u9a57\u200b\u8b49\u8005\u200bB\u200b\u4e0b\u200b\u7684\u200b\u6295\u7968\u200b\u6703\u200b\u88ab\u200b\u7981\u6b62\u200b\u3002</p>"},{"location":"gov/#_10","title":"\u6295\u7968\u200b\u671f","text":"<p>\u200b\u4e00\u65e6\u200b\u63d0\u6848\u200b\u9054\u5230\u200bMinDeposit\uff08\u200b\u6700\u5c0f\u200b\u4fdd\u8b49\u91d1\u200b\uff09\uff0c\u200b\u5b83\u5c07\u200b\u7acb\u5373\u200b\u9032\u5165\u200bVoting period\uff08\u200b\u6295\u7968\u200b\u671f\u200b\uff09\u3002 \u200b\u6211\u5011\u5c07\u200b\u6295\u7968\u200b\u671f\u5b9a\u200b\u7fa9\u70ba\u200b\u6295\u7968\u200b\u958b\u59cb\u200b\u548c\u200b\u6295\u7968\u200b\u7d50\u675f\u200b\u4e4b\u9593\u200b\u7684\u200b\u6642\u9593\u200b\u9593\u200b\u9694\u200b\u3002 \u200b\u6295\u7968\u200b\u671f\u61c9\u59cb\u200b\u7d42\u77ed\u200b\u65bc\u200bUnbonding period\uff08\u200b\u89e3\u7d81\u671f\u200b\uff09\uff0c\u200b\u4ee5\u200b\u9632\u6b62\u200b\u96d9\u91cd\u200b\u6295\u7968\u200b\u3002\u200b\u6295\u7968\u200b\u671f\u200b\u7684\u200b\u521d\u59cb\u503c\u200b\u70ba\u200b2\u200b\u5468\u200b\u3002</p>"},{"location":"gov/#_11","title":"\u9078\u9805\u200b\u96c6","text":"<p>\u200b\u63d0\u6848\u200b\u7684\u200b\u9078\u9805\u200b\u96c6\u6307\u200b\u7684\u200b\u662f\u200b\u53c3\u8207\u8005\u200b\u5728\u200b\u6295\u7968\u200b\u6642\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u7684\u200b\u4e00\u7d44\u200b\u9078\u9805\u200b\u3002</p> <p>\u200b\u521d\u59cb\u200b\u9078\u9805\u200b\u96c6\u200b\u5305\u62ec\u200b\u4ee5\u4e0b\u200b\u9078\u9805\u200b\uff1a</p> <ul> <li><code>Yes</code></li> <li><code>No</code></li> <li><code>NoWithVeto</code></li> <li><code>Abstain</code></li> </ul> <p><code>NoWithVeto</code> \uff08\u200b\u5426\u6c7a\u200b\uff09\u200b\u88ab\u200b\u7b97\u4f5c\u200b<code>No</code> \uff08\u200b\u53cd\u5c0d\u200b\uff09\uff0c\u200b\u4f46\u200b\u540c\u6642\u200b\u4e5f\u200b\u589e\u52a0\u200b\u4e86\u200b\u4e00\u500b\u200b<code>Veto</code> \uff08\u200b\u5426\u6c7a\u200b\uff09\u200b\u7968\u200b\u3002<code>Abstain</code>\uff08\u200b\u68c4\u6b0a\u200b\uff09\u200b\u9078\u9805\u200b\u5141\u8a31\u200b\u6295\u7968\u8005\u200b\u8868\u793a\u200b\u4ed6\u5011\u200b\u7121\u610f\u200b\u652f\u6301\u200b\u6216\u200b\u53cd\u200b\u5c0d\u200b\u8a72\u200b\u63d0\u6848\u200b\uff0c\u200b\u4f46\u200b\u63a5\u53d7\u200b\u6295\u7968\u200b\u7d50\u679c\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u5c0d\u200b\u65bc\u200b\u7dca\u6025\u200b\u63d0\u6848\u200b\uff0c\u200b\u6211\u5011\u200b\u6216\u200b\u8a31\u61c9\u200b\u8a72\u200b\u5728\u200b\u4f7f\u7528\u8005\u200b\u4ecb\u9762\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4e00\u500b\u200b\u201c\u200b\u975e\u7dca\u200b\u6025\u200b\u201d\u200b\u9078\u9805\u200b\uff0c\u200b\u8a72\u9078\u200b\u9805\u5c07\u200b\u6295\u4e0b\u200b\u4e00\u500b\u200b<code>NoWithVeto</code>\uff08\u200b\u5426\u6c7a\u200b\uff09\u200b\u7968\u200b\u3002 \u200b\u9019\u6a23\u200b\u505a\u200b\u7684\u200b\u76ee\u7684\u200b\u662f\u200b\u8b93\u200b\u6295\u7968\u8005\u200b\u80fd\u5920\u200b\u660e\u78ba\u200b\u8868\u793a\u200b\u4ed6\u5011\u200b\u8a8d\u70ba\u200b\u8a72\u200b\u63d0\u6848\u200b\u4e26\u4e0d\u7dca\u200b\u6025\u200b\uff0c\u200b\u61c9\u8a72\u200b\u5c07\u5176\u200b\u5426\u6c7a\u200b\u3002\u200b\u9019\u5c07\u200b\u6709\u52a9\u200b\u65bc\u200b\u5340\u5206\u200b\u90a3\u4e9b\u200b\u771f\u6b63\u200b\u7dca\u6025\u200b\u7684\u200b\u63d0\u6848\u200b\u8207\u200b\u4e0d\u200b\u7dca\u6025\u200b\u7684\u200b\u63d0\u6848\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u4f7f\u200b\u6cbb\u7406\u200b\u904e\u7a0b\u200b\u66f4\u52a0\u200b\u6709\u6548\u200b\u3002</p>"},{"location":"gov/#quorum","title":"\u6cd5\u5b9a\u4eba\u6570\u200b(Quorum)","text":"<p>\u200b\u6cd5\u5b9a\u200b\u4eba\u6578\u200b\uff08Quorum\uff09\u200b\u5b9a\u7fa9\u70ba\u200b\u5728\u200b\u63d0\u6848\u200b\u7d50\u679c\u200b\u6709\u6548\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u9700\u8981\u200b\u6295\u4e0b\u200b\u7684\u200b\u6700\u4f4e\u200b\u6295\u7968\u200b\u6b0a\u91cd\u200b\u767e\u5206\u6bd4\u200b\u3002 \u200b\u5728\u200b\u5340\u584a\u200b\u93c8\u200b\u6cbb\u7406\u200b\u4e2d\u200b\uff0c\u200b\u6cd5\u5b9a\u200b\u4eba\u6578\u200b\u78ba\u4fdd\u200b\u4e86\u200b\u8db3\u5920\u200b\u591a\u200b\u7684\u200b\u6295\u7968\u8005\u200b\u53c3\u8207\u200b\u6295\u7968\u200b\u904e\u7a0b\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u4f7f\u200b\u63d0\u6848\u200b\u7684\u200b\u7d50\u679c\u200b\u5177\u6709\u200b\u4ee3\u8868\u6027\u200b\u4e26\u78ba\u200b\u4fdd\u200b\u6cbb\u7406\u200b\u6c7a\u7b56\u200b\u7684\u200b\u5408\u6cd5\u6027\u200b\u3002 \u200b\u5982\u679c\u200b\u672a\u9054\u200b\u5230\u200b\u6cd5\u5b9a\u200b\u4eba\u6578\u200b\u8981\u6c42\u200b\uff0c\u200b\u90a3\u9ebc\u200b\u63d0\u6848\u200b\u5c07\u88ab\u200b\u8a8d\u70ba\u200b\u662f\u200b\u7121\u6548\u200b\u7684\u200b\uff0c\u200b\u7121\u8ad6\u200b\u5176\u200b\u6295\u7968\u200b\u7d50\u679c\u200b\u5982\u4f55\u200b\u3002</p>"},{"location":"gov/#_12","title":"\u95be\u503c","text":"<p>\u200b\u95be\u503c\u200b\u5b9a\u7fa9\u70ba\u200b\u63d0\u6848\u200b\u88ab\u200b\u63a5\u53d7\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6700\u4f4e\u200b<code>Yes</code>\uff08\u200b\u8d0a\u6210\u200b\uff09\u200b\u7968\u200b\u6bd4\u4f8b\u200b\uff08\u200b\u4e0d\u200b\u5305\u62ec\u200b<code>Abstain</code>\uff08\u200b\u68c4\u6b0a\u200b\uff09\u200b\u7968\u200b\uff09\u3002</p> <p>\u200b\u6700\u521d\u200b\uff0c\u200b\u95be\u503c\u200b\u8a2d\u5b9a\u200b\u70ba\u200b 50%\uff0c\u200b\u5982\u679c\u200b\u8d85\u904e\u200b 1/3 \u200b\u7684\u200b\u6295\u7968\u200b\uff08\u200b\u4e0d\u200b\u5305\u62ec\u200b <code>Abstain</code>\uff08\u200b\u68c4\u6b0a\u200b\uff09\u200b\u7968\u200b\uff09\u200b\u662f\u200b <code>NoWithVeto</code>\uff08\u200b\u5426\u6c7a\u200b\uff09\u200b\u7968\u200b\uff0c\u200b\u5247\u200b\u6709\u5426\u200b\u6c7a\u200b\u7684\u200b\u53ef\u80fd\u6027\u200b\u3002 \u200b\u9019\u200b\u610f\u5473\u8457\u200b\u5728\u200b\u6295\u7968\u200b\u671f\u7d50\u675f\u200b\u6642\u200b\uff0c\u200b\u5982\u679c\u200b <code>Yes</code>\uff08\u200b\u8d0a\u6210\u200b\uff09\u200b\u7968\u200b\u7684\u200b\u6bd4\u4f8b\u200b\uff08\u200b\u4e0d\u200b\u5305\u62ec\u200b <code>Abstain</code>\uff08\u200b\u68c4\u6b0a\u200b\uff09\u200b\u7968\u200b\uff09\u200b\u8d85\u904e\u200b 50%\uff0c\u200b\u4e26\u4e14\u200b <code>NoWithVeto</code>\uff08\u200b\u5426\u6c7a\u200b\uff09\u200b\u7968\u200b\u7684\u200b\u6bd4\u4f8b\u200b\u4f4e\u200b\u65bc\u200b 1/3\uff08\u200b\u4e0d\u200b\u5305\u62ec\u200b <code>Abstain</code>\uff08\u200b\u68c4\u6b0a\u200b\uff09\u200b\u7968\u200b\uff09\uff0c\u200b\u5247\u200b\u63d0\u6848\u200b\u88ab\u200b\u63a5\u53d7\u200b\u3002</p>"},{"location":"gov/#_13","title":"\u5c0d\u200b\u65bc\u200b\u672a\u200b\u6295\u7968\u200b\u7684\u200b\u9a57\u8b49\u200b\u4eba\u200b\u7684\u200b\u61f2\u7f70","text":"<p>\u200b\u76ee\u524d\u200b\uff0c\u200b\u9a8c\u8bc1\u200b\u4eba\u672a\u200b\u6295\u7968\u200b\u4e0d\u4f1a\u200b\u53d7\u5230\u200b\u60e9\u7f5a\u200b\u3002</p>"},{"location":"gov/#_14","title":"\u6cbb\u7406\u200b\u5730\u5740","text":"<p>\u200b\u7a0d\u200b\u5f8c\u200b\uff0c\u200b\u6211\u5011\u200b\u53ef\u80fd\u200b\u6703\u200b\u6dfb\u52a0\u200b\u6709\u200b\u6b0a\u9650\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u9019\u4e9b\u200b\u5bc6\u200b\u9470\u200b\u53ea\u80fd\u200b\u5f9e\u200b\u67d0\u4e9b\u200b\u6a21\u584a\u200b\u7c3d\u540d\u200b\u4ea4\u6613\u200b\u3002 \u200b\u5c0d\u200b\u65bc\u200bMVP\uff08\u200b\u6700\u5c0f\u200b\u53ef\u884c\u200b\u7522\u54c1\u200b\uff09\uff0c\u200b\u6cbb\u7406\u200b\u5730\u5740\u200b\u5c07\u662f\u200b\u5728\u200b\u5e33\u6236\u200b\u5275\u5efa\u6642\u200b\u751f\u6210\u200b\u7684\u200b\u4e3b\u9a57\u200b\u8b49\u4eba\u200b\u5730\u5740\u200b\u3002 \u200b\u6b64\u200b\u5730\u5740\u200b\u5c0d\u61c9\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\uff08PrivKey\uff09\u200b\u8207\u200b\u8ca0\u8cac\u200b\u7c3d\u540d\u200b\u5171\u8b58\u200b\u6d88\u606f\u200b\u7684\u200bTendermint\u200b\u79c1\u9470\u200b\u4e0d\u540c\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u9a57\u8b49\u200b\u4eba\u200b\u7121\u200b\u9700\u200b\u4f7f\u7528\u200b\u654f\u611f\u200b\u7684\u200bTendermint\u200b\u79c1\u9470\u200b\u7c3d\u7f72\u200b\u6cbb\u7406\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u901a\u904e\u200b\u9019\u7a2e\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u9a57\u8b49\u200b\u4eba\u200b\u53ef\u4ee5\u200b\u4fdd\u8b77\u200b\u5176\u200b\u95dc\u9375\u200b\u7684\u200bTendermint\u200b\u79c1\u9470\u200b\uff0c\u200b\u540c\u6642\u200b\u4f7f\u7528\u200b\u4e0d\u540c\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\u9032\u884c\u200b\u6cbb\u7406\u200b\u6d3b\u52d5\u200b\u3002 \u200b\u9019\u200b\u6709\u52a9\u200b\u65bc\u200b\u63d0\u9ad8\u200b\u5340\u584a\u200b\u93c8\u200b\u7db2\u7d61\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\uff0c\u200b\u78ba\u4fdd\u9a57\u200b\u8b49\u4eba\u200b\u5728\u200b\u53c3\u200b\u8207\u200b\u6cbb\u7406\u200b\u6d3b\u52d5\u6642\u200b\u4e0d\u6703\u5c07\u200bTendermint\u200b\u79c1\u9470\u200b\u66b4\u9732\u200b\u7d66\u6f5b\u200b\u5728\u200b\u7684\u200b\u653b\u64ca\u8005\u200b\u3002</p>"},{"location":"gov/#_15","title":"\u8edf\u9ad4\u200b\u5347\u7d1a","text":"<p>\u200b\u5982\u679c\u200b\u63d0\u6848\u200b\u5c5e\u4e8e\u200bSoftwareUpgradeProposal\u200b\u7c7b\u578b\u200b\uff0c\u200b\u90a3\u4e48\u200b\u8282\u70b9\u200b\u9700\u8981\u200b\u5c06\u200b\u5176\u200b\u8f6f\u4ef6\u200b\u5347\u7ea7\u200b\u5230\u200b\u7ecf\u8fc7\u200b\u6295\u7968\u200b\u7684\u200b\u65b0\u200b\u7248\u672c\u200b\u3002\u200b\u8fd9\u4e2a\u200b\u8fc7\u7a0b\u200b\u5206\u4e3a\u200b\u4e24\u4e2a\u200b\u6b65\u9aa4\u200b\u3002</p>"},{"location":"gov/#_16","title":"\u8a0a\u865f","text":"<p>\u200b\u5728\u200b SoftwareUpgradeProposal \u200b\u88ab\u200b\u63a5\u53d7\u200b\u540e\u200b\uff0c\u200b\u9a8c\u8bc1\u200b\u8005\u200b\u9884\u8ba1\u200b\u4f1a\u200b\u5728\u200b\u7ee7\u7eed\u200b\u8fd0\u884c\u200b\u4e4b\u524d\u200b\u7684\u200b\u7248\u672c\u200b\u7684\u200b\u540c\u65f6\u200b\u4e0b\u8f7d\u200b\u5e76\u200b\u5b89\u88c5\u200b\u65b0\u200b\u7248\u672c\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u3002\u200b\u4e00\u65e6\u200b\u9a8c\u8bc1\u200b\u8005\u200b\u4e0b\u8f7d\u200b\u5e76\u200b\u5b89\u88c5\u200b\u4e86\u200b\u5347\u7ea7\u200b\uff0c\u200b\u5b83\u200b\u5c06\u200b\u901a\u8fc7\u200b\u5728\u200b\u5176\u200b <code>precommits</code> \u200b\u4e2d\u200b\u5305\u542b\u200b\u63d0\u6848\u200b\u7684\u200b proposalID \u200b\u5411\u200b\u7f51\u7edc\u200b\u53d1\u51fa\u4fe1\u53f7\u200b\uff0c\u200b\u8868\u660e\u200b\u5b83\u200b\u5df2\u200b\u51c6\u5907\u200b\u597d\u200b\u5207\u6362\u200b\u3002\uff08\u200b\u6ce8\u610f\u200b\uff1a\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u786e\u8ba4\u200b\u662f\u5426\u200b\u5e0c\u671b\u200b\u5c06\u200b\u5176\u200b\u5305\u542b\u200b\u5728\u200b <code>precommit</code> \u200b\u4e2d\u200b\uff1f\uff09</p> <p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u6bcf\u4e2a\u200b precommit \u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b\u4fe1\u53f7\u200b\u63d2\u69fd\u200b\u3002\u200b\u5982\u679c\u200b\u5728\u200b\u77ed\u65f6\u95f4\u200b\u5185\u200b\u63a5\u53d7\u200b\u4e86\u200b\u591a\u4e2a\u200b <code>SoftwareUpgradeProposals</code>\uff0c\u200b\u90a3\u4e48\u200b\u5c06\u200b\u5f62\u6210\u200b\u4e00\u4e2a\u200b\u6d41\u6c34\u7ebf\u200b\uff0c\u200b\u5b83\u4eec\u200b\u5c06\u200b\u6309\u7167\u200b\u88ab\u200b\u63a5\u53d7\u200b\u7684\u200b\u987a\u5e8f\u200b\u4f9d\u6b21\u200b\u5b9e\u65bd\u200b</p>"},{"location":"gov/#_17","title":"\u5207\u63db","text":"<p>\u200b\u7576\u4e00\u500b\u200b\u584a\u200b\u5305\u542b\u200b\u8d85\u904e\u200b2/3\u200b\u7684\u200b precommits\uff0c\u200b\u5176\u4e2d\u200b\u4e00\u500b\u200b\u5e38\u898b\u200b\u7684\u200bSoftwareUpgradeProposal\u200b\u88ab\u200b\u767c\u51fa\u200b\u4fe1\u865f\u200b\uff0c \u200b\u6240\u6709\u200b\u7bc0\u9ede\u200b\uff08\u200b\u5305\u62ec\u200b\u9a57\u8b49\u5668\u200b\u7bc0\u9ede\u200b\u3001\u200b\u975e\u9a57\u8b49\u200b\u5b8c\u6574\u200b\u7bc0\u9ede\u200b\u548c\u200b\u8f15\u7bc0\u9ede\u200b\uff09\u200b\u90fd\u200b\u61c9\u8a72\u200b\u5207\u63db\u200b\u5230\u200b\u8edf\u4ef6\u200b\u7684\u200b\u65b0\u200b\u7248\u672c\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u4e0d\u200b\u6e05\u695a\u200b\u5982\u4f55\u200b\u5728\u200b\u7a0b\u5f0f\u200b\u4e2d\u8655\u7406\u200b\u7ffb\u8f49\u200b\u64cd\u4f5c\u200b\u3002</p>"},{"location":"gov/#_18","title":"\u72c0\u614b","text":""},{"location":"gov/#_19","title":"\u53c3\u6578\u200b\u548c\u200b\u57fa\u672c\u200b\u985e\u578b","text":"<p>\u200b\u53c3\u6578\u200b \u200b\u5b9a\u7fa9\u4e86\u200b\u904b\u884c\u200b\u6295\u7968\u200b\u7684\u200b\u898f\u5247\u200b\u3002\u200b\u5728\u200b\u4efb\u4f55\u200b\u7d66\u5b9a\u200b\u6642\u9593\u200b\uff0c\u200b\u53ea\u80fd\u200b\u6709\u200b\u4e00\u500b\u200b\u6d3b\u52d5\u200b\u53c3\u6578\u96c6\u200b\u3002 \u200b\u5982\u679c\u200b\u6cbb\u7406\u200b\u5e0c\u671b\u200b\u66f4\u6539\u200b\u53c3\u6578\u96c6\u200b\uff0c\u200b\u7121\u8ad6\u200b\u662f\u200b\u4fee\u6539\u200b\u503c\u200b\u9084\u662f\u200b\u6dfb\u52a0\u200b/\u200b\u522a\u9664\u200b\u53c3\u6578\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u90fd\u200b\u5fc5\u9808\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u53c3\u6578\u96c6\u200b\uff0c\u200b\u4e26\u4f7f\u200b\u5148\u524d\u200b\u7684\u200b\u53c3\u6578\u200b\u96c6\u7121\u6548\u200b\u3002</p>"},{"location":"gov/#_20","title":"\u4fdd\u8b49\u91d1\u200b\u53c3\u6578","text":"<p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/gov/v1beta1/gov.proto#L127-L145</p>"},{"location":"gov/#_21","title":"\u6295\u7968\u200b\u53c3\u6578","text":"<p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/gov/v1beta1/gov.proto#L147-L156</p>"},{"location":"gov/#_22","title":"\u7d71\u8a08\u200b\u53c3\u6578","text":"<p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/gov/v1beta1/gov.proto#L158-L183</p> <p>\u200b\u53c3\u6578\u200b\u5b58\u5132\u200b\u5728\u200b\u5168\u5c40\u200b\u7684\u200b <code>GlobalParams</code> KVStore \u200b\u4e2d\u200b\u3002</p> <p>\u200b\u6b64\u5916\u200b\uff0c\u200b\u6211\u5011\u200b\u5f15\u5165\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u57fa\u672c\u200b\u985e\u578b\u200b\uff1a</p> <pre><code>type Vote byte\n\nconst (\n    VoteYes         = 0x1\n    VoteNo          = 0x2\n    VoteNoWithVeto  = 0x3\n    VoteAbstain     = 0x4\n)\n\ntype ProposalType  string\n\nconst (\n    ProposalTypePlainText       = \"Text\"\n    ProposalTypeSoftwareUpgrade = \"SoftwareUpgrade\"\n)\n\ntype ProposalStatus byte\n\n\nconst (\n    StatusNil           ProposalStatus = 0x00\n    StatusDepositPeriod ProposalStatus = 0x01  // Proposal is submitted. Participants can deposit on it but not vote\n    StatusVotingPeriod  ProposalStatus = 0x02  // MinDeposit is reached, participants can vote\n    StatusPassed        ProposalStatus = 0x03  // Proposal passed and successfully executed\n    StatusRejected      ProposalStatus = 0x04  // Proposal has been rejected\n    StatusFailed        ProposalStatus = 0x05  // Proposal passed but failed execution\n)\n</code></pre>"},{"location":"gov/#_23","title":"\u5b58\u6b3e","text":"<p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/gov/v1beta1/gov.proto#L43-L53</p>"},{"location":"gov/#_24","title":"\u9a57\u8b49\u5668\u200b\u6cbb\u7406\u200b\u8cc7\u8a0a","text":"<p>This type is used in a temp map when tallying</p> <pre><code>  type ValidatorGovInfo struct {\n    Minus     sdk.Dec\n    Vote      Vote\n  }\n</code></pre>"},{"location":"gov/#proposals","title":"Proposals","text":"<p>Proposal\u200b\u5c0d\u8c61\u200b\u7528\u200b\u65bc\u200b\u8a18\u9304\u200b\u6295\u7968\u200b\u548c\u200b\u8ddf\u8e2a\u200b\u63d0\u6848\u200b\u7684\u200b\u72c0\u614b\u200b\u3002\u200b\u5b83\u5011\u200b\u5305\u542b\u200bContent\uff0c\u200b\u8868\u793a\u200b\u6b64\u200b\u63d0\u6848\u200b\u7684\u200b\u4e3b\u984c\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u5176\u4ed6\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u9019\u4e9b\u200b\u5b57\u200b\u6bb5\u200b\u662f\u200b\u6cbb\u7406\u200b\u904e\u7a0b\u200b\u7684\u200b\u53ef\u8b8a\u200b\u72c0\u614b\u200b\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/gov/v1beta1/gov.proto#L55-L77</p> <pre><code>type Content interface {\n    GetTitle() string\n    GetDescription() string\n    ProposalRoute() string\n    ProposalType() string\n    ValidateBasic() sdk.Error\n    String() string\n}\n</code></pre> <p>\u200b\u63d0\u6848\u200b\u4e2d\u200b\u7684\u200b<code>Content</code>\u200b\u662f\u200b\u4e00\u500b\u200b\u63a5\u53e3\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u6709\u95dc\u200b<code>Proposal</code>\u200b\u7684\u200b\u4fe1\u606f\u200b\uff0c\u200b\u4f8b\u5982\u200b\u6a19\u984c\u200b\u3001\u200b\u63cf\u8ff0\u200b\u548c\u200b\u4efb\u4f55\u200b\u986f\u8457\u200b\u8b8a\u5316\u200b\u3002 \u200b\u6b64\u5916\u200b\uff0c\u200b\u8a72\u200b<code>Content</code>\u200b\u985e\u578b\u200b\u53ef\u4ee5\u200b\u7531\u200b\u4efb\u4f55\u200b\u6a21\u584a\u200b\u5be6\u73fe\u200b\u3002 <code>Content</code>\u200b\u7684\u200b<code>ProposalRoute</code>\u200b\u8fd4\u56de\u200b\u4e00\u500b\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u8a72\u200b\u5b57\u7b26\u4e32\u200b\u5fc5\u9808\u200b\u7528\u200b\u65bc\u200b\u5728\u200b\u6cbb\u7406\u200b\u4fdd\u7ba1\u200b\u5668\u200b\u4e2d\u8def\u200b\u7531\u200b<code>Content</code>\u200b\u7684\u200b<code>Handler</code>\u3002 \u200b\u9019\u5141\u8a31\u200b\u6cbb\u7406\u200b\u4fdd\u7ba1\u200b\u5668\u200b\u57f7\u884c\u200b\u7531\u200b\u4efb\u4f55\u200b\u6a21\u584a\u200b\u5be6\u73fe\u200b\u7684\u200b\u63d0\u6848\u200b\u908f\u8f2f\u200b\u3002 \u200b\u5982\u679c\u200b\u63d0\u6848\u200b\u901a\u904e\u200b\uff0c\u200b\u5247\u57f7\u884c\u200b\u8655\u7406\u200b\u7a0b\u5e8f\u200b\u3002 \u200b\u53ea\u6709\u200b\u5728\u200b\u8655\u7406\u200b\u7a0b\u5e8f\u200b\u6210\u529f\u200b\u57f7\u884c\u200b\u5f8c\u200b\uff0c\u200b\u72c0\u614b\u200b\u624d\u200b\u6703\u200b\u88ab\u200b\u6301\u4e45\u200b\u5316\u200b\uff0c\u200b\u63d0\u6848\u200b\u624d\u200b\u6700\u7d42\u200b\u901a\u904e\u200b\u3002 \u200b\u5426\u5247\u200b\uff0c\u200b\u63d0\u6848\u200b\u5c07\u88ab\u200b\u62d2\u7d55\u200b\u3002</p> <pre><code>type Handler func(ctx sdk.Context, content Content) sdk.Error\n</code></pre> <p><code>Handler</code>\u200b\u8ca0\u8cac\u200b\u5be6\u969b\u200b\u57f7\u884c\u200b\u63d0\u6848\u200b\u4e26\u8655\u7406\u200b\u63d0\u6848\u200b\u6307\u5b9a\u200b\u7684\u200b\u4efb\u4f55\u200b\u72c0\u614b\u200b\u8b8a\u200b\u66f4\u200b\u3002\u200b\u53ea\u6709\u200b\u5728\u200bEndBlock\u200b\u671f\u9593\u200b\u63d0\u6848\u200b\u901a\u904e\u200b\u6642\u200b\uff0c\u200b\u624d\u200b\u6703\u200b\u57f7\u884c\u200b\u5b83\u200b\u3002</p> <p>\u200b\u6211\u5011\u9084\u200b\u63d0\u5230\u200b\u4e86\u200b\u4e00\u7a2e\u200b\u66f4\u65b0\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u7d71\u8a08\u6578\u200b\u5b57\u200b\u7684\u200b\u65b9\u6cd5\u200b\uff1a</p> <pre><code>  func (proposal Proposal) updateTally(vote byte, amount sdk.Dec)\n</code></pre>"},{"location":"gov/#_25","title":"\u5b58\u5132","text":"<p>\u200b\u5b58\u5132\u5eab\u200b\u662f\u200b\u591a\u5b58\u200b\u5132\u7cfb\u7d71\u200b\u4e2d\u200b\u7684\u200bKVStores\u3002\u200b\u67e5\u627e\u200b\u5b58\u5132\u5eab\u200b\u7684\u200b\u9375\u200b\u662f\u200b\u5217\u8868\u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e00\u200b\u500b\u200b\u53c3\u6578\u200b\u3002`</p> <p>\u200b\u6211\u5011\u5c07\u200b\u4f7f\u7528\u200b\u4e00\u500b\u200bKVStore Governance\u200b\u4f86\u200b\u5b58\u5132\u200b\u5169\u500b\u200b\u6620\u5c04\u200b\uff1a</p> <ul> <li>\u200b\u5f9e\u200b <code>proposalID|'proposal'</code> \u200b\u5230\u200b <code>Proposal</code> \u200b\u7684\u200b\u6620\u5c04\u200b.</li> <li>\u200b\u5f9e\u200b <code>proposalID|'addresses'|address</code> \u200b\u5230\u200b `Vote1 \u200b\u7684\u200b\u6620\u5c04\u200b\u3002\u200b\u9019\u500b\u200b\u6620\u5c04\u200b\u5141\u8a31\u200b\u6211\u5011\u200b\u901a\u904e\u200b\u5c0d\u200b 1proposalID:addresses1 \u200b\u9032\u884c\u200b\u7bc4\u570d\u200b\u67e5\u8a62\u200b\uff0c\u200b\u67e5\u8a62\u200b\u5c0d\u200b\u63d0\u6848\u200b\u9032\u884c\u200b\u6295\u7968\u200b\u7684\u200b\u6240\u6709\u200b\u5730\u5740\u200b\u4ee5\u53ca\u200b\u5b83\u5011\u200b\u7684\u200b\u6295\u7968\u200b\u3002</li> </ul> <p>\u200b\u70ba\u200b\u4e86\u200b\u65b9\u4fbf\u200b\u95b1\u8b80\u200b\u507d\u4ee3\u78bc\u200b\uff0c\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u6211\u5011\u200b\u7528\u200b\u4f86\u200b\u5728\u200b\u5b58\u5132\u5eab\u200b\u4e2d\u200b\u8b80\u53d6\u200b\u6216\u200b\u5beb\u5165\u200b\u7684\u200b\u5169\u500b\u200b\u51fd\u6578\u200b\uff1a</p> <ul> <li><code>load(StoreKey, Key)</code>: \u200b\u5728\u200b\u591a\u5b58\u200b\u5132\u7cfb\u7d71\u200b\u4e2d\u200b\uff0c\u200b\u5728\u200b\u9375\u200b Key \u200b\u4e0b\u6aa2\u7d22\u200b\u5b58\u5132\u200b\u7684\u200b\u9805\u76ee\u200b\u3002</li> <li><code>store(StoreKey, Key, value)</code>: \u200b\u5728\u200b\u591a\u5b58\u200b\u5132\u7cfb\u7d71\u200b\u4e2d\u200b\uff0c\u200b\u5728\u200b\u9375\u200b Key \u200b\u4e0b\u5beb\u200b\u5165\u503c\u200b Value\u3002</li> </ul>"},{"location":"gov/#_26","title":"\u63d0\u6848\u200b\u8655\u7406\u200b\u968a\u5217","text":"<p>\u200b\u5b58\u5132\u200b:</p> <ul> <li><code>\u200b\u63d0\u6848\u200b\u8655\u7406\u200b\u968a\u5217\u200b</code>: \u200b\u4e00\u500b\u200b\u5305\u542b\u200b\u6240\u6709\u200b\u9054\u5230\u200b <code>MinDeposit</code> \u200b\u7684\u200b\u63d0\u6848\u200b\u7684\u200b \u200b\u63d0\u6848\u200bid \u200b\u7684\u200b\u968a\u5217\u200b <code>queue[proposalID]</code>\u3002\u200b\u5728\u200b\u6bcf\u500b\u200b EndBlock \u200b\u671f\u9593\u200b\uff0c\u200b\u6240\u6709\u200b\u5df2\u200b\u7d50\u675f\u200b\u6295\u7968\u200b\u671f\u200b\u7684\u200b\u63d0\u6848\u200b\u90fd\u5c07\u200b\u88ab\u200b\u8655\u7406\u200b\u3002</li> </ul> <p>\u200b\u70ba\u200b\u4e86\u200b\u8655\u7406\u200b\u5b8c\u6210\u200b\u7684\u200b\u63d0\u6848\u200b\uff0c\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5c0d\u200b\u6295\u7968\u200b\u9032\u884c\u200b\u7d71\u8a08\u200b\uff0c\u200b\u8a08\u7b97\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u6295\u7968\u200b\uff0c\u200b\u4e26\u6aa2\u67e5\u9a57\u200b\u8b49\u8005\u200b\u96c6\u5408\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u662f\u5426\u200b\u90fd\u200b\u5df2\u200b\u6295\u7968\u200b\u3002\u200b\u5982\u679c\u200b\u63d0\u6848\u200b\u88ab\u200b\u63a5\u53d7\u200b\uff0c\u200b\u5b58\u6b3e\u200b\u5c07\u88ab\u200b\u9000\u9084\u200b\u3002\u200b\u6700\u200b\u5f8c\u200b\uff0c\u200b\u57f7\u884c\u200b\u63d0\u6848\u200b\u5167\u5bb9\u200b <code>Handler</code>\u3002</p> <p>\u200b\u5728\u200b\u9019\u500b\u200b\u904e\u7a0b\u200b\u4e2d\u200b\uff0c<code>queue[proposalID]</code> \u200b\u968a\u5217\u5c07\u200b\u78ba\u4fdd\u200b\u6309\u7167\u200b\u9069\u7576\u200b\u7684\u200b\u9806\u5e8f\u200b\u8655\u7406\u200b\u5404\u500b\u200b\u63d0\u6848\u200b\uff0c\u200b\u4e26\u6839\u64da\u200b\u6295\u7968\u200b\u7d50\u679c\u200b\u6c7a\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u57f7\u884c\u200b\u8207\u200b\u5426\u200b\u3002\u200b\u9019\u200b\u6709\u52a9\u200b\u65bc\u200b\u5be6\u73fe\u200b\u5c0d\u5340\u200b\u584a\u200b\u93c8\u200b\u7db2\u7d61\u200b\u6cbb\u7406\u200b\u7684\u200b\u516c\u5e73\u200b\u548c\u200b\u6709\u5e8f\u200b\u64cd\u4f5c\u200b\u3002</p> <p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b <code>ProposalProcessingQueue</code> \u200b\u7684\u200b\u507d\u4ee3\u78bc\u200b\uff1a</p> <pre><code>  in EndBlock do\n\n    for finishedProposalID in GetAllFinishedProposalIDs(block.Time)\n      proposal = load(Governance, &lt;proposalID|'proposal'&gt;) // proposal is a const key\n\n      validators = Keeper.getAllValidators()\n      tmpValMap := map(sdk.AccAddress)ValidatorGovInfo\n\n      // Initiate mapping at 0. This is the amount of shares of the validator's vote that will be overridden by their delegator's votes\n      for each validator in validators\n        tmpValMap(validator.OperatorAddr).Minus = 0\n\n      // Tally\n      voterIterator = rangeQuery(Governance, &lt;proposalID|'addresses'&gt;) //return all the addresses that voted on the proposal\n      for each (voterAddress, vote) in voterIterator\n        delegations = stakingKeeper.getDelegations(voterAddress) // get all delegations for current voter\n\n        for each delegation in delegations\n          // make sure delegation.Shares does NOT include shares being unbonded\n          tmpValMap(delegation.ValidatorAddr).Minus += delegation.Shares\n          proposal.updateTally(vote, delegation.Shares)\n\n        _, isVal = stakingKeeper.getValidator(voterAddress)\n        if (isVal)\n          tmpValMap(voterAddress).Vote = vote\n\n      tallyingParam = load(GlobalParams, 'TallyingParam')\n\n      // Update tally if validator voted they voted\n      for each validator in validators\n        if tmpValMap(validator).HasVoted\n          proposal.updateTally(tmpValMap(validator).Vote, (validator.TotalShares - tmpValMap(validator).Minus))\n\n\n\n      // Check if proposal is accepted or rejected\n      totalNonAbstain := proposal.YesVotes + proposal.NoVotes + proposal.NoWithVetoVotes\n      if (proposal.Votes.YesVotes/totalNonAbstain &gt; tallyingParam.Threshold AND proposal.Votes.NoWithVetoVotes/totalNonAbstain  &lt; tallyingParam.Veto)\n        //  proposal was accepted at the end of the voting period\n        //  refund deposits (non-voters already punished)\n        for each (amount, depositor) in proposal.Deposits\n          depositor.AtomBalance += amount\n\n        stateWriter, err := proposal.Handler()\n        if err != nil\n            // proposal passed but failed during state execution\n            proposal.CurrentStatus = ProposalStatusFailed\n         else\n            // proposal pass and state is persisted\n            proposal.CurrentStatus = ProposalStatusAccepted\n            stateWriter.save()\n      else\n        // proposal was rejected\n        proposal.CurrentStatus = ProposalStatusRejected\n\n      store(Governance, &lt;proposalID|'proposal'&gt;, proposal)\n</code></pre>"},{"location":"gov/#_27","title":"\u6d88\u606f","text":""},{"location":"gov/#_28","title":"\u63d0\u6848\u200b\u63d0\u4ea4","text":"<p>\u200b\u63d0\u6848\u200b\u53ef\u4ee5\u200b\u7531\u200b\u4efb\u4f55\u200b\u5e33\u6236\u200b\u901a\u904e\u200b MsgSubmitProposal \u200b\u4ea4\u6613\u200b\u63d0\u4ea4\u200b\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/gov/v1beta1/tx.proto#L24-L39</p> <p><code>MsgSubmitProposal</code> \u200b\u6d88\u606f\u200b\u7684\u200b <code>Content</code> \u200b\u5fc5\u9808\u200b\u5728\u200b\u6cbb\u7406\u200b\u6a21\u584a\u200b\u4e2d\u200b\u8a2d\u7f6e\u200b\u4e00\u500b\u200b\u9069\u7576\u200b\u7684\u200b\u8def\u7531\u200b\u3002</p> <p>\u200b\u72c0\u614b\u200b\u4fee\u6539\u200b:</p> <ul> <li>\u200b\u751f\u6210\u200b\u65b0\u200b\u7684\u200b <code>proposalID</code></li> <li>\u200b\u5275\u200b\u5efa\u65b0\u200b\u7684\u200b <code>Proposal</code>:</li> <li>\u200b\u521d\u59cb\u5316\u200b <code>Proposals</code> \u200b\u5c6c\u6027\u200b\uff1a</li> <li>\u200b\u5c07\u767c\u200b\u9001\u8005\u200b\u7684\u200b\u9918\u984d\u200b\u6e1b\u5c11\u200b <code>InitialDeposit</code>\u3002</li> <li>\u200b\u5982\u679c\u200b\u9054\u5230\u200b <code>Deposit</code>\uff1a</li> <li>\u200b\u5728\u200b <code>ProposalProcessingQueue</code> \u200b\u4e2d\u200b\u52a0\u5165\u200b <code>proposalID</code>\u3002</li> <li>\u200b\u5c07\u200b <code>InitialDeposit</code> \u200b\u5f9e\u200b <code>Proposer</code> \u200b\u8f49\u79fb\u200b\u5230\u200b\u6cbb\u7406\u200b <code>M</code>oduleAccount`\u3002</li> </ul> <p>\u200b\u6839\u64da\u200b\u4ee5\u4e0b\u200b\u507d\u4ee3\u78bc\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u8655\u7406\u200b MsgSubmitProposal \u200b\u4ea4\u6613\u200b\u3002</p> <pre><code>// PSEUDOCODE //\n// Check if MsgSubmitProposal is valid. If it is, create proposal //\n\nupon receiving txGovSubmitProposal from sender do\n\n  if !correctlyFormatted(txGovSubmitProposal)\n    // check if proposal is correctly formatted. Includes fee payment.\n    throw\n\n  initialDeposit = txGovSubmitProposal.InitialDeposit\n  if (initialDeposit.Atoms &lt;= 0) OR (sender.AtomBalance &lt; initialDeposit.Atoms)\n    // InitialDeposit is negative or null OR sender has insufficient funds\n    throw\n\n  if (txGovSubmitProposal.Type != ProposalTypePlainText) OR (txGovSubmitProposal.Type != ProposalTypeSoftwareUpgrade)\n\n  sender.AtomBalance -= initialDeposit.Atoms\n\n  depositParam = load(GlobalParams, 'DepositParam')\n\n  proposalID = generate new proposalID\n  proposal = NewProposal()\n\n  proposal.Title = txGovSubmitProposal.Title\n  proposal.Description = txGovSubmitProposal.Description\n  proposal.Type = txGovSubmitProposal.Type\n  proposal.TotalDeposit = initialDeposit\n  proposal.SubmitTime = &lt;CurrentTime&gt;\n  proposal.DepositEndTime = &lt;CurrentTime&gt;.Add(depositParam.MaxDepositPeriod)\n  proposal.Deposits.append({initialDeposit, sender})\n  proposal.Submitter = sender\n  proposal.YesVotes = 0\n  proposal.NoVotes = 0\n  proposal.NoWithVetoVotes = 0\n  proposal.AbstainVotes = 0\n  proposal.CurrentStatus = ProposalStatusOpen\n\n  store(Proposals, &lt;proposalID|'proposal'&gt;, proposal) // Store proposal in Proposals mapping\n  return proposalID\n</code></pre>"},{"location":"gov/#_29","title":"\u6295\u7968","text":"<p>\u200b\u4e00\u65e6\u200b\u9054\u5230\u200b ActiveParam.MinDeposit\uff0c\u200b\u6295\u7968\u200b\u671f\u200b\u5c31\u200b\u958b\u59cb\u200b\u4e86\u200b\u3002\u200b\u5f9e\u200b\u90a3\u200b\u6642\u8d77\u200b\uff0c\u200b\u7d81\u5b9a\u200b\u7684\u200b Dst \u200b\u6301\u6709\u8005\u200b\u53ef\u4ee5\u200b\u767c\u9001\u200b MsgVote \u200b\u4ea4\u6613\u200b\uff0c\u200b\u5c0d\u200b\u63d0\u6848\u200b\u6295\u7968\u200b\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/gov/v1beta1/tx.proto#L46-L56</p> <p>\u200b\u72c0\u614b\u200b\u4fee\u6539\u200b\uff1a</p> <ul> <li>\u200b\u8a18\u9304\u200b\u767c\u9001\u8005\u200b\u7684\u200b <code>Vote</code></li> </ul> <p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u6b64\u200b\u6d88\u606f\u200b\u7684\u200b Gas \u200b\u6210\u672c\u200b\u5fc5\u987b\u200b\u8003\u8651\u200b\u5230\u200b EndBlocker \u200b\u4e2d\u200b\u672a\u6765\u200b\u7684\u200b\u6295\u7968\u200b\u7edf\u8ba1\u200b\u3002</p> <p>\u200b\u63a5\u4e0b\u200b\u4f86\u200b\u662f\u200b\u8655\u7406\u200b MsgVote \u200b\u4ea4\u6613\u200b\u7684\u200b\u507d\u4ee3\u78bc\u200b\u6982\u8ff0\u200b\uff1a</p> <pre><code>  // PSEUDOCODE //\n  // Check if MsgVote is valid. If it is, count vote//\n\n  upon receiving txGovVote from sender do\n    // check if proposal is correctly formatted. Includes fee payment.\n\n    if !correctlyFormatted(txGovDeposit)\n      throw\n\n    proposal = load(Proposals, &lt;txGovDeposit.ProposalID|'proposal'&gt;)\n\n    if (proposal == nil)\n      // There is no proposal for this proposalID\n      throw\n\n\n    if  (proposal.CurrentStatus == ProposalStatusActive)\n\n\n        // Sender can vote if\n        // Proposal is active\n        // Sender has some bonds\n\n        store(Governance, &lt;txGovVote.ProposalID|'addresses'|sender&gt;, txGovVote.Vote)   // Voters can vote multiple times. Re-voting overrides previous vote. This is ok because tallying is done once at the end.\n</code></pre>"},{"location":"gov/#_30","title":"\u4e8b\u4ef6","text":"<p>\u200b\u6cbb\u7406\u200b\u6a21\u7d44\u200b\u767c\u51fa\u200b\u4ee5\u4e0b\u200b\u4e8b\u4ef6\u200b\uff1a</p>"},{"location":"gov/#endblocker","title":"EndBlocker","text":"Type Attribute Key Attribute Value inactive_proposal proposal_id {proposalID} inactive_proposal proposal_result {proposalResult} active_proposal proposal_id {proposalID} active_proposal proposal_result {proposalResult}"},{"location":"gov/#handlers","title":"Handlers","text":""},{"location":"gov/#msgsubmitproposal","title":"MsgSubmitProposal","text":"Type Attribute Key Attribute Value submit_proposal proposal_id {proposalID} submit_proposal [0] voting_period_start {proposalID} proposal_deposit amount {depositAmount} proposal_deposit proposal_id {proposalID} message module governance message action submit_proposal message sender {senderAddress} <ul> <li>[0] Event only emitted if the voting period starts during the submission.</li> </ul>"},{"location":"gov/#msgvote","title":"MsgVote","text":"Type Attribute Key Attribute Value proposal_vote option {voteOption} proposal_vote proposal_id {proposalID} message module governance message action vote message sender {senderAddress}"},{"location":"gov/#msgdeposit","title":"MsgDeposit","text":"Type Attribute Key Attribute Value proposal_deposit amount {depositAmount} proposal_deposit proposal_id {proposalID} proposal_deposit [0] voting_period_start {proposalID} message module governance message action deposit message sender {senderAddress} <ul> <li>[0] \u200b\u5982\u679c\u200b\u6295\u7968\u200b\u671f\u5728\u200b\u63d0\u4ea4\u200b\u671f\u9593\u200b\u958b\u59cb\u200b\uff0c\u200b\u5247\u50c5\u200b\u767c\u51fa\u200b\u4e8b\u4ef6\u200b\u3002</li> </ul>"},{"location":"gov/#parameters","title":"Parameters","text":"<p>\u200b\u6cbb\u7406\u200b\u6a21\u7d44\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u53c3\u6578\u200b\uff1a</p> Key Type Example depositparams object {\"min_deposit\":[{\"denom\":\"uatom\",\"amount\":\"10000000\"}],\"max_deposit_period\":\"172800000000000\"} votingparams object {\"voting_period\":\"172800000000000\"} tallyparams object {\"quorum\":\"0.334000000000000000\",\"threshold\":\"0.500000000000000000\",\"veto\":\"0.334000000000000000\"}"},{"location":"gov/#subkeys","title":"SubKeys","text":"Key Type Example min_deposit array (coins) [{\"denom\":\"uatom\",\"amount\":\"10000000\"}] max_deposit_period string (time ns) \"172800000000000\" voting_period string (time ns) \"172800000000000\" quorum string (dec) \"0.334000000000000000\" threshold string (dec) \"0.500000000000000000\" veto string (dec) \"0.334000000000000000\" <p>\u200b\u6ce8\u610f\u200b: \u200b\u6cbb\u7406\u200b\u6a21\u7d44\u200b\u5305\u542b\u200b\u8207\u200b\u5176\u4ed6\u200b\u6a21\u7d44\u200b\u4e0d\u540c\u200b\u7684\u200b\u5c0d\u8c61\u200b\u985e\u578b\u200b\u53c3\u6578\u200b\u3002\u200b\u5982\u679c\u200b\u53ea\u200b\u5e0c\u671b\u200b\u66f4\u6539\u200b\u4e00\u90e8\u5206\u200b\u53c3\u6578\u200b\uff0c\u200b\u5247\u53ea\u200b\u9700\u200b\u5305\u542b\u200b\u5b83\u5011\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u6574\u500b\u200b\u53c3\u6578\u200b\u5c0d\u8c61\u200b\u7d50\u69cb\u200b\u3002</p>"},{"location":"gov/#_31","title":"\u5ba2\u6236\u200b\u7aef","text":""},{"location":"gov/#cli","title":"CLI","text":"<p>\u200b\u4f7f\u7528\u8005\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200bCLI\u200b\u67e5\u8a62\u200b\u548c\u200b\u8207\u200bgov\u200b\u6a21\u7d44\u200b\u4e92\u52d5\u200b\u3002</p>"},{"location":"gov/#_32","title":"\u67e5\u8a62","text":"<p>\u200b\u67e5\u8a62\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200bgov\u200b\u72c0\u614b\u200b\u3002</p> <pre><code>stcd query gov --help\n</code></pre>"},{"location":"gov/#deposit","title":"deposit","text":"<p>The <code>deposit</code> command allows users to query a deposit for a given proposal from a given depositor.</p> <pre><code>stcd query gov deposit [proposal-id] [depositer-addr] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query gov deposit 1 cosmos1..\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>amount:\n- amount: \"100\"\n  denom: stake\ndepositor: cosmos1..\nproposal_id: \"1\"\n</code></pre>"},{"location":"gov/#deposits","title":"deposits","text":"<p>deposits\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u6240\u6709\u200b\u5b58\u6b3e\u200b\u3002</p> <pre><code>stcd query gov deposits [proposal-id] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query gov deposits 1\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>deposits:\n- amount:\n  - amount: \"100\"\n    denom: stake\n  depositor: cosmos1..\n  proposal_id: \"1\"\npagination:\n  next_key: null\n  total: \"0\"\n</code></pre>"},{"location":"gov/#param","title":"param","text":"<p>param\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200bgov\u200b\u6a21\u7d44\u200b\u7684\u200b\u7d66\u5b9a\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>stcd query gov param [param-type] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query gov param voting\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>voting_period: \"172800000000000\"\n</code></pre>"},{"location":"gov/#params","title":"params","text":"<p><code>params</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200bgov\u200b\u6a21\u7d44\u200b\u7684\u200b\u6240\u6709\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>stcd query gov params [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query gov params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>deposit_params:\n  max_deposit_period: \"172800000000000\"\n  min_deposit:\n  - amount: \"10000000\"\n    denom: stake\ntally_params:\n  quorum: \"0.334000000000000000\"\n  threshold: \"0.500000000000000000\"\n  veto_threshold: \"0.334000000000000000\"\nvoting_params:\n  voting_period: \"172800000000000\"\n</code></pre>"},{"location":"gov/#proposal","title":"proposal","text":"<p><code>proposal</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u7684\u200b\u63d0\u6848\u200b\u3002</p> <pre><code>stcd query gov proposal [proposal-id] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query gov proposal 1\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>content:\n  '@type': /cosmos.gov.v1beta1.TextProposal\n  description: testing, testing, 1, 2, 3\n  title: Test Proposal\ndeposit_end_time: \"2021-09-17T23:36:18.254995423Z\"\nfinal_tally_result:\n  abstain: \"0\"\n  \"no\": \"0\"\n  no_with_veto: \"0\"\n  \"yes\": \"0\"\nproposal_id: \"1\"\nstatus: PROPOSAL_STATUS_DEPOSIT_PERIOD\nsubmit_time: \"2021-09-15T23:36:18.254995423Z\"\ntotal_deposit:\n- amount: \"100\"\n  denom: stake\nvoting_end_time: \"0001-01-01T00:00:00Z\"\nvoting_start_time: \"0001-01-01T00:00:00Z\"\n</code></pre>"},{"location":"gov/#proposals_1","title":"proposals","text":"<p><code>proposals</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u4f7f\u7528\u200b\u53ef\u9078\u200b\u7be9\u9078\u5668\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u63d0\u6848\u200b\u3002</p> <pre><code>stcd query gov proposals [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query gov proposals\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>pagination:\n  next_key: null\n  total: \"1\"\nproposals:\n- content:\n    '@type': /cosmos.gov.v1beta1.TextProposal\n    description: testing, testing, 1, 2, 3\n    title: Test Proposal\n  deposit_end_time: \"2021-09-17T23:36:18.254995423Z\"\n  final_tally_result:\n    abstain: \"0\"\n    \"no\": \"0\"\n    no_with_veto: \"0\"\n    \"yes\": \"0\"\n  proposal_id: \"1\"\n  status: PROPOSAL_STATUS_DEPOSIT_PERIOD\n  submit_time: \"2021-09-15T23:36:18.254995423Z\"\n  total_deposit:\n  - amount: \"100\"\n    denom: stake\n  voting_end_time: \"0001-01-01T00:00:00Z\"\n  voting_start_time: \"0001-01-01T00:00:00Z\"\n</code></pre>"},{"location":"gov/#proposer","title":"proposer","text":"<p><code>proposer</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u63d0\u8b70\u200b\u4eba\u200b\u3002</p> <pre><code>stcd query gov proposer [proposal-id] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>simd query gov proposer 1\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>proposal_id: \"1\"\nproposer: cosmos1r0tllwu5c9dtgwg3wr28lpvf76hg85f5zmh9l2\n</code></pre>"},{"location":"gov/#tally","title":"tally","text":"<p><code>tally</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u6295\u7968\u200b\u7684\u200b\u7d71\u8a08\u200b\u7d50\u679c\u200b\u3002</p> <pre><code>stcd query gov tally [proposal-id] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>simd query gov tally 1\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>abstain: \"0\"\n\"no\": \"0\"\nno_with_veto: \"0\"\n\"yes\": \"1\"\n</code></pre>"},{"location":"gov/#vote_1","title":"vote","text":"<p><code>vote</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u6295\u7968\u200b\u60c5\u6cc1\u200b\u3002</p> <pre><code>stcd query gov vote [proposal-id] [voter-addr] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>simd query gov vote 1 cosmos1..\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>option: VOTE_OPTION_YES\noptions:\n- option: VOTE_OPTION_YES\n  weight: \"1.000000000000000000\"\nproposal_id: \"1\"\nvoter: cosmos1..\n</code></pre>"},{"location":"gov/#votes","title":"votes","text":"<p><code>votes</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u6240\u6709\u200b\u6295\u7968\u200b\u60c5\u6cc1\u200b\u3002</p> <pre><code>stcd query gov votes [proposal-id] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>simd query gov votes 1\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>pagination:\n  next_key: null\n  total: \"0\"\nvotes:\n- option: VOTE_OPTION_YES\n  options:\n  - option: VOTE_OPTION_YES\n    weight: \"1.000000000000000000\"\n  proposal_id: \"1\"\n  voter: cosmos1r0tllwu5c9dtgwg3wr28lpvf76hg85f5zmh9l2\n</code></pre>"},{"location":"gov/#_33","title":"\u4ea4\u6613","text":"<p>tx\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u8207\u200bgov\u200b\u6a21\u584a\u200b\u9032\u884c\u200b\u4ea4\u4e92\u200b\u3002</p> <pre><code>stcd tx gov --help\n</code></pre>"},{"location":"gov/#deposit_1","title":"deposit","text":"<p>deposit\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u70ba\u200b\u7d66\u5b9a\u200b\u7684\u200b\u63d0\u6848\u200b\u5b58\u5165\u200b\u4ee3\u5e63\u200b\u3002</p> <pre><code>stcd tx gov deposit [proposal-id] [deposit] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd tx gov deposit 1 10000000stake --from cosmos1..\n</code></pre>"},{"location":"gov/#submit-proposal","title":"submit-proposal","text":"<p>The <code>submit-proposal</code> command allows users to submit a governance proposal and to optionally include an initial deposit.</p> <pre><code>simd tx gov submit-proposal [command] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd tx gov submit-proposal --title=\"Test Proposal\" --description=\"testing, testing, 1, 2, 3\" --type=\"Text\" --deposit=\"10000000stake\" --from cosmos1..\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b (<code>cancel-software-upgrade</code>):</p> <pre><code>stcd tx gov submit-proposal cancel-software-upgrade --title=\"Test Proposal\" --description=\"testing, testing, 1, 2, 3\" --deposit=\"10000000stake\" --from cosmos1..\n</code></pre> <p>Example (<code>community-pool-spend</code>):</p> <pre><code>stcd tx gov submit-proposal community-pool-spend proposal.json --from cosmos1..\n</code></pre> <pre><code>{\n  \"title\": \"Test Proposal\",\n  \"description\": \"testing, testing, 1, 2, 3\",\n  \"recipient\": \"cosmos1..\",\n  \"amount\": \"10000000stake\",\n  \"deposit\": \"10000000stake\"\n}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b (<code>param-change</code>):</p> <pre><code>stcd tx gov submit-proposal param-change proposal.json --from cosmos1..\n</code></pre> <pre><code>{\n  \"title\": \"Test Proposal\",\n  \"description\": \"testing, testing, 1, 2, 3\",\n  \"changes\": [\n    {\n      \"subspace\": \"staking\",\n      \"key\": \"MaxValidators\",\n      \"value\": 100\n    }\n  ],\n  \"deposit\": \"10000000stake\"\n}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b (<code>software-upgrade</code>):</p> <pre><code>stcd tx gov submit-proposal software-upgrade v2 --title=\"Test Proposal\" --description=\"testing, testing, 1, 2, 3\" --upgrade-height 1000000 --from cosmos1..\n</code></pre>"},{"location":"gov/#vote_2","title":"vote","text":"<p><code>vote</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u63d0\u4ea4\u200b\u5c0d\u200b\u7d66\u5b9a\u200b\u6cbb\u7406\u200b\u63d0\u6848\u200b\u7684\u200b\u6295\u7968\u200b\u3002</p> <pre><code>stcd tx gov vote [command] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd tx gov vote 1 yes --from cosmos1..\n</code></pre>"},{"location":"gov/#grpc","title":"gRPC","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200bgRPC\u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200bgov\u200b\u6a21\u584a\u200b\u3002</p>"},{"location":"gov/#proposal_1","title":"Proposal","text":"<p><code>Proposal</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u7684\u200b\u63d0\u6848\u200b\u3002</p> <pre><code>cosmos.gov.v1beta1.Query/Proposal\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n    -d '{\"proposal_id\":\"1\"}' \\\n    localhost:9090 \\\n    cosmos.gov.v1beta1.Query/Proposal\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"proposal\": {\n    \"proposalId\": \"1\",\n    \"content\": {\"@type\":\"/cosmos.gov.v1beta1.TextProposal\",\"description\":\"testing, testing, 1, 2, 3\",\"title\":\"Test Proposal\"},\n    \"status\": \"PROPOSAL_STATUS_VOTING_PERIOD\",\n    \"finalTallyResult\": {\n      \"yes\": \"0\",\n      \"abstain\": \"0\",\n      \"no\": \"0\",\n      \"noWithVeto\": \"0\"\n    },\n    \"submitTime\": \"2021-09-16T19:40:08.712440474Z\",\n    \"depositEndTime\": \"2021-09-18T19:40:08.712440474Z\",\n    \"totalDeposit\": [\n      {\n        \"denom\": \"stake\",\n        \"amount\": \"10000000\"\n      }\n    ],\n    \"votingStartTime\": \"2021-09-16T19:40:08.712440474Z\",\n    \"votingEndTime\": \"2021-09-18T19:40:08.712440474Z\"\n  }\n}\n</code></pre>"},{"location":"gov/#proposals_2","title":"Proposals","text":"<p><code>Proposals</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u4f7f\u7528\u200b\u53ef\u9078\u904e\u200b\u6ffe\u5668\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u63d0\u6848\u200b\u3002</p> <pre><code>cosmos.gov.v1beta1.Query/Proposals\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n    localhost:9090 \\\n    cosmos.gov.v1beta1.Query/Proposals\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"proposals\": [\n    {\n      \"proposalId\": \"1\",\n      \"content\": {\"@type\":\"/cosmos.gov.v1beta1.TextProposal\",\"description\":\"testing, testing, 1, 2, 3\",\"title\":\"Test Proposal\"},\n      \"status\": \"PROPOSAL_STATUS_VOTING_PERIOD\",\n      \"finalTallyResult\": {\n        \"yes\": \"0\",\n        \"abstain\": \"0\",\n        \"no\": \"0\",\n        \"noWithVeto\": \"0\"\n      },\n      \"submitTime\": \"2021-09-16T19:40:08.712440474Z\",\n      \"depositEndTime\": \"2021-09-18T19:40:08.712440474Z\",\n      \"totalDeposit\": [\n        {\n          \"denom\": \"stake\",\n          \"amount\": \"10000000\"\n        }\n      ],\n      \"votingStartTime\": \"2021-09-16T19:40:08.712440474Z\",\n      \"votingEndTime\": \"2021-09-18T19:40:08.712440474Z\"\n    },\n    {\n      \"proposalId\": \"2\",\n      \"content\": {\"@type\":\"/cosmos.upgrade.v1beta1.CancelSoftwareUpgradeProposal\",\"description\":\"Test Proposal\",\"title\":\"testing, testing, 1, 2, 3\"},\n      \"status\": \"PROPOSAL_STATUS_DEPOSIT_PERIOD\",\n      \"finalTallyResult\": {\n        \"yes\": \"0\",\n        \"abstain\": \"0\",\n        \"no\": \"0\",\n        \"noWithVeto\": \"0\"\n      },\n      \"submitTime\": \"2021-09-17T18:26:57.866854713Z\",\n      \"depositEndTime\": \"2021-09-19T18:26:57.866854713Z\",\n      \"votingStartTime\": \"0001-01-01T00:00:00Z\",\n      \"votingEndTime\": \"0001-01-01T00:00:00Z\"\n    }\n  ],\n  \"pagination\": {\n    \"total\": \"2\"\n  }\n}\n</code></pre>"},{"location":"gov/#vote_3","title":"Vote","text":"<p><code>Vote</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u6295\u7968\u200b\u3002</p> <pre><code>cosmos.gov.v1beta1.Query/Vote\n</code></pre> <p>Example:</p> <pre><code>grpcurl -plaintext \\\n    -d '{\"proposal_id\":\"1\",\"voter\":\"cosmos1..\"}' \\\n    localhost:9090 \\\n    cosmos.gov.v1beta1.Query/Vote\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"vote\": {\n    \"proposalId\": \"1\",\n    \"voter\": \"cosmos1..\",\n    \"option\": \"VOTE_OPTION_YES\",\n    \"options\": [\n      {\n        \"option\": \"VOTE_OPTION_YES\",\n        \"weight\": \"1000000000000000000\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"gov/#votes_1","title":"Votes","text":"<p>The <code>Votes</code> endpoint allows users to query all votes for a given proposal.</p> <pre><code>cosmos.gov.v1beta1.Query/Votes\n</code></pre> <p>Example:</p> <pre><code>grpcurl -plaintext \\\n    -d '{\"proposal_id\":\"1\"}' \\\n    localhost:9090 \\\n    cosmos.gov.v1beta1.Query/Votes\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"votes\": [\n    {\n      \"proposalId\": \"1\",\n      \"voter\": \"cosmos1..\",\n      \"option\": \"VOTE_OPTION_YES\",\n      \"options\": [\n        {\n          \"option\": \"VOTE_OPTION_YES\",\n          \"weight\": \"1000000000000000000\"\n        }\n      ]\n    }\n  ],\n  \"pagination\": {\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"gov/#params_1","title":"Params","text":"<p>Params\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200bgov\u200b\u6a21\u584a\u200b\u7684\u200b\u6240\u6709\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>cosmos.gov.v1beta1.Query/Params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n    -d '{\"params_type\":\"voting\"}' \\\n    localhost:9090 \\\n    cosmos.gov.v1beta1.Query/Params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"votingParams\": {\n    \"votingPeriod\": \"172800s\"\n  },\n  \"depositParams\": {\n    \"maxDepositPeriod\": \"0s\"\n  },\n  \"tallyParams\": {\n    \"quorum\": \"MA==\",\n    \"threshold\": \"MA==\",\n    \"vetoThreshold\": \"MA==\"\n  }\n}\n</code></pre>"},{"location":"gov/#deposit_2","title":"Deposit","text":"<p>Deposit\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u5b58\u6b3e\u200b\uff0c\u200b\u8a72\u200b\u5b58\u6b3e\u200b\u4f86\u200b\u81ea\u200b\u7279\u5b9a\u200b\u7684\u200b\u5b58\u6b3e\u4eba\u200b\u3002</p> <pre><code>cosmos.gov.v1beta1.Query/Deposit\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n    '{\"proposal_id\":\"1\",\"depositor\":\"cosmos1..\"}' \\\n    localhost:9090 \\\n    cosmos.gov.v1beta1.Query/Deposit\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"deposit\": {\n    \"proposalId\": \"1\",\n    \"depositor\": \"cosmos1..\",\n    \"amount\": [\n      {\n        \"denom\": \"stake\",\n        \"amount\": \"10000000\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"gov/#deposits_1","title":"deposits","text":"<p>Deposits\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u6240\u6709\u200b\u5b58\u6b3e\u200b\u3002</p> <pre><code>cosmos.gov.v1beta1.Query/Deposits\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n    -d '{\"proposal_id\":\"1\"}' \\\n    localhost:9090 \\\n    cosmos.gov.v1beta1.Query/Deposits\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"deposits\": [\n    {\n      \"proposalId\": \"1\",\n      \"depositor\": \"cosmos1..\",\n      \"amount\": [\n        {\n          \"denom\": \"stake\",\n          \"amount\": \"10000000\"\n        }\n      ]\n    }\n  ],\n  \"pagination\": {\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"gov/#tallyresult","title":"TallyResult","text":"<p><code>TallyResult</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u7d71\u8a08\u200b\u7d50\u679c\u200b\u3002</p> <pre><code>cosmos.gov.v1beta1.Query/TallyResult\n</code></pre> <p>Example:</p> <pre><code>grpcurl -plaintext \\\n    -d '{\"proposal_id\":\"1\"}' \\\n    localhost:9090 \\\n    cosmos.gov.v1beta1.Query/TallyResult\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"tally\": {\n    \"yes\": \"1000000\",\n    \"abstain\": \"0\",\n    \"no\": \"0\",\n    \"noWithVeto\": \"0\"\n  }\n}\n</code></pre>"},{"location":"gov/#rest","title":"REST","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200bREST\u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200bgov\u200b\u6a21\u584a\u200b\u3002</p>"},{"location":"gov/#proposal_2","title":"proposal","text":"<p><code>proposals</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u7684\u200b\u63d0\u6848\u200b\u3002</p> <pre><code>/cosmos/gov/v1beta1/proposals/{proposal_id}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl localhost:1317/cosmos/gov/v1beta1/proposals/1\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"proposal\": {\n    \"proposal_id\": \"1\",\n    \"content\": {\n      \"@type\": \"/cosmos.gov.v1beta1.TextProposal\",\n      \"title\": \"Test Proposal\",\n      \"description\": \"testing, testing, 1, 2, 3\"\n    },\n    \"status\": \"PROPOSAL_STATUS_VOTING_PERIOD\",\n    \"final_tally_result\": {\n      \"yes\": \"0\",\n      \"abstain\": \"0\",\n      \"no\": \"0\",\n      \"no_with_veto\": \"0\"\n    },\n    \"submit_time\": \"2021-09-16T19:40:08.712440474Z\",\n    \"deposit_end_time\": \"2021-09-18T19:40:08.712440474Z\",\n    \"total_deposit\": [\n      {\n        \"denom\": \"stake\",\n        \"amount\": \"10000000\"\n      }\n    ],\n    \"voting_start_time\": \"2021-09-16T19:40:08.712440474Z\",\n    \"voting_end_time\": \"2021-09-18T19:40:08.712440474Z\"\n  }\n}\n</code></pre>"},{"location":"gov/#proposals_3","title":"proposals","text":"<p><code>proposals</code>\u200b\u7aef\u9ede\u200b\u9084\u5141\u8a31\u200b\u7528\u6236\u200b\u4f7f\u7528\u200b\u53ef\u9078\u904e\u200b\u6ffe\u5668\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u63d0\u6848\u200b\u3002</p> <pre><code>/cosmos/gov/v1beta1/proposals\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl localhost:1317/cosmos/gov/v1beta1/proposals\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"proposals\": [\n    {\n      \"proposal_id\": \"1\",\n      \"content\": {\n        \"@type\": \"/cosmos.gov.v1beta1.TextProposal\",\n        \"title\": \"Test Proposal\",\n        \"description\": \"testing, testing, 1, 2, 3\"\n      },\n      \"status\": \"PROPOSAL_STATUS_VOTING_PERIOD\",\n      \"final_tally_result\": {\n        \"yes\": \"0\",\n        \"abstain\": \"0\",\n        \"no\": \"0\",\n        \"no_with_veto\": \"0\"\n      },\n      \"submit_time\": \"2021-09-16T19:40:08.712440474Z\",\n      \"deposit_end_time\": \"2021-09-18T19:40:08.712440474Z\",\n      \"total_deposit\": [\n        {\n          \"denom\": \"stake\",\n          \"amount\": \"10000000\"\n        }\n      ],\n      \"voting_start_time\": \"2021-09-16T19:40:08.712440474Z\",\n      \"voting_end_time\": \"2021-09-18T19:40:08.712440474Z\"\n    },\n    {\n      \"proposal_id\": \"2\",\n      \"content\": {\n        \"@type\": \"/cosmos.upgrade.v1beta1.CancelSoftwareUpgradeProposal\",\n        \"title\": \"Test Proposal\",\n        \"description\": \"testing, testing, 1, 2, 3\"\n      },\n      \"status\": \"PROPOSAL_STATUS_DEPOSIT_PERIOD\",\n      \"final_tally_result\": {\n        \"yes\": \"0\",\n        \"abstain\": \"0\",\n        \"no\": \"0\",\n        \"no_with_veto\": \"0\"\n      },\n      \"submit_time\": \"2021-09-17T18:26:57.866854713Z\",\n      \"deposit_end_time\": \"2021-09-19T18:26:57.866854713Z\",\n      \"total_deposit\": [\n      ],\n      \"voting_start_time\": \"0001-01-01T00:00:00Z\",\n      \"voting_end_time\": \"0001-01-01T00:00:00Z\"\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"2\"\n  }\n}\n</code></pre>"},{"location":"gov/#voter-vote","title":"voter vote","text":"<p><code>votes</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u6295\u7968\u200b\u3002</p> <pre><code>/cosmos/gov/v1beta1/proposals/{proposal_id}/votes/{voter}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl localhost:1317/cosmos/gov/v1beta1/proposals/1/votes/cosmos1..\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"vote\": {\n    \"proposal_id\": \"1\",\n    \"voter\": \"cosmos1..\",\n    \"option\": \"VOTE_OPTION_YES\",\n    \"options\": [\n      {\n        \"option\": \"VOTE_OPTION_YES\",\n        \"weight\": \"1.000000000000000000\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"gov/#votes_2","title":"votes","text":"<p><code>votes</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u6240\u6709\u200b\u6295\u7968\u200b\u3002</p> <pre><code>/cosmos/gov/v1beta1/proposals/{proposal_id}/votes\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl localhost:1317/cosmos/gov/v1beta1/proposals/1/votes\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"votes\": [\n    {\n      \"proposal_id\": \"1\",\n      \"voter\": \"cosmos1..\",\n      \"option\": \"VOTE_OPTION_YES\",\n      \"options\": [\n        {\n          \"option\": \"VOTE_OPTION_YES\",\n          \"weight\": \"1.000000000000000000\"\n        }\n      ]\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"gov/#params_2","title":"params","text":"<p><code>params</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200bgov\u200b\u6a21\u584a\u200b\u7684\u200b\u6240\u6709\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>/cosmos/gov/v1beta1/params/{params_type}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl localhost:1317/cosmos/gov/v1beta1/params/voting\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"voting_params\": {\n    \"voting_period\": \"172800s\"\n  },\n  \"deposit_params\": {\n    \"min_deposit\": [\n    ],\n    \"max_deposit_period\": \"0s\"\n  },\n  \"tally_params\": {\n    \"quorum\": \"0.000000000000000000\",\n    \"threshold\": \"0.000000000000000000\",\n    \"veto_threshold\": \"0.000000000000000000\"\n  }\n}\n</code></pre>"},{"location":"gov/#deposits_2","title":"deposits","text":"<p>deposits\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u4f86\u200b\u81ea\u7d66\u5b9a\u200b\u5b58\u6b3e\u4eba\u200b\u7684\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u5b58\u6b3e\u200b\u3002</p> <pre><code>/cosmos/gov/v1beta1/proposals/{proposal_id}/deposits/{depositor}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl localhost:1317/cosmos/gov/v1beta1/proposals/1/deposits/cosmos1..\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"deposit\": {\n    \"proposal_id\": \"1\",\n    \"depositor\": \"cosmos1..\",\n    \"amount\": [\n      {\n        \"denom\": \"stake\",\n        \"amount\": \"10000000\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"gov/#proposal-deposits","title":"proposal deposits","text":"<p><code>deposits</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u6240\u6709\u200b\u5b58\u6b3e\u200b\u3002</p> <pre><code>/cosmos/gov/v1beta1/proposals/{proposal_id}/deposits\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl localhost:1317/cosmos/gov/v1beta1/proposals/1/deposits\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"deposits\": [\n    {\n      \"proposal_id\": \"1\",\n      \"depositor\": \"cosmos1..\",\n      \"amount\": [\n        {\n          \"denom\": \"stake\",\n          \"amount\": \"10000000\"\n        }\n      ]\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"gov/#tally_1","title":"tally","text":"<p><code>tally</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u63d0\u6848\u200b\u7684\u200b\u7d71\u8a08\u200b\u7d50\u679c\u200b\u3002</p> <pre><code>/cosmos/gov/v1beta1/proposals/{proposal_id}/tally\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl localhost:1317/cosmos/gov/v1beta1/proposals/1/tally\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"tally\": {\n    \"yes\": \"1000000\",\n    \"abstain\": \"0\",\n    \"no\": \"0\",\n    \"no_with_veto\": \"0\"\n  }\n}\n</code></pre>"},{"location":"mint/","title":"\u9444\u9020","text":""},{"location":"mint/#_1","title":"<code>\u200b\u9444\u5e63\u200b</code>","text":""},{"location":"mint/#_2","title":"\u6982\u5ff5","text":""},{"location":"mint/#_3","title":"\u9444\u5e63\u200b\u6a5f\u5236","text":"<p>\u200b\u9444\u5e63\u200b\u6a5f\u5236\u200b\u7684\u200b\u8a2d\u8a08\u200b\u76ee\u7684\u200b\u662f\u200b\uff1a</p> <ul> <li>\u200b\u5141\u8a31\u200b\u901a\u904e\u200b\u5e02\u5834\u200b\u9700\u6c42\u200b\u78ba\u5b9a\u200b\u7279\u5b9a\u200b\u64d4\u4fdd\u200b\u80a1\u6b0a\u200b\u6bd4\u7387\u200b\u7684\u200b\u9748\u6d3b\u200b\u901a\u8139\u200b\u7387\u200b\u3002</li> <li>\u200b\u5728\u200b\u5e02\u5834\u200b\u6d41\u52d5\u6027\u200b\u548c\u200b\u62b5\u62bc\u200b\u4f9b\u61c9\u200b\u4e4b\u9593\u200b\u5be6\u73fe\u200b\u5e73\u8861\u200b\u3002</li> </ul> <p>\u200b\u70ba\u200b\u4e86\u200b\u6700\u597d\u200b\u5730\u200b\u78ba\u5b9a\u200b\u901a\u8139\u200b\u734e\u52f5\u200b\u7684\u200b\u9069\u7576\u200b\u5e02\u5834\u200b\u5229\u7387\u200b\uff0c\u200b\u4f7f\u7528\u200b\u4e86\u200b\u79fb\u52d5\u200b\u8b8a\u52d5\u7387\u200b\u3002 \u200b\u79fb\u52d5\u200b\u8b8a\u52d5\u7387\u200b\u6a5f\u5236\u200b\u78ba\u4fdd\u200b\uff0c\u200b\u5982\u679c\u200b\u64d4\u4fdd\u200b\u6bd4\u4f8b\u200b\u9ad8\u200b\u65bc\u200b\u6216\u200b\u4f4e\u200b\u65bc\u200b\u76ee\u6a19\u200b\u64d4\u4fdd\u200b\u6bd4\u4f8b\u200b\uff0c\u200b\u901a\u8139\u200b\u7387\u5c07\u200b\u76f8\u61c9\u200b\u5730\u200b\u9032\u884c\u200b\u8abf\u6574\u200b\uff0c\u200b\u4ee5\u9032\u200b\u4e00\u6b65\u200b\u6fc0\u52f5\u200b\u6216\u200b\u6291\u5236\u200b\u64d4\u4fdd\u200b\u3002 \u200b\u5c07\u76ee\u6a19\u200b\u64d4\u4fdd\u200b\u6bd4\u4f8b\u200b\u8a2d\u5b9a\u200b\u70ba\u200b\u4f4e\u200b\u65bc\u200b100%\uff0c\u200b\u9f13\u52f5\u200b\u7db2\u7d61\u200b\u4fdd\u7559\u200b\u4e00\u4e9b\u200b\u975e\u200b\u62b5\u62bc\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u9019\u61c9\u200b\u6709\u52a9\u200b\u65bc\u200b\u63d0\u4f9b\u200b\u4e00\u5b9a\u200b\u7684\u200b\u6d41\u52d5\u6027\u200b\u3002</p> <p>\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u5206\u89e3\u6210\u200b\u4ee5\u4e0b\u200b\u65b9\u5f0f\u200b\uff1a</p> <ul> <li>\u200b\u5982\u679c\u200b\u901a\u8139\u200b\u7387\u200b\u4f4e\u200b\u65bc\u200b\u76ee\u6a19\u200b\u767e\u5206\u6bd4\u200b\u64d4\u4fdd\u7387\u200b\uff0c\u200b\u901a\u8139\u7387\u200b\u5c07\u6301\u7e8c\u200b\u4e0a\u5347\u200b\uff0c\u200b\u76f4\u81f3\u200b\u9054\u5230\u200b\u6700\u5927\u503c\u200b\u3002</li> <li>\u200b\u5982\u679c\u200b\u7dad\u6301\u200b\u76ee\u6a19\u200b\u64d4\u4fdd\u200b\u6bd4\u4f8b\u200b\uff08\u200b\u5728\u200bDST\u200b\u4e2d\u70ba\u200b67%\uff09\uff0c\u200b\u90a3\u9ebc\u200b\u901a\u8139\u200b\u7387\u5c07\u200b\u4fdd\u6301\u200b\u4e0d\u8b8a\u200b\u3002</li> <li>\u200b\u5982\u679c\u200b\u901a\u8139\u200b\u7387\u200b\u9ad8\u200b\u65bc\u200b\u76ee\u6a19\u200b\u767e\u5206\u6bd4\u200b\u64d4\u4fdd\u7387\u200b\uff0c\u200b\u901a\u8139\u7387\u200b\u5c07\u6301\u7e8c\u200b\u4e0b\u964d\u200b\uff0c\u200b\u76f4\u81f3\u200b\u9054\u5230\u200b\u6700\u5c0f\u503c\u200b\u3002</li> </ul>"},{"location":"mint/#_4","title":"\u72c0\u614b","text":""},{"location":"mint/#minter","title":"Minter","text":"<p><code>minter</code> \u200b\u662f\u200b\u7528\u200b\u65bc\u200b\u5b58\u653e\u200b\u7576\u524d\u200b\u901a\u8139\u200b\u4fe1\u606f\u200b\u7684\u200b\u7a7a\u9593\u200b\u3002</p> <ul> <li>Minter: <code>0x00 -&gt; ProtocolBuffer(minter)</code></li> </ul> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0-rc7/proto/cosmos/mint/v1beta1/mint.proto#L8-L19</p>"},{"location":"mint/#params","title":"Params","text":"<p>\u200b\u9444\u9020\u200b\u53c3\u6578\u200b\u4fdd\u5b58\u200b\u5728\u200b\u5168\u5c40\u200b\u53c3\u6578\u200b\u5b58\u5132\u4e2d\u200b\u3002</p> <ul> <li>Params: <code>mint/params -&gt; legacy_amino(params)</code></li> </ul> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0-rc7/proto/cosmos/mint/v1beta1/mint.proto#L21-L53</p>"},{"location":"mint/#begin-block","title":"Begin-Block","text":"<p>\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u958b\u59cb\u200b\u6642\u200b\uff0c\u200b\u9444\u5e63\u200b\u53c3\u6578\u5c07\u200b\u88ab\u200b\u91cd\u65b0\u200b\u8a08\u7b97\u200b\uff0c\u200b\u4e26\u200b\u652f\u4ed8\u200b\u901a\u8139\u200b\u3002</p>"},{"location":"mint/#nextinflationrate","title":"NextInflationRate","text":"<p>\u200b\u76ee\u6a19\u200b\u5e74\u200b\u901a\u8139\u200b\u7387\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b\u90fd\u200b\u6703\u200b\u91cd\u65b0\u200b\u8a08\u7b97\u200b\u3002 \u200b\u901a\u8139\u200b\u7387\u200b\u4e5f\u200b\u6703\u200b\u6839\u64da\u200b\u8207\u200b\u671f\u671b\u200b\u6bd4\u4f8b\u200b\uff0867%\uff09\u200b\u7684\u200b\u8ddd\u96e2\u200b\u800c\u200b\u767c\u751f\u200b\u8b8a\u5316\u200b\uff08\u200b\u6b63\u5411\u200b\u6216\u200b\u8ca0\u5411\u200b\uff09\u3002 \u200b\u53ef\u80fd\u200b\u7684\u200b\u6700\u5927\u200b\u8b8a\u5316\u7387\u200b\u88ab\u200b\u5b9a\u7fa9\u70ba\u200b\u6bcf\u5e74\u200b13%\uff0c\u200b\u4f46\u200b\u5e74\u200b\u901a\u8139\u200b\u7387\u200b\u88ab\u200b\u9650\u5236\u200b\u5728\u200b7%\u200b\u5230\u200b20%\u200b\u4e4b\u9593\u200b\u3002</p> <pre><code>NextInflationRate(params Params, bondedRatio sdk.Dec) (inflation sdk.Dec) {\n    inflationRateChangePerYear = (1 - bondedRatio/params.GoalBonded) * params.InflationRateChange\n    inflationRateChange = inflationRateChangePerYear/blocksPerYr\n\n    // increase the new annual inflation for this next cycle\n    inflation += inflationRateChange\n    if inflation &gt; params.InflationMax {\n        inflation = params.InflationMax\n    }\n    if inflation &lt; params.InflationMin {\n        inflation = params.InflationMin\n    }\n\n    return inflation\n}\n</code></pre>"},{"location":"mint/#nextannualprovisions","title":"NextAnnualProvisions(\u200b\u4e0b\u200b\u4e00\u200b\u5e74\u5ea6\u200b\u4f9b\u61c9\u91cf\u200b)","text":"<p>\u200b\u8981\u200b\u6839\u64da\u200b\u7576\u524d\u200b\u7e3d\u4f9b\u200b\u61c9\u91cf\u200b\u548c\u200b\u901a\u8139\u7387\u200b\u8a08\u7b97\u200b\u5e74\u5ea6\u200b\u4f9b\u61c9\u91cf\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u516c\u5f0f\u200b\u3002\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u9019\u500b\u200b\u53c3\u6578\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u53ea\u200b\u8a08\u7b97\u200b\u4e00\u6b21\u200b\u3002</p> <pre><code>NextAnnualProvisions(params Params, totalSupply sdk.Dec) (provisions sdk.Dec) {\n    return Inflation * totalSupply\n</code></pre>"},{"location":"mint/#blockprovision","title":"BlockProvision(\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u8ca8\u5e63\u4f9b\u200b\u61c9\u91cf\u200b)","text":"<p>\u200b\u6839\u64da\u200b\u7576\u524d\u200b\u5e74\u5ea6\u200b\u4f9b\u61c9\u91cf\u200b\u8a08\u7b97\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u6240\u200b\u751f\u6210\u200b\u7684\u200b\u4f9b\u200b\u61c9\u91cf\u200b\u3002 \u200b\u4f9b\u61c9\u91cf\u200b\u96a8\u5f8c\u7531\u200b mint \u200b\u6a21\u7d44\u200b\u7684\u200b ModuleMinterAccount \u200b\u9444\u9020\u200b\uff0c\u200b\u7136\u5f8c\u8f49\u200b\u79fb\u5230\u200b auth \u200b\u7684\u200b FeeCollector ModuleAccount\u3002</p> <pre><code>BlockProvision(params Params) sdk.Coin {\n    provisionAmt = AnnualProvisions/ params.BlocksPerYear\n    return sdk.NewCoin(params.MintDenom, provisionAmt.Truncate())\n</code></pre>"},{"location":"mint/#parameters","title":"Parameters(\u200b\u53c3\u6578\u200b)","text":"<p>\u200b\u9444\u5e63\u200b\u6a21\u7d44\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u53c3\u6578\u200b\uff1a</p> Key Type Example MintDenom string \"uatom\" InflationRateChange string (dec) \"0.130000000000000000\" InflationMax string (dec) \"0.200000000000000000\" InflationMin string (dec) \"0.070000000000000000\" GoalBonded string (dec) \"0.670000000000000000\" BlocksPerYear string (uint64) \"6311520\""},{"location":"mint/#events","title":"Events(\u200b\u4e8b\u4ef6\u200b)","text":"<p>\u200b\u9444\u5e63\u6a21\u200b\u7d44\u6703\u200b\u767c\u51fa\u200b\u4ee5\u4e0b\u200b\u4e8b\u4ef6\u200b\uff1a</p>"},{"location":"mint/#beginblocker","title":"BeginBlocker","text":"Type Attribute Key Attribute Value mint bonded_ratio {bondedRatio} mint inflation {inflation} mint annual_provisions {annualProvisions} mint amount {amount}"},{"location":"mint/#_5","title":"\u5ba2\u6236\u200b\u7aef","text":""},{"location":"mint/#cli","title":"CLI","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u547d\u4ee4\u200b\u5217\u200b\u754c\u9762\u200b\uff08CLI\uff09\u200b\u67e5\u8a62\u200b\u548c\u200b\u8207\u200b mint \u200b\u6a21\u7d44\u200b\u9032\u884c\u200b\u4e92\u52d5\u200b\u3002</p>"},{"location":"mint/#_6","title":"\u67e5\u8a62","text":"<p><code>query</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b mint \u200b\u7684\u200b\u72c0\u614b\u200b\u3002</p> <pre><code>stcd query mint --help\n</code></pre>"},{"location":"mint/#annual-provisions","title":"annual-provisions(\u200b\u5e74\u5ea6\u200b\u4f9b\u61c9\u91cf\u200b)","text":"<p><code>annual-provisions</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7576\u524d\u200b\u9444\u5e63\u200b\u5e74\u5ea6\u200b\u4f9b\u61c9\u200b\u91cf\u503c\u200b\u3002</p> <pre><code>stcd query mint annual-provisions [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query mint annual-provisions\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>22268504368893.612100895088410693\n</code></pre>"},{"location":"mint/#_7","title":"\u901a\u8139\u200b\u7387","text":"<p><code>inflation</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7576\u524d\u200b\u9444\u5e63\u200b\u901a\u8139\u200b\u7387\u503c\u200b\u3002</p> <pre><code>stcd query mint inflation [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query mint inflation\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>0.199200302563256955\n</code></pre>"},{"location":"mint/#params_1","title":"params(\u200b\u53c3\u6578\u200b)","text":"<p><code>params</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7576\u524d\u200b\u9444\u5e63\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>stcd query mint params [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>blocks_per_year: \"4360000\"\ngoal_bonded: \"0.670000000000000000\"\ninflation_max: \"0.200000000000000000\"\ninflation_min: \"0.070000000000000000\"\ninflation_rate_change: \"0.130000000000000000\"\nmint_denom: stake\n</code></pre>"},{"location":"mint/#grpc","title":"gRPC","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b gRPC \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b mint \u200b\u6a21\u584a\u200b\u3002</p>"},{"location":"mint/#annualprovisions","title":"AnnualProvisions","text":"<p><code>AnnualProvisions</code> \u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7576\u524d\u200b\u9444\u5e63\u200b\u5e74\u5ea6\u200b\u4f9b\u61c9\u200b\u91cf\u503c\u200b\u3002</p> <pre><code>/cosmos.mint.v1beta1.Query/AnnualProvisions\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext localhost:9090 cosmos.mint.v1beta1.Query/AnnualProvisions\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"annualProvisions\": \"1432452520532626265712995618\"\n}\n</code></pre>"},{"location":"mint/#inflation","title":"Inflation","text":"<p><code>Inflation</code> \u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7576\u524d\u200b\u9444\u5e63\u200b\u901a\u8139\u200b\u7387\u503c\u200b\u3002</p> <pre><code>/cosmos.mint.v1beta1.Query/Inflation\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext localhost:9090 cosmos.mint.v1beta1.Query/Inflation\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"inflation\": \"130197115720711261\"\n}\n</code></pre>"},{"location":"mint/#params_2","title":"Params","text":"<p><code>Params</code> \u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7576\u524d\u200b\u9444\u5e63\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>/cosmos.mint.v1beta1.Query/Params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext localhost:9090 cosmos.mint.v1beta1.Query/Params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"params\": {\n    \"mintDenom\": \"stake\",\n    \"inflationRateChange\": \"130000000000000000\",\n    \"inflationMax\": \"200000000000000000\",\n    \"inflationMin\": \"70000000000000000\",\n    \"goalBonded\": \"670000000000000000\",\n    \"blocksPerYear\": \"6311520\"\n  }\n}\n</code></pre>"},{"location":"mint/#rest","title":"REST","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b REST \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b mint \u200b\u6a21\u584a\u200b\u3002</p>"},{"location":"mint/#annual-provisions_1","title":"annual-provisions(\u200b\u5e74\u5ea6\u200b\u4f9b\u61c9\u91cf\u200b)","text":"<pre><code>/cosmos/mint/v1beta1/annual_provisions\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b</p> <pre><code>curl \"localhost:1317/cosmos/mint/v1beta1/annual_provisions\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"annualProvisions\": \"1432452520532626265712995618\"\n}\n</code></pre>"},{"location":"mint/#inflation_1","title":"inflation(\u200b\u901a\u8139\u200b\u7387\u200b)","text":"<pre><code>/cosmos/mint/v1beta1/inflation\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl \"localhost:1317/cosmos/mint/v1beta1/inflation\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"inflation\": \"130197115720711261\"\n}\n</code></pre>"},{"location":"mint/#params_3","title":"params(\u200b\u53c3\u6578\u200b)","text":"<pre><code>/cosmos/mint/v1beta1/params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl \"localhost:1317/cosmos/mint/v1beta1/params\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"params\": {\n    \"mintDenom\": \"stake\",\n    \"inflationRateChange\": \"130000000000000000\",\n    \"inflationMax\": \"200000000000000000\",\n    \"inflationMin\": \"70000000000000000\",\n    \"goalBonded\": \"670000000000000000\",\n    \"blocksPerYear\": \"6311520\"\n  }\n}\n</code></pre>"},{"location":"modules_accounts/","title":"\u6a21\u584a\u200b\u8cec\u865f","text":"<p>\u200b\u4e00\u4e9b\u200b\u6a21\u584a\u200b\u6709\u200b\u81ea\u5df1\u200b\u7684\u200b\u6a21\u584a\u200b\u5e33\u6236\u200b\u3002\u200b\u5c07\u5176\u8996\u200b\u70ba\u200b\u53ea\u80fd\u200b\u7531\u8a72\u200b\u6a21\u584a\u200b\u63a7\u5236\u200b\u7684\u200b\u9322\u200b\u5305\u200b\u3002 \u200b\u4e0b\u9762\u200b\u662f\u200b\u4e00\u500b\u200b\u6a21\u584a\u8868\u200b\uff0c\u200b\u5b83\u5011\u200b\u5404\u81ea\u200b\u7684\u200b\u9322\u200b\u5305\u200b\u5730\u5740\u200b\u548c\u200b\u6b0a\u9650\u200b\uff1a</p>"},{"location":"modules_accounts/#_2","title":"\u6a21\u584a\u200b\u5e33\u6236\u200b\u5217\u8868","text":"Name Address Permissions <code>claims</code> dst15cvq3ljql6utxseh0zau9m8ve2j8erz89m5wkz <code>none</code> <code>erc20</code> dst1glht96kr2rseywuvhhay894qw7ekuc4qg9z5nw <code>minter</code> <code>burner</code> <code>fee_collector</code> dst17xpfvakm2amg962yls6f84z3kell8c5ljcjw34 <code>none</code> <code>incentives</code> dst1krxwf5e308jmclyhfd9u92kp369l083wn67k4q <code>minter</code> <code>burner</code> <code>inflation</code> dst1d4e35hk3gk4k6t5gh02dcm923z8ck86qygxf38 <code>minter</code> <code>transfer</code> dst1yl6hdjhmkf37639730gffanpzndzdpmhv788dt <code>minter</code> <code>burner</code> <code>bonded_tokens_pool</code> dst1fl48vsnmsdzcv85q5d2q4z5ajdha8yu3h6cprl <code>burner</code> <code>staking</code> <code>not_bonded_tokens_pool</code> dst1tygms3xhhs3yv487phx3dw4a95jn7t7lr6ys4t <code>burner</code> <code>staking</code> <code>gov</code> dst10d07y265gmmuvt4z0w9aw880jnsr700jcrztvm <code>burner</code> <code>distribution</code> dst1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8974jnh] <code>none</code> <code>evm</code> dst1vqu8rska6swzdmnhf90zuv0xmelej4lq0n56wq <code>minter</code> <code>burner</code> <code>ibc</code> dst1a53udazy8ayufvy0s434pfwjcedzqv345dnt3x <code>minter</code> <code>burner</code> <code>chat</code> dst1x8sx7lvfl6ue5rnvptl7rxr53samt0h4zxqkwg <code>minter</code> <code>burner</code> <code>chat_burn</code> dst1g7z9fjg8zyrj68a6rtqkfgldvjjjc3n7sucath <code>burner</code> <code>gateway</code> dst1f6j7u6875p2cvyrgjr0d2uecyzah0kgexwhr3g <code>none</code> <code>pledge</code> dst1nhta6gsf9x9l2pd2m5qg6lya0h3m0pjy4vtd35 <code>minter</code> <code>burner</code> <code>contract</code> dst1ejpjr43ht3y56pplm5pxpusmcrk9rkkvevc88d <code>none</code> <code>stakeContractDeploy</code> dst16vxjegtg3k5fvqcc55yd6cele9hx0nhv3lxzf0 <code>none</code> <code>tokenFactoryContractDeploy</code> dst10dkh3rvhgcj2vj4h36msncnkr5ps668x9uuva0 <code>none</code>"},{"location":"modules_accounts/#_3","title":"\u8cec\u6236\u200b\u6b0a\u9650","text":"<ul> <li><code>burner</code> \u200b\u6b0a\u9650\u662f\u200b\u6307\u8a72\u200b\u8cec\u6236\u200b\u5177\u6709\u200b\u92b7\u6bc0\u200b\u6216\u92b7\u200b\u6bc0\u4ee3\u5e63\u200b\u7684\u200b\u6b0a\u9650\u200b\u3002</li> <li><code>minter</code> \u200b\u6b0a\u9650\u200b\u8868\u793a\u200b\u6b64\u200b\u5e33\u6236\u200b\u6709\u6b0a\u200b\u9444\u9020\u200b\u6216\u200b\u5275\u200b\u5efa\u65b0\u200b\u4ee3\u5e63\u200b\u3002</li> <li><code>staking</code> \u200b\u6b0a\u9650\u200b\u610f\u5473\u8457\u200b\u8a72\u200b\u8cec\u6236\u200b\u6709\u6b0a\u200b\u4ee3\u8868\u200b\u5176\u200b\u6240\u6709\u8005\u200b\u6301\u6709\u200b\u4ee3\u5e63\u200b\u3002</li> </ul>"},{"location":"modules_accounts/#ibc","title":"IBC \u200b\u6a21\u584a\u200b\u5e33\u6236","text":"<p>\u200b\u6b64\u5916\u200b\uff0c\u200b\u9084\u6709\u200b\u8207\u200b IBC \u200b\u8f49\u8cec\u200b\u76f8\u95dc\u806f\u200b\u7684\u200b\u6a21\u584a\u200b\u5e33\u6236\u200b\u3002 \u200b\u5c0d\u200b\u65bc\u200b\u6bcf\u500b\u200b IBC \u200b\u9023\u63a5\u200b\uff0c\u200b\u90fd\u200b\u6709\u200b\u4e00\u500b\u200b\u985e\u578b\u200b\u70ba\u200b<code>ModuleAccount</code>\u200b\u7684\u200b\u8cec\u6236\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u5728\u200b Daodst \u200b\u662f\u200b\u6e90\u200b\u93c8\u6642\u200b\u8a17\u200b\u7ba1\u200b\u8f49\u79fb\u200b\u7684\u200b\u786c\u5e63\u200b\u3002 \u200b\u4ed6\u5011\u200b\u7684\u200b\u5730\u5740\u200b\u662f\u200b\u4f7f\u7528\u200b\u5e33\u6236\u200b\u540d\u7a31\u200b\u7684\u200b SHA256 \u200b\u6821\u9a57\u200b\u548c\u200b\u7684\u200b\u524d\u200b 20 \u200b\u500b\u5b57\u7bc0\u200b\u6d3e\u751f\u200b\u7684\u200b\uff0c\u200b\u4e26\u200b\u9075\u5faa\u200b ADR 028:</p> <pre><code>// accountName is composed by the current version the IBC tranfer module supports (in this case, ics20-1), the portID (transfer) and the channelID\naccountName := Version + \"\\0\" + portID + \"/\" + channelID\naddr := sha256.Sum256(accountName)[:20]\n\n// example for channel-0\naddr := sha256.Sum256(\"ics20-1\\0transfer/channel-0\")[:20]\n</code></pre> <p>\u200b\u9019\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b IBC-go \u200b\u4e0a\u200b\u7684\u200b <code>GetEscrowAccount</code> \u200b\u51fd\u6578\u200b.</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  \u200b\u57f7\u884c\u200b\u67e5\u8a62\u200b\u6642\u200b\u672a\u200b\u5217\u51fa\u200b\u9019\u4e9b\u200b\u8a17\u200b\u7ba1\u200b\u5e33\u6236\u200b\uff1a</p> <pre><code>stcd q auth module-accounts\n</code></pre> <p>\u200b\u767c\u751f\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u662f\u200b\u56e0\u70ba\u200b\u67e5\u8a62\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u7684\u200b <code>GetModuleAccount</code> \u200b\u51fd\u6578\u200b \u200b\u50c5\u8003\u616e\u200b<code>AccountKeeper</code> \u200b\u7684\u200b<code>permAddrs</code> \u200b\u5730\u5716\u200b\u4e0a\u200b\u7684\u200b\u5e33\u6236\u200b\u3002</p> <p>\u200b\u6b64\u200b\u5730\u5740\u6620\u5c04\u200b\u5728\u200b\u7de8\u8b6f\u200b\u6642\u200b\u8a2d\u7f6e\u200b\uff0c\u200b\u7121\u6cd5\u200b\u5728\u200b\u904b\u884c\u200b\u6642\u200b\u66f4\u6539\u200b\u3002</p>"},{"location":"pc/","title":"PC\u200b\u7aef\u200b\u4f7f\u7528\u200b\u8aaa\u660e","text":""},{"location":"pc/#_1","title":"\u5b89\u88dd","text":"<pre><code>\u200b\u6253\u200b\u958b\u5b89\u88dd\u200b\u5305\u200b\uff0c\u200b\u8df3\u51fa\u200b\u5982\u4e0b\u200b\u4ecb\u9762\u200b\uff0c\u200b\u9ede\u64ca\u200b\u78ba\u5b9a\u200b\uff08\u200b\u90e8\u5206\u200b\u6bba\u6bd2\u200b\u8edf\u9ad4\u6703\u200b\u8aa4\u5831\u200b\uff09\n</code></pre> <pre><code>\u200b\u9078\u64c7\u200b\u5b89\u88dd\u200b\u76ee\u9304\u200b\uff08\u200b\u5efa\u8b70\u200b\u5927\u200b\u65bc\u200b1TB\uff09\n</code></pre> <pre><code>\u200b\u8010\u5fc3\u200b\u7b49\u5f85\u200b\u5b89\u88dd\u200b\u5b8c\u6210\u200b\n</code></pre>"},{"location":"pc/#_2","title":"\u6d41\u7a0b","text":"<pre><code>\u200b\u65b0\u5efa\u200b\u6216\u5c0e\u5165\u200b\u9322\u200b\u5305\u200b\u5730\u5740\u200b--&gt;\u200b\u5275\u5efa\u200bdpos --&gt;\u200b\u5275\u5efa\u9598\u200b\u9053\u200b--&gt;\u200b\u8cea\u62bc\u200bFM --&gt;\u200b\u9818\u53d6\u200b\u734e\u52f5\u200b\n</code></pre>"},{"location":"pc/#_3","title":"\u65b0\u5efa\u200b\u9322\u5305","text":""},{"location":"pc/#_4","title":"\u5c0e\u5165\u200b\u9322\u200b\u5305","text":""},{"location":"pc/#dpos","title":"\u5275\u5efa\u200bdpos","text":""},{"location":"pc/#_5","title":"\u7533\u8acb\u200b\u7db2\u95dc","text":""},{"location":"pc/#fm","title":"\u8cea\u62bc\u200bFM","text":""},{"location":"pc/#_6","title":"\u9818\u53d6\u200b\u734e\u52f5","text":""},{"location":"pc/#_7","title":"\u9996\u9801","text":"<pre><code>\u200b\u9996\u9801\u200b\u5305\u542b\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u5168\u5c40\u6027\u200b\u7684\u200b\u67e5\u770b\u200b\u8207\u200b\u529f\u80fd\u200b\n\u200b\u5176\u4e2d\u200b\u5305\u62ec\u200b\uff1a\n\n\u200b\u67e5\u770b\u200b\u5340\u584a\u200b\u540c\u6b65\u200b\u60c5\u6cc1\u200b \uff08\u200b\u4ecb\u9762\u200b\u53f3\u4e0a\u65b9\u200b\uff09\n</code></pre> <pre><code>\u200b\u67e5\u770b\u200b\u4efb\u52d9\u200b\u72c0\u614b\u200b\uff08\u200b\u4ecb\u9762\u200b\u53f3\u4e0a\u65b9\u200b\uff09\n</code></pre> <pre><code>\u200b\u7ba1\u7406\u200b\u8edf\u4ef6\u200b\u8a2d\u7f6e\u200b \uff08\u200b\u4ecb\u9762\u200b\u5de6\u4e0b\u89d2\u200b\uff09\n</code></pre>"},{"location":"pc/#_8","title":"\u64cd\u4f5c","text":"<pre><code>\u200b\u53f3\u4e0a\u89d2\u200b\u7684\u200b\u64cd\u4f5c\u200b\u53ef\u4ee5\u200b\u7ba1\u7406\u200bDID\u200b\u548c\u200b\u4fee\u6539\u200b\u7db2\u95dc\u200b\u4fe1\u606f\u200b\n</code></pre>"},{"location":"pc/#did","title":"DID\u200b\u6bb5\u200b\u7ba1\u7406","text":"<pre><code>\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u8cea\u62bc\u200bFM\u200b\u7684\u200b\u65b9\u5f0f\u200b\u7372\u53d6\u200b\u66f4\u200b\u591a\u200b\u7684\u200bDID\u200b\u865f\u6bb5\u200b\n</code></pre> <pre><code>\u200b\u9996\u9801\u200b\u5de6\u5074\u200b\u9078\u7dda\u689d\u200b\uff0c\u200b\u5305\u62ec\u200b\u8cc7\u7522\u200b\u548c\u200b\u7db2\u95dc\u200b\u5169\u500b\u200b\u9078\u9805\u200b\u5361\u200b\n</code></pre>"},{"location":"pc/#_9","title":"\u8cc7\u7522","text":"<pre><code>\u200b\u8cc7\u7522\u200b\u754c\u9762\u200b\u7ba1\u7406\u200b\u5305\u62ec\u200b\u9918\u984d\u200b\u3001\u200b\u8f49\u8cec\u200b\u3001\u200b\u4ea4\u6613\u200b\u8a18\u9304\u200b\u3001\u200b\u8cec\u865f\u200b\u7684\u200b\u7ba1\u7406\u200b\n\n\u200b\u5de6\u5074\u200b\u4e09\u500b\u200b\u6309\u9215\u200b\uff0c\u200b\u5206\u5225\u200b\u5c0d\u200b\u61c9\u200b DST,FM\uff0cHASH\u200b\u4e09\u500b\u200b\u4e3b\u5e63\u200b\n</code></pre> <pre><code>\u200b\u53f3\u5074\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u9918\u984d\u200b\u6578\u91cf\u200b \u200b\u4ea4\u6613\u200b\u8a18\u9304\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u9032\u884c\u200b\u4e3b\u5e63\u200b\u7684\u200b\u767c\u9001\u200b\u548c\u200b\u63a5\u6536\u200b\n</code></pre> <pre><code>\u200b\u9019\u88e1\u5c0e\u200b\u51fa\u52a9\u200b\u8a18\u8a5e\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4fee\u6539\u200b\u5bc6\u78bc\u200b\n</code></pre>"},{"location":"pc/#_10","title":"\u7db2\u95dc","text":"<pre><code>\u200b\u7db2\u95dc\u200b\u529f\u80fd\u200b\u7ba1\u7406\u200bdpos\u200b\u8cea\u62bc\u200b\uff0c\u200b\u7db2\u95dc\u200b\u670d\u52d9\u5668\u200b\uff0c\u200b\u7db2\u95dc\u200bapp\uff0c\u200b\u7db2\u95dc\u5bc6\u200b\u9470\u200b\u7b49\u200b\n</code></pre>"},{"location":"pc/#dpos_1","title":"DPOS\u200b\u8cea\u62bc\u200b\u7ba1\u7406","text":"<pre><code>\u200b\u6210\u70ba\u9a57\u200b\u8b49\u5668\u200b\u5f8c\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b _DPOS\u200b\u8cea\u62bc\u200b\u7ba1\u7406\u200b_ \u200b\u9801\u9762\u200b\u67e5\u770b\u200b\u672c\u7bc0\u9ede\u200b\u7684\u200bDPOS\u200b\u72c0\u614b\u200b\n\n\u200b\u53ef\u4ee5\u200b\u9032\u884c\u8cea\u200b\u62bc\u200b\u8207\u200b\u8d16\u200b\u56de\u200b\n</code></pre> <pre><code>DPOS\u200b\u7684\u200b\u8d16\u200b\u56de\u200b\u4e0d\u662f\u200b\u7acb\u5373\u200b\u5230\u200b\u8cec\u200b\u7684\u200b\uff0c\u200b\u5728\u200b\u6b64\u200b\u67e5\u770b\u200b\u8d16\u56de\u200b\u72c0\u614b\u200b\n</code></pre> <pre><code>\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u548c\u200b\u9818\u53d6\u200b\u8cea\u62bc\u200b\u734e\u52f5\u200b\u4ee5\u53ca\u200b\u4f63\u91d1\u200b\n</code></pre> <pre><code>\u200b\u5728\u200b\u6b64\u200b\u4fee\u6539\u200b\u7db2\u95dc\u200b\u7684\u200b\u8a2d\u7f6e\u200b\n</code></pre>"},{"location":"pc/#_11","title":"\u7db2\u95dc\u200b\u670d\u52d9\u5668\u200b\u8cc7\u6e90","text":""},{"location":"pc/#app","title":"\u7db2\u95dc\u200bapp","text":""},{"location":"pc/#_12","title":"\u7db2\u95dc\u5bc6\u200b\u9470","text":"<pre><code>\u200b\u7db2\u95dc\u5bc6\u200b\u9470\u200b\u7684\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b\u8a73\u898b\u200b\n</code></pre>"},{"location":"pc/#_13","title":"\u7db2\u95dc\u5bc6\u200b\u9470\u200b\u4f7f\u7528\u200b\u65b9\u6cd5","text":""},{"location":"pc/#_14","title":"\u8a2d\u7f6e","text":"<pre><code>\u200b\u8a2d\u7f6e\u200b\u5305\u62ec\u200b\uff1a\u200b\u7248\u672c\u200b\u6aa2\u6e2c\u200b\u3001\u200b\u8a9e\u8a00\u200b\u6aa2\u6e2c\u200b\u3001\u200b\u6b77\u53f2\u200b\u6e05\u9664\u200b\u8a2d\u7f6e\u200b\u3001\u200b\u7bc0\u9ede\u200b\u8a2d\u7f6e\u200b\u3001\u200b\u6578\u64da\u200b\u76ee\u9304\u200b\u8a2d\u7f6e\u200b\u3001\u200b\u8def\u7531\u200b\u5c64\u6578\u200b\u6aa2\u6e2c\u200b\n</code></pre>"},{"location":"pledge/","title":"\u804a\u5929\u200b\u8cea\u62bc","text":"<p>\u200b\u6b64\u6a21\u584a\u200b\u8ca0\u8cac\u200bDaoDst\u200b\u76f8\u95dc\u200b\u7684\u200b\u8cea\u62bc\u200b\uff0c\u200b\u92b7\u6bc0\u200b\uff0c\u200b\u734e\u52f5\u200b\u90e8\u5206\u200b</p> <pre><code>chat/\n\u251c\u2500\u2500 client\n\u2502   \u2514\u2500\u2500 rest\n\u2502        \u251c\u2500\u2500 error.go          # \u200b\u4ecb\u9762\u200b\u932f\u8aa4\u200b\u96c6\u200b\n\u2502        \u251c\u2500\u2500 grpc.go           # grpc\u200b\u67fb\u200b\u8a62\u200b\u65b9\u6cd5\u200b\n\u2502        \u251c\u2500\u2500 handle_pledge.go # pledge\u200b\u6a21\u584a\u200b\u6d88\u606f\u200b\u524d\u7f6e\u200b\u8655\u7406\u200b\n\u2502        \u251c\u2500\u2500 query.go          # \u200b\u4ecb\u9762\u200b\u67fb\u200b\u8a62\u51fd\u6578\u200b\n\u2502        \u251c\u2500\u2500 rest.go           # \u200b\u6d88\u606f\u200b\u8207\u200b\u67fb\u200b\u8a62\u200b\u8def\u7531\u200b\u7684\u200b\u6ce8\u518c\u200b\n\u2502        \u2514\u2500\u2500 tx.go             # tx\u200b\u76f8\u95dc\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u5305\u62ec\u200b\u5ee3\u64ad\u200b\u7b49\u200b\n\u251c\u2500\u2500 keeper\n\u2502   \u251c\u2500\u2500 genesis.go        # \u200b\u6a21\u584a\u200b\u7684\u200b\u72c0\u614b\u5316\u200b\u548c\u200b\u532f\u51fa\u200b\n\u2502   \u251c\u2500\u2500 keeper.go         # \u200b\u5b58\u5132\u200b\u7ba1\u7406\u5668\u200b\uff0c\u200b\u8655\u7406\u200b\u6a21\u584a\u200b\u7684\u200b\u696d\u52d9\u200b\u908f\u8f2f\u200b\uff0c\u200b\u4e26\u6709\u200b\u8a31\u53ef\u6b0a\u200b\u8a2a\u554f\u200b\u72c0\u614b\u200b\u6a39\u200b\u7684\u200b\u7279\u5b9a\u200b\u5b50\u6a39\u200b\n\u2502   \u251c\u2500\u2500 msg_server.go     # \u200b\u63d0\u4f9b\u200b\u4e0a\u93c8\u200b\u6d88\u606f\u200b\u7684\u200b\u670d\u52d9\u200b\u8655\u7406\u200b\u908f\u8f2f\u200b\n\u2502   \u251c\u2500\u2500 params.go         # \u200b\u6a21\u584a\u200b\u53c3\u6578\u200b\u7684\u200b\u8a2d\u5b9a\u200b\u548c\u200b\u7372\u53d6\u200b\n\u2502   \u251c\u2500\u2500 query.go          # \u200b\u72c0\u614b\u200b\u67fb\u200b\u8a62\u51fd\u6578\u200b\n\u2502   \u251c\u2500\u2500 medal.go          # hash\u200b\u5e01\u200b\u8d28\u62bc\u200b\u8ba1\u7b97\u200b\u76f8\u5173\u200b\u903b\u8f91\u200b\u7b97\u6cd5\u200b\n\u2502   \u2514\u2500\u2500 mingkeeper.go     # \u200b\u94f8\u9020\u200b\u589e\u53d1\u200b\u76f8\u5173\u200b\u903b\u8f91\u200b\u7b97\u6cd5\u200b\n\u251c\u2500\u2500 types\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 codec.go          # \u200b\u7de8\u78bc\u200b\u6ce8\u518c\u200b\u985e\u578b\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 errors.go         # \u200b\u6a21\u584a\u200b\u7279\u5b9a\u200b\u7684\u200b\u932f\u8aa4\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 events.go         # \u200b\u5411\u200bTendermint PubSub/Websocket\u200b\u66b4\u9732\u200b\u7684\u200b\u4e8b\u4ef6\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 genesis.go        # \u200b\u6a21\u584a\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 interface.go      # \u200b\u6a21\u584a\u200b\u7684\u200b\u4ecb\u9762\u200b\u96c6\u5408\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 keys.go           # \u200b\u6a21\u584a\u200b\u5b58\u5132\u200bkey\u200b\u4ee5\u53ca\u200b\u4e00\u4e9b\u200b\u5176\u4ed6\u200b\u7684\u200b\u5e38\u6578\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 msg.go            # \u200b\u804a\u5929\u200b\u6a21\u584a\u200b\u4ea4\u6613\u200b\u6d88\u606f\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 params.go         # \u200b\u6a21\u584a\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6cbb\u7406\u200b\u6a21\u584a\u200b\u4fee\u6539\u200b\u7684\u200b\u81ea\u5b9a\u200b\u7fa9\u53c3\u6578\u200b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 interface.go      # \u200b\u5f15\u5165\u200b\u7684\u200b\u5916\u90e8\u200b\u6a21\u5757\u200b\u5b9e\u73b0\u200b\u7684\u200b\u65b9\u6cd5\u200b\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 types.go          # \u200b\u6a21\u584a\u200b\u7684\u200b\u985e\u578b\u200b\u96c6\u5408\u200b\n\u251c\u2500\u2500 genesis.go            # ABCI\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\u521d\u59cb\u5316\u200b\u548c\u200b\u532f\u51fa\u200b\u529f\u80fd\u200b\n\u251c\u2500\u2500 handler.go            # \u200b\u6d88\u606f\u200b\u8def\u7531\u200b\n\u2514\u2500\u2500 module.go             # \u200b\u6a21\u584a\u200b\u7ba1\u7406\u5668\u200b\u7684\u200b\u6a21\u584a\u200b\u8a2d\u5b9a\u200b\n</code></pre>"},{"location":"pledge/#_1","title":"\u76ee\u9304","text":""},{"location":"pledge/#pledge","title":"Pledge","text":"<pre><code>pledge\u200b\u6a21\u584a\u200b\u8ca0\u8cac\u200bDaoDST\u200b\u7684\u200b\u8cea\u62bc\u200b\u8207\u200b\u92b7\u6bc0\u200b\u7684\u200b\u90e8\u5206\u200b\n</code></pre>"},{"location":"pledge/#dst-hash","title":"DST &amp; HASH","text":"<pre><code>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u92b7\u6bc0\u200bdst\u200b\u7684\u200b\u7ba1\u9053\u200b\u7372\u53d6\u200bhash\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u540c\u6642\u8cea\u200b\u62bc\u200bhash\u200b\u4f86\u6301\u7e8c\u200b\u7372\u53d6\u200b\u4e26\u96a8\u6642\u200b\u9078\u53d6\u200bdst\u200b\u734e\u52f5\u200b\uff0c\n\u200b\u5230\u200b\u9054\u200b\u4e00\u5b9a\u200b\u7b49\u7d1a\u200b\u5f8c\u200b\uff0chash\u200b\u53ef\u4ee5\u200b\u8d16\u200b\u56de\u4e26\u200b\u4ea4\u6613\u200b\n</code></pre>"},{"location":"pledge/#hash","title":"HASH","text":"<pre><code>\u200b\u5728\u200b\u6ce8\u518c\u200b\u804a\u5929\u200b\u6642\u200b\uff0c\u200b\u9700\u8981\u200b\u92b7\u6bc0\u200b\u4e00\u5b9a\u91cf\u200b\u7684\u200bdst\uff0c\u200b\u6309\u7167\u200b\u7b97\u200b\u704b\u200b\u514c\u63db\u6210\u200bhash\uff0c\u200b\u7372\u5f97\u200b\u7684\u200bhash\u200b\u5c07\u6703\u200b\u88ab\u200b\u81ea\u52d5\u8cea\u200b\u62bc\u200b\uff0c\u200b\u6309\u7167\u200b\u898f\u5247\u200b\uff0c\u200b\u6bcf\u6b21\u200b\u51fa\u584a\u200b\u90fd\u200b\u5c07\u7372\u200b\u5f97\u200b\u734e\u52f5\u200b\uff08dst\uff09\nhash\u200b\u7684\u200b\u8d16\u200b\u56de\u200b\u548c\u200b\u4ea4\u6613\u200b\u9700\u8981\u200b\u5230\u200b\u9054\u200b\u4e00\u5b9a\u200b\u81ea\u7531\u200b\u77f3\u5320\u200b\u7b49\u7d1a\u200b\n</code></pre>"},{"location":"pledge/#_2","title":"\u81ea\u7531\u200b\u77f3\u5320\u200b\u7b49\u7ea7","text":"<pre><code>\u200b\u63d0\u9ad8\u200b\u81ea\u7531\u200b\u77f3\u5320\u200b\u7b49\u7d1a\u200b\u6709\u200b\u4e00\u4e9b\u200b\u6b0a\u76ca\u200b\uff0c\u200b\u6bd4\u5982\u200b\u89e3\u9396\u200bhash\u200b\u7684\u200b\u8d16\u200b\u56de\u200b\u548c\u200b\u4ea4\u6613\u200b\uff0c\u200b\u63d0\u5347\u200b\u92b7\u6bc0\u200bdst\u200b\u7372\u5f97\u200bhash\u200b\u7684\u200b\u6bd4\u4f8b\u200b\uff0c\u200b\u89e3\u9396\u200b\u66f4\u200b\u591a\u200b\u804a\u5929\u200b\u623f\u9593\u200b\u6578\u91cf\u200b\uff0c\u200b\u63d0\u9ad8\u200b\u804a\u5929\u200b\u7dda\u4e0a\u200b\u5b58\u5132\u200b\u7a7a\u9593\u200b\u7b49\u200b\u3002\n\u200b\u81ea\u7531\u200b\u77f3\u5320\u200b\u7b49\u7d1a\u200b\u548c\u200bhash\u200b\u8cea\u62bc\u91cf\u200b\u639b\u9264\u200b\uff0chash\u200b\u8cea\u62bc\u91cf\u200b\u8207\u200b\u7b49\u7d1a\u200b\u4e4b\u9593\u200b\u7684\u95dc\u200b\u4fc2\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6295\u7968\u200b\u66f4\u6539\u200b\n</code></pre>"},{"location":"pledge/#hash_1","title":"HASH\u200b\u8f49\u5e33","text":"<pre><code>hash\u200b\u7684\u200b\u8f49\u5e33\u200b\u5c07\u6703\u200b\u6536\u53d6\u200b\u66f4\u200b\u591a\u200b\u7684\u200bgas\uff0c\u200b\u5927\u6982\u200b\u662f\u200b\u666e\u901a\u200b\u8f49\u5e33\u200b\u7684\u200b10000\u200b\u500d\u200b\n</code></pre>"},{"location":"pledge/#dst","title":"\u92b7\u6bc0\u200bDST","text":"<pre><code>\u200b\u92b7\u6bc0\u200bDST\u200b\u6642\u200b\uff0c\u200b\u5c07\u6703\u200b\u6839\u64da\u92b7\u200b\u6bc0\u91cf\u200b\uff0c\u200b\u7d66\u200b\u6ce8\u518c\u200b\u9598\u9053\u200b\u548c\u200b\u7576\u524d\u200b\u9598\u9053\u200b\u589e\u767c\u200b\u4e00\u4e9b\u200b\u734e\u52f5\u200b\uff08dst\uff09\uff0c\u200b\u540c\u6642\u200b\u589e\u767c\u200b\u4e00\u4e9b\u200b\u734e\u52f5\u200b\u7d66\u7926\u5de5\u200b\n\n\u200b\u92b7\u6bc0\u200bDST\u200b\u514c\u63db\u200bHASH\u200b\u7684\u200b\u7b97\u200b\u704b\u200b\u5982\u4e0b\u200b\n\n\u200b\u92b7\u6bc0\u200b\u91d1\u984d\u200b/\uff08\u200b\u7576\u65e5\u200bDST\u200b\u734e\u52f5\u200b\u589e\u767c\u91cf\u200b/\u200b\u5168\u7db2\u200bHASH\u200b\u7d2f\u8a08\u200b\u7372\u5f97\u91cf\u200b\uff09=\u200b\u7372\u5f97\u200b\u7684\u200bHASH\u200b\u6578\u91cf\u200b\n</code></pre>"},{"location":"pledge/#hash_2","title":"\u8cea\u62bc\u200bHASH","text":"<pre><code>\u200b\u8cea\u62bc\u200bHASH\u200b\u53ef\u4ee5\u200b\u6301\u7e8c\u200b\u7372\u5f97\u200bDST\u200b\u734e\u52f5\u200b\n\nDST\u200b\u6bcf\u6b21\u200b\u51fa\u584a\u200b\u90fd\u200b\u6703\u200b\u589e\u767c\u200b\uff0c\u200b\u7528\u6236\u200b\u6309\u7167\u200bhash\u200b\u8cea\u62bc\u200b\u5360\u200b\u6bd4\u200b\u7372\u5f97\u200b\u5176\u4e2d\u200b\u7684\u200bdst\u200b\u734e\u52f5\u200b\n\ndst\u200b\u6bcf\u6b21\u200b\u51fa\u584a\u200b\u589e\u767c\u200b\u6578\u91cf\u200b\u7684\u200b\u7b97\u200b\u704b\u200b\u5982\u4e0b\u200b\n\n\u200b\u584a\u200b\u901a\u8139\u200b=\uff08\uff080.35-\u200b\u6700\u8fd1\u200b100\u200b\u5929\u92b7\u6bc0\u200b\u6578\u91cf\u200b\uff09/ 0.35 *\uff08\u200b\u6700\u5927\u200b\u901a\u8139\u200b\u7387\u200b3.65 -\u200b\u6700\u5c0f\u200b\u901a\u8139\u200b\u7387\u200b1.21\uff09+\u200b\u6700\u5c0f\u200b\u901a\u8139\u200b\u7387\u200b1.21\uff09/\u200b\u6bcf\u5e74\u200b\u51fa\u584a\u6578\u200b5259600\n</code></pre>"},{"location":"pledge/#_3","title":"\u529f\u80fd","text":"<p>\u200b\u8d28\u62bc\u200b\u6a21\u584a\u200b' Keeper '\u200b\u6388\u4e88\u200b\u5c0d\u200b\u804a\u5929\u200b\u6a21\u584a\u200b\u72c0\u614b\u200b\u7684\u200b\u5b58\u53d6\u200b\u6b0a\u9650\u200b \u200b\u4e26\u5be6\u73fe\u200b' statedb\u3002 \u200b\u4ecb\u9762\u200b\uff0c\u200b\u4ee5\u200b\u652f\u6301\u200b' StateDB '\u200b\u5be6\u73fe\u200b\u3002 Keeper\u200b\u5305\u542b\u200b\u4e00\u500b\u200b\u5141\u8a31\u200b\u8cc7\u6599\u200b\u5eab\u200b\u7684\u200b\u5b58\u5132\u9375\u200b \u200b\u5beb\u5165\u200b\u53ea\u80fd\u200b\u7531\u200bChat\u200b\u6a21\u584a\u200b\u8a2a\u554f\u200b\u7684\u200b\u591a\u5eab\u200b\u7684\u200b\u5177\u9ad4\u5b50\u200b\u6a39\u200b\u3002 \u200b\u800c\u200b\u4e0d\u662f\u200b\u4f7f\u7528\u200b\u6a39\u200b\u548c\u200b\u8cc7\u6599\u200b\u5eab\u200b\u9032\u884c\u200b\u67fb\u200b\u8a62\u200b\u548c\u200b\u6301\u4e45\u200b\u5316\u200b\uff08' StateDB '\u200b\u5be6\u73fe\u200b\uff09\uff0c DaoDst\u200b\u4f7f\u7528\u200bCosmos\u200b\u7684\u200b\u201cKVStore\u201d\uff08\u200b\u9375\u503c\u200b\u5b58\u5132\u200b\uff09\u200b\u548c\u200bCosmos SDK\u200b\u7684\u200b\u201cKeeper\u201d\u200b\u4f86\u200b\u4fc3\u9032\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u652f\u6301\u200b\u4ecb\u9762\u200b\u529f\u80fd\u200b\uff0c\u200b\u5b83\u5c0e\u5165\u200b\u4e86\u200b4\u200b\u500b\u200b\u6a21\u584a\u200bKeepers:</p> <ul> <li><code>auth</code>: \u200b\u5e33\u865f\u200b\u7684\u200b\u589e\u5220\u200b\u6539\u67e5\u200b</li> <li><code>bank</code>: \u200b\u4f9b\u61c9\u91cf\u200b\u548c\u200b\u9918\u984d\u200b\u7684\u200b\u589e\u5220\u200b\u6539\u67e5\u200b</li> <li><code>comm</code>: \u200b\u9598\u9053\u200b\u76f8\u95dc\u200b\u8cc7\u6599\u200b\u7684\u200b\u7ba1\u7406\u200b</li> <li><code>chat</code>: \u200b\u804a\u5929\u200b\u76f8\u5173\u200b\u6570\u636e\u200b\u7684\u200b\u7ba1\u7406\u200b</li> </ul> <pre><code>type Keeper struct {\n    storeKey   sdk.StoreKey\n    cdc        codec.BinaryCodec\n    paramstore paramtypes.Subspace\n\n    hooks            types.PledgeHooks\n    AccountKeeper    types.AccountKeeper\n    BankKeeper       types.BankKeeper\n    CommKeeper       types.CommKeeper\n    ChatKeeper       types.ChatKeeper\n    FeeCollectorName string\n}\n\n</code></pre>"},{"location":"pledge/#_4","title":"\u6d88\u606f","text":""},{"location":"pledge/#msgpledge","title":"MsgPledge","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\uff0c\u200b\u767c\u8d77\u200bdst\u200b\u7684\u200b\u92b7\u6bc0\u200b\n</code></pre> <pre><code>    type MsgPledge struct {\n        FromAddress      string     `protobuf:\"bytes,1,opt,name=from_address,json=fromAddress,proto3\" json:\"from_address,omitempty\" yaml:\"from_address\"`\n        DelegatorAddress string     `protobuf:\"bytes,2,opt,name=delegator_address,json=delegatorAddress,proto3\" json:\"delegator_address,omitempty\" yaml:\"delegator_address\"`\n        ValidatorAddress string     `protobuf:\"bytes,3,opt,name=validator_address,json=validatorAddress,proto3\" json:\"validator_address,omitempty\" yaml:\"validator_address\"`\n        Amount           types.Coin `protobuf:\"bytes,4,opt,name=amount,proto3\" json:\"amount\"`\n    }\n</code></pre>"},{"location":"pledge/#msgwithdrawdelegatorreward","title":"MsgWithdrawDelegatorReward","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\uff0c\u200b\u9078\u53d6\u200b\u8cea\u62bc\u200bhash\u200b\u7684\u200bdst\u200b\u734e\u52f5\u200b\n</code></pre> <pre><code>    type MsgWithdrawDelegatorReward struct {\n        DelegatorAddress string `protobuf:\"bytes,1,opt,name=delegator_address,json=delegatorAddress,proto3\" json:\"delegator_address,omitempty\" yaml:\"delegator_address\"`\n    }\n</code></pre>"},{"location":"pledge/#msgunpledge","title":"MsgUnpledge","text":"<pre><code>\u200b\u901a\u904e\u200b\u6b64\u200b\u6d88\u606f\u200b\uff0c\u200b\u8d16\u200b\u56de\u8cea\u200b\u62bc\u200b\u7684\u200bhash\n</code></pre> <pre><code>    type MsgUnpledge struct {\n        DelegatorAddress string     `protobuf:\"bytes,1,opt,name=delegator_address,json=delegatorAddress,proto3\" json:\"delegator_address,omitempty\" yaml:\"delegator_address\"`\n        Amount           types.Coin `protobuf:\"bytes,2,opt,name=amount,proto3\" json:\"amount\"`\n    }\n</code></pre>"},{"location":"pledge/#msgburngetmedal","title":"MsgBurnGetMedal","text":"<pre><code>\u200b\u92b7\u6bc0\u200bdst\u200b\u7372\u5f97\u200bHash\n</code></pre> <pre><code>    type MsgBurnGetMedal struct {\n        FromAddress string     `protobuf:\"bytes,1,opt,name=from_address,json=fromAddress,proto3\" json:\"from_address,omitempty\" yaml:\"from_address\"`\n        ToAddress   string     `protobuf:\"bytes,2,opt,name=to_address,json=toAddress,proto3\" json:\"to_address,omitempty\" yaml:\"to_address\"`\n        Gateway     string     `protobuf:\"bytes,3,opt,name=gateway,proto3\" json:\"gateway,omitempty\" yaml:\"gateway\"`\n        BurnCoin    types.Coin `protobuf:\"bytes,4,opt,name=burn_coin,json=burnCoin,proto3\" json:\"burn_coin\" yaml:\"burn_coin\"`\n    }\n</code></pre>"},{"location":"pledge/#_5","title":"\u53c3\u6578","text":"<p>pledge\u200b\u6a21\u584a\u200b\u5305\u542b\u200b\u5982\u4e0b\u200b\u6a21\u584a\u200b\u53c3\u6578\u200b</p>"},{"location":"pledge/#_6","title":"\u53c3\u6578","text":"Key Type Default Value <code>KeyInflationDays</code> int64 <code>100</code> <code>InflationMax</code> github_com_cosmos_cosmos_sdk_types.Dec <code>3.65</code> <code>InflationMin</code> github_com_cosmos_cosmos_sdk_types.Dec <code>1.21</code> <code>GoalBonded</code> github_com_cosmos_cosmos_sdk_types.Dec <code>0.35</code> <code>BlocksPerYear</code> uint64 <code>5259600</code> <code>UnbondingHeight</code> int64 <code>302400</code> <code>MinBurnCoin</code> github_com_cosmos_cosmos_sdk_types.Coin <code>100000000000000000000dst</code> <code>BurnCurrentGatePercent</code> github_com_cosmos_cosmos_sdk_types.Dec <code>0.1</code> <code>BurnRegisterGatePercent</code> github_com_cosmos_cosmos_sdk_types.Dec <code>0.1</code> <code>BurnDposPercent</code> github_com_cosmos_cosmos_sdk_types.Dec <code>0.1</code> <code>BurnReturnDays</code> int64 <code>120</code> <code>BurnLevels</code> []BurnLevel"},{"location":"pledge/#_7","title":"\u92b7\u6bc0\u200b\u7b49\u7d1a","text":"<p>BurnLevels \u200b\u5b9a\u7fa9\u4e86\u200b\u81ea\u7531\u200b\u77f3\u5320\u200b\u7b49\u7d1a\u200b\u53ef\u200b\u4eab\u53d7\u200b\u7684\u200b\u76f8\u95dc\u200b\u6b0a\u76ca\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u62ec\u200b\u4e09\u7a2e\u200b\u6b0a\u76ca\u200b</p> <pre><code>1.\u200b\u92b7\u6bc0\u200bdst\u200b\u514c\u63db\u200bhash\u200b\u7684\u200b\u6bd4\u4f8b\u200b\n2.\u200b\u804a\u5929\u200b\u5b58\u5132\u200b\u7a7a\u9593\u200b\n3.\u200b\u804a\u5929\u200b\u89e3\u9396\u200b\u623f\u9593\u6578\u200b\n</code></pre> Level MedalAmount AddPercent RoomAmount <code>1</code> <code>100</code> <code>1</code> <code>0</code> <code>2</code> <code>200</code> <code>2</code> <code>0</code> <code>3</code> <code>400</code> <code>3</code> <code>0</code> <code>4</code> <code>800</code> <code>4</code> <code>0</code> <code>5</code> <code>1600</code> <code>5</code> <code>1</code> <code>6</code> <code>3200</code> <code>6</code> <code>2</code> <code>7</code> <code>6400</code> <code>7</code> <code>3</code> <code>8</code> <code>12800</code> <code>8</code> <code>4</code> <code>9</code> <code>25600</code> <code>9</code> <code>5</code> <code>10</code> <code>51200</code> <code>12</code> <code>6</code> <code>11</code> <code>102400</code> <code>15</code> <code>7</code> <code>12</code> <code>204800</code> <code>18</code> <code>8</code> <code>13</code> <code>409600</code> <code>21</code> <code>9</code> <code>14</code> <code>819200</code> <code>24</code> <code>10</code> <code>15</code> <code>1638400</code> <code>27</code> <code>11</code> <code>16</code> <code>3276800</code> <code>30</code> <code>12</code> <code>17</code> <code>6553600</code> <code>33</code> <code>13</code> <code>18</code> <code>13107200</code> <code>36</code> <code>14</code> <code>19</code> <code>26214400</code> <code>39</code> <code>15</code> <code>20</code> <code>52428800</code> <code>43</code> <code>16</code> <code>21</code> <code>104857600</code> <code>47</code> <code>17</code> <code>22</code> <code>209715200</code> <code>51</code> <code>18</code> <code>23</code> <code>419430400</code> <code>55</code> <code>19</code> <code>24</code> <code>838860800</code> <code>59</code> <code>20</code> <code>25</code> <code>1677721600</code> <code>63</code> <code>21</code> <code>26</code> <code>3355443200</code> <code>67</code> <code>22</code> <code>27</code> <code>6710886400</code> <code>71</code> <code>23</code> <code>28</code> <code>13421772800</code> <code>75</code> <code>24</code> <code>29</code> <code>26843545600</code> <code>79</code> <code>25</code> <code>30</code> <code>53687091200</code> <code>84</code> <code>26</code> <code>31</code> <code>107374182400</code> <code>89</code> <code>27</code> <code>32</code> <code>214748364800</code> <code>94</code> <code>28</code> <code>33</code> <code>429496729600</code> <code>100</code> <code>29</code>"},{"location":"protocol/","title":"Protocol","text":""},{"location":"protocol/#_1","title":"\u8cec\u865f","text":"<p>\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u5340\u584a\u200b\u93c8\u200b\u4e0a\u200b\u4ee5\u200b\u7368\u7279\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5275\u5efa\u200b\u548c\u200b\u8868\u793a\u200b\u52a0\u5bc6\u200b\u9322\u5305\u200b\uff08\u200b\u6216\u200b\u5e33\u6236\u200b\uff09\u3002\u200b\u5c0d\u200b\u65bc\u200b\u5728\u200b Daodst \u200b\u4e0a\u200b\u8207\u200b\u5e33\u6236\u200b\u985e\u578b\u200b\u4ea4\u4e92\u200b\u7684\u200b\u958b\u200b\u767c\u4eba\u54e1\u200b\uff0c\u200b\u5728\u200b\u5176\u200b dApp \u200b\u524d\u7aef\u200b\u7684\u200b\u9322\u200b\u5305\u200b\u96c6\u6210\u200b\u904e\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u91cd\u8981\u200b\u7684\u200b\u662f\u200b\u8981\u200b\u4e86\u89e3\u200b Daodst \u200b\u4e0a\u200b\u7684\u200b\u8cec\u6236\u200b\u88ab\u200b\u5be6\u65bd\u200b\u70ba\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u5730\u5740\u200b\u517c\u5bb9\u200b\u3002</p>"},{"location":"protocol/#_2","title":"\u5275\u5efa\u200b\u8cec\u865f","text":"<p>\u200b\u8981\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u5e33\u6236\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5275\u5efa\u79c1\u200b\u9470\u200b\u3001\u200b\u5bc6\u9470\u5eab\u200b\u6587\u4ef6\u200b\uff08\u200b\u53d7\u5bc6\u78bc\u200b\u4fdd\u8b77\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\uff09\u200b\u6216\u52a9\u200b\u8a18\u8a5e\u200b\uff08\u200b\u53ef\u4ee5\u200b\u8a2a\u554f\u200b\u591a\u500b\u200b\u79c1\u200b\u9470\u200b\u7684\u200b\u4e00\u4e32\u200b\u55ae\u8a5e\u200b\uff09\u3002</p> <p>\u200b\u9664\u4e86\u200b\u5177\u6709\u200b\u4e0d\u540c\u200b\u7684\u200b\u5b89\u5168\u200b\u529f\u80fd\u200b\u5916\u200b\uff0c\u200b\u5b83\u5011\u200b\u4e4b\u9593\u200b\u6700\u5927\u200b\u7684\u200b\u5340\u5225\u200b\u5728\u200b\u65bc\u200b\u79c1\u200b\u9470\u200b\u6216\u200b\u5bc6\u200b\u9470\u5eab\u200b\u6587\u4ef6\u200b\u50c5\u5275\u200b\u5efa\u4e00\u500b\u200b\u5e33\u6236\u200b\u3002\u200b\u5275\u5efa\u200b\u4e00\u500b\u52a9\u200b\u8a18\u8a5e\u200b\u53ef\u4ee5\u200b\u8b93\u200b\u60a8\u200b\u63a7\u5236\u200b\u8a31\u591a\u200b\u5e33\u6236\u200b\uff0c\u200b\u6240\u6709\u200b\u5e33\u6236\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u540c\u4e00\u200b\u500b\u200b\u77ed\u8a9e\u200b\u8a2a\u554f\u200b\u3002</p> <p>Cosmos \u200b\u5340\u584a\u200b\u93c8\u200b\u8207\u200b Daodst \u200b\u4e00\u6a23\u200b\uff0c\u200b\u652f\u6301\u200b\u4f7f\u7528\u200b\u52a9\u8a18\u8a5e\u200b\u5275\u5efa\u200b\u5e33\u6236\u200b\uff0c\u200b\u4e5f\u200b\u7a31\u200b\u70ba\u200b\u5206\u5c64\u78ba\u200b\u5b9a\u6027\u200b\u5bc6\u9470\u200b\u751f\u6210\u200b\uff08HD \u200b\u5bc6\u9470\u200b\uff09\u3002\u200b\u9019\u5141\u8a31\u200b\u7528\u6236\u200b\u5728\u200b\u591a\u500b\u200b\u5340\u584a\u200b\u93c8\u4e0a\u200b\u5275\u5efa\u200b\u5e33\u6236\u200b\uff0c\u200b\u800c\u200b\u7121\u200b\u9700\u200b\u7ba1\u7406\u200b\u591a\u500b\u200b\u5bc6\u200b\u9470\u200b\u3002</p> <p>HD \u200b\u5bc6\u9470\u200b\u901a\u904e\u200b\u7372\u200b\u53d6\u52a9\u200b\u8a18\u8a5e\u200b\u4e26\u5c07\u200b\u5176\u200b\u8207\u200b\u4e00\u689d\u200b\u7a31\u200b\u70ba\u200b\u6d3e\u751f\u200b\u8def\u5f91\u200b\u7684\u200b\u4fe1\u606f\u200b\u7d44\u5408\u4f86\u200b\u751f\u6210\u200b\u5730\u5740\u200b\u3002\u200b\u5340\u584a\u200b\u93c8\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5b83\u5011\u200b\u652f\u6301\u200b\u7684\u200b\u63a8\u5c0e\u8def\u5f91\u200b\u4e0a\u200b\u6709\u6240\u4e0d\u540c\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u8981\u901a\u200b\u904e\u5340\u200b\u584a\u200b\u93c8\u200b\u4e0a\u200b\u7684\u200b\u52a9\u200b\u8a18\u8a5e\u200b\u8a2a\u554f\u200b\u6240\u6709\u200b\u8cec\u6236\u200b\uff0c\u200b\u4f7f\u7528\u200b\u8a72\u5340\u200b\u584a\u200b\u93c8\u200b\u7684\u200b\u7279\u5b9a\u200b\u63a8\u5c0e\u8def\u5f91\u200b\u975e\u5e38\u200b\u91cd\u8981\u200b\u3002</p>"},{"location":"protocol/#_3","title":"\u4ee3\u7406\u200b\u8cec\u6236","text":"<p>\u200b\u8853\u8a9e\u200b\u201c\u200b\u8cec\u6236\u200b\u201d\u200b\u548c\u200b\u201c\u200b\u5730\u5740\u200b\u201d\u200b\u7d93\u5e38\u200b\u4e92\u63db\u200b\u4f7f\u7528\u200b\u4f86\u200b\u63cf\u8ff0\u200b\u52a0\u5bc6\u200b\u9322\u5305\u200b\u3002\u200b\u5728\u200b Cosmos SDK \u200b\u4e2d\u200b\uff0c\u200b\u4e00\u500b\u200b\u8cec\u6236\u200b\u6307\u5b9a\u200b\u4e00\u5c0d\u200b\u516c\u9470\u200b\uff08PubKey\uff09\u200b\u548c\u200b\u79c1\u200b\u9470\u200b\uff08PrivKey\uff09\u3002\u200b\u6d3e\u751f\u200b\u8def\u5f91\u200b\u5b9a\u7fa9\u4e86\u200b\u79c1\u200b\u9470\u200b\u3001\u200b\u516c\u9470\u200b\u548c\u200b\u5730\u5740\u200b\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u6d3e\u751f\u200b PubKey \u200b\u4ee5\u200b\u751f\u6210\u200b\u4e0d\u540c\u200b\u683c\u5f0f\u200b\u7684\u200b\u5404\u7a2e\u200b\u5730\u5740\u200b\uff0c\u200b\u9019\u4e9b\u200b\u5730\u5740\u200b\u7528\u200b\u65bc\u200b\u8b58\u5225\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u7684\u200b\u7528\u6236\u200b\uff08\u200b\u4ee5\u53ca\u200b\u5176\u4ed6\u200b\u65b9\u200b\uff09\u3002 Cosmos \u200b\u93c8\u200b\u7684\u200b\u5e38\u898b\u200b\u5730\u5740\u200b\u5f62\u5f0f\u200b\u662f\u200b bech32 \u200b\u683c\u5f0f\u200b\uff08\u200b\u4f8b\u5982\u200b dst1 ...\uff09\u3002\u200b\u5730\u5740\u200b\u4e5f\u200b\u8207\u200b\u6d88\u606f\u200b\u76f8\u95dc\u200b\u806f\u4ee5\u8b58\u5225\u200b\u6d88\u606f\u200b\u7684\u200b\u767c\u9001\u8005\u200b\u3002</p> <p>PrivKey \u200b\u7528\u200b\u65bc\u200b\u751f\u6210\u200b\u6578\u5b57\u200b\u7c3d\u540d\u200b\uff0c\u200b\u4ee5\u8b49\u660e\u200b\u8207\u200b PrivKey \u200b\u95dc\u806f\u200b\u7684\u200b\u5730\u5740\u200b\u6279\u51c6\u200b\u7d66\u5b9a\u200b\u6d88\u606f\u200b\u3002\u200b\u901a\u904e\u200b\u5c0d\u200b PrivKey \u200b\u61c9\u7528\u200b\u52a0\u5bc6\u200b\u65b9\u6848\u200b\uff08\u200b\u7a31\u70ba\u200b\u6a62\u5713\u66f2\u7dda\u200b\u6578\u5b57\u200b\u7c3d\u540d\u200b\u7b97\u6cd5\u200b (ECDSA)\uff09\u200b\u4f86\u200b\u57f7\u884c\u200b\u8b49\u660e\u200b\uff0c\u200b\u4ee5\u200b\u751f\u6210\u200b\u8207\u200b\u6d88\u606f\u200b\u4e2d\u200b\u7684\u200b\u5730\u5740\u200b\u9032\u884c\u200b\u6bd4\u200b\u8f03\u200b\u7684\u200b\u516c\u9470\u200b\u3002</p>"},{"location":"protocol/#daodst","title":"Daodst \u200b\u8cec\u865f","text":"<p>Daodst \u200b\u5b9a\u7fa9\u4e86\u200b\u81ea\u5df1\u200b\u7684\u200b\u81ea\u5b9a\u200b\u7fa9\u8cec\u200b\u6236\u985e\u200b\u578b\u200b\uff0c\u200b\u4ee5\u5be6\u73fe\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u5730\u5740\u200b\u517c\u5bb9\u200b\u7684\u200b HD \u200b\u9322\u5305\u200b\u3002\u200b\u5b83\u200b\u4f7f\u7528\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b ECDSA secp256k1 \u200b\u66f2\u7dda\u200b\u4f5c\u70ba\u200b\u5bc6\u200b\u9470\u200b (eth_secp265k1) \u200b\u4e26\u6eff\u8db3\u200b EIP84 \u200b\u7684\u200b\u5b8c\u6574\u200b BIP44 \u200b\u8def\u5f91\u200b\u3002\u200b\u4e0d\u8981\u200b\u5c07\u9019\u689d\u200b\u52a0\u5bc6\u200b\u66f2\u7dda\u200b\u8207\u200b\u6bd4\u7279\u200b\u5e63\u7684\u200b ECDSA secp256k1 \u200b\u66f2\u7dda\u200b\u6df7\u6dc6\u200b\u3002</p> <p>\u200b\u57fa\u200b\u65bc\u200b Daodst \u200b\u7684\u200b\u5e33\u6236\u200b\u7684\u200b\u6839\u200b HD \u200b\u8def\u5f91\u200b\u662f\u200b <code>m/44'/60'/0'/0</code>\u3002 Daodst \u200b\u4f7f\u7528\u200b Coin type 60 \u200b\u4f86\u200b\u652f\u6301\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u7684\u200b\u8cec\u6236\u200b\uff0c\u200b\u4e0d\u50cf\u200b\u8a31\u591a\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u200b Coin type 118 \u200b\u7684\u200b Cosmos \u200b\u93c8\u200b\uff08coin types \u200b\u5217\u8868\u200b</p> <p>\u200b\u81ea\u5b9a\u7fa9\u200b Daodst EthAccount \u200b\u6eff\u8db3\u4f86\u200b\u81ea\u200b Cosmos SDK \u200b\u8eab\u4efd\u200b\u9a57\u8b49\u200b\u6a21\u584a\u200b\u7684\u200b AccountI \u200b\u63a5\u53e3\u200b\uff0c\u200b\u4e26\u200b\u5305\u542b\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u5730\u5740\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u5176\u4ed6\u200b\u5b57\u200b\u6bb5\u200b\uff1a</p> <pre><code>// EthAccountI represents the interface of an EVM compatible account\ntype EthAccountI interface {\n    authtypes.AccountI\n    // EthAddress returns the ethereum Address representation of the AccAddress\n    EthAddress() common.Address\n    // CodeHash is the keccak256 hash of the contract code (if any)\n    GetCodeHash() common.Hash\n    // SetCodeHash sets the code hash to the account fields\n    SetCodeHash(code common.Hash) error\n    // Type returns the type of Ethereum Account (EOA or Contract)\n    Type() int8\n}\n</code></pre>"},{"location":"protocol/#_4","title":"\u5730\u5740\u200b\u548c\u200b\u516c\u9470","text":"<p>BIP-0173 \u200b\u70ba\u200b\u9694\u200b\u96e2\u898b\u200b\u8b49\u8f38\u51fa\u200b\u5730\u5740\u200b\u5b9a\u7fa9\u4e86\u200b\u4e00\u7a2e\u200b\u65b0\u200b\u683c\u5f0f\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u6a19\u8b58\u200b Bech32 \u200b\u7528\u6cd5\u200b\u7684\u200b\u4eba\u985e\u200b\u53ef\u8b80\u200b\u90e8\u5206\u200b\u3002 Daodst \u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b HRP\uff08\u200b\u4eba\u985e\u200b\u53ef\u8b80\u200b\u524d\u7db4\u200b\uff09\u200b\u4f5c\u70ba\u200b\u57fa\u790e\u200b HRP\uff1a</p> \u200b\u7f51\u7edc\u200b \u200b\u4e3b\u7f51\u200b \u200b\u6d4b\u8bd5\u200b\u7f51\u200b daodst daodst daodst <p>\u200b\u5728\u200b Daodst \u200b\u4e0a\u9ed8\u8a8d\u200b\u53ef\u7528\u200b\u7684\u200b\u5730\u5740\u200b/\u200b\u516c\u9470\u200b\u6709\u200b 3 \u200b\u7a2e\u200b\u4e3b\u8981\u200b\u985e\u578b\u200b\u7684\u200b HRP\uff1a</p> <ul> <li>\u200b\u5e33\u6236\u200b\u7684\u200b\u5730\u5740\u200b\u548c\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u8b58\u5225\u200b\u7528\u6236\u200b\uff08\u200b\u4f8b\u5982\u200b\u6d88\u606f\u200b\u7684\u200b\u767c\u4ef6\u200b\u4eba\u200b\uff09\u3002\u200b\u5b83\u5011\u200b\u662f\u200b\u4f7f\u200b eth_secp256k1 \u200b\u66f2\u7dda\u200b\u5f97\u51fa\u200b\u7684\u200b\u3002</li> <li>\u200b\u9a57\u8b49\u5668\u200b\u64cd\u4f5c\u200b\u54e1\u200b\u7684\u200b\u5730\u5740\u200b\u548c\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u8b58\u200b\u5225\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u64cd\u4f5c\u200b\u54e1\u200b\u3002\u200b\u5b83\u5011\u200b\u662f\u200b\u4f7f\u200b eth_secp256k1 \u200b\u66f2\u7dda\u200b\u5f97\u51fa\u200b\u7684\u200b\u3002</li> <li>\u200b\u5171\u8b58\u200b\u7bc0\u9ede\u200b\u7684\u200b\u5730\u5740\u200b\u548c\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u6a19\u8b58\u200b\u53c3\u8207\u5171\u8b58\u200b\u7684\u200b\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u3002\u200b\u5b83\u5011\u200b\u662f\u200b\u4f7f\u7528\u200b ed25519 \u200b\u66f2\u7dda\u200b\u5f97\u51fa\u200b\u7684\u200b</li> </ul> \u200b\u540d\u79f0\u200b bech32 \u200b\u5730\u5740\u200b\u524d\u7f00\u200b bech32  \u200b\u516c\u94a5\u200b\u524d\u7f00\u200b \u200b\u66f2\u7ebf\u200b ** \u200b\u5730\u5740\u200b\u5b57\u8282\u200b\u957f\u5ea6\u200b** \u200b\u516c\u94a5\u200b\u5b57\u8282\u200b\u957f\u5ea6\u200b \u200b\u5e33\u6236\u200b dst dstpub eth_secp256k1 20 33(compressed) \u200b\u9a57\u8b49\u5668\u200b\u64cd\u4f5c\u200b dstvaloper dstvaloperpub eth_secp256k1 20 33(compressed) \u200b\u5171\u8b58\u200b\u7bc0\u9ede\u200b dstvalcons dstvalconspub ed25519 dst 32"},{"location":"protocol/#_5","title":"\u5ba2\u6236\u200b\u7684\u200b\u5730\u5740\u200b\u683c\u5f0f","text":"<p>Eth\u200b\u8cec\u865f\u200b \u200b\u53ef\u4ee5\u200b\u7528\u200b Bech32 (dst1...) \u200b\u548c\u200b\u5341\u516d\u200b\u9032\u5236\u200b (0x...) \u200b\u683c\u5f0f\u200b\u8868\u793a\u200b\uff0c\u200b\u4ee5\u5be6\u73fe\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b Web3 \u200b\u5de5\u5177\u200b\u517c\u5bb9\u6027\u200b.</p> <p>Bech32 \u200b\u683c\u5f0f\u200b\u662f\u200b\u901a\u904e\u200b CLI \u200b\u548c\u200b REST \u200b\u5ba2\u6236\u200b\u7aef\u200b\u9032\u884c\u200b Cosmos-SDK \u200b\u67e5\u8a62\u200b\u548c\u200b\u4ea4\u6613\u200b\u7684\u200b\u9ed8\u8a8d\u200b\u683c\u5f0f\u200b\u3002\u200b\u53e6\u4e00\u65b9\u9762\u200b\uff0c\u200b\u5341\u516d\u200b\u9032\u5236\u200b\u683c\u5f0f\u200b\u662f\u200b\u4ee5\u592a\u200b\u574a\u200b common.Address \u200b\u8868\u793a\u200b Cosmos sdk.AccAddress\u3002</p> <ul> <li>\u200b\u5730\u5740\u200b (Bech32): <code>dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw</code></li> <li>\u200b\u5730\u5740\u200b (EIP55 16\u200b\u9032\u5236\u200b): <code>0x91defC7fE5603DFA8CC9B655cF5772459BF10c6f</code></li> <li>\u200b\u58d3\u7e2e\u200b\u516c\u9470\u200b: <code>{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"AsV5oddeB+hkByIJo/4lZiVUgXTzNfBPKC73cZ4K1YD2\"}</code></li> </ul>"},{"location":"protocol/#_6","title":"\u5730\u5740\u200b\u8f49\u63db","text":"<p>stcd debug addr  \u200b\u53ef\u7528\u200b\u65bc\u200b\u5728\u200b\u5341\u516d\u200b\u9032\u5236\u200b\u548c\u200b bech32 \u200b\u683c\u5f0f\u200b\u4e4b\u9593\u200b\u8f49\u63db\u200b\u5730\u5740\u200b\u3002\u200b\u4f8b\u5982\u200b\uff1a Bech32 <pre><code> $ stcd debug addr dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw\n  Address: [20 87 74 109 255 45 223 158 7 130 139 67 69 211 4 9 25 175 86 82]\n  Address (hex): 14574A6DFF2DDF9E07828B4345D3040919AF5652\n  Bech32 Acc: dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw\n  Bech32 Val: dstvaloper1z3t55m0l9h0eupuz3dp5t5cypyv674jjn4d6nn\n</code></pre> <p>Hex</p> <pre><code> $ stcd debug addr 14574A6DFF2DDF9E07828B4345D3040919AF5652\n  Address: [20 87 74 109 255 45 223 158 7 130 139 67 69 211 4 9 25 175 86 82]\n  Address (hex): 14574A6DFF2DDF9E07828B4345D3040919AF5652\n  Bech32 Acc: dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw\n  Bech32 Val: dstvaloper1z3t55m0l9h0eupuz3dp5t5cypyv674jjn4d6nn\n</code></pre>"},{"location":"protocol/#key","title":"Key \u200b\u5c0e\u51fa","text":"<p>\u200b\u6211\u5011\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u5e36\u6709\u200b\u6a19\u8a8c\u200b --bech  (acc|val|cons) \u200b\u7684\u200b stcd \u200b\u7684\u200b keys show \u200b\u547d\u4ee4\u200b\u4f86\u200b\u7372\u53d6\u200b\u5730\u5740\u200b\u548c\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u5982\u4e0a\u6240\u8ff0\u200b\uff0c <p>\u200b\u666e\u901a\u200b\u8cec\u865f\u200b</p> <pre><code> $ stcd keys show dev0 --bech acc\n- name: dev0\n  type: local\n  address: dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw\n  pubkey: '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"AsV5oddeB+hkByIJo/4lZiVUgXTzNfBPKC73cZ4K1YD2\"}'\n  mnemonic: \"\"\n</code></pre> <p>\u200b\u9a57\u8b49\u5668\u200b</p> <pre><code> $ stcd keys show dev0 --bech val\n- name: dev0\n  type: local\n  address: dstvaloper1z3t55m0l9h0eupuz3dp5t5cypyv674jjn4d6nn\n  pubkey: '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"AsV5oddeB+hkByIJo/4lZiVUgXTzNfBPKC73cZ4K1YD2\"}'\n  mnemonic: \"\"\n</code></pre> <p>\u200b\u5171\u8b58\u200b</p> <pre><code> $ stcd keys show dev0 --bech cons\n- name: dev0\n  type: local\n  address: dstvalcons1rllqa5d97n6zyjhy6cnscc7zu30zjn3f7wyj2n\n  pubkey: '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"A/fVLgIqiLykFQxum96JkSOoTemrXD0tFaFQ1B0cpB2c\"}'\n  mnemonic: \"\"\n</code></pre>"},{"location":"protocol/#_7","title":"\u8cec\u865f\u200b\u67e5\u8a62","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b CLI\u3001gRPC \u200b\u6216\u200b</p> <p>\u200b\u547d\u4ee4\u884c\u200b\u754c\u9762\u200b</p> <pre><code># NOTE: the --output (-o) flag will define the output format in JSON or YAML (text)\nstcd q auth account $(stcd keys show dev0 -a) -o text\n\n'@type': /ethermint.types.v1.EthAccount\nbase_account:\naccount_number: \"0\"\naddress: dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw\npub_key:\n  '@type': /ethermint.crypto.v1.ethsecp256k1.PubKey\n  key: AsV5oddeB+hkByIJo/4lZiVUgXTzNfBPKC73cZ4K1YD2\nsequence: \"1\"\ncode_hash: 0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470\n</code></pre> <p>Cosmos gRPC and REST</p> <pre><code># GET /cosmos/auth/v1beta1/accounts/{address}\ncurl -X GET \"http://localhost:10337/cosmos/auth/v1beta1/accounts/dst14au322k9munkmx5wrchz9q30juf5wjgz2cfqku\" -H \"accept: application/json\"\n</code></pre> <p>JSON-RPC \u200b\u8981\u200b\u4f7f\u7528\u200b Web3 \u200b\u6aa2\u7d22\u200b\u4ee5\u592a\u200b\u574a\u200b\u5341\u516d\u200b\u9032\u5236\u200b\u5730\u5740\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b JSON-RPC eth_accounts \u200b\u6216\u200b personal_listAccounts \u200b\u7aef\u9ede\u200b</p> <pre><code># query against a local node\ncurl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_accounts\",\"params\":[],\"id\":1}' -H \"Content-Type: application/json\" http://localhost:8545\n\ncurl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"personal_listAccounts\",\"params\":[],\"id\":1}' -H \"Content-Type: application/json\" http://localhost:8545\n</code></pre>"},{"location":"protocol/#id","title":"\u93c8\u200bID","text":"<p>\u200b\u93c8\u200b ID \u200b\u662f\u200b\u4ee3\u8868\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u7684\u200b\u552f\u4e00\u200b\u6a19\u8b58\u7b26\u200b\u3002\u200b\u6211\u5011\u200b\u7528\u200b\u5b83\u200b\u4f86\u200b\u5340\u5206\u200b\u4e0d\u540c\u200b\u7684\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\uff0c\u200b\u4e26\u78ba\u200b\u4fdd\u200b\u4ea4\u6613\u200b\u548c\u200b\u6d88\u606f\u200b\u88ab\u200b\u767c\u200b\u9001\u5230\u200b\u6b63\u78ba\u200b\u7684\u200b\u7db2\u7d61\u200b\u3002 Daodst\u200b\u7db2\u7d61\u200b\u9075\u5faa\u200b identifier_EIP155-version \u200b\u7684\u200b\u683c\u5f0f\u200b\u3002</p>"},{"location":"protocol/#_8","title":"\u4e3b\u7db2","text":"\u540d\u7a31\u200b \u200b\u93c8\u200b ID \u200b\u6a19\u8b58\u7b26\u200b EIP155 Number \u200b\u7248\u672c\u200b \u200b\u6fc0\u6d3b\u200b Daodst2 <code>daodst_7001-2</code> dst 7001 2 yes Daodst1 <code>Daodst_7001-1</code> dst 7001 1 no"},{"location":"protocol/#_9","title":"\u6e2c\u8a66\u7db2","text":"\u540d\u7a31\u200b \u200b\u93c8\u200b ID \u200b\u6a19\u8b58\u7b26\u200b EIP155 Number \u200b\u7248\u672c\u200b \u200b\u6fc0\u6d3b\u200b Daodst Public Testnet <code>Daodst_7000-2</code> dst 9000 2 yes Daodst Public Testnet <code>Daodst_7000-1</code> dst 9000 1 no"},{"location":"protocol/#_10","title":"\u93c8\u200b\u8eab\u4efd","text":"<p>\u200b\u6bcf\u689d\u200b\u93c8\u200b\u90fd\u200b\u5fc5\u9808\u200b\u6709\u200b\u4e00\u500b\u200b\u552f\u4e00\u200b\u7684\u200b\u6a19\u8b58\u7b26\u200b\u6216\u200b <code>chain-id</code>\u3002 Tendermint \u200b\u8981\u6c42\u200b\u6bcf\u500b\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5728\u200b genesis.json \u200b\u5b57\u200b\u6bb5\u200b \u200b\u4e2d\u5b9a\u7fa9\u200b\u81ea\u5df1\u200b\u7684\u200b <code>chain-id</code>\u3002\u200b\u4f46\u662f\u200b\uff0c\u200b\u70ba\u200b\u4e86\u200b\u540c\u6642\u200b\u7b26\u5408\u200b EIP155 \u200b\u548c\u200b Cosmos \u200b\u93c8\u5347\u7d1a\u200b\u6a19\u6e96\u200b\uff0cDaodst \u200b\u517c\u5bb9\u200b\u93c8\u5fc5\u9808\u200b\u5be6\u73fe\u200b\u4ed6\u5011\u200b\u7684\u200b\u93c8\u200b\u6a19\u8b58\u7b26\u200b\u7684\u200b\u7279\u6b8a\u200b\u7d50\u69cb\u200b\u3002</p> <p>***  \u200b\u7d50\u69cb\u200b ***</p> <p>Daodst \u200b\u93c8\u200b ID \u200b\u5305\u542b\u200b 3 \u200b\u500b\u200b\u4e3b\u8981\u200b\u7d44\u4ef6\u200b</p> <ul> <li>\u200b\u6a19\u8b58\u7b26\u200b: \u200b\u5b9a\u7fa9\u61c9\u200b\u7528\u200b\u7a0b\u5e8f\u200b\u540d\u7a31\u200b\u7684\u200b\u975e\u7d50\u200b\u69cb\u5316\u200b\u5b57\u7b26\u4e32\u200b\u3002</li> <li>EIP155 Number: \u200b\u4e0d\u53ef\u200b\u8b8a\u200b EIP155 <code>CHAIN_ID</code>   \u200b\u5b9a\u7fa9\u91cd\u200b\u653e\u200b\u653b\u64ca\u200b\u4fdd\u8b77\u6578\u200b\u3002</li> <li>\u200b\u7248\u672c\u200b\u865f\u200b: \u200b\u662f\u200b\u93c8\u200b\u7576\u524d\u200b\u6b63\u5728\u200b\u904b\u884c\u200b\u7684\u200b\u7248\u672c\u200b\u865f\u200b\uff08\u200b\u59cb\u7d42\u200b\u70ba\u200b\u6b63\u6578\u200b\uff09\u3002\u200b\u6bcf\u6b21\u200b\u93c8\u5347\u7d1a\u200b\u6216\u200b\u5206\u53c9\u200b\u6642\u200b\uff0c\u200b\u9019\u500b\u200b\u6578\u5b57\u200b\u5fc5\u9808\u200b\u905e\u589e\u200b\uff0c\u200b\u4ee5\u200b\u907f\u514d\u200b\u7db2\u7d61\u200b\u6216\u5171\u8b58\u200b\u932f\u8aa4\u200b\u3002</li> </ul> <p>***  \u200b\u683c\u5f0f\u200b ***</p> <p>genesis\u200b\u4e2d\u200b\u6307\u5b9a\u200b\u548c\u200bDaodst\u200b\u517c\u5bb9\u200b\u7684\u200bchain-id\u200b\u7684\u200b\u683c\u5f0f\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>{identifier}_{EIP155}-{version}\n</code></pre> <p>\u200b\u4e0b\u8868\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u500b\u200b\u793a\u4f8b\u200b\uff0c\u200b\u5176\u4e2d\u200b\u7b2c\u4e8c\u884c\u200b\u5c0d\u61c9\u200b\u65bc\u200b\u7b2c\u4e00\u884c\u200b\u7684\u200b\u5347\u7d1a\u200b\uff1a</p> ChainID Identifier EIP155 Number Version Number <code>daodst_7000-1</code> dst 7000 1 <code>daodst_7000-2</code> dst 7000 2 <code>...</code> ... ... ... <code>daodst_7000-N</code> dst 7000 N"},{"location":"protocol/#_11","title":"\u7de8\u78bc","text":"<p>\u200b\u7de8\u78bc\u200b\u662f\u200b\u6307\u5c07\u200b\u6578\u64da\u200b\u5f9e\u200b\u4e00\u7a2e\u200b\u683c\u5f0f\u200b\u8f49\u63db\u200b\u70ba\u200b\u53e6\u200b\u4e00\u7a2e\u200b\u683c\u5f0f\u200b\u4ee5\u4f7f\u200b\u5176\u200b\u66f4\u52a0\u200b\u5b89\u5168\u200b\u548c\u200b\u9ad8\u6548\u200b\u7684\u200b\u904e\u7a0b\u200b\u3002</p> <p>\u200b\u5728\u200b\u5340\u584a\u200b\u93c8\u200b\u7684\u200b\u80cc\u666f\u200b\u4e0b\u200b\uff0c\u200b\u7de8\u78bc\u200b\u7528\u200b\u65bc\u200b\u78ba\u4fdd\u6578\u200b\u64da\u200b\u4ee5\u200b\u5b89\u5168\u200b\u4e14\u6613\u200b\u65bc\u200b\u8a2a\u554f\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5b58\u5132\u200b\u548c\u200b\u50b3\u8f38\u200b\u3002</p> <p>\u200b\u905e\u6b78\u9577\u200b\u5ea6\u200b\u524d\u7db4\u200b (RLP) \u200b\u662f\u200b\u4e00\u7a2e\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u57f7\u200b\u884c\u5ba2\u200b\u6236\u7aef\u200b\u4e2d\u5ee3\u6cdb\u200b\u4f7f\u7528\u200b\u7684\u200b\u5e8f\u5217\u5316\u200b\u683c\u5f0f\u200b\u3002</p> <p>\u200b\u5b83\u200b\u7684\u200b\u76ee\u7684\u200b\u662f\u200b\u5c0d\u200b\u4efb\u610f\u200b\u5d4c\u5957\u200b\u7684\u200b\u4e8c\u200b\u9032\u5236\u200b\u6578\u64da\u200b\u6578\u7d44\u200b\u9032\u884c\u200b\u7de8\u78bc\u200b\uff0c\u200b\u662f\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e2d\u7528\u200b\u65bc\u200b\u5e8f\u5217\u5316\u200b\u5c0d\u8c61\u200b\u7684\u200b\u4e3b\u8981\u200b\u7de8\u78bc\u200b\u65b9\u5f0f\u200b\u3002</p> <p>RLP \u200b\u50c5\u5c0d\u200b\u7d50\u69cb\u200b\u9032\u884c\u200b\u7de8\u78bc\u200b\uff0c\u200b\u800c\u5c07\u200b\u5c0d\u200b\u7279\u5b9a\u200b\u539f\u5b50\u200b\u6578\u64da\u200b\u985e\u578b\u200b\uff08\u200b\u4f8b\u5982\u200b\u5b57\u7b26\u4e32\u200b\u3001\u200b\u6574\u6578\u200b\u548c\u200b\u6d6e\u9ede\u6578\u200b\uff09\u200b\u7684\u200b\u7de8\u78bc\u200b\u7559\u7d66\u200b\u9ad8\u968e\u5354\u8b70\u200b\u3002</p> <p>\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e2d\u200b\uff0c\u200b\u6574\u6578\u200b\u5fc5\u9808\u200b\u4ee5\u200b\u6c92\u200b\u6709\u200b\u524d\u5c0e\u200b\u96f6\u200b\u7684\u200b\u5927\u7aef\u200b\u4e8c\u200b\u9032\u5236\u200b\u5f62\u5f0f\u200b\u8868\u793a\u200b\uff0c\u200b\u4f7f\u5f97\u200b\u6574\u6578\u503c\u200b\u96f6\u200b\u7b49\u540c\u200b\u65bc\u200b\u7a7a\u5b57\u7bc0\u200b\u6578\u7d44\u200b\u3002</p> <p>RLP \u200b\u7de8\u78bc\u200b\u51fd\u6578\u200b\u63a5\u53d7\u200b\u4e00\u500b\u200b\u9805\u76ee\u200b\uff0c\u200b\u8a72\u200b\u9805\u76ee\u200b\u88ab\u200b\u5b9a\u7fa9\u70ba\u200b\u503c\u200b\u5728\u200b [0x00, 0x7f] \u200b\u7bc4\u570d\u200b\u5167\u200b\u7684\u200b\u55ae\u500b\u200b\u5b57\u7bc0\u200b\u6216\u200b 0-55 \u200b\u5b57\u200b\u7bc0\u9577\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5b57\u7b26\u4e32\u200b\u7684\u200b\u9577\u200b\u5ea6\u200b\u8d85\u904e\u200b 55 \u200b\u500b\u5b57\u7bc0\u200b\uff0c\u200b\u5247\u200b RLP \u200b\u7de8\u78bc\u200b\u5305\u542b\u200b\u4e00\u500b\u200b\u503c\u200b\u70ba\u200b 0xb7\uff08dec.183\uff09\u200b\u7684\u200b\u5b57\u7bc0\u200b\u52a0\u4e0a\u200b\u9577\u200b\u5ea6\u200b \u200b\u4e8c\u200b\u9032\u5236\u200b\u5f62\u5f0f\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b\u9577\u200b\u5ea6\u200b\u7684\u200b\u5b57\u7bc0\u200b\uff0c\u200b\u5f8c\u200b\u8ddf\u200b\u5b57\u7b26\u4e32\u200b\u7684\u200b\u9577\u200b\u5ea6\u200b\uff0c\u200b\u5f8c\u200b\u8ddf\u200b\u5b57\u7b26\u4e32\u200b\u3002</p> <p>RLP \u200b\u7528\u200b\u65bc\u200b\u54c8\u5e0c\u200b\u9a57\u8b49\u200b\uff0c\u200b\u5176\u4e2d\u200b\u901a\u904e\u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u7684\u200b RLP \u200b\u54c8\u5e0c\u200b\u4f86\u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\uff0c\u200b\u4e26\u4e14\u200b\u5340\u584a\u200b\u7531\u200b\u5176\u200b\u6a19\u982d\u200b\u7684\u200b RLP \u200b\u54c8\u5e0c\u200b\u6a19\u8b58\u200b\u3002</p> <p>RLP \u200b\u9084\u7528\u200b\u65bc\u200b\u901a\u904e\u200b\u7db2\u7d61\u200b\u5c0d\u200b\u6578\u64da\u200b\u9032\u884c\u200b\u7de8\u78bc\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u5728\u200b\u67d0\u4e9b\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u61c9\u8a72\u200b\u652f\u6301\u200b\u9ed8\u514b\u200b\u723e\u6a39\u200b\u6578\u64da\u200b\u7d50\u69cb\u200b\u7684\u200b\u9ad8\u6548\u200b\u7de8\u78bc\u200b\u3002</p> <p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u57f7\u884c\u5c64\u200b\u4f7f\u7528\u200b RLP \u200b\u4f5c\u70ba\u200b\u5e8f\u5217\u5316\u200b\u5c0d\u8c61\u200b\u7684\u200b\u4e3b\u8981\u200b\u7de8\u78bc\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u4f46\u200b\u66f4\u65b0\u200b\u7684\u200b Simple Serialize (SSZ) \u200b\u53d6\u4ee3\u200b\u4e86\u200b RLP \u200b\u4f5c\u70ba\u200b\u4ee5\u592a\u200b\u574a\u200b 2.0 \u200b\u4e2d\u65b0\u5171\u8b58\u5c64\u200b\u7684\u200b\u7de8\u78bc\u200b\u3002</p> <p>Cosmos Stargate \u200b\u7248\u672c\u200b\u5f15\u5165\u200b\u4e86\u200b protobuf \u200b\u4f5c\u70ba\u200b\u5ba2\u6236\u200b\u7aef\u200b\u548c\u200b\u72c0\u614b\u200b\u5e8f\u5217\u5316\u200b\u7684\u200b\u4e3b\u8981\u200b\u7de8\u78bc\u200b\u683c\u5f0f\u200b\u3002</p> <p>\u200b\u6240\u6709\u200b\u7528\u200b\u65bc\u200b\u72c0\u614b\u200b\u548c\u200b\u5ba2\u6236\u200b\u7aef\u7684\u200b EVM \u200b\u6a21\u584a\u200b\u985e\u578b\u200b\uff0c\u200b\u5982\u200b\u4ea4\u6613\u200b\u6d88\u606f\u200b\u3001\u200b\u5275\u4e16\u200b\u3001\u200b\u67e5\u8a62\u200b\u670d\u52d9\u200b\u7b49\u200b\uff0c\u200b\u90fd\u200b\u5c07\u4f5c\u200b\u70ba\u200b\u5354\u8b70\u200b\u7de9\u885d\u5340\u200b\u6d88\u606f\u200b\u5be6\u73fe\u200b\u3002</p> <p>Cosmos SDK \u200b\u9084\u200b\u652f\u6301\u200b\u50b3\u7d71\u200b\u7684\u200b Amino \u200b\u7de8\u78bc\u200b\u3002</p> <p>Protocol Buffers (protobuf) \u200b\u662f\u200b\u4e00\u7a2e\u200b\u8207\u200b\u8a9e\u8a00\u7121\u95dc\u200b\u7684\u200b\u4e8c\u200b\u9032\u5236\u200b\u5e8f\u5217\u5316\u200b\u683c\u5f0f\u200b\uff0c\u200b\u5b83\u200b\u6bd4\u200b JSON \u200b\u66f4\u200b\u5c0f\u200b\u66f4\u200b\u5feb\u200b\u3002</p> <p>\u200b\u5b83\u200b\u7528\u200b\u65bc\u200b\u5e8f\u5217\u5316\u200b\u7d50\u69cb\u200b\u5316\u6578\u64da\u200b\uff0c\u200b\u4f8b\u5982\u200b\u6d88\u606f\u200b\uff0c\u200b\u4e26\u4e14\u200b\u88ab\u200b\u8a2d\u8a08\u200b\u70ba\u200b\u9ad8\u6548\u200b\u548c\u200b\u53ef\u200b\u64f4\u5c55\u200b\u7684\u200b\u3002</p> <p>\u200b\u7de8\u78bc\u200b\u683c\u5f0f\u200b\u4ee5\u200b\u8207\u200b\u8a9e\u8a00\u7121\u95dc\u200b\u7684\u200b\u8a9e\u8a00\u5b9a\u200b\u7fa9\u200b\uff0c\u200b\u7a31\u70ba\u200b Protocol Buffers Language (proto3)\uff0c\u200b\u7de8\u78bc\u200b\u7684\u200b\u6d88\u606f\u200b\u53ef\u7528\u200b\u65bc\u200b\u70ba\u200b\u5404\u7a2e\u200b\u7de8\u7a0b\u200b\u8a9e\u8a00\u200b\u751f\u6210\u200b\u4ee3\u78bc\u200b\u3002</p> <p>protobuf \u200b\u7684\u200b\u4e3b\u8981\u200b\u512a\u9ede\u200b\u662f\u200b\u5b83\u200b\u7684\u200b\u6548\u7387\u200b\uff0c\u200b\u9019\u5c0e\u81f4\u200b\u66f4\u200b\u5c0f\u200b\u7684\u200b\u6d88\u606f\u200b\u5927\u5c0f\u200b\u548c\u200b\u66f4\u200b\u5feb\u200b\u7684\u200b\u5e8f\u5217\u5316\u200b\u548c\u200b\u53cd\u200b\u5e8f\u5217\u5316\u200b\u6642\u9593\u200b\u3002</p> <p>RLP\u200b\u89e3\u78bc\u200b\u904e\u7a0b\u200b\u5982\u4e0b\u200b\uff1a\u200b\u6839\u64da\u200b\u8f38\u5165\u200b\u6578\u64da\u200b\u7684\u200b\u7b2c\u4e00\u200b\u500b\u5b57\u7bc0\u200b\uff08\u200b\u5373\u524d\u200b\u7db4\u200b\uff09\u200b\u89e3\u78bc\u200b\u6578\u64da\u200b\u985e\u578b\u200b\u3001\u200b\u5be6\u969b\u200b\u6578\u64da\u200b\u7684\u200b\u9577\u200b\u5ea6\u200b\u548c\u200b\u504f\u79fb\u91cf\u200b\uff1b\u200b\u6839\u64da\u200b\u6578\u64da\u200b\u7684\u200b\u985e\u578b\u200b\u548c\u200b\u504f\u79fb\u91cf\u200b\uff0c\u200b\u5c0d\u200b\u6578\u64da\u200b\u9032\u884c\u200b\u76f8\u61c9\u200b\u7684\u200b\u89e3\u78bc\u200b\u3002</p>"},{"location":"protocol/#_12","title":"\u5148\u6c7a\u200b\u689d\u4ef6\u200b\u95b1\u8b80","text":"<ul> <li>Cosmos SDK Encoding</li> <li>Ethereum RLP</li> </ul>"},{"location":"protocol/#_13","title":"\u7de8\u78bc\u200b\u683c\u5f0f","text":"<p>*** Protocol Buffers ***</p> <p>Cosmos Stargate \u200b\u7248\u672c\u200b\u5f15\u5165\u200b\u4e86\u200b protobuf \u200b\u4f5c\u70ba\u200b\u5ba2\u6236\u200b\u7aef\u200b\u548c\u200b\u72c0\u614b\u200b\u5e8f\u5217\u5316\u200b\u7684\u200b\u4e3b\u8981\u200b\u7de8\u78bc\u200b\u683c\u5f0f\u200b\u3002</p> <p>\u200b\u6240\u6709\u200b\u7528\u200b\u65bc\u200b\u72c0\u614b\u200b\u548c\u200b\u5ba2\u6236\u200b\u7aef\u200b\uff08\u200b\u4ea4\u6613\u200b\u6d88\u606f\u200b\u3001\u200b\u5275\u4e16\u200b\u3001\u200b\u67e5\u8a62\u200b\u670d\u52d9\u200b\u7b49\u200b\uff09\u200b\u7684\u200b EVM \u200b\u6a21\u584a\u200b\u985e\u578b\u200b\u90fd\u200b\u5c07\u4f5c\u200b\u70ba\u200b\u5354\u8b70\u200b\u7de9\u885d\u5340\u200b\u6d88\u606f\u200b\u5be6\u73fe\u200b\u3002</p> <p>***  Amino ***</p> <p>Cosmos SDK \u200b\u9084\u200b\u652f\u6301\u200b\u820a\u7248\u200b Amino \u200b\u7de8\u78bc\u200b\u683c\u5f0f\u200b\uff0c\u200b\u4ee5\u5411\u200b\u5f8c\u200b\u517c\u5bb9\u200b\u4ee5\u524d\u200b\u7684\u200b\u7248\u672c\u200b\uff0c\u200b\u7279\u5225\u200b\u662f\u200b\u7528\u200b\u65bc\u200b\u5ba2\u6236\u200b\u7aef\u200b\u7de8\u78bc\u200b\u548c\u200b\u4f7f\u7528\u200b Ledger \u200b\u8a2d\u5099\u200b\u7c3d\u540d\u200b\u3002</p> <p>Daodst \u200b\u5728\u200b EVM \u200b\u6a21\u584a\u200b\u4e2d\u200b\u4e0d\u200b\u652f\u6301\u200b Amino\uff0c\u200b\u4f46\u200b\u6240\u6709\u200b\u5176\u4ed6\u200b\u555f\u7528\u200b\u5b83\u200b\u7684\u200b Cosmos SDK \u200b\u6a21\u584a\u200b\u90fd\u200b\u652f\u6301\u200b\u5b83\u200b\u3002</p> <p>***  RLP ***</p> <p>\u200b\u905e\u6b78\u9577\u200b\u5ea6\u200b\u524d\u7db4\u200b (RLP) \u200b\u662f\u200b\u4e00\u7a2e\u200b\u7de8\u78bc\u200b/\u200b\u89e3\u78bc\u200b\u7b97\u6cd5\u200b\uff0c\u200b\u53ef\u200b\u5e8f\u5217\u5316\u200b\u6d88\u606f\u200b\u4e26\u5141\u8a31\u200b\u5feb\u901f\u200b\u91cd\u5efa\u200b\u7de8\u78bc\u200b\u6578\u64da\u200b\u3002</p> <p>Daodst \u200b\u4f7f\u7528\u200b RLP \u200b\u7de8\u78bc\u200b/\u200b\u89e3\u78bc\u200b\u4ee5\u592a\u200b\u574a\u200b\u6d88\u606f\u200b\u4ee5\u200b\u9032\u884c\u200b JSON-RPC \u200b\u8655\u7406\u200b\uff0c\u200b\u4ee5\u200b\u4f7f\u200b\u6d88\u606f\u200b\u7b26\u5408\u200b\u6b63\u78ba\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u683c\u5f0f\u200b\u3002\u200b\u9019\u5141\u200b\u8a31\u4ee5\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b\u683c\u5f0f\u200b\u5b8c\u5168\u76f8\u540c\u200b\u7684\u200b\u683c\u5f0f\u200b\u5c0d\u200b\u6d88\u606f\u200b\u9032\u884c\u200b\u7de8\u78bc\u200b\u548c\u89e3\u200b\u78bc\u200b\u3002</p> <p><code>x/evm</code> \u200b\u4ea4\u6613\u200b (<code>MsgEthereumTx</code>) \u200b\u7de8\u78bc\u200b\u662f\u200b\u901a\u904e\u5c07\u200b\u6d88\u606f\u200b\u8f49\u63db\u200b\u70ba\u200b go-ethereum \u200b\u7684\u200b <code>Transaction</code> \u200b\u7136\u200b\u5f8c\u200b\u4f7f\u7528\u200b RLP \u200b\u7de8\u7d44\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u4f86\u200b\u57f7\u884c\u200b\u7684\u200b\uff1a</p> <pre><code>// TxEncoder overwrites sdk.TxEncoder to support MsgEthereumTx\nfunc (g txConfig) TxEncoder() sdk.TxEncoder {\nreturn func(tx sdk.Tx) ([]byte, error) {\n  msg, ok := tx.(*evmtypes.MsgEthereumTx)\n  if ok {\n    return msg.AsTransaction().MarshalBinary()\n  }\n  return g.TxConfig.TxEncoder()(tx)\n}\n}\n\n// TxDecoder overwrites sdk.TxDecoder to support MsgEthereumTx\nfunc (g txConfig) TxDecoder() sdk.TxDecoder {\nreturn func(txBytes []byte) (sdk.Tx, error) {\n  tx := &amp;ethtypes.Transaction{}\n\n  err := tx.UnmarshalBinary(txBytes)\n  if err == nil {\n    msg := &amp;evmtypes.MsgEthereumTx{}\n    msg.FromEthereumTx(tx)\n    return msg, nil\n  }\n\n  return g.TxConfig.TxDecoder()(txBytes)\n}\n}\n</code></pre>"},{"location":"protocol/#gas","title":"Gas\u200b\u548c\u200b\u624b\u7e8c\u8cbb","text":"<p>\u200b\u7528\u6236\u200b\u9700\u8981\u200b\u652f\u4ed8\u200b\u8cbb\u7528\u200b\u624d\u80fd\u200b\u5728\u200b Daodst \u200b\u7db2\u7d61\u200b\u4e0a\u200b\u63d0\u4ea4\u200b\u4ea4\u6613\u200b\u3002 \u200b\u7531\u200b\u65bc\u200b\u4ee5\u592a\u200b\u574a\u200b\u548c\u200b Cosmos \u200b\u7684\u200b\u8cbb\u7528\u200b\u8655\u7406\u200b\u65b9\u5f0f\u200b\u4e0d\u540c\u200b\uff0c\u200b\u4e86\u89e3\u200b Daodst \u200b\u5340\u584a\u200b\u93c8\u200b\u5982\u4f55\u200b\u5be6\u73fe\u200b\u8207\u200b Cosmos SDK \u200b\u517c\u5bb9\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u7684\u200b\u8cbb\u7528\u200b\u8a08\u7b97\u200b\u975e\u5e38\u200b\u91cd\u8981\u200b\u3002</p> <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u672c\u200b\u6982\u8ff0\u200b\u89e3\u91cb\u200b\u4e86\u200b\u5929\u7136\u200b\u6c23\u8a08\u7b97\u200b\u7684\u200b\u57fa\u790e\u200b\u77e5\u8b58\u200b\u3001\u200b\u5982\u4f55\u200b\u70ba\u200b\u4ea4\u6613\u200b\u63d0\u4f9b\u200b\u8cbb\u7528\u200b\u4ee5\u53ca\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u7684\u200b\u8cbb\u7528\u200b\u8a08\u7b97\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200b\u8cbb\u7528\u200b\u5e02\u5834\u200b (EIP1559) \u200b\u4f86\u200b\u78ba\u5b9a\u200b\u4ea4\u6613\u200b\u7684\u200b\u512a\u5148\u7d1a\u200b\u3002</p> <p>\u200b\u53e6\u5916\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u8207\u200b Daodst \u200b\u4e0a\u200b\u7684\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u4ea4\u4e92\u200b\u6240\u200b\u652f\u4ed8\u200b\u7684\u200b\u8cbb\u7528\u200b\u53ef\u4ee5\u200b\u70ba\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u90e8\u7f72\u200b\u8005\u200b\u8cfa\u53d6\u200b\u6536\u5165\u200b\u3002 \u200b\u6709\u95dc\u200b\u9019\u200b\u65b9\u9762\u200b\u7684\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u524d\u5f80\u200b develop\u3002</p> <p>*** \u200b\u5148\u6c7a\u200b\u689d\u4ef6\u200b\u95b1\u8b80\u200b ***</p> <ul> <li>Cosmos SDK Gas</li> <li>Ethereum Gas</li> </ul> <p>***  Basics ***</p> <p>***  \u200b\u70ba\u200b\u4ec0\u9ebc\u200b\u4ea4\u6613\u200b\u9700\u8981\u200b\u624b\u7e8c\u8cbb\u200b? ***</p> <p>\u200b\u5982\u679c\u200b\u4efb\u4f55\u4eba\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u514d\u8cbb\u200b\u5411\u200b\u7db2\u7d61\u200b\u63d0\u4ea4\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5247\u7db2\u7d61\u200b\u53ef\u80fd\u200b\u6703\u200b\u88ab\u200b\u5c11\u6578\u200b\u53c3\u8207\u8005\u200b\u767c\u9001\u200b\u5927\u91cf\u200b\u6b3a\u8a50\u200b\u6027\u4ea4\u6613\u200b\u4ee5\u200b\u963b\u585e\u200b\u7db2\u7d61\u200b\u4e26\u4f7f\u200b\u5176\u7121\u6cd5\u200b\u6b63\u5e38\u200b\u5de5\u4f5c\u200b\u3002</p> <p>\u200b\u9019\u500b\u200b\u554f\u984c\u200b\u7684\u200b\u89e3\u6c7a\u200b\u65b9\u6848\u200b\u662f\u200b\u4e00\u500b\u200b\u53eb\u505a\u200b\u201cgas\u201d\u200b\u7684\u200b\u6982\u5ff5\u200b\uff0c\u200b\u5b83\u200b\u662f\u200b\u5728\u200b\u6574\u500b\u200b\u4ea4\u6613\u200b\u57f7\u884c\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u6d88\u8017\u200b\u7684\u200b\u8cc7\u6e90\u200b\u3002</p> <p>\u200b\u5728\u200b\u5be6\u8e10\u200b\u4e2d\u200b\uff0c\u200b\u4ee3\u78bc\u200b\u57f7\u884c\u200b\u7684\u200b\u6bcf\u200b\u4e00\u6b65\u200b\u90fd\u200b\u6703\u200b\u6d88\u8017\u200b\u5c11\u91cf\u200bgas\uff0c\u200b\u5f9e\u200b\u800c\u200b\u6709\u6548\u200b\u5730\u5c0d\u9a57\u200b\u8b49\u8005\u200b\u8cc7\u6e90\u200b\u7684\u200b\u4f7f\u7528\u200b\u9032\u884c\u200b\u6536\u8cbb\u200b\uff0c\u200b\u4e26\u200b\u9632\u6b62\u200b\u60e1\u610f\u884c\u200b\u70ba\u8005\u200b\u96a8\u200b\u610f\u4e2d\u200b\u65b7\u200b\u7db2\u7d61\u200b\u3002</p> <p>***  \u200b\u4ec0\u9ebc\u200b\u662f\u200b Gas? ***</p> <p>\u200b\u4e00\u822c\u200b\u4f86\u200b\u8aaa\u200b\uff0cgas \u200b\u662f\u200b\u8861\u91cf\u200b\u7279\u5b9a\u200b\u4ea4\u6613\u200b\u8a08\u7b97\u200b\u5f37\u5ea6\u200b\u7684\u200b\u55ae\u4f4d\u200b\u2014\u2014\u200b\u63db\u53e5\u200b\u8a71\u200b\u8aaa\u200b\uff0c\u200b\u8a55\u4f30\u200b\u548c\u200b\u57f7\u884c\u200b\u9019\u9805\u200b\u5de5\u4f5c\u200b\u9700\u8981\u200b\u591a\u5c11\u200b\u5de5\u4f5c\u91cf\u200b\u3002</p> <p>\u200b\u8907\u200b\u96dc\u7684\u200b\u591a\u6b65\u200b\u4ea4\u6613\u200b\uff0c\u200b\u4f8b\u5982\u200b\u59d4\u200b\u8a17\u200b\u7d66\u5341\u5e7e\u500b\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b Cosmos \u200b\u4ea4\u6613\u200b\uff0c\u200b\u6bd4\u200b\u7c21\u55ae\u200b\u7684\u200b\u55ae\u6b65\u200b\u4ea4\u6613\u200b\uff08\u200b\u4f8b\u5982\u200b\u5c07\u4ee3\u5e63\u200b\u767c\u200b\u9001\u5230\u200b\u53e6\u200b\u4e00\u500b\u200b\u5730\u5740\u200b\u7684\u200b Cosmos \u200b\u4ea4\u6613\u200b\uff09\u200b\u9700\u8981\u200b\u66f4\u200b\u591a\u200b\u7684\u200b gas\u3002</p> <p>\u200b\u5728\u200b\u63d0\u53ca\u200b\u4ea4\u6613\u200b\u6642\u200b\uff0c\u201cgas\u201d\u200b\u662f\u200b\u6307\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200bgas\u200b\u7e3d\u91cf\u200b\u3002</p> <p>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u4e00\u7b46\u200b\u4ea4\u6613\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b 300,000 \u200b\u55ae\u4f4d\u200b\u7684\u200bgas\u200b\u624d\u80fd\u200b\u57f7\u884c\u200b\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u5c07\u200bgas\u200b\u8996\u70ba\u200b\u623f\u5c4b\u200b\u6216\u200b\u5de5\u5ee0\u200b\u5167\u200b\u7684\u200b\u96fb\u529b\u200b (kWh)\uff0c\u200b\u6216\u200b\u6c7d\u8eca\u200b\u71c3\u6599\u200b\u3002</p> <p>\u200b\u9019\u500b\u200b\u60f3\u6cd5\u200b\u662f\u200b\u8981\u200b\u82b1\u200b\u4e00\u4e9b\u200b\u9322\u200b\u624d\u80fd\u200b\u5230\u200b\u9054\u200b\u67d0\u500b\u200b\u5730\u65b9\u200b\u3002</p> <p>\u200b\u66f4\u200b\u591a\u200b Gas \u200b\u4ecb\u7d39\u200b:</p> <ul> <li>Cosmos Gas Fees</li> <li>Cosmos Tx Lifecycle</li> <li>Ethereum Gas</li> </ul> <p>***  \u200b\u5982\u4f55\u200b\u8a08\u7b97\u200bGas ***</p> <p>\u200b\u4e00\u822c\u200b\u4f86\u200b\u8aaa\u200b\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u7c21\u55ae\u200b\u5730\u904b\u884c\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5c31\u200b\u7121\u6cd5\u200b\u78ba\u5207\u200b\u77e5\u9053\u200b\u4ea4\u6613\u200b\u5c07\u82b1\u8cbb\u200b\u591a\u5c11\u200b gas\u3002</p> <p>\u200b\u4f7f\u7528\u200b Cosmos SDK\uff0c\u200b\u9019\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6a21\u64ec\u200b Tx \u200b\u4f86\u200b\u5b8c\u6210\u200b\u3002</p> <p>\u200b\u5426\u5247\u200b\uff0c\u200b\u6709\u200b\u4e00\u4e9b\u200b\u65b9\u6cd5\u200b\u53ef\u4ee5\u200b\u6839\u64da\u200b\u4ea4\u6613\u200b\u5b57\u6bb5\u200b\u548c\u200b\u6578\u64da\u200b\u7684\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\u4f86\u200b\u4f30\u8a08\u200b\u4ea4\u6613\u200b\u5c07\u200b\u9700\u8981\u200b\u7684\u200bgas\u3002</p> <p>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u5728\u200b EVM \u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u6bcf\u500b\u200b\u5b57\u200b\u7bc0\u78bc\u200b\u64cd\u4f5c\u200b\u90fd\u200b\u6709\u200b \u200b\u76f8\u61c9\u200b\u6578\u91cf\u200b\u7684\u200bgas\u3002</p> <p>\u200b\u66f4\u591a\u95dc\u200b\u65bc\u200bGas\u200b\u8a08\u7b97\u200b:</p> <ul> <li>Estimate Gas</li> <li>Executing EVM Bytecode</li> <li>Simulate a Cosmos SDK Tx</li> </ul> <p>***  Gas\u200b\u548c\u200b\u624b\u7e8c\u200b\u8cbb\u7684\u95dc\u200b\u4fc2\u200b? ***</p> <p>Gas \u200b\u662f\u200b\u6307\u200b\u57f7\u884c\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u8a08\u7b97\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u800c\u8cbb\u7528\u200b\u662f\u200b\u6307\u200b\u60a8\u200b\u5be6\u969b\u200b\u82b1\u8cbb\u4f86\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u7684\u200b\u4ee3\u5e63\u200b\u6578\u91cf\u200b\u3002</p> <p>\u200b\u5b83\u5011\u200b\u662f\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u516c\u5f0f\u200b\u5f97\u51fa\u200b\u7684\u200b\uff1a</p> <pre><code>Total Fees = Gas * Gas Price (the price per unit of gas)\n</code></pre> <p>\u200b\u5982\u679c\u200b <code>gas</code> \u200b\u4ee5\u200b kWh \u200b\u70ba\u200b\u55ae\u4f4d\u200b\uff0c\u200b\u5247\u200b\u201cgas price\u201d\u200b\u5c07\u662f\u200b\u60a8\u200b\u7684\u200b\u80fd\u6e90\u200b\u4f9b\u61c9\u5546\u200b\u78ba\u5b9a\u200b\u7684\u200b\u8cbb\u7387\u200b\uff08\u200b\u4ee5\u200b\u7f8e\u5143\u200b/kWh \u200b\u70ba\u200b\u55ae\u4f4d\u200b\uff09\uff0c\u200b\u800c\u200b <code>fees\u200b\u200b</code> \u200b\u5c07\u662f\u200b\u60a8\u200b\u7684\u200b\u8cec\u55ae\u200b\u3002</p> <p>\u200b\u8207\u200b\u96fb\u529b\u200b\u4e00\u6a23\u200b\uff0cgas\u200b\u50f9\u683c\u200b\u5728\u200b\u67d0\u200b\u4e00\u5929\u200b\u53ef\u80fd\u200b\u6703\u6ce2\u52d5\u200b\uff0c\u200b\u5177\u9ad4\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u7db2\u7d61\u200b\u6d41\u91cf\u200b\u3002</p> <p>\u200b\u66f4\u591a\u95dc\u200b\u65bc\u200b Gas \u200b\u548c\u200b \u200b\u624b\u7e8c\u8cbb\u200b:</p> <ul> <li>Cosmos Gas and Fees</li> <li>Ethereum Gas and Fees</li> </ul> <p>***  Cosmos\u200b\u5982\u4f55\u200b\u8655\u7406\u200b\u624b\u7e8c\u8cbb\u200b? ***</p> <p>Cosmos \u200b\u7684\u200bgas\u200b\u8cbb\u76f8\u200b\u5c0d\u200b\u7c21\u55ae\u200b\u3002\u200b\u4f5c\u70ba\u200b\u7528\u6236\u200b\uff0c\u200b\u60a8\u200b\u6307\u5b9a\u200b\u5169\u500b\u200b\u5b57\u200b\u6bb5\u200b\uff1a</p> <ol> <li>\u200b\u5c0d\u61c9\u200b\u65bc\u200b\u57f7\u884c\u200b\u6c23\u9ad4\u200b\u4e0a\u9650\u200b\u7684\u200b <code>GasLimit</code>\uff0c\u200b\u5b9a\u7fa9\u70ba\u200b<code>GasWanted</code></li> <li><code>Fees</code> \u200b\u6216\u200b <code>GasPrice</code> \u200b\u4e4b\u4e00\u200b\uff0c\u200b\u5c07\u7528\u200b\u65bc\u200b\u6307\u5b9a\u200b\u6216\u200b\u8a08\u7b97\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b</li> </ol> <p>\u200b\u7bc0\u9ede\u5c07\u200b\u5b8c\u5168\u200b\u6d88\u8017\u200b\u6240\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8cbb\u7528\u200b\uff0c\u200b\u7136\u5f8c\u958b\u59cb\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u3002 \u200b\u5982\u679c\u200b\u5728\u200b\u57f7\u884c\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u767c\u73fe\u200b<code>GasLimit</code>\u200b\u4e0d\u8db3\u200b\uff0c\u200b\u4ea4\u6613\u200b\u5c07\u5931\u6557\u200b\u4e26\u56de\u200b\u6efe\u200b\u4efb\u4f55\u200b\u66f4\u6539\u200b\uff0c\u200b\u4e0d\u200b\u9000\u9084\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8cbb\u7528\u200b\u3002</p> <p>\u200b\u57fa\u200b\u65bc\u200b Cosmos SDK \u200b\u7684\u200b\u93c8\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u6307\u5b9a\u200b\u4ed6\u5011\u200b\u5728\u200b\u9078\u64c7\u200b\u8981\u200b\u5305\u542b\u200b\u5728\u200b\u5340\u584a\u200b\u4e2d\u200b\u7684\u200b\u4ea4\u6613\u200b\u6642\u5c07\u200b\u5f37\u5236\u200b\u57f7\u884c\u200b\u7684\u200b\u201c\u200b\u6700\u4f4e\u200b\u6c7d\u6cb9\u200b\u50f9\u683c\u200b\u201d\u3002</p> <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u8cbb\u7528\u200b\u4e0d\u8db3\u200b\u7684\u200b\u4ea4\u6613\u200b\u5c07\u200b\u9047\u5230\u200b\u5ef6\u9072\u200b\u6216\u200b\u5fb9\u5e95\u200b\u5931\u6557\u200b\u3002</p> <p>\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u958b\u59cb\u200b\uff0c\u200b\u524d\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u8cbb\u7528\u200b\u88ab\u200b\u5206\u914d\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b\uff0c\u200b\u4e4b\u5f8c\u5b83\u200b\u5011\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u63d0\u53d6\u200b\u548c\u200b\u4f7f\u7528\u200b\u3002</p> <p>***  \u200b\u5982\u4f55\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e0a\u200b\u8655\u7406\u200b\u624b\u7e8c\u8cbb\u200b? ***</p> <p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b\u8cbb\u7528\u200b\u5305\u62ec\u200b\u96a8\u8457\u200b\u6642\u9593\u200b\u7684\u200b\u63a8\u79fb\u200b\u5f15\u5165\u200b\u7684\u200b\u591a\u7a2e\u200b\u5be6\u73fe\u200b\u3002</p> <p>\u200b\u6700\u521d\u200b\uff0c\u200b\u7528\u6236\u200b\u6703\u200b\u5728\u200b\u4ea4\u6613\u200b\u4e2d\u200b\u6307\u5b9a\u200b <code>GasPrice</code> \u200b\u548c\u200b <code>GasLimit</code> \u2014\u2014\u200b\u5f88\u200b\u50cf\u200b Cosmos SDK \u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u5340\u584a\u200b\u63d0\u8b70\u8005\u200b\u5c07\u5f9e\u5340\u200b\u584a\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u4e2d\u200b\u6536\u53d6\u200b\u5168\u90e8\u200b\u6c7d\u6cb9\u200b\u8cbb\u200b\uff0c\u200b\u4e26\u4e14\u200b\u4ed6\u5011\u200b\u6703\u200b\u76f8\u61c9\u200b\u5730\u200b\u9078\u64c7\u200b\u8981\u200b\u5305\u542b\u200b\u7684\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u96a8\u8457\u200b\u63d0\u6848\u200b EIP-1559 \u200b\u548c\u200b\u502b\u6566\u200b\u786c\u200b\u5206\u53c9\u200b\uff0cgas \u200b\u8a08\u7b97\u200b\u767c\u751f\u200b\u4e86\u200b\u8b8a\u5316\u200b\u3002</p> <p>\u200b\u4e0a\u9762\u200b\u7684\u200b <code>GasPrice</code> \u200b\u73fe\u5728\u200b\u88ab\u200b\u5206\u6210\u200b\u5169\u500b\u200b\u7368\u7acb\u200b\u7684\u200b\u90e8\u5206\u200b\uff1a<code>BaseFee</code> \u200b\u548c\u200b <code>PriorityFee</code>\u3002</p> <p><code>BaseFee</code> \u200b\u662f\u200b\u6839\u64da\u5340\u200b\u584a\u200b\u5927\u5c0f\u200b\u81ea\u52d5\u200b\u8a08\u7b97\u200b\u7684\u200b\uff0c\u200b\u4e00\u65e6\u200b\u5340\u584a\u200b\u88ab\u200b\u6316\u51fa\u200b\u5c31\u200b\u6703\u200b\u88ab\u200b\u92b7\u6bc0\u200b\u3002</p> <p><code>PriorityFee</code> \u200b\u4ea4\u7d66\u200b\u63d0\u8b70\u8005\u4e26\u200b\u4ee3\u8868\u200b\u4e00\u500b\u200b\u5c0f\u8cbb\u200b\uff0c\u200b\u6216\u200b\u6fc0\u52f5\u200b\u63d0\u8b70\u8005\u5c07\u200b\u4ea4\u6613\u200b\u5305\u542b\u200b\u5728\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b\u3002</p> <pre><code>Gas Price = Base Fee + Priority Fee\n</code></pre> <p>\u200b\u5728\u200b\u4ea4\u6613\u200b\u4e2d\u200b\uff0c\u200b\u9664\u4e86\u200b\u50cf\u200b\u4ee5\u524d\u200b\u4e00\u6a23\u200b\u6307\u5b9a\u200b <code>gas_limit</code> \u200b\u4e4b\u5916\u200b\uff0c\u200b\u7528\u6236\u9084\u200b\u53ef\u4ee5\u200b\u6307\u5b9a\u200b\u5c0d\u61c9\u200b\u65bc\u200b\u7e3d\u200b <code>GasPrice</code> \u200b\u7684\u200b <code>max_fee_per_gas</code> \u200b\u548c\u200b\u5c0d\u200b\u61c9\u200b\u65bc\u200b\u6700\u5927\u200b <code>PriorityFee</code> \u200b\u7684\u200b <code>max_priority_fee_per_gas</code>\u3002</p> <p>\u200b\u6240\u6709\u200b\u4e0d\u200b\u9700\u8981\u200b\u57f7\u884c\u200b\u7684\u200b\u591a\u9918\u6c23\u9ad4\u200b\u90fd\u200b\u9000\u200b\u9084\u7d66\u200b\u7528\u6236\u200b\u3002</p> <p>\u200b\u66f4\u591a\u95dc\u200b\u65bc\u200b Ethereum \u200b\u624b\u7e8c\u8cbb\u200b:</p> <ul> <li>Gas Calculation Docs</li> <li>Proposal EIP-1559</li> </ul> <p>***   \u200b\u5be6\u65bd\u200b ***</p> <p>***  \u200b\u5982\u4f55\u200b\u5728\u200bDaodst\u200b\u4e0a\u200b\u8655\u7406\u200bGas\u200b\u548c\u200b\u624b\u7e8c\u8cbb\u200b? ***</p> <p>\u200b\u5f9e\u200b\u6839\u672c\u200b\u4e0a\u200b\u8aaa\u200b\uff0cDaodst \u200b\u662f\u200b\u4e00\u500b\u200b Cosmos SDK \u200b\u93c8\u200b\uff0c\u200b\u53ef\u4f5c\u200b\u70ba\u200b Cosmos SDK \u200b\u6a21\u584a\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u5be6\u73fe\u200b EVM \u200b\u517c\u5bb9\u6027\u200b\u3002\u200b\u7531\u200b\u65bc\u200b\u9019\u7a2e\u200b\u67b6\u69cb\u200b\uff0c\u200b\u6240\u6709\u200b EVM \u200b\u4ea4\u6613\u200b\u6700\u7d42\u200b\u90fd\u200b\u88ab\u200b\u7de8\u78bc\u200b\u70ba\u200b Cosmos SDK \u200b\u4ea4\u6613\u200b\u4e26\u200b\u66f4\u65b0\u200b Cosmos SDK \u200b\u7ba1\u7406\u200b\u7684\u200b\u72c0\u614b\u200b\u3002\u200b\u7531\u200b\u65bc\u200b\u6240\u6709\u200b\u4ea4\u6613\u200b\u90fd\u200b\u8868\u793a\u200b\u70ba\u200b Cosmos SDK \u200b\u4ea4\u6613\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4e0d\u540c\u200b\u57f7\u884c\u5c64\u200b\u3002</p> <p>\u200b\u5be6\u969b\u200b\u4e0a\u200b\uff0c\u200b\u8655\u7406\u8cbb\u7528\u200b\u5305\u62ec\u200b\u6a19\u6e96\u200b\u7684\u200b Cosmos SDK \u200b\u908f\u8f2f\u200b\u3001\u200b\u4e00\u4e9b\u200b\u4ee5\u592a\u200b\u574a\u200b\u908f\u8f2f\u200b\u548c\u200b customDaodst \u200b\u908f\u8f2f\u200b\u3002\u200b\u5927\u591a\u200b\u6578\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u8cbb\u7528\u200b\u7531\u200b <code>fee_collector</code> \u200b\u6a21\u584a\u200b\u6536\u53d6\u200b\uff0c\u200b\u7136\u200b\u5f8c\u200b\u652f\u4ed8\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b\u3002\u200b\u4e00\u4e9b\u200b\u95dc\u9375\u200b\u7684\u200b\u5340\u5225\u200b\u5982\u4e0b\u200b\uff1a</p> <p>1.Fee \u200b\u5e02\u5834\u200b\u6a21\u584a\u200b</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u5728\u200b Daodst \u200b\u7684\u200b EVM \u200b\u5c64\u4e0a\u200b\u652f\u6301\u200b EIP-1559 \u200b\u6c23\u9ad4\u200b\u548c\u200b\u8cbb\u7528\u200b\u8a08\u7b97\u200b\uff0cDaodst \u200b\u8ddf\u8e2a\u200b\u70ba\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u4f9b\u61c9\u200b\u7684\u200b\u6c23\u9ad4\u200b\uff0c\u200b\u4e26\u200b\u4f7f\u7528\u200b\u5b83\u4f86\u200b\u8a08\u7b97\u200b\u672a\u4f86\u200b EVM \u200b\u4ea4\u6613\u200b\u7684\u200b\u57fa\u672c\u200b\u8cbb\u7528\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u5be6\u73fe\u200b EIP \u200b\u6307\u5b9a\u200b\u7684\u200b EVM \u200b\u52d5\u614b\u200b\u8cbb\u7528\u200b\u548c\u200b\u4ea4\u6613\u200b\u512a\u5148\u7d1a\u200b -1559\u3002</p> <p>\u200b\u5c0d\u200b\u65bc\u200b EVM \u200b\u4ea4\u6613\u200b\uff0c\u200b\u6bcf\u500b\u200b\u7bc0\u9ede\u200b\u90fd\u200b\u7e5e\u904e\u200b\u5176\u200b\u672c\u5730\u200b\u7684\u200b <code>min-gas-prices</code> \u200b\u914d\u7f6e\u200b\uff0c\u200b\u800c\u662f\u200b\u61c9\u7528\u200b EIP-1559 \u200b\u8cbb\u7528\u200b\u908f\u8f2f\u200b\u2014\u2014gas \u200b\u50f9\u683c\u200b\u5fc5\u9808\u200b\u7c21\u55ae\u200b\u5730\u5927\u200b\u65bc\u200b\u5168\u5c40\u200b <code>min-gas-price</code> \u200b\u548c\u200b\u5340\u584a\u200b\u7684\u200b <code>BaseFee</code> \uff0c\u200b\u5269\u9918\u200b\u90e8\u5206\u200b\u88ab\u200b\u8996\u70ba\u200b\u512a\u5148\u200b\u5c0f\u8cbb\u200b\u3002</p> <p>\u200b\u9019\u5141\u200b\u8a31\u9a57\u200b\u8b49\u8005\u200b\u5728\u200b\u4e0d\u200b\u61c9\u7528\u200b Cosmos SDK \u200b\u8cbb\u7528\u200b\u908f\u8f2f\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u8a08\u7b97\u200b\u4ee5\u592a\u200b\u574a\u200b\u8cbb\u7528\u200b\u3002</p> <p>\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e0d\u540c\u200b\uff0cDaodst \u200b\u4e0a\u200b\u7684\u200b\u201cBaseFee\u201d\u200b\u4e0d\u6703\u200b\u88ab\u200b\u92b7\u6bc0\u200b\uff0c\u200b\u800c\u662f\u200b\u5206\u767c\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b</p> <p>\u200b\u6b64\u5916\u200b\uff0c<code>BaseFee</code> \u200b\u53d7\u200b\u5168\u5c40\u200b<code>min-gas-price</code> \u200b\u7684\u200b\u4e0b\u9650\u200b\uff08\u200b\u76ee\u524d\u200b\uff0c\u200b\u5168\u5c40\u200b<code>min-gas-price</code> \u200b\u53c3\u6578\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u96f6\u200b\uff0c\u200b\u5118\u200b\u7ba1\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6cbb\u7406\u200b\u9032\u884c\u200b\u66f4\u65b0\u200b\uff09\u3002</p> <p>2.EVM Gas\u200b\u8fd4\u9084\u200b</p> <p>Daodst \u200b\u6703\u70ba\u200b EVM \u200b\u4ea4\u6613\u200b\u9000\u9084\u200b\u4e00\u5c0f\u90e8\u5206\u200b\uff08\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u81f3\u5c11\u200b 50%\uff09\u200b\u672a\u200b\u4f7f\u7528\u200b\u7684\u200b\u6c23\u9ad4\u200b\uff0c\u200b\u4ee5\u200b\u63a5\u8fd1\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e0a\u7684\u7576\u200b\u524d\u884c\u200b\u70ba\u200b\u3002 </p> <p>3.\u200b\u6536\u5165\u200b\u6a21\u584a\u200b</p> <p>Daodst \u200b\u958b\u767c\u200b\u6536\u5165\u200b\u6a21\u584a\u200b\u4f5c\u70ba\u200b\u734e\u52f5\u200b\u958b\u767c\u200b\u4eba\u54e1\u5275\u200b\u5efa\u6709\u200b\u7528\u200b\u7684\u200b dApp \u200b\u7684\u200b\u4e00\u7a2e\u200b\u65b9\u5f0f\u200b\u2014\u2014\u200b\u4efb\u4f55\u200b\u5728\u200b Daodst \u200b\u6536\u5165\u200b\u6a21\u200b\u584a\u200b\u8a3b\u200b\u518a\u200b\u7684\u200b\u5408\u540c\u200b\u90fd\u200b\u6703\u200b\u5f9e\u200b\u8207\u200b\u5408\u540c\u200b\u4ea4\u4e92\u200b\u7684\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u4e2d\u5411\u200b\u5408\u540c\u200b\u958b\u767c\u200b\u4eba\u54e1\u200b\u734e\u52f5\u200b\u4e00\u5c0f\u90e8\u5206\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\uff08\u200b\u76ee\u524d\u200b\u70ba\u200b 95%\uff09. \u200b\u9a57\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b\u8cfa\u53d6\u200b\u5269\u9918\u200b\u90e8\u5206\u200b\u3002</p> <p>***  \u200b\u8a73\u7d30\u200b\u6642\u9593\u200b\u8868\u200b ***</p> <p>1.\u200b\u7bc0\u9ede\u57f7\u200b\u884c\u524d\u200b\u4e00\u500b\u200b\u584a\u200b\u4e26\u904b\u884c\u200b <code>EndBlock</code> \u200b\u639b\u9264\u200b * \u200b\u4f5c\u70ba\u200b\u6b64\u639b\u200b\u9264\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0cFeeMarket (EIP-1559) \u200b\u6a21\u584a\u200b\u5f9e\u200b\u8a72\u200b\u584a\u200b\u4e0a\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e2d\u200b\u8ddf\u8e2a\u200b\u7e3d\u200b\u7684\u200b <code>TransientGasWanted</code>\u3002 \u200b\u9019\u5c07\u200b\u7528\u200b\u65bc\u200b\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b <code>BaseFee</code>\u3002</p> <p>2.\u200b\u7bc0\u9ede\u200b\u63a5\u6536\u200b\u5f8c\u200b\u7e8c\u5340\u200b\u584a\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e26\u5c07\u200b\u9019\u4e9b\u200b\u4ea4\u6613\u200b\u516b\u5366\u200b\u7d66\u200b\u540c\u884c\u200b*\u200b\u9019\u4e9b\u200b\u53ef\u4ee5\u200b\u6309\u200b\u5305\u542b\u200b\u7684\u200b\u8cbb\u7528\u200b\u50f9\u683c\u200b\u6392\u5e8f\u200b\u548c\u200b\u512a\u5148\u7d1a\u200b\uff08\u200b\u4f7f\u7528\u200b EIP-1559 \u200b\u8cbb\u7528\u200b\u512a\u5148\u200b\u6a5f\u5236\u200b\u9032\u884c\u200b EVM \u200b\u4ea4\u6613\u200b \uff0c\u200b\u5c07\u200b\u5305\u542b\u200b\u5728\u200b\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b</p> <p>3.\u200b\u7bc0\u9ede\u200b\u70ba\u5f8c\u7e8c\u200b\u584a\u200b\u904b\u884c\u200b <code>BeginBlock</code> * FeeMarket \u200b\u6a21\u584a\u200b\u8a08\u7b97\u200b <code>BaseFee</code> \u200b\u4f7f\u7528\u200b\u524d\u4e00\u500b\u200b\u584a\u200b\u4e2d\u200b\u7684\u200b\u7e3d\u200b <code>GasWanted</code> \u200b\u61c9\u7528\u200b\u65bc\u200b\u6b64\u584a\u200b\u3002 * \u200b\u5206\u914d\u200b\u6a21\u584a\u200b distributes \u200b\u524d\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u8cbb\u7528\u200b\u734e\u52f5\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b</p> <p>4.\u200b\u5c0d\u200b\u65bc\u5c07\u200b\u5305\u542b\u200b\u5728\u200b\u6b64\u584a\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u500b\u200b\u6709\u6548\u200b\u4ea4\u6613\u200b\uff0c\u200b\u7bc0\u9ede\u200b\u57f7\u884c\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a</p> <p>** \u200b\u4ed6\u5011\u200b\u904b\u884c\u200b\u4e00\u500b\u200b\u5c0d\u200b\u61c9\u200b\u65bc\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u7684\u200b<code>AnteHandler</code> **\u3002</p> <p>\u200b\u9019\u500b\u200b\u6d41\u7a0b\u200b:</p> <ol> <li>\u200b\u57f7\u884c\u200b\u57fa\u672c\u200b\u4ea4\u6613\u200b\u9a57\u8b49\u200b</li> <li>\u200b\u9a57\u8b49\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8cbb\u7528\u200b\u662f\u5426\u200b\u5927\u200b\u65bc\u200b\u5168\u7403\u200b\u548c\u200b\u672c\u5730\u200b\u6700\u5c0f\u200b\u9a57\u8b49\u200b\u5668\u503c\u200b\u4e26\u4e14\u200b\u5927\u200b\u65bc\u200b\u8a08\u7b97\u51fa\u200b\u7684\u200b<code>BaseFee</code>    3.\uff08\u200b\u5c0d\u200b\u65bc\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\uff09\u200b\u6436\u200b\u4f54\u200bEVM\u200b\u4ea4\u6613\u200b\u6d88\u8017\u200bgas</li> <li>\u200b\u6263\u9664\u200b\u7528\u6236\u200b\u7684\u200b\u4ea4\u6613\u200b\u624b\u7e8c\u8cbb\u200b\uff0c\u200b\u8f49\u5165\u200b<code>fee_collector</code>\u200b\u6a21\u584a\u200b</li> <li> <p>\u200b\u589e\u52a0\u200b\u7576\u524d\u200b\u5340\u584a\u200b\u4e2d\u200b\u7684\u200b <code>TransientGasWanted</code>\uff0c\u200b\u7528\u200b\u65bc\u200b\u8a08\u7b97\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b <code>BaseFee</code></p> <p>\u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u5c0d\u200b\u65bc\u200b\u6a19\u6e96\u200bCosmos\u200b\u4ea4\u6613\u200b,\u200b\u7bc0\u9ede\u200b</p> <ul> <li>\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u4e26\u200b\u66f4\u65b0\u200b\u72c0\u614b\u200b</li> <li>\u200b\u4ea4\u6613\u200b\u6d88\u8017\u200bgas</li> </ul> <p>\u200b\u5c0d\u200b\u65bc\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\uff0c\u200b\u7bc0\u9ede\u200b:</p> <ul> <li>\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u4e26\u200b\u66f4\u65b0\u200b\u72c0\u614b\u200b</li> <li>\u200b\u8a08\u7b97\u200b\u4f7f\u7528\u200b\u7684\u200bgas\u200b\u4e26\u8207\u200b\u4f9b\u61c9\u200b\u7684\u200bgas\u200b\u9032\u884c\u200b\u6bd4\u200b\u8f03\u200b\uff0c\u200b\u7136\u5f8c\u9000\u9084\u200b\u6307\u5b9a\u200b\u90e8\u5206\u200b\u7684\u200b\u5269\u9918\u200b\u90e8\u5206\u200b</li> <li>\u200b\u5982\u679c\u200b\u4ea4\u6613\u200b\u8207\u200b\u5df2\u200b\u8a3b\u200b\u518a\u200b\u7684\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u4ea4\u4e92\u200b\uff0c\u200b\u5247\u5c07\u200b\u4e00\u5c0f\u90e8\u5206\u200b\u7528\u4f5c\u200b\u6536\u5165\u200b\u7684\u8cbb\u200b\u7528\u4f5c\u200b\u70ba\u200b\u6536\u5165\u200b\u6a21\u584a\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u767c\u9001\u7d66\u200b\u5408\u540c\u200b\u958b\u767c\u5546\u200b</li> </ul> </li> <li> <p>\u200b\u7bc0\u9ede\u200b\u70ba\u200b\u6b64\u584a\u200b\u904b\u884c\u200b <code>EndBlock</code> \u200b\u4e26\u5b58\u200b\u5132\u584a\u200b\u7684\u200b <code>GasWanted</code></p> </li> </ol> <p>***  \u200b\u8a73\u7d30\u200b\u505a\u6cd5\u200b ***</p> <p>***  Cosmos <code>Gas</code> ***</p> <p>\u200b\u5728\u200b Cosmos SDK \u200b\u4e2d\u200b\uff0cgas \u200b\u4e3b\u8981\u200b\u5728\u200b <code>GasMeter</code>\u200b\u548c\u200b <code>BlockGasMeter</code> \u200b\u4e2d\u200b\u9032\u884c\u200b\u8ddf\u8e2a\u200b\uff1a</p> <ul> <li><code>GasMeter</code>\uff1a\u200b\u8ddf\u8e2a\u200b\u5c0e\u81f4\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u7684\u200b\u57f7\u884c\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u6d88\u8017\u200b\u7684\u200b\u6c23\u9ad4\u200b\u3002\u200b\u5b83\u200b\u5728\u200b\u6bcf\u6b21\u200b\u4ea4\u6613\u200b\u57f7\u884c\u200b\u6642\u200b\u91cd\u7f6e\u200b\u3002</li> <li><code>BlockGasMeter</code>\uff1a\u200b\u8ddf\u8e2a\u200b\u5340\u584a\u200b\u4e2d\u200b\u6d88\u8017\u200b\u7684\u200b\u6c23\u9ad4\u200b\u4e26\u5f37\u200b\u5236\u6c23\u9ad4\u200b\u4e0d\u200b\u8d85\u904e\u200b\u9810\u5b9a\u200b\u7fa9\u7684\u200b\u9650\u5236\u200b\u3002\u200b\u6b64\u200b\u9650\u5236\u200b\u5728\u200b Tendermint \u200b\u5171\u8b58\u200b\u53c3\u6578\u200b\u4e2d\u5b9a\u7fa9\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6cbb\u7406\u200b\u53c3\u6578\u200b\u66f4\u6539\u200b\u63d0\u6848\u200b\u9032\u884c\u200b\u66f4\u6539\u200b\u3002</li> </ul> <p>\u200b\u7531\u200b\u65bc\u200b gas \u200b\u662f\u200b\u6309\u200b\u5b57\u200b\u7bc0\u5b9a\u50f9\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u76f8\u540c\u200b\u7684\u200b\u4ea4\u4e92\u200b\u5728\u200b\u53c3\u6578\u503c\u200b\u8f03\u200b\u5927\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u6bd4\u200b\u8f03\u200b\u5c0f\u200b\u7684\u200b\u53c3\u6578\u503c\u200b\u66f4\u200b\u8017\u8cbb\u200b\u6c23\u9ad4\u200b\uff08\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b <code>uint256</code> \u200b\u503c\u200b\u4e0d\u540c\u200b\uff0cCosmos SDK \u200b\u6578\u503c\u200b\u4f7f\u7528\u200b Big.Int \u200b\u985e\u578b\u200b\uff0c\u200b\u5b83\u5011\u200b\u662f\u200b\u52d5\u614b\u200b\u8abf\u6574\u200b\u5927\u5c0f\u200b\u7684\u200b\uff09\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u5728\u200b\u6b64\u8655\u200b \u200b\u627e\u5230\u200b\u6709\u200b\u95dc\u4f5c\u200b\u70ba\u200b Cosmos SDK \u200b\u4e00\u90e8\u5206\u200b\u7684\u200b gas \u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\u3002</p> <p>***  \u200b\u5339\u914d\u200bEVM Gas\u200b\u6d88\u8017\u200b ***</p> <p>Daodst \u200b\u662f\u200b\u4e00\u689d\u200b EVM \u200b\u517c\u5bb9\u200b\u93c8\u200b\uff0c\u200b\u652f\u6301\u200b\u4ee5\u592a\u200b\u574a\u200b Web3 \u200b\u5de5\u5177\u200b\u3002\u200b\u51fa\u200b\u65bc\u200b\u9019\u500b\u200b\u539f\u56e0\u200b\uff0c\u200b\u6c23\u9ad4\u200b\u6d88\u8017\u200b\u5fc5\u9808\u200b\u8207\u200b\u5176\u4ed6\u200b EVM \u200b\u76f8\u7576\u200b\uff0c\u200b\u6700\u200b\u91cd\u8981\u200b\u7684\u200b\u662f\u200b\u4ee5\u592a\u200b\u574a\u200b\u3002</p> <p>EVM \u200b\u548c\u200b Cosmos \u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u4e4b\u9593\u200b\u7684\u200b\u4e3b\u8981\u200b\u5340\u5225\u200b\u5728\u200b\u65bc\u200b\uff0cEVM \u200b\u70ba\u200b\u6bcf\u500b\u200b\u64cd\u4f5c\u200b\u78bc\u200b\u4f7f\u7528\u200b\u4e00\u500b\u200b gas table\uff0c\u200b\u800c\u200b Cosmos \u200b\u4f7f\u7528\u200b<code>GasConfig</code>\u200b\u70ba\u200b\u6bcf\u500b\u200b CRUD \u200b\u64cd\u4f5c\u200b\u6536\u53d6\u200b gas\uff0c\u200b\u65b9\u6cd5\u200b\u662f\u200b\u70ba\u200b\u8a2a\u554f\u200b\u6578\u64da\u5eab\u200b\u8a2d\u7f6e\u200b\u56fa\u5b9a\u200b\u7684\u200b\u6bcf\u5b57\u7bc0\u200b\u6210\u672c\u200b\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/3fd376bd5659f076a4dc79b644573299fd1ec1bf/store/types/gas.go#L187-L196</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u5339\u914d\u200bEVM\u200b\u6d88\u8017\u200b\u7684\u200bgas\uff0c\u200b\u5ffd\u7565\u200bSDK\u200b\u4e2d\u200b\u7684\u200bgas\u200b\u6d88\u8017\u200b\u908f\u8f2f\u200b\uff0c\u200b\u53d6\u800c\u4ee3\u4e4b\u200b\u7684\u200b\u662f\u200b\u6d88\u8017\u200b\u7684\u200bgas\u200b\u662f\u200b\u901a\u904e\u200b\u5f9e\u200b\u6d88\u606f\u200b\u4e0a\u5b9a\u200b\u7fa9\u7684\u200b\u6c23\u9ad4\u200b\u9650\u5236\u200b\u4e2d\u6e1b\u200b\u53bb\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u5269\u9918\u6c23\u9ad4\u200b\u52a0\u4e0a\u200b\u9000\u6b3e\u200b\u4f86\u8a08\u7b97\u200b\u7684\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u5ffd\u7565\u200b SDK \u200b\u7684\u200b gas \u200b\u6d88\u8017\u200b\uff0c\u200b\u6211\u5011\u5c07\u200b\u4ea4\u6613\u200b<code>GasMeter</code>\u200b\u8a08\u6578\u200b\u91cd\u7f6e\u200b\u70ba\u200b 0\uff0c\u200b\u4e26\u624b\u200b\u52d5\u5c07\u200b\u5176\u200b\u8a2d\u7f6e\u200b\u70ba\u200b EVM \u200b\u6a21\u584a\u200b\u5728\u200b\u57f7\u884c\u200b\u7d50\u675f\u200b\u6642\u200b\u8a08\u7b97\u51fa\u200b\u7684\u200b<code>gasUsed</code>\u200b\u503c\u200b\u3002</p> <p>***  <code>AnteHandler</code> ***</p> <p>Cosmos SDK <code>AnteHandler</code> \u200b\u5728\u200b\u4ea4\u6613\u200b\u57f7\u884c\u200b\u4e4b\u524d\u200b\u57f7\u884c\u200b\u57fa\u672c\u200b\u6aa2\u67e5\u200b\u3002</p> <p>\u200b\u9019\u4e9b\u200b\u6aa2\u67e5\u200b\u901a\u5e38\u200b\u662f\u200b\u7c3d\u540d\u9a57\u8b49\u200b\u3001\u200b\u4ea4\u6613\u200b\u5b57\u200b\u6bb5\u9a57\u8b49\u200b\u3001\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\u7b49\u200b\u3002</p> <p>\u200b\u95dc\u65bc\u200b gas \u200b\u6d88\u8017\u200b\u548c\u200b\u8cbb\u7528\u200b\uff0c<code>AnteHandler</code> \u200b\u6aa2\u67e5\u200b\u7528\u6236\u200b\u662f\u5426\u200b\u6709\u8db3\u5920\u200b\u7684\u200b\u9918\u984d\u200b\u4f86\u200b\u652f\u4ed8\u200b tx \u200b\u6210\u672c\u200b\uff08\u200b\u91d1\u984d\u200b\u52a0\u4e0a\u200b\u8cbb\u7528\u200b\uff09\uff0c\u200b\u4e26\u6aa2\u67e5\u200b\u6d88\u606f\u200b\u4e2d\u5b9a\u200b\u7fa9\u7684\u200b gas \u200b\u9650\u5236\u200b\u662f\u5426\u200b\u5927\u200b\u65bc\u200b\u6216\u200b\u7b49\u200b\u65bc\u200b\u8a08\u7b97\u200b\u7684\u200b\u56fa\u6709\u200b gas \u200b\u6d88\u606f\u200b\u3002</p> <p>***  Gas \u200b\u8fd4\u8fd8\u200b *** </p> <p>\u200b\u5728\u200b EVM \u200b\u4e2d\u200b\uff0cgas \u200b\u53ef\u4ee5\u200b\u5728\u200b\u57f7\u884c\u200b\u4e4b\u524d\u200b\u6307\u5b9a\u200b\u3002 \u200b\u6307\u5b9a\u200b\u7684\u200b\u5168\u90e8\u200b\u6c23\u9ad4\u200b\u5728\u200b\u57f7\u884c\u200b\u958b\u59cb\u200b\u6642\u200b\uff08\u200b\u5728\u200b<code>AnteHandler</code>\u200b\u6b65\u9a5f\u200b\u671f\u9593\u200b\uff09\u200b\u88ab\u200b\u6d88\u8017\u200b\uff0c\u200b\u5982\u679c\u200b\u57f7\u884c\u5f8c\u6709\u200b\u4efb\u4f55\u200b\u6c23\u9ad4\u200b\u5269\u9918\u200b\uff0c\u200b\u5269\u9918\u200b\u7684\u200b\u6c23\u9ad4\u200b\u5c07\u9000\u200b\u9084\u7d66\u200b\u7528\u6236\u200b\u3002</p> <p>\u200b\u6b64\u5916\u200b\uff0cEVM \u200b\u9084\u200b\u53ef\u4ee5\u200b\u5b9a\u7fa9\u8981\u200b\u8fd4\u200b\u9084\u7d66\u200b\u7528\u6236\u200b\u7684\u200b\u6c23\u9ad4\u200b\uff0c\u200b\u4f46\u200b\u9019\u4e9b\u200b\u6c23\u9ad4\u5c07\u200b\u88ab\u200b\u9650\u5236\u200b\u70ba\u200b\u6240\u7528\u200b\u6c23\u9ad4\u200b\u7684\u200b\u4e00\u5c0f\u90e8\u5206\u200b\uff0c\u200b\u5177\u9ad4\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u6240\u200b\u4f7f\u7528\u200b\u7684\u200b\u5206\u53c9\u200b/\u200b\u7248\u672c\u200b\u3002</p> <p>***  \u200b\u96f6\u200b\u624b\u7eed\u8d39\u200b\u4ea4\u6613\u200b *** </p> <p>\u200b\u5728\u200b Cosmos \u200b\u4e2d\u200b\uff0c<code>AnteHandler</code> \u200b\u4e0d\u200b\u5f37\u5236\u200b\u57f7\u884c\u200b\u6700\u4f4e\u200b gas \u200b\u50f9\u683c\u200b\uff0c\u200b\u56e0\u70ba\u200b<code>min-gas-prices</code>\u200b\u662f\u200b\u6839\u64da\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b/\u200b\u9a57\u8b49\u5668\u200b\u6aa2\u67e5\u200b\u7684\u200b\u3002</p> <p>\u200b\u63db\u53e5\u200b\u8a71\u200b\u8aaa\u200b\uff0c\u200b\u63a5\u53d7\u200b\u7684\u200b\u6700\u4f4e\u200b\u8cbb\u7528\u200b\u7531\u200b\u7db2\u7d61\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u6c7a\u5b9a\u200b\uff0c\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u70ba\u200b\u5176\u8cbb\u7528\u200b\u6307\u5b9a\u200b\u4e0d\u540c\u200b\u7684\u200b\u6700\u4f4e\u503c\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u81f3\u5c11\u200b\u6709\u200b\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b\u9858\u200b\u610f\u5728\u200b\u4ed6\u5011\u200b\u63d0\u8b70\u200b\u7684\u200b\u5340\u584a\u200b\u4e2d\u200b\u5305\u542b\u200b<code>0</code> gas price \u200b\u7684\u200b\u4ea4\u6613\u200b\uff0c\u200b\u9019\u200b\u53ef\u80fd\u200b\u5141\u8a31\u200b\u6700\u7d42\u200b\u7528\u6236\u200b\u63d0\u4ea4\u200b 0 \u200b\u8cbb\u7528\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u51fa\u200b\u65bc\u200b\u540c\u6a23\u200b\u7684\u200b\u539f\u56e0\u200b\uff0c\u200b\u5728\u200b Daodst \u200b\u4e2d\u200b\uff0c\u200b\u5c0d\u200b\u65bc\u200b<code>evm</code>\u200b\u6a21\u584a\u200b\u5b9a\u7fa9\u7684\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u4ee5\u5916\u200b\u7684\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u767c\u9001\u200b<code>0</code>\u200b\u8cbb\u7528\u200b\u7684\u200b\u4ea4\u6613\u200b\u3002</p> <p>EVM \u200b\u6a21\u584a\u200b\u4ea4\u6613\u200b\u4e0d\u80fd\u200b\u6709\u200b\u201c0\u201d\u200b\u8cbb\u7528\u200b\uff0c\u200b\u56e0\u70ba\u200b EVM \u200b\u672c\u8eab\u200b\u5c31\u200b\u9700\u8981\u200b gas\u3002</p> <p>\u200b\u6b64\u6aa2\u67e5\u200b\u7531\u200b EVM \u200b\u4e8b\u52d9\u7121\u72c0\u200b\u614b\u9a57\u8b49\u200b\uff08\u200b\u5373\u200b<code>ValidateBasic</code>\uff09\u200b\u51fd\u6578\u200b\u4ee5\u53ca\u200b Daodst \u200b\u5b9a\u7fa9\u7684\u200b\u81ea\u5b9a\u7fa9\u200b<code>AnteHandler</code>\u200b\u5b8c\u6210\u200b\u3002</p> <p>***  Gas \u200b\u9884\u4f30\u200b *** </p> <p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u500b\u200b JSON-RPC \u200b\u7aef\u9ede\u200b<code>eth_estimateGas</code>\u200b\u4f86\u200b\u5e6b\u52a9\u200b\u7528\u6236\u200b\u5728\u200b\u4ed6\u5011\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e2d\u8a2d\u200b\u7f6e\u200b\u6b63\u78ba\u200b\u7684\u200b\u6c23\u9ad4\u200b\u9650\u5236\u200b\u3002</p> <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5728\u200b Daodst \u200b\u4e2d\u5be6\u73fe\u200b\u4e86\u200b\u4e00\u500b\u200b\u7279\u5b9a\u200b\u7684\u200b\u67e5\u8a62\u200b API <code>EstimateGas</code>\u3002 \u200b\u5b83\u200b\u5c07\u91dd\u200b\u5c0d\u200b\u7576\u524d\u200b\u5340\u584a\u200b/\u200b\u72c0\u614b\u200b\u61c9\u7528\u200b\u4ea4\u6613\u200b\u4e26\u57f7\u884c\u200b\u4e8c\u200b\u9032\u5236\u200b\u641c\u7d22\u200b\u4ee5\u200b\u627e\u5230\u200b\u8fd4\u56de\u200b\u7d66\u7528\u6236\u200b\u7684\u200b\u6700\u4f73\u200b\u6c23\u9ad4\u503c\u200b\uff08\u200b\u76f8\u540c\u200b\u7684\u200b\u4ea4\u6613\u200b\u5c07\u200b\u4e00\u904d\u200b\u53c8\u200b\u4e00\u904d\u200b\u5730\u61c9\u7528\u200b\uff0c\u200b\u76f4\u5230\u200b\u6211\u5011\u200b\u627e\u5230\u200b\u5931\u6557\u200b\u524d\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6700\u5c0f\u200b\u6c23\u9ad4\u200b\uff09 .</p> <p>\u200b\u6211\u5011\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b\u4e8c\u5206\u200b\u67e5\u627e\u200b\u7684\u200b\u539f\u56e0\u200b\u662f\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200b gas \u200b\u53ef\u80fd\u200b\u9ad8\u200b\u65bc\u200b\u61c9\u7528\u200b\u4ea4\u6613\u200b\u5f8c\u200b EVM \u200b\u8fd4\u56de\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u5011\u200b\u9700\u8981\u200b\u5617\u8a66\u200b\u76f4\u5230\u200b\u627e\u5230\u200b\u6700\u200b\u512a\u503c\u200b\u3002</p> <p>\u200b\u5728\u200b\u6574\u500b\u200b\u57f7\u884c\u200b\u904e\u7a0b\u200b\u4e2d\u5c07\u200b\u4f7f\u7528\u200b\u7de9\u5b58\u200b\u4e0a\u4e0b\u6587\u200b\u4ee5\u200b\u907f\u514d\u200b\u66f4\u6539\u200b\u5728\u200b\u72c0\u614b\u200b\u4e2d\u200b\u6301\u4e45\u200b\u5316\u200b\u3002</p> <p>\u200b\u5c0d\u200b\u65bc\u200b Cosmos Tx\uff0c\u200b\u958b\u767c\u8005\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b Cosmos SDK \u200b\u7684\u200b\u3010\u200b\u4ea4\u6613\u200b\u6a21\u64ec\u200b\u3011(https://docs.cosmos.network/main/run-node/txs#simulating-a-transaction) \u200b\u4f86\u200b\u5275\u5efa\u200b\u6e96\u78ba\u200b\u7684\u200b\u9810\u4f30\u200b\u3002</p> <p>***  \u200b\u8de8\u94fe\u200b Gas \u200b\u548c\u200b \u200b\u624b\u7eed\u8d39\u200b *** </p> <p>\u200b\u5047\u8a2d\u200b\u7528\u6236\u200b\u901a\u904e\u200b IBC \u200b\u8f49\u8cec\u200b\u5c07\u4ee3\u5e63\u200b\u5f9e\u200b\u93c8\u200b A \u200b\u8f49\u79fb\u200b\u5230\u200b Daodst\uff0c\u200b\u4e26\u200b\u5e0c\u671b\u200b\u57f7\u884c\u200b Daodst \u200b\u4ea4\u6613\u200b\u2014\u2014\u200b\u4f46\u662f\u200b\uff0c\u200b\u4ed6\u5011\u200b\u6c92\u6709\u200b\u4efb\u4f55\u200b Daodst \u200b\u4ee3\u5e63\u200b\u4f86\u200b\u652f\u4ed8\u200b\u8cbb\u7528\u200b\u3002Cosmos SDK \u200b\u5f15\u5165\u200b\u4e86\u200b <code>Tips</code> \u200b\u4f86\u200b\u89e3\u6c7a\u200b\u9019\u500b\u200b\u554f\u984c\u200b\uff1b \u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4e0d\u540c\u200b\u7684\u200b\u4ee3\u5e63\u200b\u652f\u4ed8\u200b\u8cbb\u7528\u200b\u2014\u2014\u200b\u5728\u200b\u672c\u4f8b\u200b\u4e2d\u200b\uff0c\u200b\u662f\u200b\u4f86\u200b\u81ea\u93c8\u200b A \u200b\u7684\u200b\u4ee3\u5e63\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u4f7f\u7528\u200b\u5c0f\u8cbb\u200b\u652f\u4ed8\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\uff0c\u200b\u8a72\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u7c3d\u7f72\u200b\u4e00\u7b46\u200b\u4e0d\u5e36\u200b\u5c0f\u8cbb\u200b\u7684\u200b\u4ea4\u6613\u200b\uff0c\u200b\u7136\u5f8c\u5c07\u200b\u4ea4\u6613\u200b\u767c\u9001\u200b\u7d66\u8cbb\u7528\u200b\u4e2d\u7e7c\u5668\u200b\u3002   \u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u8cbb\u7528\u200b\u4e2d\u7e7c\u5668\u200b\u5c07\u4ee5\u200b\u672c\u5730\u200b\u8ca8\u5e63\u200b\uff08\u200b\u5728\u200b\u672c\u4f8b\u200b\u4e2d\u70ba\u200b dst\uff09\u200b\u652f\u4ed8\u200b\u8cbb\u7528\u200b\uff0c\u200b\u4e26\u200b\u6536\u5230\u200b\u4ed8\u6b3e\u200b\u5c0f\u8cbb\u200b\uff0c\u200b\u5145\u7576\u200b\u4e2d\u4ecb\u200b\u4ea4\u6613\u6240\u200b\u3002</p> <p>\u200b\u6709\u95dc\u200b Cosmos \u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff1a</p> <ul> <li>Cosmos \u200b\u63d0\u793a\u200b\u6587\u6a94\u200b</li> </ul> <p>***  \u200b\u4f7f\u7528\u200bDaodst CLI\u200b\u5904\u7406\u200bGas\u200b\u548c\u200b\u624b\u7eed\u8d39\u200b *** </p> <p>\u200b\u4f7f\u7528\u200b Daodst CLI \u200b\u5ba2\u6236\u200b\u7aef\u200b\u5ee3\u64ad\u200b\u4ea4\u6613\u200b\u6642\u200b\uff0c\u200b\u7528\u6236\u200b\u61c9\u200b\u8003\u616e\u200b\u53ef\u7528\u200b\u7684\u200b\u9078\u9805\u200b\u3002 \u200b\u5411\u200b\u7db2\u7d61\u200b\u767c\u9001\u200b\u4ea4\u6613\u200b\u6642\u200b\u9700\u8981\u200b\u8003\u616e\u200b\u4e09\u500b\u200b\u6a19\u8a8c\u200b\uff1a</p> <ul> <li><code>--fees</code>: \u200b\u96a8\u200b\u4ea4\u6613\u200b\u4e00\u8d77\u200b\u652f\u4ed8\u200b\u7684\u200b\u8cbb\u7528\u200b\uff1b \u200b\u4f8b\u5982\u200b\uff1a10dst\u3002 \u200b\u9ed8\u8a8d\u200b\u70ba\u200b\u6240\u200b\u9700\u8cbb\u7528\u200b\u3002</li> <li><code>--gas</code>: \u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u8a2d\u7f6e\u200b\u7684\u200b\u6c23\u9ad4\u200b\u9650\u5236\u200b\uff1b \u200b\u9ed8\u200b\u8a8d\u503c\u200b\u70ba\u200b 200000\u3002</li> <li><code>--gas-prices</code>: gas \u200b\u50f9\u683c\u4f86\u200b\u78ba\u5b9a\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\uff08\u200b\u4f8b\u5982\u200b 10dst\uff09\u3002</li> </ul> <p>\u200b\u4f46\u662f\u200b\uff0c\u200b\u4e26\u975e\u200b\u6240\u6709\u200b\u9019\u4e9b\u200b\u90fd\u200b\u9700\u8981\u200b\u5728\u200b\u6bcf\u500b\u200b\u4e8b\u52d9\u200b\u4e2d\u5b9a\u7fa9\u200b\u3002 \u200b\u6b63\u78ba\u200b\u7684\u200b\u7d44\u5408\u200b\u662f\u200b\uff1a</p> <ul> <li><code>--fees=auto</code>: \u200b\u81ea\u52d5\u200b\u4f30\u7b97\u200b\u8cbb\u7528\u200b\u548c\u200b\u6c7d\u6cb9\u200b\uff08\u200b\u8207\u200b --gas=auto \u200b\u76f8\u540c\u200b\u7684\u200b\u884c\u70ba\u200b\uff09\u3002   \u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u8207\u200b\u8cbb\u7528\u200b\u76f8\u95dc\u200b\u7684\u200b\u6a19\u8a8c\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c<code>--gas-prices</code>\u3001<code>--fees</code>\uff09\uff0c\u200b\u5247\u6703\u200b\u5f15\u767c\u200b\u932f\u8aa4\u200b</li> <li><code>--gas=auto</code>: \u200b\u8207\u200b <code>--fees=auto</code> \u200b\u76f8\u540c\u200b\u7684\u200b\u884c\u70ba\u200b\u3002   \u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u8207\u200b\u8cbb\u7528\u200b\u76f8\u95dc\u200b\u7684\u200b\u6a19\u8a8c\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c<code>--gas-prices</code>\u3001<code>--fees</code>\uff09\uff0c\u200b\u5247\u6703\u200b\u5f15\u767c\u200b\u932f\u8aa4\u200b</li> <li><code>--gas={int}</code>: \u200b\u4f7f\u7528\u200b\u6307\u5b9a\u200b\u7684\u200b\u6c23\u9ad4\u91cf\u200b\u548c\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200b\u8cbb\u7528\u200b</li> <li><code>--fees={int}{denom}</code>: \u200b\u4f7f\u7528\u200b tx \u200b\u7684\u200b\u6307\u5b9a\u200b\u8cbb\u7528\u200b\u3002 \u200b\u5c0d\u200b tx \u200b\u4f7f\u7528\u200b gas \u200b\u9ed8\u200b\u8a8d\u503c\u200b (200000)\u3002</li> <li><code>--fees={int}{denom} --gas={int}</code>: \u200b\u4f7f\u7528\u200b\u6307\u5b9a\u200b\u7684\u200b\u6c23\u9ad4\u200b\u548c\u200b\u8cbb\u7528\u200b\u3002 \u200b\u4f7f\u7528\u200b\u63d0\u4f9b\u200b\u7684\u200b\u53c3\u6578\u200b\u8a08\u7b97\u200b gas-price</li> <li><code>--gas-prices={int}{denom}</code>: \u200b\u4f7f\u7528\u200b\u63d0\u4f9b\u200b\u7684\u200b gas \u200b\u50f9\u683c\u200b\u548c\u200b\u9ed8\u8a8d\u200b gas \u200b\u91cf\u200b (200000)</li> <li><code>--gas-prices={int}{denom} --gas={int}</code>: \u200b\u4f7f\u7528\u200b\u70ba\u200b tx \u200b\u6307\u5b9a\u200b\u7684\u200b\u6c23\u9ad4\u200b\uff0c\u200b\u4e26\u200b\u4f7f\u7528\u200b\u76f8\u61c9\u200b\u7684\u200b\u53c3\u6578\u200b\u8a08\u7b97\u8cbb\u7528\u200b\u3002</li> </ul> <p>\u200b\u8b80\u8005\u200b\u61c9\u200b\u6ce8\u610f\u200b\uff0c\u200b\u524d\u200b\u5169\u500b\u200b\u9078\u9805\u200b\u70ba\u200b\u65b0\u200b\u7528\u6236\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u66f4\u200b\u53cb\u597d\u200b\u7684\u200b\u7528\u6236\u200b\u9ad4\u9a57\u200b\uff0c\u200b\u800c\u5f8c\u8005\u5247\u200b\u9069\u7528\u200b\u65bc\u200b\u66f4\u200b\u9ad8\u7d1a\u200b\u7684\u200b\u7528\u6236\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5e0c\u671b\u200b\u5c0d\u200b\u9019\u4e9b\u200b\u53c3\u6578\u200b\u6709\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u63a7\u5236\u200b\u6b0a\u200b\u3002</p> <p>\u200b\u8a72\u5718\u968a\u200b\u5f15\u5165\u200b\u4e86\u200b<code>\u200b\u81ea\u52d5\u200b</code>\u200b\u6a19\u8a8c\u200b\u9078\u9805\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u81ea\u52d5\u200b\u8a08\u7b97\u200b\u57f7\u884c\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200b\u6c7d\u6cb9\u200b\u548c\u200b\u8cbb\u7528\u200b\u3002\u200b\u901a\u904e\u200b\u9019\u7a2e\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u65b0\u7528\u6236\u200b\u6216\u200b\u958b\u200b\u767c\u4eba\u54e1\u200b\u53ef\u4ee5\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u800c\u200b\u7121\u200b\u9700\u5b9a\u7fa9\u200b\u7279\u5b9a\u200b\u7684\u200b gas \u200b\u548c\u200b\u8cbb\u7528\u503c\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b <code>auto</code> \u200b\u6a19\u8a8c\u200b\u6709\u200b\u6642\u200b\u53ef\u80fd\u200b\u7121\u6cd5\u200b\u6839\u64da\u200b\u7db2\u7d61\u200b\u6d41\u91cf\u200b\u4f30\u7b97\u200b\u6b63\u78ba\u200b\u7684\u200b gas \u200b\u548c\u200b\u8cbb\u7528\u200b\u3002 \u200b\u70ba\u200b\u4e86\u200b\u514b\u670d\u200b\u9019\u500b\u200b\u554f\u984c\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u70ba\u200b <code>--gas-adjustment</code> \u200b\u6a19\u8a8c\u200b\u4f7f\u7528\u200b\u66f4\u200b\u9ad8\u200b\u7684\u200b\u503c\u200b\u3002 \u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u5b83\u200b\u8a2d\u7f6e\u200b\u70ba\u200b<code>1.2</code>\u3002 \u200b\u7576\u4f30\u200b\u8a08\u503c\u200b\u4e0d\u8db3\u200b\u6642\u200b\uff0c\u200b\u91cd\u8a66\u200b\u66f4\u200b\u9ad8\u200b\u7684\u200b gas \u200b\u8abf\u6574\u200b\uff0c\u200b\u4f8b\u5982\u200b <code>--gas-adjustment 1.3</code>\u3002</p> <p>\u200b\u4e0d\u80fd\u200b\u7d50\u5408\u200b\u4f7f\u7528\u200b <code>--gas-prices</code> \u200b\u548c\u200b <code>--fees</code> \u200b\u6a19\u8a8c\u200b\u3002 \u200b\u5982\u679c\u200b\u662f\u200b\u9019\u6a23\u200b\uff0c\u200b\u7528\u6236\u5c07\u200b\u6536\u5230\u200b\u4e00\u689d\u200b\u932f\u8aa4\u200b\u6d88\u606f\u200b\uff0c\u200b\u6307\u51fa\u200b\u7121\u6cd5\u200b\u540c\u6642\u200b\u63d0\u4f9b\u200b\u8cbb\u7528\u200b\u548c\u200b\u6c7d\u6cb9\u200b\u50f9\u683c\u200b\u3002</p> <p>\u200b\u8acb\u200b\u8a18\u4f4f\u200b\uff0c\u200b\u5982\u679c\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8cbb\u7528\u200b\u6216\u200b\u6c7d\u6cb9\u200b\u91cf\u200b\u4e0d\u8db3\u200b\uff0c\u200b\u4e0a\u8ff0\u200b\u7d44\u5408\u200b\u53ef\u80fd\u200b\u6703\u200b\u5931\u6557\u200b\u3002 \u200b\u5982\u679c\u200b\u662f\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\uff0cCLI \u200b\u5c07\u200b\u8fd4\u56de\u200b\u4e00\u689d\u200b\u5305\u542b\u200b\u7279\u5b9a\u200b\u539f\u56e0\u200b\u7684\u200b\u932f\u8aa4\u200b\u6d88\u606f\u200b\u3002 \u200b\u4f8b\u5982\u200b\uff1a</p> <pre><code>raw_log: 'out of gas in location: submit proposal; gasWanted: 200000, gasUsed: 263940.\n  Please retry with a gas (--gas flag) amount higher than gasUsed: out of gas'\n</code></pre>"},{"location":"protocol/#_14","title":"\u5bc6\u9470\u200b\u7ba1\u7406","text":"<p>A mnemonic phrase, also known as a seed phrase, is a set of words used to recover or restore a cryptocurrency wallet. It acts as a backup to access your digital assets in case you lose access to the original wallet. The phrase is typically a series of 12-24 words that are generated when you create a wallet, and it should be kept secure and  private.</p> <p>The importance of mnemonic phrases lies in the fact that cryptocurrencies are stored in a decentralized manner, meaning that there is no central authority or institution that holds or controls your funds. This means that if you lose access to your wallet (e.g. forget your password, lose your device), you will not be able to recover your funds without the mnemonic phrase.</p> <p>Therefore, it is crucial to store your mnemonic phrase in a safe and secure place, such as a physical paper or a secure digital file. Additionally, it is recommended to make multiple copies and store them in different locations, so that you can access your funds in case of any emergency.</p> <p>:::note \u200b\u52a9\u8a18\u200b\u7b26\u77ed\u8a9e\u200b\u8207\u200b\u79c1\u200b\u9470\u200b A seed phrase, also known as a recovery phrase or backup phrase, is a sequence of words used to generate a private key. It is typically a set of 12 or 24 words, and it's used to recover or restore access to a cryptocurrency wallet in case the original private key is lost or damaged. A seed phrase can be used to generate multiple private keys, which can be used to access multiple cryptocurrency addresses and balances.</p> <p>On the other hand, a private key is a long string of characters that is used to sign transactions and provide access to your cryptocurrency funds. The private key is generated from the seed phrase and is unique to each cryptocurrency address. It is used to create digital signatures for transactions, which ensure that the transaction is legitimate and has been authorized by the rightful owner of the funds.</p> <p>In conclusion, the security of your private keys and mnemonic phrase is of utmost importance. If your private keys  are compromised, it can put all associated accounts at risk. However, the loss of your mnemonic phrase can have  even more severe consequences as it is used to generate multiple private keys. Therefore, it is crucial to take   proper measures to safeguard both your private keys and mnemonic phrase to avoid any catastrophic loss.</p> <p>:::</p> <p>** Daodst CLI\u200b\u4e2d\u200b\u7684\u200b\u52a9\u200b\u8a18\u7b26\u200b **</p> <p>:::note Before proceeding with the CLI, please insure you have <code>stcd</code> installed. Installation instruction are located  :::</p> <p>When you create a new key, you'll receive a mnemonic phrase that can be used to restore that key. Backup the mnemonic phrase:</p> <pre><code>stcd keys add dev0\n{\n  \"name\": \"dev0\",\n  \"type\": \"local\",\n  \"address\": \"dst1n253dl2tgyhxjm592p580c38r4dn8023ctv28d\",\n  \"pubkey\": '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"ArJhve4v5HkLm+F7ViASU/rAGx7YrwU4+XKV2MNJt+Cq\"}',\n  \"mnemonic\": \"\"\n}\n\n**Important** write this mnemonic phrase in a safe place.\nIt is the only way to recover your account if you ever forget your password.\n\n# &lt;24 word mnemonic phrase&gt;\n</code></pre> <p>To restore the key:</p> <pre><code>$ stcd keys add dev0-restored --recover\n&gt; Enter your bip39 mnemonic\nbanner genuine height east ghost oak toward reflect asset marble else explain foster car nest make van divide twice culture announce shuffle net peanut\n{\n  \"name\": \"dev0-restored\",\n  \"type\": \"local\",\n  \"address\": \"dst1n253dl2tgyhxjm592p580c38r4dn8023ctv28d\",\n  \"pubkey\": '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"ArJhve4v5HkLm+F7ViASU/rAGx7YrwU4+XKV2MNJt+Cq\"}'\n}\n</code></pre>"},{"location":"protocol/#_15","title":"\u5bc6\u200b\u9470\u5c0e\u51fa","text":"<p>** Tendermint-\u200b\u79c1\u9470\u200b\u683c\u5f0f\u200b **</p> <p>To backup this type of key without the mnemonic phrase, do the following:</p> <pre><code>stcd keys export dev0\nEnter passphrase to decrypt your key:\nEnter passphrase to encrypt the exported key:\n-----BEGIN TENDERMINT PRIVATE KEY-----\nkdf: bcrypt\nsalt: 14559BB13D881A86E0F4D3872B8B2C82\ntype: secp256k1\n\n# &lt;Tendermint private key&gt;\n-----END TENDERMINT PRIVATE KEY-----\n\n$ echo \"\\\n-----BEGIN TENDERMINT PRIVATE KEY-----\nkdf: bcrypt\nsalt: 14559BB13D881A86E0F4D3872B8B2C82\ntype: secp256k1\n\n# &lt;Tendermint private key&gt;\n-----END TENDERMINT PRIVATE KEY-----\" &gt; dev0.export\n</code></pre> <p>** Ethereum-\u200b\u79c1\u9470\u200b\u683c\u5f0f\u200b **</p> <p>:::tip Note: These types of keys are MetaMask-compatible. :::</p> <p>To backup this type of key without the mnemonic phrase, do the following:</p> <pre><code>stcd keys unsafe-export-eth-key dev0 &gt; dev0.export\n**WARNING** this is an unsafe way to export your unencrypted private key, are you sure? [y/N]: y\nEnter keyring passphrase:\n</code></pre>"},{"location":"protocol/#_16","title":"\u5bc6\u200b\u9470\u5c0e\u5165","text":"<p>** Tendermint-\u200b\u79c1\u9470\u200b\u683c\u5f0f\u200b **s</p> <pre><code>$ stcd keys import dev0-imported ./dev0.export\nEnter passphrase to decrypt your key:\n</code></pre> <p>** Ethereum-\u200b\u79c1\u9470\u200b\u683c\u5f0f\u200b **</p> <pre><code>$ stcd keys unsafe-import-eth-key dev0-imported ./dev0.export\nEnter passphrase to encrypt your key:\n</code></pre>"},{"location":"protocol/#_17","title":"\u9a57\u8b49","text":"<p>Verify that your key has been restored using the following command:</p> <pre><code>$ stcd keys list\n[\n  {\n    \"name\": \"dev0-imported\",\n    \"type\": \"local\",\n    \"address\": \"dst1n253dl2tgyhxjm592p580c38r4dn8023ctv28d\",\n    \"pubkey\": '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"ArJhve4v5HkLm+F7ViASU/rAGx7YrwU4+XKV2MNJt+Cq\"}'\n  },\n  {\n    \"name\": \"dev0-restored\",\n    \"type\": \"local\",\n    \"address\": \"dst1n253dl2tgyhxjm592p580c38r4dn8023ctv28d\",\n    \"pubkey\": '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"ArJhve4v5HkLm+F7ViASU/rAGx7YrwU4+XKV2MNJt+Cq\"}'\n  },\n  {\n    \"name\": \"dev0\",\n    \"type\": \"local\",\n    \"address\": \"dst1n253dl2tgyhxjm592p580c38r4dn8023ctv28d\",\n    \"pubkey\": '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"ArJhve4v5HkLm+F7ViASU/rAGx7YrwU4+XKV2MNJt+Cq\"}'\n  }\n]\n</code></pre>"},{"location":"protocol/#_18","title":"\u5c0e\u5165\u200b/\u200b\u5c0e\u51fa\u200b \u200b\u72c0\u614b","text":"<p>Daodst can dump the entire application state to a JSON file. This, besides upgrades, can be useful for manual analysis of the state at a given height.</p>"},{"location":"protocol/#_19","title":"\u5c0e\u51fa\u200b\u72c0\u614b","text":"<p>Export state with:</p> <pre><code>stcd export &gt; new_genesis.json\n</code></pre> <p>You can also export state from a particular height (at the end of processing the block of that height):</p> <pre><code>stcd export --height [height] &gt; new_genesis.json\n</code></pre> <p>If you plan to start a new network for 0 height (i.e genesis) from the exported state, export with the <code>--for-zero-height</code> flag:</p> <pre><code>stcd export --height [height] --for-zero-height &gt; new_genesis.json\n</code></pre>"},{"location":"protocol/#_20","title":"\u624b\u52d5\u200b\u9077\u79fb\u200b\u72c0\u614b","text":"<p>If you want to migrate state manually, e.g. for local testing purpose. Note that for regular chain upgrades, a manual state migration is not required.</p> <p>After exporting your state into a json file, you can replace the old <code>genesis.json</code> with <code>new_genesis.json</code>.</p> <pre><code>cp -f genesis.json new_genesis.json\nmv new_genesis.json genesis.json\n</code></pre> <p>At this point, you might want to run a script to update the exported genesis into a genesis state that is compatible with your new version.</p> <p>You can use the <code>migrate</code> command to migrate from a given version to the next one (eg: <code>v0.X.X</code> to <code>v1.X.X</code>):</p> <pre><code>stcd migrate TARGET_VERSION GENESIS_FILE --chain-id=&lt;new_chain_id&gt; --genesis-time=&lt;yyyy-mm-ddThh:mm:ssZ&gt;\n</code></pre>"},{"location":"protocol/#_21","title":"\u591a\u7c3d","text":"<p>Learn how to generate, sign and broadcast a transaction using the keyring multisig.</p> <p>A multisig account is an Daodst account with a special key that can require more than one signature to sign transactions. This can be useful for increasing the security of the account or for requiring the consent of multiple parties to make transactions. Multisig accounts can be created by specifying:</p> <ul> <li>threshold number of signatures required</li> <li>the public keys involved in signing</li> </ul> <p>To sign with a multisig account, the transaction must be signed individually by the different keys specified for the account. Then, the signatures will be combined into a multi-signature which can be used to sign the transaction. If fewer than the threshold number of signatures needed are present, the resultant multi-signature is considered invalid.</p>"},{"location":"protocol/#_22","title":"\u751f\u6210\u200b\u591a\u200b\u7c3d\u5bc6\u200b\u9470\u200b\u5c0d","text":"<pre><code>stcd keys add --multisig=name1,name2,name3[...] --multisig-threshold=K new_key_name\n</code></pre> <p><code>K</code> is the minimum number of private keys that must have signed the transactions that carry the public key's address as signer.</p> <p>The <code>--multisig</code> flag must contain the name of public keys that will be combined into a public key that will be generated and stored as <code>new_key_name</code> in the local database. All names supplied through <code>--multisig</code> must already exist  in the local database.</p> <p>Unless the flag <code>--nosort</code> is set, the order in which the keys are supplied on the command line does not matter, i.e. the  following commands generate two identical keys:</p> <pre><code>stcd keys add --multisig=p1,p2,p3 --multisig-threshold=2 multisig_address\nstcd keys add --multisig=p2,p3,p1 --multisig-threshold=2 multisig_address\n</code></pre> <p>Multisig addresses can also be generated on-the-fly and printed through the which command:</p> <pre><code>stcd keys show --multisig-threshold=K name1 name2 name3 [...]\n</code></pre>"},{"location":"protocol/#_23","title":"\u7c3d\u540d\u200b\u4ea4\u6613","text":"<p>** Step 1: \u200b\u521b\u5efa\u200b\u591a\u7b7e\u200b\u5bc6\u94a5\u200b **</p> <p>Let's assume that you have <code>test1</code> and <code>test2</code> want to make a multisig account with <code>test3</code>.</p> <p>First import the public keys of <code>test3</code> into your keyring.</p> <pre><code>stcd keys add \\\n    test3 \\\n    --pubkey=dstpub1addwnpepqgcxazmq6wgt2j4rdfumsfwla0zfk8e5sws3p3zg5dkm9007hmfysxas0u2\n</code></pre> <p>Generate the multisig key with 2/3 threshold.</p> <pre><code>stcd keys add \\\n    multi \\\n    --multisig=test1,test2,test3 \\\n    --multisig-threshold=2\n</code></pre> <p>You can see its address and details:</p> <pre><code>stcd keys show multi\n\n- name: multi\n  type: multi\n  address: dst1e0fx0q9meawrcq7fmma9x60gk35lpr4xk3884m\n  pubkey: dstpub1ytql0csgqgfzd666axrjzq3mxw59ys6yqcd3ydjvhgs0uzs6kdk5fp4t73gmkl8t6y02yfq7tvfzd666axrjzq3sd69kp5usk492x6nehqjal67ynv0nfqapzrzy3gmdk27la0kjfqfzd666axrjzq6utqt639ka2j3xkncgk65dup06t297ccljmxhvhu3rmk92u3afjuyz9dg9\n  mnemonic: \"\"\n  threshold: 0\n  pubkeys: []\n</code></pre> <p>Let's add 10 dst to the multisig wallet:</p> <pre><code>stcd tx bank send \\\n    test1 \\\n    dst1e0fx0q9meawrcq7fmma9x60gk35lpr4xk3884m \\\n    10000000000000000000adst \\\n    --chain-id=daodst_7000-4 \\\n    --gas=auto \\\n    --fees=1000000adst \\\n    --broadcast-mode=block\n</code></pre> <p>** Step 2: \u200b\u5275\u5efa\u591a\u7c3d\u200b\u4ea4\u6613\u200b **</p> <p>We want to send 5 dst from our multisig account to <code>dst1rgjxswhuxhcrhmyxlval0qa70vxwvqn2e0srft</code>.</p> <pre><code>stcd tx bank send \\\n    dst1rgjxswhuxhcrhmyxlval0qa70vxwvqn2e0srft \\\n    dst157g6rn6t6k5rl0dl57zha2wx72t633axqyvvwq \\\n    5000000000000000000dst \\\n    --gas=200000 \\\n    --fees=1000000dst \\\n    --chain-id=daodst_7000-4 \\\n    --generate-only &gt; unsignedTx.json\n</code></pre> <p>The file <code>unsignedTx.json</code> contains the unsigned transaction encoded in JSON.</p> <pre><code>{\n  \"body\": {\n    \"messages\": [\n      {\n        \"@type\": \"/cosmos.bank.v1beta1.MsgSend\",\n        \"from_address\": \"dst1rgjxswhuxhcrhmyxlval0qa70vxwvqn2e0srft\",\n        \"to_address\": \"dst157g6rn6t6k5rl0dl57zha2wx72t633axqyvvwq\",\n        \"amount\": [\n          {\n            \"denom\": \"dst\",\n            \"amount\": \"5000000000000000000\"\n          }\n        ]\n      }\n    ],\n    \"memo\": \"\",\n    \"timeout_height\": \"0\",\n    \"extension_options\": [],\n    \"non_critical_extension_options\": []\n  },\n  \"auth_info\": {\n    \"signer_infos\": [],\n    \"fee\": {\n      \"amount\": [\n        {\n          \"denom\": \"dst\",\n          \"amount\": \"1000000\"\n        }\n      ],\n      \"gas_limit\": \"200000\",\n      \"payer\": \"\",\n      \"granter\": \"\"\n    }\n  },\n  \"signatures\": []\n}\n</code></pre> <p>** Step 3: \u200b\u55ae\u7368\u200b\u7c3d\u540d\u200b **</p> <p>Sign with <code>test1</code> and <code>test2</code> and create individual signatures.</p> <pre><code>stcd tx sign \\\n    unsignedTx.json \\\n    --multisig=dst1e0fx0q9meawrcq7fmma9x60gk35lpr4xk3884m \\\n    --from=test1 \\\n    --output-document=test1sig.json \\\n    --chain-id=daodst_7000-4\n</code></pre> <pre><code>stcd tx sign \\\n    unsignedTx.json \\\n    --multisig=dst1e0fx0q9meawrcq7fmma9x60gk35lpr4xk3884m \\\n    --from=test2 \\\n    --output-document=test2sig.json \\\n    --chain-id=daodst_7000-4\n</code></pre> <p>** Step 4: \u200b\u5275\u5efa\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b **</p> <p>Combine signatures to sign transaction.</p> <pre><code>stcd tx multisign \\\n    unsignedTx.json \\\n    multi \\\n    test1sig.json test2sig.json \\\n    --output-document=signedTx.json \\\n    --chain-id=daodst_7000-4\n</code></pre> <p>The TX is now signed:</p> <pre><code>{\n  \"body\": {\n    \"messages\": [\n      {\n        \"@type\": \"/cosmos.bank.v1beta1.MsgSend\",\n        \"from_address\": \"dst1rgjxswhuxhcrhmyxlval0qa70vxwvqn2e0srft\",\n        \"to_address\": \"dst157g6rn6t6k5rl0dl57zha2wx72t633axqyvvwq\",\n        \"amount\": [\n          {\n            \"denom\": \"dst\",\n            \"amount\": \"5000000000000000000\"\n          }\n        ]\n      }\n    ],\n    \"memo\": \"\",\n    \"timeout_height\": \"0\",\n    \"extension_options\": [],\n    \"non_critical_extension_options\": []\n  },\n  \"auth_info\": {\n    \"signer_infos\": [\n      {\n        \"public_key\": {\n          \"@type\": \"/cosmos.crypto.multisig.LegacyAminoPubKey\",\n          \"threshold\": 2,\n          \"public_keys\": [\n            {\n              \"@type\": \"/cosmos.crypto.secp256k1.PubKey\",\n              \"key\": \"ApCzSG8k7Tr4aM6e4OJRExN7cNtvH21L9azbh+uRrvt4\"\n            },\n            {\n              \"@type\": \"/cosmos.crypto.secp256k1.PubKey\",\n              \"key\": \"Ah91erz8ChNanqLe9ea948rvAiXMCRlR5Ka7EE/c0xUK\"\n            },\n            {\n              \"@type\": \"/cosmos.crypto.secp256k1.PubKey\",\n              \"key\": \"A0OjtIUCFJM3AobJ9HJTWKP9RZV2+WPcwVjLgsAidrZ/\"\n            }\n          ]\n        },\n        \"mode_info\": {\n          \"multi\": {\n            \"bitarray\": {\n              \"extra_bits_stored\": 3,\n              \"elems\": \"wA==\"\n            },\n            \"mode_infos\": [\n              {\n                \"single\": {\n                  \"mode\": \"SIGN_MODE_LEGACY_AMINO_JSON\"\n                }\n              },\n              {\n                \"single\": {\n                  \"mode\": \"SIGN_MODE_LEGACY_AMINO_JSON\"\n                }\n              }\n            ]\n          }\n        },\n        \"sequence\": \"1\"\n      }\n    ],\n    \"fee\": {\n      \"amount\": [\n        {\n          \"denom\": \"dst\",\n          \"amount\": \"1000000\"\n        }\n      ],\n      \"gas_limit\": \"200000\",\n      \"payer\": \"\",\n      \"granter\": \"\"\n    }\n  },\n  \"signatures\": [\n    \"CkCEeIbeGc+I1ipZuhp/0KhVNnWAv2tTlvgo5x61lzk1KHmLPV38m/YFurrFt5cm5+fqIXrn+FlOjrJuzBhw8ogYCkCawm9mpXsBHk0CFsE5618fVnvScEkfrzW0c2jCcjqV8EPuj3ut74UWzZyQkwtJGxUWtro9EgnGsB7Di1Gzizst\"\n  ]\n}\n</code></pre> <p>** Step 5: \u200b\u5ee3\u64ad\u200b\u4ea4\u6613\u200b **</p> <pre><code>stcd tx broadcast signedTx.json \\\n    --chain-id=daodst_7000-4 \\\n    --broadcast-mode=block\n</code></pre>"},{"location":"protocol/#pending","title":"Pending \u200b\u72c0\u614b","text":"<p>\u200b\u7576\u4e00\u7b46\u200b\u4ea4\u6613\u200b\u88ab\u200b\u63d0\u4ea4\u200b\u5230\u200b\u4ee5\u592a\u200b\u574a\u200b\u7db2\u7d61\u6642\u200b\uff0c\u200b\u5b83\u200b\u9996\u5148\u200b\u9032\u5165\u200b\u5f85\u200b\u8655\u7406\u200b\u72c0\u614b\u200b\uff0c\u200b\u7b49\u5f85\u200b\u7bc0\u9ede\u200b\u57f7\u884c\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u4ea4\u6613\u200b\u4e2d\u200b\u7684\u200b gas \u200b\u50f9\u683c\u200b\u8a2d\u7f6e\u200b\u5f97\u200b\u975e\u5e38\u4f4e\u200b\u4e26\u4e14\u200b\u7bc0\u9ede\u200b\u6b63\u5fd9\u200b\u65bc\u200b\u8655\u7406\u200b\u5176\u4ed6\u200b\u66f4\u9ad8\u200b gas \u200b\u50f9\u683c\u200b\u7684\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5247\u200b\u4ea4\u6613\u200b\u53ef\u80fd\u200b\u6703\u200b\u5728\u200b\u66f4\u9577\u200b\u7684\u200b\u6642\u9593\u200b\u5167\u8655\u200b\u65bc\u200b\u5f85\u200b\u8655\u7406\u200b\u72c0\u614b\u200b\u3002</p> <p>\u200b\u5728\u200b\u639b\u8d77\u200b\u72c0\u614b\u200b\u671f\u9593\u200b\uff0c\u200b\u5141\u8a31\u200b\u4ea4\u6613\u200b\u767c\u8d77\u8005\u200b\u96a8\u6642\u200b\u66f4\u6539\u200b\u4ea4\u6613\u200b\u5b57\u200b\u6bb5\u200b\u3002</p> <p>\u200b\u4ed6\u5011\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u767c\u9001\u200b\u5177\u6709\u200b\u76f8\u540c\u200b\u96a8\u6a5f\u6578\u200b\u7684\u200b\u53e6\u200b\u4e00\u7b46\u200b\u4ea4\u6613\u200b\u4f86\u200b\u505a\u5230\u200b\u9019\u4e00\u9ede\u200b\u3002</p> <p>** \u200b\u5148\u6c7a\u200b\u689d\u4ef6\u200b\u95b1\u8b80\u200b **</p> <ul> <li>Cosmos SDK Mempool</li> </ul> <p>** Daodst \u200b\u5c0d\u200b\u6bd4\u200b Ethereum **</p> <p>\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e2d\u200b\uff0c\u200b\u5f85\u200b\u8655\u7406\u200b\u7684\u200b\u5340\u584a\u200b\u662f\u200b\u5728\u200b\u7926\u5de5\u200b\u6392\u968a\u200b\u7b49\u5f85\u200b\u751f\u7522\u6642\u200b\u751f\u6210\u200b\u7684\u200b\u3002</p> <p>\u200b\u9019\u4e9b\u200b\u672a\u200b\u6c7a\u5340\u200b\u584a\u200b\u5305\u62ec\u200b\u7926\u5de5\u200b\u6839\u64da\u200b\u652f\u4ed8\u200b\u7684\u200b\u6700\u9ad8\u200b gas \u200b\u734e\u52f5\u200b\u6311\u9078\u51fa\u200b\u7684\u200b\u672a\u6c7a\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u9019\u7a2e\u200b\u6a5f\u5236\u200b\u7684\u200b\u5b58\u5728\u200b\u662f\u200b\u56e0\u70ba\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u200b\u7db2\u7d61\u200b\u4e0a\u200b\u4e0d\u200b\u53ef\u80fd\u200b\u5be6\u73fe\u200b\u5340\u584a\u200b\u6700\u200b\u7d42\u6027\u200b\u3002</p> <p>\u200b\u584a\u200b\u4ee5\u200b\u6982\u7387\u200b\u78ba\u200b\u5b9a\u6027\u200b\u63d0\u4ea4\u200b\uff0c\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u96a8\u8457\u200b\u6642\u9593\u200b\uff08\u200b\u548c\u200b\u584a\u200b\uff09\u200b\u7684\u200b\u6d41\u901d\u200b\uff0c\u200b\u4ea4\u6613\u200b\u548c\u200b\u584a\u200b\u8b8a\u5f97\u200b\u4e0d\u592a\u53ef\u80fd\u200b\u88ab\u200b\u9084\u539f\u200b\u3002</p> <p>Daodst \u200b\u5728\u200b\u9019\u200b\u65b9\u9762\u200b\u7684\u200b\u8a2d\u8a08\u200b\u5b8c\u5168\u200b\u4e0d\u540c\u200b\uff0c\u200b\u56e0\u70ba\u200b\u6c92\u6709\u200b\u201c\u200b\u5f85\u5b9a\u200b\u72c0\u614b\u200b\u201d\u200b\u7684\u200b\u6982\u5ff5\u200b\u3002</p> <p>Daodst \u200b\u4f7f\u7528\u200b Tendermint Core BFT \u200b\u5171\u8b58\u200b\uff0c\u200b\u70ba\u200b\u4ea4\u6613\u200b\u63d0\u4f9b\u200b\u5373\u200b\u6642\u7d42\u200b\u7d50\u6027\u200b\u3002</p> <p>\u200b\u51fa\u200b\u65bc\u200b\u9019\u500b\u200b\u539f\u56e0\u200b\uff0cEthermint \u200b\u4e0d\u200b\u9700\u8981\u200b\u639b\u8d77\u200b\u72c0\u614b\u200b\u6a5f\u5236\u200b\uff0c\u200b\u56e0\u70ba\u200b\u6240\u6709\u200b\uff08\u200b\u5982\u679c\u200b\u4e0d\u662f\u200b\u5927\u591a\u200b\u6578\u200b\uff09\u200b\u4ea4\u6613\u200b\u90fd\u5c07\u200b\u63d0\u4ea4\u200b\u5230\u200b\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\uff08Cosmos \u200b\u93c8\u4e0a\u200b\u7684\u200b\u5e73\u5747\u200b\u5340\u584a\u200b\u6642\u9593\u200b\u7d04\u200b\u70ba\u200b 8 \u200b\u79d2\u200b\uff09\u3002</p> <p>\u200b\u7136\u800c\u200b\uff0c\u200b\u9019\u6703\u200b\u5c0e\u81f4\u200b\u4e00\u4e9b\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b Web3 \u200b\u517c\u5bb9\u200b\u7684\u200b\u67e5\u8a62\u200b\u51fa\u73fe\u200b\u554f\u984c\u200b\uff0c\u200b\u9019\u4e9b\u200b\u67e5\u8a62\u200b\u53ef\u80fd\u200b\u6703\u200b\u9032\u5165\u200b\u639b\u8d77\u200b\u72c0\u614b\u200b\u3002</p> <p>\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b\u53e6\u200b\u4e00\u500b\u200b\u986f\u8457\u5340\u200b\u5225\u200b\u662f\u200b\uff0c\u200b\u5340\u584a\u200b\u662f\u200b\u7531\u9a57\u200b\u8b49\u8005\u200b\u6216\u5340\u200b\u584a\u200b\u751f\u7522\u8005\u200b\u751f\u6210\u200b\u7684\u200b\uff0c\u200b\u4ed6\u5011\u200b\u4ee5\u200b\u5148\u9032\u200b\u5148\u51fa\u200b (FIFO) \u200b\u7684\u200b\u65b9\u5f0f\u200b\u5c07\u200b\u672c\u5730\u200b\u5167\u5b58\u6c60\u200b\u4e2d\u200b\u7684\u200b\u4ea4\u6613\u200b\u5305\u542b\u200b\u5230\u5340\u200b\u584a\u200b\u4e2d\u200b\u3002</p> <p>Daodst \u200b\u4e0a\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e0d\u80fd\u200b\u5f9e\u200b Tendermint \u200b\u7bc0\u9ede\u200b mempool \u200b\u4e2d\u200b\u6392\u5e8f\u200b\u6216\u200b\u6311\u9078\u51fa\u200b\u4f86\u200b\u3002</p> <p>** Pending \u200b\u72c0\u614b\u200b\u968a\u5217\u200b **</p> <p>Daodst \u200b\u5c07\u9032\u884c\u200b\u67e5\u8a62\u200b\uff0c\u200b\u4ee5\u200b\u8aaa\u200b\u660e\u7bc0\u9ede\u200b\u4ea4\u6613\u200b\u5167\u5b58\u6c60\u200b\u4e2d\u200b\u5b58\u5728\u200b\u7684\u200b\u4efb\u4f55\u200b\u672a\u200b\u78ba\u8a8d\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u9032\u884c\u200b\u7684\u200b\u639b\u8d77\u200b\u72c0\u614b\u200b\u67e5\u8a62\u200b\u5c07\u662f\u200b\u4e3b\u89c0\u200b\u7684\u200b\uff0c\u200b\u4e26\u4e14\u200b\u5c07\u5728\u200b\u76ee\u6a19\u200b\u7bc0\u9ede\u200b\u7684\u200b\u5167\u5b58\u200b\u6c60\u4e0a\u200b\u9032\u884c\u200b\u67e5\u8a62\u200b\u3002</p> <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5c0d\u200b\u65bc\u200b\u5169\u500b\u200b\u4e0d\u540c\u200b\u7bc0\u9ede\u200b\u7684\u200b\u76f8\u540c\u200b\u67e5\u8a62\u200b\uff0c\u200b\u639b\u8d77\u200b\u72c0\u614b\u5c07\u200b\u4e0d\u200b\u76f8\u540c\u200b\u3002</p> <p>** JSON-RPC Calls on Pending Transactions **</p> <ul> <li><code>eth_getBalance</code></li> <li><code>eth_getTransactionCount</code></li> <li><code>eth_getBlockTransactionCountByNumber</code></li> <li><code>eth_getBlockByNumber</code></li> <li><code>eth_getTransactionByHash</code></li> <li><code>eth_getTransactionByBlockNumberAndIndex</code></li> <li><code>eth_sendTransaction</code></li> </ul>"},{"location":"protocol/#_24","title":"\u4ee3\u5e63","text":""},{"location":"protocol/#daodst_1","title":"Daodst \u200b\u4ee3\u5e63","text":"<p>EVM \u200b\u4e0a\u7528\u200b\u65bc\u200b\u8cea\u62bc\u200b\u3001\u200b\u6cbb\u7406\u200b\u548c\u200b\u6c23\u9ad4\u200b\u6d88\u8017\u200b\u7684\u200b\u9762\u984d\u200b\u662f\u200b DST\u3002 Daodst \u200b\u63d0\u4f9b\u200b\u4ee5\u4e0b\u200b\u5be6\u7528\u200b\u7a0b\u5e8f\u200b\uff1a\u200b\u4fdd\u8b77\u200b\u6b0a\u76ca\u200b\u8b49\u660e\u93c8\u200b\u3001\u200b\u7528\u200b\u65bc\u200b\u6cbb\u7406\u200b\u5efa\u8b70\u200b\u7684\u200b\u4ee3\u5e63\u200b\u3001\u200b\u5411\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u7528\u6236\u200b\u5206\u914d\u200b\u8cbb\u7528\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4f5c\u70ba\u200b\u5728\u200b EVM \u200b\u4e0a\u904b\u884c\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u7684\u200b\u71c3\u6599\u200b\u3002</p> <p>Daodst \u200b\u4f7f\u7528\u200b Atto DST \u200b\u4f5c\u70ba\u200b\u57fa\u790e\u200b\u9762\u984d\u200b\u4ee5\u200b\u4fdd\u6301\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b\u5c0d\u200b\u7b49\u200b\u3002 \u200b\u8cc7\u7522\u5206\u200b\u70ba\u200b\u4e09\u985e\u200b\uff1a</p> <ul> <li>\u200b\u539f\u751f\u200b DST \u200b\u4ee3\u5e63\u200b</li> <li>IBC\u200b\u4ee3\u5e63\u200b\uff08\u200b\u901a\u904e\u200b IBC\uff09</li> <li>\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u7684\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u4f8b\u5982\u200b ERC-20</li> </ul> <p>\u200b\u9019\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b\u9762\u984d\u200b\u76f8\u5339\u914d\u200b\uff1a</p> <p><code>1 ETH = 10&lt;sup&gt;18&lt;/sup&gt; wei</code></p>"},{"location":"protocol/#cosmos","title":"Cosmos \u200b\u4ee3\u5e63","text":"<p>\u200b\u8cec\u6236\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5176\u9918\u984d\u200b\u4e2d\u200b\u64c1\u6709\u200b Cosmos \u200b\u5e63\u200b\uff0c\u200b\u9019\u4e9b\u200b\u5e63\u7528\u200b\u65bc\u200b\u8207\u200b\u5176\u4ed6\u200b Cosmos \u200b\u7684\u200b\u64cd\u4f5c\u200b\u548c\u200b\u4ea4\u6613\u200b\u3002 \u200b\u9019\u4e9b\u200b\u4f8b\u5b50\u200b\u5305\u62ec\u200b\u4f7f\u7528\u200b\u4ee3\u5e63\u200b\u9032\u884c\u8cea\u200b\u62bc\u200b\u3001IBC \u200b\u8f49\u8cec\u200b\u3001\u200b\u6cbb\u7406\u200b\u5b58\u6b3e\u200b\u548c\u200b EVM\u3002</p>"},{"location":"protocol/#evm","title":"EVM \u200b\u4ee3\u5e63","text":"<p>Daodst \u200b\u8207\u200b ERC20 \u200b\u4ee3\u5e63\u200b\u548c\u200b EVM \u200b\u539f\u751f\u200b\u652f\u6301\u200b\u7684\u200b\u5176\u4ed6\u200b\u4e0d\u53ef\u200b\u66ff\u4ee3\u200b\u4ee3\u5e63\u200b\u6a19\u6e96\u200b\uff08EIP721\u3001EIP1155\uff09\u200b\u517c\u5bb9\u200b\u3002</p> <p>**  Daodst \u200b\u8cc7\u7522\u9801\u200b **</p> <p>Daodst \u200b\u5100\u8868\u677f\u200b\u4e0a\u200b\u7684\u200b\u529f\u80fd\u200b\u3002</p> <p>Daodst \u200b\u555f\u7528\u200b\u6b64\u200b\u529f\u80fd\u200b\uff0c\u200b\u901a\u904e\u200b\u6df7\u6dc6\u200b\u8cc7\u7522\u985e\u200b\u578b\u200b\u9060\u96e2\u200b\u7528\u6236\u200b\u4e26\u5141\u8a31\u200b\u4ed6\u5011\u200b\u5c08\u6ce8\u200b\u65bc\u200b\u4ea4\u4e92\u200b\u4f86\u200b\u5e6b\u52a9\u200b\u6539\u5584\u200b\u7528\u6236\u200b\u9ad4\u9a57\u200b\u3002</p> <p>\u200b\u8a72\u200b\u5354\u8b70\u200b\u901a\u904e\u200b\u8655\u7406\u200b\u8f49\u63db\u200b\u7c21\u5316\u200b\u4e86\u200b\u6d41\u7a0b\u200b\uff0c\u200b\u4e26\u70ba\u200b\u7528\u6236\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u7c21\u5316\u200b\u7684\u200b\u9762\u984d\u200b\u548c\u200b\u4ed6\u5011\u200b\u6301\u6709\u200b\u7684\u200b\u8cc7\u7522\u200b\u6578\u91cf\u200b\u3002</p> <p>\u200b\u6709\u95dc\u200b\u6211\u5011\u200b\u5982\u4f55\u200b\u8655\u7406\u200b\u4ee4\u724c\u200b\u8a3b\u200b\u518a\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u8a2a\u554f\u200b \u200b\u6b64\u8655\u200b\u3002</p>"},{"location":"protocol/#_25","title":"\u4ea4\u6613","text":"<p>\u200b\u4ea4\u6613\u200b\u662f\u200b\u6307\u200b\u7531\u200b\u8cec\u6236\u200b\u767c\u8d77\u200b\u7684\u200b\u6539\u8b8a\u5340\u200b\u584a\u200b\u93c8\u200b\u72c0\u614b\u200b\u7684\u200b\u52d5\u4f5c\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u6709\u6548\u200b\u5730\u200b\u57f7\u884c\u200b\u72c0\u614b\u200b\u66f4\u6539\u200b\uff0c\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u90fd\u200b\u6703\u5ee3\u200b\u64ad\u5230\u200b\u6574\u500b\u200b\u7db2\u7d61\u200b\u3002</p> <p>\u200b\u4efb\u4f55\u200b\u7bc0\u9ede\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u5ee3\u64ad\u200b\u8acb\u6c42\u200b\u5728\u200b\u5340\u584a\u200b\u93c8\u72c0\u614b\u200b\u6a5f\u4e0a\u200b\u57f7\u884c\u200b\u7684\u200b\u4ea4\u6613\u200b\uff1b</p> <p>\u200b\u767c\u751f\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u5f8c\u200b\uff0c\u200b\u9a57\u8b49\u5668\u200b\u5c07\u9a57\u8b49\u200b\u3001\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u4e26\u5c07\u200b\u7522\u751f\u200b\u7684\u200b\u72c0\u614b\u200b\u66f4\u6539\u200b\u50b3\u200b\u64ad\u5230\u200b\u7db2\u7d61\u200b\u7684\u200b\u5176\u9918\u200b\u90e8\u5206\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u8655\u7406\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\uff0c\u200b\u7db2\u7d61\u200b\u4e0a\u200b\u7684\u200b\u8a08\u7b97\u200b\u8cc7\u6e90\u200b\u90fd\u200b\u6703\u200b\u88ab\u200b\u6d88\u8017\u200b\u3002</p> <p>\u200b\u56e0\u6b64\u200b\uff0c\u201cgas\u201d\u200b\u7684\u200b\u6982\u5ff5\u200b\u662f\u200b\u4f5c\u70ba\u9a57\u200b\u8b49\u8005\u200b\u8655\u7406\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200b\u8a08\u7b97\u200b\u7684\u200b\u53c3\u8003\u200b\u800c\u200b\u51fa\u73fe\u200b\u7684\u200b\u3002</p> <p>\u200b\u7528\u6236\u200b\u5fc5\u9808\u200b\u70ba\u200b\u6b64\u8a08\u7b97\u200b\u4ed8\u8cbb\u200b\uff0c\u200b\u6240\u6709\u200b\u4ea4\u6613\u200b\u90fd\u200b\u9700\u8981\u200b\u76f8\u95dc\u200b\u8cbb\u7528\u200b\u3002</p> <p>\u200b\u8a72\u8cbb\u7528\u200b\u662f\u200b\u6839\u64da\u200b\u57f7\u884c\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200b gas \u200b\u548c\u200b gas \u200b\u50f9\u683c\u200b\u8a08\u7b97\u200b\u7684\u200b\u3002</p> <p>\u200b\u6b64\u5916\u200b\uff0c\u200b\u4ea4\u6613\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b\u767c\u9001\u65b9\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\u9032\u884c\u200b\u7c3d\u540d\u200b\u3002</p> <p>\u200b\u9019\u8b49\u660e\u200b\u4ea4\u6613\u200b\u53ea\u80fd\u200b\u4f86\u200b\u81ea\u767c\u4ef6\u200b\u4eba\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u6b3a\u8a50\u6027\u200b\u767c\u9001\u200b\u3002</p> <p>\u200b\u7c21\u200b\u800c\u8a00\u200b\u4e4b\u200b\uff0c\u200b\u5c07\u7c3d\u200b\u540d\u200b\u4ea4\u6613\u200b\u63d0\u4ea4\u200b\u5230\u200b\u7db2\u7d61\u200b\u5f8c\u200b\u7684\u200b\u4ea4\u6613\u200b\u751f\u547d\u200b\u9031\u671f\u200b\u5982\u4e0b\u200b\uff1a</p> <ul> <li>\u200b\u4ea4\u6613\u200b\u54c8\u5e0c\u200b\u662f\u200b\u52a0\u5bc6\u200b\u751f\u6210\u200b\u7684\u200b\u3002</li> <li>\u200b\u8a72\u200b\u4ea4\u6613\u200b\u88ab\u5ee3\u200b\u64ad\u5230\u200b\u7db2\u7d61\u4e26\u200b\u6dfb\u52a0\u200b\u5230\u200b\u7531\u200b\u6240\u6709\u200b\u5176\u4ed6\u200b\u672a\u6c7a\u200b\u7db2\u7d61\u200b\u4ea4\u6613\u200b\u7d44\u6210\u200b\u7684\u200b\u4ea4\u6613\u200b\u6c60\u4e2d\u200b\u3002</li> <li>\u200b\u9a57\u8b49\u8005\u200b\u5fc5\u9808\u200b\u9078\u64c7\u200b\u4f60\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e26\u5c07\u200b\u5176\u200b\u5305\u542b\u200b\u5728\u200b\u4e00\u500b\u200b\u584a\u200b\u4e2d\u200b\uff0c\u200b\u4ee5\u9a57\u8b49\u200b\u4ea4\u6613\u200b\u4e26\u8a8d\u200b\u70ba\u200b\u5b83\u200b\u201c\u200b\u6210\u529f\u200b\u201d\u3002</li> </ul> <p>\u200b\u95dc\u65bc\u200b\u4ea4\u6613\u200b\u751f\u547d\u200b\u9031\u671f\u200b\u7684\u200b\u66f4\u200b\u8a73\u7d30\u200b\u89e3\u91cb\u200b\uff0c\u200b\u8acb\u200b\u53c3\u898b\u200b\u76f8\u61c9\u200b\u90e8\u5206\u200b\u3002</p> <p>\u200b\u4ea4\u6613\u200b\u54c8\u5e0c\u200b\u662f\u200b\u4e00\u500b\u200b\u552f\u4e00\u200b\u6a19\u8b58\u7b26\u200b\uff0c\u200b\u53ef\u7528\u200b\u65bc\u200b\u6aa2\u67e5\u200b\u4ea4\u6613\u200b\u4fe1\u606f\u200b\uff0c\u200b\u4f8b\u5982\u200b\uff0c\u200b\u767c\u51fa\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u662f\u5426\u200b\u6210\u529f\u200b\u3002</p> <p>\u200b\u4ea4\u6613\u200b\u53ef\u80fd\u200b\u56e0\u200b\u5404\u7a2e\u200b\u539f\u56e0\u200b\u800c\u200b\u5931\u6557\u200b\u3002</p> <p>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u63d0\u4f9b\u200b\u7684\u200b gas \u200b\u6216\u8cbb\u7528\u200b\u53ef\u80fd\u200b\u4e0d\u8db3\u200b\u3002</p> <p>\u200b\u6b64\u5916\u200b\uff0c\u200b\u4ea4\u6613\u200b\u9a57\u8b49\u200b\u53ef\u80fd\u200b\u6703\u200b\u5931\u6557\u200b\u3002</p> <p>\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u90fd\u200b\u6709\u200b\u7279\u5b9a\u200b\u7684\u200b\u689d\u4ef6\u200b\uff0c\u200b\u5fc5\u9808\u200b\u6eff\u8db3\u200b\u9019\u4e9b\u200b\u689d\u4ef6\u200b\u624d\u80fd\u200b\u88ab\u8996\u200b\u70ba\u200b\u6709\u6548\u200b\u3002</p> <p>\u200b\u4e00\u500b\u200b\u5ee3\u6cdb\u200b\u7684\u200b\u9a57\u8b49\u200b\u662f\u200b\u767c\u9001\u8005\u200b\u662f\u200b\u4ea4\u6613\u200b\u7c3d\u540d\u8005\u200b\u3002</p> <p>\u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u5982\u679c\u200b\u60a8\u200b\u5728\u200b\u767c\u4ef6\u200b\u4eba\u200b\u5730\u5740\u200b\u8207\u200b\u7c3d\u540d\u8005\u200b\u5730\u5740\u200b\u4e0d\u540c\u200b\u7684\u200b\u5730\u65b9\u200b\u767c\u9001\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5373\u4f7f\u200b\u8cbb\u7528\u200b\u8db3\u5920\u200b\uff0c\u200b\u4ea4\u6613\u200b\u4e5f\u200b\u6703\u200b\u5931\u6557\u200b\u3002</p> <p>\u200b\u5982\u4eca\u200b\uff0c\u200b\u4ea4\u6613\u200b\u4e0d\u50c5\u200b\u53ef\u4ee5\u200b\u5728\u200b\u63d0\u4ea4\u200b\u7684\u200b\u93c8\u200b\u4e0a\u200b\u9032\u884c\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\uff0c\u200b\u9084\u200b\u53ef\u4ee5\u200b\u5728\u200b\u53e6\u200b\u4e00\u689d\u5340\u200b\u584a\u200b\u93c8\u200b\u4e0a\u200b\u9032\u884c\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u93c8\u9593\u200b\u4ea4\u6613\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b \u200b\u5340\u584a\u200b\u93c8\u9593\u200b\u901a\u4fe1\u200b\u5354\u8b70\u200b (IBC) \u200b\u5be6\u73fe\u200b\u3002</p> <p>\u200b\u5728\u200b\u4e0b\u9762\u200b\u7684\u200b\u90e8\u5206\u200b\u4e2d\u200b\u627e\u5230\u200b\u66f4\u200b\u8a73\u7d30\u200b\u7684\u200b\u89e3\u91cb\u200b\u3002</p>"},{"location":"protocol/#_26","title":"\u4ea4\u6613\u200b\u985e\u578b","text":"<p>Daodst \u200b\u652f\u6301\u200b\u5169\u7a2e\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\uff1a</p> <ol> <li>Cosmos \u200b\u4ea4\u6613\u200b</li> <li>Ethereum \u200b\u4ea4\u6613\u200b</li> </ol> <p>\u200b\u9019\u662f\u200b\u53ef\u80fd\u200b\u7684\u200b\uff0c\u200b\u56e0\u70ba\u200b Daodst \u200b\u4f7f\u7528\u200b Cosmos-SDK \u200b\u4e26\u5be6\u73fe\u200b\u4e86\u200b \u200b\u4ee5\u592a\u200b\u574a\u200b\u865b\u64ec\u6a5f\u200b \u200b\u4f5c\u70ba\u200b\u4e00\u500b\u200b\u6a21\u584a\u200b\u3002</p> <p>\u200b\u901a\u904e\u200b\u9019\u7a2e\u200b\u65b9\u5f0f\u200b\uff0cDaodst \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4ee5\u592a\u200b\u574a\u200b\u548c\u200b Cosmos \u200b\u93c8\u7d44\u5408\u200b\u7684\u200b\u7279\u6027\u200b\u548c\u200b\u529f\u80fd\u200b\uff0c\u200b\u7b49\u7b49\u200b\u3002</p> <p>\u200b\u5118\u200b\u7ba1\u200b\u9019\u200b\u5169\u200b\u7a2e\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u4e2d\u200b\u5305\u542b\u200b\u7684\u200b\u5927\u90e8\u5206\u200b\u4fe1\u606f\u200b\u76f8\u4f3c\u200b\uff0c\u200b\u4f46\u200b\u5b83\u5011\u200b\u4e4b\u9593\u200b\u5b58\u5728\u200b\u5dee\u7570\u200b\u3002</p> <p>\u200b\u4e00\u500b\u200b\u91cd\u8981\u200b\u7684\u200b\u5340\u5225\u200b\u662f\u200b\uff0cCosmos \u200b\u4ea4\u6613\u200b\u5141\u8a31\u200b\u5728\u200b\u540c\u4e00\u200b\u4ea4\u6613\u200b\u4e2d\u767c\u200b\u9001\u200b\u591a\u689d\u200b\u6d88\u606f\u200b\u3002</p> <p>\u200b\u76f8\u53cd\u200b\uff0c\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u5247\u6c92\u6709\u200b\u9019\u7a2e\u200b\u53ef\u80fd\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u5c07\u200b\u9019\u5169\u7a2e\u200b\u985e\u578b\u200b\u7d50\u200b\u5408\u5728\u4e00\u8d77\u200b\uff0cDaodst \u200b\u5c07\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u5be6\u73fe\u200b\u70ba\u200b\u55ae\u500b\u200b <code>sdk.Msg</code> \u200b\u5305\u542b\u200b\u5728\u200b <code>auth.StdTx</code> \u200b\u4e2d\u200b\u3002</p> <p>\u200b\u6b64\u200b\u6d88\u606f\u200b\u4e2d\u200b\u5305\u542b\u200b\u6240\u6709\u200b\u76f8\u95dc\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u4fe1\u606f\u200b\u3002</p> <p>\u200b\u9019\u200b\u5305\u62ec\u200b\u7c3d\u540d\u200b\u3001\u200b\u6c23\u9ad4\u200b\u3001\u200b\u6709\u6548\u200b\u8f09\u8377\u200b\u7b49\u200b\u3002</p> <p>\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u90e8\u5206\u200b\u4e2d\u200b\u627e\u5230\u200b\u6709\u95dc\u200b\u9019\u5169\u7a2e\u200b\u985e\u578b\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"protocol/#cosmos_1","title":"Cosmos \u200b\u4ea4\u6613","text":"<p>On Cosmos chains, transactions are comprised of metadata held in contexts and <code>sdk.Msg</code>s that trigger state changes within a module through the module's Protobuf Msg service.</p> <p>When users want to interact with an application and make state changes (e.g. sending coins), they create transactions. Cosmos transactions can have multiple <code>sdk.Msg</code>s. Each of these must be signed using the private key associated with the appropriate account(s), before the transaction is broadcasted to the network.</p> <p>A Cosmos transaction includes the following information:</p> <ul> <li><code>Msgs</code>: an array of msgs (<code>sdk.Msg</code>)</li> <li><code>GasLimit</code>: option chosen by the users for how to calculate how much gas they will need to pay</li> <li><code>FeeAmount</code>: max amount user is willing to pay in fees</li> <li><code>TimeoutHeight</code>: block height until which the transaction is valid</li> <li><code>Signatures</code>: array of signatures from all signers of the tx</li> <li><code>Memo</code>: a note or comment to send with the transaction</li> </ul> <p>To submit a Cosmos transaction, users must use one of the provided clients.</p>"},{"location":"protocol/#ethereum","title":"Ethereum \u200b\u4ea4\u6613","text":"<p>Ethereum transactions refer to actions initiated by EOAs (externally-owned accounts, managed by humans), rather than internal smart contract calls. Ethereum transactions transform the state of the EVM and therefore must be broadcasted to the entire network.</p> <p>Ethereum transactions also require a fee, known as <code>gas</code>. (EIP-1559) introduced the idea of a base fee, along with a priority fee which serves as an incentive for miners to include specific transactions in blocks.</p> <p>There are several categories of Ethereum transactions:</p> <ul> <li>regular transactions: transactions from one account to another</li> <li>contract deployment transactions: transactions without a <code>to</code> address, where the contract code is sent in the <code>data</code> field</li> <li>execution of a contract: transactions that interact with a deployed smart contract,   where the <code>to</code> address is the smart contract address</li> </ul> <p>An Ethereum transaction includes the following information:</p> <ul> <li><code>recipient</code>: receiving address</li> <li><code>signature</code>: sender's signature</li> <li><code>nonce</code>: counter of tx number from account</li> <li><code>value</code>: amount of ETH to transfer (in wei)</li> <li><code>data</code>: include arbitrary data. Used when deploying a smart contract or making a smart contract method call</li> <li><code>gasLimit</code>: max amount of gas to be consumed</li> <li><code>maxPriorityFeePerGas</code>: mas gas to be included as tip to validators</li> <li><code>maxFeePerGas</code>: max amount of gas to be paid for tx</li> </ul> <p>For more information on Ethereum transactions and the transaction lifecycle, go here.</p> <p>Daodst supports the following Ethereum transactions.</p> <p>:::tip Note: Unprotected legacy transactions are not supported by default. :::</p> <ul> <li>Dynamic Fee Transactions (EIP-1559)</li> <li>Access List Transactions (EIP-2930)</li> <li>Legacy Transactions (EIP-2718)</li> </ul> <p>Daodst is capable of processing Ethereum transactions by wrapping them on a <code>sdk.Msg</code>. Daodst achieves this by using the <code>MsgEthereumTx</code>. This message encapsulates an Ethereum transaction as an SDK message and contains the necessary transaction data fields.</p> <p>One remark about the <code>MsgEthereumTx</code> is that it implements both the <code>sdk.Msg</code> and <code>sdk.Tx</code> interfaces (generally SDK messages only implement the former, while the latter is a group of messages bundled together). The reason of this, is because the <code>MsgEthereumTx</code> must not be included in a <code>auth.StdTx</code> (SDK's standard transaction type) as it performs gas and fee checks using the Ethereum logic from Geth instead of the Cosmos SDK checks done on the auth module <code>AnteHandler</code>.</p>"},{"location":"protocol/#_27","title":"\u93c8\u9593\u200b\u4ea4\u6613","text":"<p>Interchain transactions refer to the transfer of digital assets or data between two or more different blockchain networks.</p> <p>Each blockchain network has its own unique protocol and data structure, making it difficult to directly transfer assets or data from one blockchain to another. Interchain transactions allow for the transfer of assets and data between different blockchains by using intermediary mechanisms or protocols.</p> <p>One such mechanism is a cross-chain bridge, which acts as a connector between different blockchains, enabling the transfer of assets or data. Cross-chain bridges typically require some form of trust or consensus mechanism to ensure the security and integrity of the transaction.</p> <p>Another possibility is to use the IBC (Inter-Blockchain Communication) protocol. To make an interchain transaction using IBC a user needs to:</p> <ul> <li>Choose the source and destination blockchain networks that the user wants to transfer assets or data between.</li> <li>Ensure that both blockchain networks have implemented the IBC protocol</li> <li>Ensure there's a connection and channel established between the two blockchain networks using IBC</li> <li>Initiate the transfer of assets or data: this is done by sending a transaction from the source blockchain   to the destination blockchain through the IBC channel</li> </ul> <p>Interchain transactions are becoming increasingly important as the number of different blockchain networks and applications continues to grow. They enable the interoperability of different blockchain networks, allowing for greater flexibility and efficiency in the transfer of digital assets and data.</p>"},{"location":"protocol/#_28","title":"\u4ea4\u6613\u200b\u6191\u8b49","text":"<p>A transaction receipt shows data returned by an Ethereum client to represent the result of a particular transaction, including a hash of the transaction, its block number, the amount of gas used, and, in case of deployment of a smart contract, the address of the contract. Additionally, it includes custom information from the events emitted in the smart contract.</p> <p>A receipt contains the following information:</p> <ul> <li><code>transactionHash</code> : hash of the transaction.</li> <li><code>transactionIndex</code>: integer of the transactions index position in the block.</li> <li><code>blockHash</code>: hash of the block where this transaction was in.</li> <li><code>blockNumber</code>: block number where this transaction was in.</li> <li><code>from</code>: address of the sender.</li> <li><code>to</code>: address of the receiver. null when its a contract creation transaction.</li> <li><code>cumulativeGasUsed</code> : The total amount of gas used when this transaction was executed in the block.</li> <li><code>effectiveGasPrice</code> : The sum of the base fee and tip paid per unit of gas.</li> <li><code>gasUsed</code> : The amount of gas used by this specific transaction alone.</li> <li><code>contractAddress</code> : The contract address created, if the transaction was a contract creation, otherwise null.</li> <li><code>logs</code>: Array of log objects, which this transaction generated.</li> <li><code>logsBloom</code>: Bloom filter for light clients to quickly retrieve related logs.</li> <li><code>type</code>: integer of the transaction type, 0x00 for legacy transactions, 0x01 for access list types,   0x02 for dynamic fees. It also returns either.</li> <li><code>root</code> : transaction stateroot (pre Byzantium)</li> <li><code>status</code>: either 1 (success) or 0 (failure)</li> </ul>"},{"location":"slashing/","title":"\u524a\u6e1b","text":""},{"location":"slashing/#_1","title":"<code>\u200b\u524a\u51cf\u200b(\u200b\u61f2\u7f70\u200b)</code>","text":""},{"location":"slashing/#_2","title":"\u6458\u8981","text":"<p>\u200b\u672c\u7bc0\u200b\u898f\u5b9a\u200b\u4e86\u200b\u524a\u200b\u6e1b\u6a21\u584a\u200b\u3002</p> <p>\u200b\u524a\u6e1b\u200b\u6a21\u584a\u200b\u4f7f\u5f97\u200b\u57fa\u200b\u65bc\u200bCosmos SDK\u200b\u7684\u200b\u5340\u584a\u200b\u93c8\u80fd\u5920\u200b\u901a\u904e\u200b\u61f2\u7f70\u200b\u5177\u6709\u200b\u6b0a\u76ca\u200b\u50f9\u503c\u200b\u7684\u200b\u5354\u8b70\u200b\u8a8d\u53ef\u200b\u7684\u200b\u53c3\u8207\u8005\u200b\u4f86\u200b\u6e1b\u5c11\u200b\u5176\u200b\u53ef\u80fd\u200b\u5c0e\u81f4\u200b\u7684\u200b\u884c\u70ba\u200b\u98a8\u96aa\u200b\u3002</p> <p>\u200b\u61f2\u7f70\u200b\u53ef\u80fd\u200b\u5305\u62ec\u200b\u4f46\u200b\u4e0d\u9650\u200b\u65bc\u200b\uff1a:</p> <ul> <li>\u200b\u92b7\u6bc0\u200b\u4ed6\u5011\u200b\u6301\u6709\u200b\u7684\u200b\u4e00\u5b9a\u200b\u6578\u91cf\u200b\u7684\u200b\u6b0a\u76ca\u4efd\u984d\u200b</li> <li>\u200b\u5728\u200b\u4e00\u6bb5\u200b\u6642\u9593\u200b\u5167\u200b\u53d6\u6d88\u200b\u4ed6\u5011\u200b\u5c0d\u200b\u672a\u4f86\u200b\u5340\u584a\u200b\u7684\u200b\u6295\u7968\u200b\u6b0a\u9650\u200b\u3002</li> </ul>"},{"location":"slashing/#_3","title":"\u6982\u5ff5","text":""},{"location":"slashing/#_4","title":"\u72c0\u614b","text":"<p>\u200b\u5728\u200b\u4efb\u4f55\u200b\u6642\u5019\u200b\uff0c\u200b\u72c0\u614b\u200b\u6a5f\u4e2d\u200b\u90fd\u200b\u6709\u200b\u4efb\u610f\u200b\u6578\u91cf\u200b\u7684\u200b\u9a57\u8b49\u200b\u8005\u200b\u8a3b\u200b\u518a\u200b\u3002 \u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\uff0c\u200b\u9802\u90e8\u200b\u7684\u200b MaxValidators\uff08\u200b\u7531\u200b x/staking \u200b\u5b9a\u7fa9\u200b\uff09\u200b\u672a\u200b\u88ab\u200b\u76e3\u7981\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u8b8a\u6210\u200b\u4e86\u200b bonded\uff0c\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u4ed6\u5011\u200b\u53ef\u4ee5\u200b\u63d0\u51fa\u200b\u548c\u200b\u6295\u7968\u200b\u652f\u6301\u200b\u5340\u584a\u200b\u3002 \u200b\u88ab\u200b bonded \u200b\u7684\u200b\u9a57\u8b49\u8005\u200b at stake\uff0c\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u4ed6\u5011\u200b\u548c\u200b\u4ed6\u5011\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u90e8\u5206\u200b\u6216\u200b\u5168\u90e8\u200b\u6b0a\u76ca\u4efd\u200b\u984d\u6703\u200b\u56e0\u70ba\u200b\u4ed6\u5011\u200b\u72af\u200b\u4e86\u200b\u5354\u8b70\u200b\u932f\u8aa4\u200b\u800c\u200b\u906d\u53d7\u200b\u98a8\u96aa\u200b\u3002</p> <p>\u200b\u5c0d\u200b\u65bc\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\uff0c\u200b\u6211\u5011\u200b\u4fdd\u7559\u200b\u4e00\u500b\u200b ValidatorSigningInfo \u200b\u8a18\u9304\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u6709\u200b\u95dc\u9a57\u200b\u8b49\u8005\u200b\u6d3b\u52d5\u200b\u72c0\u614b\u200b\u548c\u200b\u5176\u4ed6\u200b\u9055\u53cd\u200b\u76f8\u95dc\u200b\u5c6c\u6027\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"slashing/#_5","title":"\u5893\u7891\u200b\u4e0a\u9650","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u6e1b\u8f15\u200b\u6700\u521d\u200b\u53ef\u80fd\u200b\u51fa\u73fe\u200b\u7684\u200b\u975e\u200b\u60e1\u610f\u200b\u5354\u8b70\u200b\u932f\u8aa4\u200b\u7684\u200b\u5f71\u97ff\u200b\uff0cCosmos Hub \u200b\u70ba\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u5be6\u73fe\u200b\u4e86\u200b\u4e00\u500b\u200b \u200b\u5893\u7891\u200b \u200b\u4e0a\u9650\u200b\uff0c\u200b\u9019\u53ea\u200b\u5141\u200b\u8a31\u9a57\u200b\u8b49\u8005\u200b\u56e0\u200b\u96d9\u91cd\u200b\u7c3d\u7f72\u200b\u932f\u8aa4\u200b\u800c\u200b\u88ab\u200b\u61f2\u7f70\u200b\u4e00\u6b21\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u5982\u679c\u200b\u60a8\u200b\u932f\u8aa4\u200b\u5730\u200b\u914d\u7f6e\u200b\u4e86\u200b HSM \u200b\u4e26\u96d9\u91cd\u200b\u7c3d\u7f72\u200b\u4e86\u200b\u4e00\u5806\u200b\u820a\u5340\u200b\u584a\u200b\uff0c\u200b\u60a8\u200b\u53ea\u6703\u200b\u56e0\u70ba\u200b\u7b2c\u4e00\u6b21\u200b\u96d9\u91cd\u200b\u7c3d\u7f72\u200b\u800c\u200b\u53d7\u5230\u200b\u61f2\u7f70\u200b\uff08\u200b\u7136\u200b\u5f8c\u200b\u7acb\u5373\u200b\u88ab\u200b\u5893\u7891\u200b\u5316\u200b\uff09\u3002\u200b\u9019\u200b\u4ecd\u7136\u200b\u662f\u200b\u76f8\u7576\u200b\u6602\u8cb4\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u9700\u8981\u200b\u76e1\u91cf\u200b\u907f\u514d\u200b\uff0c\u200b\u4f46\u662f\u200b\u5893\u7891\u200b\u4e0a\u9650\u200b\u5728\u200b\u4e00\u5b9a\u200b\u7a0b\u5ea6\u200b\u4e0a\u200b\u6e1b\u8f15\u200b\u4e86\u200b\u610f\u5916\u200b\u932f\u8aa4\u200b\u914d\u7f6e\u200b\u7684\u200b\u7d93\u6fdf\u200b\u5f71\u97ff\u200b\u3002</p> <p>\u200b\u6d3b\u52d5\u6027\u200b\u932f\u8aa4\u200b\uff08Liveness faults\uff09\u200b\u6c92\u6709\u200b\u4e0a\u9650\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u5011\u200b\u4e0d\u80fd\u200b\u5806\u758a\u200b\u5728\u200b\u4e00\u8d77\u200b\u3002\u200b\u7576\u9055\u200b\u898f\u767c\u200b\u751f\u6642\u200b\uff0c\u200b\u6d3b\u52d5\u6027\u200b\u932f\u8aa4\u200b\u88ab\u200b\u201c\u200b\u6aa2\u6e2c\u200b\u201d\u200b\u51fa\u4f86\u200b\uff0c\u200b\u4e26\u4e14\u200b\u9a57\u8b49\u8005\u200b\u7acb\u5373\u200b\u88ab\u200b\u76e3\u7981\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4ed6\u5011\u200b\u4e0d\u200b\u53ef\u80fd\u200b\u5728\u200b\u89e3\u76e3\u200b\u4e4b\u524d\u200b\u591a\u6b21\u200b\u72af\u932f\u200b\u3002</p>"},{"location":"slashing/#_6","title":"\u9055\u898f\u6642\u200b\u9593\u8ef8","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u8aaa\u660e\u200b <code>slashing</code> \u200b\u6a21\u584a\u200b\u5982\u4f55\u200b\u901a\u904e\u200b Tendermint \u200b\u5171\u8b58\u200b\u8655\u7406\u200b\u63d0\u4ea4\u200b\u7684\u200b\u8b49\u64da\u200b\uff0c\u200b\u8acb\u200b\u8003\u616e\u200b\u4ee5\u4e0b\u200b\u793a\u4f8b\u200b\uff1a</p> <p>\u200b\u5b9a\u7fa9\u200b:</p> <p>C<sub>n</sub> : \u200b\u9055\u898f\u884c\u200b\u70ba\u200b <code>n</code> \u200b\u767c\u751f\u200b D<sub>n</sub> : \u200b\u767c\u73fe\u200b\u9055\u898f\u884c\u200b\u70ba\u200b <code>n</code> V<sub>b</sub> : \u200b\u5df2\u200b\u7d81\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b V<sub>u</sub> : \u200b\u672a\u200b\u7d81\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b</p>"},{"location":"slashing/#_7","title":"\u55ae\u6b21\u200b\u6216\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\u9055\u898f","text":"<p>&lt;-----------------&gt;</p> <p>\u200b\u7576\u767c\u73fe\u200b\u55ae\u6b21\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u5f8c\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u6703\u200b\u88ab\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u4e26\u200b\u88ab\u200b\u6263\u9664\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u7684\u200b\u5168\u90e8\u200b\u61f2\u7f70\u200b\u3002</p>"},{"location":"slashing/#_8","title":"\u591a\u6b21\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\u9055\u898f","text":"<p>&lt;---------------------------&gt;</p> <p>\u200b\u7576\u767c\u73fe\u200b\u591a\u6b21\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u5f8c\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u6703\u200b\u88ab\u200b\u62d8\u7559\u200b\u4e26\u88ab\u200b\u6263\u9664\u200b\u5176\u4e2d\u200b\u4e00\u6b21\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u7684\u200b\u61f2\u7f70\u200b\u3002\u200b\u7531\u200b\u65bc\u200b\u9a57\u8b49\u8005\u200b\u5df2\u200b\u88ab\u200b\u5893\u7891\u200b\u5316\u200b\uff0c\u200b\u56e0\u6b64\u200b\u7121\u6cd5\u200b\u91cd\u65b0\u52a0\u5165\u200b\u9a57\u8b49\u8005\u200b\u96c6\u5408\u200b\u3002</p>"},{"location":"slashing/#_9","title":"\u72c0\u614b","text":""},{"location":"slashing/#_10","title":"\u7c3d\u540d\u200b\u4fe1\u606f\u200b\uff08\u200b\u6d3b\u6027\u200b\uff09","text":"<p>\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u90fd\u200b\u5305\u542b\u200b\u524d\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u9810\u200b\u63d0\u4ea4\u200b\u96c6\u5408\u200b\uff0c\u200b\u7a31\u70ba\u200b Tendermint \u200b\u63d0\u4f9b\u200b\u7684\u200b LastCommitInfo\u3002 \u200b\u53ea\u8981\u200b LastCommitInfo \u200b\u5305\u542b\u200b\u8d85\u904e\u200b\u7e3d\u200b\u6295\u7968\u200b\u6b0a\u7684\u200b 2/3 \u200b\u7684\u200b\u9810\u200b\u63d0\u4ea4\u200b\uff0c\u200b\u5c31\u662f\u200b\u6709\u6548\u200b\u7684\u200b\u3002\u200b\u9019\u500b\u200b\u6a5f\u5236\u200b\u53ef\u4ee5\u200b\u78ba\u4fdd\u200b\u7db2\u7d61\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u548c\u200b\u6d3b\u6027\u200b\u3002</p> <p>\u200b\u63d0\u8b70\u8005\u200b\u6703\u200b\u53d7\u5230\u200b\u6fc0\u52f5\u200b\uff0c\u200b\u5c07\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u9810\u200b\u63d0\u4ea4\u200b\u5305\u542b\u200b\u5728\u200b Tendermint \u200b\u7684\u200b <code>LastCommitInfo</code> \u200b\u4e2d\u200b\uff0c\u200b\u901a\u904e\u200b\u6839\u636e\u200b\u5305\u542b\u200b\u5728\u200b <code>LastCommitInfo</code> \u200b\u4e2d\u200b\u7684\u200b\u6295\u7968\u200b\u6b0a\u8207\u200b 2/3 \u200b\u6295\u7968\u200b\u6b0a\u4e4b\u5dee\u200b\u6bd4\u4f8b\u200b\u63d0\u9ad8\u200b\u984d\u5916\u200b\u8cbb\u7528\u200b\u3002</p> <pre><code>type LastCommitInfo struct {\n    Round int32\n    Votes []VoteInfo\n}\n</code></pre> <p>\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u672a\u80fd\u200b\u5728\u200b\u67d0\u4e9b\u200b\u5340\u584a\u200b\u7684\u200b <code>L</code>astCommitInfo` \u200b\u4e2d\u200b\u88ab\u200b\u5305\u542b\u200b\uff0c\u200b\u4ed6\u5011\u5c07\u200b\u53d7\u5230\u200b\u61f2\u7f70\u200b\uff0c\u200b\u81ea\u52d5\u200b\u88ab\u200b\u62d8\u7559\u200b\uff0c\u200b\u53ef\u80fd\u200b\u88ab\u200b\u524a\u200b\u6e1b\u734e\u52f5\u200b\uff0c\u200b\u4e26\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u3002</p> <p>\u200b\u6709\u200b\u95dc\u9a57\u200b\u8b49\u8005\u200b\u6d3b\u6027\u200b\u7684\u200b\u4fe1\u606f\u200b\u901a\u904e\u200b ValidatorSigningInfo \u200b\u8fdb\u884c\u200b\u8ddf\u8e2a\u200b\u3002\u200b\u5b83\u200b\u5728\u200b\u5b58\u50a8\u200b\u5e93\u4e2d\u200b\u6309\u200b\u4ee5\u4e0b\u200b\u65b9\u5f0f\u200b\u8fdb\u884c\u200b\u7d22\u5f15\u200b\uff1a</p> <ul> <li>ValidatorSigningInfo: <code>0x01 | ConsAddrLen (1 byte) | ConsAddress -&gt; ProtocolBuffer(ValSigningInfo)</code></li> <li>MissedBlocksBitArray: <code>0x02 | ConsAddrLen (1 byte) | ConsAddress | LittleEndianUint64(signArrayIndex) -&gt; VarInt(didMiss)</code> (varint \u200b\u662f\u200b\u4e00\u7a2e\u200b\u6578\u5b57\u200b\u7de8\u78bc\u200b\u683c\u5f0f\u200b\u3002)</li> </ul> <p>\u200b\u7b2c\u4e00\u200b\u500b\u200b\u6620\u5c04\u200b\u5141\u8a31\u200b\u6211\u5011\u200b\u6839\u64da\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u5171\u8b58\u200b\u5730\u5740\u200b\u8f15\u200b\u9b06\u200b\u67e5\u627e\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u6700\u8fd1\u200b\u7c3d\u540d\u200b\u4fe1\u606f\u200b\u3002</p> <p>\u200b\u7b2c\u4e8c\u200b\u500b\u200b\u6620\u5c04\u200b (<code>MissedBlocksBitArray</code>) \u200b\u5145\u7576\u200b\u5927\u5c0f\u200b\u70ba\u200b <code>SignedBlocksWindow</code> \u200b\u7684\u200b\u4f4d\u200b\u6578\u7d44\u200b\uff0c\u200b\u544a\u8a34\u200b\u6211\u5011\u200b\u9a57\u8b49\u8005\u200b\u662f\u5426\u200b\u932f\u904e\u200b\u4e86\u200b\u4f4d\u6578\u200b\u7d44\u4e2d\u200b\u7d66\u5b9a\u200b\u7d22\u5f15\u200b\u7684\u200b\u5340\u584a\u200b\u3002 \u200b\u4f4d\u6578\u200b\u7d44\u4e2d\u200b\u7684\u200b\u7d22\u5f15\u200b\u4ee5\u5c0f\u7aef\u200b uint64 \u200b\u7684\u200b\u5f62\u5f0f\u200b\u7d66\u51fa\u200b\u3002 \u200b\u7d50\u679c\u200b\u662f\u200b\u4e00\u500b\u200b <code>varint</code>\uff0c\u200b\u53d6\u503c\u200b\u70ba\u200b <code>0</code>\u200b\u6216\u200b <code>1</code>\uff0c\u200b\u5176\u4e2d\u200b <code>0</code> \u200b\u8868\u793a\u200b\u9a57\u8b49\u8005\u200b\u672a\u200b\u932f\u904e\u200b\uff08\u200b\u5df2\u200b\u7c3d\u7f72\u200b\uff09\u200b\u76f8\u61c9\u200b\u7684\u200b\u5340\u584a\u200b\uff0c\u200b\u800c\u200b <code>1</code> \u200b\u8868\u793a\u200b\u4ed6\u5011\u200b\u932f\u904e\u200b\u4e86\u200b\u8a72\u5340\u200b\u584a\u200b\uff08\u200b\u672a\u200b\u7c3d\u7f72\u200b\uff09\u3002</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c<code>MissedBlocksBitArray</code> \u200b\u4e0d\u662f\u200b\u5728\u200b\u524d\u9762\u200b\u660e\u78ba\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u3002 \u200b\u7576\u6211\u5011\u200b\u5728\u200b\u65b0\u200b\u7d81\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u524d\u200b <code>SignedBlocksWindow</code> \u200b\u500b\u5340\u200b\u584a\u200b\u4e2d\u200b\u9032\u884c\u200b\u9032\u5ea6\u200b\u6642\u200b\uff0c\u200b\u5c07\u200b\u6dfb\u52a0\u200b\u9375\u200b\u3002 <code>SignedBlocksWindow</code> \u200b\u53c3\u6578\u5b9a\u200b\u7fa9\u7528\u200b\u65bc\u200b\u8ddf\u8e2a\u200b\u9a57\u8b49\u8005\u200b\u6d3b\u6027\u200b\u7684\u200b\u6ed1\u52d5\u200b\u7a97\u53e3\u200b\u7684\u200b\u5927\u5c0f\u200b\uff08\u200b\u5340\u584a\u6578\u200b\uff09\u3002</p> <p>\u200b\u8ddf\u8e2a\u200b\u9a57\u8b49\u8005\u200b\u6d3b\u6027\u200b\u5b58\u5132\u200b\u7684\u200b\u4fe1\u606f\u200b\u5982\u4e0b\u200b\uff1a</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/slashing/v1beta1/slashing.proto#L11-L33</p>"},{"location":"slashing/#messages","title":"Messages","text":"<p>\u200b\u5728\u200b\u672c\u7bc0\u200b\u4e2d\u200b\uff0c\u200b\u6211\u5011\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u91dd\u5c0d\u200b\u201c\u200b\u61f2\u7f70\u200b\u201d\u200b\u6a21\u584a\u200b\u7684\u200b\u6d88\u606f\u200b\u8655\u7406\u200b\u904e\u7a0b\u200b\u3002</p>"},{"location":"slashing/#unjail","title":"Unjail","text":"<p>\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u56e0\u200b\u505c\u6a5f\u200b\u800c\u200b\u88ab\u200b\u81ea\u52d5\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\uff0c\u200b\u4e26\u200b\u5e0c\u671b\u200b\u91cd\u65b0\u200b\u4e0a\u7dda\u4e26\u200b\u53ef\u80fd\u200b\u91cd\u65b0\u52a0\u5165\u200b\u7d81\u5b9a\u200b\u96c6\u200b\uff0c\u200b\u5247\u5fc5\u9808\u200b\u767c\u9001\u200b <code>MsgUnjail</code>\uff1a</p> <pre><code>// MsgUnjail is an sdk.Msg used for unjailing a jailed validator, thus returning\n// them into the bonded validator set, so they can begin receiving provisions\n// and rewards again.\nmessage MsgUnjail {\n  string validator_addr = 1;\n}\n</code></pre> <p>Below is a pseudocode of the <code>MsgSrv/Unjail</code> RPC:</p> <pre><code>unjail(tx MsgUnjail)\n    validator = getValidator(tx.ValidatorAddr)\n    if validator == nil\n      fail with \"No validator found\"\n\n    if getSelfDelegation(validator) == 0\n      fail with \"validator must self delegate before unjailing\"\n\n    if !validator.Jailed\n      fail with \"Validator not jailed, cannot unjail\"\n\n    info = GetValidatorSigningInfo(operator)\n    if info.Tombstoned\n      fail with \"Tombstoned validator cannot be unjailed\"\n    if block time &lt; info.JailedUntil\n      fail with \"Validator still jailed, cannot unjail until period has expired\"\n\n    validator.Jailed = false\n    setValidator(validator)\n\n    return\n</code></pre> <p>\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u64c1\u6709\u200b\u8db3\u5920\u200b\u7684\u200b\u80a1\u4efd\u200b\u4ee5\u200b\u9032\u5165\u200b\u524d\u200b <code>n = MaximumBondedValidators \u200b\u540d\u200b</code>\uff0c\u200b\u5b83\u5c07\u200b\u81ea\u52d5\u200b\u91cd\u65b0\u200b\u7d81\u5b9a\u200b\uff0c \u200b\u4ecd\u7136\u200b\u59d4\u200b\u8a17\u200b\u7d66\u8a72\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u8005\u5c07\u200b\u91cd\u65b0\u200b\u7d81\u5b9a\u200b\u4e26\u958b\u59cb\u200b\u518d\u6b21\u200b\u6536\u96c6\u200b\u4f63\u91d1\u200b\u548c\u200b\u734e\u52f5\u200b\u3002</p>"},{"location":"slashing/#_11","title":"\u958b\u59cb\u200b\u5340\u584a","text":""},{"location":"slashing/#liveness-tracking","title":"Liveness Tracking","text":"<p>\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u958b\u59cb\u200b\u6642\u200b\uff0c\u200b\u6211\u5011\u200b\u6703\u200b\u66f4\u65b0\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b <code>ValidatorSigningInfo</code>\uff0c\u200b\u4e26\u6aa2\u67e5\u200b\u5b83\u5011\u200b\u662f\u5426\u200b\u5728\u200b\u4e00\u500b\u200b\u6ed1\u52d5\u200b\u7a97\u53e3\u200b\u5167\u200b\u8de8\u8d8a\u200b\u4e86\u200b\u5b58\u6d3b\u200b\u95be\u503c\u200b\u3002 \u200b\u9019\u500b\u200b\u6ed1\u52d5\u200b\u7a97\u53e3\u200b\u7531\u200b <code>SignedBlocksWindow</code> \u200b\u5b9a\u7fa9\u200b\uff0c\u200b\u4e26\u4e14\u200b\u6b64\u200b\u7a97\u53e3\u200b\u4e2d\u200b\u7684\u200b\u7d22\u5f15\u200b\u7531\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b <code>ValidatorSigningInfo</code> \u200b\u4e2d\u200b\u7684\u200b <code>IndexOffset</code> \u200b\u78ba\u5b9a\u200b\u3002 \u200b\u5c0d\u200b\u65bc\u200b\u6bcf\u500b\u200b\u8655\u7406\u200b\u7684\u200b\u5340\u584a\u200b\uff0c\u200b\u7121\u8ad6\u9a57\u200b\u8b49\u8005\u200b\u662f\u5426\u200b\u7c3d\u7f72\u200b\uff0c\u200b\u90fd\u200b\u6703\u200b\u589e\u52a0\u200b <code>I</code>ndexOffset<code>\u3002\u200b\u4e00\u65e6\u200b\u78ba\u5b9a\u200b\u7d22\u5f15\u200b\uff0c\u200b\u5c31\u6703\u200b\u76f8\u61c9\u200b\u5730\u200b\u66f4\u65b0\u200b</code>MissedBlocksBitArray<code>\u200b\u548c\u200b</code>MissedBlocksCounter`\u3002</p> <p>\u200b\u6700\u200b\u5f8c\u200b\uff0c\u200b\u70ba\u200b\u4e86\u200b\u78ba\u5b9a\u9a57\u200b\u8b49\u8005\u200b\u662f\u5426\u200b\u8de8\u8d8a\u200b\u4e86\u200b\u5b58\u6d3b\u200b\u95be\u503c\u200b\uff0c\u200b\u6211\u5011\u200b\u6703\u200b\u53d6\u5f97\u200b\u6700\u5927\u200b\u932f\u904e\u200b\u5340\u584a\u6578\u200b maxMissed\uff0c \u200b\u5b83\u200b\u7b49\u200b\u65bc\u200b <code>SignedBlocksWindow - (MinSignedPerWindow * SignedBlocksWindow)</code>\uff0c \u200b\u4ee5\u53ca\u200b\u53ef\u4ee5\u200b\u78ba\u200b\u5b9a\u5b58\u200b\u6d3b\u6027\u200b\u7684\u200b\u6700\u5c0f\u200b\u9ad8\u5ea6\u200b minHeight\u3002\u200b\u5982\u679c\u200b\u7576\u524d\u200b\u5340\u584a\u200b\u9ad8\u5ea6\u200b\u5927\u200b\u65bc\u200b minHeight\uff0c \u200b\u4e26\u4e14\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b <code>MissedBlocksCounter</code> \u200b\u5927\u200b\u65bc\u200b <code>maxMissed</code>\uff0c\u200b\u5247\u6703\u200b\u5c0d\u200b\u5176\u200b\u9032\u884c\u200b\u61f2\u7f70\u200b\uff0c \u200b\u61f2\u7f70\u200b\u65b9\u5f0f\u200b\u662f\u200b\u524a\u6e1b\u200b <code>SlashFractionDowntime</code> \u200b\u7684\u200b\u8ca2\u737b\u503c\u200b\uff0c\u200b\u4e26\u5c07\u200b\u5176\u95dc\u200b\u62bc\u200b\u5728\u200b <code>DowntimeJailDuration</code> \u200b\u7684\u200b\u6642\u9593\u200b\u5167\u200b \u200b\u540c\u6642\u200b\u91cd\u7f6e\u200b\u4ee5\u4e0b\u200b\u503c\u200b\uff1a<code>MissedBlocksBitArray</code>\u3001<code>MissedBlocksCounter</code> \u200b\u548c\u200b <code>IndexOffset</code>\u3002</p> <p>\u200b\u6ce8\u610f\u200b: \u200b\u5b58\u6d3b\u200b\u6027\u61f2\u200b\u7f70\u200b\u4e0d\u6703\u200b\u5c0e\u81f4\u200b\u5893\u7891\u200b\u5316\u200b\u3002</p> <pre><code>height := block.Height\n\nfor vote in block.LastCommitInfo.Votes {\n  signInfo := GetValidatorSigningInfo(vote.Validator.Address)\n\n  // This is a relative index, so we counts blocks the validator SHOULD have\n  // signed. We use the 0-value default signing info if not present, except for\n  // start height.\n  index := signInfo.IndexOffset % SignedBlocksWindow()\n  signInfo.IndexOffset++\n\n  // Update MissedBlocksBitArray and MissedBlocksCounter. The MissedBlocksCounter\n  // just tracks the sum of MissedBlocksBitArray. That way we avoid needing to\n  // read/write the whole array each time.\n  missedPrevious := GetValidatorMissedBlockBitArray(vote.Validator.Address, index)\n  missed := !signed\n\n  switch {\n  case !missedPrevious &amp;&amp; missed:\n    // array index has changed from not missed to missed, increment counter\n    SetValidatorMissedBlockBitArray(vote.Validator.Address, index, true)\n    signInfo.MissedBlocksCounter++\n\n  case missedPrevious &amp;&amp; !missed:\n    // array index has changed from missed to not missed, decrement counter\n    SetValidatorMissedBlockBitArray(vote.Validator.Address, index, false)\n    signInfo.MissedBlocksCounter--\n\n  default:\n    // array index at this index has not changed; no need to update counter\n  }\n\n  if missed {\n    // emit events...\n  }\n\n  minHeight := signInfo.StartHeight + SignedBlocksWindow()\n  maxMissed := SignedBlocksWindow() - MinSignedPerWindow()\n\n  // If we are past the minimum height and the validator has missed too many\n  // jail and slash them.\n  if height &gt; minHeight &amp;&amp; signInfo.MissedBlocksCounter &gt; maxMissed {\n    validator := ValidatorByConsAddr(vote.Validator.Address)\n\n    // emit events...\n\n    // We need to retrieve the stake distribution which signed the block, so we\n    // subtract ValidatorUpdateDelay from the block height, and subtract an\n    // additional 1 since this is the LastCommit.\n    //\n    // Note, that this CAN result in a negative \"distributionHeight\" up to\n    // -ValidatorUpdateDelay-1, i.e. at the end of the pre-genesis block (none) = at the beginning of the genesis block.\n    // That's fine since this is just used to filter unbonding delegations &amp; redelegations.\n    distributionHeight := height - sdk.ValidatorUpdateDelay - 1\n\n    Slash(vote.Validator.Address, distributionHeight, vote.Validator.Power, SlashFractionDowntime())\n    Jail(vote.Validator.Address)\n\n    signInfo.JailedUntil = block.Time.Add(DowntimeJailDuration())\n\n    // We need to reset the counter &amp; array so that the validator won't be\n    // immediately slashed for downtime upon rebonding.\n    signInfo.MissedBlocksCounter = 0\n    signInfo.IndexOffset = 0\n    ClearValidatorMissedBlockBitArray(vote.Validator.Address)\n  }\n\n  SetValidatorSigningInfo(vote.Validator.Address, signInfo)\n}\n</code></pre>"},{"location":"slashing/#hooks","title":"Hooks","text":"<p>\u200b\u672c\u7bc0\u200b\u5305\u542b\u200b\u6a21\u7d44\u200b\u7684\u200b hooks \u200b\u63cf\u8ff0\u200b\u3002Hooks \u200b\u662f\u7576\u200b\u4e8b\u4ef6\u200b\u89f8\u767c\u6642\u200b\u81ea\u52d5\u200b\u57f7\u884c\u200b\u7684\u200b\u64cd\u4f5c\u200b\u3002</p>"},{"location":"slashing/#staking-hooks","title":"Staking hooks","text":"<p>\u200b\u524a\u200b\u6e1b\u6a21\u200b\u7d44\u5be6\u73fe\u200b\u4e86\u200b\u5728\u200b <code>x/staking</code> \u200b\u4e2d\u5b9a\u200b\u7fa9\u7684\u200b <code>StakingHooks</code>\uff0c\u200b\u7528\u200b\u65bc\u200b\u8a18\u9304\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002 \u200b\u5728\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u521d\u59cb\u5316\u200b\u671f\u9593\u200b\uff0c\u200b\u9019\u4e9b\u200b <code>hooks</code> \u200b\u61c9\u8a72\u200b\u5728\u200b\u6b0a\u76ca\u200b\u7d81\u5b9a\u200b\u6a21\u7d44\u200b\u7d50\u69cb\u200b\u4e2d\u200b\u8a3b\u200b\u518a\u200b\u3002</p> <p>\u200b\u4ee5\u4e0b\u200b hooks \u200b\u5f71\u97ff\u200b\u524a\u200b\u6e1b\u72c0\u614b\u200b\uff1a</p> <ul> <li><code>AfterValidatorBonded</code> \u200b\u6703\u200b\u6839\u64da\u200b\u4ee5\u4e0b\u200b\u90e8\u5206\u200b\u7684\u200b\u63cf\u8ff0\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b <code>V</code>alidatorSigningInfo` \u200b\u5be6\u4f8b\u200b\u3002</li> <li><code>AfterValidatorCreated</code> \u200b\u5b58\u5132\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u5171\u8b58\u5bc6\u200b\u9470\u200b\u3002</li> <li><code>AfterValidatorRemoved</code> \u200b\u522a\u9664\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u5171\u8b58\u5bc6\u200b\u9470\u200b\u3002</li> </ul>"},{"location":"slashing/#_12","title":"\u9a57\u8b49\u8005\u200b\u7d81\u5b9a","text":"<p>\u200b\u5728\u200b\u65b0\u9a57\u200b\u8b49\u8005\u200b\u9996\u6b21\u200b\u6210\u529f\u200b\u7d81\u5b9a\u200b\u6642\u200b\uff0c\u200b\u6211\u5011\u200b\u70ba\u200b\u65b0\u200b\u7d81\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b <code>ValidatorSigningInfo</code> \u200b\u7d50\u69cb\u200b\uff0c\u200b\u5176\u200b <code>StartHeight</code> \u200b\u70ba\u200b\u7576\u524d\u200b\u5340\u584a\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u3002</p> <pre><code>onValidatorBonded(address sdk.ValAddress)\n\n  signingInfo, found = GetValidatorSigningInfo(address)\n  if !found {\n    signingInfo = ValidatorSigningInfo {\n      StartHeight         : CurrentHeight,\n      IndexOffset         : 0,\n      JailedUntil         : time.Unix(0, 0),\n      Tombstone           : false,\n      MissedBloskCounter  : 0\n    }\n    setValidatorSigningInfo(signingInfo)\n  }\n\n  return\n</code></pre>"},{"location":"slashing/#tags","title":"Tags","text":"<p>\u200b\u524a\u200b\u6e1b\u6a21\u200b\u7d44\u767c\u51fa\u200b\u4ee5\u4e0b\u200b\u4e8b\u4ef6\u200b/\u200b\u6a19\u200b\u7c64\u200b\uff1a</p>"},{"location":"slashing/#msgserver","title":"MsgServer","text":""},{"location":"slashing/#msgunjail","title":"MsgUnjail","text":"Type Attribute Key Attribute Value message module slashing message sender {validatorAddress}"},{"location":"slashing/#keeper","title":"Keeper","text":""},{"location":"slashing/#beginblocker-handlevalidatorsignature","title":"BeginBlocker: HandleValidatorSignature","text":"Type Attribute Key Attribute Value slash address {validatorConsensusAddress} slash power {validatorPower} slash reason {slashReason} slash jailed [0] {validatorConsensusAddress} <ul> <li>[0] \u200b\u53ea\u6709\u200b\u5728\u9a57\u200b\u8b49\u8005\u200b\u88ab\u200b\u6295\u5165\u200b\u76e3\u7344\u200b\u6642\u200b\u624d\u200b\u6703\u200b\u5305\u62ec\u200b\u3002</li> </ul> Type Attribute Key Attribute Value liveness address {validatorConsensusAddress} liveness missed_blocks {missedBlocksCounter} liveness height {blockHeight} <p>Slash</p> <ul> <li>\u200b\u8207\u200b <code>HandleValidatorSignature</code> \u200b\u4e2d\u200b\u7684\u200b <code>slash</code> \u200b\u4e8b\u4ef6\u200b\u76f8\u540c\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u200b\u5305\u62ec\u200b <code>jailed</code> \u200b\u5c6c\u6027\u200b\u3002</li> </ul> <p>Jail</p> Type Attribute Key Attribute Value slash jailed {validatorAddress}"},{"location":"slashing/#_13","title":"\u6b0a\u76ca\u200b\u5893\u7891","text":""},{"location":"slashing/#_14","title":"\u6458\u8981","text":"<p>\u200b\u5728\u200b\u7576\u524d\u200b\u7684\u200b slashing \u200b\u6a21\u7d44\u200b\u5be6\u73fe\u200b\u4e2d\u200b\uff0c\u200b\u7576\u5171\u8b58\u200b\u5f15\u64ce\u200b\u901a\u77e5\u200b\u72c0\u614b\u200b\u6a5f\u51fa\u200b\u73fe\u9a57\u200b\u8b49\u8005\u200b\u5171\u8b58\u200b\u932f\u8aa4\u200b\u6642\u200b\uff0c\u200b\u8a72\u9a57\u200b\u8b49\u8005\u200b\u6703\u200b\u88ab\u200b\u90e8\u5206\u200b\u524a\u6e1b\u200b\uff0c\u200b\u4e26\u9032\u5165\u200b\u201c\u200b\u76e3\u7344\u200b\u671f\u200b\u201d\uff0c \u200b\u5728\u200b\u6b64\u200b\u671f\u9593\u200b\u4e0d\u200b\u5141\u8a31\u200b\u5176\u200b\u91cd\u65b0\u52a0\u5165\u200b\u9a57\u8b49\u8005\u200b\u96c6\u5408\u200b\u3002 \u200b\u7136\u800c\u200b\uff0c\u200b\u7531\u200b\u65bc\u200b\u5171\u8b58\u200b\u932f\u8aa4\u200b\u548c\u200b ABCI \u200b\u7684\u200b\u6027\u8cea\u200b\uff0c\u200b\u53ef\u80fd\u200b\u6703\u200b\u5b58\u5728\u200b\u4e00\u6bb5\u200b\u6642\u9593\u200b\u7684\u200b\u5ef6\u9072\u200b\uff0c\u200b\u4f7f\u5f97\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u767c\u751f\u200b\u5f8c\u200b\u7684\u200b\u8b49\u64da\u200b\u5230\u200b\u9054\u200b\u72c0\u614b\u6a5f\u200b\uff08\u200b\u9019\u662f\u200b\u5b58\u5728\u200b\u89e3\u9664\u200b\u7d81\u200b\u5b9a\u671f\u200b\u7684\u200b\u4e3b\u8981\u200b\u539f\u56e0\u200b\u4e4b\u4e00\u200b\uff09\u3002</p> <p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u6b0a\u76ca\u200b\u5893\u7891\u200b\u7684\u200b\u6982\u5ff5\u200b\u50c5\u9069\u200b\u7528\u200b\u65bc\u200b\u5b58\u5728\u200b\u5ef6\u9072\u200b\u7684\u200b\u932f\u8aa4\u200b\uff0c\u200b\u4f8b\u5982\u200b\u7531\u200b\u65bc\u200b\u4e0d\u53ef\u200b\u9810\u6e2c\u200b\u7684\u200b\u8b49\u64da\u200b\u50b3\u64ad\u5c64\u200b\u5ef6\u9072\u200b\u4ee5\u53ca\u200b\u9a57\u8b49\u8005\u200b\u6709\u200b\u9078\u64c7\u6027\u200b\u5730\u200b\u63ed\u793a\u200b\u96d9\u7c3d\u200b\u540d\u200b\uff08\u200b\u4f8b\u5982\u200b\u5411\u200b\u4e0d\u200b\u7d93\u5e38\u200b\u5728\u200b\u7dda\u200b\u7684\u200b\u8f15\u200b\u5ba2\u6236\u200b\u7aef\u200b\u63ed\u793a\u200b\uff09\uff0c \u200b\u8b49\u64da\u200b\u8868\u660e\u200b\u9a57\u8b49\u8005\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u4e00\u6bb5\u200b\u6642\u9593\u200b\u624d\u80fd\u200b\u5230\u200b\u9054\u200b\u72c0\u614b\u6a5f\u200b\u3002 \u200b\u53e6\u4e00\u65b9\u9762\u200b\uff0c\u200b\u6d3b\u6027\u200b\u524a\u200b\u6e1b\u6703\u200b\u5728\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u767c\u751f\u200b\u5f8c\u200b\u7acb\u5373\u200b\u6aa2\u6e2c\u200b\u5230\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e0d\u200b\u9700\u8981\u200b\u524a\u200b\u6e1b\u671f\u200b\u3002 \u200b\u9a57\u8b49\u8005\u200b\u7acb\u5373\u200b\u9032\u5165\u200b\u76e3\u7344\u200b\u671f\u200b\uff0c\u200b\u4ed6\u5011\u200b\u4e0d\u80fd\u200b\u518d\u72af\u200b\u6d3b\u6027\u200b\u932f\u8aa4\u200b\uff0c\u200b\u76f4\u5230\u200b\u89e3\u9664\u200b\u76e3\u7344\u200b\u3002 \u200b\u5c07\u4f86\u200b\u53ef\u80fd\u200b\u6703\u200b\u51fa\u73fe\u200b\u5176\u4ed6\u200b\u985e\u578b\u200b\u7684\u200b\u62dc\u5360\u5ead\u200b\u932f\u8aa4\u200b\uff0c\u200b\u4f8b\u5982\u200b\u5c07\u7121\u6548\u200b\u63d0\u6848\u200b\u4f5c\u70ba\u200b\u4ea4\u6613\u200b\u63d0\u4ea4\u200b\u7684\u200b\u8b49\u64da\u200b\u3002 \u200b\u7576\u5be6\u65bd\u200b\u6642\u200b\uff0c\u200b\u5fc5\u9808\u200b\u6c7a\u5b9a\u200b\u9019\u4e9b\u200b\u672a\u4f86\u200b\u7684\u200b\u62dc\u5360\u5ead\u200b\u932f\u8aa4\u200b\u662f\u5426\u200b\u6703\u5c0e\u81f4\u200b\u5893\u7891\u200b\uff08\u200b\u5982\u679c\u200b\u4e0d\u662f\u200b\uff0c\u200b\u524a\u200b\u6e1b\u91d1\u984d\u200b\u5c07\u4e0d\u6703\u200b\u53d7\u5230\u200b\u524a\u200b\u6e1b\u671f\u200b\u7684\u200b\u9650\u5236\u200b\uff09\u3002</p> <p>\u200b\u5728\u200b\u76ee\u524d\u200b\u7684\u200b\u7cfb\u7edf\u200b\u8bbe\u8ba1\u200b\u4e2d\u200b\uff0c \u200b\u4e00\u65e6\u200b\u9a8c\u8bc1\u200b\u8005\u200b\u7531\u4e8e\u200b\u5171\u8bc6\u200b\u9519\u8bef\u200b\u800c\u200b\u88ab\u200b\u5173\u8fdb\u200b\u76d1\u72f1\u200b\uff0c\u200b\u7ecf\u8fc7\u200bJailPeriod\uff08\u200b\u76d1\u72f1\u200b\u65f6\u671f\u200b\uff09\u200b\u540e\u200b\uff0c\u200b\u4ed6\u4eec\u200b\u53ef\u4ee5\u200b\u53d1\u9001\u200b\u4e00\u4e2a\u200bunjail\uff08\u200b\u89e3\u9664\u200b\u76d1\u7981\u200b\uff09\u200b\u4ea4\u6613\u200b\u6765\u200b\u89e3\u9664\u200b\u81ea\u5df1\u200b\u7684\u200b\u76d1\u7981\u200b\u72b6\u6001\u200b\uff0c\u200b\u4ece\u800c\u200b\u91cd\u65b0\u52a0\u5165\u200b\u9a8c\u8bc1\u200b\u8005\u200b\u96c6\u5408\u200b\u3002 \u200b\u8fd9\u6837\u200b\u7684\u200b\u8bbe\u8ba1\u200b\u5141\u8bb8\u200b\u9a8c\u8bc1\u200b\u8005\u200b\u5728\u200b\u88ab\u200b\u60e9\u7f5a\u200b\u5e76\u200b\u5b8c\u6210\u200b\u76d1\u7981\u200b\u671f\u540e\u200b\u6709\u200b\u673a\u4f1a\u200b\u6062\u590d\u200b\u5176\u200b\u9a8c\u8bc1\u200b\u8005\u200b\u8eab\u4efd\u200b\u3002</p> <p>slashing\u200b\u6a21\u5757\u200b\u7684\u200b\u4e00\u4e2a\u200b\u201c\u200b\u8bbe\u8ba1\u200b\u613f\u671b\u200b\u201d\u200b\u662f\u200b\uff0c\u200b\u5982\u679c\u200b\u5728\u200b\u6267\u884c\u200b\u8bc1\u636e\u200b\uff08\u200b\u5e76\u200b\u5c06\u200b\u9a8c\u8bc1\u200b\u8005\u200b\u5173\u8fdb\u200b\u76d1\u72f1\u200b\uff09\u200b\u4e4b\u524d\u200b\u53d1\u751f\u200b\u4e86\u200b\u591a\u6b21\u200b\u8fdd\u89c4\u884c\u4e3a\u200b\uff0c \u200b\u90a3\u4e48\u200b\u9a8c\u8bc1\u200b\u8005\u200b\u5e94\u8be5\u200b\u53ea\u200b\u53d7\u5230\u200b\u6700\u200b\u4e25\u91cd\u200b\u8fdd\u89c4\u884c\u4e3a\u200b\u7684\u200b\u60e9\u7f5a\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u7d2f\u79ef\u200b\u60e9\u7f5a\u200b \u200b\u4f8b\u5982\u200b\uff0c\u200b\u5982\u679c\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u987a\u5e8f\u200b\u662f\u200b\uff1a</p> <p>1.\u200b\u9a57\u8b49\u8005\u200bA\u200b\u72af\u4e0b\u200b\u9055\u898f\u884c\u200b\u70ba\u200b1\uff08\u200b\u50f9\u503c\u200b30%\u200b\u524a\u6e1b\u200b\uff09 2.\u200b\u9a57\u8b49\u8005\u200bA\u200b\u72af\u4e0b\u200b\u9055\u898f\u884c\u200b\u70ba\u200b2\uff08\u200b\u50f9\u503c\u200b40%\u200b\u524a\u6e1b\u200b\uff09 3.\u200b\u9a57\u8b49\u8005\u200bA\u200b\u72af\u4e0b\u200b\u9055\u898f\u884c\u200b\u70ba\u200b3\uff08\u200b\u50f9\u503c\u200b35%\u200b\u524a\u6e1b\u200b\uff09 4.\u200b\u9055\u898f\u884c\u200b\u70ba\u200b1\u200b\u7684\u200b\u8b49\u64da\u200b\u5230\u200b\u9054\u200b\u72c0\u614b\u6a5f\u200b\uff08\u200b\u4e26\u5c07\u9a57\u200b\u8b49\u8005\u200b\u95dc\u5165\u200b\u76e3\u7344\u200b\uff09 5.\u200b\u9055\u898f\u884c\u200b\u70ba\u200b2\u200b\u7684\u200b\u8b49\u64da\u200b\u5230\u200b\u9054\u200b\u72c0\u614b\u6a5f\u200b 6.\u200b\u9055\u898f\u884c\u200b\u70ba\u200b3\u200b\u7684\u200b\u8b49\u64da\u200b\u5230\u200b\u9054\u200b\u72c0\u614b\u6a5f\u200b</p> <p>\u200b\u53ea\u6709\u200b\u9055\u898f\u884c\u200b\u70ba\u200b2\u200b\u61c9\u8a72\u200b\u751f\u6548\u200b\u5176\u524a\u6e1b\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u200b\u662f\u200b\u6700\u9ad8\u200b\u7684\u200b\u3002 \u200b\u9019\u6a23\u200b\u505a\u200b\u662f\u200b\u70ba\u200b\u4e86\u200b\u5728\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u5171\u8b58\u5bc6\u200b\u9470\u200b\u88ab\u200b\u7834\u58de\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u5373\u4f7f\u200b\u9ed1\u5ba2\u200b\u5c0d\u591a\u500b\u200b\u5340\u584a\u200b\u9032\u884c\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\uff0c\u200b\u4ed6\u5011\u200b\u4e5f\u200b\u53ea\u6703\u200b\u88ab\u200b\u61f2\u7f70\u200b\u4e00\u6b21\u200b \u200b\u56e0\u70ba\u200b\uff0c\u200b\u89e3\u9664\u200b\u76e3\u7981\u200b\u5fc5\u9808\u200b\u4f7f\u7528\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u64cd\u4f5c\u200b\u5bc6\u9470\u200b\uff0c\u200b\u4ed6\u5011\u200b\u6709\u200b\u6a5f\u6703\u200b\u91cd\u65b0\u200b\u4fdd\u8b77\u200b\u4ed6\u5011\u200b\u7684\u200b\u5171\u8b58\u5bc6\u200b\u9470\u200b\uff0c\u200b\u7136\u200b\u5f8c\u200b\u4f7f\u7528\u200b\u4ed6\u5011\u200b\u7684\u200b\u64cd\u4f5c\u200b\u5bc6\u9470\u200b\u767c\u51fa\u200b\u4fe1\u865f\u200b\u8868\u660e\u200b\u4ed6\u5011\u200b\u5df2\u7d93\u200b\u6e96\u5099\u200b\u597d\u200b\u3002 \u200b\u6211\u5011\u200b\u5c07\u5728\u200b\u9019\u6bb5\u200b\u671f\u9593\u200b\u5167\u50c5\u200b\u8ffd\u8e2a\u200b\u6700\u5927\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\uff0c\u200b\u7a31\u70ba\u200b\"\u200b\u524a\u200b\u6e1b\u671f\u200b\"\u3002</p> <p>\u200b\u4e00\u65e6\u200b\u9a57\u8b49\u8005\u200b\u901a\u904e\u200b\u89e3\u9664\u200b\u76e3\u7981\u200b\u91cd\u65b0\u52a0\u5165\u200b\uff0c\u200b\u6211\u5011\u200b\u5c07\u958b\u59cb\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u524a\u200b\u6e1b\u671f\u200b\uff1b \u200b\u5982\u679c\u200b\u4ed6\u5011\u200b\u5728\u200b\u89e3\u9664\u200b\u76e3\u7981\u200b\u5f8c\u200b\u72af\u4e0b\u200b\u65b0\u200b\u7684\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\uff0c\u200b\u5247\u5c07\u200b\u5728\u200b\u524d\u200b\u4e00\u500b\u200b\u524a\u200b\u6e1b\u671f\u200b\u7684\u200b\u6700\u200b\u56b4\u91cd\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u57fa\u790e\u200b\u4e0a\u200b\u7d2f\u8a08\u200b\u524a\u6e1b\u200b\u3002</p> <p>\u200b\u7136\u800c\u200b\uff0c\u200b\u96d6\u7136\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u662f\u200b\u6839\u64da\u200b\u524a\u200b\u6e1b\u671f\u200b\u9032\u884c\u200b\u5206\u7d44\u200b\uff0c\u200b\u4f46\u200b\u7531\u200b\u65bc\u200b\u8b49\u64da\u200b\u53ef\u4ee5\u200b\u5728\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u4e4b\u200b\u5f8c\u200b\u7684\u200b\"\u200b\u89e3\u9664\u200b\u7d81\u200b\u5b9a\u671f\u200b\"\u200b\u5167\u200b\u63d0\u4ea4\u200b\uff0c \u200b\u6211\u5011\u200b\u4ecd\u7136\u200b\u5fc5\u9808\u200b\u5141\u8a31\u200b\u63d0\u4ea4\u200b\u5148\u524d\u200b\u524a\u200b\u6e1b\u671f\u200b\u7684\u200b\u8b49\u64da\u200b\u3002 \u200b\u4f8b\u5982\u200b\uff0c\u200b\u5982\u679c\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u9806\u5e8f\u200b\u662f\u200b\uff1a</p> <p>1.\u200b\u9a57\u8b49\u8005\u200bA\u200b\u72af\u4e0b\u200b\u9055\u898f\u884c\u200b\u70ba\u200b1\uff08\u200b\u50f9\u503c\u200b30%\u200b\u524a\u6e1b\u200b\uff09 2.\u200b\u9a57\u8b49\u8005\u200bA\u200b\u72af\u4e0b\u200b\u9055\u898f\u884c\u200b\u70ba\u200b2\uff08\u200b\u50f9\u503c\u200b40%\u200b\u524a\u6e1b\u200b\uff09 3.\u200b\u9055\u898f\u884c\u200b\u70ba\u200b1\u200b\u7684\u200b\u8b49\u64da\u200b\u5230\u200b\u9054\u200b\u72c0\u614b\u6a5f\u200b\uff08\u200b\u9a57\u8b49\u8005\u200bA\u200b\u88ab\u200b\u76e3\u7981\u200b\uff09 4.\u200b\u9a57\u8b49\u8005\u200bA\u200b\u89e3\u9664\u200b\u76e3\u7981\u200b</p> <p>\u200b\u6211\u5011\u200b\u73fe\u5728\u200b\u9032\u5165\u200b\u4e86\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u524a\u200b\u6e1b\u671f\u200b\uff0c\u200b\u4f46\u662f\u200b\u6211\u5011\u200b\u4ecd\u7136\u200b\u5fc5\u9808\u200b\u70ba\u200b\u4e4b\u524d\u200b\u7684\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u7559\u4e0b\u200b\u7a7a\u9593\u200b\uff0c\u200b\u56e0\u70ba\u200b\u9055\u898f\u884c\u200b\u70ba\u200b2\u200b\u7684\u200b\u8b49\u64da\u200b\u53ef\u80fd\u200b\u4ecd\u6703\u200b\u51fa\u73fe\u200b\u3002 \u200b\u96a8\u8457\u524a\u200b\u6e1b\u671f\u200b\u6578\u91cf\u200b\u7684\u200b\u589e\u52a0\u200b\uff0c\u200b\u5b83\u6703\u200b\u5e36\u4f86\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u8907\u200b\u96dc\u6027\u200b\uff0c\u200b\u56e0\u70ba\u200b\u6211\u5011\u200b\u5fc5\u9808\u200b\u8ddf\u8e2a\u200b\u6bcf\u500b\u200b\u524a\u200b\u6e1b\u671f\u200b\u7684\u200b\u6700\u9ad8\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u91d1\u984d\u200b\u3002 \u200b\u9019\u200b\u53ef\u80fd\u200b\u6703\u200b\u589e\u52a0\u200b\u4e00\u4e9b\u200b\u8907\u200b\u96dc\u6027\u200b\uff0c\u200b\u4f46\u200b\u9019\u662f\u200b\u5fc5\u8981\u200b\u7684\u200b\uff0c\u200b\u4ee5\u78ba\u200b\u4fdd\u6574\u200b\u500b\u200b\u7db2\u7d61\u200b\u7684\u200b\u5b89\u5168\u200b\u548c\u200b\u7a69\u5b9a\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u6839\u64da\u200b\u201c\u200b\u524a\u6e1b\u200b\u201d\u200b\u6a21\u584a\u200b\u7684\u200b\u898f\u7bc4\u200b\uff0c\u200b\u6bcf\u7576\u9a57\u200b\u8b49\u5668\u200b\u53d6\u6d88\u200b\u7d81\u200b\u5b9a\u7136\u200b\u5f8c\u200b\u91cd\u65b0\u200b\u7d81\u5b9a\u200b\u6642\u200b\uff0c\u200b\u5c31\u6703\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u524a\u200b\u6e1b\u671f\u200b\u3002\u200b\u9019\u200b\u53ef\u80fd\u200b\u61c9\u8a72\u200b\u66f4\u6539\u200b\u70ba\u200b\u88ab\u200b\u76e3\u7981\u200b/\u200b\u89e3\u9664\u200b\u76e3\u7981\u200b\u3002\u200b\u6709\u95dc\u200b\u66f4\u200b\u591a\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u53c3\u898b\u200b\u554f\u984c\u200b #3205\u3002 \u200b\u5728\u200b\u63a5\u4e0b\u200b\u4f86\u200b\u7684\u200b\u5167\u5bb9\u200b\u4e2d\u200b\uff0c\u200b\u6211\u5c07\u200b\u5047\u8a2d\u200b\u6211\u5011\u200b\u53ea\u6709\u200b\u5728\u9a57\u200b\u8b49\u5668\u200b\u88ab\u200b\u89e3\u9664\u200b\u76e3\u7981\u6642\u200b\u624d\u200b\u958b\u59cb\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u524a\u200b\u6e1b\u671f\u200b\u3002</p> <p>\u200b\u6700\u5927\u200b\u524a\u51cf\u200b\u671f\u6570\u200b\u662f\u200b <code>len(UnbondingPeriod) / len(JailPeriod)</code>\u3002 Gaia \u200b\u4e2d\u200b <code>UnbondingPeriod</code> \u200b\u548c\u200b <code>JailPeriod</code> \u200b\u7684\u200b\u9ed8\u8ba4\u503c\u200b\u5206\u522b\u200b\u4e3a\u200b 3 \u200b\u5468\u200b\u548c\u200b 2 \u200b\u5929\u200b\u3002\u200b\u8fd9\u200b\u610f\u5473\u7740\u200b\u6bcf\u4e2a\u200b\u9a8c\u8bc1\u200b\u5668\u200b\u53ef\u80fd\u200b\u540c\u65f6\u200b\u88ab\u200b\u8ddf\u8e2a\u200b\u591a\u8fbe\u200b 11 \u200b\u4e2a\u200b\u524a\u51cf\u200b\u671f\u200b\u3002 \u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u5c06\u200b <code>JailPeriod &gt;= UnbondingPeriod</code>\uff0c\u200b\u6211\u4eec\u200b\u53ea\u200b\u9700\u8981\u200b\u8ddf\u8e2a\u200b 1 \u200b\u4e2a\u200b\u524a\u51cf\u200b\u671f\u200b\uff08\u200b\u5373\u200b\u4e0d\u200b\u9700\u8981\u200b\u8ddf\u8e2a\u200b\u524a\u51cf\u200b\u671f\u200b\uff09\u3002</p> <p>\u200b\u76ee\u524d\u200b\uff0c\u200b\u5728\u200b\u76e3\u7981\u671f\u200b\u5be6\u73fe\u200b\u4e2d\u200b\uff0c\u200b\u4e00\u65e6\u200b\u9a57\u8b49\u5668\u200b\u89e3\u9664\u200b\u76e3\u7981\u200b\uff0c\u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u7d66\u4ed6\u200b\u5011\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\uff08\u200b\u6c92\u6709\u200b\u53d6\u6d88\u200b\u7d81\u5b9a\u200b/\u200b\u91cd\u65b0\u200b\u59d4\u200b\u8a17\u200b\uff09\u200b\u90fd\u200b\u6703\u200b\u7559\u5728\u200b\u4ed6\u5011\u200b\u8eab\u908a\u200b\u3002 \u200b\u9452\u200b\u65bc\u200b\u5171\u8b58\u200b\u5b89\u5168\u200b\u6545\u969c\u200b\u975e\u5e38\u200b\u56b4\u91cd\u200b\uff08\u200b\u6bd4\u200b\u6d3b\u6027\u200b\u6545\u969c\u200b\u56b4\u91cd\u200b\u5f97\u200b\u591a\u200b\uff09\uff0c\u200b\u8b93\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4e0d\u200b\u81ea\u52d5\u200b\u91cd\u65b0\u200b\u59d4\u200b\u8a17\u200b\u7d66\u9a57\u200b\u8b49\u5668\u200b\u53ef\u80fd\u200b\u662f\u200b\u660e\u667a\u200b\u7684\u200b\u9078\u64c7\u200b\u3002</p>"},{"location":"slashing/#_15","title":"\u63d0\u8b70\u200b\uff1a\u200b\u7121\u9650\u200b\u76e3\u7981","text":"<p>\u200b\u6211\u5011\u200b\u5efa\u8b70\u200b\u5c07\u5171\u8b58\u200b\u5b89\u5168\u200b\u6545\u969c\u200b\u7684\u200b\u201c\u200b\u76e3\u7981\u200b\u6642\u9593\u200b\u201d\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u7121\u9650\u200b\uff08\u200b\u5373\u200b\u5893\u7891\u200b\u72c0\u614b\u200b\uff09\u3002 \u200b\u9019\u5be6\u969b\u200b\u4e0a\u200b\u5c07\u9a57\u200b\u8b49\u5668\u200b\u8e22\u200b\u51fa\u9a57\u200b\u8b49\u5668\u200b\u96c6\u5408\u200b\uff0c\u200b\u4e26\u4e14\u200b\u4e0d\u200b\u5141\u8a31\u200b\u5b83\u5011\u200b\u91cd\u65b0\u200b\u9032\u5165\u9a57\u200b\u8b49\u5668\u200b\u96c6\u5408\u200b\u3002 \u200b\u4ed6\u5011\u200b\u7684\u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\uff08\u200b\u5305\u62ec\u200b\u64cd\u4f5c\u200b\u54e1\u200b\u672c\u8eab\u200b\uff09\u200b\u5fc5\u9808\u200b\u53d6\u6d88\u200b\u7d81\u5b9a\u200b\u6216\u200b\u91cd\u65b0\u200b\u59d4\u200b\u8a17\u200b\u3002 \u200b\u5982\u679c\u200b\u9a57\u8b49\u5668\u200b\u64cd\u4f5c\u200b\u54e1\u9858\u610f\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\uff0c\u200b\u5e36\u6709\u200b\u65b0\u200b\u7684\u200b\u64cd\u4f5c\u200b\u54e1\u5bc6\u200b\u9470\u200b\u548c\u200b\u5171\u8b58\u5bc6\u200b\u9470\u200b\uff0c\u200b\u4f46\u662f\u200b\u4ed6\u5011\u200b\u5fc5\u9808\u200b\u201c\u200b\u91cd\u65b0\u200b\u8d0f\u5f97\u200b\u201d\u200b\u4ed6\u5011\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u3002</p> <p>\u200b\u5be6\u73fe\u200b\u5893\u7891\u200b\u7cfb\u7d71\u200b\u4e26\u4e14\u200b\u64fa\u200b\u812b\u61f2\u200b\u7f70\u671f\u200b\u8ffd\u8e2a\u200b\u5c07\u4f7f\u200b <code>slashing</code> \u200b\u6a21\u584a\u200b\u8b8a\u5f97\u200b\u66f4\u200b\u7c21\u55ae\u200b\uff0c \u200b\u7279\u5225\u200b\u662f\u200b\u56e0\u70ba\u200b\u6211\u5011\u200b\u53ef\u4ee5\u200b\u522a\u9664\u200bstaking\u200b\u6a21\u584a\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u7684\u200b<code>slashing</code>\u200b\u6a21\u584a\u200b\u5b9a\u7fa9\u7684\u200b\u6240\u6709\u200b\u9264\u5b50\u200b\uff08<code>slashing</code>\u200b\u6a21\u584a\u200b\u4ecd\u7136\u200b\u4f7f\u7528\u200b<code>staking</code>\u200b\u4e2d\u5b9a\u200b\u7fa9\u7684\u200b\u9264\u5b50\u200b</p>"},{"location":"slashing/#_16","title":"\u5355\u6b21\u200b\u60e9\u7f5a\u200b\u91d1\u989d","text":"<p>\u200b\u53e6\u200b\u4e00\u500b\u200b\u53ef\u4ee5\u200b\u9032\u884c\u200b\u7684\u200b\u512a\u5316\u200b\u662f\u200b\uff0c\u200b\u5982\u679c\u200b\u6211\u5011\u200b\u5047\u8a2d\u200b\u6240\u6709\u200bTendermint\u200b\u5171\u8b58\u200b\u7684\u200bABCI\u200b\u6545\u969c\u200b\u90fd\u200b\u6703\u200b\u88ab\u200b\u524a\u6e1b\u200b\u76f8\u540c\u200b\u7684\u200b\u91d1\u984d\u200b\uff0c \u200b\u6211\u5011\u200b\u5c31\u200b\u4e0d\u5fc5\u200b\u8ddf\u8e2a\u200b\u201c\u200b\u6700\u5927\u200b\u524a\u200b\u6e1b\u91d1\u984d\u200b\u201d\u3002 \u200b\u4e00\u65e6\u200b\u767c\u751f\u200bABCI\u200b\u6545\u969c\u200b\uff0c\u200b\u6211\u5011\u200b\u5c31\u200b\u4e0d\u5fc5\u200b\u64d4\u5fc3\u200b\u6bd4\u8f03\u200b\u672a\u4f86\u200b\u53ef\u80fd\u200b\u767c\u751f\u200b\u7684\u200b\u6545\u969c\u200b\uff0c\u200b\u4ee5\u200b\u627e\u5230\u200b\u6700\u5927\u200b\u524a\u200b\u6e1b\u91d1\u984d\u200b\u3002</p> <p>\u200b\u76ee\u524d\u200b\u552f\u4e00\u200b\u7684\u200b Tendermint ABCI \u200b\u6545\u969c\u200b\u662f\u200b\uff1a</p> <ul> <li>\u200b\u4e0d\u5408\u7406\u200b\u7684\u200b\u9810\u200b\u63d0\u4ea4\u200b\uff08\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\uff09</li> </ul> <p>\u200b\u76ee\u524d\u200b\u8a08\u5283\u200b\u5728\u200b\u4e0d\u4e45\u200b\u7684\u200b\u5c07\u4f86\u200b\u5305\u62ec\u200b\u4ee5\u4e0b\u200b\u6545\u969c\u200b\uff1a</p> <ul> <li>\u200b\u5728\u200b\u672a\u200b\u7d81\u200b\u5b9a\u671f\u200b\u9593\u200b\u7c3d\u7f72\u200b\u9810\u200b\u63d0\u4ea4\u200b\uff08\u200b\u9700\u8981\u200b\u4f7f\u8f15\u200b\u5ba2\u6236\u200b\u7aef\u200b\u4e8c\u5206\u6cd5\u200b\u5b89\u5168\u200b\uff09</li> </ul> <p>\u200b\u9451\u200b\u65bc\u200b\u9019\u4e9b\u200b\u6545\u969c\u200b\u90fd\u200b\u662f\u200b\u53ef\u200b\u6b78\u200b\u56e0\u200b\u7684\u200b\u62dc\u5360\u5ead\u200b\u6545\u969c\u200b\uff0c\u200b\u6211\u5011\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u5c0d\u200b\u5b83\u5011\u200b\u9032\u884c\u200b\u76f8\u540c\u200b\u7684\u200b\u61f2\u7f70\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u5011\u200b\u53ef\u4ee5\u200b\u5be6\u65bd\u200b\u4e0a\u8ff0\u200b\u66f4\u6539\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u6b64\u200b\u66f4\u6539\u200b\u53ef\u80fd\u200b\u5c0d\u200b\u7576\u524d\u200b\u7684\u200bTendermint\u200b\u5171\u8b58\u200b\u7b97\u6cd5\u200b\u6709\u610f\u200b\u7fa9\u200b\uff0c \u200b\u4f46\u200b\u5c0d\u200b\u65bc\u200b\u4e0d\u540c\u200b\u7684\u200b\u5171\u8b58\u200b\u7b97\u6cd5\u200b\u6216\u200b\u672a\u4f86\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u4ee5\u200b\u4e0d\u540c\u200b\u7d1a\u5225\u200b\u9032\u884c\u200b\u61f2\u7f70\u200b\uff08\u200b\u4f8b\u5982\u200b\u90e8\u5206\u200b\u61f2\u7f70\u200b\uff09\u200b\u7684\u200bTendermint\u200b\u7248\u672c\u200b\u53ef\u80fd\u200b\u6c92\u200b\u6709\u610f\u200b\u7fa9\u200b\u3002</p>"},{"location":"slashing/#parameters","title":"Parameters(\u200b\u53c3\u6578\u200b)","text":"<p>\u200b\u61f2\u7f70\u200b\u6a21\u7d44\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u53c3\u6578\u200b</p> Key Type Example SignedBlocksWindow string (int64) \"100\" MinSignedPerWindow string (dec) \"0.500000000000000000\" DowntimeJailDuration string (ns) \"600000000000\" SlashFractionDoubleSign string (dec) \"0.050000000000000000\" SlashFractionDowntime string (dec) \"0.010000000000000000\""},{"location":"slashing/#cli","title":"CLI","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u547d\u4ee4\u884c\u200b\u754c\u9762\u200b\uff08CLI\uff09\u200b\u67e5\u8a62\u200b\u548c\u200b\u8207\u200b<code>slashing</code>\u200b\u6a21\u7d44\u200b\u9032\u884c\u200b\u4e92\u52d5\u200b\u3002</p>"},{"location":"slashing/#query","title":"Query","text":"<p><code>query</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b<code>slashing</code>\u200b\u72c0\u614b\u200b\u3002</p> <pre><code>stcd query slashing --help\n</code></pre>"},{"location":"slashing/#params","title":"params","text":"<p>params\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200bslashing\u200b\u6a21\u7d44\u200b\u7684\u200b\u5275\u4e16\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>stcd query slashing params [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query slashing params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>downtime_jail_duration: 600s\nmin_signed_per_window: \"0.500000000000000000\"\nsigned_blocks_window: \"100\"\nslash_fraction_double_sign: \"0.050000000000000000\"\nslash_fraction_downtime: \"0.010000000000000000\"\n</code></pre>"},{"location":"slashing/#signing-info","title":"signing-info","text":"<p><code>signing-info</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u4f7f\u7528\u200b\u5171\u8b58\u200b\u516c\u9470\u67e5\u200b\u8a62\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u7c3d\u540d\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>stcd query slashing signing-infos [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query slashing signing-info '{\"@type\":\"/cosmos.crypto.ed25519.PubKey\",\"key\":\"Auxs3865HpB/EfssYOzfqNhEJjzys6jD5B6tPgC8=\"}'\n\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>address: cosmosvalcons1nrqsld3aw6lh6t082frdqc84uwxn0t958c\nindex_offset: \"2068\"\njailed_until: \"1970-01-01T00:00:00Z\"\nmissed_blocks_counter: \"0\"\nstart_height: \"0\"\ntombstoned: false\n</code></pre>"},{"location":"slashing/#signing-infos","title":"signing-infos","text":"<p><code>signing-infos</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u7c3d\u540d\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>stcd query slashing signing-infos [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query slashing signing-infos\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>info:\n- address: cosmosvalcons1nrqsld3aw6lh6t082frdqc84uwxn0t958c\n  index_offset: \"2075\"\n  jailed_until: \"1970-01-01T00:00:00Z\"\n  missed_blocks_counter: \"0\"\n  start_height: \"0\"\n  tombstoned: false\npagination:\n  next_key: null\n  total: \"0\"\n</code></pre>"},{"location":"slashing/#_17","title":"\u4ea4\u6613","text":"<p><code>tx</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u8207\u200b<code>slashing</code>\u200b\u6a21\u7d44\u200b\u9032\u884c\u200b\u4e92\u52d5\u200b\u3002</p> <pre><code> tx slashing --help\n</code></pre>"},{"location":"slashing/#unjail_1","title":"unjail","text":"<p><code>unjail</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u89e3\u7981\u200b\u5148\u524d\u200b\u56e0\u505c\u200b\u6a5f\u6642\u9593\u200b\u800c\u200b\u88ab\u200b\u7981\u7528\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u3002</p> <pre><code>  simd tx slashing unjail --from mykey [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd tx slashing unjail --from mykey\n</code></pre>"},{"location":"slashing/#grpc","title":"gRPC","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200bgRPC\u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b<code>slashing</code>\u200b\u6a21\u7d44\u200b\u3002</p>"},{"location":"slashing/#params_1","title":"Params","text":"<p><code>Params</code>\u200b\u7aef\u9ede\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u524a\u200b\u6e1b\u6a21\u7d44\u200b\u7684\u200b\u53c3\u6578\u200b\u3002</p> <pre><code>cosmos.slashing.v1beta1.Query/Params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext localhost:9090 cosmos.slashing.v1beta1.Query/Params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"params\": {\n    \"signedBlocksWindow\": \"100\",\n    \"minSignedPerWindow\": \"NTAwMDAwMDAwMDAwMDAwMDAw\",\n    \"downtimeJailDuration\": \"600s\",\n    \"slashFractionDoubleSign\": \"NTAwMDAwMDAwMDAwMDAwMDA=\",\n    \"slashFractionDowntime\": \"MTAwMDAwMDAwMDAwMDAwMDA=\"\n  }\n}\n</code></pre>"},{"location":"slashing/#signinginfo","title":"SigningInfo","text":"<p>SigningInfo\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u200b\u5171\u8b58\u200b\u5730\u5740\u200b\u7684\u200b\u7c3d\u540d\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.slashing.v1beta1.Query/SigningInfo\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext -d '{\"cons_address\":\"cosmosvalcons1nrqsld3aw6lh6t082frdqc84uwxn0t958c\"}' localhost:9090 cosmos.slashing.v1beta1.Query/SigningInfo\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"valSigningInfo\": {\n    \"address\": \"cosmosvalcons1nrqsld3aw6lh6t082frdqc84uwxn0t958c\",\n    \"indexOffset\": \"3493\",\n    \"jailedUntil\": \"1970-01-01T00:00:00Z\"\n  }\n}\n</code></pre>"},{"location":"slashing/#signinginfos","title":"SigningInfos","text":"<p><code>SigningInfos</code>\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u7c3d\u540d\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.slashing.v1beta1.Query/SigningInfos\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext localhost:9090 cosmos.slashing.v1beta1.Query/SigningInfos\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"info\": [\n    {\n      \"address\": \"cosmosvalcons1nrqslkwd3pz096lh6t082frdqc84uwxn0t958c\",\n      \"indexOffset\": \"2467\",\n      \"jailedUntil\": \"1970-01-01T00:00:00Z\"\n    }\n  ],\n  \"pagination\": {\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"slashing/#rest","title":"REST","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200bREST\u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b<code>slashing</code>\u200b\u6a21\u7d44\u200b\u3002</p>"},{"location":"slashing/#params_2","title":"Params","text":"<pre><code>/cosmos/slashing/v1beta1/params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl \"localhost:1317/cosmos/slashing/v1beta1/params\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"params\": {\n    \"signed_blocks_window\": \"100\",\n    \"min_signed_per_window\": \"0.500000000000000000\",\n    \"downtime_jail_duration\": \"600s\",\n    \"slash_fraction_double_sign\": \"0.050000000000000000\",\n    \"slash_fraction_downtime\": \"0.010000000000000000\"\n}\n</code></pre>"},{"location":"slashing/#signing_info","title":"signing_info","text":"<pre><code>/cosmos/slashing/v1beta1/signing_infos/%s\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl \"localhost:1317/cosmos/slashing/v1beta1/signing_infos/cosmosvalcons1nrqslkwd3pz096lh6t082frdqc84uwxn0t958c\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"val_signing_info\": {\n    \"address\": \"cosmosvalcons1nrqslkwd3pz096lh6t082frdqc84uwxn0t958c\",\n    \"start_height\": \"0\",\n    \"index_offset\": \"4184\",\n    \"jailed_until\": \"1970-01-01T00:00:00Z\",\n    \"tombstoned\": false,\n    \"missed_blocks_counter\": \"0\"\n  }\n}\n</code></pre>"},{"location":"slashing/#signing_infos","title":"signing_infos","text":"<pre><code>/cosmos/slashing/v1beta1/signing_infos\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl \"localhost:1317/cosmos/slashing/v1beta1/signing_infos\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"info\": [\n    {\n      \"address\": \"cosmosvalcons1nrqslkwd3pz096lh6t082frdqc84uwxn0t958c\",\n      \"start_height\": \"0\",\n      \"index_offset\": \"4169\",\n      \"jailed_until\": \"1970-01-01T00:00:00Z\",\n      \"tombstoned\": false,\n      \"missed_blocks_counter\": \"0\"\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/","title":"DPOS\u200b\u8cea\u62bc","text":""},{"location":"staking/#_1","title":"<code>\u200b\u62b5\u62bc\u200b</code>","text":""},{"location":"staking/#_2","title":"\u6982\u5ff5","text":"<p>\u200b\u672c\u200b\u6587\u660e\u200b\u78ba\u4e86\u200b\u62b5\u62bc\u200b\u6a21\u7d44\u200b\u3002</p> <p>\u200b\u6b64\u6a21\u200b\u7d44\u4f7f\u200b\u57fa\u200b\u65bc\u200bCosmos-SDK\u200b\u7684\u200b\u5340\u584a\u200b\u93c8\u80fd\u5920\u200b\u652f\u6301\u200b\u5148\u9032\u200b\u7684\u200b\u6b0a\u76ca\u200b\u8b49\u660e\u200b\u7cfb\u7d71\u200b\u3002 \u200b\u5728\u200b\u6b64\u7cfb\u7d71\u200b\u4e2d\u200b\uff0c\u200b\u93c8\u200b\u7684\u200b\u672c\u5730\u200b\u62b5\u62bc\u200b\u4ee3\u5e63\u200b\u6301\u6709\u8005\u200b\u53ef\u4ee5\u200b\u6210\u70ba\u9a57\u200b\u8b49\u8005\u200b\uff0c\u200b\u4e26\u200b\u53ef\u4ee5\u200b\u5c07\u4ee3\u5e63\u59d4\u200b\u8a17\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u6700\u7d42\u200b\u78ba\u5b9a\u200b\u7cfb\u7d71\u200b\u7684\u200b\u6709\u6548\u200b\u9a57\u8b49\u8005\u200b\u96c6\u5408\u200b\u3002</p>"},{"location":"staking/#_3","title":"\u5167\u5bb9","text":""},{"location":"staking/#_4","title":"\u72c0\u614b","text":""},{"location":"staking/#_5","title":"\u6c60","text":"<p>\u200b\u6c60\u7528\u200b\u65bc\u200b\u8ffd\u8e2a\u200b\u5df2\u200b\u7d81\u5b9a\u200b\u548c\u200b\u672a\u200b\u7d81\u200b\u5b9a\u7684\u50b5\u200b\u5238\u9762\u200b\u984d\u4ee3\u5e63\u200b\u4f9b\u61c9\u200b\u3002</p>"},{"location":"staking/#lasttotalpower","title":"\u6700\u5f8c\u7e3d\u200b\u529f\u7387\u200b\uff08LastTotalPower\uff09","text":"<p>LastTotalPower \u200b\u8ffd\u8e2a\u200b\u4e86\u200b\u5728\u200b\u4e0a\u200b\u4e00\u500b\u200b\u7d50\u675f\u200b\u5340\u584a\u200b\u671f\u9593\u200b\u8a18\u9304\u200b\u7684\u200b\u5df2\u200b\u7d81\u200b\u5b9a\u4ee3\u5e63\u200b\u7684\u200b\u7e3d\u91cf\u200b\u3002\u200b\u4ee5\u200b \"Last\" \u200b\u70ba\u200b\u524d\u7db4\u200b\u7684\u200b\u5b58\u5132\u200b\u689d\u76ee\u200b\u5728\u200b EndBlock \u200b\u4e4b\u524d\u200b\u5fc5\u9808\u200b\u4fdd\u6301\u200b\u4e0d\u8b8a\u200b\u3002</p> <ul> <li>LastTotalPower: <code>0x12 -&gt; ProtocolBuffer(sdk.Int)</code></li> </ul>"},{"location":"staking/#params","title":"Params","text":"<p>Params \u200b\u662f\u200b\u4e00\u500b\u200b\u6a21\u7d44\u7bc4\u7587\u200b\u7684\u200b\u914d\u7f6e\u200b\u7d50\u69cb\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u5b58\u5132\u7cfb\u7d71\u200b\u53c3\u6578\u200b\u4e26\u5b9a\u200b\u7fa9\u6b0a\u76ca\u200b\u64fa\u653e\u200b\u6a21\u7d44\u200b\u7684\u200b\u6574\u9ad4\u200b\u904b\u4f5c\u200b\u65b9\u5f0f\u200b\u3002</p> <ul> <li>Params: <code>Paramsspace(\"staking\") -&gt; legacy_amino(params)</code></li> </ul> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.1/proto/cosmos/staking/v1beta1/staking.proto#L230-L241</p>"},{"location":"staking/#_6","title":"\u9a57\u8b49\u8005","text":"<p>\u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u6709\u4e09\u7a2e\u200b\u72c0\u614b\u200b\u4e4b\u4e00\u200b\u3002</p> <ul> <li><code>Unbonded</code>\uff1a\u200b\u9a57\u8b49\u8005\u200b\u4e0d\u200b\u5728\u200b\u6d3b\u8e8d\u200b\u96c6\u5408\u200b\u4e2d\u200b\u3002\u200b\u4ed6\u5011\u200b\u7121\u6cd5\u200b\u7c3d\u7f72\u200b\u5340\u584a\u200b\u4e26\u4e14\u200b\u4e0d\u200b\u7372\u5f97\u200b\u734e\u52f5\u200b\u3002\u200b\u4f46\u200b\u4ed6\u5011\u200b\u53ef\u4ee5\u200b\u63a5\u6536\u200b\u59d4\u200b\u8a17\u200b\u3002</li> <li><code>Bonded</code>: \u200b\u4e00\u65e6\u200b\u9a57\u8b49\u8005\u200b\u7372\u5f97\u200b\u8db3\u5920\u200b\u7684\u200b\u7d81\u200b\u5b9a\u4ee3\u5e63\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5c07\u5728\u200b EndBlock \u200b\u671f\u9593\u200b\u81ea\u52d5\u200b\u52a0\u5165\u200b\u6d3b\u8e8d\u200b\u96c6\u5408\u200b\uff0c\u200b\u4e26\u5c07\u200b\u5176\u72c0\u614b\u200b\u66f4\u65b0\u200b\u70ba\u200b Bonded\u3002\u200b\u4ed6\u5011\u200b\u6b63\u5728\u200b\u7c3d\u7f72\u200b\u5340\u584a\u200b\u4e26\u7372\u200b\u5f97\u200b\u734e\u52f5\u200b\u3002    \u200b\u4ed6\u5011\u200b\u53ef\u4ee5\u200b\u63a5\u6536\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u3002    \u200b\u4ed6\u5011\u200b\u53ef\u80fd\u200b\u56e0\u884c\u200b\u70ba\u200b\u4e0d\u7aef\u200b\u800c\u200b\u88ab\u200b\u524a\u6e1b\u200b\u3002\u200b\u5c0d\u200b\u6b64\u9a57\u200b\u8b49\u8005\u200b\u89e3\u9664\u200b\u59d4\u200b\u8a17\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5fc5\u9808\u200b\u7b49\u5f85\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u6642\u9593\u200b\uff08<code>UnbondingTime</code>\uff0c\u200b\u4e00\u500b\u200b\u93c8\u200b\u7279\u5b9a\u200b\u7684\u200b\u53c3\u6578\u200b\uff09\uff0c    \u200b\u5728\u200b\u6b64\u200b\u671f\u9593\u200b\uff0c\u200b\u5982\u679c\u200b\u6e90\u9a57\u200b\u8b49\u8005\u200b\u5728\u200b\u4ee3\u5e63\u200b\u7d81\u200b\u5b9a\u671f\u200b\u9593\u200b\u72af\u4e0b\u200b\u4e86\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4ecd\u7136\u200b\u6709\u200b\u53ef\u80fd\u200b\u88ab\u200b\u524a\u6e1b\u200b\u3002</li> <li><code>Unbonding</code>: When a validator leaves the active set, either by choice or due to slashing, jailing or   tombstoning, an unbonding of all their delegations begins. All delegations must then wait the UnbondingTime   before their tokens are moved to their accounts from the <code>BondedPool</code>.</li> </ul> <p>\u200b\u9a57\u8b49\u8005\u200b\u5c0d\u8c61\u200b\u61c9\u200b\u4e3b\u8981\u200b\u901a\u904e\u200bOperatorAddr\u200b\u5b58\u5132\u200b\u548c\u200b\u8a2a\u554f\u200b\uff0cOperatorAddr\u200b\u662f\u9a57\u200b\u8b49\u8005\u200b\u64cd\u4f5c\u8005\u200b\u7684\u200bSDK\u200b\u9a57\u8b49\u8005\u200b\u5730\u5740\u200b\u3002 \u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u5c0d\u8c61\u200b\u90fd\u200b\u9700\u8981\u200b\u7dad\u8b77\u200b\u5169\u500b\u200b\u984d\u5916\u200b\u7684\u200b\u7d22\u5f15\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u5b8c\u6210\u200b\u524a\u200b\u6e1b\u548c\u9a57\u200b\u8b49\u8005\u200b\u96c6\u5408\u200b\u66f4\u65b0\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u67e5\u627e\u200b\u3002 \u200b\u9084\u7dad\u8b77\u200b\u4e86\u200b\u7b2c\u4e09\u200b\u500b\u200b\u7279\u6b8a\u200b\u7d22\u5f15\u200b\uff08LastValidatorPower\uff09\uff0c\u200b\u4f46\u662f\u200b\u5b83\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b\u4fdd\u6301\u200b\u4e0d\u8b8a\u200b\uff0c\u200b\u8207\u200b\u524d\u200b\u5169\u500b\u200b\u7d22\u5f15\u200b\u4e0d\u540c\u200b\uff0c\u200b\u524d\u200b\u5169\u500b\u200b\u7d22\u5f15\u200b\u5728\u200b\u5340\u584a\u200b\u5167\u200b\u53cd\u6620\u200b\u9a57\u8b49\u8005\u200b\u8a18\u9304\u200b\u3002</p> <ul> <li>Validators: <code>0x21 | OperatorAddrLen (1 byte) | OperatorAddr -&gt; ProtocolBuffer(validator)</code></li> <li>ValidatorsByConsAddr: <code>0x22 | ConsAddrLen (1 byte) | ConsAddr -&gt; OperatorAddr</code></li> <li>ValidatorsByPower: <code>0x23 | BigEndian(ConsensusPower) | OperatorAddrLen (1 byte) | OperatorAddr -&gt; OperatorAddr</code></li> <li>LastValidatorsPower: <code>0x11 | OperatorAddrLen (1 byte) | OperatorAddr -&gt; ProtocolBuffer(ConsensusPower)</code></li> </ul> <p><code>Validators</code> \u200b\u662f\u200b\u4e3b\u8981\u200b\u7684\u200b\u7d22\u5f15\u200b - \u200b\u5b83\u200b\u78ba\u4fdd\u200b\u6bcf\u500b\u200b\u64cd\u4f5c\u8005\u200b\u53ea\u80fd\u200b\u64c1\u6709\u200b\u4e00\u500b\u200b\u95dc\u806f\u9a57\u200b\u8b49\u8005\u200b\uff0c\u200b\u5176\u4e2d\u200b\u8a72\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u516c\u9470\u200b\u53ef\u4ee5\u200b\u5728\u200b\u672a\u4f86\u200b\u6539\u8b8a\u200b\u3002 \u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u53ef\u4ee5\u200b\u5f15\u7528\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u4e0d\u53ef\u200b\u8b8a\u200b\u64cd\u4f5c\u8005\u200b\uff0c\u200b\u800c\u200b\u7121\u200b\u9700\u64d4\u200b\u5fc3\u516c\u9470\u200b\u7684\u200b\u8b8a\u5316\u200b\u3002</p> <p><code>ValidatorByConsAddr</code> \u200b\u662f\u200b\u4e00\u500b\u200b\u984d\u5916\u200b\u7684\u200b\u7d22\u5f15\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u652f\u6301\u200b\u524a\u6e1b\u200b\u67e5\u627e\u200b\u3002 \u200b\u7576\u200b Tendermint \u200b\u5831\u544a\u200b\u8b49\u64da\u200b\u6642\u200b\uff0c\u200b\u5b83\u200b\u63d0\u4f9b\u200b\u9a57\u8b49\u8005\u200b\u5730\u5740\u200b\uff0c\u200b\u56e0\u6b64\u200b\u9700\u8981\u200b\u6b64\u200b\u6620\u5c04\u200b\u4f86\u200b\u67e5\u627e\u200b\u64cd\u4f5c\u8005\u200b \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0cConsAddr \u200b\u5c0d\u61c9\u200b\u65bc\u200b\u53ef\u4ee5\u200b\u5f9e\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b ConsPubKey \u200b\u63a8\u5c0e\u51fa\u200b\u7684\u200b\u5730\u5740\u200b\u3002</p> <p><code>ValidatorsByPower</code> \u200b\u662f\u200b\u4e00\u500b\u200b\u984d\u5916\u200b\u7684\u200b\u7d22\u5f15\u200b\uff0c\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u500b\u200b\u6392\u5e8f\u200b\u5f8c\u200b\u7684\u200b\u6f5b\u5728\u9a57\u200b\u8b49\u8005\u200b\u5217\u8868\u200b\uff0c\u200b\u4ee5\u200b\u5feb\u901f\u200b\u78ba\u5b9a\u200b\u7576\u524d\u200b\u7684\u200b\u6d3b\u8e8d\u200b\u96c6\u5408\u200b\u3002 \u200b\u5728\u200b\u6b64\u200b\uff0c\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0cConsensusPower \u200b\u7b49\u200b\u65bc\u200b validator.Tokens/10^6\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u6240\u6709\u200b Jailed \u200b\u70ba\u200b true \u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u90fd\u200b\u4e0d\u6703\u200b\u5b58\u5132\u200b\u5728\u200b\u6b64\u200b\u7d22\u5f15\u200b\u4e2d\u200b\u3002</p> <p><code>LastValidatorsPower</code> \u200b\u662f\u200b\u4e00\u500b\u200b\u7279\u6b8a\u200b\u7684\u200b\u7d22\u5f15\u200b\uff0c\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e0a\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u7d81\u200b\u5b9a\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u6b77\u53f2\u200b\u5217\u8868\u200b\u3002\u200b\u9019\u500b\u200b\u7d22\u5f15\u200b\u5728\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b\u4fdd\u6301\u200b\u4e0d\u8b8a\u200b\uff0c\u200b\u4f46\u200b\u5728\u200b\u9a57\u8b49\u8005\u200b\u96c6\u5408\u200b\u66f4\u65b0\u200b\u904e\u7a0b\u200b\u4e2d\u6703\u200b\u66f4\u65b0\u200b\uff0c\u200b\u8a72\u200b\u904e\u7a0b\u200b\u767c\u751f\u200b\u5728\u200b  <code>EndBlock</code>.</p> <p>\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u72c0\u614b\u200b\u90fd\u200b\u5b58\u5132\u200b\u5728\u200b\u4e00\u500b\u200b Validator \u200b\u7d50\u69cb\u200b\u4e2d\u200b\uff1a</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/staking.proto#L65-L99</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/staking.proto#L24-L63</p>"},{"location":"staking/#delegation","title":"Delegation\uff08\u200b\u59d4\u200b\u8a17\u200b\uff09","text":"<p>\u200b\u59d4\u200b\u8a17\u200b\u662f\u200b\u901a\u904e\u200b\u7d44\u5408\u200b DelegatorAddr\uff08\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5730\u5740\u200b\uff09\u200b\u548c\u200b ValidatorAddr\uff08\u200b\u9a57\u8b49\u8005\u200b\u5730\u5740\u200b\uff09\u200b\u4f86\u200b\u6a19\u8b58\u200b\u7684\u200b\u3002\u200b\u5728\u200b\u5b58\u5132\u4e2d\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6309\u200b\u4ee5\u4e0b\u200b\u65b9\u5f0f\u200b\u9032\u884c\u200b\u7d22\u5f15\u200b\uff1a</p> <ul> <li>Delegation: <code>0x31 | DelegatorAddrLen (1 byte) | DelegatorAddr | ValidatorAddrLen (1 byte) | ValidatorAddr -&gt; ProtocolBuffer(delegation)</code></li> </ul> <p>\u200b\u6301\u6709\u8005\u200b\u53ef\u4ee5\u200b\u5c07\u4ee3\u5e63\u59d4\u200b\u8a17\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\uff1b\u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u4ed6\u5011\u200b\u7684\u200b\u8cc7\u91d1\u200b\u88ab\u200b\u4fdd\u5b58\u200b\u5728\u200b\u4e00\u500b\u200b Delegation \u200b\u6578\u64da\u200b\u7d50\u69cb\u200b\u4e2d\u200b\u3002 \u200b\u5b83\u200b\u7531\u200b\u4e00\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u64c1\u6709\u200b\uff0c\u200b\u4e26\u8207\u200b\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u80a1\u4efd\u200b\u76f8\u95dc\u806f\u200b\u3002\u200b\u4ea4\u6613\u200b\u7684\u200b\u767c\u9001\u8005\u200b\u662f\u200b\u9019\u500b\u200b\u64c1\u6709\u8005\u200b\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/staking.proto#L159-L170</p>"},{"location":"staking/#_7","title":"\u59d4\u200b\u8a17\u200b\u4eba\u200b\u80a1\u4efd","text":"<p>\u200b\u7576\u200b\u67d0\u4eba\u200b\u5c07\u4ee3\u5e63\u59d4\u200b\u8a17\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u6642\u200b\uff0c \u200b\u4ed6\u5011\u200b\u5c07\u6839\u64da\u200b\u4e00\u500b\u200b\u52d5\u614b\u200b\u532f\u7387\u200b\u7372\u5f97\u200b\u4e00\u5b9a\u200b\u6578\u91cf\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u80a1\u4efd\u200b\uff0c \u200b\u8a72\u200b\u532f\u7387\u200b\u6839\u64da\u200b\u5df2\u59d4\u200b\u8a17\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u4ee3\u5e63\u200b\u7e3d\u6578\u200b\u548c\u200b\u8fc4\u4eca\u200b\u70ba\u6b62\u200b\u767c\u884c\u200b\u7684\u200b\u80a1\u4efd\u200b\u6578\u91cf\u200b\u8a08\u7b97\u200b\uff0c\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b\uff1a</p> <p><code>Shares per Token = validator.TotalShares() / validator.Tokens()</code></p> <p>\u200b\u5728\u200bDelegationEntry\u200b\u4e0a\u200b\u53ea\u200b\u5b58\u5132\u200b\u4e86\u200b\u6536\u5230\u200b\u7684\u200b\u80a1\u4efd\u200b\u6578\u91cf\u200b\u3002 \u200b\u7576\u59d4\u200b\u8a17\u200b\u4eba\u200b\u53d6\u6d88\u200b\u59d4\u200b\u8a17\u200b\u6642\u200b\uff0c\u200b\u4ed6\u5011\u200b\u6536\u5230\u200b\u7684\u200b\u4ee3\u5e63\u200b\u6578\u91cf\u200b\u662f\u200b\u6839\u64da\u200b\u4ed6\u5011\u200b\u76ee\u524d\u200b\u6301\u6709\u200b\u7684\u200b\u80a1\u4efd\u200b\u6578\u91cf\u200b\u548c\u200b\u76f8\u53cd\u200b\u7684\u200b\u532f\u7387\u200b\u8a08\u7b97\u200b\u7684\u200b\uff1a</p> <p><code>Tokens per Share = validator.Tokens() / validatorShares()</code></p> <p>\u200b\u9019\u4e9b\u200b\u80a1\u4efd\u200b\u50c5\u50c5\u200b\u662f\u200b\u4e00\u7a2e\u200b\u8a18\u8cec\u200b\u6a5f\u5236\u200b\uff0c\u200b\u5b83\u5011\u200b\u4e0d\u662f\u200b\u4e00\u7a2e\u200b\u53ef\u4e92\u63db\u200b\u7684\u200b\u8cc7\u7522\u200b\u3002 \u200b\u4f7f\u7528\u200b\u9019\u7a2e\u200b\u6a5f\u5236\u200b\u7684\u200b\u539f\u56e0\u200b\u662f\u200b\u70ba\u200b\u4e86\u200b\u7c21\u5316\u200b\u5c0d\u59d4\u200b\u8a17\u200b\u61f2\u7f70\u200b\u7684\u200b\u8a18\u8cec\u200b\u3002 \u200b\u8207\u200b\u5176\u200b\u8fed\u4ee3\u200b\u5730\u200b\u61f2\u7f70\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u689d\u200b\u76ee\u7684\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u4e0d\u5982\u200b\u76f4\u63a5\u200b\u61f2\u7f70\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u7e3d\u200b\u62b5\u62bc\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u6709\u6548\u200b\u5730\u200b\u964d\u4f4e\u200b\u6bcf\u500b\u200b\u5df2\u200b\u767c\u884c\u59d4\u200b\u8a17\u200b\u4eba\u200b\u80a1\u4efd\u200b\u7684\u200b\u50f9\u503c\u200b\u3002</p>"},{"location":"staking/#_8","title":"\u89e3\u9664\u200b\u59d4\u200b\u8a17","text":"<p>\u200b\u5728\u200b<code>Delegation</code>\u200b\u4e2d\u200b\u7684\u200b\u80a1\u4efd\u200b\u53ef\u4ee5\u200b\u89e3\u9664\u200b\u62b5\u62bc\u200b\uff0c\u200b\u4f46\u200b\u5b83\u5011\u200b\u5fc5\u9808\u200b\u5728\u200b\u4e00\u6bb5\u200b\u6642\u9593\u200b\u5167\u4f5c\u200b\u70ba\u200b<code>UnbondingDelegation</code>\u200b\u5b58\u5728\u200b\uff0c\u200b\u5982\u679c\u200b\u6aa2\u6e2c\u200b\u5230\u200b\u62dc\u5360\u5ead\u200b\u884c\u70ba\u200b\uff0c\u200b\u80a1\u4efd\u200b\u53ef\u4ee5\u200b\u76f8\u61c9\u200b\u6e1b\u5c11\u200b\u3002</p> <p><code>UnbondingDelegation</code> \u200b\u5728\u200b\u5b58\u5132\u4e2d\u200b\u7684\u200b\u7d22\u5f15\u200b\u65b9\u5f0f\u200b\u70ba\u200b\uff1a</p> <ul> <li>UnbondingDelegation: <code>0x32 | DelegatorAddrLen (1 byte) | DelegatorAddr | ValidatorAddrLen (1 byte) | ValidatorAddr -&gt; ProtocolBuffer(unbondingDelegation)</code></li> <li>UnbondingDelegationsFromValidator: <code>0x33 | ValidatorAddrLen (1 byte) | ValidatorAddr | DelegatorAddrLen (1 byte) | DelegatorAddr -&gt; nil</code></li> </ul> <p>\u200b\u7b2c\u4e00\u200b\u500b\u200b\u6620\u5c04\u200b\u7528\u200b\u65bc\u200b\u67e5\u8a62\u200b\uff0c\u200b\u67e5\u627e\u200b\u7d66\u5b9a\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u6240\u6709\u200b\u89e3\u9664\u200b\u59d4\u200b\u8a17\u200b\uff1b \u200b\u7b2c\u4e8c\u200b\u500b\u200b\u6620\u5c04\u200b\u7528\u200b\u65bc\u200b\u524a\u6e1b\u200b\uff0c\u200b\u67e5\u627e\u200b\u8207\u200b\u7d66\u5b9a\u9a57\u200b\u8b49\u8005\u200b\u76f8\u95dc\u200b\u7684\u200b\u6240\u6709\u200b\u9700\u8981\u200b\u524a\u6e1b\u200b\u7684\u200b\u89e3\u9664\u200b\u59d4\u200b\u8a17\u200b\u3002</p> <p>\u200b\u6bcf\u6b21\u200b\u555f\u52d5\u200b\u89e3\u9664\u200b\u62b5\u62bc\u200b\u6642\u200b\uff0c\u200b\u90fd\u200b\u6703\u200b\u5275\u5efa\u200b\u4e00\u500b\u200bUnbondingDelegation\u200b\u5c0d\u8c61\u200b\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/staking.proto#L172-L198</p>"},{"location":"staking/#queues","title":"\u968a\u5217\u200b(Queues)","text":"<p>\u200b\u6240\u6709\u200b\u968a\u5217\u200b\u5c0d\u8c61\u200b\u90fd\u200b\u6309\u7167\u200b\u6642\u9593\u200b\u6233\u200b\u6392\u5e8f\u200b\u3002\u200b\u968a\u5217\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u7684\u200b\u6642\u9593\u200b\u9996\u5148\u200b\u56db\u820d\u4e94\u5165\u200b\u5230\u200b\u6700\u200b\u63a5\u8fd1\u200b\u7684\u200b\u7d0d\u79d2\u200b\uff0c\u200b\u7136\u5f8c\u9032\u884c\u200b\u6392\u5e8f\u200b\u3002 \u200b\u53ef\u200b\u6392\u5e8f\u200b\u7684\u200b\u6642\u9593\u200b\u683c\u5f0f\u200b\u662f\u200b\u5c0d\u200bRFC3339Nano\u200b\u7684\u200b\u8f15\u5fae\u200b\u4fee\u6539\u200b\uff0c\u200b\u4f7f\u7528\u200b\u683c\u5f0f\u200b\u5b57\u7b26\u4e32\u200b\"2006-01-02T15:04:05.000000000\"\u3002 \u200b\u503c\u5f97\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u9019\u7a2e\u200b\u683c\u5f0f\u200b\uff1a</p> <ul> <li>\u200b\u5c07\u200b\u6240\u6709\u200b\u96f6\u200b\u586b\u5145\u200b\u81f3\u200b\u53f3\u4fa7\u200b\u3002</li> <li>\u200b\u4e1f\u68c4\u200b\u6642\u5340\u200b\u4fe1\u606f\u200b\uff08\u200b\u4f7f\u7528\u200bUTC\uff09\u3002</li> </ul> <p>\u200b\u5728\u200b\u6240\u6709\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u5b58\u5132\u200b\u7684\u200b\u6642\u9593\u200b\u6233\u200b\u8868\u793a\u200b\u968a\u5217\u200b\u5143\u7d20\u200b\u7684\u200b\u6210\u719f\u200b\u6642\u9593\u200b\u3002</p>"},{"location":"staking/#unbondingdelegationqueue","title":"(\u200b\u89e3\u9664\u200b\u62b5\u62bc\u200b\u59d4\u200b\u8a17\u200b\u968a\u5217\u200b)UnbondingDelegationQueue","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u8ffd\u8e2a\u200b\u89e3\u9664\u200b\u59d4\u200b\u8a17\u200b\u7684\u200b\u9032\u5ea6\u200b\uff0c\u200b\u9700\u8981\u200b\u7dad\u8b77\u200b\u4e00\u500b\u200b\u89e3\u9664\u200b\u59d4\u200b\u8a17\u200b\u968a\u5217\u200b\u3002</p> <ul> <li>UnbondingDelegation: <code>0x41 | format(time) -&gt; []DVPair</code></li> </ul> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/staking.proto#L123-L133</p>"},{"location":"staking/#_9","title":"\u9a57\u8b49\u8005\u200b\u968a\u5217","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u8ffd\u8e2a\u200b\u89e3\u9664\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u9032\u5ea6\u200b\uff0c\u200b\u9700\u8981\u200b\u7dad\u8b77\u200b\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b\u968a\u5217\u200b\u3002</p> <ul> <li>ValidatorQueueTime: <code>0x43 | format(time) -&gt; []sdk.ValAddress</code></li> </ul> <p>\u200b\u5b58\u5132\u200b\u7684\u200b\u5c0d\u8c61\u200b\u4f5c\u70ba\u200b\u6bcf\u500b\u9375\u200b\u662f\u200b\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b\u64cd\u4f5c\u200b\u5730\u5740\u200b\u6578\u7d44\u200b\uff0c\u200b\u5f9e\u200b\u4e2d\u200b\u53ef\u4ee5\u200b\u8a2a\u200b\u554f\u9a57\u200b\u8b49\u8005\u200b\u5c0d\u8c61\u200b\u3002 \u200b\u901a\u5e38\u200b\uff0c\u200b\u9810\u671f\u200b\u53ea\u6709\u200b\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b\u8a18\u9304\u200b\u8207\u200b\u7d66\u5b9a\u200b\u7684\u200b\u6642\u9593\u200b\u6233\u200b\u95dc\u806f\u200b\uff0c\u200b\u4f46\u200b\u5728\u200b\u540c\u4e00\u200b\u4f4d\u7f6e\u200b\u7684\u200b\u968a\u5217\u200b\u4e2d\u200b\u53ef\u80fd\u200b\u5b58\u5728\u200b\u591a\u500b\u9a57\u200b\u8b49\u8005\u200b\u3002</p>"},{"location":"staking/#historicalinfo","title":"HistoricalInfo","text":"<p>HistoricalInfo \u200b\u7269\u4ef6\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b\u88ab\u200b\u5132\u5b58\u200b\u548c\u200b\u4fee\u526a\u200b\uff0c\u200b\u4f7f\u5f97\u200b\u62b5\u62bc\u200b\u6301\u6709\u8005\u200b\u4fdd\u7559\u200b\u7531\u200b\u62b5\u62bc\u200b\u6a21\u7d44\u200b\u53c3\u6578\u200b HistoricalEntries \u200b\u5b9a\u7fa9\u7684\u200b\u6700\u8fd1\u200b n \u200b\u500b\u200b\u6b77\u53f2\u200b\u8cc7\u8a0a\u200b\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/staking.proto#L15-L22</p> <p>\u200b\u5728\u200b\u6bcf\u500b\u200b BeginBlock\uff0cstaking keeper \u200b\u5c07\u5728\u200b\u4e00\u500b\u200b <code>HistoricalInfo</code> \u200b\u5c0d\u8c61\u200b\u4e2d\u200b\u4fdd\u7559\u200b\u7576\u524d\u200b\u7684\u200b Header \u200b\u548c\u200b\u63d0\u4ea4\u200b\u7576\u524d\u200b\u5340\u584a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u3002 \u200b\u9a57\u8b49\u8005\u200b\u6839\u64da\u200b\u5176\u200b\u5730\u5740\u200b\u9032\u884c\u200b\u6392\u5e8f\u200b\uff0c\u200b\u4ee5\u78ba\u200b\u4fdd\u5b83\u200b\u5011\u200b\u6309\u7167\u200b\u78ba\u5b9a\u200b\u7684\u200b\u9806\u5e8f\u200b\u6392\u5217\u200b\u3002 \u200b\u6700\u8001\u200b\u7684\u200b <code>HistoricalEntries</code> \u200b\u5c07\u88ab\u200b\u4fee\u526a\u200b\uff0c\u200b\u4ee5\u78ba\u200b\u4fdd\u53ea\u200b\u5b58\u5728\u200b\u53c3\u6578\u5b9a\u200b\u7fa9\u7684\u200b\u6b77\u53f2\u200b\u689d\u76ee\u200b\u6578\u91cf\u200b\u3002</p>"},{"location":"staking/#_10","title":"\u72c0\u614b\u200b\u8f49\u63db","text":"<p>\u200b\u672c\u6587\u200b\u6a94\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u8207\u200b\u4ee5\u4e0b\u200b\u5167\u5bb9\u200b\u76f8\u95dc\u200b\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u64cd\u4f5c\u200b\uff1a</p>"},{"location":"staking/#_11","title":"\u9a57\u8b49\u8005","text":"<p>\u200b\u5728\u200b\u6bcf\u500b\u200b <code>EndBlock</code> \u200b\u4e2d\u200b\uff0c\u200b\u5c0d\u9a57\u200b\u8b49\u8005\u200b\u9032\u884c\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\uff0c\u200b\u4ee5\u6aa2\u67e5\u200b\u6d3b\u52d5\u200b\u4e2d\u200b\u7684\u200b <code>ValidatorSet</code> \u200b\u662f\u5426\u200b\u6709\u200b\u8b8a\u5316\u200b\u3002</p> <p>\u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u662f\u200b <code>Unbonded</code>\u3001<code>Unbonding</code> \u200b\u6216\u200b <code>Bonded</code>\u3002 <code>Unbonded</code> \u200b\u548c\u200b <code>Unbonding</code> \u200b\u7d71\u7a31\u200b\u70ba\u200b <code>Not Bonded</code>\u3002 \u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u5728\u200b\u6240\u6709\u200b\u72c0\u614b\u200b\u4e4b\u9593\u200b\u79fb\u52d5\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u80fd\u200b\u5f9e\u200b <code>Bonded</code> \u200b\u76f4\u63a5\u200b\u8f49\u70ba\u200b <code>Unbonded</code>\u3002</p>"},{"location":"staking/#not-bonded-bonded","title":"\u5f9e\u200b Not Bonded \u200b\u5230\u200b Bonded","text":"<p>\u200b\u7576\u9a57\u200b\u8b49\u8005\u200b\u5728\u200b <code>ValidatorPowerIndex</code> \u200b\u4e2d\u200b\u7684\u200b\u6392\u540d\u200b\u8d85\u904e\u200b <code>LastValidator</code> \u200b\u6642\u200b\uff0c\u200b\u5c07\u767c\u751f\u200b\u4ee5\u4e0b\u200b\u8f49\u63db\u200b\u3002</p> <ul> <li>\u200b\u5c07\u200b <code>validator.Status</code> \u200b\u8a2d\u7f6e\u200b\u70ba\u200b <code>Bonded</code></li> <li>\u200b\u5c07\u200b <code>validator.Tokens</code> \u200b\u5f9e\u200b <code>NotBondedTokens</code> \u200b\u767c\u200b\u9001\u5230\u200b <code>BondedPool</code> \u200b\u7684\u200b <code>ModuleAccount</code></li> <li>\u200b\u5f9e\u200b <code>ValidatorByPowerIndex</code> \u200b\u522a\u9664\u200b\u73fe\u6709\u200b\u8a18\u9304\u200b</li> <li>\u200b\u5411\u200b <code>ValidatorByPowerIndex</code> \u200b\u6dfb\u52a0\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u66f4\u65b0\u200b\u8a18\u9304\u200b</li> <li>\u200b\u66f4\u65b0\u200b\u6b64\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b <code>Validator</code> \u200b\u5c0d\u8c61\u200b</li> <li>\u200b\u5982\u679c\u200b\u5b58\u5728\u200b\uff0c\u200b\u522a\u9664\u200b\u6b64\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u4efb\u4f55\u200b <code>ValidatorQueue</code> \u200b\u8a18\u9304\u200b</li> </ul>"},{"location":"staking/#bonded-unbonding","title":"\u5f9e\u200b Bonded \u200b\u5230\u200b Unbonding","text":"<p>\u200b\u7576\u9a57\u200b\u8b49\u8005\u200b\u958b\u59cb\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u904e\u7a0b\u200b\u6642\u200b\uff0c\u200b\u5c07\u767c\u751f\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a</p> <ul> <li>\u200b\u5c07\u200b <code>validator.Tokens</code> \u200b\u5f9e\u200b <code>BondedPool</code> \u200b\u767c\u200b\u9001\u5230\u200b <code>NotBondedTokens</code> \u200b\u7684\u200b <code>ModuleAccount</code></li> <li>\u200b\u5c07\u200b <code>validator.Status</code> \u200b\u8a2d\u7f6e\u200b\u70ba\u200b <code>Unbonding</code></li> <li>\u200b\u5f9e\u200b <code>ValidatorByPowerIndex</code> \u200b\u522a\u9664\u200b\u73fe\u6709\u200b\u8a18\u9304\u200b</li> <li>\u200b\u5411\u200b <code>ValidatorByPowerIndex</code> \u200b\u6dfb\u52a0\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u66f4\u65b0\u200b\u8a18\u9304\u200b</li> <li>\u200b\u66f4\u65b0\u200b\u6b64\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b <code>Validator</code> \u200b\u5c0d\u8c61\u200b</li> <li>\u200b\u70ba\u200b\u6b64\u9a57\u200b\u8b49\u8005\u200b\u5728\u200b <code>ValidatorQueue</code> \u200b\u4e2d\u200b\u63d2\u5165\u200b\u4e00\u500b\u200b\u65b0\u200b\u8a18\u9304\u200b</li> </ul>"},{"location":"staking/#unbonding-unbonded","title":"\u5f9e\u200b Unbonding \u200b\u5230\u200b Unbonded","text":"<p>\u200b\u7576\u200b <code>ValidatorQueue</code> \u200b\u5c0d\u8c61\u200b\u5f9e\u200b\u7d81\u5b9a\u200b\u72c0\u614b\u200b\u8f49\u70ba\u200b\u672a\u200b\u7d81\u5b9a\u200b\u72c0\u614b\u200b\u6642\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u5f9e\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u72c0\u614b\u200b\u8f49\u70ba\u200b\u672a\u200b\u7d81\u5b9a\u200b\u72c0\u614b\u200b\u3002</p> <ul> <li>\u200b\u66f4\u65b0\u200b\u6b64\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b <code>Validator</code> \u200b\u5c0d\u8c61\u200b</li> <li>\u200b\u5c07\u200b <code>validator.Status</code> \u200b\u8a2d\u7f6e\u200b\u70ba\u200b <code>Unbonded</code></li> </ul>"},{"location":"staking/#_12","title":"\u76e3\u7981\u200b/\u200b\u89e3\u7981","text":"<p>\u200b\u7576\u9a57\u200b\u8b49\u8005\u200b\u88ab\u200b\u76e3\u7981\u6642\u200b\uff0c\u200b\u5b83\u200b\u5be6\u969b\u200b\u4e0a\u200b\u662f\u200b\u5f9e\u200bTendermint\u200b\u96c6\u5408\u200b\u4e2d\u200b\u79fb\u9664\u200b\u7684\u200b\u3002 \u200b\u9019\u500b\u200b\u904e\u7a0b\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u53cd\u8f49\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\u5c07\u767c\u751f\u200b\uff1a</p> <ul> <li>\u200b\u8a2d\u7f6e\u200b <code>Validator.Jailed</code> \u200b\u4e26\u200b\u66f4\u65b0\u200b\u5c0d\u8c61\u200b</li> <li>\u200b\u5982\u679c\u200b\u88ab\u200b\u76e3\u7981\u200b\uff0c\u200b\u5f9e\u200b <code>ValidatorByPowerIndex</code> \u200b\u522a\u9664\u200b\u8a18\u9304\u200b</li> <li>\u200b\u5982\u679c\u200b\u89e3\u7981\u200b\uff0c\u200b\u5411\u200b <code>V</code>alidatorByPowerIndex` \u200b\u6dfb\u52a0\u200b\u8a18\u9304\u200b</li> </ul> <p>\u200b\u88ab\u200b\u76e3\u7981\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u4e0d\u6703\u200b\u51fa\u73fe\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u4efb\u4f55\u200b\u5b58\u5132\u4e2d\u200b\uff1a</p> <ul> <li>power store (\u200b\u5f9e\u5171\u8b58\u200b\u6b0a\u529b\u200b\u5230\u200b\u5730\u5740\u200b)</li> </ul>"},{"location":"staking/#_13","title":"\u59d4\u200b\u8a17","text":""},{"location":"staking/#_14","title":"\u59d4\u6d3e","text":"<p>\u200b\u7576\u59d4\u200b\u8a17\u200b\u767c\u751f\u200b\u6642\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u5c0d\u8c61\u200b\u90fd\u200b\u6703\u200b\u53d7\u5230\u200b\u5f71\u97ff\u200b\u3002</p> <ul> <li>\u200b\u6839\u64da\u200b\u4ee3\u7406\u200b\u7684\u200b\u4ee3\u5e63\u548c\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u532f\u7387\u200b\u78ba\u5b9a\u200b\u4ee3\u7406\u4eba\u200b\u7684\u200b\u4efd\u984d\u200b</li> <li>\u200b\u5f9e\u200b\u767c\u9001\u200b\u8cec\u6236\u200b\u4e2d\u200b\u522a\u200b\u9664\u4ee3\u5e63\u200b</li> <li>\u200b\u5c07\u4efd\u984d\u200b\u6dfb\u52a0\u200b\u5230\u59d4\u200b\u8a17\u200b\u5c0d\u8c61\u200b\uff0c\u200b\u6216\u5c07\u200b\u5176\u200b\u6dfb\u52a0\u200b\u5230\u200b\u5275\u5efa\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u5c0d\u8c61\u200b\u4e2d\u200b</li> <li>\u200b\u6dfb\u52a0\u200b\u65b0\u200b\u7684\u200b\u4ee3\u8868\u200b\u4efd\u984d\u4e26\u200b\u66f4\u65b0\u200b <code>Validator</code> \u200b\u5c0d\u8c61\u200b</li> <li>\u200b\u6839\u64da\u200b <code>validator.Status</code> \u200b\u662f\u5426\u200b\u70ba\u200b <code>Bonded</code>\uff0c\u200b\u5c07\u200b <code>delegation.Amount</code> \u200b\u5f9e\u200b\u4ee3\u8868\u200b\u8cec\u6236\u200b\u8f49\u79fb\u200b\u5230\u200b <code>BondedPool</code> \u200b\u6216\u200b <code>NotBondedPool</code> \u200b\u7684\u200b <code>ModuleAccount</code></li> <li>\u200b\u5f9e\u200b <code>ValidatorByPowerIndex</code> \u200b\u522a\u9664\u200b\u73fe\u6709\u200b\u8a18\u9304\u200b</li> <li>\u200b\u5411\u200b <code>ValidatorByPowerIndex</code> \u200b\u6dfb\u52a0\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u66f4\u65b0\u200b\u8a18\u9304\u200b</li> </ul>"},{"location":"staking/#_15","title":"\u958b\u59cb\u200b\u89e3\u9664\u200b\u7d81\u5b9a","text":"<p>\u200b\u4f5c\u70ba\u200b\u53d6\u6d88\u200b\u4ee3\u8868\u200b\u548c\u200b\u5b8c\u6210\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u72c0\u614b\u200b\u904e\u6e21\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u8abf\u7528\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u59d4\u200b\u8a17\u200b\u3002</p> <ul> <li>\u200b\u5f9e\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4e2d\u200b\u6263\u9664\u200b\u672a\u200b\u7d81\u5b9a\u200b\u7684\u200b\u4efd\u984d\u200b</li> <li>\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u70ba\u200b <code>Unbonding</code> \u200b\u6216\u200b <code>Bonded</code>\uff0c\u200b\u5c07\u4ee3\u5e63\u200b\u6dfb\u52a0\u200b\u5230\u200b <code>UnbondingDelegation</code> \u200b\u689d\u76ee\u200b</li> <li>\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u70ba\u200b <code>Unbonded</code>\uff0c\u200b\u5c07\u4ee3\u5e63\u200b\u76f4\u63a5\u200b\u767c\u200b\u9001\u5230\u200b\u63d0\u6b3e\u200b\u8cec\u6236\u200b</li> <li>\u200b\u66f4\u65b0\u200b\u59d4\u200b\u8a17\u200b\u6216\u200b\u5728\u200b\u6c92\u200b\u6709\u200b\u66f4\u200b\u591a\u4efd\u200b\u984d\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u522a\u200b\u9664\u59d4\u200b\u8a17\u200b</li> <li>\u200b\u5982\u679c\u200b\u59d4\u200b\u8a17\u200b\u662f\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u64cd\u4f5c\u8005\u200b\u4e26\u4e14\u200b\u6c92\u200b\u6709\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u4efd\u984d\u200b\uff0c\u200b\u5247\u89f8\u200b\u767c\u76e3\u200b\u7981\u9a57\u200b\u8b49\u8005\u200b</li> <li>\u200b\u66f4\u65b0\u200b\u5df2\u200b\u522a\u9664\u200b\u4ee3\u8868\u200b\u4efd\u984d\u200b\u548c\u200b\u76f8\u200b\u95dc\u4ee3\u5e63\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b</li> <li>\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u72c0\u614b\u200b\u70ba\u200b <code>Bonded</code>\uff0c\u200b\u5c07\u672a\u200b\u7d81\u200b\u5b9a\u4efd\u984d\u200b\u7684\u200b <code>Coins</code> \u200b\u50f9\u503c\u200b\u5f9e\u200b <code>BondedPool</code> \u200b\u8f49\u79fb\u200b\u5230\u200b <code>NotBondedPool</code> \u200b\u7684\u200b <code>ModuleAccount</code></li> <li>\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u672a\u200b\u7d81\u5b9a\u200b\u4e26\u4e14\u200b\u6c92\u200b\u6709\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4efd\u984d\u200b\uff0c\u200b\u5247\u522a\u200b\u9664\u9a57\u200b\u8b49\u8005\u200b\u3002</li> </ul>"},{"location":"staking/#_16","title":"\u5b8c\u6210\u200b\u89e3\u9664\u200b\u7d81\u5b9a","text":"<p>\u200b\u5c0d\u200b\u65bc\u200b\u4e0d\u200b\u7acb\u5373\u200b\u5b8c\u6210\u200b\u7684\u200b\u53d6\u6d88\u200b\u59d4\u200b\u8a17\u200b\uff0c\u200b\u7576\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u59d4\u200b\u8a17\u200b\u968a\u5217\u200b\u5143\u7d20\u200b\u6210\u719f\u200b\u6642\u200b\uff0c\u200b\u5c07\u767c\u751f\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a</p> <ul> <li>\u200b\u5f9e\u200b <code>UnbondingDelegation</code> \u200b\u5c0d\u8c61\u200b\u4e2d\u200b\u522a\u9664\u200b\u689d\u76ee\u200b</li> <li>\u200b\u5c07\u4ee3\u5e63\u200b\u5f9e\u200b <code>NotBondedPool</code> \u200b\u7684\u200b <code>ModuleAccount</code> \u200b\u8f49\u79fb\u200b\u5230\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b <code>Account</code></li> </ul>"},{"location":"staking/#_17","title":"\u524a\u6e1b","text":""},{"location":"staking/#_18","title":"\u524a\u200b\u6e1b\u9a57\u200b\u8b49\u8005","text":"<p>\u200b\u7576\u9a57\u200b\u8b49\u8005\u200b\u88ab\u200b\u524a\u200b\u6e1b\u6642\u200b\uff0c\u200b\u5c07\u767c\u751f\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff1a</p> <ul> <li>\u200b\u7e3d\u200b\u7684\u200b <code>slashAmount</code> \u200b\u8a08\u7b97\u70ba\u200b <code>slashFactor</code>\uff08\u200b\u93c8\u200b\u53c3\u6578\u200b\uff09* <code>TokensFromConsensusPower</code>\uff0c   \u200b\u5373\u200b\u5728\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u767c\u751f\u200b\u6642\u200b\u7d81\u5b9a\u200b\u5230\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u4ee3\u5e63\u200b\u7e3d\u6578\u200b\u3002</li> <li>\u200b\u6240\u6709\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u548c\u200b\u507d\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u7684\u200b\u91cd\u65b0\u200b\u59d4\u200b\u8a17\u200b\uff0c\u200b\u4f7f\u5f97\u200b\u5728\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u6216\u200b   \u200b\u91cd\u65b0\u200b\u59d4\u200b\u8a17\u200b\u958b\u59cb\u200b\u4e4b\u524d\u200b\u7684\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u90fd\u200b\u88ab\u200b\u524a\u6e1b\u200b slashFactor \u200b\u767e\u5206\u6bd4\u200b\u7684\u200b\u521d\u59cb\u200b\u9918\u984d\u200b\u3002</li> <li>\u200b\u5f9e\u200b\u91cd\u65b0\u200b\u59d4\u200b\u8a17\u200b\u548c\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u59d4\u200b\u8a17\u200b\u4e2d\u200b\u524a\u6e1b\u200b\u7684\u200b\u6bcf\u500b\u200b\u91d1\u984d\u200b\u90fd\u200b\u6703\u200b\u5f9e\u200b   \u200b\u7e3d\u524a\u200b\u6e1b\u91d1\u984d\u200b\u4e2d\u200b\u6263\u9664\u200b\u3002</li> <li>\u200b\u7136\u5f8c\u5f9e\u9a57\u200b\u8b49\u8005\u200b\u5728\u200b <code>BondedPool</code> \u200b\u6216\u200b NonBondedPool \u200b\u4e2d\u200b\u7684\u200b\u4ee3\u5e63\u200b\u4e2d\u200b\u524a\u6e1b\u200b remaingSlashAmount\uff0c   \u200b\u5177\u9ad4\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u72c0\u614b\u200b\u3002\u200b\u9019\u5c07\u200b\u6e1b\u5c11\u4ee3\u5e63\u200b\u7684\u200b\u7e3d\u4f9b\u200b\u61c9\u91cf\u200b\u3002</li> </ul> <p>\u200b\u5728\u200b\u9700\u8981\u200b\u63d0\u4ea4\u200b\u8b49\u64da\u200b\u7684\u200b\u524a\u6e1b\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff08\u200b\u4f8b\u5982\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\uff09\uff0c\u200b\u524a\u6e1b\u200b\u767c\u751f\u200b\u5728\u200b\u5305\u542b\u200b\u8b49\u64da\u200b\u7684\u200b\u5340\u584a\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u767c\u751f\u200b\u7684\u200b\u5340\u584a\u200b\u3002 \u200b\u63db\u53e5\u200b\u8a71\u200b\u8aaa\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u4e0d\u6703\u200b\u8ffd\u6eaf\u200b\u5730\u88ab\u200b\u524a\u6e1b\u200b\uff0c\u200b\u53ea\u6709\u200b\u5728\u200b\u88ab\u200b\u6293\u200b\u5230\u200b\u6642\u200b\u624d\u200b\u6703\u200b\u88ab\u200b\u524a\u6e1b\u200b\u3002</p>"},{"location":"staking/#_19","title":"\u524a\u6e1b\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u59d4\u200b\u8a17","text":"<p>\u200b\u7576\u9a57\u200b\u8b49\u8005\u200b\u88ab\u200b\u524a\u200b\u6e1b\u6642\u200b\uff0c\u200b\u5f9e\u9a57\u200b\u8b49\u8005\u200b\u958b\u59cb\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u7684\u200b\u90a3\u4e9b\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u59d4\u200b\u8a17\u200b\u4e5f\u200b\u6703\u200b\u5728\u200b\u9055\u898f\u884c\u200b\u70ba\u200b\u767c\u751f\u200b\u5f8c\u200b\u88ab\u200b\u524a\u6e1b\u200b\u3002 \u200b\u4f86\u200b\u81ea\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u6bcf\u500b\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u59d4\u200b\u8a17\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u500b\u200b\u689d\u76ee\u200b\u90fd\u200b\u6703\u200b\u88ab\u200b\u524a\u6e1b\u200b slashFactor\u3002 \u200b\u524a\u6e1b\u200b\u7684\u200b\u91d1\u984d\u200b\u662f\u200b\u6839\u64da\u59d4\u200b\u8a17\u200b\u7684\u200b InitialBalance \u200b\u8a08\u7b97\u200b\u7684\u200b\uff0c\u200b\u4e26\u4e14\u200b\u6709\u200b\u4e0a\u9650\u200b\u4ee5\u200b\u9632\u6b62\u200b\u7522\u751f\u200b\u8ca0\u9918\u984d\u200b\u3002\u200b\u5df2\u200b\u5b8c\u6210\u200b\uff08\u200b\u6216\u200b\u6210\u719f\u200b\uff09\u200b\u7684\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u4e0d\u6703\u200b\u88ab\u200b\u524a\u6e1b\u200b\u3002</p>"},{"location":"staking/#_20","title":"\u80a1\u4efd\u200b\u5982\u4f55\u200b\u8a08\u7b97","text":"<p>\u200b\u5728\u200b\u4efb\u4f55\u200b\u7d66\u5b9a\u200b\u7684\u200b\u6642\u9593\u9ede\u200b\uff0c\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u90fd\u200b\u6709\u200b\u4e00\u5b9a\u200b\u6578\u91cf\u200b\u7684\u200b\u4ee3\u5e63\u200b <code>T</code>\uff0c\u200b\u4e26\u767c\u884c\u200b\u4e86\u200b\u4e00\u5b9a\u200b\u6578\u91cf\u200b\u7684\u200b\u80a1\u4efd\u200b <code>S</code>\u3002 \u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b <code>i</code> \u200b\u6301\u6709\u200b\u4e00\u5b9a\u200b\u6578\u91cf\u200b\u7684\u200b\u80a1\u4efd\u200b <code>S_i</code>\u3002 \u200b\u4ee3\u5e63\u200b\u6578\u91cf\u200b\u662f\u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u4ee3\u5e63\u200b\u4e4b\u200b\u548c\u200b\uff0c\u200b\u52a0\u4e0a\u200b\u734e\u52f5\u200b\uff0c\u200b\u6e1b\u53bb\u200b\u524a\u6e1b\u200b\u3002</p> <p>\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6709\u6b0a\u200b\u7372\u5f97\u200b\u8207\u200b\u5176\u200b\u80a1\u4efd\u200b\u6bd4\u4f8b\u200b\u76f8\u7576\u200b\u7684\u200b\u57fa\u790e\u200b\u4ee3\u5e63\u200b\u90e8\u5206\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b i \u200b\u6709\u6b0a\u200b\u7372\u5f97\u9a57\u200b\u8b49\u8005\u200b\u4ee3\u5e63\u200b\u7684\u200b <code>T * S_i / S</code>\u3002</p> <p>\u200b\u7576\u59d4\u200b\u8a17\u200b\u4eba\u5411\u9a57\u200b\u8b49\u8005\u200b\u59d4\u200b\u8a17\u200b\u65b0\u4ee3\u5e63\u200b\u6642\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5c07\u7372\u200b\u5f97\u200b\u8207\u200b\u5176\u200b\u8ca2\u737b\u6210\u200b\u6bd4\u4f8b\u200b\u7684\u200b\u80a1\u4efd\u200b\u6578\u91cf\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u7576\u59d4\u200b\u8a17\u200b\u4eba\u200b <code>j</code> \u200b\u59d4\u200b\u8a17\u200b <code>T_j</code> \u200b\u4ee3\u5e63\u200b\u6642\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5c07\u7372\u200b\u5f97\u200b <code>S_j = S * T_j / T</code> \u200b\u80a1\u4efd\u200b\u3002 \u200b\u4ee3\u5e63\u200b\u7e3d\u6578\u73fe\u200b\u5728\u200b\u662f\u200b <code>T + T_j</code>\uff0c\u200b\u80a1\u4efd\u200b\u7e3d\u6578\u200b\u662f\u200b <code>S + S_j</code>\u3002 j \u200b\u7684\u200b\u80a1\u4efd\u200b\u6bd4\u4f8b\u200b\u8207\u200b\u4ed6\u5011\u200b\u8ca2\u737b\u200b\u7684\u200b\u4ee3\u5e63\u200b\u7e3d\u6578\u200b\u6bd4\u4f8b\u200b\u76f8\u540c\u200b\uff1a<code>(S + S_j) / S = (T + T_j) / T</code>\u3002</p> <p>\u200b\u4e00\u500b\u200b\u7279\u6b8a\u200b\u60c5\u6cc1\u200b\u662f\u200b\u521d\u59cb\u200b\u59d4\u200b\u8a17\u200b\uff0c\u200b\u7576\u200b <code>T = 0</code> \u200b\u548c\u200b <code>S = 0</code> \u200b\u6642\u200b\uff0c<code>T_j / T</code> \u200b\u662f\u200b\u672a\u5b9a\u200b\u7fa9\u7684\u200b\u3002 \u200b\u5c0d\u200b\u65bc\u200b\u521d\u59cb\u200b\u59d4\u200b\u8a17\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b <code>j</code> \u200b\u59d4\u200b\u8a17\u200b <code>T_j</code> \u200b\u4ee3\u5e63\u5c07\u200b\u7372\u5f97\u200b <code>S_j = T_j</code> \u200b\u80a1\u4efd\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u4e00\u500b\u200b\u5c1a\u672a\u200b\u7372\u5f97\u200b\u4efb\u4f55\u200b\u734e\u52f5\u200b\u4e14\u200b\u672a\u200b\u88ab\u200b\u524a\u6e1b\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u5c07\u64c1\u200b\u6709\u200b <code>T = S</code>\u3002</p>"},{"location":"staking/#_21","title":"\u8a0a\u606f","text":"<p>\u200b\u5728\u200b\u672c\u7bc0\u200b\u4e2d\u200b\uff0c\u200b\u6211\u5011\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u62b5\u62bc\u200b\u8a0a\u606f\u200b\u7684\u200b\u8655\u7406\u200b\u4ee5\u53ca\u200b\u76f8\u61c9\u200b\u7684\u200b\u72c0\u614b\u200b\u66f4\u65b0\u200b\u3002 \u200b\u6bcf\u689d\u8a0a\u606f\u200b\u6240\u200b\u6307\u5b9a\u200b\u7684\u200b\u6240\u6709\u200b\u5275\u5efa\u200b/\u200b\u4fee\u6539\u200b\u7684\u200b\u72c0\u614b\u200b\u5c0d\u8c61\u200b\u5747\u200b\u5728\u200b \u200b\u72c0\u614b\u200b \u200b\u90e8\u5206\u200b\u4e2d\u5b9a\u7fa9\u200b\u3002</p>"},{"location":"staking/#msgcreatevalidator","title":"MsgCreateValidator","text":"<p>\u200b\u901a\u904e\u200b\u4f7f\u7528\u200b<code>MsgCreateValidator</code>\u200b\u6d88\u606f\u200b\u4f86\u200b\u5275\u5efa\u9a57\u200b\u8b49\u8005\u200b\u3002\u200b\u9a57\u8b49\u8005\u200b\u5fc5\u9808\u200b\u5728\u200b\u64cd\u4f5c\u8005\u200b\u7684\u200b\u521d\u59cb\u200b\u59d4\u200b\u8a17\u200b\u4e0b\u200b\u5275\u5efa\u200b\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/tx.proto#L16-L17</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/tx.proto#L35-L51</p> <p>\u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u5247\u200b\u9810\u671f\u200b\u6b64\u200b\u6d88\u606f\u200b\u5c07\u5931\u6557\u200b\uff1a</p> <ul> <li>\u200b\u5df2\u200b\u7d93\u200b\u8a3b\u200b\u518a\u200b\u4e86\u200b\u5177\u6709\u200b\u6b64\u200b\u64cd\u4f5c\u8005\u200b\u5730\u5740\u200b\u7684\u200b\u53e6\u200b\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b</li> <li>\u200b\u5df2\u200b\u7d93\u200b\u8a3b\u200b\u518a\u200b\u4e86\u200b\u5177\u6709\u200b\u6b64\u516c\u200b\u9470\u200b\u7684\u200b\u53e6\u200b\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b</li> <li>\u200b\u521d\u59cb\u200b\u81ea\u6211\u200b\u59d4\u200b\u8a17\u200b\u4ee3\u5e63\u200b\u7684\u200b\u9762\u984d\u200b\u672a\u6307\u5b9a\u200b\u70ba\u200b\u62b5\u62bc\u200b\u9762\u984d\u200b</li> <li>\u200b\u4f63\u91d1\u200b\u53c3\u6578\u200b\u6709\u8aa4\u200b\uff0c\u200b\u5373\u200b\uff1a</li> <li><code>MaxRate</code> \u200b\u5927\u200b\u65bc\u200b 1 \u200b\u6216\u200b\u5c0f\u200b\u65bc\u200b 0</li> <li>\u200b\u521d\u59cb\u200b <code>Rate</code> \u200b\u70ba\u200b\u8ca0\u6578\u200b\u6216\u200b\u5927\u200b\u65bc\u200b <code>MaxRate</code></li> <li>\u200b\u521d\u59cb\u200b <code>MaxChangeRate</code> \u200b\u70ba\u200b\u8ca0\u6578\u200b\u6216\u200b\u5927\u200b\u65bc\u200b <code>MaxRate</code></li> <li>\u200b\u63cf\u8ff0\u200b\u5b57\u6bb5\u200b\u904e\u5927\u200b</li> </ul> <p>\u200b\u6b64\u200b\u6d88\u606f\u200b\u5728\u200b\u9069\u7576\u200b\u7684\u200b\u7d22\u5f15\u200b\u8655\u200b\u5275\u5efa\u4e26\u200b\u5b58\u5132\u200b<code>Validator</code>\u200b\u5c0d\u8c61\u200b\u3002 \u200b\u6b64\u5916\u200b\uff0c\u200b\u9084\u5c07\u200b\u4f7f\u7528\u200b\u521d\u59cb\u200b\u4ee3\u5e63\u59d4\u200b\u8a17\u200b\u4ee3\u5e63\u200b<code>Delegation</code>\u200b\u9032\u884c\u200b\u81ea\u6211\u200b\u59d4\u200b\u8a17\u200b\u3002\u200b\u9a57\u8b49\u8005\u200b\u59cb\u7d42\u200b\u4ee5\u200b\u672a\u200b\u7d81\u5b9a\u200b\u7684\u200b\u72c0\u614b\u200b\u958b\u59cb\u200b\uff0c\u200b\u4f46\u200b\u53ef\u80fd\u200b\u5728\u200b\u7b2c\u4e00\u200b\u500b\u200b\u7d50\u675f\u200b\u5340\u584a\u200b\u4e2d\u200b\u7d81\u5b9a\u200b\u3002</p>"},{"location":"staking/#msgeditvalidator","title":"MsgEditValidator","text":"<p>\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b<code>MsgEditValidator</code>\u200b\u6d88\u606f\u200b\u66f4\u65b0\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b<code>Description</code>\u200b\u548c\u200b<code>CommissionRate</code>\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/tx.proto#L19-L20</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/tx.proto#L56-L76</p> <p>\u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u5247\u200b\u9810\u671f\u200b\u6b64\u200b\u6d88\u606f\u200b\u5c07\u5931\u6557\u200b\uff1a</p> <ul> <li>\u200b\u521d\u59cb\u200b <code>CommissionRate</code> \u200b\u70ba\u200b\u8ca0\u6578\u200b\u6216\u200b\u5927\u200b\u65bc\u200b <code>MaxRate</code></li> <li><code>CommissionRate</code> \u200b\u5df2\u200b\u5728\u200b\u904e\u53bb\u200b 24 \u200b\u5c0f\u6642\u200b\u5167\u200b\u66f4\u65b0\u200b</li> <li><code>CommissionRate</code> \u200b\u5927\u200b\u65bc\u200b MaxChangeRate</li> <li>\u200b\u63cf\u8ff0\u200b\u5b57\u6bb5\u200b\u904e\u5927\u200b</li> </ul> <p>\u200b\u6b64\u200b\u6d88\u606f\u200b\u5b58\u5132\u200b\u66f4\u65b0\u200b\u5f8c\u200b\u7684\u200bValidator\u200b\u5c0d\u8c61\u200b\u3002</p>"},{"location":"staking/#msgdelegate","title":"MsgDelegate","text":"<p>\u200b\u5728\u200b\u6b64\u200b\u6d88\u606f\u200b\u4e2d\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u63d0\u4f9b\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u4f5c\u70ba\u200b\u56de\u5831\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5c07\u7372\u200b\u5f97\u200b\u5176\u9a57\u200b\u8b49\u8005\u200b\uff08\u200b\u65b0\u200b\u5275\u5efa\u200b\u7684\u200b\uff09\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u80a1\u4efd\u200b\u4e2d\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u9019\u4e9b\u200b\u80a1\u4efd\u200b\u5206\u914d\u200b\u7d66\u200b<code>Delegation.Shares</code>\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/tx.proto#L22-L24</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/tx.proto#L81-L90</p> <p>\u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u5247\u200b\u9810\u671f\u200b\u6b64\u200b\u6d88\u606f\u200b\u5c07\u5931\u6557\u200b\uff1a</p> <ul> <li>\u200b\u9a57\u8b49\u8005\u200b\u4e0d\u200b\u5b58\u5728\u200b</li> <li><code>Amount</code> <code>Coin</code> \u200b\u7684\u200b\u9762\u984d\u200b\u8207\u200b <code>params.BondDenom</code> \u200b\u5b9a\u7fa9\u7684\u200b\u9762\u984d\u200b\u4e0d\u540c\u200b</li> <li>\u200b\u514c\u63db\u7387\u200b\u7121\u6548\u200b\uff0c\u200b\u5373\u9a57\u200b\u8b49\u8005\u200b\u6c92\u200b\u6709\u4ee3\u5e63\u200b\uff08\u200b\u7531\u200b\u65bc\u200b\u524a\u6e1b\u200b\uff09\u200b\u4f46\u200b\u5b58\u5728\u200b\u672a\u200b\u5206\u914d\u200b\u7684\u200b\u80a1\u4efd\u200b</li> <li>\u200b\u59d4\u200b\u8a17\u200b\u91d1\u984d\u200b\u5c0f\u200b\u65bc\u200b\u5141\u8a31\u200b\u7684\u200b\u6700\u4f4e\u200b\u59d4\u200b\u8a17\u200b\u91d1\u984d\u200b</li> </ul> <p>\u200b\u5982\u679c\u200b\u5c0d\u200b\u65bc\u200b\u63d0\u4f9b\u200b\u7684\u200b\u5730\u5740\u200b\u5c1a\u200b\u4e0d\u200b\u5b58\u5728\u200b\u73fe\u6709\u200b\u7684\u200b<code>Delegation</code>\u200b\u5c0d\u8c61\u200b\uff0c\u200b\u5247\u5b83\u200b\u5c07\u4f5c\u200b\u70ba\u200b\u6b64\u200b\u6d88\u606f\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u5275\u5efa\u200b\uff0c\u200b\u5426\u5247\u5c07\u200b\u66f4\u65b0\u200b\u73fe\u6709\u200b\u7684\u200bDelegation\u200b\u4ee5\u200b\u5305\u62ec\u200b\u65b0\u200b\u6536\u5230\u200b\u7684\u200b\u80a1\u4efd\u200b\u3002</p> <p>\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6309\u200b\u7576\u524d\u200b\u532f\u7387\u200b\u7372\u5f97\u200b\u65b0\u200b\u9444\u9020\u200b\u7684\u200b\u80a1\u4efd\u200b\u3002\u200b\u532f\u7387\u200b\u662f\u200b\u9a57\u8b49\u8005\u200b\u4e2d\u73fe\u200b\u6709\u200b\u80a1\u4efd\u200b\u6578\u200b\u9664\u4ee5\u200b\u7576\u200b\u524d\u59d4\u200b\u8a17\u200b\u4ee3\u5e63\u6578\u200b\u3002</p> <p>\u200b\u9a57\u8b49\u8005\u200b\u5728\u200b<code>ValidatorByPower</code>\u200b\u7d22\u5f15\u200b\u4e2d\u200b\u9032\u884c\u200b\u66f4\u65b0\u200b\uff0c\u200b\u4e26\u5728\u200b<code>Validators</code>\u200b\u7d22\u5f15\u200b\u4e2d\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u5c0d\u8c61\u200b\u4e2d\u200b\u8ddf\u8e2a\u200b\u59d4\u200b\u8a17\u200b\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u59d4\u200b\u8a17\u200b\u7d66\u5165\u200b\u7344\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\uff0c\u200b\u552f\u4e00\u200b\u7684\u200b\u5340\u5225\u200b\u662f\u200b\u5728\u200b\u5176\u200b\u88ab\u200b\u89e3\u9664\u200b\u76e3\u7981\u200b\u4e4b\u524d\u200b\uff0c\u200b\u5b83\u200b\u4e0d\u6703\u200b\u88ab\u200b\u6dfb\u52a0\u200b\u5230\u200b\u6b0a\u529b\u200b\u6307\u6578\u200b\u4e2d\u200b\u3002</p>"},{"location":"staking/#msgundelegate","title":"MsgUndelegate","text":"<p><code>MsgUndelegate</code>\u200b\u6d88\u606f\u200b\u5141\u200b\u8a31\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5f9e\u9a57\u200b\u8b49\u8005\u200b\u90a3\u88e1\u200b\u64a4\u92b7\u200b\u4ed6\u5011\u200b\u7684\u200b\u4ee3\u5e63\u200b\u3002</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/tx.proto#L30-L32</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/tx.proto#L112-L121</p> <p>\u200b\u6b64\u200b\u6d88\u606f\u200b\u8fd4\u56de\u200b\u5305\u542b\u200b\u89e3\u9664\u200b\u59d4\u200b\u8a17\u200b\u5b8c\u6210\u200b\u6642\u9593\u200b\u7684\u200b\u97ff\u61c9\u200b\uff1a</p> <p>+++ https://github.com/cosmos/cosmos-sdk/blob/v0.40.0/proto/cosmos/staking/v1beta1/tx.proto#L123-L126</p> <p>\u200b\u5982\u679c\u200b\u51fa\u73fe\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u5247\u200b\u9810\u671f\u200b\u6b64\u200b\u6d88\u606f\u200b\u5c07\u5931\u6557\u200b\uff1a</p> <ul> <li>\u200b\u59d4\u200b\u8a17\u200b\u4e0d\u200b\u5b58\u5728\u200b</li> <li>\u200b\u9a57\u8b49\u8005\u200b\u4e0d\u200b\u5b58\u5728\u200b</li> <li>\u200b\u59d4\u200b\u8a17\u200b\u7684\u200b\u80a1\u4efd\u200b\u5c11\u200b\u65bc\u200b<code>Amount</code>\u200b\u7684\u200b\u50f9\u503c\u200b</li> <li>\u200b\u73fe\u6709\u200b\u7684\u200b<code>UnbondingDelegation</code>\u200b\u5177\u6709\u200b\u7531\u200b<code>params.MaxEntries</code>\u200b\u5b9a\u7fa9\u7684\u200b\u6700\u5927\u200b\u689d\u76ee\u200b</li> <li><code>Amount</code>\u200b\u5177\u6709\u200b\u8207\u200b<code>params.BondDenom</code>\u200b\u5b9a\u7fa9\u7684\u200b\u9762\u984d\u200b\u4e0d\u540c\u200b\u7684\u200b\u9762\u984d\u200b</li> </ul> <p>\u200b\u8655\u7406\u6b64\u200b\u6d88\u606f\u200b\u6642\u200b\uff0c\u200b\u5c07\u767c\u751f\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a</p> <ul> <li>\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b<code>DelegatorShares</code>\u200b\u548c\u59d4\u200b\u8a17\u200b\u7684\u200b<code>Shares</code>\u200b\u90fd\u200b\u5c07\u901a\u904e\u200b\u6d88\u606f\u200b<code>SharesAmount</code>\u200b\u6e1b\u5c11\u200b</li> <li>\u200b\u8a08\u7b97\u200b\u80a1\u4efd\u200b\u7684\u200b\u4ee3\u5e63\u200b\u50f9\u503c\u200b\uff0c\u200b\u4e26\u5f9e\u9a57\u200b\u8b49\u8005\u200b\u4e2d\u200b\u79fb\u9664\u200b\u8a72\u200b\u6578\u91cf\u200b\u7684\u200b\u4ee3\u5e63\u200b</li> <li>\u200b\u4f7f\u7528\u200b\u9019\u4e9b\u200b\u79fb\u9664\u200b\u7684\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u662f\u200b\uff1a</li> <li><code>Bonded</code> - \u200b\u5c07\u5b83\u200b\u5011\u200b\u6dfb\u52a0\u200b\u5230\u200b<code>UnbondingDelegation</code>\u200b\u4e2d\u200b\u7684\u200b\u4e00\u500b\u200b\u689d\u76ee\u200b\uff08\u200b\u5982\u679c\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u5275\u5efa\u200b<code>UnbondingDelegation</code>\uff09\uff0c\u200b\u5b8c\u6210\u200b\u6642\u9593\u200b\u70ba\u200b\u5f9e\u200b\u7576\u524d\u200b\u6642\u9593\u200b\u958b\u59cb\u200b\u7684\u200b\u5b8c\u6574\u200b\u89e3\u9664\u200b\u59d4\u200b\u8a17\u200b\u671f\u200b\u3002\u200b\u66f4\u65b0\u200b\u6c60\u200b\u80a1\u4efd\u200b\u4ee5\u200b\u6e1b\u5c11\u200b<code>BondedTokens</code>\u200b\u4e26\u200b\u589e\u52a0\u200b<code>NotBondedTokens</code>\u200b\u7684\u200b\u80a1\u4efd\u200b\u4ee3\u5e63\u200b\u50f9\u503c\u200b\u3002</li> <li><code>Unbonding</code> - \u200b\u5c07\u5b83\u200b\u5011\u200b\u6dfb\u52a0\u200b\u5230\u200b<code>UnbondingDelegation</code>\u200b\u4e2d\u200b\u7684\u200b\u4e00\u500b\u200b\u689d\u76ee\u200b\uff08\u200b\u5982\u679c\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u5275\u5efa\u200b<code>UnbondingDelegation</code>\uff09\uff0c\u200b\u8207\u9a57\u200b\u8b49\u8005\u200b\uff08<code>UnbondingMinTime</code>\uff09\u200b\u76f8\u540c\u200b\u7684\u200b\u5b8c\u6210\u200b\u6642\u9593\u200b\u3002</li> <li><code>Unbonded</code> - \u200b\u7136\u5f8c\u5c07\u200b<code>coins</code>\u200b\u767c\u9001\u7d66\u200b\u6d88\u606f\u200b<code>DelegatorAddr</code></li> <li>\u200b\u5982\u679c\u200b\u59d4\u200b\u8a17\u200b\u4e2d\u200b\u6c92\u200b\u6709\u200b\u66f4\u200b\u591a\u200b\u7684\u200b<code>Shares</code>\uff0c\u200b\u90a3\u9ebc\u59d4\u200b\u8a17\u200b\u5c0d\u200b\u8c61\u5c07\u200b\u5f9e\u200b\u5b58\u5132\u4e2d\u200b\u79fb\u9664\u200b</li> <li>\u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u5982\u679c\u200b\u59d4\u200b\u8a17\u200b\u662f\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u81ea\u6211\u200b\u59d4\u200b\u8a17\u200b\uff0c\u200b\u90a3\u9ebc\u200b\u9084\u5c07\u200b\u76e3\u7981\u9a57\u200b\u8b49\u8005\u200b\u3002</li> </ul>"},{"location":"staking/#begin-block","title":"Begin-Block(\u200b\u958b\u59cb\u200b\u65b0\u5340\u200b\u584a\u200b)","text":"<p>\u200b\u6bcf\u6b21\u200b abci begin block \u200b\u8abf\u7528\u200b\u6642\u200b\uff0c\u200b\u6b77\u53f2\u200b\u4fe1\u606f\u200b\u5c07\u6839\u64da\u200b<code>HistoricalEntries</code>\u200b\u53c3\u6578\u200b\u9032\u884c\u200b\u5b58\u5132\u200b\u548c\u200b\u4fee\u526a\u200b\u3002</p>"},{"location":"staking/#historical-info-tracking","title":"Historical Info Tracking(\u200b\u6b77\u53f2\u200b\u4fe1\u606f\u200b\u8ddf\u8e2a\u200b)","text":"<p>\u200b\u5982\u679c\u200b <code>HistoricalEntries</code> \u200b\u53c3\u6578\u200b\u70ba\u200b 0\uff0c\u200b\u5247\u200b <code>BeginBlock</code> \u200b\u4e0d\u200b\u57f7\u884c\u200b\u4efb\u4f55\u200b\u64cd\u4f5c\u200b\u3002</p> <p>\u200b\u5426\u5247\u200b\uff0c\u200b\u6700\u65b0\u200b\u7684\u200b\u6b77\u53f2\u200b\u4fe1\u606f\u200b\u5c07\u5b58\u200b\u5132\u5728\u9375\u200b <code>historicalInfoKey|height</code> \u200b\u4e0b\u200b\uff0c\u200b\u800c\u200b\u4efb\u4f55\u200b\u65e9\u200b\u65bc\u200b <code>height - HistoricalEntries</code> \u200b\u7684\u200b\u689d\u76ee\u200b\u90fd\u5c07\u200b\u88ab\u200b\u522a\u9664\u200b\u3002 \u200b\u5728\u200b\u5927\u591a\u200b\u6578\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u6bcf\u500b\u200b\u5340\u584a\u5c07\u200b\u4fee\u526a\u200b\u4e00\u500b\u200b\u689d\u76ee\u200b\u3002 \u200b\u7136\u800c\u200b\uff0c\u200b\u5982\u679c\u200b\u53c3\u6578\u200b <code>HistoricalEntries</code> \u200b\u5df2\u200b\u66f4\u6539\u200b\u70ba\u200b\u8f03\u200b\u4f4e\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u5247\u5b58\u200b\u5132\u4e2d\u5c07\u200b\u6709\u200b\u591a\u500b\u200b\u689d\u76ee\u200b\u9700\u8981\u200b\u4fee\u526a\u200b\u3002</p>"},{"location":"staking/#end-block","title":"End-Block(\u200b\u7d50\u675f\u200b\u5340\u584a\u200b)","text":"<p>\u200b\u6bcf\u6b21\u200b abci end block \u200b\u8abf\u7528\u200b\uff0c\u200b\u90fd\u200b\u6703\u200b\u6307\u5b9a\u200b\u57f7\u884c\u200b\u66f4\u65b0\u200b\u968a\u5217\u548c\u9a57\u200b\u8b49\u5668\u200b\u96c6\u5408\u200b\u8b8a\u200b\u66f4\u200b\u7684\u200b\u64cd\u4f5c\u200b\u3002</p>"},{"location":"staking/#_22","title":"\u9a57\u8b49\u5668\u200b\u96c6\u5408\u200b\u8b8a\u200b\u66f4","text":"<p>\u200b\u5728\u200b\u6b64\u200b\u904e\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u901a\u904e\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u7d50\u675f\u200b\u6642\u904b\u884c\u200b\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u4f86\u200b\u66f4\u65b0\u200b\u62b5\u62bc\u200b\u9a57\u8b49\u5668\u200b\u96c6\u5408\u200b\u3002 \u200b\u4f5c\u70ba\u200b\u6b64\u200b\u904e\u7a0b\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u4efb\u4f55\u200b\u66f4\u65b0\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u4e5f\u200b\u6703\u200b\u8fd4\u56de\u200b\u5230\u200b Tendermint\uff0c\u200b\u4ee5\u4fbf\u200b\u5305\u542b\u200b\u5728\u200b\u8ca0\u8cac\u9a57\u200b\u8b49\u5171\u8b58\u5c64\u200b\u7684\u200b Tendermint \u200b\u6d88\u606f\u200b\u7684\u200b Tendermint \u200b\u9a57\u8b49\u5668\u200b\u96c6\u5408\u200b\u4e2d\u200b\u3002 \u200b\u64cd\u4f5c\u200b\u5982\u4e0b\u200b\uff1a</p> <ul> <li>\u200b\u65b0\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u96c6\u5408\u200b\u53d6\u81ea\u200b\u5f9e\u200b<code>ValidatorsByPower</code>\u200b\u7d22\u5f15\u200b\u4e2d\u6aa2\u7d22\u200b\u7684\u200b\u524d\u200b<code>params.MaxValidators</code>\u200b\u500b\u9a57\u200b\u8b49\u5668\u200b</li> <li>\u200b\u5c07\u200b\u5148\u524d\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u96c6\u5408\u200b\u8207\u200b\u65b0\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u96c6\u5408\u200b\u9032\u884c\u200b\u6bd4\u200b\u8f03\u200b\uff1a</li> <li>\u200b\u7f3a\u5931\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u958b\u59cb\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\uff0c\u200b\u4e26\u5c07\u200b\u5176\u200b<code>Tokens</code>\u200b\u5f9e\u200b<code>BondedPool</code>\u200b\u8f49\u79fb\u200b\u5230\u200b<code>NotBondedPool</code>\u200b\u7684\u200b<code>ModuleAccount</code></li> <li>\u200b\u65b0\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u7acb\u5373\u200b\u7d81\u5b9a\u200b\uff0c\u200b\u4e26\u5c07\u200b\u5176\u200b<code>Tokens</code>\u200b\u5f9e\u200b<code>NotBondedPool</code>\u200b\u8f49\u79fb\u200b\u5230\u200b<code>BondedPool\u200b\u7684\u200bModuleAccount</code></li> </ul> <p>\u200b\u5728\u200b\u6240\u6709\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u4efb\u4f55\u200b\u96e2\u958b\u200b\u6216\u200b\u9032\u5165\u200b\u7d81\u200b\u5b9a\u9a57\u200b\u8b49\u5668\u200b\u96c6\u5408\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\uff0c\u200b\u6216\u8005\u200b\u5728\u200b\u7d81\u200b\u5b9a\u9a57\u200b\u8b49\u5668\u200b\u96c6\u5408\u200b\u5167\u200b\u66f4\u6539\u200b\u9918\u984d\u200b\uff0c \u200b\u90fd\u200b\u6703\u7522\u751f\u200b\u4e00\u689d\u200b\u66f4\u65b0\u200b\u6d88\u606f\u200b\uff0c\u200b\u5831\u544a\u200b\u5b83\u5011\u200b\u7684\u200b\u65b0\u5171\u8b58\u200b\u80fd\u529b\u200b\uff0c\u200b\u7136\u5f8c\u5c07\u200b\u5176\u50b3\u200b\u56de\u5230\u200b Tendermint\u3002</p> <p><code>LastTotalPower</code> \u200b\u548c\u200b <code>LastValidatorsPower</code> \u200b\u4fdd\u5b58\u200b\u4e86\u200b\u4e0a\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u7d50\u675f\u200b\u6642\u200b\u7684\u200b\u7e3d\u200b\u529f\u7387\u200b\u548c\u9a57\u200b\u8b49\u5668\u200b\u529f\u7387\u200b\u7684\u200b\u72c0\u614b\u200b\uff0c \u200b\u4e26\u7528\u200b\u65bc\u200b\u6aa2\u67e5\u200b\u5728\u200bValidatorsByPower\u200b\u4e2d\u767c\u751f\u200b\u7684\u200b\u8b8a\u5316\u200b\u4ee5\u53ca\u200b\u5728\u200bEndBlock\u200b\u671f\u9593\u200b\u8a08\u7b97\u200b\u7684\u200b\u65b0\u200b\u7e3d\u200b\u529f\u7387\u200b\u3002</p>"},{"location":"staking/#_23","title":"\u968a\u5217","text":"<p>\u200b\u5728\u200b\u62b5\u62bc\u200b\u4e2d\u200b\uff0c\u200b\u67d0\u4e9b\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u4e26\u975e\u200b\u77ac\u9593\u200b\u5b8c\u6210\u200b\uff0c\u200b\u800c\u662f\u200b\u5728\u200b\u4e00\u6bb5\u200b\u6642\u9593\u200b\u5167\u200b\u9032\u884c\u200b\uff08\u200b\u901a\u5e38\u200b\u662f\u200b\u89e3\u9664\u200b\u7d81\u200b\u5b9a\u671f\u200b\uff09\u3002 \u200b\u7576\u9019\u4e9b\u200b\u8f49\u63db\u200b\u6210\u719f\u200b\u6642\u200b\uff0c\u200b\u5fc5\u9808\u200b\u57f7\u884c\u200b\u67d0\u4e9b\u200b\u64cd\u4f5c\u200b\u4ee5\u200b\u5b8c\u6210\u200b\u72c0\u614b\u200b\u64cd\u4f5c\u200b\u3002\u200b\u9019\u662f\u200b\u901a\u904e\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u7d50\u675f\u200b\u6642\u200b\u6aa2\u67e5\u200b/\u200b\u8655\u7406\u968a\u200b\u5217\u4f86\u200b\u5be6\u73fe\u200b\u7684\u200b\u3002</p>"},{"location":"staking/#_24","title":"\u89e3\u9664\u200b\u7d81\u5b9a\u9a57\u200b\u8b49\u5668","text":"<p>\u200b\u7576\u9a57\u200b\u8b49\u5668\u200b\u88ab\u200b\u8e22\u200b\u51fa\u200b\u7d81\u200b\u5b9a\u9a57\u200b\u8b49\u5668\u200b\u96c6\u5408\u200b\u6642\u200b\uff08\u200b\u7121\u8ad6\u200b\u662f\u200b\u56e0\u70ba\u200b\u88ab\u200b\u76e3\u7981\u200b\u9084\u662f\u200b\u6c92\u6709\u200b\u8db3\u5920\u200b\u7684\u200b\u7d81\u200b\u5b9a\u4ee3\u5e63\u200b\uff09\uff0c \u200b\u5b83\u5c07\u200b\u958b\u59cb\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u904e\u7a0b\u200b\uff0c\u200b\u540c\u6642\u200b\u6240\u6709\u200b\u8207\u200b\u5176\u59d4\u200b\u8a17\u200b\u7684\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u4e5f\u200b\u5c07\u958b\u59cb\u200b\uff08\u200b\u5118\u200b\u7ba1\u200b\u4ecd\u7136\u200b\u88ab\u59d4\u200b\u8a17\u200b\u7d66\u6b64\u9a57\u200b\u8b49\u5668\u200b\uff09\u3002 \u200b\u5728\u200b\u9019\u4e00\u9ede\u200b\u4e0a\u200b\uff0c\u200b\u9a57\u8b49\u5668\u200b\u88ab\u200b\u8a8d\u70ba\u200b\u662f\u200b\u4e00\u500b\u200b\"\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u9a57\u200b\u8b49\u5668\u200b\"\uff0c\u200b\u5728\u200b\u89e3\u9664\u200b\u7d81\u200b\u5b9a\u671f\u200b\u904e\u53bb\u200b\u4e4b\u200b\u5f8c\u200b\uff0c\u200b\u5b83\u5c07\u200b\u6210\u719f\u200b\u70ba\u200b\u4e00\u500b\u200b\"\u200b\u672a\u200b\u7d81\u200b\u5b9a\u9a57\u200b\u8b49\u5668\u200b\"\u3002</p> <p>\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b\uff0c\u200b\u90fd\u200b\u9700\u8981\u200b\u6aa2\u67e5\u9a57\u200b\u8b49\u5668\u200b\u968a\u5217\u200b\u4e2d\u200b\u662f\u5426\u200b\u6709\u200b\u6210\u719f\u200b\u7684\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u9a57\u200b\u8b49\u5668\u200b\uff08\u200b\u5373\u200b\u5b8c\u6210\u200b\u6642\u9593\u200b &lt;= \u200b\u7576\u524d\u200b\u6642\u9593\u200b\u548c\u200b\u5b8c\u6210\u200b\u9ad8\u5ea6\u200b &lt;= \u200b\u7576\u524d\u200b\u5340\u584a\u200b\u9ad8\u5ea6\u200b\uff09\u3002 \u200b\u6b64\u6642\u200b\uff0c\u200b\u4efb\u4f55\u200b\u6c92\u6709\u200b\u5269\u9918\u59d4\u200b\u8a17\u200b\u7684\u200b\u6210\u719f\u200b\u9a57\u8b49\u5668\u200b\u90fd\u200b\u5c07\u5f9e\u200b\u72c0\u614b\u200b\u4e2d\u200b\u522a\u9664\u200b\u3002 \u200b\u5c0d\u200b\u65bc\u200b\u4ecd\u7136\u200b\u6709\u200b\u5269\u9918\u59d4\u200b\u8a17\u200b\u7684\u200b\u6240\u6709\u200b\u5176\u4ed6\u200b\u6210\u719f\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u9a57\u200b\u8b49\u5668\u200b\uff0c<code>validator.Status</code>\u200b\u5c07\u5f9e\u200b<code>types.Unbonding</code>\u200b\u5207\u63db\u200b\u70ba\u200b<code>types.Unbonded</code>\u3002</p>"},{"location":"staking/#_25","title":"\u89e3\u9664\u200b\u7d81\u5b9a\u59d4\u200b\u8a17","text":"<p>\u200b\u5728\u200b<code>UnbondingDelegations</code>\u200b\u968a\u5217\u200b\u4e2d\u200b\u5b8c\u6210\u200b\u6240\u6709\u200b\u6210\u719f\u200b\u7684\u200b<code>UnbondingDelegations.Entries</code>\u200b\u7684\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\uff0c\u200b\u9075\u5faa\u200b\u4ee5\u4e0b\u200b\u6b65\u9a5f\u200b\uff1a</p> <ul> <li>\u200b\u5c07\u9918\u984d\u200b\u4ee3\u5e63\u200b\u8f49\u79fb\u200b\u5230\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u9322\u200b\u5305\u200b\u5730\u5740\u200b</li> <li>\u200b\u5f9e\u200b<code>UnbondingDelegation.Entries</code>\u200b\u4e2d\u200b\u79fb\u9664\u200b\u6210\u719f\u200b\u7684\u200b\u689d\u76ee\u200b</li> <li>\u200b\u5982\u679c\u200b\u6c92\u6709\u200b\u5269\u9918\u200b\u689d\u76ee\u200b\uff0c\u200b\u5247\u5f9e\u200b\u5b58\u5132\u4e2d\u200b\u79fb\u9664\u200b<code>UnbondingDelegation</code>\u200b\u5c0d\u8c61\u200b\u3002</li> </ul>"},{"location":"staking/#hooks","title":"Hooks(\u200b\u9264\u5b50\u200b)","text":"<p>\u200b\u5176\u4ed6\u200b\u6a21\u7d44\u200b\u53ef\u4ee5\u200b\u8a3b\u200b\u518a\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u5728\u200b\u62b5\u62bc\u200b\u4e2d\u767c\u751f\u200b\u67d0\u500b\u200b\u4e8b\u4ef6\u200b\u6642\u200b\u57f7\u884c\u200b\u3002\u200b\u9019\u4e9b\u200b\u4e8b\u4ef6\u200b\u53ef\u4ee5\u200b\u8a3b\u200b\u518a\u200b\u70ba\u200b\u5728\u200b\u62b5\u62bc\u200b\u4e8b\u4ef6\u200b\u4e4b\u524d\u200b\uff08\u200b\u6839\u64da\u200b\u9264\u5b50\u200b\u540d\u7a31\u200b\uff09\u200b\u6216\u200b\u4e4b\u200b\u5f8c\u200b\u57f7\u884c\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u9264\u5b50\u200b\u53ef\u4ee5\u200b\u5728\u200b\u62b5\u62bc\u200b\u4e2d\u200b\u8a3b\u200b\u518a\u200b\uff1a</p> <ul> <li><code>AfterValidatorCreated(Context, ValAddress)</code></li> <li>\u200b\u7576\u5275\u200b\u5efa\u9a57\u200b\u8b49\u5668\u200b\u6642\u200b\u8abf\u7528\u200b\u3002</li> <li><code>BeforeValidatorModified(Context, ValAddress)</code></li> <li>\u200b\u7576\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u72c0\u614b\u200b\u767c\u751f\u200b\u8b8a\u5316\u6642\u200b\u8abf\u7528\u200b\u3002</li> <li><code>AfterValidatorRemoved(Context, ConsAddress, ValAddress)</code></li> <li>\u200b\u7576\u9a57\u200b\u8b49\u5668\u200b\u88ab\u200b\u522a\u9664\u200b\u6642\u200b\u8abf\u7528\u200b\u3002</li> <li><code>AfterValidatorBonded(Context, ConsAddress, ValAddress)</code></li> <li>\u200b\u7576\u9a57\u200b\u8b49\u5668\u200b\u88ab\u200b\u7d81\u5b9a\u200b\u6642\u200b\u8abf\u7528\u200b\u3002</li> <li><code>AfterValidatorBeginUnbonding(Context, ConsAddress, ValAddress)</code></li> <li>\u200b\u7576\u9a57\u200b\u8b49\u5668\u200b\u958b\u59cb\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u6642\u200b\u8abf\u7528\u200b\u3002</li> <li><code>BeforeDelegationCreated(Context, AccAddress, ValAddress)</code></li> <li>\u200b\u7576\u5275\u200b\u5efa\u59d4\u200b\u8a17\u200b\u6642\u200b\u8abf\u7528\u200b\u3002</li> <li><code>BeforeDelegationSharesModified(Context, AccAddress, ValAddress)</code></li> <li>\u200b\u7576\u59d4\u200b\u8a17\u200b\u4efd\u984d\u200b\u88ab\u200b\u4fee\u6539\u200b\u6642\u8abf\u200b\u7528\u200b\u3002</li> <li><code>BeforeDelegationRemoved(Context, AccAddress, ValAddress)</code></li> <li>\u200b\u7576\u59d4\u200b\u8a17\u200b\u88ab\u200b\u79fb\u9664\u200b\u6642\u8abf\u200b\u7528\u200b\u3002</li> </ul>"},{"location":"staking/#events","title":"Events(\u200b\u4e8b\u4ef6\u200b)","text":"<p>\u200b\u62b5\u62bc\u200b\u6a21\u7d44\u200b\u767c\u51fa\u200b\u4ee5\u4e0b\u200b\u4e8b\u4ef6\u200b\uff1a</p>"},{"location":"staking/#endblocker","title":"EndBlocker","text":"Type Attribute Key Attribute Value complete_unbonding amount {totalUnbondingAmount} complete_unbonding validator {validatorAddress} complete_unbonding delegator {delegatorAddress} complete_redelegation amount {totalRedelegationAmount} complete_redelegation source_validator {srcValidatorAddress} complete_redelegation destination_validator {dstValidatorAddress} complete_redelegation delegator {delegatorAddress}"},{"location":"staking/#_26","title":"\u6d88\u606f\u200b\u4e8b\u4ef6","text":""},{"location":"staking/#msgcreatevalidator_1","title":"MsgCreateValidator","text":"Type Attribute Key Attribute Value create_validator validator {validatorAddress} create_validator amount {delegationAmount} message module staking message action create_validator message sender {senderAddress}"},{"location":"staking/#msgeditvalidator_1","title":"MsgEditValidator","text":"Type Attribute Key Attribute Value edit_validator commission_rate {commissionRate} edit_validator min_self_delegation {minSelfDelegation} message module staking message action edit_validator message sender {senderAddress}"},{"location":"staking/#msgdelegate_1","title":"MsgDelegate","text":"Type Attribute Key Attribute Value delegate validator {validatorAddress} delegate amount {delegationAmount} message module staking message action delegate message sender {senderAddress}"},{"location":"staking/#msgundelegate_1","title":"MsgUndelegate","text":"Type Attribute Key Attribute Value unbond validator {validatorAddress} unbond amount {unbondAmount} unbond completion_time [0] {completionTime} message module staking message action begin_unbonding message sender {senderAddress} <ul> <li>[0] \u200b\u6642\u9593\u200b\u683c\u5f0f\u200b\u9075\u5faa\u200b RFC3339 \u200b\u6a19\u6e96\u200b\u3002</li> </ul>"},{"location":"staking/#_27","title":"\u53c3\u6578","text":"<p>\u200b\u62b5\u62bc\u200b\u6a21\u7d44\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u53c3\u6578\u200b\uff1a</p> Key Type Example UnbondingTime string (time ns) \"259200000000000\" MaxValidators uint16 100 KeyMaxEntries uint16 7 HistoricalEntries uint16 3 BondDenom string \"dst\" PowerReduction string \"1000000\""},{"location":"staking/#_28","title":"\u5ba2\u6236\u200b\u7aef","text":""},{"location":"staking/#cli","title":"CLI","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u547d\u4ee4\u884c\u200b\u754c\u9762\u200b\uff08CLI\uff09\u200b\u67e5\u8a62\u200b\u548c\u200b\u8207\u200bstaking\u200b\u6a21\u7d44\u200b\u4e92\u52d5\u200b\u3002</p>"},{"location":"staking/#query","title":"Query","text":"<p><code>query</code>\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200bstaking\u200b\u7684\u200b\u72c0\u614b\u200b\u3002</p> <pre><code>stcd query staking --help\n</code></pre>"},{"location":"staking/#delegation_1","title":"delegation","text":"<p><code>delegation</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7279\u5b9a\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5728\u200b\u7279\u5b9a\u200b\u9a57\u8b49\u8005\u200b\u4e0a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u60c5\u6cc1\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd query staking delegation [delegator-addr] [validator-addr] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query staking delegation dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>balance:\n  amount: \"10000000000\"\n  denom: dst\ndelegation:\n  delegator_address: dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p\n  shares: \"10000000000.000000000000000000\"\n  validator_address: dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n</code></pre>"},{"location":"staking/#delegations","title":"delegations","text":"<p><code>delegations</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7279\u5b9a\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5728\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u4e0a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u60c5\u6cc1\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd query staking delegations [delegator-addr] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query staking delegations dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>delegation_responses:\n- balance:\n    amount: \"10000000000\"\n    denom: dst\n  delegation:\n    delegator_address: dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p\n    shares: \"10000000000.000000000000000000\"\n    validator_address: dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n- balance:\n    amount: \"10000000000\"\n    denom: dst\n  delegation:\n    delegator_address: dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p\n    shares: \"10000000000.000000000000000000\"\n    validator_address: dstvaloper1x20lytyf6zkcrv5edpkfkn8sz578qg5sqfyqnp\npagination:\n  next_key: null\n  total: \"0\"\n</code></pre>"},{"location":"staking/#delegations-to","title":"delegations-to","text":"<p><code>delegations-to</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7279\u5b9a\u200b\u9a57\u8b49\u8005\u200b\u4e0a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u60c5\u6cc1\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd query staking delegations-to [validator-addr] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query staking delegations-to dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>- balance:\n    amount: \"504000000\"\n    denom: dst\n  delegation:\n    delegator_address: dst1q2qwwynhv8kh3lu5fkeex4awau9x8fwt45f5cp\n    shares: \"504000000.000000000000000000\"\n    validator_address: dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n- balance:\n    amount: \"78125000000\"\n    denom: uixo\n  delegation:\n    delegator_address: dst1qvppl3479hw4clahe0kwdlfvf8uvjtcd99m2ca\n    shares: \"78125000000.000000000000000000\"\n    validator_address: dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\npagination:\n  next_key: null\n  total: \"0\"\n</code></pre>"},{"location":"staking/#historical-info","title":"historical-info","text":"<p><code>historical-info</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u5728\u200b\u7d66\u5b9a\u200b\u9ad8\u5ea6\u200b\u67e5\u8a62\u200b\u6b77\u53f2\u200b\u4fe1\u606f\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd query staking historical-info [height] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query staking historical-info 10\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>header:\n  app_hash: Lbx8cXpI868wz8sgp4qPYVrlaKjevR5WP/IjUxwp3oo=\n  chain_id: testnet\n  consensus_hash: BICRvH3cKD93v7+R1zxE2ljD34qcvIZ0Bdi389qtoi8=\n  data_hash: 47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=\n  evidence_hash: 47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=\n  height: \"10\"\n  last_block_id:\n    hash: RFbkpu6pWfSThXxKKl6EZVDnBSm16+U0l0xVjTX08Fk=\n    part_set_header:\n      hash: vpIvXD4rxD5GM4MXGz0Sad9I7//iVYLzZsEU4BVgWIU=\n      total: 1\n  last_commit_hash: Ne4uXyx4QtNp4Zx89kf9UK7oG9QVbdB6e7ZwZkhy8K0=\n  last_results_hash: 47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=\n  next_validators_hash: nGBgKeWBjoxeKFti00CxHsnULORgKY4LiuQwBuUrhCs=\n  proposer_address: mMEP2c2IRPLr99LedSRtBg9eONM=\n  time: \"2021-10-01T06:00:49.785790894Z\"\n  validators_hash: nGBgKeWBjoxeKFti00CxHsnULORgKY4LiuQwBuUrhCs=\n  version:\n    app: \"0\"\n    block: \"11\"\nvalset:\n- commission:\n    commission_rates:\n      max_change_rate: \"0.010000000000000000\"\n      max_rate: \"0.200000000000000000\"\n      rate: \"0.100000000000000000\"\n    update_time: \"2021-10-01T05:52:50.380144238Z\"\n  consensus_pubkey:\n    '@type': /cosmos.crypto.ed25519.PubKey\n    key: Auxs3865HpB/EfssYOzfqNhEJjzys2Fo6jD5B8tPgC8=\n  delegator_shares: \"10000000.000000000000000000\"\n  description:\n    details: \"\"\n    identity: \"\"\n    moniker: myvalidator\n    security_contact: \"\"\n    website: \"\"\n  jailed: false\n  min_self_delegation: \"1\"\n  operator_address: dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\n  status: BOND_STATUS_BONDED\n  tokens: \"10000000\"\n  unbonding_height: \"0\"\n  unbonding_time: \"1970-01-01T00:00:00Z\"\n</code></pre>"},{"location":"staking/#params_1","title":"params","text":"<p><code>params</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u62b5\u62bc\u200b\u53c3\u6578\u200b\u7684\u200b\u503c\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd query staking params [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query staking params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>bond_denom: dst\nhistorical_entries: 10000\nmax_entries: 7\nmax_validators: 50\nunbonding_time: 1814400s\n</code></pre>"},{"location":"staking/#pool","title":"pool","text":"<p><code>pool</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u5b58\u5132\u200b\u5728\u200b\u62b5\u62bc\u200b\u6c60\u4e2d\u200b\u7684\u200b\u91d1\u984d\u503c\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd q staking pool [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd q staking pool\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>bonded_tokens: \"10000000\"\nnot_bonded_tokens: \"0\"\n``\n\u200b\u7bc4\u4f8b\u200b:\n\n```bash\nstcd query staking redelegation dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p dstvaloper1l2rsakp388kuv9k8qzq6lrm9taddae7fpx59wm dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>pagination: null\nredelegation_responses:\n- entries:\n  - balance: \"50000000\"\n    redelegation_entry:\n      completion_time: \"2021-10-24T20:33:21.960084845Z\"\n      creation_height: 2.382847e+06\n      initial_balance: \"50000000\"\n      shares_dst: \"50000000.000000000000000000\"\n  - balance: \"5000000000\"\n    redelegation_entry:\n      completion_time: \"2021-10-25T21:33:54.446846862Z\"\n      creation_height: 2.397271e+06\n      initial_balance: \"5000000000\"\n      shares_dst: \"5000000000.000000000000000000\"\n  redelegation:\n    delegator_address: dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p\n    entries: null\n    validator_dst_address: dstvaloper1l2rsakp388kuv9k8qzq6lrm9taddae7fpx59wm\n    validator_src_address: dstvaloper1l2rsakp388kuv9k8qzq6lrm9taddae7fpx59wm\n</code></pre>"},{"location":"staking/#unbonding-delegation","title":"unbonding-delegation","text":"<p><code>unbonding-delegation</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7279\u5b9a\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5728\u200b\u7279\u5b9a\u200b\u9a57\u8b49\u8005\u200b\u4e0a\u200b\u7684\u200b\u89e3\u200b\u7d81\u59d4\u200b\u8a17\u200b\u60c5\u6cc1\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd query staking unbonding-delegation [delegator-addr] [validator-addr] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query staking unbonding-delegation dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>delegator_address: dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p\nentries:\n- balance: \"52000000\"\n  completion_time: \"2021-11-02T11:35:55.391594709Z\"\n  creation_height: \"55078\"\n  initial_balance: \"52000000\"\nvalidator_address: dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n</code></pre>"},{"location":"staking/#unbonding-delegations","title":"unbonding-delegations","text":"<p><code>unbonding-delegations</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u4e00\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u6240\u6709\u200b\u89e3\u7d81\u59d4\u200b\u8a17\u200b\u8a18\u9304\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd query staking unbonding-delegations [delegator-addr] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query staking unbonding-delegations dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>pagination:\n  next_key: null\n  total: \"0\"\nunbonding_responses:\n- delegator_address: dst1gghjut3ccd8ay0zduzj64hwre2fxs9ld75ru9p\n  entries:\n  - balance: \"52000000\"\n    completion_time: \"2021-11-02T11:35:55.391594709Z\"\n    creation_height: \"55078\"\n    initial_balance: \"52000000\"\n  validator_address: dstvaloper1t8ehvswxjfn3ejzkjtntcyrqwvmvuknzmvtaaa\n\n</code></pre>"},{"location":"staking/#unbonding-delegations-from","title":"unbonding-delegations-from","text":"<p><code>unbonding-delegations-from</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u5f9e\u9a57\u200b\u8b49\u8005\u200b\u89e3\u7d81\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u60c5\u6cc1\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd query staking unbonding-delegations-from [validator-addr] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query staking unbonding-delegations-from dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>pagination:\n  next_key: null\n  total: \"0\"\nunbonding_responses:\n- delegator_address: dst1qqq9txnw4c77sdvzx0tkedsafl5s3vk7hn53fn\n  entries:\n  - balance: \"150000000\"\n    completion_time: \"2021-11-01T21:41:13.098141574Z\"\n    creation_height: \"46823\"\n    initial_balance: \"150000000\"\n  validator_address: dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n- delegator_address: dst1peteje73eklqau66mr7h7rmewmt2vt99y24f5z\n  entries:\n  - balance: \"24000000\"\n    completion_time: \"2021-10-31T02:57:18.192280361Z\"\n    creation_height: \"21516\"\n    initial_balance: \"24000000\"\n  validator_address: dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n</code></pre>"},{"location":"staking/#validator","title":"validator","text":"<p><code>validator</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u6709\u95dc\u200b\u7279\u5b9a\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd query staking validator [validator-addr] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query staking validator dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>commission:\n  commission_rates:\n    max_change_rate: \"0.020000000000000000\"\n    max_rate: \"0.200000000000000000\"\n    rate: \"0.050000000000000000\"\n  update_time: \"2021-10-01T19:24:52.663191049Z\"\nconsensus_pubkey:\n  '@type': /cosmos.crypto.ed25519.PubKey\n  key: sIiexdJdYWn27+7iUHQJDnkp63gq/rzUq1Y+fxoGjXc=\ndelegator_shares: \"32948270000.000000000000000000\"\ndescription:\n  details: Witval is the validator arm from Vitwit. Vitwit is into software consulting\n    and services business since 2015. We are working closely with Cosmos ecosystem\n    since 2018. We are also building tools for the ecosystem, Aneka is our explorer\n    for the cosmos ecosystem.\n  identity: 51468B615127273A\n  moniker: Witval\n  security_contact: \"\"\n  website: \"\"\njailed: false\nmin_self_delegation: \"1\"\noperator_address: dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\nstatus: BOND_STATUS_BONDED\ntokens: \"32948270000\"\nunbonding_height: \"0\"\nunbonding_time: \"1970-01-01T00:00:00Z\"\n</code></pre>"},{"location":"staking/#validators","title":"validators","text":"<p><code>validators</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u67e5\u8a62\u200b\u7db2\u7d61\u200b\u4e0a\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd query staking validators [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd query staking validators\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>pagination:\n  next_key: FPTi7TKAjN63QqZh+BaXn6gBmD5/\n  total: \"0\"\nvalidators:\ncommission:\n  commission_rates:\n    max_change_rate: \"0.020000000000000000\"\n    max_rate: \"0.200000000000000000\"\n    rate: \"0.050000000000000000\"\n  update_time: \"2021-10-01T19:24:52.663191049Z\"\nconsensus_pubkey:\n  '@type': /cosmos.crypto.ed25519.PubKey\n  key: sIiexdJdYWn27+7iUHQJDnkp63gq/rzUq1Y+fxoGjXc=\ndelegator_shares: \"32948270000.000000000000000000\"\ndescription:\n    details: Witval is the validator arm from Vitwit. Vitwit is into software consulting\n      and services business since 2015. We are working closely with Cosmos ecosystem\n      since 2018. We are also building tools for the ecosystem, Aneka is our explorer\n      for the cosmos ecosystem.\n    identity: 51468B615127273A\n    moniker: Witval\n    security_contact: \"\"\n    website: \"\"\n  jailed: false\n  min_self_delegation: \"1\"\n  operator_address: dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj\n  status: BOND_STATUS_BONDED\n  tokens: \"32948270000\"\n  unbonding_height: \"0\"\n  unbonding_time: \"1970-01-01T00:00:00Z\"\n- commission:\n    commission_rates:\n      max_change_rate: \"0.100000000000000000\"\n      max_rate: \"0.200000000000000000\"\n      rate: \"0.050000000000000000\"\n    update_time: \"2021-10-04T18:02:21.446645619Z\"\n  consensus_pubkey:\n    '@type': /cosmos.crypto.ed25519.PubKey\n    key: GDNpuKDmCg9GnhnsiU4fCWktuGUemjNfvpCZiqoRIYA=\n  delegator_shares: \"559343421.000000000000000000\"\n  description:\n    details: Noderunners is a professional validator in POS networks. We have a huge\n      node running experience, reliable soft and hardware. Our commissions are always\n      low, our support to delegators is always full. Stake with us and start receiving\n      your Cosmos rewards now!\n    identity: 812E82D12FEA3493\n    moniker: Noderunners\n    security_contact: info@noderunners.biz\n    website: http://noderunners.biz\n  jailed: false\n  min_self_delegation: \"1\"\n  operator_address: dstvaloper1q5ku90atkhktze83j9xjaks2p7uruag5zp6wt7\n  status: BOND_STATUS_BONDED\n  tokens: \"559343421\"\n  unbonding_height: \"0\"\n  unbonding_time: \"1970-01-01T00:00:00Z\"\n</code></pre>"},{"location":"staking/#transactions","title":"Transactions","text":"<p><code>tx</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u8207\u200b <code>staking</code> \u200b\u6a21\u7d44\u200b\u9032\u884c\u200b\u4ea4\u4e92\u200b\u3002</p> <pre><code>stcd tx staking --help\n</code></pre>"},{"location":"staking/#create-validator","title":"create-validator","text":"<p>create-validator \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\uff0c\u200b\u4e26\u5c0d\u200b\u5176\u200b\u9032\u884c\u200b\u81ea\u6211\u200b\u59d4\u200b\u8a17\u200b\u521d\u59cb\u5316\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd tx staking create-validator [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd tx staking create-validator \\\n  --amount=1000000dst \\\n  --pubkey=$(stcd tendermint show-validator) \\\n  --moniker=\"my-moniker\" \\\n  --website=\"https://myweb.site\" \\\n  --details=\"description of your validator\" \\\n  --chain-id=\"name_of_chain_id\" \\\n  --commission-rate=\"0.10\" \\\n  --commission-max-rate=\"0.20\" \\\n  --commission-max-change-rate=\"0.01\" \\\n  --min-self-delegation=\"1\" \\\n  --gas=\"auto\" \\\n  --gas-adjustment=\"1.2\" \\\n  --gas-prices=\"5000000000dst\" \\\n  --from=mykey\n</code></pre>"},{"location":"staking/#delegate","title":"delegate","text":"<p><code>delegate</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u5c07\u6d41\u200b\u52d5\u4ee3\u5e63\u59d4\u200b\u8a17\u200b\u7d66\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd tx staking delegate [validator-addr] [amount] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd tx staking delegate dstvaloper1l2rsakp388kuv9k8qzq6lrm9taddae7fpx59wm 1000dst --from mykey\n</code></pre>"},{"location":"staking/#edit-validator","title":"edit-validator","text":"<p>edit-validator \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u7de8\u8f2f\u200b\u73fe\u6709\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u8cec\u6236\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd tx staking edit-validator [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd tx staking edit-validator --moniker \"new_moniker_name\" --website \"new_webiste_url\" --from mykey\n</code></pre>"},{"location":"staking/#unbond","title":"unbond","text":"<p><code>unbond</code> \u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u5f9e\u9a57\u200b\u8b49\u8005\u200b\u4e2d\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u80a1\u4efd\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b:</p> <pre><code>stcd tx staking unbond [validator-addr] [amount] [flags]\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>stcd tx staking unbond dstvaloper1gghjut3ccd8ay0zduzj64hwre2fxs9ldmqhffj 100dst --from mykey\n</code></pre>"},{"location":"staking/#grpc","title":"gRPC","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b gRPC \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b <code>staking</code> \u200b\u6a21\u584a\u200b\u3002</p>"},{"location":"staking/#validators_1","title":"Validators","text":"<p><code>Validators</code> \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b\u7b26\u5408\u200b\u7d66\u5b9a\u200b\u72c0\u614b\u200b\u7684\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u3002</p> <pre><code>cosmos.staking.v1beta1.Query/Validators\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext localhost:9090 cosmos.staking.v1beta1.Query/Validators\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"validators\": [\n    {\n      \"operatorAddress\": \"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\",\n      \"consensusPubkey\": {\"@type\":\"/cosmos.crypto.ed25519.PubKey\",\"key\":\"Auxs3865HpB/EfssYOzfqNhEJjzys2Fo6jD5B8tPgC8=\"},\n      \"status\": \"BOND_STATUS_BONDED\",\n      \"tokens\": \"10000000\",\n      \"delegatorShares\": \"10000000000000000000000000\",\n      \"description\": {\n        \"moniker\": \"myvalidator\"\n      },\n      \"unbondingTime\": \"1970-01-01T00:00:00Z\",\n      \"commission\": {\n        \"commissionRates\": {\n          \"rate\": \"100000000000000000\",\n          \"maxRate\": \"200000000000000000\",\n          \"maxChangeRate\": \"10000000000000000\"\n        },\n        \"updateTime\": \"2021-10-01T05:52:50.380144238Z\"\n      },\n      \"minSelfDelegation\": \"1\"\n    }\n  ],\n  \"pagination\": {\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#validator_1","title":"Validator","text":"<p><code>Validator</code> \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u5730\u5740\u200b\u67e5\u8a62\u9a57\u200b\u8b49\u8005\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.staking.v1beta1.Query/Validator\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext -d '{\"validator_addr\":\"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\"}' \\\nlocalhost:9090 cosmos.staking.v1beta1.Query/Validator\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"validator\": {\n    \"operatorAddress\": \"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\",\n    \"consensusPubkey\": {\"@type\":\"/cosmos.crypto.ed25519.PubKey\",\"key\":\"Auxs3865HpB/EfssYOzfqNhEJjzys2Fo6jD5B8tPgC8=\"},\n    \"status\": \"BOND_STATUS_BONDED\",\n    \"tokens\": \"10000000\",\n    \"delegatorShares\": \"10000000000000000000000000\",\n    \"description\": {\n      \"moniker\": \"myvalidator\"\n    },\n    \"unbondingTime\": \"1970-01-01T00:00:00Z\",\n    \"commission\": {\n      \"commissionRates\": {\n        \"rate\": \"100000000000000000\",\n        \"maxRate\": \"200000000000000000\",\n        \"maxChangeRate\": \"10000000000000000\"\n      },\n      \"updateTime\": \"2021-10-01T05:52:50.380144238Z\"\n    },\n    \"minSelfDelegation\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#validatordelegations","title":"ValidatorDelegations","text":"<p><code>ValidatorDelegations</code> \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u67e5\u8a62\u59d4\u200b\u8a17\u200b\u4fe1\u606f\u200b\u3002`</p> <pre><code>cosmos.staking.v1beta1.Query/ValidatorDelegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext -d '{\"validator_addr\":\"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\"}' \\\nlocalhost:9090 cosmos.staking.v1beta1.Query/ValidatorDelegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"delegationResponses\": [\n    {\n      \"delegation\": {\n        \"delegatorAddress\": \"dst1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgy3ua5t\",\n        \"validatorAddress\": \"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\",\n        \"shares\": \"10000000000000000000000000\"\n      },\n      \"balance\": {\n        \"denom\": \"dst\",\n        \"amount\": \"10000000\"\n      }\n    }\n  ],\n  \"pagination\": {\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#validatorunbondingdelegations","title":"ValidatorUnbondingDelegations","text":"<p><code>ValidatorUnbondingDelegations</code> \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u67e5\u8a62\u200b\u89e3\u7d81\u59d4\u200b\u8a17\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.staking.v1beta1.Query/ValidatorUnbondingDelegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext -d '{\"validator_addr\":\"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\"}' \\\nlocalhost:9090 cosmos.staking.v1beta1.Query/ValidatorUnbondingDelegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"unbonding_responses\": [\n    {\n      \"delegator_address\": \"dst1z3pzzw84d6xn00pw9dy3yapqypfde7vg6965fy\",\n      \"validator_address\": \"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\",\n      \"entries\": [\n        {\n          \"creation_height\": \"25325\",\n          \"completion_time\": \"2021-10-31T09:24:36.797320636Z\",\n          \"initial_balance\": \"20000000\",\n          \"balance\": \"20000000\"\n        }\n      ]\n    },\n    {\n      \"delegator_address\": \"dst1y8nyfvmqh50p6ldpzljk3yrglppdv3t8phju77\",\n      \"validator_address\": \"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\",\n      \"entries\": [\n        {\n          \"creation_height\": \"13100\",\n          \"completion_time\": \"2021-10-30T12:53:02.272266791Z\",\n          \"initial_balance\": \"1000000\",\n          \"balance\": \"1000000\"\n        }\n      ]\n    },\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"8\"\n  }\n}\n</code></pre>"},{"location":"staking/#delegation_2","title":"Delegation","text":"<p>The <code>Delegation</code> endpoint queries delegate information for given validator delegator pair.</p> <pre><code>cosmos.staking.v1beta1.Query/Delegation\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n-d '{\"delegator_addr\": \"dst1y8nyfvmqh50p6ldpzljk3yrglppdv3t8phju77\", validator_addr\":\"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\"}' \\\nlocalhost:9090 cosmos.staking.v1beta1.Query/Delegation\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"delegation_response\":\n  {\n    \"delegation\":\n      {\n        \"delegator_address\":\"dst1y8nyfvmqh50p6ldpzljk3yrglppdv3t8phju77\",\n        \"validator_address\":\"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\",\n        \"shares\":\"25083119936.000000000000000000\"\n      },\n    \"balance\":\n      {\n        \"denom\":\"dst\",\n        \"amount\":\"25083119936\"\n      }\n  }\n}\n</code></pre>"},{"location":"staking/#unbondingdelegation","title":"UnbondingDelegation","text":"<p><code>UnbondingDelegation</code> \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u59d4\u200b\u8a17\u200b\u4eba\u67e5\u200b\u8a62\u89e3\u200b\u7d81\u59d4\u200b\u8a17\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.staking.v1beta1.Query/UnbondingDelegation\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n-d '{\"delegator_addr\": \"dst1y8nyfvmqh50p6ldpzljk3yrglppdv3t8phju77\", validator_addr\":\"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\"}' \\\nlocalhost:9090 cosmos.staking.v1beta1.Query/UnbondingDelegation\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"unbond\": {\n    \"delegator_address\": \"dst1y8nyfvmqh50p6ldpzljk3yrglppdv3t8phju77\",\n    \"validator_address\": \"dstvaloper1rne8lgs98p0jqe82sgt0qr4rdn4hgvmgp9ggcc\",\n    \"entries\": [\n      {\n        \"creation_height\": \"136984\",\n        \"completion_time\": \"2021-11-08T05:38:47.505593891Z\",\n        \"initial_balance\": \"400000000\",\n        \"balance\": \"400000000\"\n      },\n      {\n        \"creation_height\": \"137005\",\n        \"completion_time\": \"2021-11-08T05:40:53.526196312Z\",\n        \"initial_balance\": \"385000000\",\n        \"balance\": \"385000000\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"staking/#delegatordelegations","title":"DelegatorDelegations","text":"<p><code>DelegatorDelegations</code> \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5730\u5740\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.staking.v1beta1.Query/DelegatorDelegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n-d '{\"delegator_addr\": \"dst1y8nyfvmqh50p6ldpzljk3yrglppdv3t8phju77\"}' \\\nlocalhost:9090 cosmos.staking.v1beta1.Query/DelegatorDelegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"delegation_responses\": [\n    {\"delegation\":{\"delegator_address\":\"dst1y8nyfvmqh50p6ldpzljk3yrglppdv3t8phju77\",\"validator_address\":\"dstvaloper1eh5mwu044gd5ntkkc2xgfg8247mgc56fww3vc8\",\"shares\":\"25083339023.000000000000000000\"},\"balance\":{\"denom\":\"dst\",\"amount\":\"25083339023\"}}\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#delegatorunbondingdelegations","title":"DelegatorUnbondingDelegations","text":"<p><code>DelegatorUnbondingDelegations</code> \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5730\u5740\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u89e3\u7d81\u59d4\u200b\u8a17\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.staking.v1beta1.Query/DelegatorUnbondingDelegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n-d '{\"delegator_addr\": \"dst1y8nyfvmqh50p6ldpzljk3yrglppdv3t8phju77\"}' \\\nlocalhost:9090 cosmos.staking.v1beta1.Query/DelegatorUnbondingDelegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"unbonding_responses\": [\n    {\n      \"delegator_address\": \"dst1y8nyfvmqh50p6ldpzljk3yrglppdv3t8phju77\",\n      \"validator_address\": \"dstvaloper1sjllsnramtg3ewxqwwrwjxfgc4n4ef9uxyejze\",\n      \"entries\": [\n        {\n          \"creation_height\": \"136984\",\n          \"completion_time\": \"2021-11-08T05:38:47.505593891Z\",\n          \"initial_balance\": \"400000000\",\n          \"balance\": \"400000000\"\n        },\n        {\n          \"creation_height\": \"137005\",\n          \"completion_time\": \"2021-11-08T05:40:53.526196312Z\",\n          \"initial_balance\": \"385000000\",\n          \"balance\": \"385000000\"\n        }\n      ]\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#delegatorvalidators","title":"DelegatorValidators","text":"<p><code>DelegatorValidators</code> \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.staking.v1beta1.Query/DelegatorValidators\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n-d '{\"delegator_addr\": \"dst1ld5p7hn43yuh8ht28gm9pfjgj2fctujp2tgwvf\"}' \\\nlocalhost:9090 cosmos.staking.v1beta1.Query/DelegatorValidators\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"validators\": [\n    {\n      \"operator_address\": \"dstvaloper1eh5mwu044gd5ntkkc2xgfg8247mgc56fww3vc8\",\n      \"consensus_pubkey\": {\n        \"@type\": \"/cosmos.crypto.ed25519.PubKey\",\n        \"key\": \"UPwHWxH1zHJWGOa/m6JB3f5YjHMvPQPkVbDqqi+U7Uw=\"\n      },\n      \"jailed\": false,\n      \"status\": \"BOND_STATUS_BONDED\",\n      \"tokens\": \"347260647559\",\n      \"delegator_shares\": \"347260647559.000000000000000000\",\n      \"description\": {\n        \"moniker\": \"BouBouNode\",\n        \"identity\": \"\",\n        \"website\": \"https://boubounode.com\",\n        \"security_contact\": \"\",\n        \"details\": \"AI-based Validator. #1 AI Validator on Game of Stakes. Fairly priced. Don't trust (humans), verify. Made with BouBou love.\"\n      },\n      \"unbonding_height\": \"0\",\n      \"unbonding_time\": \"1970-01-01T00:00:00Z\",\n      \"commission\": {\n        \"commission_rates\": {\n          \"rate\": \"0.061000000000000000\",\n          \"max_rate\": \"0.300000000000000000\",\n          \"max_change_rate\": \"0.150000000000000000\"\n        },\n        \"update_time\": \"2021-10-01T15:00:00Z\"\n      },\n      \"min_self_delegation\": \"1\"\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#delegatorvalidator","title":"DelegatorValidator","text":"<p><code>DelegatorValidator</code> \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7ed9\u5b9a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u548c\u9a57\u200b\u8b49\u8005\u200b\u67e5\u8a62\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.staking.v1beta1.Query/DelegatorValidator\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext \\\n-d '{\"delegator_addr\": \"dst1eh5mwu044gd5ntkkc2xgfg8247mgc56f3n8rr7\", \"validator_addr\": \"dstvaloper1eh5mwu044gd5ntkkc2xgfg8247mgc56fww3vc8\"}' \\\nlocalhost:9090 cosmos.staking.v1beta1.Query/DelegatorValidator\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"validator\": {\n    \"operator_address\": \"dstvaloper1eh5mwu044gd5ntkkc2xgfg8247mgc56fww3vc8\",\n    \"consensus_pubkey\": {\n      \"@type\": \"/cosmos.crypto.ed25519.PubKey\",\n      \"key\": \"UPwHWxH1zHJWGOa/m6JB3f5YjHMvPQPkVbDqqi+U7Uw=\"\n    },\n    \"jailed\": false,\n    \"status\": \"BOND_STATUS_BONDED\",\n    \"tokens\": \"347262754841\",\n    \"delegator_shares\": \"347262754841.000000000000000000\",\n    \"description\": {\n      \"moniker\": \"BouBouNode\",\n      \"identity\": \"\",\n      \"website\": \"https://boubounode.com\",\n      \"security_contact\": \"\",\n      \"details\": \"AI-based Validator. #1 AI Validator on Game of Stakes. Fairly priced. Don't trust (humans), verify. Made with BouBou love.\"\n    },\n    \"unbonding_height\": \"0\",\n    \"unbonding_time\": \"1970-01-01T00:00:00Z\",\n    \"commission\": {\n      \"commission_rates\": {\n        \"rate\": \"0.061000000000000000\",\n        \"max_rate\": \"0.300000000000000000\",\n        \"max_change_rate\": \"0.150000000000000000\"\n      },\n      \"update_time\": \"2021-10-01T15:00:00Z\"\n    },\n    \"min_self_delegation\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#historicalinfo_1","title":"HistoricalInfo","text":"<pre><code>cosmos.staking.v1beta1.Query/HistoricalInfo\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext -d '{\"height\" : 1}' localhost:9090 cosmos.staking.v1beta1.Query/HistoricalInfo\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"hist\": {\n    \"header\": {\n      \"version\": {\n        \"block\": \"11\",\n        \"app\": \"0\"\n      },\n      \"chain_id\": \"simd-1\",\n      \"height\": \"140142\",\n      \"time\": \"2021-10-11T10:56:29.720079569Z\",\n      \"last_block_id\": {\n        \"hash\": \"9gri/4LLJUBFqioQ3NzZIP9/7YHR9QqaM6B2aJNQA7o=\",\n        \"part_set_header\": {\n          \"total\": 1,\n          \"hash\": \"Hk1+C864uQkl9+I6Zn7IurBZBKUevqlVtU7VqaZl1tc=\"\n        }\n      },\n      \"last_commit_hash\": \"VxrcS27GtvGruS3I9+AlpT7udxIT1F0OrRklrVFSSKc=\",\n      \"data_hash\": \"80BjOrqNYUOkTnmgWyz9AQ8n7SoEmPVi4QmAe8RbQBY=\",\n      \"validators_hash\": \"95W49n2hw8RWpr1GPTAO5MSPi6w6Wjr3JjjS7AjpBho=\",\n      \"next_validators_hash\": \"95W49n2hw8RWpr1GPTAO5MSPi6w6Wjr3JjjS7AjpBho=\",\n      \"consensus_hash\": \"BICRvH3cKD93v7+R1zxE2ljD34qcvIZ0Bdi389qtoi8=\",\n      \"app_hash\": \"ZZaxnSY3E6Ex5Bvkm+RigYCK82g8SSUL53NymPITeOE=\",\n      \"last_results_hash\": \"47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=\",\n      \"evidence_hash\": \"47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=\",\n      \"proposer_address\": \"aH6dO428B+ItuoqPq70efFHrSMY=\"\n    },\n  \"valset\": [\n      {\n        \"operator_address\": \"dstvaloper196ax4vc0lwpxndu9dyhvca7jhxp70rmcqcnylw\",\n        \"consensus_pubkey\": {\n          \"@type\": \"/cosmos.crypto.ed25519.PubKey\",\n          \"key\": \"/O7BtNW0pafwfvomgR4ZnfldwPXiFfJs9mHg3gwfv5Q=\"\n        },\n        \"jailed\": false,\n        \"status\": \"BOND_STATUS_BONDED\",\n        \"tokens\": \"1426045203613\",\n        \"delegator_shares\": \"1426045203613.000000000000000000\",\n        \"description\": {\n          \"moniker\": \"SG-1\",\n          \"identity\": \"48608633F99D1B60\",\n          \"website\": \"https://sg-1.online\",\n          \"security_contact\": \"\",\n          \"details\": \"SG-1 - your favorite validator on Witval. We offer 100% Soft Slash protection.\"\n        },\n        \"unbonding_height\": \"0\",\n        \"unbonding_time\": \"1970-01-01T00:00:00Z\",\n        \"commission\": {\n          \"commission_rates\": {\n            \"rate\": \"0.037500000000000000\",\n            \"max_rate\": \"0.200000000000000000\",\n            \"max_change_rate\": \"0.030000000000000000\"\n          },\n          \"update_time\": \"2021-10-01T15:00:00Z\"\n        },\n        \"min_self_delegation\": \"1\"\n      }\n    ]\n  }\n}\n\n</code></pre>"},{"location":"staking/#pool_1","title":"Pool","text":"<p><code>Pool</code> \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b\u62b5\u62bc\u200b\u6c60\u200b\uff08Pool\uff09\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.staking.v1beta1.Query/Pool\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext -d localhost:9090 cosmos.staking.v1beta1.Query/Pool\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"pool\": {\n    \"not_bonded_tokens\": \"369054400189\",\n    \"bonded_tokens\": \"15657192425623\"\n  }\n}\n</code></pre>"},{"location":"staking/#params_2","title":"Params","text":"<p><code>Params</code> \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b\u53c3\u6578\u200b\uff08Params\uff09\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>cosmos.staking.v1beta1.Query/Params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>grpcurl -plaintext localhost:9090 cosmos.staking.v1beta1.Query/Params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"params\": {\n    \"unbondingTime\": \"1814400s\",\n    \"maxValidators\": 100,\n    \"maxEntries\": 7,\n    \"historicalEntries\": 10000,\n    \"bondDenom\": \"dst\"\n  }\n}\n</code></pre>"},{"location":"staking/#rest","title":"REST","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>REST</code> \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b <code>staking</code> \u200b\u6a21\u584a\u200b\u3002</p>"},{"location":"staking/#delegatordelegations_1","title":"DelegatorDelegations","text":"<p>DelegatorDelegations REST \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5730\u5740\u200b\u7684\u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>/cosmos/staking/v1beta1/delegations/{delegatorAddr}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \"http://localhost:1317/cosmos/staking/v1beta1/delegations/dst1vcs68xf2tnqes5tg0khr0vyevm40ff6zdxatp5\" -H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"delegation_responses\": [\n    {\n      \"delegation\": {\n        \"delegator_address\": \"dst1vcs68xf2tnqes5tg0khr0vyevm40ff6zdxatp5\",\n        \"validator_address\": \"dstvaloper1quqxfrxkycr0uzt4yk0d57tcq3zk7srm7sm6r8\",\n        \"shares\": \"256250000.000000000000000000\"\n      },\n      \"balance\": {\n        \"denom\": \"dst\",\n        \"amount\": \"256250000\"\n      }\n    },\n    {\n      \"delegation\": {\n        \"delegator_address\": \"dst1vcs68xf2tnqes5tg0khr0vyevm40ff6zdxatp5\",\n        \"validator_address\": \"dstvaloper194v8uwee2fvs2s8fa5k7j03ktwc87h5ym39jfv\",\n        \"shares\": \"255150000.000000000000000000\"\n      },\n      \"balance\": {\n        \"denom\": \"dst\",\n        \"amount\": \"255150000\"\n      }\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"2\"\n  }\n}\n</code></pre>"},{"location":"staking/#delegatorunbondingdelegations_1","title":"DelegatorUnbondingDelegations","text":"<p><code>DelegatorUnbondingDelegations</code> REST \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b\u7d66\u5b9a\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5730\u5740\u200b\u7684\u200b\u6240\u6709\u200b\u89e3\u7d81\u59d4\u200b\u8a17\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>/cosmos/staking/v1beta1/delegators/{delegatorAddr}/unbonding_delegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \\\n\"http://localhost:1317/cosmos/staking/v1beta1/delegators/dst1nxv42u3lv642q0fuzu2qmrku27zgut3n3z7lll/unbonding_delegations\" \\\n-H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"unbonding_responses\": [\n    {\n      \"delegator_address\": \"dst1nxv42u3lv642q0fuzu2qmrku27zgut3n3z7lll\",\n      \"validator_address\": \"dstvaloper1e7mvqlz50ch6gw4yjfemsc069wfre4qwmw53kq\",\n      \"entries\": [\n        {\n          \"creation_height\": \"2442278\",\n          \"completion_time\": \"2021-10-12T10:59:03.797335857Z\",\n          \"initial_balance\": \"50000000000\",\n          \"balance\": \"50000000000\"\n        }\n      ]\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#delegatorvalidators_1","title":"DelegatorValidators","text":"<p><code>DelegatorValidators</code> REST \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5730\u5740\u200b\u67e5\u8a62\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>/cosmos/staking/v1beta1/delegators/{delegatorAddr}/validators\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \\\n\"http://localhost:1317/cosmos/staking/v1beta1/delegators/dst1xwazl8ftks4gn00y5x3c47auquc62ssune9ppv/validators\" \\\n-H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"validators\": [\n    {\n      \"operator_address\": \"dstvaloper1xwazl8ftks4gn00y5x3c47auquc62ssuvynw64\",\n      \"consensus_pubkey\": {\n        \"@type\": \"/cosmos.crypto.ed25519.PubKey\",\n        \"key\": \"5v4n3px3PkfNnKflSgepDnsMQR1hiNXnqOC11Y72/PQ=\"\n      },\n      \"jailed\": false,\n      \"status\": \"BOND_STATUS_BONDED\",\n      \"tokens\": \"21592843799\",\n      \"delegator_shares\": \"21592843799.000000000000000000\",\n      \"description\": {\n        \"moniker\": \"jabbey\",\n        \"identity\": \"\",\n        \"website\": \"https://twitter.com/JoeAbbey\",\n        \"security_contact\": \"\",\n        \"details\": \"just another dad in the cosmos\"\n      },\n      \"unbonding_height\": \"0\",\n      \"unbonding_time\": \"1970-01-01T00:00:00Z\",\n      \"commission\": {\n        \"commission_rates\": {\n          \"rate\": \"0.100000000000000000\",\n          \"max_rate\": \"0.200000000000000000\",\n          \"max_change_rate\": \"0.100000000000000000\"\n        },\n        \"update_time\": \"2021-10-09T19:03:54.984821705Z\"\n      },\n      \"min_self_delegation\": \"1\"\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#delegatorvalidator_1","title":"DelegatorValidator","text":"<p><code>DelegatorValidator</code> REST \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u548c\u9a57\u200b\u8b49\u8005\u200b\u5c0d\u67e5\u200b\u8a62\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>/cosmos/staking/v1beta1/delegators/{delegatorAddr}/validators/{validatorAddr}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \\\n\"http://localhost:1317/cosmos/staking/v1beta1/delegators/dst1xwazl8ftks4gn00y5x3c47auquc62ssune9ppv/validators/dstvaloper1xwazl8ftks4gn00y5x3c47auquc62ssuvynw64\" \\\n-H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"validator\": {\n    \"operator_address\": \"dstvaloper1xwazl8ftks4gn00y5x3c47auquc62ssuvynw64\",\n    \"consensus_pubkey\": {\n      \"@type\": \"/cosmos.crypto.ed25519.PubKey\",\n      \"key\": \"5v4n3px3PkfNnKflSgepDnsMQR1hiNXnqOC11Y72/PQ=\"\n    },\n    \"jailed\": false,\n    \"status\": \"BOND_STATUS_BONDED\",\n    \"tokens\": \"21592843799\",\n    \"delegator_shares\": \"21592843799.000000000000000000\",\n    \"description\": {\n      \"moniker\": \"jabbey\",\n      \"identity\": \"\",\n      \"website\": \"https://twitter.com/JoeAbbey\",\n      \"security_contact\": \"\",\n      \"details\": \"just another dad in the cosmos\"\n    },\n    \"unbonding_height\": \"0\",\n    \"unbonding_time\": \"1970-01-01T00:00:00Z\",\n    \"commission\": {\n      \"commission_rates\": {\n        \"rate\": \"0.100000000000000000\",\n        \"max_rate\": \"0.200000000000000000\",\n        \"max_change_rate\": \"0.100000000000000000\"\n      },\n      \"update_time\": \"2021-10-09T19:03:54.984821705Z\"\n    },\n    \"min_self_delegation\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#historicalinfo_2","title":"HistoricalInfo","text":"<p><code>HistoricalInfo</code> REST \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u67e5\u8a62\u200b\u6b77\u53f2\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>/cosmos/staking/v1beta1/historical_info/{height}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \"http://localhost:1317/cosmos/staking/v1beta1/historical_info/153332\" -H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"hist\": {\n    \"header\": {\n      \"version\": {\n        \"block\": \"11\",\n        \"app\": \"0\"\n      },\n      \"chain_id\": \"cosmos-1\",\n      \"height\": \"153332\",\n      \"time\": \"2021-10-12T09:05:35.062230221Z\",\n      \"last_block_id\": {\n        \"hash\": \"NX8HevR5khb7H6NGKva+jVz7cyf0skF1CrcY9A0s+d8=\",\n        \"part_set_header\": {\n          \"total\": 1,\n          \"hash\": \"zLQ2FiKM5tooL3BInt+VVfgzjlBXfq0Hc8Iux/xrhdg=\"\n        }\n      },\n      \"last_commit_hash\": \"P6IJrK8vSqU3dGEyRHnAFocoDGja0bn9euLuy09s350=\",\n      \"data_hash\": \"eUd+6acHWrNXYju8Js449RJ99lOYOs16KpqQl4SMrEM=\",\n      \"validators_hash\": \"mB4pravvMsJKgi+g8aYdSeNlt0kPjnRFyvtAQtaxcfw=\",\n      \"next_validators_hash\": \"mB4pravvMsJKgi+g8aYdSeNlt0kPjnRFyvtAQtaxcfw=\",\n      \"consensus_hash\": \"BICRvH3cKD93v7+R1zxE2ljD34qcvIZ0Bdi389qtoi8=\",\n      \"app_hash\": \"fuELArKRK+CptnZ8tu54h6xEleSWenHNmqC84W866fU=\",\n      \"last_results_hash\": \"p/BPexV4LxAzlVcPRvW+lomgXb6Yze8YLIQUo/4Kdgc=\",\n      \"evidence_hash\": \"47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=\",\n      \"proposer_address\": \"G0MeY8xQx7ooOsni8KE/3R/Ib3Q=\"\n    },\n    \"valset\": [\n      {\n        \"operator_address\": \"dstvaloper196ax4vc0lwpxndu9dyhvca7jhxp70rmcqcnylw\",\n        \"consensus_pubkey\": {\n          \"@type\": \"/cosmos.crypto.ed25519.PubKey\",\n          \"key\": \"/O7BtNW0pafwfvomgR4ZnfldwPXiFfJs9mHg3gwfv5Q=\"\n        },\n        \"jailed\": false,\n        \"status\": \"BOND_STATUS_BONDED\",\n        \"tokens\": \"1416521659632\",\n        \"delegator_shares\": \"1416521659632.000000000000000000\",\n        \"description\": {\n          \"moniker\": \"SG-1\",\n          \"identity\": \"48608633F99D1B60\",\n          \"website\": \"https://sg-1.online\",\n          \"security_contact\": \"\",\n          \"details\": \"SG-1 - your favorite validator on cosmos. We offer 100% Soft Slash protection.\"\n        },\n        \"unbonding_height\": \"0\",\n        \"unbonding_time\": \"1970-01-01T00:00:00Z\",\n        \"commission\": {\n          \"commission_rates\": {\n            \"rate\": \"0.037500000000000000\",\n            \"max_rate\": \"0.200000000000000000\",\n            \"max_change_rate\": \"0.030000000000000000\"\n          },\n          \"update_time\": \"2021-10-01T15:00:00Z\"\n        },\n        \"min_self_delegation\": \"1\"\n      },\n      {\n        \"operator_address\": \"dstvaloper1t8ehvswxjfn3ejzkjtntcyrqwvmvuknzmvtaaa\",\n        \"consensus_pubkey\": {\n          \"@type\": \"/cosmos.crypto.ed25519.PubKey\",\n          \"key\": \"uExZyjNLtr2+FFIhNDAMcQ8+yTrqE7ygYTsI7khkA5Y=\"\n        },\n        \"jailed\": false,\n        \"status\": \"BOND_STATUS_BONDED\",\n        \"tokens\": \"1348298958808\",\n        \"delegator_shares\": \"1348298958808.000000000000000000\",\n        \"description\": {\n          \"moniker\": \"Cosmostation\",\n          \"identity\": \"AE4C403A6E7AA1AC\",\n          \"website\": \"https://www.cosmostation.io\",\n          \"security_contact\": \"admin@stamper.network\",\n          \"details\": \"Cosmostation validator node. Delegate your tokens and Start Earning Staking Rewards\"\n        },\n        \"unbonding_height\": \"0\",\n        \"unbonding_time\": \"1970-01-01T00:00:00Z\",\n        \"commission\": {\n          \"commission_rates\": {\n            \"rate\": \"0.050000000000000000\",\n            \"max_rate\": \"1.000000000000000000\",\n            \"max_change_rate\": \"0.200000000000000000\"\n          },\n          \"update_time\": \"2021-10-01T15:06:38.821314287Z\"\n        },\n        \"min_self_delegation\": \"1\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"staking/#parameters","title":"Parameters","text":"<p>Parameters REST \u200b\u7aef\u9ede\u200b\u67e5\u8a62\u200b\u62b5\u62bc\u200b\u53c3\u6578\u200b\u3002</p> <p>model: gpt-3.5-turbo-16k-0613</p> <pre><code>/cosmos/staking/v1beta1/params\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \"http://localhost:1317/cosmos/staking/v1beta1/params\" -H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"params\": {\n    \"unbonding_time\": \"2419200s\",\n    \"max_validators\": 100,\n    \"max_entries\": 7,\n    \"historical_entries\": 10000,\n    \"bond_denom\": \"dst\"\n  }\n}\n</code></pre>"},{"location":"staking/#pool_2","title":"Pool","text":"<p><code>Pool</code> REST \u200b\u7aef\u9ede\u67e5\u200b\u8a62\u6c60\u200b\uff08Pool\uff09\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>/cosmos/staking/v1beta1/pool\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \"http://localhost:1317/cosmos/staking/v1beta1/pool\" -H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"pool\": {\n    \"not_bonded_tokens\": \"432805737458\",\n    \"bonded_tokens\": \"15783637712645\"\n  }\n}\n</code></pre>"},{"location":"staking/#validators_2","title":"Validators","text":"<p><code>Validators</code> REST \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u72c0\u614b\u200b\u67e5\u8a62\u200b\u7b26\u5408\u200b\u689d\u4ef6\u200b\u7684\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u3002</p> <pre><code>/cosmos/staking/v1beta1/validators\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \"http://localhost:1317/cosmos/staking/v1beta1/validators\" -H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"validators\": [\n    {\n      \"operator_address\": \"dstvaloper1q3jsx9dpfhtyqqgetwpe5tmk8f0ms5qywje8tw\",\n      \"consensus_pubkey\": {\n        \"@type\": \"/cosmos.crypto.ed25519.PubKey\",\n        \"key\": \"N7BPyek2aKuNZ0N/8YsrqSDhGZmgVaYUBuddY8pwKaE=\"\n      },\n      \"jailed\": false,\n      \"status\": \"BOND_STATUS_BONDED\",\n      \"tokens\": \"383301887799\",\n      \"delegator_shares\": \"383301887799.000000000000000000\",\n      \"description\": {\n        \"moniker\": \"SmartNodes\",\n        \"identity\": \"D372724899D1EDC8\",\n        \"website\": \"https://smartnodes.co\",\n        \"security_contact\": \"\",\n        \"details\": \"Earn Rewards with Crypto Staking &amp; Node Deployment\"\n      },\n      \"unbonding_height\": \"0\",\n      \"unbonding_time\": \"1970-01-01T00:00:00Z\",\n      \"commission\": {\n        \"commission_rates\": {\n          \"rate\": \"0.050000000000000000\",\n          \"max_rate\": \"0.200000000000000000\",\n          \"max_change_rate\": \"0.100000000000000000\"\n        },\n        \"update_time\": \"2021-10-01T15:51:31.596618510Z\"\n      },\n      \"min_self_delegation\": \"1\"\n    },\n    {\n      \"operator_address\": \"dstvaloper1q5ku90atkhktze83j9xjaks2p7uruag5zp6wt7\",\n      \"consensus_pubkey\": {\n        \"@type\": \"/cosmos.crypto.ed25519.PubKey\",\n        \"key\": \"GDNpuKDmCg9GnhnsiU4fCWktuGUemjNfvpCZiqoRIYA=\"\n      },\n      \"jailed\": false,\n      \"status\": \"BOND_STATUS_UNBONDING\",\n      \"tokens\": \"1017819654\",\n      \"delegator_shares\": \"1017819654.000000000000000000\",\n      \"description\": {\n        \"moniker\": \"Noderunners\",\n        \"identity\": \"812E82D12FEA3493\",\n        \"website\": \"http://noderunners.biz\",\n        \"security_contact\": \"info@noderunners.biz\",\n        \"details\": \"Noderunners is a professional validator in POS networks. We have a huge node running experience, reliable soft and hardware. Our commissions are always low, our support to delegators is always full. Stake with us and start receiving your cosmos rewards now!\"\n      },\n      \"unbonding_height\": \"147302\",\n      \"unbonding_time\": \"2021-11-08T22:58:53.718662452Z\",\n      \"commission\": {\n        \"commission_rates\": {\n          \"rate\": \"0.050000000000000000\",\n          \"max_rate\": \"0.200000000000000000\",\n          \"max_change_rate\": \"0.100000000000000000\"\n        },\n        \"update_time\": \"2021-10-04T18:02:21.446645619Z\"\n      },\n      \"min_self_delegation\": \"1\"\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": \"FONDBFkE4tEEf7yxWWKOD49jC2NK\",\n    \"total\": \"2\"\n  }\n}\n</code></pre>"},{"location":"staking/#validator_2","title":"Validator","text":"<p><code>Validator</code> REST \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u5730\u5740\u200b\u67e5\u8a62\u9a57\u200b\u8b49\u8005\u200b\u4fe1\u606f\u200b\u3002`</p> <pre><code>/cosmos/staking/v1beta1/validators/{validatorAddr}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \\\n\"http://localhost:1317/cosmos/staking/v1beta1/validators/dstvaloper16msryt3fqlxtvsy8u5ay7wv2p8mglfg9g70e3q\" \\\n-H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"validator\": {\n    \"operator_address\": \"dstvaloper16msryt3fqlxtvsy8u5ay7wv2p8mglfg9g70e3q\",\n    \"consensus_pubkey\": {\n      \"@type\": \"/cosmos.crypto.ed25519.PubKey\",\n      \"key\": \"sIiexdJdYWn27+7iUHQJDnkp63gq/rzUq1Y+fxoGjXc=\"\n    },\n    \"jailed\": false,\n    \"status\": \"BOND_STATUS_BONDED\",\n    \"tokens\": \"33027900000\",\n    \"delegator_shares\": \"33027900000.000000000000000000\",\n    \"description\": {\n      \"moniker\": \"Witval\",\n      \"identity\": \"51468B615127273A\",\n      \"website\": \"\",\n      \"security_contact\": \"\",\n      \"details\": \"Witval is the validator arm from Vitwit. Vitwit is into software consulting and services business since 2015. We are working closely with Cosmos ecosystem since 2018. We are also building tools for the ecosystem, Aneka is our explorer for the cosmos ecosystem.\"\n    },\n    \"unbonding_height\": \"0\",\n    \"unbonding_time\": \"1970-01-01T00:00:00Z\",\n    \"commission\": {\n      \"commission_rates\": {\n        \"rate\": \"0.050000000000000000\",\n        \"max_rate\": \"0.200000000000000000\",\n        \"max_change_rate\": \"0.020000000000000000\"\n      },\n      \"update_time\": \"2021-10-01T19:24:52.663191049Z\"\n    },\n    \"min_self_delegation\": \"1\"\n  }\n}\n</code></pre>"},{"location":"staking/#validatordelegations_1","title":"ValidatorDelegations","text":"<p>The <code>ValidatorDelegations</code> REST endpoint queries delegate information for given validator.</p> <pre><code>/cosmos/staking/v1beta1/validators/{validatorAddr}/delegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \"http://localhost:1317/cosmos/staking/v1beta1/validators/dstvaloper16msryt3fqlxtvsy8u5ay7wv2p8mglfg9g70e3q/delegations\" -H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"delegation_responses\": [\n    {\n      \"delegation\": {\n        \"delegator_address\": \"dst190g5j8aszqhvtg7cprmev8xcxs6csra7xnk3n3\",\n        \"validator_address\": \"dstvaloper16msryt3fqlxtvsy8u5ay7wv2p8mglfg9g70e3q\",\n        \"shares\": \"31000000000.000000000000000000\"\n      },\n      \"balance\": {\n        \"denom\": \"dst\",\n        \"amount\": \"31000000000\"\n      }\n    },\n    {\n      \"delegation\": {\n        \"delegator_address\": \"dst1ddle9tczl87gsvmeva3c48nenyng4n56qwq4ee\",\n        \"validator_address\": \"dstvaloper16msryt3fqlxtvsy8u5ay7wv2p8mglfg9g70e3q\",\n        \"shares\": \"628470000.000000000000000000\"\n      },\n      \"balance\": {\n        \"denom\": \"dst\",\n        \"amount\": \"628470000\"\n      }\n    },\n    {\n      \"delegation\": {\n        \"delegator_address\": \"dst10fdvkczl76m040smd33lh9xn9j0cf26kk4s2nw\",\n        \"validator_address\": \"dstvaloper16msryt3fqlxtvsy8u5ay7wv2p8mglfg9g70e3q\",\n        \"shares\": \"838120000.000000000000000000\"\n      },\n      \"balance\": {\n        \"denom\": \"dst\",\n        \"amount\": \"838120000\"\n      }\n    },\n    {\n      \"delegation\": {\n        \"delegator_address\": \"dst1n8f5fknsv2yt7a8u6nrx30zqy7lu9jfm0t5lq8\",\n        \"validator_address\": \"dstvaloper16msryt3fqlxtvsy8u5ay7wv2p8mglfg9g70e3q\",\n        \"shares\": \"500000000.000000000000000000\"\n      },\n      \"balance\": {\n        \"denom\": \"dst\",\n        \"amount\": \"500000000\"\n      }\n    },\n    {\n      \"delegation\": {\n        \"delegator_address\": \"dst16msryt3fqlxtvsy8u5ay7wv2p8mglfg9hrek2e\",\n        \"validator_address\": \"dstvaloper16msryt3fqlxtvsy8u5ay7wv2p8mglfg9g70e3q\",\n        \"shares\": \"61310000.000000000000000000\"\n      },\n      \"balance\": {\n        \"denom\": \"dst\",\n        \"amount\": \"61310000\"\n      }\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"5\"\n  }\n}\n</code></pre>"},{"location":"staking/#delegation_3","title":"Delegation","text":"<p><code>Delegation</code> REST \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5c0d\u67e5\u200b\u8a62\u59d4\u200b\u8a17\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>/cosmos/staking/v1beta1/validators/{validatorAddr}/delegations/{delegatorAddr}\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \\\n\"http://localhost:1317/cosmos/staking/v1beta1/validators/dstvaloper16msryt3fqlxtvsy8u5ay7wv2p8mglfg9g70e3q/delegations/dst1n8f5fknsv2yt7a8u6nrx30zqy7lu9jfm0t5lq8\" \\\n-H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"delegation_response\": {\n    \"delegation\": {\n      \"delegator_address\": \"dst1n8f5fknsv2yt7a8u6nrx30zqy7lu9jfm0t5lq8\",\n      \"validator_address\": \"dstvaloper16msryt3fqlxtvsy8u5ay7wv2p8mglfg9g70e3q\",\n      \"shares\": \"500000000.000000000000000000\"\n    },\n    \"balance\": {\n      \"denom\": \"dst\",\n      \"amount\": \"500000000\"\n    }\n  }\n}\n</code></pre>"},{"location":"staking/#unbondingdelegation_1","title":"UnbondingDelegation","text":"<p><code>UnbondingDelegation</code> REST \u200b\u7aef\u9ede\u200b\u6839\u64da\u200b\u7d66\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5c0d\u67e5\u200b\u8a62\u89e3\u200b\u7d81\u59d4\u200b\u8a17\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>/cosmos/staking/v1beta1/validators/{validatorAddr}/delegations/{delegatorAddr}/unbonding_delegation\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \\\n\"http://localhost:1317/cosmos/staking/v1beta1/validators/dstvaloper13v4spsah85ps4vtrw07vzea37gq5la5gktlkeu/delegations/dst1ze2ye5u5k3qdlexvt2e0nn0508p04094ya0qpm/unbonding_delegation\" \\\n-H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"unbond\": {\n    \"delegator_address\": \"dst1ze2ye5u5k3qdlexvt2e0nn0508p04094ya0qpm\",\n    \"validator_address\": \"dstvaloper13v4spsah85ps4vtrw07vzea37gq5la5gktlkeu\",\n    \"entries\": [\n      {\n        \"creation_height\": \"153687\",\n        \"completion_time\": \"2021-11-09T09:41:18.352401903Z\",\n        \"initial_balance\": \"525111\",\n        \"balance\": \"525111\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"staking/#validatorunbondingdelegations_1","title":"ValidatorUnbondingDelegations","text":"<p><code>ValidatorUnbondingDelegations</code> REST \u200b\u7aef\u9ede\u67e5\u200b\u8a62\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u89e3\u200b\u7d81\u59d4\u200b\u8a17\u200b\u4fe1\u606f\u200b\u3002</p> <pre><code>/cosmos/staking/v1beta1/validators/{validatorAddr}/unbonding_delegations\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b:</p> <pre><code>curl -X GET \\\n\"http://localhost:1317/cosmos/staking/v1beta1/validators/dstvaloper13v4spsah85ps4vtrw07vzea37gq5la5gktlkeu/unbonding_delegations\" \\\n-H  \"accept: application/json\"\n</code></pre> <p>\u200b\u7bc4\u4f8b\u200b\u8f38\u51fa\u200b:</p> <pre><code>{\n  \"unbonding_responses\": [\n    {\n      \"delegator_address\": \"dst1q9snn84jfrd9ge8t46kdcggpe58dua82vnj7uy\",\n      \"validator_address\": \"dstvaloper13v4spsah85ps4vtrw07vzea37gq5la5gktlkeu\",\n      \"entries\": [\n        {\n          \"creation_height\": \"90998\",\n          \"completion_time\": \"2021-11-05T00:14:37.005841058Z\",\n          \"initial_balance\": \"24000000\",\n          \"balance\": \"24000000\"\n        }\n      ]\n    },\n    {\n      \"delegator_address\": \"dst1qf36e6wmq9h4twhdvs6pyq9qcaeu7ye0s3dqq2\",\n      \"validator_address\": \"dstvaloper13v4spsah85ps4vtrw07vzea37gq5la5gktlkeu\",\n      \"entries\": [\n        {\n          \"creation_height\": \"47478\",\n          \"completion_time\": \"2021-11-01T22:47:26.714116854Z\",\n          \"initial_balance\": \"8000000\",\n          \"balance\": \"8000000\"\n        }\n      ]\n    }\n  ],\n  \"pagination\": {\n    \"next_key\": null,\n    \"total\": \"2\"\n  }\n}\n</code></pre>"},{"location":"validator/","title":"\u6982\u8ff0","text":""},{"location":"validator/#_2","title":"\u8a2d\u7f6e\u200b\u548c\u200b\u914d\u7f6e","text":""},{"location":"validator/#_3","title":"\u904b\u884c\u9a57\u200b\u8b49\u5668","text":""},{"location":"validator/#_4","title":"\u914d\u7f6e","text":""},{"location":"validator/#_5","title":"\u786c\u76e4\u200b\u4f7f\u7528\u200b\u512a\u5316","text":""},{"location":"validator/#_6","title":"\u72c0\u614b\u200b\u540c\u6b65","text":""},{"location":"validator/#_7","title":"\u5167\u5b58\u6c60","text":""},{"location":"validator/#_8","title":"\u9a57\u8b49\u5668\u200b\u5e38\u898b\u200b\u554f\u984c","text":""},{"location":"validator/#_9","title":"\u9a57\u8b49\u5668\u200b\u5b89\u5168","text":""},{"location":"validator/#ddos","title":"\u54e8\u5175\u200b\u7bc0\u9ede\u200b (DDOS \u200b\u4fdd\u8b77\u200b)","text":""},{"location":"validator/#_10","title":"\u5bc6\u9470\u5099\u200b\u4efd","text":""},{"location":"validator/#_11","title":"\u5347\u7d1a","text":""},{"location":"validator/#_12","title":"\u5347\u7d1a\u200b\u6e05\u55ae","text":""},{"location":"validator/#_13","title":"\u786c\u200b\u5206\u53c9\u200b\u5347\u7d1a","text":""},{"location":"validator/#_14","title":"\u624b\u52d5\u200b\u5347\u7d1a","text":""},{"location":"validator/#_15","title":"\u6e2c\u8a66\u7db2","text":""},{"location":"validator/#_16","title":"\u4e3b\u7db2","text":""},{"location":"chat/chat_doc/","title":"\u670d\u52d9\u6587\u6a94","text":""},{"location":"chat/chat_doc/#_2","title":"\u6982\u8ff0","text":"<p>\u200b\u804a\u5929\u200b\u670d\u52d9\u200b\u662f\u200b\u57fa\u200b\u65bc\u200bchat\u200b\u5354\u8b70\u200b\u958b\u767c\u200b\u7684\u200b\u804a\u5929\u200b\u670d\u52d9\u200b\uff0c\u200b\u652f\u6301\u200b\u57fa\u200b\u65bc\u200b\u623f\u9593\u200b\u548c\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u52a0\u5bc6\u200b\u901a\u4fe1\u200b\u3002 \u200b\u540c\u6642\u200b\u652f\u6301\u200b\u806f\u90a6\u5236\u200b\u7684\u200b\u8de8\u200b\u670d\u52d9\u200b\u7bc0\u9ede\u200b\u901a\u4fe1\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u57fa\u200b\u65bc\u200bwebrtc\u200b\u7684\u200b\u9ede\u5c0d\u9ede\u200b\u97f3\u8996\u983b\u200b\u901a\u8a71\u200b\u3002</p> <p>\u200b\u8de8\u200b\u670d\u52d9\u200b\u7bc0\u9ede\u200b\u7684\u200b\u901a\u8a0a\u200b\u793a\u610f\u200b</p> <pre><code>    { Chat client A }                             { Chat client B }\n        ^          |                                    ^          |\n        |  events  |  Client-Server API                 |  events  |\n        |          V                                    |          V\n    +------------------+                            +------------------+\n    |                  |---------( HTTP )---------&gt; |                  |\n    |   homeserver     |                            |   homeserver     |\n    |                  |&lt;--------( HTTP )---------- |                  |\n    +------------------+      Server-Server API     +------------------+\n                          History Synchronisation\n                              (Federation)\n</code></pre>"},{"location":"chat/chat_doc/#_3","title":"\u57fa\u790e\u200b\u6982\u5ff5","text":""},{"location":"chat/chat_doc/#servername","title":"Servername\uff08\u200b\u865b\u64ec\u200b\u57df\u540d\u200b\uff09","text":"<p>servername\u200b\u4f5c\u70ba\u200b\u804a\u5929\u200b\u670d\u52d9\u200b\u7684\u200b\u865b\u64ec\u200b\u57df\u540d\u200b\uff08domain\uff09\uff0c\u200b\u548c\u200b\u7528\u6236\u200b\u7684\u200b\u9322\u200b\u5305\u200b\u5730\u5740\u200b\u5171\u540c\u200b\u69cb\u6210\u200b\u7528\u6236\u200bID</p>"},{"location":"chat/chat_doc/#users","title":"Users\uff08\u200b\u7528\u6236\u200b\uff09","text":"<p>\u200b\u6bcf\u500b\u200b\u5ba2\u6236\u200b\u7aef\u200b\u95dc\u806f\u200b\u4e00\u500b\u200b\u8cec\u865f\u200b\uff0c\u200b\u7528\u4f86\u200b\u4f5c\u70ba\u200b\u804a\u5929\u200b\u7cfb\u7d71\u200b\u7684\u200b\u552f\u4e00\u200b\u8eab\u4efd\u200b\u8b58\u5225\u200b\uff0c\u200b\u5373\u200buserID\u3002\u200b\u9019\u500b\u200b\u8cec\u865f\u200b\u8207\u200bhomeserver\u200b\u76f8\u95dc\u806f\u200b\u5f62\u6210\u200b\u4e00\u500b\u200b\u7a7a\u9593\u200b\u5206\u9694\u200b\u5316\u200b\u7684\u200b\u8cec\u865f\u200b\uff0c\u200b\u5f62\u200b\u5982\u200b\uff1a</p> <pre><code>@localpart:domain\n</code></pre>"},{"location":"chat/chat_doc/#devices","title":"Devices\uff08\u200b\u8a2d\u5099\u200b\uff09","text":"<p>\u200b\u5728\u200b\u804a\u5929\u200b\u7cfb\u7d71\u200b\u5167\u5b9a\u200b\u7fa9\u4e86\u200b\u4e00\u500b\u200b\u8a2d\u5099\u200b\u7684\u200b\u6982\u5ff5\u200b\uff0c\u200b\u9019\u500b\u200b\u8a2d\u5099\u200b\u53ef\u4ee5\u200b\u662f\u200b\u4e00\u500b\u200b\u684c\u9762\u200b\u5ba2\u6236\u200b\u7aef\u200b\uff0c\u200b\u4e00\u4e9b\u200b\u700f\u89bd\u5668\u200b\uff0c\u200b\u4e00\u500b\u200b\u5b89\u5353\u200b\u8a2d\u5099\u200b\u6216\u8005\u200b\u4e00\u500b\u200biPone\u200b\u7b49\u7b49\u200b\uff08\u200b\u76ee\u524d\u200b\u50c5\u958b\u200b\u653e\u5b89\u5353\u200b\u8a2d\u5099\u200b\uff09\u3002 \u200b\u4e00\u500b\u200b\u804a\u5929\u200b\u7cfb\u7d71\u200b\u7684\u200b\u8a2d\u5099\u200b\u5c31\u200b\u95dc\u806f\u200b\u65bc\u200b\u4e00\u500b\u200b\u73fe\u5be6\u200b\u4e2d\u200b\u7684\u200b\u7269\u7406\u200b\u8a2d\u5099\u200b\u6216\u8005\u200b\u79fb\u52d5\u200b\u61c9\u7528\u200b\u3002</p> <p>\u200b\u8a2d\u5099\u200b\u4e3b\u8981\u200b\u61c9\u7528\u200b\u65bc\u200b\u7ba1\u7406\u200b\u7528\u200b\u65bc\u200b\u7aef\u200b\u5c0d\u200b\u7aef\u200b\u52a0\u5bc6\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\uff08\u200b\u6bcf\u500b\u200b\u8a2d\u5099\u200b\u53ef\u4ee5\u200b\u5f97\u5230\u200b\u81ea\u5df1\u200b\u7684\u200b\u89e3\u5bc6\u200b\u79d8\u9470\u200b\u62f7\u8c9d\u200b\uff09\uff0c\u200b\u540c\u6642\u200b\u5728\u200b\u76f8\u540c\u200b\u8cec\u865f\u200b\u7684\u200b\u5176\u5b83\u200b\u8a2d\u5099\u200b\u9032\u884c\u200b\u9023\u63a5\u200b\u6642\u200b\u63d0\u4f9b\u200b\u5e6b\u52a9\u200b\u3002</p> <p>\u200b\u7576\u4e00\u500b\u200b\u7528\u6236\u200b\u7b2c\u4e00\u6b21\u200b\u4f7f\u7528\u200b\u5ba2\u6236\u200b\u7aef\u7684\u200b\u6642\u5019\u200b\uff0c\u200b\u5ba2\u6236\u200b\u7aef\u6703\u200b\u628a\u200b\u81ea\u5df1\u200b\u8a3b\u200b\u518a\u200b\u70ba\u200b\u65b0\u200b\u8a2d\u200b\u5099\u200b\u3002\u200b\u4e0d\u540c\u200b\u7684\u200b\u8a2d\u5099\u200b\u901a\u904e\u200b\u8a2d\u5099\u200bID\uff08device_id\uff09\u200b\u9032\u884c\u200b\u8eab\u4efd\u200b\u8b58\u5225\u200b\uff0c\u200b\u8a2d\u5099\u200bID\u200b\u5c0d\u200b\u65bc\u200b\u6bcf\u500b\u200b\u7528\u6236\u200b\u662f\u200b\u552f\u4e00\u200b\u7684\u200b\u3002 \u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u7d66\u8a2d\u200b\u5099\u5b9a\u200b\u7fa9\u4e00\u500b\u200b\u4eba\u6027\u5316\u200b\u7684\u200b\u53ef\u8b80\u200b\u7684\u200b\u8a2d\u5099\u200b\u540d\u7a31\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u4ed6\u5011\u200b\u4f86\u200b\u7ba1\u7406\u200b\u8a2d\u5099\u200b\u3002</p>"},{"location":"chat/chat_doc/#events","title":"Events\uff08\u200b\u4e8b\u4ef6\u200b\uff09","text":"<p>\u200b\u6240\u6709\u200b\u804a\u5929\u200b\u5167\u200b\u7684\u200b\u6578\u64da\u200b\u4ea4\u63db\u200b\u90fd\u200b\u662f\u200b\u57fa\u200b\u65bc\u200bevent\u200b\u4e8b\u4ef6\u200b\u9032\u884c\u200b\u7684\u200b\u3002\u200b\u901a\u904e\u200b\u4e8b\u4ef6\u200b\u5b9a\u7fa9\u5ba2\u200b\u6236\u7aef\u200b\u884c\u70ba\u200b\uff0c\u200b\u6bcf\u500b\u200b\u4e8b\u4ef6\u200b\u90fd\u200b\u6709\u200b\u4e00\u500b\u200btype\u200b\u985e\u578b\u200b\u5c6c\u6027\u200b\uff0c\u200b\u7528\u4f86\u5340\u200b\u5206\u6578\u64da\u200b\u985e\u578b\u200b\u3002\u200b\u6bcf\u500b\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b\u5fc5\u9808\u200b\u662f\u200b\u5168\u5c40\u200b\u552f\u4e00\u200b\u7684\u200b\uff0c \u200b\u9075\u5faa\u200bJava\u200b\u547d\u540d\u200b\u7a7a\u9593\u200b\u7684\u200b\u547d\u540d\u200b\u898f\u5247\u200b\uff0c\u200b\u4f8b\u5982\u200bm.room.message\u200b\u4ee3\u8868\u200b\u623f\u9593\u200b\u5167\u200b\u7684\u200b\u6d88\u606f\u200b\u4e8b\u4ef6\u200b\u3002</p>"},{"location":"chat/chat_doc/#event-graphs","title":"Event Graphs\uff08\u200b\u4e8b\u4ef6\u200b\u5716\u200b\uff09","text":"<p>\u200b\u623f\u9593\u200b\u5167\u200b\u7684\u200b\u6240\u6709\u200b\u4e8b\u4ef6\u200b\u6578\u64da\u200b\u4ea4\u63db\u200b\u88ab\u200b\u5b58\u5132\u200b\u5728\u200b\u4e00\u500b\u200b\u7a31\u4f5c\u200b\u4e8b\u4ef6\u200b\u5716\u200b(Event Graphs)\u200b\u7684\u200b\u6709\u200b\u5411\u200b\u7121\u200b\u74b0\u5716\u200b\u5167\u200b\u3002\u200b\u5716\u4e2d\u200b\u7684\u200b\u6bcf\u500b\u200b\u4e8b\u4ef6\u200b\u6309\u7167\u200b\u6642\u9593\u200b\u9806\u5e8f\u200b\u6392\u5217\u200b\u800c\u6210\u200b\u3002</p> <p>\u200b\u901a\u5e38\u200b\uff0c\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\u53ea\u6709\u200b\u4e00\u500b\u200b\u7236\u200b\u4e8b\u4ef6\u200b\uff1a\u200b\u767c\u9001\u200b\u6d88\u606f\u200b\u6642\u200b\u623f\u9593\u200b\u4e2d\u200b\u7684\u200b\u6700\u65b0\u6d88\u606f\u200b\u3002 \u200b\u4f46\u662f\u200b\uff0c\u200b\u5bb6\u5ead\u200b\u670d\u52d9\u5668\u200b(homeserver)\u200b\u5728\u200b\u767c\u9001\u200b\u6d88\u606f\u200b\u6642\u200b\u53ef\u80fd\u200b\u6703\u200b\u5408\u6cd5\u200b\u5730\u200b\u76f8\u4e92\u200b\u7af6\u722d\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u5c0e\u81f4\u200b\u55ae\u500b\u200b\u4e8b\u4ef6\u200b\u6709\u200b\u591a\u200b\u500b\u5f8c\u7e7c\u200b\u4e8b\u4ef6\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u6dfb\u52a0\u200b\u5230\u200b\u5716\u200b\u4e2d\u200b\u7684\u200b\u4e0b\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\u5c07\u6709\u200b\u591a\u500b\u200b\u7236\u9805\u200b\u3002\u200b\u6bcf\u500b\u200b\u4e8b\u4ef6\u200b\u5716\u200b\u90fd\u200b\u6709\u200b\u4e00\u500b\u200b\u6c92\u6709\u7236\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6839\u200b\u4e8b\u4ef6\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u6392\u5e8f\u200b\u548c\u200b\u7c21\u5316\u200b\u5716\u4e2d\u200b\u4e8b\u4ef6\u200b\u4e4b\u9593\u200b\u7684\u200b\u6642\u9593\u200b\u9806\u5e8f\u200b\u6bd4\u200b\u8f03\u200b\uff0c\u200b\u5bb6\u5ead\u200b\u670d\u52d9\u5668\u200b\u5728\u200b\u6bcf\u500b\u200b\u4e8b\u4ef6\u200b\u4e0a\u7dad\u8b77\u200b\u4e00\u500b\u200b\u6df1\u5ea6\u200b\u5143\u6578\u200b\u64da\u200b\u5b57\u200b\u6bb5\u200b\u3002 \u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6df1\u5ea6\u200b\u662f\u200b\u4e00\u500b\u200b\u6b63\u200b\u6574\u6578\u200b\uff0c\u200b\u56b4\u683c\u200b\u5927\u200b\u65bc\u200b\u5176\u200b\u4efb\u4f55\u200b\u7236\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6df1\u5ea6\u200b\u3002 \u200b\u6839\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6df1\u5ea6\u200b\u61c9\u70ba\u200b 1\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5982\u679c\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\u5728\u200b\u53e6\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\u4e4b\u524d\u200b\uff0c\u200b\u5247\u5b83\u200b\u7684\u200b\u6df1\u5ea6\u200b\u5fc5\u9808\u200b\u56b4\u683c\u200b\u5c0f\u200b\u65bc\u200b 1\u3002</p>"},{"location":"chat/chat_doc/#room-structure","title":"Room structure\uff08\u200b\u623f\u9593\u200b\u7d50\u69cb\u200b\uff09","text":"<p>\u200b\u623f\u9593\u200b\u662f\u200b\u4e00\u500b\u200b\u6982\u5ff5\u6027\u200b\u7684\u200b\u5730\u65b9\u200b\uff0c\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5176\u4e2d\u200b\u767c\u9001\u200b\u548c\u200b\u63a5\u6536\u200b\u4e8b\u4ef6\u200b\u3002 \u200b\u4e8b\u4ef6\u200b\u88ab\u200b\u767c\u200b\u9001\u5230\u200b\u4e00\u500b\u200b\u623f\u9593\u200b\uff0c\u200b\u8a72\u200b\u623f\u9593\u200b\u4e2d\u200b\u5177\u6709\u200b\u8db3\u5920\u200b\u8a2a\u554f\u200b\u6b0a\u9650\u200b\u7684\u200b\u6240\u6709\u200b\u53c3\u8207\u8005\u200b\u90fd\u5c07\u200b\u6536\u5230\u200b\u8a72\u200b\u4e8b\u4ef6\u200b\u3002 \u200b\u623f\u9593\u200b\u901a\u904e\u200b\u201c\u200b\u623f\u9593\u200b ID\u201d\u200b\u5728\u200b\u5167\u90e8\u200b\u552f\u4e00\u200b\u6a19\u8b58\u200b\uff0c\u200b\u5177\u6709\u200b\u4ee5\u4e0b\u200b\u5f62\u5f0f\u200b\uff1a</p> <pre><code>!room_id:domain  # room_id\uff1a\u200b\u4e00\u500b\u200b16\u200b\u4f4d\u200b\u7684\u200b\u96a8\u6a5f\u200b\u5b57\u7b26\u4e32\u200b\n</code></pre> <p>\u200b\u6bcf\u500b\u200b\u623f\u9593\u200b\u53ea\u6709\u200b\u4e00\u500b\u200b\u623f\u9593\u200bID\u3002 \u200b\u96d6\u7136\u200b\u623f\u9593\u200b ID \u200b\u78ba\u5be6\u200b\u5305\u542b\u200b\u57df\u200b\uff0c\u200b\u4f46\u200b\u5b83\u200b\u50c5\u7528\u200b\u65bc\u200b\u5168\u5c40\u200b\u547d\u540d\u200b\u7a7a\u9593\u200b\u623f\u9593\u200b ID\u3002\u200b\u8a72\u200b\u623f\u9593\u200b\u4e0d\u200b\u5728\u200b\u6307\u5b9a\u200b\u7684\u200b\u57df\u200b\u4e2d\u200b\u3002</p> <p>\u200b\u4e0b\u9762\u200b\u7684\u200b\u6982\u5ff5\u200b\u5716\u986f\u793a\u200b\u4e86\u200b\u4e00\u500b\u200b m.room.message \u200b\u4e8b\u4ef6\u200b\u88ab\u200b\u767c\u200b\u9001\u5230\u200b\u623f\u9593\u200b !qporfwt:daodst.com\uff1a</p> <pre><code>\n    { @alice:daodst.com }                             { @bob:example.org }\n            |                                                 ^\n            |                                                 |\n    [HTTP POST]                                  [HTTP GET]\n    Room ID: !qporfwt:daodst.com                 Room ID: !qporfwt:daodst.com\n    Event type: m.room.message                   Event type: m.room.message\n    Content: { JSON object }                     Content: { JSON object }\n            |                                                 |\n            V                                                 |\n    +------------------+                          +------------------+\n    |   homeserver     |                          |   homeserver     |\n    |   daodst.com     |                          |   example.org    |\n    +------------------+                          +------------------+\n            |                                                 ^\n            |         [HTTP PUT]                              |\n            |         Room ID: !qporfwt:daodst.com            |\n            |         Event type: m.room.message              |\n            |         Content: { JSON object }                |\n            `-------&gt; Pointer to the preceding message  ------`\n                      PKI signature from daodst.com\n                      Transaction-layer metadata\n                      PKI Authorization header\n\n                  ....................................\n                 |           Shared Data              |\n                 | State:                             |\n                 |   Room ID: !qporfwt:daodst.com     |\n                 |   Servers: daodst.com, example.org |\n                 |   Members:                         |\n                 |    - @alice:daodst.com             |\n                 |    - @bob:example.org              |\n                 | Messages:                          |\n                 |   - @alice:daodst.com              |\n                 |     Content: { JSON object }       |\n                 |....................................|\n\n</code></pre> <p>\u200b\u806f\u90a6\u200b\u6a5f\u5236\u200b\u5728\u200b\u591a\u500b\u200bhomeserver\u200b\u4e4b\u9593\u200b\u7dad\u8b77\u200b\u6bcf\u500b\u200b\u623f\u9593\u200b\u7684\u200b\u5171\u4eab\u200b\u6578\u64da\u200b\u7d50\u69cb\u200b\u3002\u200b\u6578\u64da\u200b\u5206\u70ba\u200b\u6d88\u606f\u200b\u4e8b\u4ef6\u200b\u548c\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u3002</p> <p>\u200b\u6d88\u606f\u200b\u4e8b\u4ef6\u200b\uff1a\u200b\u9019\u4e9b\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u623f\u9593\u200b\u5167\u200b\u7684\u200b\u77ac\u614b\u200b\u201c\u200b\u4e00\u6b21\u6027\u200b\u201d\u200b\u6d3b\u52d5\u200b\uff0c\u200b\u4f8b\u5982\u200b\u5373\u6642\u200b\u6d88\u606f\u200b\u3001VoIP \u200b\u547c\u53eb\u200b\u8a2d\u7f6e\u200b\u3001\u200b\u6587\u4ef6\u200b\u50b3\u8f38\u200b\u7b49\u200b\u3002\u200b\u5b83\u5011\u200b\u901a\u5e38\u200b\u63cf\u8ff0\u200b\u901a\u4fe1\u200b\u6d3b\u52d5\u200b\u3002</p> <p>\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\uff1a\u200b\u9019\u4e9b\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u5c0d\u200b\u8207\u200b\u623f\u9593\u200b\u76f8\u95dc\u200b\u7684\u200b\u7d66\u5b9a\u200b\u6301\u4e45\u200b\u4fe1\u606f\u200b\uff08\u201c\u200b\u72c0\u614b\u200b\u201d\uff09\u200b\u7684\u200b\u66f4\u65b0\u200b\uff0c\u200b\u4f8b\u5982\u200b\u623f\u9593\u200b\u7684\u200b\u540d\u7a31\u200b\u3001\u200b\u4e3b\u984c\u200b\u3001\u200b\u6210\u54e1\u8cc7\u683c\u200b\u3001\u200b\u53c3\u8207\u200b\u7684\u200b\u670d\u52d9\u5668\u200b\u7b49\u200b\u3002\u200b\u72c0\u614b\u200b\u88ab\u200b\u5efa\u6a21\u200b\u70ba\u9375\u200b/\u200b\u503c\u200b\u5c0d\u200b\u7684\u200b\u67e5\u627e\u200b\u8868\u200b \u200b\u6bcf\u500b\u200b\u623f\u9593\u200b\uff0c\u200b\u6bcf\u500b\u9375\u200b\u90fd\u200b\u662f\u200b state_key \u200b\u548c\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b\u7684\u200b\u5143\u7d44\u200b\u3002\u200b\u6bcf\u500b\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u90fd\u200b\u6703\u200b\u66f4\u65b0\u200b\u7d66\u5b9a\u9375\u200b\u7684\u200b\u503c\u200b\u3002</p> <p>\u200b\u7d66\u5b9a\u9ede\u200b\u7684\u200b\u623f\u9593\u200b\u72c0\u614b\u200b\u662f\u200b\u901a\u904e\u200b\u8003\u616e\u200b\u5716\u4e2d\u200b\u7d66\u5b9a\u200b\u4e8b\u4ef6\u200b\u4e4b\u524d\u200b\u548c\u200b\u5305\u62ec\u200b\u7d66\u5b9a\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6240\u6709\u200b\u4e8b\u4ef6\u200b\u4f86\u8a08\u7b97\u200b\u7684\u200b\u3002\u200b\u5728\u200b\u4e8b\u4ef6\u200b\u63cf\u8ff0\u200b\u76f8\u540c\u200b\u72c0\u614b\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u61c9\u7528\u5408\u200b\u4f75\u200b\u885d\u7a81\u200b\u7b97\u6cd5\u200b\u3002\u200b\u72c0\u614b\u200b\u89e3\u6790\u200b\u7b97\u6cd5\u200b\u662f\u200b\u53ef\u200b\u50b3\u905e\u200b\u7684\u200b\uff0c\u200b\u4e0d\u4f9d\u200b\u8cf4\u200b\u65bc\u200b\u670d\u52d9\u5668\u200b\u72c0\u614b\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u200b\u5fc5\u9808\u200b\u59cb\u7d42\u200b\u9078\u64c7\u200b\u76f8\u540c\u200b\u7684\u200b\u4e8b\u4ef6\u200b\uff0c\u200b\u800c\u200b\u4e0d\u7ba1\u200b\u670d\u52d9\u5668\u200b\u6216\u200b\u63a5\u6536\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u9806\u5e8f\u200b\u5982\u4f55\u200b\u3002\u200b\u4e8b\u4ef6\u200b\u7531\u200b\u539f\u59cb\u200b\u670d\u52d9\u5668\u200b\u7c3d\u540d\u200b\uff08\u200b\u7c3d\u540d\u200b\u5305\u62ec\u200b\u7236\u95dc\u200b\u4fc2\u200b\uff0c \u200b\u985e\u578b\u200b\u3001\u200b\u6df1\u5ea6\u200b\u548c\u200b\u6709\u6548\u200b\u8ca0\u8f09\u200b\u54c8\u5e0c\u200b\uff09\u200b\u4e26\u901a\u904e\u200b\u806f\u5408\u200b\u63a8\u9001\u200b\u5230\u200b\u623f\u9593\u200b\u4e2d\u200b\u7684\u200b\u53c3\u200b\u8207\u200b\u670d\u52d9\u5668\u200b\uff0c\u200b\u76ee\u524d\u200b\u4f7f\u7528\u200b\u5168\u7db2\u200b\u72c0\u62d3\u200b\u64b2\u200b\u3002\u200b\u670d\u52d9\u5668\u9084\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u806f\u5408\u200b\u5f9e\u200b\u53c3\u200b\u8207\u200b\u623f\u9593\u200b\u7684\u200b\u5176\u4ed6\u200b\u670d\u52d9\u5668\u200b\u8acb\u6c42\u200b\u56de\u586b\u200b\u4e8b\u4ef6\u200b\u3002</p>"},{"location":"chat/chat_doc/#room-aliases","title":"Room Aliases(\u200b\u623f\u9593\u200b\u5225\u540d\u200b)","text":"<p>\u200b\u6bcf\u500b\u200b\u623f\u9593\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u6709\u591a\u500b\u200b\u201c\u200b\u623f\u9593\u200b\u5225\u540d\u200b\u201d\uff0c\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b\uff1a</p> <pre><code>  #room_alias:domain\n</code></pre> <p>\u200b\u623f\u9593\u200b\u5225\u540d\u200b\u201c\u200b\u6307\u5411\u200b\u201d\u200b\u623f\u9593\u200b ID\uff0c\u200b\u662f\u200b\u7528\u200b\u65bc\u200b\u516c\u200b\u4f48\u200b\u548c\u200b\u767c\u73fe\u200b\u623f\u9593\u200b\u7684\u200b\u4eba\u985e\u200b\u53ef\u200b\u8b80\u6a19\u200b\u7c64\u200b\u3002\u200b\u5225\u540d\u200b\u6307\u5411\u200b\u7684\u200b\u623f\u9593\u200b ID \u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u8a2a\u554f\u200b\u6307\u5b9a\u200b\u7684\u200b\u57df\u200b\u4f86\u200b\u7372\u53d6\u200b\u3002\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u5f9e\u200b\u623f\u9593\u200b\u5225\u540d\u200b\u5230\u200b\u623f\u9593\u200b ID \u200b\u7684\u200b\u6620\u5c04\u200b\u4e0d\u662f\u200b\u56fa\u5b9a\u200b\u7684\u200b\uff0c\u200b\u4e26\u4e14\u200b\u53ef\u80fd\u200b\u6703\u200b\u96a8\u8457\u200b\u6642\u9593\u200b\u7684\u200b\u63a8\u79fb\u200b\u800c\u200b\u6539\u8b8a\u200b\u4ee5\u200b\u6307\u5411\u200b\u4e0d\u540c\u200b\u7684\u200b\u623f\u9593\u200b ID\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5ba2\u6236\u200b\u7aef\u61c9\u200b\u8a72\u5c07\u200b\u623f\u9593\u200b\u5225\u540d\u200b\u89e3\u6790\u200b\u70ba\u200b\u623f\u9593\u200b ID \u200b\u4e00\u6b21\u200b\uff0c\u200b\u7136\u5f8c\u5728\u5f8c\u7e8c\u200b\u8acb\u6c42\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u8a72\u200b ID\u3002</p> <p>\u200b\u89e3\u6790\u200b\u623f\u9593\u200b\u5225\u540d\u200b\u6642\u200b\uff0c\u200b\u670d\u52d9\u5668\u200b\u9084\u5c07\u97ff\u200b\u61c9\u200b\u623f\u9593\u200b\u4e2d\u200b\u53ef\u7528\u200b\u65bc\u200b\u52a0\u5165\u200b\u7684\u200b\u670d\u52d9\u5668\u200b\u5217\u8868\u200b\u3002</p> <pre><code>    HTTP GET\n    #matrix:example.org      !aaabaa:daodst.com\n       |                    ^\n       |                    |\n    _______V____________________|____\n    |          example.org           |\n    | Mappings:                      |\n    | #matrix &gt;&gt; !aaabaa:daodst.com  |\n    | #golf   &gt;&gt; !wfeiofh:sport.com  |\n    | #bike   &gt;&gt; !4rguxf:daodst.com  |\n    |________________________________|\n</code></pre>"},{"location":"chat/chat_doc/#identity","title":"Identity(\u200b\u8eab\u4efd\u200b)","text":"<p>Matrix \u200b\u4e2d\u200b\u7684\u200b\u7528\u6236\u200b\u662f\u200b\u901a\u904e\u200b\u4ed6\u5011\u200b\u7684\u200b Matrix \u200b\u7528\u6236\u200b ID \u200b\u4f86\u8b58\u5225\u200b\u7684\u200b\u3002\u200b\u4f46\u662f\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u73fe\u6709\u200b\u7684\u200b\u7b2c\u200b 3 \u200b\u65b9\u200b ID \u200b\u540d\u7a31\u200b\u7a7a\u9593\u200b\u4f86\u8b58\u5225\u200b Matrix \u200b\u7528\u6236\u200b\u3002\u200b\u77e9\u9663\u200b\u201c\u200b\u8eab\u4efd\u200b\u201d\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u7528\u6236\u200b ID \u200b\u548c\u200b\u93c8\u200b\u63a5\u5230\u200b\u5176\u200b\u5e33\u6236\u200b\u7684\u200b\u7b2c\u4e09\u65b9\u200b\u540d\u7a31\u200b\u7a7a\u9593\u200b\u4e2d\u200b\u7684\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u73fe\u6709\u200b ID\u3002 Matrix \u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u5c07\u96fb\u5b50\u200b\u90f5\u4ef6\u200b\u5730\u5740\u200b\u3001\u200b\u793e\u4ea4\u200b\u7db2\u7d61\u200b\u5e33\u6236\u200b\u548c\u200b\u96fb\u8a71\u200b\u865f\u78bc\u200b\u7b49\u200b\u7b2c\u4e09\u65b9\u200b ID (3PID) \u200b\u93c8\u200b\u63a5\u5230\u200b\u4ed6\u5011\u200b\u7684\u200b\u7528\u6236\u200b ID\u3002\u200b\u93c8\u63a5\u200b 3PID \u200b\u6703\u200b\u5275\u5efa\u200b\u5f9e\u200b 3PID \u200b\u5230\u200b\u7528\u6236\u200b ID \u200b\u7684\u200b\u6620\u5c04\u200b\u3002 Matrix \u200b\u7528\u6236\u200b\u96a8\u5f8c\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u6b64\u200b\u6620\u5c04\u200b\u4f86\u200b\u767c\u73fe\u200b\u5176\u200b\u806f\u200b\u7e6b\u200b\u4eba\u200b\u7684\u200b\u7528\u200b\u6236\u200b ID\u3002\u200b\u70ba\u200b\u4e86\u200b\u78ba\u4fdd\u200b\u5f9e\u200b 3PID \u200b\u5230\u200b\u7528\u6236\u200b ID \u200b\u7684\u200b\u6620\u5c04\u200b\u662f\u200b\u771f\u5be6\u200b\u7684\u200b\uff0c\u200b\u4e00\u500b\u200b\u5168\u7403\u200b\u806f\u5408\u200b\u7684\u200b\u53ef\u4fe1\u200b\u201c\u200b\u8eab\u4efd\u200b\u670d\u52d9\u5668\u200b\u201d\uff08IS\uff09\u200b\u96c6\u7fa4\u200b\u88ab\u200b\u7528\u200b\u4f86\u9a57\u8b49\u200b 3PID \u200b\u4e26\u200b\u4fdd\u5b58\u200b\u548c\u200b\u5fa9\u200b\u5236\u200b\u6620\u5c04\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u4f7f\u200b\u5ba2\u6236\u200b\u7aef\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u6210\u70ba\u200b Matrix \u200b\u751f\u614b\u200b\u7cfb\u7d71\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b IS\u3002\u200b\u4f46\u662f\u200b\uff0c\u200b\u5982\u679c\u200b\u6c92\u6709\u200b\u4e00\u500b\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5c07\u7121\u6cd5\u200b\u4f7f\u7528\u200b 3PID \u200b\u67e5\u627e\u200b\u7528\u6236\u200b ID\u3002</p>"},{"location":"chat/chat_doc/#private-user-data","title":"Private User Data\uff08\u200b\u7528\u6236\u200b\u96b1\u79c1\u200b\u6578\u64da\u200b\uff09","text":"<p>\u200b\u7528\u6236\u9084\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4ed6\u5011\u200b\u7684\u200b\u5e33\u6236\u200b\u4e2d\u200b\u5b58\u5132\u200b\u4efb\u610f\u200b\u79c1\u9470\u200b/\u200b\u503c\u6578\u64da\u200b\u2014\u2014\u200b\u4f8b\u5982\u200b\u5ba2\u6236\u200b\u7aef\u9996\u200b\u9078\u9805\u200b\u6216\u200b\u7f3a\u5c11\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u5c08\u7528\u200b API \u200b\u7684\u200b\u670d\u52d9\u5668\u200b\u914d\u7f6e\u200b\u8a2d\u7f6e\u200b\u3002 API \u200b\u8207\u200b\u7ba1\u7406\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u6578\u64da\u200b\u5c0d\u200b\u7a31\u200b\u3002</p>"},{"location":"chat/client_server/","title":"\u5ba2\u6237\u7aef\u200b-\u200b\u670d\u52a1\u5668\u200b\u63a5\u53e3","text":"<p>\u200b\u5ba2\u6237\u7aef\u200b-\u200b\u670d\u52a1\u5668\u200b API \u200b\u5141\u8bb8\u200b\u5ba2\u6237\u7aef\u200b \u200b\u53d1\u9001\u200b\u6d88\u606f\u200b,\u200b\u63a7\u5236\u200b\u623f\u95f4\u200b\u548c\u200b\u540c\u6b65\u200b\u5bf9\u8bdd\u200b\u5386\u53f2\u8bb0\u5f55\u200b\u3002\u200b\u662f\u200b\u7684\u200b \u200b\u65e8\u5728\u200b\u652f\u6301\u200b\u4e0d\u200b\u5b58\u50a8\u72b6\u6001\u200b\u7684\u200b\u8f7b\u91cf\u7ea7\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b \u200b\u6839\u636e\u200b\u9700\u8981\u200b\u4ece\u200b\u670d\u52a1\u5668\u200b\u5ef6\u8fdf\u200b\u52a0\u8f7d\u200b\u6570\u636e\u200b - \u200b\u4ee5\u53ca\u200b\u91cd\u91cf\u7ea7\u200b\u6570\u636e\u200b \u200b\u7ef4\u62a4\u200b\u670d\u52a1\u5668\u200b\u72b6\u6001\u200b\u7684\u200b\u5b8c\u6574\u200b\u672c\u5730\u200b\u6301\u4e45\u200b\u526f\u672c\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\u3002</p>"},{"location":"chat/client_server/#1","title":"1.\u200b\u63a5\u53e3\u6807\u51c6","text":"<p>Matrix \u200b\u4e2d\u200b\u5ba2\u6237\u7aef\u200b-\u200b\u670d\u52a1\u5668\u200b\u901a\u4fe1\u200b\u7684\u200b\u5f3a\u5236\u200b\u57fa\u7ebf\u200b\u662f\u200b \u200b\u901a\u8fc7\u200b HTTP API \u200b\u4ea4\u6362\u200b JSON \u200b\u5bf9\u8c61\u200b\u3002\u200b\u66f4\u200b\u9ad8\u6548\u200b\u7684\u200b\u8fd0\u8f93\u200b\u53ef\u80fd\u200b\u662f\u200b \u200b\u5c06\u6765\u200b\u6307\u5b9a\u200b\u4e3a\u200b\u53ef\u9009\u200b\u6269\u5c55\u200b\u3002</p> <p>\u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200b HTTPS \u200b\u8fdb\u884c\u200b\u901a\u4fe1\u200b\u3002\u200b\u4f7f\u7528\u200b\u7eaf\u200b HTTP \u200b\u4e0d\u662f\u200b \u200b\u63a8\u8350\u200b\u7684\u200b\u5916\u90e8\u200b\u6d4b\u8bd5\u73af\u5883\u200b\u3002</p> <p>\u200b\u5ba2\u6237\u7aef\u200b\u4f7f\u7528\u200b\u4e0d\u200b\u900f\u660e\u200b\u5b57\u7b26\u4e32\u200baccess_token\u200b\u8fdb\u884c\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u3002</p> <p>\u200b\u6240\u6709\u200b\u548c\u200b\u7aef\u70b9\u200b,\u200b\u9664\u4e86\u200b POST /_matrix/media/v3/upload \u200b\u548c\u200b PUT /_matrix/media/v3/upload/{serverName}/{mediaId}, \u200b\u8981\u6c42\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u5305\u542b\u200b\uff08\u200b\u53ef\u80fd\u200b\u4e3a\u7a7a\u200b\uff09\u200b\u7684\u200b\u8bf7\u6c42\u200b\u6b63\u6587\u200bPOST JSON \u200b\u5bf9\u8c61\u200b\u3002\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u4e3a\u200b\u5177\u6709\u200bPUT JSON \u200b\u6b63\u6587\u200b\u7684\u200b\u6240\u6709\u200b\u8bf7\u6c42\u200b\u63d0\u4f9b\u200b\u6807\u5934\u200bContent-Type application/json,\u200b\u4f46\u200b\u8fd9\u200b\u4e0d\u662f\u200b\u5fc5\u9700\u200b\u7684\u200b\u3002</p> <p>\u200b\u540c\u6837\u200b,\u200b\u6240\u6709\u200b\u7aef\u70b9\u200b\u90fd\u200b\u8981\u6c42\u200b\u670d\u52a1\u5668\u8fd4\u56de\u200b JSON \u200b\u5bf9\u8c61\u200b, \u200b\u9664\u4e86\u200b\u5bf9\u200b GET /matrix/media/v200/download/{serverName}/{mediaId} \u200b\u548c\u200b GET / matrix/media/v3/thumbnail/{serverName}/{mediaId} \u200b\u7684\u200b 3 \u200b\u4e2a\u200b\u54cd\u5e94\u200b\u3002 \u200b\u670d\u52a1\u5668\u200b\u5fc5\u987b\u200b\u5305\u542b\u200b\u6240\u6709\u200b JSON \u200b\u54cd\u5e94\u200b\u7684\u200b\u6807\u5934\u200b\u3002Content-Typeapplication/json</p> <p>\u200b\u8bf7\u6c42\u200b\u6216\u200b\u54cd\u5e94\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b JSON \u200b\u6570\u636e\u200b\u90fd\u200b\u5fc5\u987b\u200b\u4f7f\u7528\u200b UTF-8 \u200b\u8fdb\u884c\u200b\u7f16\u7801\u200b\u3002</p> <p>\u200b\u53e6\u200b\u8bf7\u53c2\u9605\u200b\u9644\u5f55\u200b\u4e2d\u200b\u7684\u200b\u77e9\u9635\u200b API \u200b\u7ea6\u5b9a\u200b,\u200b\u4e86\u89e3\u200b\u6240\u6709\u200b\u77e9\u9635\u200b API \u200b\u5e94\u200b\u9075\u5faa\u200b\u7684\u200b\u7ea6\u5b9a\u200b, \u200b\u548c\u200b\u4e0b\u9762\u200b\u7684\u200b Web \u200b\u6d4f\u89c8\u5668\u200b\u5ba2\u6237\u7aef\u200b\u4ee5\u200b\u83b7\u53d6\u200b\u5176\u4ed6\u200b \u200b\u670d\u52a1\u5668\u200b\u54cd\u5e94\u200b\u7684\u200b\u8981\u6c42\u200b\u3002</p>"},{"location":"chat/client_server/#11","title":"1.1 \u200b\u6807\u51c6\u200b\u9519\u8bef\u200b\u54cd\u5e94","text":"<p>\u200b\u5728\u200b\u77e9\u9635\u200bAPI\u200b\u7ea7\u522b\u200b\u53d1\u751f\u200b\u7684\u200b\u4efb\u4f55\u200b\u9519\u8bef\u200b\u90fd\u200b\u5fc5\u987b\u200b\u8fd4\u56de\u200b\"\u200b\u6807\u51c6\u200b\" \u200b\u9519\u8bef\u200b\u54cd\u5e94\u200b\"\u3002\u200b\u8fd9\u662f\u200b\u4e00\u4e2a\u200b JSON \u200b\u5bf9\u8c61\u200b,\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b:</p> <pre><code>{\n  \"errcode\": \"&lt;error code&gt;\",\n  \"error\": \"&lt;error message&gt;\"\n}\n</code></pre> <p>\u200b\u8be5\u200b\u5b57\u7b26\u4e32\u200b\u5c06\u200b\u662f\u200b\u4eba\u7c7b\u200b\u53ef\u8bfb\u200b\u7684\u200b\u9519\u8bef\u200b\u6d88\u606f\u200b,\u200b\u901a\u5e38\u200b\u4e3a\u200b \u200b\u89e3\u91ca\u200b\u51fa\u200b\u4e86\u200b\u4ec0\u4e48\u200b\u95ee\u9898\u200b\u7684\u200b\u53e5\u5b50\u200b\u3002error</p> <p>\u200b\u8be5\u200b\u5b57\u7b26\u4e32\u200b\u5c06\u200b\u662f\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b,\u200b\u53ef\u200b\u7528\u4e8e\u200b\u5904\u7406\u200b \u200b\u9519\u8bef\u200b\u6d88\u606f\u200b,\u200b\u4f8b\u5982\u200b .\u200b\u9519\u8bef\u4ee3\u7801\u200b\u5e94\u200b\u5177\u6709\u200b\u5176\u200b\u547d\u540d\u200b\u7a7a\u95f4\u200b \u200b\u5728\u200b\u6240\u6709\u200b\u5927\u5199\u5b57\u6bcd\u200b\u4e2d\u200b\u9996\u5148\u200b,\u200b\u7136\u540e\u200b\u662f\u200b\u5355\u4e2a\u200b.\u200b\u4f8b\u5982\u200b,\u200b\u5982\u679c\u200b\u6709\u200b\u81ea\u5b9a\u4e49\u200b \u200b\u547d\u540d\u200b\u7a7a\u95f4\u200b\u548c\u200b\u4ee3\u7801\u200b,\u200b\u9519\u8bef\u4ee3\u7801\u200b\u5e94\u200b \u200b\u8096\u200b\u3002\u200b\u7531\u6b64\u200b\u5b9a\u4e49\u200b\u7684\u200b\u9519\u8bef\u4ee3\u7801\u200b \u200b\u89c4\u8303\u200b\u5e94\u8be5\u200b\u5f00\u59cb\u200b\u3002errcodeM_FORBIDDEN_com.mydomain.hereFORBIDDENCOM.MYDOMAIN.HERE_FORBIDDENM_</p> <p>\u200b\u4e00\u4e9b\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u9519\u8bef\u200b\u4e2d\u200b\u5e94\u8be5\u200b\u5b58\u5728\u200b\u7684\u200b\u5176\u4ed6\u200b\u952e\u200b \u200b\u54cd\u5e94\u200b\u5bf9\u8c61\u200b,\u200b\u4f46\u952e\u200b\u548c\u200b\u5fc5\u987b\u200b\u59cb\u7ec8\u200b\u5b58\u5728\u200b\u3002errcodeerrorerrcode</p> <p>\u200b\u9519\u8bef\u200b\u901a\u5e38\u200b\u6700\u597d\u200b\u7531\u200b\u5176\u200b\u9519\u8bef\u4ee3\u7801\u200b\u8868\u793a\u200b,\u200b\u800c\u200b\u4e0d\u662f\u200b \u200b\u8fd4\u56de\u200b\u7684\u200b HTTP \u200b\u72b6\u6001\u200b\u4ee3\u7801\u200b\u3002\u200b\u9047\u5230\u200b\u9519\u8bef\u7801\u200b\u65f6\u200b, \u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u9996\u9009\u200b HTTP \u200b\u72b6\u6001\u200b\u4ee3\u7801\u200b\u4f5c\u4e3a\u200b\u66f4\u200b\u53ef\u9760\u200b\u7684\u200b\u53c2\u8003\u200b \u200b\u95ee\u9898\u200b\u662f\u200b\u4ec0\u4e48\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u6536\u5230\u200b\u9519\u8bef\u200b \u200b\u7684\u200b\u4ee3\u7801\u200b,\u200b\u4f46\u200b\u8bf7\u6c42\u200b\u7ed9\u51fa\u200b\u4e86\u200b 400 \u200b\u9519\u8bef\u200b\u8bf7\u6c42\u200b\u72b6\u6001\u200b \u200b\u4ee3\u7801\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u5c06\u200b\u9519\u8bef\u200b\u89c6\u4e3a\u200b\u8d44\u6e90\u200b\u4e0d\u662f\u200b \u200b\u53d1\u73b0\u200b\u3002\u200b\u4f46\u662f\u200b,\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u6536\u5230\u200b\u9519\u8bef\u4ee3\u7801\u200b 400 \u200b\u9519\u8bef\u200b\u8bf7\u6c42\u200b,\u200b\u5219\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u5047\u5b9a\u200b \u200b\u8bf7\u6c42\u200b\u65e0\u6548\u200b\u3002M_UNKNOWNM_NOT_FOUNDM_UNKNOWN</p>"},{"location":"chat/client_server/#111","title":"1.1.1 \u200b\u5e38\u89c1\u200b\u9519\u8bef","text":"<p>\u200b\u4efb\u4f55\u200b API \u200b\u7aef\u70b9\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u8fd4\u56de\u200b\u8fd9\u4e9b\u200b\u9519\u8bef\u4ee3\u7801\u200b:</p> <p>M_FORBIDDEN\u200b\u7981\u6b62\u200b\u8bbf\u95ee\u200b,\u200b\u4f8b\u5982\u200b\u672a\u7ecf\u8bb8\u53ef\u200b\u52a0\u5165\u200b\u623f\u95f4\u200b,\u200b\u767b\u5f55\u200b\u5931\u8d25\u200b\u3002</p> <p>M_UNKNOWN_TOKEN\u200b\u65e0\u6cd5\u200b\u8bc6\u522b\u200b\u6307\u5b9a\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6216\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u3002</p> <p>\u200b\u5176\u4ed6\u200b\u54cd\u5e94\u200b\u53c2\u6570\u200b \u200b\u4e0a\u200b\u53ef\u80fd\u200b\u5b58\u5728\u200b \u200b\u54cd\u5e94\u200b 401 HTTP \u200b\u72b6\u6001\u200b\u4ee3\u7801\u200b\u3002\u200b\u67e5\u770b\u200b\u8f6f\u200b\u6ce8\u9500\u200b \u200b\u90e8\u5206\u200b\u4e86\u89e3\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\u3002soft_logout</p> <p>M_MISSING_TOKEN\u200b\u6ca1\u6709\u200b\u4e3a\u200b\u8bf7\u6c42\u200b\u6307\u5b9a\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002</p> <p>M_BAD_JSON\u200b\u8bf7\u6c42\u200b\u5305\u542b\u200b\u6709\u6548\u200b\u7684\u200b JSON,\u200b\u4f46\u200b\u683c\u5f0f\u200b\u4ee5\u200b\u67d0\u79cd\u200b\u65b9\u5f0f\u200b\u4e0d\u200b\u6b63\u786e\u200b,\u200b\u4f8b\u5982\u200b \u200b\u7f3a\u5c11\u200b\u5fc5\u9700\u200b\u7684\u200b\u952e\u200b,\u200b\u952e\u200b\u7684\u200b\u503c\u200b\u65e0\u6548\u200b\u3002</p> <p>M_NOT_JSON\u200b\u8bf7\u6c42\u200b\u4e0d\u200b\u5305\u542b\u200b\u6709\u6548\u200b\u7684\u200b JSON\u3002</p> <p>M_NOT_FOUND\u200b\u627e\u200b\u4e0d\u5230\u200b\u6b64\u200b\u8bf7\u6c42\u200b\u7684\u200b\u8d44\u6e90\u200b\u3002</p> <p>M_LIMIT_EXCEEDED\u200b\u5728\u200b\u77ed\u65f6\u95f4\u200b\u5185\u200b\u53d1\u9001\u200b\u4e86\u200b\u592a\u200b\u591a\u200b\u8bf7\u6c42\u200b\u3002\u200b\u7a0d\u7b49\u7247\u523b\u200b \u200b\u7136\u540e\u200b\u91cd\u8bd5\u200b\u3002</p> <p>M_UNRECOGNIZED\u200b\u670d\u52a1\u5668\u200b\u65e0\u6cd5\u200b\u7406\u89e3\u200b\u8be5\u200b\u8bf7\u6c42\u200b\u3002\u200b\u9884\u8ba1\u200b\u8fd9\u200b\u5c06\u200b\u8fd4\u56de\u200b 404 HTTP \u200b\u72b6\u6001\u200b\u4ee3\u7801\u200b\uff08\u200b\u5982\u679c\u200b\u7ec8\u7ed3\u200b\u70b9\u672a\u200b\u5b9e\u73b0\u200b\uff09\u200b\u6216\u200b 405 HTTP \u200b\u72b6\u6001\u200b \u200b\u4ee3\u7801\u200b\uff08\u200b\u5982\u679c\u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u5df2\u200b\u5b9e\u73b0\u200b,\u200b\u4f46\u200b\u4f7f\u7528\u200b\u4e86\u200b\u4e0d\u200b\u6b63\u786e\u200b\u7684\u200b HTTP \u200b\u65b9\u6cd5\u200b\uff09\u3002</p> <p>M_UNKNOWN\u200b\u53d1\u751f\u200b\u672a\u77e5\u200b\u9519\u8bef\u200b\u3002</p>"},{"location":"chat/client_server/#112","title":"1.1.2 \u200b\u5176\u4ed6\u200b\u9519\u8bef\u4ee3\u7801","text":"<p>\u200b\u4ee5\u4e0b\u200b\u9519\u8bef\u4ee3\u7801\u200b\u7279\u5b9a\u200b\u4e8e\u200b\u67d0\u4e9b\u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u3002</p> <p>M_UNAUTHORIZED\u200b\u8bf7\u6c42\u200b\u672a\u200b\u6b63\u786e\u200b\u6388\u6743\u200b\u3002\u200b\u901a\u5e38\u200b\u662f\u200b\u7531\u4e8e\u200b\u767b\u5f55\u200b\u5931\u8d25\u200b\u3002</p> <p>M_USER_DEACTIVATED\u200b\u4e0e\u200b\u8bf7\u6c42\u200b\u5173\u8054\u200b\u7684\u200b\u7528\u6237\u200b\u6807\u8bc6\u200b\u5df2\u200b\u88ab\u200b\u505c\u7528\u200b\u3002\u200b\u901a\u5e38\u200b \u200b\u5bf9\u4e8e\u200b\u8bc1\u660e\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7684\u200b\u7ec8\u7ed3\u200b\u70b9\u200b,\u200b\u4f8b\u5982\u200b \u3002/login</p> <p>M_USER_IN_USE\u200b\u5c1d\u8bd5\u200b\u6ce8\u518c\u200b\u5df2\u200b\u5360\u7528\u200b\u7684\u200b\u7528\u6237\u200b ID \u200b\u65f6\u200b\u9047\u5230\u200b\u6b64\u200b\u95ee\u9898\u200b\u3002</p> <p>M_INVALID_USERNAME\u200b\u5c1d\u8bd5\u200b\u6ce8\u518c\u200b\u65e0\u6548\u200b\u7684\u200b\u7528\u6237\u200b ID \u200b\u65f6\u200b\u9047\u5230\u200b\u3002</p> <p>M_ROOM_IN_USE\u200b\u5f53\u200b\u63d0\u4f9b\u200b\u7ed9\u200b API \u200b\u7684\u200b\u623f\u95f4\u200b\u522b\u540d\u200b\u5df2\u200b\u5728\u200b \u200b\u4e2d\u200b\u65f6\u200b\u53d1\u9001\u200b \u200b\u7528\u200b\u3002createRoom</p> <p>M_INVALID_ROOM_STATE\u200b\u5f53\u200b\u63d0\u4f9b\u200b\u7ed9\u200b API \u200b\u7684\u200b\u521d\u59cb\u72b6\u6001\u200b\u65e0\u6548\u200b\u65f6\u200b\u53d1\u9001\u200b\u3002createRoom</p> <p>M_THREEPID_IN_USE\u200b\u5f53\u200b\u63d0\u4f9b\u200b\u7ed9\u200b API \u200b\u7684\u200b\u4e09\u200bpid \u200b\u65e0\u6cd5\u200b\u4f7f\u7528\u200b\u65f6\u200b\u53d1\u9001\u200b,\u200b\u56e0\u4e3a\u200b\u76f8\u540c\u200b \u200b\u4e09\u200bPID\u200b\u5df2\u7ecf\u200b\u5728\u200b\u4f7f\u7528\u200b\u4e2d\u200b\u3002</p> <p>M_THREEPID_NOT_FOUND\u200b\u5f53\u200b\u63d0\u4f9b\u200b\u7ed9\u200b API \u200b\u7684\u200b\u4e09\u200b pid \u200b\u7531\u4e8e\u200b\u6ca1\u6709\u200b\u8bb0\u5f55\u200b\u800c\u200b\u65e0\u6cd5\u200b\u4f7f\u7528\u200b\u65f6\u200b\u53d1\u9001\u200b \u200b\u627e\u5230\u200b\u4e86\u200b\u5339\u914d\u200b\u7684\u200b\u4e09\u76ae\u200b\u3002</p> <p>M_THREEPID_AUTH_FAILED\u200b\u65e0\u6cd5\u200b\u5bf9\u200b\u7b2c\u4e09\u65b9\u200b\u6807\u8bc6\u7b26\u200b\u6267\u884c\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u3002</p> <p>M_THREEPID_DENIED\u200b\u670d\u52a1\u5668\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u4f7f\u7528\u200b\u6b64\u200b\u7b2c\u4e09\u65b9\u200b\u6807\u8bc6\u7b26\u200b\u3002\u200b\u8fd9\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u53d1\u751f\u200b \u200b\u4f8b\u5982\u200b,\u200b\u5982\u679c\u200b\u670d\u52a1\u5668\u200b\u53ea\u200b\u5141\u8bb8\u200b\u6765\u81ea\u200b \u200b\u7279\u5b9a\u200b\u57df\u200b\u3002</p> <p>M_SERVER_NOT_TRUSTED\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u8bf7\u6c42\u200b\u4f7f\u7528\u200b\u4e86\u200b\u7b2c\u4e09\u65b9\u200b\u670d\u52a1\u5668\u200b,\u200b\u4f8b\u5982\u200b\u8eab\u4efd\u200b\u670d\u52a1\u5668\u200b, \u200b\u6b64\u200b\u670d\u52a1\u5668\u200b\u4e0d\u200b\u4fe1\u4efb\u200b\u3002</p> <p>M_UNSUPPORTED_ROOM_VERSION\u200b\u5ba2\u6237\u7aef\u200b\u521b\u5efa\u200b\u623f\u95f4\u200b\u7684\u200b\u8bf7\u6c42\u200b\u4f7f\u7528\u200b\u4e86\u200b \u200b\u670d\u52a1\u5668\u200b\u4e0d\u200b\u652f\u6301\u200b\u3002</p> <p>M_INCOMPATIBLE_ROOM_VERSION\u200b\u5ba2\u6237\u7aef\u200b\u5c1d\u8bd5\u200b\u52a0\u5165\u200b\u5177\u6709\u200b\u670d\u52a1\u5668\u200b\u7248\u672c\u200b\u7684\u200b\u6587\u4ef6\u200b\u5ba4\u200b \u200b\u4e0d\u200b\u652f\u6301\u200b\u3002\u200b\u68c0\u67e5\u200b\u9519\u8bef\u200b\u54cd\u5e94\u200b\u7684\u200b\u5c5e\u6027\u200b \u200b\u5bf9\u4e8e\u200b\u623f\u95f4\u200b\u7684\u200b\u7248\u672c\u200b\u3002room_version</p> <p>M_BAD_STATE\u200b\u65e0\u6cd5\u200b\u6267\u884c\u200b\u8bf7\u6c42\u200b\u7684\u200b\u72b6\u6001\u200b\u66f4\u6539\u200b,\u200b\u4f8b\u5982\u200b\u5c1d\u8bd5\u200b \u200b\u53d6\u6d88\u200b\u7981\u6b62\u200b\u672a\u200b\u88ab\u200b\u7981\u6b62\u200b\u7684\u200b\u7528\u6237\u200b\u3002</p> <p>M_GUEST_ACCESS_FORBIDDEN\u200b\u5ba2\u623f\u200b\u6216\u200b\u8d44\u6e90\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u5ba2\u4eba\u200b\u8bbf\u95ee\u200b\u3002</p> <p>M_CAPTCHA_NEEDED\u200b\u9700\u8981\u200b\u9a8c\u8bc1\u7801\u200b\u624d\u80fd\u200b\u5b8c\u6210\u200b\u8bf7\u6c42\u200b\u3002</p> <p>M_CAPTCHA_INVALID\u200b\u63d0\u4f9b\u200b\u7684\u200b\u9a8c\u8bc1\u7801\u200b\u4e0e\u200b\u9884\u671f\u200b\u4e0d\u7b26\u200b\u3002</p> <p>M_MISSING_PARAM\u200b\u8bf7\u6c42\u200b\u4e2d\u200b\u7f3a\u5c11\u200b\u5fc5\u9700\u200b\u53c2\u6570\u200b\u3002</p> <p>M_INVALID_PARAM\u200b\u6307\u5b9a\u200b\u7684\u200b\u53c2\u6570\u200b\u5177\u6709\u200b\u9519\u8bef\u200b\u7684\u200b\u503c\u200b\u3002\u200b\u4f8b\u5982\u200b, \u200b\u670d\u52a1\u5668\u200b\u9700\u8981\u200b\u4e00\u4e2a\u200b\u6574\u6570\u200b,\u200b\u800c\u662f\u200b\u6536\u5230\u200b\u4e00\u4e2a\u200b\u5b57\u7b26\u4e32\u200b\u3002</p> <p>M_TOO_LARGE\u200b\u8bf7\u6c42\u200b\u6216\u200b\u5b9e\u4f53\u200b\u592a\u200b\u5927\u200b\u3002</p> <p>M_EXCLUSIVE\u200b\u8bf7\u6c42\u200b\u7684\u200b\u8d44\u6e90\u200b\u7531\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u670d\u52a1\u200b\u4fdd\u7559\u200b,\u200b\u6216\u8005\u200b \u200b\u53d1\u51fa\u8bf7\u6c42\u200b\u7684\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u670d\u52a1\u200b\u5c1a\u672a\u200b\u521b\u5efa\u200b\u8d44\u6e90\u200b\u3002</p> <p>M_RESOURCE_LIMIT_EXCEEDED\u200b\u65e0\u6cd5\u200b\u5b8c\u6210\u200b\u8bf7\u6c42\u200b,\u200b\u56e0\u4e3a\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5df2\u200b\u8fbe\u5230\u200b \u200b\u5bf9\u200b\u5176\u200b\u65bd\u52a0\u200b\u7684\u200b\u8d44\u6e90\u200b\u9650\u5236\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u5171\u4eab\u200b\u4e2d\u200b\u4fdd\u5b58\u200b\u7684\u200b\u5bb6\u5ead\u200b\u670d\u52a1\u5668\u200b \u200b\u5982\u679c\u200b\u6258\u7ba1\u200b\u73af\u5883\u200b\u4e5f\u200b\u5f00\u59cb\u200b\u4f7f\u7528\u200b,\u200b\u5219\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u8fbe\u5230\u200b\u8d44\u6e90\u200b\u9650\u5236\u200b \u200b\u5927\u91cf\u200b\u5185\u5b58\u200b\u6216\u200b\u78c1\u76d8\u7a7a\u95f4\u200b\u3002\u200b\u9519\u8bef\u200b\u5fc5\u987b\u200b\u6709\u200b\u4e00\u4e2a\u200b\u5b57\u200b\u6bb5\u200b \u200b\u4e3a\u200b\u6536\u5230\u200b\u9519\u8bef\u200b\u7684\u200b\u7528\u6237\u200b\u63d0\u4f9b\u200b\u4e00\u4e2a\u200b\u53ef\u4ee5\u200b\u8054\u7cfb\u200b\u7684\u200b\u5730\u65b9\u200b\u3002 \u200b\u901a\u5e38\u200b,\u200b\u6b64\u200b\u9519\u8bef\u200b\u5c06\u200b\u51fa\u73b0\u200b\u5728\u200b\u5c1d\u8bd5\u200b\u4fee\u6539\u200b\u7684\u200b\u8def\u7531\u200b\u4e0a\u200b \u200b\u72b6\u6001\u200b\uff08\u200b\u4f8b\u5982\u200b:\u200b\u53d1\u9001\u200b\u6d88\u606f\u200b,\u200b\u5e10\u6237\u200b\u6570\u636e\u200b\u7b49\u200b\uff09\u200b\u800c\u200b\u4e0d\u662f\u200b\u8def\u7531\u200b \u200b\u4ec5\u200b\u8bfb\u53d6\u200b\u72b6\u6001\u200b\uff08\u200b\u4f8b\u5982\u200b:,\u200b\u83b7\u53d6\u200b\u5e10\u6237\u200b\u6570\u636e\u200b\u7b49\u200b\uff09\u3002admin_contact/sync</p> <p>M_CANNOT_LEAVE_SERVER_NOTICE_ROOM\u200b\u7528\u6237\u200b\u65e0\u6cd5\u200b\u62d2\u7edd\u200b\u52a0\u5165\u200b\u670d\u52a1\u5668\u200b\u901a\u77e5\u200b\u5ba4\u200b\u7684\u200b\u9080\u8bf7\u200b\u3002 \u200b\u6709\u5173\u200b\u8be6\u7ec6\u4fe1\u606f\u200b,\u200b\u8bf7\u53c2\u9605\u200b\u670d\u52a1\u5668\u200b\u901a\u77e5\u200b\u6a21\u5757\u200b\u3002</p>"},{"location":"chat/client_server/#12","title":"1.2 \u200b\u4ea4\u6613\u200b\u6807\u8bc6\u7b26","text":"<p>\u200b\u5ba2\u6237\u7aef\u200b-\u200b\u670d\u52a1\u5668\u200b API \u200b\u901a\u5e38\u200b\u7528\u4e8e\u200b\u63d0\u4ea4\u200b\u8bf7\u6c42\u200b HTTP \u200b\u8def\u5f84\u200b\u4e2d\u200b\u5ba2\u6237\u7aef\u200b\u751f\u6210\u200b\u7684\u200b\u4e8b\u52a1\u200b\u6807\u8bc6\u7b26\u200b\u3002HTTP PUT</p> <p>\u200b\u4e8b\u52a1\u200b ID \u200b\u7684\u200b\u76ee\u7684\u200b\u662f\u200b\u5141\u8bb8\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u533a\u5206\u200b \u200b\u6765\u81ea\u200b\u5148\u524d\u200b\u8bf7\u6c42\u200b\u7684\u200b\u91cd\u65b0\u200b\u4f20\u8f93\u200b\u7684\u200b\u65b0\u200b\u8bf7\u6c42\u200b,\u200b\u4ee5\u4fbf\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u53d1\u51fa\u200b \u200b\u8bf7\u6c42\u200b\u5e42\u200b\u7b49\u200b\u3002</p> <p>\u200b\u4ea4\u6613\u200b ID \u200b\u53ea\u80fd\u200b\u7528\u4e8e\u200b\u6b64\u200b\u76ee\u7684\u200b\u3002</p> <p>\u200b\u4ece\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u89d2\u5ea6\u200b\u6765\u770b\u200b,\u200b\u5728\u200b\u8bf7\u6c42\u200b\u5b8c\u6210\u200b\u540e\u200b,\u200b\u5e94\u4e3a\u200b\u4e0b\u200b\u4e00\u4e2a\u200b\u8bf7\u6c42\u200b\u66f4\u6539\u200b\u503c\u200b\uff08\u200b\u672a\u6307\u5b9a\u200b how;a \u200b\u5efa\u8bae\u200b\u5355\u8c03\u200b\u9012\u589e\u200b\u6574\u6570\u200b\uff09\u3002{txnId}</p> <p>\u200b\u5982\u679c\u200b \u200b\u4e8b\u52a1\u200b ID \u200b\u4e0e\u200b\u4e0a\u200b\u4e00\u4e2a\u200b\u8bf7\u6c42\u200b\u76f8\u540c\u200b,\u200b\u5e76\u4e14\u200b HTTP \u200b\u8bf7\u6c42\u200b\u662f\u200b\u76f8\u540c\u200b\u7684\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5df2\u200b\u8bc6\u522b\u200b\u51fa\u200b\u91cd\u4f20\u200b,\u200b\u5219\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5e94\u200b\u8fd4\u56de\u200b \u200b\u4e0e\u200b\u539f\u59cb\u200b\u8bf7\u6c42\u200b\u76f8\u540c\u200b\u7684\u200b HTTP \u200b\u54cd\u5e94\u200b\u4ee3\u7801\u200b\u548c\u200b\u5185\u5bb9\u200b\u3002 \u200b\u4f8b\u5982\u200b,\u200b\u5c06\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b \u200b\u4e0e\u200b\u539f\u59cb\u200b\u8bf7\u6c42\u200b \u200b\u54cd\u5e94\u200b\u6b63\u6587\u200b\u3002PUT /_ matrix/client/v3/rooms/{roomId}/send/{eventType}/{txnId}200 OKevent_id</p> <p>\u200b\u9664\u4e86\u200b HTTP \u200b\u8def\u5f84\u200b,\u200b\u4e8b\u52a1\u200b ID \u200b\u7684\u200b\u4f5c\u7528\u57df\u200b\u662f\u200b\"\u200b\u5ba2\u6237\u7aef\u200b\" \u200b\u4f1a\u8bdd\u200b\",\u200b\u5176\u4e2d\u200b\u8be5\u4f1a\u200b\u8bdd\u200b\u7531\u200b\u7279\u5b9a\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u6807\u8bc6\u200b\u3002 \u200b\u5237\u65b0\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u65f6\u200b, \u200b\u4fdd\u7559\u200b\u4e8b\u52a1\u200b ID \u200b\u7684\u200b\u8303\u56f4\u200b\u3002\u200b\u8fd9\u200b\u610f\u5473\u7740\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b \u200b\u4ee4\u724c\u200b\u7528\u4f5c\u200b\u5176\u200b\u4e8b\u52a1\u200b ID,\u200b\u5c06\u200b\u4ee4\u724c\u200b\u5237\u65b0\u200b\u4e3a\u200b ,\u200b\u5e76\u200b\u518d\u6b21\u200b\u4f7f\u7528\u200b\u5b83\u200b,\u200b\u8fd9\u200b\u5c06\u200b\u88ab\u200b\u5047\u5b9a\u200b\u4e3a\u200b\u91cd\u590d\u200b\u8bf7\u6c42\u200b \u200b\u5e76\u200b\u88ab\u200b\u5ffd\u7565\u200b\u3002\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u6ce8\u9500\u200b\u5e76\u200b\u5728\u200b \u200b\u548c\u200b \u200b\u4ee4\u724c\u200b\u4e4b\u95f4\u200b\u91cd\u65b0\u200b\u6ce8\u9500\u200b,\u200b\u5219\u200b\u53ef\u4ee5\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u4ee4\u724c\u200b\u4f7f\u7528\u200b\u4e00\u6b21\u200b\u3002ATXN1BTXN1ABTXN1</p> <p>\u200b\u67d0\u4e9b\u200b API \u200b\u7aef\u70b9\u200b\u53ef\u80fd\u200b\u5141\u8bb8\u200b\u6216\u200b\u8981\u6c42\u200b\u4f7f\u7528\u200b\u8bf7\u6c42\u200b \u200b\u6ca1\u6709\u200b\u4ea4\u6613\u200b ID\u3002\u200b\u5982\u679c\u200b\u8fd9\u662f\u200b\u53ef\u9009\u200b\u7684\u200b,\u200b\u5f3a\u70c8\u5efa\u8bae\u200b\u4f7f\u7528\u200b\u8bf7\u6c42\u200b\u3002POSTPUT</p>"},{"location":"chat/client_server/#2","title":"2.\u200b\u7f51\u9875\u200b\u6d4f\u89c8\u5668\u200b\u5ba2\u6237\u7aef","text":"<p>\u200b\u671f\u671b\u200b\u67d0\u4e9b\u200b\u5ba2\u6237\u7aef\u200b\u5c06\u200b\u88ab\u200b\u5199\u5165\u200b\u4ee5\u200b\u8fd0\u884c\u200b\u662f\u200b\u73b0\u5b9e\u200b\u7684\u200b \u200b\u5728\u200b Web \u200b\u6d4f\u89c8\u5668\u200b\u6216\u200b\u7c7b\u4f3c\u200b\u73af\u5883\u200b\u4e2d\u200b\u3002\u200b\u5728\u200b\u8fd9\u4e9b\u200b\u60c5\u51b5\u200b\u4e0b\u200b, \u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5e94\u200b\u54cd\u5e94\u200b\u98de\u884c\u200b\u524d\u200b\u8bf7\u6c42\u200b\u5e76\u200b\u63d0\u4f9b\u200b\u8de8\u6e90\u200b \u200b\u6240\u6709\u200b\u8bf7\u6c42\u200b\u4e0a\u200b\u7684\u200b\u8d44\u6e90\u5171\u4eab\u200b \uff08CORS\uff09 \u200b\u6807\u5934\u200b\u3002</p> <p>\u200b\u670d\u52a1\u5668\u200b\u5fc5\u987b\u200b\u671f\u671b\u200b\u5ba2\u6237\u7aef\u200b\u4f1a\u200b\u901a\u8fc7\u200b\u8bf7\u6c42\u200b\u63a5\u8fd1\u200b\u5b83\u4eec\u200b,\u200b\u4ece\u800c\u200b\u5141\u8bb8\u200b\u5ba2\u6237\u7aef\u200b\u53d1\u73b0\u200b CORS \u200b\u6807\u5934\u200b\u3002\u200b\u6240\u6709\u200b\u7aef\u70b9\u200b \u200b\u5728\u200b\u6b64\u200b\u89c4\u8303\u200b\u4e2d\u200b\u652f\u6301\u200b\u8be5\u200b\u65b9\u6cd5\u200b,\u200b\u4f46\u662f\u200b\u670d\u52a1\u5668\u200b \u200b\u5728\u200b\u63a5\u8fd1\u200b\u7aef\u70b9\u200b\u65f6\u200b,\u200b\u4e0d\u5f97\u200b\u6267\u884c\u200b\u4e3a\u200b\u7aef\u70b9\u200b\u5b9a\u4e49\u200b\u7684\u200b\u4efb\u4f55\u200b\u903b\u8f91\u200b \u200b\u4e0e\u200b\u8bf7\u6c42\u200b\u3002OPTIONSOPTIONSOPTIONS</p> <p>\u200b\u5f53\u200b\u5ba2\u6237\u7aef\u200b\u5411\u200b\u670d\u52a1\u5668\u200b\u53d1\u51fa\u8bf7\u6c42\u200b\u65f6\u200b,\u200b\u670d\u52a1\u5668\u200b\u5e94\u200b \u200b\u4f7f\u7528\u200b\u8be5\u200b\u8def\u7531\u200b\u7684\u200b CORS \u200b\u6807\u5934\u200b\u8fdb\u884c\u200b\u54cd\u5e94\u200b\u3002\u200b\u63a8\u8350\u200b\u7684\u200b\u53ef\u200b\u66ff\u4ee3\u200b\u8d44\u6e90\u200b\u4fdd\u62a4\u200b\u8ba1\u5212\u200b \u200b\u670d\u52a1\u5668\u200b\u5728\u200b\u6240\u6709\u200b\u8bf7\u6c42\u200b\u4e0a\u200b\u8fd4\u56de\u200b\u7684\u200b\u6807\u5934\u200b\u5305\u62ec\u200b:</p> <pre><code>    Access-Control-Allow-Origin: *\n    Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS\n    Access-Control-Allow-Headers: X-Requested-With, Content-Type, Authorization\n</code></pre>"},{"location":"chat/client_server/#3","title":"3.\u200b\u670d\u52a1\u5668\u200b\u53d1\u73b0","text":"<p>\u200b\u4e3a\u4e86\u200b\u5141\u8bb8\u200b\u7528\u6237\u200b\u8fde\u63a5\u200b\u5230\u200b\u77e9\u9635\u200b\u670d\u52a1\u5668\u200b\u800c\u200b\u65e0\u9700\u200b \u200b\u663e\u5f0f\u200b\u6307\u5b9a\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u7684\u200b URL \u200b\u6216\u200b\u5176\u4ed6\u200b\u53c2\u6570\u200b,\u200b\u5ba2\u6237\u7aef\u200b \u200b\u5e94\u200b\u4f7f\u7528\u200b\u81ea\u52a8\u200b\u53d1\u73b0\u200b\u673a\u5236\u200b\u6765\u200b\u786e\u5b9a\u200b\u670d\u52a1\u5668\u200b\u7684\u200b URL \u200b\u57fa\u4e8e\u200b\u7528\u6237\u200b\u7684\u200b\u77e9\u9635\u200b ID\u3002\u200b\u81ea\u52a8\u200b\u53d1\u73b0\u200b\u53ea\u80fd\u200b\u5728\u200b\u767b\u5f55\u200b\u65f6\u200b\u5b8c\u6210\u200b \u200b\u65f6\u95f4\u200b\u3002</p> <p>\u200b\u5728\u200b\u672c\u8282\u200b\u4e2d\u200b,\u200b\u4ee5\u4e0b\u200b\u672f\u8bed\u200b\u5177\u6709\u200b\u7279\u5b9a\u200b\u542b\u4e49\u200b:</p> <p>PROMPT\u200b\u4ece\u200b\u7528\u6237\u200b\u90a3\u91cc\u200b\u68c0\u7d22\u200b\u7279\u5b9a\u200b\u4fe1\u606f\u200b\u7684\u200b\u65b9\u5f0f\u200b \u200b\u9002\u5408\u200b\u73b0\u6709\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\u7528\u6237\u200b\u4f53\u9a8c\u200b\uff08\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u662f\u200b \u200b\u503e\u5411\u200b\u4e8e\u200b\u8fd9\u6837\u200b\u505a\u200b\u3002\u200b\u5982\u679c\u200b\u6ca1\u6709\u200b\u597d\u200b\u7684\u200b\u7528\u6237\u200b,\u200b\u5219\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u53d1\u751f\u200b\u6545\u969c\u200b \u200b\u5728\u200b\u8fd9\u200b\u4e00\u70b9\u200b\u4e0a\u200b,\u200b\u8fd9\u65b9\u9762\u200b\u7684\u200b\u7ecf\u9a8c\u200b\u662f\u200b\u53ef\u80fd\u200b\u7684\u200b\u3002</p> <p>IGNORE\u200b\u505c\u6b62\u200b\u5f53\u524d\u200b\u7684\u200b\u81ea\u52a8\u200b\u53d1\u73b0\u200b\u673a\u5236\u200b\u3002\u200b\u5982\u679c\u200b\u6ca1\u6709\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u81ea\u52a8\u200b\u53d1\u73b0\u200b \u200b\u673a\u5236\u200b\u662f\u200b\u53ef\u7528\u200b\u7684\u200b,\u200b\u90a3\u4e48\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u5176\u4ed6\u200b\u65b9\u6cd5\u200b \u200b\u786e\u5b9a\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u53c2\u6570\u200b,\u200b\u4f8b\u5982\u200b\u63d0\u793a\u200b\u7528\u6237\u200b,\u200b\u6216\u200b \u200b\u4f7f\u7528\u200b\u9ed8\u8ba4\u503c\u200b\u3002</p> <p>FAIL_PROMPT\u200b\u901a\u77e5\u200b\u7528\u6237\u200b\u81ea\u52a8\u200b\u53d1\u73b0\u200b\u7531\u4e8e\u200b\u6570\u636e\u200b\u65e0\u6548\u200b/\u200b\u7a7a\u200b\u548c\u200b\u53c2\u6570\u200b\u800c\u200b\u5931\u8d25\u200b\u3002PROMPT</p> <p>FAIL_ERROR\u200b\u901a\u77e5\u200b\u7528\u6237\u200b\u81ea\u52a8\u200b\u53d1\u73b0\u200b\u672a\u200b\u8fd4\u56de\u200b\u4efb\u4f55\u200b\u53ef\u7528\u200b\u7684\u200b URL\u3002\u200b\u505a\u200b \u200b\u4e0d\u8981\u200b\u7ee7\u7eed\u200b\u5f53\u524d\u200b\u767b\u5f55\u200b\u8fc7\u7a0b\u200b\u3002\u200b\u6b64\u65f6\u200b, \u200b\u5df2\u200b\u83b7\u53d6\u200b\u6709\u6548\u200b\u6570\u636e\u200b,\u200b\u4f46\u200b\u6ca1\u6709\u200b\u670d\u52a1\u5668\u200b\u53ef\u200b\u7528\u4e8e\u200b\u4e3a\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u670d\u52a1\u200b\u3002 \u200b\u4e0d\u200b\u5e94\u200b\u5c1d\u8bd5\u200b\u8fdb\u4e00\u6b65\u200b\u731c\u6d4b\u200b,\u200b\u7528\u6237\u200b\u5e94\u200b\u8fdb\u884c\u200b \u200b\u8ba4\u771f\u200b\u51b3\u5b9a\u200b\u4e0b\u200b\u4e00\u6b65\u200b\u8be5\u200b\u505a\u200b\u4ec0\u4e48\u200b\u3002</p>"},{"location":"chat/client_server/#31-well-known-uri","title":"3.1 Well-known URI","text":"<p>\u200b\u8be5\u200b\u65b9\u6cd5\u200b\u4f7f\u7528\u200b\u9884\u5b9a\u200b\u4f4d\u7f6e\u200b\u7684\u200b JSON \u200b\u6587\u4ef6\u200b\u6765\u200b \u200b\u6307\u5b9a\u200b\u53c2\u6570\u503c\u200b\u3002\u200b\u6b64\u200b\u65b9\u6cd5\u200b\u7684\u200b\u6d41\u7a0b\u200b\u5982\u4e0b\u200b:.well-known</p> <ol> <li>\u200b\u901a\u8fc7\u200b\u62c6\u5206\u200b \u200b\u7b2c\u4e00\u4e2a\u200b\u5192\u53f7\u200b\u5904\u200b\u7684\u200b\u77e9\u9635\u200b ID\u3002</li> <li>\u200b\u4ece\u200b\u670d\u52a1\u5668\u200b\u540d\u79f0\u200b\u4e2d\u200b\u63d0\u53d6\u200b\u4e3b\u673a\u540d\u200b\u3002</li> <li>\u200b\u5411\u200b \u200b\u53d1\u51fa\u200b GET \u200b\u8bf7\u6c42\u200b\u3002https://hostname/.well-known/matrix/client<ol> <li>\u200b\u5982\u679c\u200b\u8fd4\u56de\u200b\u7684\u200b\u72b6\u6001\u200b\u4ee3\u7801\u200b\u4e3a\u200b 404,\u200b\u5219\u200b .IGNORE</li> <li>\u200b\u5982\u679c\u200b\u8fd4\u56de\u200b\u7684\u200b\u72b6\u6001\u200b\u4ee3\u7801\u200b\u4e0d\u662f\u200b 200,\u200b\u6216\u8005\u200b\u54cd\u5e94\u200b\u6b63\u6587\u200b\u4e3a\u200b \u200b\u7a7a\u200b\u7684\u200b,\u200b\u7136\u540e\u200b.FAIL_PROMPT</li> <li>\u200b\u5c06\u200b\u54cd\u5e94\u200b\u6b63\u6587\u200b\u89e3\u6790\u200b\u4e3a\u200b JSON \u200b\u5bf9\u8c61\u200b<ol> <li>\u200b\u5982\u679c\u200b\u65e0\u6cd5\u200b\u89e3\u6790\u200b\u5185\u5bb9\u200b,\u200b\u5219\u200b .FAIL_PROMPT</li> </ol> </li> <li>\u200b\u4ece\u5c5e\u6027\u200b\u4e2d\u200b\u63d0\u53d6\u200b\u503c\u200b\u3002 \u200b\u6b64\u503c\u200b\u5c06\u200b\u7528\u4f5c\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u7684\u200b\u57fa\u672c\u200b URL\u3002base_urlm.homeserver<ol> <li>\u200b\u5982\u679c\u200b\u672a\u200b\u63d0\u4f9b\u200b\u6b64\u503c\u200b,\u200b\u5219\u200b .FAIL_PROMPT</li> </ol> </li> <li>\u200b\u9a8c\u8bc1\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u57fa\u672c\u200b URL:<ol> <li>\u200b\u5c06\u200b\u5176\u200b\u89e3\u6790\u200b\u4e3a\u200b URL\u3002\u200b\u5982\u679c\u200b\u5b83\u200b\u4e0d\u662f\u200b URL,\u200b\u5219\u200b .FAIL_ERROR</li> <li>\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u9a8c\u8bc1\u200b URL \u200b\u662f\u5426\u200b\u6307\u5411\u200b\u6709\u6548\u200b\u7684\u200b \u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b \u200b\u5728\u200b\u63a5\u53d7\u200b\u5b83\u200b\u4e4b\u524d\u200b,\u200b\u901a\u8fc7\u200b\u8fde\u63a5\u200b\u5230\u200b /_matrix/\u200b\u5ba2\u6237\u7aef\u200b/\u200b\u7248\u672c\u200b\u7aef\u70b9\u200b,\u200b\u786e\u4fdd\u200b\u5b83\u200b \u200b\u4e0d\u200b\u8fd4\u56de\u200b\u9519\u8bef\u200b,\u200b\u5e76\u200b\u89e3\u6790\u200b\u548c\u200b\u9a8c\u8bc1\u200b \u200b\u6570\u636e\u200b\u7b26\u5408\u200b\u9884\u671f\u200b\u7684\u200b\u54cd\u5e94\u200b\u683c\u5f0f\u200b\u3002\u200b\u5982\u679c\u200b\u6709\u200b\u4efb\u4f55\u200b\u6b65\u9aa4\u200b \u200b\u5728\u200b\u9a8c\u8bc1\u200b\u5931\u8d25\u200b\u65f6\u200b,.\u200b\u9a8c\u8bc1\u200b\u662f\u200b    \u200b\u4f5c\u4e3a\u200b\u9488\u5bf9\u200b\u914d\u7f6e\u200b\u9519\u8bef\u200b\u7684\u200b\u7b80\u5355\u200b\u68c0\u67e5\u200b\u5b8c\u6210\u200b,\u200b\u5728\u200b \u200b\u4ee5\u200b\u786e\u4fdd\u200b\u53d1\u73b0\u200b\u7684\u200b\u5730\u5740\u200b\u6307\u5411\u200b \u200b\u6709\u6548\u200b\u7684\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u3002FAIL_ERROR</li> <li>\u200b\u8bf7\u200b\u52a1\u5fc5\u200b\u6ce8\u610f\u200b,\u200b\u8be5\u503c\u200b\u53ef\u80fd\u200b\u5305\u62ec\u200b \u200b\u5c3e\u968f\u200b .\u200b\u6d88\u8d39\u8005\u200b\u5e94\u200b\u51c6\u5907\u200b\u597d\u200b\u5904\u7406\u200b\u8fd9\u200b\u4e24\u79cd\u200b\u60c5\u51b5\u200b\u3002base_url/</li> </ol> </li> <li>\u200b\u5982\u679c\u200b\u8be5\u200b\u5c5e\u6027\u200b\u5b58\u5728\u200b,\u200b\u8bf7\u200b\u63d0\u53d6\u200b\u503c\u4ee5\u200b\u7528\u4f5c\u200b\u8eab\u4efd\u200b\u670d\u52a1\u5668\u200b\u7684\u200b\u57fa\u672c\u200b URL\u3002 \u200b\u6b64\u200b URL \u200b\u7684\u200b\u9a8c\u8bc1\u200b\u6309\u200b\u4e0a\u8ff0\u200b\u6b65\u9aa4\u200b\u5b8c\u6210\u200b,\u200b\u4f46\u200b\u7528\u4f5c\u200b\u8981\u200b\u8fde\u63a5\u200b\u5230\u200b\u7684\u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u3002\u200b\u5982\u679c\u200b\u8be5\u200b\u5c5e\u6027\u200b\u5b58\u5728\u200b,\u200b\u4f46\u200b\u6ca1\u6709\u200b\u503c\u200b,\u200b\u5219\u200b .m.identity_serverbase_url/_    matrix/identity/v2m.identity_serverbase_urlFAIL_PROMPT</li> </ol> </li> </ol>"},{"location":"chat/client_server/#get-well-knownmatrixclient","title":"GET /.well-known/matrix/client","text":"<p>\u200b\u83b7\u53d6\u200b\u6709\u5173\u200b\u57df\u200b\u7684\u200b\u53d1\u73b0\u200b\u4fe1\u606f\u200b\u3002\u200b\u8be5\u200b\u6587\u4ef6\u200b\u53ef\u80fd\u200b\u5305\u62ec\u200b \u200b\u9644\u52a0\u200b\u952e\u200b,\u200b\u5fc5\u987b\u200b\u9075\u5faa\u200b Java \u200b\u5305\u200b\u547d\u540d\u200b\u7ea6\u5b9a\u200b, \u200b\u4f8b\u5982\u200b.\u200b\u8fd9\u200b\u53ef\u200b\u786e\u4fdd\u200b\u5c5e\u6027\u200b\u540d\u79f0\u200b \u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u9002\u5f53\u200b\u5730\u200b\u547d\u540d\u200b,\u200b\u5e76\u200b\u964d\u4f4e\u200b \u200b\u51b2\u7a81\u200b\u3002com.example.myapp.property</p> <p>\u200b\u8bf7\u200b\u6ce8\u610f\u200b,\u200b\u6b64\u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u4e0d\u200b\u4e00\u5b9a\u200b\u7531\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5904\u7406\u200b, \u200b\u4f46\u200b\u7531\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u7f51\u7edc\u200b\u670d\u52a1\u5668\u200b\u4f7f\u7528\u200b,\u200b\u7528\u4e8e\u200b\u53d1\u73b0\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b URL\u3002</p> <p>\u200b\u54cd\u5e94\u200b\u793a\u4f8b\u200b:</p> <pre><code>    {\n  \"m.homeserver\": {\n    \"base_url\": \"https://daodst.example.com\"\n  },\n  \"m.identity_server\": {\n    \"base_url\": \"https://identity.example.com\"\n  },\n  \"org.example.custom.property\": {\n    \"app_url\": \"https://custom.app.example.org\"\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientversions","title":"GET /_matrix/client/versions","text":"<p>\u200b\u83b7\u53d6\u200b\u670d\u52a1\u5668\u200b\u652f\u6301\u200b\u7684\u200b\u89c4\u8303\u200b\u7248\u672c\u200b\u3002</p> <p>\u200b\u503c\u200b\u5c06\u200b\u91c7\u7528\u200b\u5f62\u5f0f\u200b\u6216\u200b\u5386\u53f2\u200b\u6848\u4f8b\u200b\u3002\u200b\u6709\u5173\u200b\u8be6\u7ec6\u4fe1\u606f\u200b,\u200b\u8bf7\u53c2\u9605\u200b\u89c4\u8303\u200b\u7248\u672c\u63a7\u5236\u200b \u200b\u4fe1\u606f\u200b\u3002vX.YrX.Y.Z</p> <p>\u200b\u670d\u52a1\u5668\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u989d\u5916\u200b\u516c\u5e03\u200b\u5176\u200b\u652f\u6301\u200b\u7684\u200b\u5b9e\u9a8c\u200b\u6027\u529f\u80fd\u200b \u200b\u901a\u8fc7\u200b\u3002\u200b\u8fd9\u4e9b\u200b\u529f\u80fd\u200b\u5e94\u200b\u5177\u6709\u200b\u547d\u540d\u200b\u7a7a\u95f4\u200b,\u200b\u5e76\u4e14\u200b \u200b\u5982\u679c\u200b\u9700\u8981\u200b,\u200b\u53ef\u4ee5\u200b\u9009\u62e9\u200b\u5728\u200b\u5176\u200b\u540d\u79f0\u200b\u4e2d\u200b\u5305\u542b\u200b\u7248\u672c\u4fe1\u606f\u200b\u3002 \u200b\u6b64\u5904\u200b\u5217\u51fa\u200b\u7684\u200b\u529f\u80fd\u200b\u4e0d\u9002\u200b\u7528\u4e8e\u200b\u9009\u62e9\u6027\u200b\u5207\u6362\u200b\u77e9\u9635\u200b\u7684\u200b\u5404\u4e2a\u200b\u90e8\u5206\u200b \u200b\u89c4\u8303\u200b,\u200b\u5e94\u4ec5\u200b\u7528\u4e8e\u200b\u64ad\u53d1\u200b\u5bf9\u200b\u529f\u80fd\u200b\u7684\u200b\u652f\u6301\u200b \u200b\u5c1a\u672a\u200b\u8fdb\u5165\u200b\u89c4\u8303\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u5f53\u524d\u200b\u529f\u80fd\u200b\u3002 \u200b\u6b63\u5728\u200b\u8fdb\u884c\u200b\u63d0\u6848\u200b\u6d41\u7a0b\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u5728\u200b\u8fd9\u91cc\u200b\u5e76\u200b\u6700\u7ec8\u200b\u88ab\u200b\u91c7\u7eb3\u200b \u200b\u4e00\u65e6\u200b\u529f\u80fd\u200b\u8fdb\u5165\u200b\u89c4\u8303\u200b\u5e76\u4e14\u200b\u670d\u52a1\u5668\u200b\u8ba4\u4e3a\u200b\u5b83\u200b,\u200b\u5c31\u200b\u8131\u79bb\u200b\u6b64\u200b\u5217\u8868\u200b \u200b\u8fd9\u6837\u200b\u505a\u200b\u662f\u200b\u5408\u7406\u200b\u7684\u200b\u3002\u200b\u670d\u52a1\u5668\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u5728\u200b\u6b64\u5904\u200b\u4fdd\u7559\u200b\u5e7f\u544a\u200b\u529f\u80fd\u200b \u200b\u5728\u200b\u5b83\u4eec\u200b\u88ab\u200b\u53d1\u5e03\u200b\u5230\u200b\u89c4\u8303\u200b\u4e2d\u540e\u200b,\u200b\u8ba9\u200b\u5ba2\u6237\u200b\u6709\u200b\u673a\u4f1a\u200b \u200b\u9002\u5f53\u200b\u5347\u7ea7\u200b\u3002\u200b\u6b64\u5916\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u907f\u514d\u200b\u4f7f\u7528\u200b\u4e0d\u200b\u7a33\u5b9a\u200b \u200b\u7a33\u5b9a\u200b\u7248\u672c\u200b\u4e2d\u200b\u7684\u200b\u529f\u80fd\u200b\u3002unstable_features</p> <p>\u200b\u54cd\u5e94\u200b\u793a\u4f8b\u200b:</p> <pre><code>    {\n  \"unstable_features\": {\n    \"org.example.my_feature\": true\n  },\n  \"versions\": [\n    \"r0.0.1\",\n    \"v1.1\"\n  ]\n}\n</code></pre>"},{"location":"chat/client_server/#4","title":"4. \u200b\u5ba2\u6237\u7aef\u200b\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u200b\u5927\u591a\u6570\u200b API \u200b\u7aef\u70b9\u200b\u8981\u6c42\u200b\u7528\u6237\u200b\u901a\u8fc7\u200b\u5448\u73b0\u200b\u6765\u200b\u6807\u8bc6\u200b\u81ea\u5df1\u200b \u200b\u4ee5\u524d\u200b\u4ee5\u200b\u67e5\u8be2\u200b\u5f62\u5f0f\u200b\u83b7\u5f97\u200b\u7684\u200b\u51ed\u636e\u200b access_token\u200b\u53c2\u6570\u200b\u6216\u200b\u901a\u8fc7\u200b\u6388\u6743\u200b\u6807\u5934\u200b Bearer $access_token\u3002 \u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u901a\u5e38\u200b\u901a\u8fc7\u200b\u767b\u5f55\u200b\u6216\u200b\u6ce8\u518c\u200b\u8fc7\u7a0b\u200b\u83b7\u53d6\u200b\u3002\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b \u200b\u53ef\u4ee5\u200b\u8fc7\u671f\u200b;\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u751f\u6210\u200b\u65b0\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002</p>"},{"location":"chat/client_server/#41","title":"4.1 \u200b\u4f7f\u7528\u200b\u8bbf\u95ee\u200b\u4ee4\u724c","text":"<p>\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u4e24\u79cd\u200b\u65b9\u5f0f\u200b\u63d0\u4f9b\u200b,\u200b\u8fd9\u200b\u4e24\u79cd\u200b\u65b9\u5f0f\u200b\u90fd\u200b\u662f\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b \u200b\u5fc5\u987b\u200b\u652f\u6301\u200b:</p> <pre><code>1. \u200b\u901a\u8fc7\u200b\u67e5\u8be2\u200b\u5b57\u7b26\u4e32\u200b\u53c2\u6570\u200b .access_token=TheTokenHere \n2. \u200b\u901a\u8fc7\u200b\u8bf7\u6c42\u200b\u6807\u5934\u200b .Authorization: Bearer TheTokenHere\n</code></pre> <p>\u200b\u9f13\u52b1\u200b\u5ba2\u6237\u200b\u5c3d\u53ef\u80fd\u200b\u4f7f\u7528\u200b\u6807\u5934\u200b \u200b\u4ee5\u200b\u9632\u6b62\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u5728\u200b\u8bbf\u95ee\u200b/HTTP \u200b\u65e5\u5fd7\u200b\u4e2d\u200b\u6cc4\u9732\u200b\u3002\u200b\u67e5\u8be2\u200b \u200b\u5b57\u7b26\u4e32\u200b\u5e94\u4ec5\u200b\u5728\u200b\u6807\u5934\u200b\u4e3a\u200b \u200b\u5ba2\u6237\u7aef\u200b\u65e0\u6cd5\u8bbf\u95ee\u200b\u3002AuthorizationAuthorization</p> <p>\u200b\u5f53\u200b\u51ed\u636e\u200b\u9700\u8981\u200b\u4f46\u200b\u7f3a\u5931\u200b\u6216\u200b\u65e0\u6548\u200b\u65f6\u200b,HTTP \u200b\u8c03\u7528\u200b\u5c06\u200b \u200b\u8fd4\u56de\u200b\u72b6\u6001\u200b\u4e3a\u200b 401 \u200b\u548c\u200b\u9519\u8bef\u4ee3\u7801\u200b,\u200b\u6216\u200b\u5206\u522b\u200b\u8fd4\u56de\u200b\u3002\u200b\u8bf7\u200b\u6ce8\u610f\u200b,\u200b\u9519\u8bef\u4ee3\u7801\u200b \u200b\u53ef\u80fd\u200b\u610f\u5473\u7740\u200b\u4ee5\u4e0b\u200b\u56db\u79cd\u200b\u60c5\u51b5\u200b\u4e4b\u4e00\u200b:M_MISSING_TOKENM_UNKNOWN_TOKENM_UNKNOWN_TOKEN</p> <pre><code>1. \u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u4ece\u672a\u200b\u6709\u6548\u200b\u3002\n2. \u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u5df2\u200b\u6ce8\u9500\u200b\u3002\n3. \u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u5df2\u8f6f\u200b\u6ce8\u9500\u200b\u3002\n4. [\u200b\u5728\u200b v1.3 \u200b\u4e2d\u200b\u6dfb\u52a0\u200b] \u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u9700\u8981\u200b\u5237\u65b0\u200b\u3002\n</code></pre> <p>\u200b\u5f53\u200b\u5ba2\u6237\u7aef\u200b\u6536\u5230\u200b\u9519\u8bef\u4ee3\u7801\u200b \u200b\u65f6\u200b,\u200b\u5b83\u200b\u5e94\u8be5\u200b:M_UNKNOWN_TOKEN</p> <ul> <li>\u200b\u5c1d\u8bd5\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\uff08\u200b\u5982\u679c\u200b\u5b83\u200b\u6709\u200b\u5237\u65b0\u200b\uff09 \u200b\u4ee4\u200b \u200b\u724c\u200b;</li> <li>\u200b\u5982\u679c\u200bsoft_logout\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b ,\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u63d0\u4f9b\u200b \u200b\u91cd\u65b0\u200b\u767b\u5f55\u200b\u7528\u6237\u200b,\u200b\u4fdd\u7559\u200b\u4efb\u4f55\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u6301\u4e45\u200b \u200b\u4fe1\u606f\u200b;true</li> <li>\u200b\u5426\u5219\u200b,\u200b\u5c06\u200b\u7528\u6237\u200b\u89c6\u4e3a\u200b\u5df2\u200b\u6ce8\u9500\u200b\u3002</li> </ul>"},{"location":"chat/client_server/#42","title":"4.2 \u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u548c\u200b\u8bbe\u5907\u200b\u4e4b\u95f4\u200b\u7684\u200b\u5173\u7cfb","text":"<p>\u200b\u5ba2\u6237\u7aef\u200b\u8bbe\u5907\u200b\u4e0e\u200b\u8bbf\u95ee\u200b\u5bc6\u5207\u76f8\u5173\u200b \u200b\u4ee4\u724c\u200b\u548c\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u3002\u200b\u77e9\u9635\u200b\u670d\u52a1\u5668\u200b\u5e94\u200b\u8bb0\u5f55\u200b\u54ea\u4e2a\u200b\u8bbe\u5907\u200b \u200b\u6bcf\u4e2a\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u548c\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u90fd\u200b\u5206\u914d\u200b\u7ed9\u200b,\u200b\u4ee5\u4fbf\u200b \u200b\u53ef\u4ee5\u200b\u6b63\u786e\u5904\u7406\u200b\u540e\u7eed\u200b\u8bf7\u6c42\u200b\u3002\u200b\u5f53\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u4e3a\u200b \u200b\u7528\u4e8e\u200b\u751f\u6210\u200b\u65b0\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u548c\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b,\u200b\u5373\u200b\u65b0\u200b\u7684\u200b\u8bbf\u95ee\u200b \u200b\u548c\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u73b0\u5728\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u4e0e\u200b \u200b\u521d\u59cb\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u3002</p> <p>\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b,\u200b\u767b\u5f55\u200b\u548c\u200b\u6ce8\u518c\u200b\u8fc7\u7a0b\u200b\u81ea\u52a8\u200b\u751f\u6210\u200b\u65b0\u200b\u7684\u200b .\u200b\u5ba2\u6237\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u81ea\u7531\u200b \u200b\u751f\u6210\u200b\u81ea\u5df1\u200b\u7684\u200b,\u200b\u6216\u8005\u200b,\u200b\u524d\u63d0\u200b\u662f\u200b\u7528\u6237\u200b\u4fdd\u6301\u200b\u4e0d\u53d8\u200b, \u200b\u91cd\u7528\u200b\u8bbe\u5907\u200b:\u200b\u65e0\u8bba\u200b\u54ea\u200b\u79cd\u200b\u60c5\u51b5\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u90fd\u200b\u5e94\u200b\u4f20\u9012\u200b \u200b\u8bf7\u6c42\u200b\u6b63\u6587\u200b\u3002\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u8bbe\u7f6e\u200b ,\u200b\u670d\u52a1\u5668\u200b\u5c06\u200b \u200b\u4f7f\u200b\u4ee5\u524d\u200b\u5206\u914d\u200b\u7ed9\u200b\u8be5\u200b\u8bbe\u5907\u200b\u7684\u200b\u4efb\u4f55\u200b\u8bbf\u95ee\u200b\u548c\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u65e0\u6548\u200b\u3002device_iddevice_iddevice_iddevice_id</p>"},{"location":"chat/client_server/#43","title":"4.3 \u200b\u5237\u65b0\u200b\u8bbf\u95ee\u200b\u4ee4\u724c","text":"<p>\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u5728\u200b\u4e00\u5b9a\u200b\u65f6\u95f4\u200b\u540e\u200b\u8fc7\u671f\u200b\u3002\u200b\u4efb\u4f55\u200b HTTP \u200b\u8c03\u7528\u200b \u200b\u4f7f\u7528\u200b\u8fc7\u671f\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u5c06\u200b\u8fd4\u56de\u200b\u9519\u8bef\u4ee3\u7801\u200b, \u200b\u6700\u597d\u200b\u5e26\u200b .\u200b\u5f53\u200b\u5ba2\u6237\u7aef\u200b\u6536\u5230\u200b\u6b64\u200b\u9519\u8bef\u200b\u5e76\u4e14\u200b \u200b\u5177\u6709\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b,\u200b\u5b83\u200b\u5e94\u200b\u5c1d\u8bd5\u200b\u901a\u8fc7\u200b\u8c03\u7528\u200b /refresh \u200b\u6765\u200b\u5237\u65b0\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002\u200b\u5ba2\u6237\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u5237\u65b0\u200b\u4ed6\u4eec\u200b\u7684\u200b \u200b\u968f\u65f6\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b,\u200b\u5373\u4f7f\u200b\u5b83\u200b\u5c1a\u672a\u200b\u8fc7\u671f\u200b\u3002\u200b\u5982\u679c\u200b\u4ee4\u724c\u200b\u5237\u65b0\u200b \u200b\u6210\u529f\u200b\u540e\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u5c06\u200b\u65b0\u200b\u4ee4\u724c\u200b\u7528\u4e8e\u200b\u5c06\u6765\u200b\u7684\u200b\u8bf7\u6c42\u200b,\u200b\u5e76\u4e14\u200b\u53ef\u4ee5\u200b \u200b\u4f7f\u7528\u200b\u65b0\u200b\u4ee4\u724c\u200b\u91cd\u8bd5\u200b\u4ee5\u524d\u200b\u5931\u8d25\u200b\u7684\u200b\u8bf7\u6c42\u200b\u3002\u200b\u5f53\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b \u200b\u5237\u65b0\u200b\u540e\u200b,\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u8fd4\u56de\u200b\u65b0\u200b\u7684\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b;\u200b\u5982\u679c\u200b\u65b0\u200b\u7684\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u662f\u200b \u200b\u7ed9\u5b9a\u200b,\u200b\u65e7\u200b\u7684\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u5c06\u200b\u5931\u6548\u200b,\u200b\u800c\u200b\u65b0\u200b\u7684\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u5c06\u200b\u5931\u6548\u200b \u200b\u5e94\u200b\u5728\u200b\u9700\u8981\u200b\u5237\u65b0\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u65f6\u200b\u4f7f\u7528\u200b\u3002M_UNKNOWN_TOKENsoft_logout: true</p> <p>\u200b\u65e7\u200b\u7684\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u5728\u200b\u65b0\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u6216\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u4e4b\u524d\u200b\u4e00\u76f4\u200b\u6709\u6548\u200b ,\u200b\u6b64\u65f6\u200b\u5c06\u200b\u540a\u9500\u200b\u65e7\u200b\u7684\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u3002\u200b\u8fd9\u200b\u53ef\u200b\u786e\u4fdd\u200b\u5982\u679c\u200b \u200b\u5ba2\u6237\u7aef\u200b\u65e0\u6cd5\u200b\u63a5\u6536\u200b\u6216\u200b\u4fdd\u7559\u200b\u65b0\u200b\u4ee4\u724c\u200b,\u200b\u5b83\u200b\u5c06\u200b\u80fd\u591f\u200b\u91cd\u590d\u200b \u200b\u5237\u65b0\u200b\u64cd\u4f5c\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u4ee4\u724c\u200b\u5237\u65b0\u200b\u5931\u8d25\u200b\u5e76\u4e14\u200b\u9519\u8bef\u200b\u54cd\u5e94\u200b\u5305\u542b\u200b\u5c5e\u6027\u200b,\u200b\u5219\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5176\u200b\u89c6\u4e3a\u200b\u8f6f\u200b\u6ce8\u9500\u200b,\u200b\u5e76\u200b\u5c1d\u8bd5\u200b\u901a\u8fc7\u200b\u91cd\u65b0\u200b\u767b\u5f55\u200b\u6765\u200b\u83b7\u53d6\u200b\u65b0\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002\u200b\u5982\u679c\u200b\u9519\u8bef\u200b \u200b\u54cd\u5e94\u200b\u4e0d\u200b\u5305\u542b\u200b\u5c5e\u6027\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b \u200b\u5c06\u200b\u7528\u6237\u200b\u89c6\u4e3a\u200b\u5df2\u200b\u6ce8\u9500\u200b\u3002soft_logout: truesoft_logout: true</p> <p>\u200b\u4e0d\u200b\u652f\u6301\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u5904\u7406\u200b\u7531\u4e3b\u200b\u670d\u52a1\u5668\u200b\u51b3\u5b9a\u200b; \u200b\u5ba2\u6237\u7aef\u200b\u901a\u8fc7\u200b\u5728\u200b /login \u200b\u548c\u200b /register \u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u7684\u200b\u8bf7\u6c42\u200b\u6b63\u6587\u200b\u4e2d\u200b\u5305\u542b\u200b\u5c5e\u6027\u200b\u6765\u200b\u6307\u793a\u200b\u5176\u200b\u5bf9\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u7684\u200b\u652f\u6301\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u5bb6\u5ead\u200b\u670d\u52a1\u5668\u200b \u200b\u53ef\u80fd\u200b\u5141\u8bb8\u200b\u4f7f\u7528\u200b\u672a\u200b\u8fc7\u671f\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b,\u200b\u6216\u8005\u200b\u53ef\u80fd\u200b\u4f7f\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u8fc7\u671f\u200b \u200b\u65e0\u8bba\u5982\u4f55\u200b,\u200b\u5e76\u200b\u4f9d\u8d56\u4e8e\u200b\u4e0d\u200b\u652f\u6301\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\u4e0a\u200b\u7684\u200b\u8f6f\u200b\u6ce8\u9500\u200b\u884c\u4e3a\u200b \u200b\u5237\u65b0\u200b\u3002refresh_token: true</p>"},{"location":"chat/client_server/#44","title":"4.4 \u200b\u8f6f\u200b\u6ce8\u9500","text":"<p>\u200b\u5982\u679c\u200b\u670d\u52a1\u5668\u200b\u9700\u8981\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u5904\u4e8e\u200b\"\u200b\u8f6f\u200b\u6ce8\u9500\u200b\"\u200b\u72b6\u6001\u200b \u200b\u5728\u200b\u7ee7\u7eed\u200b\u4e4b\u524d\u200b\u91cd\u65b0\u200b\u8fdb\u884c\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b,\u200b\u4f46\u200b\u4e0d\u200b\u5e0c\u671b\u200b\u4f7f\u200b \u200b\u5ba2\u6237\u7aef\u200b\u4f1a\u8bdd\u200b\u3002\u200b\u670d\u52a1\u5668\u200b\u6307\u793a\u200b\u5ba2\u6237\u7aef\u200b\u5904\u4e8e\u200b\u8f6f\u200b\u6ce8\u9500\u200b\u72b6\u6001\u200b \u200b\u901a\u8fc7\u200b\u5728\u200b\u9519\u8bef\u200b\u54cd\u5e94\u200b\u4e2d\u200b\u5305\u542b\u200b\u53c2\u6570\u200b\u6765\u200b\u72b6\u6001\u200b;\u200b\u53c2\u6570\u200b\u9ed8\u8ba4\u200b\u4e3a\u200b \u3002\u200b\u5982\u679c\u200b\u53c2\u6570\u200b\u88ab\u200b\u7701\u7565\u200b\u6216\u200b\u4e3a\u200b ,\u200b\u8fd9\u200b\u610f\u5473\u7740\u200b\u670d\u52a1\u5668\u200b\u5177\u6709\u200b \u200b\u5df2\u200b\u9500\u6bc1\u200b\u4f1a\u8bdd\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u4e0d\u200b\u5e94\u200b\u91cd\u7528\u200b\u5b83\u200b\u3002\u200b\u4e5f\u5c31\u662f\u8bf4\u200b,\u200b\u4efb\u4f55\u200b \u200b\u5ba2\u6237\u7aef\u200b\u6301\u6709\u200b\u7684\u200b\u6301\u4e45\u200b\u72b6\u6001\u200b,\u200b\u4f8b\u5982\u200b\u52a0\u5bc6\u200b\u5bc6\u94a5\u200b\u548c\u200b\u8bbe\u5907\u200b \u200b\u4fe1\u606f\u200b,\u200b\u4e0d\u5f97\u200b\u91cd\u590d\u4f7f\u7528\u200b,\u200b\u5fc5\u987b\u200b\u4e22\u5f03\u200b\u3002\u200b\u5982\u679c\u200b\u662f\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u91cd\u7528\u200b\u4efb\u4f55\u200b\u6301\u4e45\u200b\u72b6\u6001\u200b\u3002soft_logout: trueM_UNKNOWN_TOKENsoft_logoutfalsesoft_logoutfalsesoft_logouttrue</p> <p>[\u200b\u5728\u200b v1.3 \u200b\u4e2d\u200b\u66f4\u6539\u200b]</p> <p>\u200b\u6536\u5230\u200b\u6b64\u7c7b\u200b\u54cd\u5e94\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u5c1d\u8bd5\u200b\u5237\u65b0\u200b\u5176\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\uff08\u200b\u5982\u679c\u200b\u5b83\u200b\u6709\u200b\u5237\u65b0\u200b\uff09 \u200b\u4ee4\u724c\u200b\u53ef\u7528\u200b\u3002\u200b\u5982\u679c\u200b\u6ca1\u6709\u200b\u53ef\u7528\u200b\u7684\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b,\u200b\u6216\u8005\u200b\u6b63\u5728\u200b\u5237\u65b0\u200b \u200b\u5931\u8d25\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b \u200b\u6307\u5b9a\u200b\u5b83\u200b\u5df2\u200b\u7528\u4e8e\u200b\u767b\u5f55\u200b API \u200b\u7684\u200b\u8bbe\u5907\u200b ID\u3002soft_logout: true</p>"},{"location":"chat/client_server/#45-api","title":"4.5 \u200b\u7528\u6237\u200b\u4ea4\u4e92\u5f0f\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b API","text":""},{"location":"chat/client_server/#451","title":"4.5.1 \u200b\u6982\u8ff0","text":"<p>\u200b\u67d0\u4e9b\u200b API \u200b\u7aef\u70b9\u200b\u9700\u8981\u200b\u4e0e\u200b\u7528\u6237\u200b\u4ea4\u4e92\u200b\u7684\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u3002 \u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u53ef\u4ee5\u200b\u63d0\u4f9b\u200b\u8bb8\u591a\u200b\u4e0d\u540c\u200b\u7684\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u65b9\u5f0f\u200b,\u200b\u4f8b\u5982\u200b \u200b\u4f5c\u4e3a\u200b\u7528\u6237\u200b/\u200b\u5bc6\u7801\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b,\u200b\u901a\u8fc7\u200b\u5355\u70b9\u200b\u767b\u5f55\u200b\u670d\u52a1\u5668\u200b \uff08SSO\uff09 \u200b\u767b\u5f55\u200b\u7b49\u200b\u3002 \u200b\u6b64\u200b\u89c4\u8303\u200b\u672a\u5b9a\u4e49\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5e94\u200b\u5982\u4f55\u200b\u6388\u6743\u200b \u200b\u4ed6\u4eec\u200b\u7684\u200b\u7528\u6237\u200b,\u200b\u800c\u662f\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u6807\u51c6\u63a5\u53e3\u200b \u200b\u5e94\u200b\u9075\u5faa\u200b\u5b9e\u73b0\u200b,\u200b\u4ee5\u4fbf\u200b\u4efb\u4f55\u200b\u5ba2\u6237\u7aef\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u767b\u5f55\u200b\u5230\u200b\u4efb\u4f55\u200b \u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u3002</p> <p>\u200b\u8be5\u200b\u8fc7\u7a0b\u200b\u91c7\u53d6\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\"\u200b\u9636\u6bb5\u200b\"\u200b\u7684\u200b\u5f62\u5f0f\u200b\u3002\u200b\u5728\u200b\u6bcf\u4e2a\u200b\u9636\u6bb5\u200b \u200b\u5ba2\u6237\u7aef\u200b\u4e3a\u200b\u7ed9\u5b9a\u200b\u7684\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7c7b\u578b\u200b\u63d0\u4ea4\u200b\u4e00\u7ec4\u200b\u6570\u636e\u200b\u5e76\u200b\u7b49\u5f85\u200b \u200b\u6765\u81ea\u200b\u670d\u52a1\u5668\u200b\u7684\u200b\u54cd\u5e94\u200b,\u200b\u8fd9\u200b\u5c06\u200b\u662f\u200b\u6700\u7ec8\u200b\u6210\u529f\u200b\u6216\u200b \u200b\u8bf7\u6c42\u200b\u6267\u884c\u200b\u5176\u4ed6\u200b\u9636\u6bb5\u200b\u3002\u200b\u8fd9\u79cd\u200b\u4ea4\u6362\u200b\u4e00\u76f4\u200b\u6301\u7eed\u200b\u5230\u200b \u200b\u6700\u540e\u200b\u7684\u200b\u6210\u529f\u200b\u3002</p> <p>\u200b\u5bf9\u4e8e\u200b\u6bcf\u4e2a\u200b\u7aef\u70b9\u200b,\u200b\u670d\u52a1\u5668\u200b\u63d0\u4f9b\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\"\u200b\u6d41\u200b\" \u200b\u53ef\u200b\u7528\u4e8e\u200b\u5bf9\u200b\u81ea\u8eab\u200b\u8fdb\u884c\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u6d41\u7a0b\u200b\u5305\u62ec\u200b\u4e00\u7cfb\u5217\u200b\u9636\u6bb5\u200b, \u200b\u5982\u4e0a\u6240\u8ff0\u200b\u3002\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u81ea\u7531\u9009\u62e9\u200b\u5b83\u200b\u9075\u5faa\u200b\u7684\u200b\u6d41\u7a0b\u200b, \u200b\u4f46\u662f\u200b,\u200b\u6d41\u200b\u7684\u200b\u5404\u4e2a\u200b\u9636\u6bb5\u200b\u5fc5\u987b\u200b\u6309\u200b\u987a\u5e8f\u200b\u5b8c\u6210\u200b\u3002\u200b\u672a\u80fd\u200b\u9075\u5faa\u200b \u200b\u6309\u200b\u987a\u5e8f\u6392\u5217\u200b\u7684\u200b\u6d41\u200b\u5fc5\u987b\u200b\u4ea7\u751f\u200b HTTP 401 \u200b\u54cd\u5e94\u200b,\u200b\u5982\u200b\u5b9a\u4e49\u200b \u200b\u4e0b\u9762\u200b\u3002\u200b\u5f53\u6d41\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u9636\u6bb5\u200b\u90fd\u200b\u5b8c\u6210\u200b\u540e\u200b,\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u662f\u200b \u200b\u5b8c\u6210\u200b,API \u200b\u8c03\u7528\u200b\u6210\u529f\u200b\u3002</p>"},{"location":"chat/client_server/#452-rest-api-api","title":"4.5.2 REST API \u200b\u4e2d\u200b\u7684\u200b\u7528\u6237\u200b\u4ea4\u4e92\u5f0f\u200b API","text":"<p>\u200b\u5728\u200b\u672c\u200b\u89c4\u8303\u200b\u4e2d\u200b\u63cf\u8ff0\u200b\u7684\u200b REST API \u200b\u4e2d\u200b,\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7684\u200b\u5de5\u4f5c\u200b\u65b9\u5f0f\u200b\u4e3a\u200b \u200b\u4ea4\u6362\u200b JSON \u200b\u5b57\u5178\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\u3002\u200b\u670d\u52a1\u5668\u200b\u6307\u793a\u200b \u200b\u901a\u8fc7\u200b HTTP 401 \u200b\u6b63\u6587\u200b\u9700\u8981\u200b\u54ea\u4e9b\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u6570\u636e\u200b \u200b\u54cd\u5e94\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u901a\u8fc7\u200b\u8bf7\u6c42\u200b\u53c2\u6570\u200b\u63d0\u4ea4\u200b\u8be5\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u6570\u636e\u200b\u3002auth</p> <p>\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u9996\u5148\u200b\u53d1\u51fa\u200b\u4e0d\u5e26\u200b\u53c2\u6570\u200b\u7684\u200b\u8bf7\u6c42\u200b\u3002 \u200b\u4e3b\u200b\u670d\u52a1\u5668\u8fd4\u56de\u200b\u5e26\u6709\u200b JSON \u200b\u6b63\u6587\u200b\u7684\u200b HTTP 401 \u200b\u54cd\u5e94\u200b,\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b:auth</p> <pre><code>HTTP/1.1 401 Unauthorized\nContent-Type: application/json\n</code></pre> <pre><code>    {\n  \"flows\": [\n    {\n      \"stages\": [\n        \"example.type.foo\",\n        \"example.type.bar\"\n      ]\n    },\n    {\n      \"stages\": [\n        \"example.type.foo\",\n        \"example.type.baz\"\n      ]\n    }\n  ],\n  \"params\": {\n    \"example.type.baz\": {\n      \"example_key\": \"foobar\"\n    }\n  },\n  \"session\": \"xxxxxx\"\n}\n</code></pre> <p>\u200b\u9664\u4e86\u200b \u200b\u4e4b\u5916\u200b,\u200b\u6b64\u200b\u5bf9\u8c61\u200b\u8fd8\u200b\u5305\u542b\u200b\u4e00\u4e9b\u200b\u989d\u5916\u200b\u7684\u200b\u4fe1\u606f\u200b:flows</p> <ul> <li>params:\u200b\u6b64\u200b\u90e8\u5206\u200b\u5305\u542b\u200b\u5ba2\u6237\u7aef\u200b\u5c06\u8981\u200b\u63d0\u4f9b\u200b\u7684\u200b\u4efb\u4f55\u200b\u4fe1\u606f\u200b \u200b\u9700\u8981\u200b\u77e5\u9053\u200b\u624d\u80fd\u200b\u4f7f\u7528\u200b\u7ed9\u5b9a\u200b\u7c7b\u578b\u200b\u7684\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u6bcf\u4e2a\u200b \u200b\u63d0\u4f9b\u200b\u7684\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7c7b\u578b\u200b,\u200b\u8be5\u200b\u7c7b\u578b\u200b\u53ef\u80fd\u200b\u5728\u200b\u6b64\u200b\u7c7b\u578b\u200b\u4e2d\u200b\u4f5c\u4e3a\u200b\u5bc6\u94a5\u200b\u5b58\u5728\u200b \u200b\u5b57\u5178\u200b\u3002\u200b\u4f8b\u5982\u200b,OAuth \u200b\u5ba2\u6237\u7aef\u200b ID \u200b\u7684\u200b\u516c\u5171\u200b\u90e8\u5206\u200b\u53ef\u4ee5\u200b\u662f\u200b \u200b\u5728\u200b\u8fd9\u91cc\u200b\u7ed9\u51fa\u200b\u3002</li> <li>session:\u200b\u8fd9\u662f\u200b\u5ba2\u6237\u7aef\u200b\u5fc5\u987b\u200b\u4f20\u56de\u200b\u7684\u200b\u4f1a\u200b\u8bdd\u200b\u6807\u8bc6\u7b26\u200b \u200b\u5230\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\uff08\u200b\u5982\u679c\u200b\u63d0\u4f9b\u200b\u4e86\u200b\uff09,\u200b\u5728\u200b\u968f\u540e\u200b\u7684\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u5c1d\u8bd5\u200b\u4e2d\u200b \u200b\u5728\u200b\u540c\u4e00\u4e2a\u200b API \u200b\u8c03\u7528\u200b\u4e2d\u200b\u3002</li> </ul> <p>\u200b\u7136\u540e\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u9009\u62e9\u200b\u4e00\u4e2a\u200b\u6d41\u200b\u5e76\u200b\u5c1d\u8bd5\u200b\u5b8c\u6210\u200b\u7b2c\u4e00\u9636\u6bb5\u200b\u3002 \u200b\u5b83\u200b\u901a\u8fc7\u200b\u91cd\u65b0\u200b\u63d0\u4ea4\u200b\u76f8\u540c\u200b\u7684\u200b\u8bf7\u6c42\u200b\u5e76\u200b\u5728\u200b\u63d0\u4ea4\u200b\u7684\u200b\u5bf9\u8c61\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u5bc6\u94a5\u200b\u6765\u200b\u5b9e\u73b0\u200b\u6b64\u200b\u76ee\u7684\u200b\u3002\u200b\u6b64\u200b\u5b57\u5178\u200b\u5305\u542b\u200b\u4e00\u4e2a\u200b\u952e\u200b,\u200b\u5176\u503c\u200b\u662f\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7c7b\u578b\u200b\u7684\u200b\u540d\u79f0\u200b,\u200b\u8be5\u200b \u200b\u5ba2\u6237\u7aef\u200b\u6b63\u5728\u200b\u5c1d\u8bd5\u200b\u5b8c\u6210\u200b\u3002\u200b\u5b83\u200b\u8fd8\u200b\u5fc5\u987b\u200b\u5305\u542b\u200b\u4e00\u4e2a\u200b\u5bc6\u94a5\u200b \u200b\u4f7f\u7528\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u7ed9\u51fa\u200b\u7684\u200b\u4f1a\u200b\u8bdd\u200b\u5bc6\u94a5\u200b\u7684\u200b\u503c\u200b\uff08\u200b\u5982\u679c\u200b \u200b\u9274\u4e8e\u200b\u3002\u200b\u5b83\u200b\u8fd8\u200b\u5305\u542b\u200b\u4f9d\u8d56\u4e8e\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7c7b\u578b\u200b\u7684\u200b\u5176\u4ed6\u200b\u952e\u200b \u200b\u4f01\u56fe\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u6b63\u5728\u200b\u5c1d\u8bd5\u200b\u5b8c\u6210\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b \u200b\u952e\u5165\u200b ,\u200b\u5b83\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u63d0\u4ea4\u200b\u5982\u4e0b\u200b\u5185\u5bb9\u200b:authtypesessionexample.type.foo</p> <pre><code>POST /_matrix/client/v3/endpoint HTTP/1.1\nContent-Type: application/json\n</code></pre> <pre><code>{\n  \"a_request_parameter\": \"something\",\n  \"another_request_parameter\": \"something else\",\n  \"auth\": {\n    \"type\": \"example.type.foo\",\n    \"session\": \"xxxxxx\",\n    \"example_credential\": \"verypoorsharedsecret\"\n  }\n}\n</code></pre> <p>\u200b\u5982\u679c\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u8ba4\u4e3a\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u5c1d\u8bd5\u200b\u6210\u529f\u200b,\u200b\u4f46\u200b \u200b\u4ecd\u7136\u200b\u9700\u8981\u200b\u66f4\u200b\u591a\u200b\u9636\u6bb5\u200b\u624d\u80fd\u200b\u5b8c\u6210\u200b,\u200b\u5b83\u200b\u8fd4\u56de\u200bHTTP\u200b\u72b6\u6001\u200b401 \u200b\u4ee5\u53ca\u200b\u4e0e\u200b\u672a\u200b\u5c1d\u8bd5\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u65f6\u200b\u76f8\u540c\u200b\u7684\u200b\u5bf9\u8c61\u200b, \u200b\u6dfb\u52a0\u200b\u5bc6\u94a5\u200b,\u200b\u8be5\u200b\u5bc6\u94a5\u200b\u662f\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7c7b\u578b\u200b\u7684\u200b\u6570\u7ec4\u200b \u200b\u5ba2\u6237\u7aef\u200b\u5df2\u200b\u6210\u529f\u200b\u5b8c\u6210\u200b:completed</p> <pre><code>HTTP/1.1 401 Unauthorized\nContent-Type: application/json\n</code></pre> <pre><code>{\n  \"completed\": [\n    \"example.type.foo\"\n  ],\n  \"flows\": [\n    {\n      \"stages\": [\n        \"example.type.foo\",\n        \"example.type.bar\"\n      ]\n    },\n    {\n      \"stages\": [\n        \"example.type.foo\",\n        \"example.type.baz\"\n      ]\n    }\n  ],\n  \"params\": {\n    \"example.type.baz\": {\n      \"example_key\": \"foobar\"\n    }\n  },\n  \"session\": \"xxxxxx\"\n}\n</code></pre> <p>\u200b\u5404\u4e2a\u200b\u9636\u6bb5\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u591a\u4e2a\u200b\u8bf7\u6c42\u200b\u624d\u80fd\u200b\u5b8c\u6210\u200b,\u200b\u5728\u200b \u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b,\u200b\u54cd\u5e94\u200b\u5c06\u200b\u597d\u50cf\u200b\u8bf7\u6c42\u200b\u672a\u7ecf\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b \u200b\u6dfb\u52a0\u200b\u7531\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7c7b\u578b\u5b9a\u4e49\u200b\u7684\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u5bc6\u94a5\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u786e\u5b9a\u200b\u67d0\u4e2a\u200b\u9636\u6bb5\u200b\u7684\u200b\u5c1d\u8bd5\u200b\u4e0d\u200b\u6210\u529f\u200b, \u200b\u4f46\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u8fdb\u884c\u200b\u7b2c\u4e8c\u6b21\u200b\u5c1d\u8bd5\u200b,\u200b\u5b83\u200b\u8fd4\u56de\u200b\u76f8\u540c\u200b\u7684\u200b HTTP \u200b\u72b6\u6001\u200b 401 \u200b\u54cd\u5e94\u200b\u5982\u4e0a\u6240\u8ff0\u200b,\u200b\u5e76\u200b\u6dfb\u52a0\u200b\u4e86\u200b\u63cf\u8ff0\u200b\u9519\u8bef\u200b\u7684\u200b\u6807\u51c6\u200b\u548c\u200b\u5b57\u200b\u6bb5\u200b\u3002\u200b\u4f8b\u5982\u200b:errcodeerror</p> <pre><code>HTTP/1.1 401 Unauthorized\nContent-Type: application/json\n</code></pre> <pre><code>{\n  \"errcode\": \"M_FORBIDDEN\",\n  \"error\": \"Invalid password\",\n  \"completed\": [\n    \"example.type.foo\"\n  ],\n  \"flows\": [\n    {\n      \"stages\": [\n        \"example.type.foo\",\n        \"example.type.bar\"\n      ]\n    },\n    {\n      \"stages\": [\n        \"example.type.foo\",\n        \"example.type.baz\"\n      ]\n    }\n  ],\n  \"params\": {\n    \"example.type.baz\": {\n      \"example_key\": \"foobar\"\n    }\n  },\n  \"session\": \"xxxxxx\"\n}\n</code></pre> <p>\u200b\u5982\u679c\u200b\u8bf7\u6c42\u200b\u7531\u4e8e\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u4ee5\u5916\u200b\u7684\u200b\u539f\u56e0\u200b\u800c\u200b\u5931\u8d25\u200b,\u200b\u5219\u200b\u670d\u52a1\u5668\u200b \u200b\u8fd4\u56de\u200b\u6807\u51c6\u200b\u683c\u5f0f\u200b\u7684\u200b\u9519\u8bef\u200b\u6d88\u606f\u200b\u3002\u200b\u4f8b\u5982\u200b:</p> <pre><code>HTTP/1.1 400 Bad request\nContent-Type: application/json\n</code></pre> <pre><code>{\n  \"errcode\": \"M_EXAMPLE_ERROR\",\n  \"error\": \"Something was wrong\"\n}\n</code></pre> <p>\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u5df2\u200b\u5b8c\u6210\u200b\u6d41\u200b\u7684\u200b\u6240\u6709\u200b\u9636\u6bb5\u200b,\u200b\u5219\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b \u200b\u6267\u884c\u200b API \u200b\u8c03\u7528\u200b\u5e76\u200b\u6b63\u5e38\u200b\u8fd4\u56de\u200b\u7ed3\u679c\u200b\u3002\u200b\u5df2\u200b\u5b8c\u6210\u200b\u7684\u200b\u9636\u6bb5\u200b \u200b\u5ba2\u6237\u7aef\u200b\u65e0\u6cd5\u200b\u91cd\u8bd5\u200b,\u200b\u56e0\u6b64\u200b\u670d\u52a1\u5668\u200b\u5fc5\u987b\u200b\u8fd4\u56de\u200b 401 \u200b\u5305\u542b\u200b\u5df2\u200b\u5b8c\u6210\u200b\u9636\u6bb5\u200b\u7684\u200b\u54cd\u5e94\u200b,\u200b\u6216\u200b API \u200b\u8c03\u7528\u200b\u7684\u200b\u7ed3\u679c\u200b\uff08\u200b\u5982\u679c\u200b\u5168\u90e8\u200b\uff09 \u200b\u5f53\u200b\u5ba2\u6237\u7aef\u200b\u91cd\u8bd5\u200b\u9636\u6bb5\u200b\u65f6\u200b,\u200b\u9636\u6bb5\u200b\u5df2\u200b\u5b8c\u6210\u200b\u3002</p> <p>\u200b\u67d0\u4e9b\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7c7b\u578b\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b \u200b\u77e9\u9635\u200b\u5ba2\u6237\u7aef\u200b,\u200b\u4f8b\u5982\u200b,\u200b\u53ef\u4ee5\u200b\u5b8c\u6210\u200b\u7535\u5b50\u90ae\u4ef6\u200b\u786e\u8ba4\u200b \u200b\u5f53\u200b\u7528\u6237\u200b\u5355\u51fb\u200b\u7535\u5b50\u90ae\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u94fe\u63a5\u200b\u65f6\u200b\u3002\u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b,\u200b\u5ba2\u6237\u7aef\u200b \u200b\u4f7f\u7528\u200b\u4ec5\u200b\u5305\u542b\u200b\u4f1a\u8bdd\u200b\u5bc6\u94a5\u200b\u7684\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u5b57\u5178\u200b\u91cd\u8bd5\u200b\u8bf7\u6c42\u200b\u3002 \u200b\u5bf9\u6b64\u200b\u7684\u200b\u54cd\u5e94\u200b\u5c06\u200b\u4e0e\u200b\u5ba2\u6237\u7aef\u200b\u5c1d\u8bd5\u200b\u76f8\u540c\u200b \u200b\u6b63\u5e38\u200b\u5b8c\u6210\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u72b6\u6001\u200b,\u200b\u5373\u200b\u8bf7\u6c42\u200b\u5c06\u200b \u200b\u5b8c\u6210\u200b\u6216\u200b\u8bf7\u6c42\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b,\u200b\u662f\u5426\u200b\u5b58\u5728\u200b\u8be5\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7c7b\u578b\u200b \u200b\u5728\u200b\"\u200b\u5df2\u200b\u5b8c\u6210\u200b\"\u200b\u6570\u7ec4\u200b\u4e2d\u200b\u6307\u793a\u200b\u8be5\u200b\u9636\u6bb5\u200b\u662f\u5426\u200b\u5b8c\u6210\u200b\u3002</p>"},{"location":"chat/client_server/#453","title":"4.5.3 \u200b\u4f8b","text":"<p>\u200b\u5728\u200b\u9ad8\u7ea7\u522b\u200b\u4e0a\u200b,\u200b\u5bf9\u200b API \u200b\u8c03\u7528\u200b\u53d1\u51fa\u200b\u7684\u200b\u8bf7\u6c42\u200b\u5b8c\u6210\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b \u200b\u5177\u6709\u200b\u4e09\u4e2a\u200b\u9636\u6bb5\u200b\u7684\u200b\u6d41\u200b\u5c06\u200b\u7c7b\u4f3c\u200b\u4e8e\u200b\u4e0b\u56fe\u200b:</p> <pre><code>    _______________________\n    |       Stage 0         |\n    | No auth               |\n    |  ___________________  |\n    | |_Request_1_________| | &lt;-- Returns \"session\" key which is used throughout.\n    |_______________________|\n             |\n             |\n    _________V_____________\n    |       Stage 1         |\n    | type: \"&lt;auth type1&gt;\"  |\n    |  ___________________  |\n    | |_Request_1_________| |\n    |_______________________|\n             |\n             |\n    _________V_____________\n    |       Stage 2         |\n    | type: \"&lt;auth type2&gt;\"  |\n    |  ___________________  |\n    | |_Request_1_________| |\n    |  ___________________  |\n    | |_Request_2_________| |\n    |  ___________________  |\n    | |_Request_3_________| |\n    |_______________________|\n             |\n             |\n    _________V_____________\n    |       Stage 3         |\n    | type: \"&lt;auth type3&gt;\"  |\n    |  ___________________  |\n    | |_Request_1_________| | &lt;-- Returns API response\n    |_______________________|\n</code></pre>"},{"location":"chat/client_server/#454","title":"4.5.4 \u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7c7b\u578b","text":"<p>\u200b\u6b64\u200b\u89c4\u8303\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u4ee5\u4e0b\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7c7b\u578b\u200b:</p> <ul> <li>m.login.password</li> <li>m.login.recaptcha</li> <li>m.login.sso</li> <li>m.login.email.identity</li> <li>m.login.msisdn</li> <li>m.login.dummy</li> <li>m.login.registration_token</li> </ul>"},{"location":"chat/client_server/#455","title":"4.5.5 \u200b\u540e\u5907","text":"<p>\u200b\u4e0d\u80fd\u200b\u671f\u671b\u200b\u5ba2\u6237\u200b\u80fd\u591f\u200b\u77e5\u9053\u200b\u5982\u4f55\u200b\u5904\u7406\u200b\u6bcf\u4e2a\u200b \u200b\u5355\u4e00\u200b\u767b\u5f55\u200b\u7c7b\u578b\u200b\u3002\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u4e0d\u200b\u77e5\u9053\u200b\u5982\u4f55\u200b\u5904\u7406\u200b\u7ed9\u5b9a\u200b\u7684\u200b\u767b\u5f55\u200b \u200b\u7c7b\u578b\u200b,\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u7528\u6237\u200b\u5b9a\u5411\u200b\u5230\u200b\u5177\u6709\u200b\u56de\u9000\u200b URL \u200b\u7684\u200b Web \u200b\u6d4f\u89c8\u5668\u200b \u200b\u9875\u9762\u200b,\u200b\u5141\u8bb8\u200b\u7528\u6237\u200b\u5728\u200b\u5e26\u5916\u200b\u5b8c\u6210\u200b\u8be5\u200b\u767b\u5f55\u200b\u6b65\u9aa4\u200b \u200b\u5728\u200b\u4ed6\u4eec\u200b\u7684\u200b\u7f51\u7edc\u200b\u6d4f\u89c8\u5668\u200b\u4e2d\u200b\u3002\u200b\u5b83\u200b\u5e94\u8be5\u200b\u6253\u5f00\u200b\u7684\u200b URL \u200b\u662f\u200b:</p> <pre><code>/_matrix/client/v3/auth/&lt;auth type&gt;/fallback/web?session=&lt;session ID&gt;\n</code></pre> <p>\u200b\u5176\u4e2d\u200b \u200b\u662f\u200b\u5b83\u200b\u6b63\u5728\u200b\u5c1d\u8bd5\u200b\u7684\u200b\u9636\u6bb5\u200b\u7684\u200b\u7c7b\u578b\u200b\u540d\u79f0\u200b,\u200b\u662f\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u63d0\u4f9b\u200b\u7684\u200b\u4f1a\u200b\u8bdd\u200b\u7684\u200b ID\u3002auth typesession ID</p> <p>\u200b\u8fd9\u200b\u5fc5\u987b\u200b\u8fd4\u56de\u200b\u53ef\u4ee5\u200b\u6267\u884c\u200b\u6b64\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u7684\u200b HTML \u200b\u9875\u9762\u200b \u200b\u9636\u6bb5\u200b\u3002\u200b\u6b64\u200b\u9875\u9762\u200b\u5fc5\u987b\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b JavaScript \u200b\u5728\u200b \u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u5df2\u200b\u5b8c\u6210\u200b:</p> <pre><code>if (window.onAuthDone) {\n    window.onAuthDone();\n} else if (window.opener &amp;&amp; window.opener.postMessage) {\n    window.opener.postMessage(\"authDone\", \"*\");\n}\n</code></pre> <p>\u200b\u8fd9\u200b\u5141\u8bb8\u200b\u5ba2\u6237\u7aef\u200b\u5b89\u6392\u200b\u5728\u200b\u5d4c\u5165\u5f0f\u200b\u6d4f\u89c8\u5668\u200b\u4e2d\u200b\u5b9a\u4e49\u200b\u5168\u5c40\u200b\u51fd\u6570\u200b,\u200b\u6216\u200b\u4f7f\u7528\u200bHTML5\u200b\u8de8\u200b\u6587\u6863\u200b \u200b\u6d88\u606f\u4f20\u9012\u200b API, \u200b\u5230\u200b \u200b\u63a5\u6536\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u9636\u6bb5\u200b\u5df2\u200b\u5b8c\u6210\u200b\u7684\u200b\u901a\u77e5\u200b\u3002onAuthDone</p> <p>\u200b\u5ba2\u6237\u7aef\u200b\u6536\u5230\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u9636\u6bb5\u200b\u7684\u200b\u901a\u77e5\u200b\u540e\u200b \u200b\u5df2\u200b\u5b8c\u6210\u200b,\u200b\u5b83\u200b\u5e94\u8be5\u200b\u4f7f\u7528\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u5b57\u5178\u200b\u91cd\u65b0\u200b\u63d0\u4ea4\u200b\u8bf7\u6c42\u200b \u200b\u4ec5\u200b\u4f7f\u7528\u200b\u4f1a\u8bdd\u200b ID:</p> <pre><code>{\n  \"session\": \"&lt;session ID&gt;\"\n}\n</code></pre> <p>4.5.6 \u200b\u6807\u8bc6\u7b26\u200b\u7c7b\u578b\u200b</p> <p>\u200b\u67d0\u4e9b\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u673a\u5236\u200b\u4f7f\u7528\u200b\u7528\u6237\u200b\u6807\u8bc6\u7b26\u200b\u5bf9\u8c61\u200b\u6765\u200b\u6807\u8bc6\u200b \u200b\u4e00\u4e2a\u200b\u7528\u6237\u200b\u3002\u200b\u7528\u6237\u200b\u6807\u8bc6\u7b26\u200b\u5bf9\u8c61\u200b\u6709\u200b\u4e00\u4e2a\u200b\u5b57\u6bb5\u200b\u6765\u200b\u6307\u793a\u200b \u200b\u6b63\u5728\u200b\u4f7f\u7528\u200b\u7684\u200b\u6807\u8bc6\u7b26\u200b\u7c7b\u578b\u200b,\u200b\u5e76\u4e14\u200b\u6839\u636e\u200b\u7c7b\u578b\u200b,\u200b\u5177\u6709\u200b\u5176\u4ed6\u200b \u200b\u63d0\u4f9b\u200b\u6807\u8bc6\u200b\u7528\u6237\u200b\u6240\u200b\u9700\u200b\u4fe1\u606f\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b,\u200b\u5982\u200b\u6240\u8ff0\u200b \u200b\u4e0b\u9762\u200b\u3002type</p> <p>\u200b\u6b64\u200b\u89c4\u8303\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u4ee5\u4e0b\u200b\u6807\u8bc6\u7b26\u200b\u7c7b\u578b\u200b:</p> <ul> <li>m.id.user</li> <li>m.id.thirdparty</li> <li>m.id.phone</li> </ul>"},{"location":"chat/client_server/#46","title":"4.6 \u200b\u767b\u5f55","text":"<p>\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b API \u200b\u83b7\u53d6\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002/login</p> <p>\u200b\u8bf7\u200b\u6ce8\u610f\u200b,\u200b\u6b64\u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u5f53\u524d\u200b\u4e0d\u200b\u4f7f\u7528\u200b\u7528\u6237\u200b\u4ea4\u4e92\u5f0f\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b \u200b\u539f\u6599\u836f\u200b\u3002</p> <p>\u200b\u5bf9\u4e8e\u200b\u7b80\u5355\u200b\u7684\u200b\u7528\u6237\u540d\u200b/\u200b\u5bc6\u7801\u200b\u767b\u5f55\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u63d0\u4ea4\u200b\u8bf7\u6c42\u200b,\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b:/login</p> <pre><code>{\n  \"type\": \"m.login.password\",\n  \"identifier\": {\n    \"type\": \"m.id.user\",\n    \"user\": \"&lt;user_id or user localpart&gt;\"\n  },\n  \"password\": \"&lt;password&gt;\"\n}\n</code></pre> <p>\u200b\u6216\u8005\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u7528\u6237\u200b\u5e10\u6237\u200b\u7684\u200b 3PID \u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u4f7f\u7528\u200b /account/3pid API \u200b\u800c\u200b\u4e0d\u662f\u200b\u663e\u5f0f\u200b\u63d0\u4f9b\u200b,\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b:user</p> <pre><code>{\n  \"type\": \"m.login.password\",\n  \"identifier\": {\n    \"medium\": \"&lt;The medium of the third-party identifier&gt;\",\n    \"address\": \"&lt;The canonicalised third-party address of the user&gt;\"\n  },\n  \"password\": \"&lt;password&gt;\"\n}\n</code></pre> <p>\u200b\u5982\u679c\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u4e0d\u200b\u77e5\u9053\u200b\u63d0\u4f9b\u200b\u7684\u200b 3PID, \u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5fc5\u987b\u200b\u54cd\u5e94\u200b \u3002403 Forbidden</p> <p>\u200b\u8981\u200b\u4f7f\u7528\u200b\u767b\u5f55\u200b\u4ee4\u724c\u200b\u767b\u5f55\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u63d0\u4ea4\u200b\u8bf7\u6c42\u200b \u200b\u5982\u4e0b\u200b:/login</p> <pre><code>{\n\"type\": \"m.login.token\",\n\"token\": \"&lt;login token&gt;\"\n}\n</code></pre> <p>\u200b\u5fc5\u987b\u200b\u5bf9\u200b\u7528\u6237\u200b ID \u200b\u8fdb\u884c\u200b\u7f16\u7801\u200b,\u200b\u56e0\u4e3a\u200b\u6ca1\u6709\u200b\u5176\u4ed6\u200b\u6807\u8bc6\u200b \u200b\u8bf7\u6c42\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u3002\u200b\u5728\u200b\u4ee4\u724c\u200b\u65e0\u6548\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b,\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5fc5\u987b\u200b \u200b\u54cd\u5e94\u200b \u200b\u548c\u200b\u9519\u8bef\u4ee3\u7801\u200b \u3002token403 ForbiddenM_FORBIDDEN</p> <p>\u200b\u5982\u679c\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u64ad\u53d1\u200b\u4e3a\u200b\u53ef\u884c\u200b\u7684\u200b\u6d41\u200b,\u200b\u5e76\u4e14\u200b \u200b\u5ba2\u6237\u7aef\u200b\u652f\u6301\u200b\u5b83\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u5c06\u200b\u7528\u6237\u200b\u91cd\u5b9a\u5411\u200b\u5230\u200b\u7aef\u70b9\u200b,\u200b\u4ee5\u4fbf\u200b\u901a\u8fc7\u200b SSO \u200b\u767b\u5f55\u200b\u5ba2\u6237\u7aef\u200b\u3002\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u540e\u200b \u200b\u5b8c\u6210\u200b\u540e\u200b,\u200b\u5ba2\u6237\u7aef\u200b\u5c06\u200b\u9700\u8981\u200b\u63d0\u4ea4\u200b\u5339\u914d\u200b\u7684\u200b\u8bf7\u6c42\u200b\u3002m.login.sso/redirect/loginm.login.token</p>"},{"location":"chat/client_server/#get-_matrixclientv3login","title":"GET /_matrix/client/v3/login","text":"<p>\u200b\u83b7\u53d6\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u652f\u6301\u200b\u7684\u200b\u767b\u5f55\u200b\u7c7b\u578b\u200b\u4ee5\u200b\u5bf9\u200b\u7528\u6237\u200b\u8fdb\u884c\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u3002\u200b\u5ba2\u6237\u200b \u200b\u5e94\u8be5\u200b\u9009\u62e9\u200b\u5176\u4e2d\u200b\u4e4b\u4e00\u200b\u5e76\u200b\u5728\u200b\u767b\u5f55\u200b\u65f6\u200b\u63d0\u4f9b\u200b\u5b83\u200b\u3002type</p> <pre><code>{\n  \"flows\": [\n    {\n      \"type\": \"m.login.password\"\n    }\n  ]\n}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3login","title":"POST /_matrix/client/v3/login","text":"<p>\u200b\u5bf9\u200b\u7528\u6237\u200b\u8fdb\u884c\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b,\u200b\u5e76\u200b\u9881\u53d1\u200b\u4ed6\u4eec\u200b\u53ef\u4ee5\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b \u200b\u7528\u4e8e\u200b\u5728\u200b\u540e\u7eed\u200b\u8bf7\u6c42\u200b\u4e2d\u200b\u6388\u6743\u200b\u81ea\u5df1\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u672a\u200b\u63d0\u4f9b\u200b ,\u200b\u5219\u200b\u670d\u52a1\u5668\u200b\u5fc5\u987b\u200b \u200b\u81ea\u52a8\u200b\u751f\u6210\u200b\u4e00\u4e2a\u200b\u3002device_id</p> <p>\u200b\u8fd4\u56de\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u5fc5\u987b\u200b\u4e0e\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6216\u200b\u7531\u200b\u670d\u52a1\u5668\u200b\u751f\u6210\u200b\u7684\u200b\u76f8\u5173\u8054\u200b\u3002\u200b\u670d\u52a1\u5668\u200b\u53ef\u80fd\u200b \u200b\u4f7f\u200b\u4ee5\u524d\u200b\u4e0e\u200b\u8be5\u200b\u8bbe\u5907\u200b\u5173\u8054\u200b\u7684\u200b\u4efb\u4f55\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u65e0\u6548\u200b\u3002\u200b\u8bf7\u53c2\u9605\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u548c\u200b\u8bbe\u5907\u200b\u4e4b\u95f4\u200b\u7684\u200b\u5173\u7cfb\u200b\u3002device_id</p> <pre><code>{\n  \"identifier\": {\n    \"type\": \"m.id.user\",\n    \"user\": \"cheeky_monkey\"\n  },\n  \"initial_device_display_name\": \"Jungle Phone\",\n  \"password\": \"ilovebananas\",\n  \"type\": \"m.login.password\"\n}\n</code></pre> <pre><code>{\n  \"access_token\": \"abc123\",\n  \"device_id\": \"GHTYAJCE\",\n  \"expires_in_ms\": 60000,\n  \"refresh_token\": \"def456\",\n  \"user_id\": \"@cheeky_monkey:matrix.org\",\n  \"well_known\": {\n    \"m.homeserver\": {\n      \"base_url\": \"https://example.org\"\n    },\n    \"m.identity_server\": {\n      \"base_url\": \"https://id.example.org\"\n    }\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3refresh","title":"POST /_matrix/client/v3/refresh","text":"<p>v1.3 \u200b\u4e2d\u200b\u65b0\u589e\u200b</p> <p>\u200b\u5237\u65b0\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002\u200b\u5ba2\u6237\u7aef\u200b\u5e94\u200b\u4f7f\u7528\u200b\u8fd4\u56de\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b \u200b\u8fdb\u884c\u200b\u540e\u7eed\u200b API \u200b\u8c03\u7528\u200b\u65f6\u200b,\u200b\u5e76\u200b\u5b58\u50a8\u200b\u8fd4\u56de\u200b\u7684\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b \uff08\u200b\u5982\u679c\u200b\u7ed9\u5b9a\u200b\uff09,\u200b\u4ee5\u4fbf\u200b\u5728\u200b\u5fc5\u8981\u200b\u65f6\u200b\u5237\u65b0\u200b\u65b0\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002</p> <p>\u200b\u5237\u65b0\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u540e\u200b,\u200b\u670d\u52a1\u5668\u200b\u53ef\u4ee5\u200b\u9009\u62e9\u200b \u200b\u4f7f\u65e7\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u7acb\u5373\u200b\u5931\u6548\u200b,\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u9009\u62e9\u200b\u4e0d\u4f7f\u200b\u65e7\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u5931\u6548\u200b \u200b\u4f8b\u5982\u200b,\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u662f\u5426\u200b\u5f88\u5feb\u200b\u5c31\u200b\u4f1a\u200b\u8fc7\u671f\u200b\u3002\u200b\u5ba2\u6237\u200b\u5e94\u8be5\u200b \u200b\u4e0d\u200b\u5bf9\u200b\u65e7\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u4ecd\u7136\u200b\u6709\u6548\u200b\u505a\u51fa\u200b\u4efb\u4f55\u200b\u5047\u8bbe\u200b, \u200b\u5e76\u200b\u5e94\u200b\u6539\u7528\u200b\u65b0\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002</p> <p>\u200b\u65e7\u200b\u7684\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u5728\u200b\u65b0\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u6216\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u4e4b\u524d\u200b\u4e00\u76f4\u200b\u6709\u6548\u200b ,\u200b\u6b64\u65f6\u200b\u5c06\u200b\u540a\u9500\u200b\u65e7\u200b\u7684\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u3002</p> <p>\u200b\u8bf7\u200b\u6ce8\u610f\u200b,\u200b\u6b64\u200b\u7aef\u70b9\u200b\u4e0d\u200b\u9700\u8981\u200b\u901a\u8fc7\u200b \u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u901a\u8fc7\u200b\u5237\u65b0\u200b\u4ee4\u724c\u200b\u63d0\u4f9b\u200b\u3002</p> <p>\u200b\u5df2\u200b\u4e3a\u6b64\u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u7981\u7528\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u670d\u52a1\u200b\u6807\u8bc6\u200b\u65ad\u8a00\u200b\u3002</p> <pre><code>\n{\n  \"refresh_token\": \"some_token\"\n}\n</code></pre> <pre><code>{\n  \"access_token\": \"a_new_token\",\n  \"expires_in_ms\": 60000,\n  \"refresh_token\": \"another_new_token\"\n}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3logout","title":"POST /_matrix/client/v3/logout","text":"<p>\u200b\u4f7f\u200b\u73b0\u6709\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u5931\u6548\u200b,\u200b\u4f7f\u200b\u5176\u200b\u4e0d\u80fd\u200b\u518d\u200b\u7528\u4e8e\u200b \u200b\u6388\u6743\u200b\u3002\u200b\u4e0e\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u5173\u8054\u200b\u7684\u200b\u8bbe\u5907\u200b\u4e5f\u200b\u5c06\u200b\u88ab\u200b\u5220\u9664\u200b\u3002\u200b\u8bbe\u5907\u200b\u7684\u200b\u8bbe\u5907\u200b\u5bc6\u94a5\u200b\u5c06\u200b\u4e0e\u200b\u8bbe\u5907\u200b\u4e00\u8d77\u200b\u5220\u9664\u200b\u3002</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3logoutall","title":"POST /_matrix/client/v3/logout/all","text":"<p>\u200b\u4f7f\u200b\u7528\u6237\u200b\u7684\u200b\u6240\u6709\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u5931\u6548\u200b,\u200b\u4ee5\u4fbf\u200b\u5b83\u4eec\u200b\u4e0d\u80fd\u200b\u518d\u200b\u7528\u4e8e\u200b \u200b\u6388\u6743\u200b\u3002\u200b\u8fd9\u200b\u5305\u62ec\u200b\u53d1\u51fa\u200b\u6b64\u200b\u8bf7\u6c42\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002\u200b\u6240\u6709\u200b\u8bbe\u5907\u200b \u200b\u5bf9\u4e8e\u200b\u7528\u6237\u200b\u4e5f\u200b\u5c06\u200b\u88ab\u200b\u5220\u9664\u200b\u3002\u200b\u8bbe\u5907\u200b\u7684\u200b\u8bbe\u5907\u200b\u5bc6\u94a5\u200b\u4e3a\u200b \u200b\u4e0e\u200b\u8bbe\u5907\u200b\u4e00\u8d77\u200b\u5220\u9664\u200b\u3002</p> <p>\u200b\u6b64\u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u4e0d\u200b\u4f7f\u7528\u200b\u7528\u6237\u200b\u4ea4\u4e92\u5f0f\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b API,\u200b\u56e0\u4e3a\u200b \u200b\u7528\u6237\u200b\u4ea4\u4e92\u5f0f\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u65e8\u5728\u200b\u9632\u6b62\u200b\u4ee5\u4e0b\u200b\u653b\u51fb\u200b:\u200b\u6709\u4eba\u200b\u638c\u63e1\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b,\u200b\u7136\u540e\u200b\u63a5\u7ba1\u200b\u4e86\u200b\u8be5\u200b\u5e10\u6237\u200b\u3002\u200b\u8fd9\u200b \u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u4f7f\u200b\u7528\u6237\u200b\u7684\u200b\u6240\u6709\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u5931\u6548\u200b,\u200b\u5305\u62ec\u200b \u200b\u8bf7\u6c42\u200b,\u200b\u56e0\u6b64\u200b\u653b\u51fb\u8005\u200b\u65e0\u6cd5\u200b\u63a5\u7ba1\u200b\u5e10\u6237\u200b \u200b\u8fd9\u8fb9\u200b\u3002</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#47","title":"4.7 \u200b\u5e10\u6237\u200b\u6ce8\u518c\u200b\u548c\u200b\u7ba1\u7406","text":""},{"location":"chat/client_server/#post-_matrixclientv3accountdeactivate","title":"POST /_matrix/client/v3/account/deactivate","text":"<p>\u200b\u505c\u7528\u200b\u7528\u6237\u200b\u5e10\u6237\u200b,\u200b\u5220\u9664\u200b\u7528\u6237\u200b\u7684\u200b\u6240\u6709\u200b\u80fd\u529b\u200b \u200b\u518d\u6b21\u200b\u767b\u5f55\u200b\u3002</p> <p>\u200b\u6b64\u200b API \u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u4f7f\u7528\u200b\u7528\u6237\u200b\u4ea4\u4e92\u5f0f\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b API\u3002</p> <p>\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u5177\u6709\u200b \u200b\u6d3b\u52a8\u200b\u4f1a\u8bdd\u200b\u3002</p> <p>\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u66f4\u6539\u200b\u53ef\u7528\u200b\u7684\u200b\u6d41\u200b,\u200b\u5177\u4f53\u200b\u53d6\u51b3\u4e8e\u200b \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u6709\u6548\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002</p> <p>\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u7aef\u70b9\u200b\u4e0d\u540c\u200b,\u200b\u6b64\u200b\u7aef\u70b9\u200b\u4e0d\u200b\u91c7\u7528\u200b\u53c2\u6570\u200b,\u200b\u56e0\u4e3a\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5e94\u200b\u5c06\u200b\u8bf7\u6c42\u200b\u7b7e\u540d\u200b\u5230\u200b \u200b\u800c\u662f\u200b\u6807\u8bc6\u200b\u670d\u52a1\u5668\u200b\u3002id_access_token</p> <pre><code>req\n\n{\n  \"auth\": {\n    \"example_credential\": \"verypoorsharedsecret\",\n    \"session\": \"xxxxx\",\n    \"type\": \"example.type.foo\"\n  },\n  \"id_server\": \"example.org\"\n}\n</code></pre> <pre><code>200\n\n{\n  \"id_server_unbind_result\": \"success\"\n}\n</code></pre> <pre><code>401\n\n{\n  \"completed\": [\n    \"example.type.foo\"\n  ],\n  \"flows\": [\n    {\n      \"stages\": [\n        \"example.type.foo\"\n      ]\n    }\n  ],\n  \"params\": {\n    \"example.type.baz\": {\n      \"example_key\": \"foobar\"\n    }\n  },\n  \"session\": \"xxxxxxyz\"\n}\n</code></pre> <pre><code>429\n\n{\n  \"errcode\": \"M_LIMIT_EXCEEDED\",\n  \"error\": \"Too many requests\",\n  \"retry_after_ms\": 2000\n}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3accountpassword","title":"POST /_matrix/client/v3/account/password","text":"<p>\u200b\u66f4\u6539\u200b\u6b64\u4e3b\u200b\u670d\u52a1\u5668\u200b\u4e0a\u200b\u5e10\u6237\u200b\u7684\u200b\u5bc6\u7801\u200b\u3002</p> <p>\u200b\u6b64\u200b API \u200b\u7aef\u70b9\u200b\u4f7f\u7528\u200b\u7528\u6237\u200b\u4ea4\u4e92\u5f0f\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b API \u200b\u6765\u200b \u200b\u786e\u4fdd\u200b\u66f4\u6539\u200b\u5bc6\u7801\u200b\u7684\u200b\u7528\u6237\u200b\u5b9e\u9645\u4e0a\u200b\u662f\u200b \u200b\u5e10\u6237\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5ba2\u6237\u7aef\u200b\u5177\u6709\u200b \u200b\u6d3b\u52a8\u200b\u4f1a\u8bdd\u200b\u3002</p> <p>\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u66f4\u6539\u200b\u53ef\u7528\u200b\u7684\u200b\u6d41\u200b,\u200b\u5177\u4f53\u200b\u53d6\u51b3\u4e8e\u200b \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u6709\u6548\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u4e0d\u200b\u5e94\u200b\u64a4\u9500\u200b \u200b\u8bf7\u6c42\u200b\u4e2d\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b\u3002\u200b\u662f\u5426\u200b\u4e3a\u200b\u5176\u4ed6\u200b\u8bbf\u95ee\u200b\u4ee4\u724c\u200b \u200b\u540a\u9500\u200b\u7684\u200b\u7528\u6237\u200b\u53d6\u51b3\u4e8e\u200b\u8bf7\u6c42\u200b\u53c2\u6570\u200b\u3002</p> <pre><code>{\n  \"auth\": {\n    \"example_credential\": \"verypoorsharedsecret\",\n    \"session\": \"xxxxx\",\n    \"type\": \"example.type.foo\"\n  },\n  \"logout_devices\": true,\n  \"new_password\": \"ihatebananas\"\n}\n</code></pre> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3accountpasswordemailrequesttoken","title":"POST /_matrix/client/v3/account/password/email/requestToken","text":"<p>\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5fc5\u987b\u200b\u68c0\u67e5\u200b\u7ed9\u5b9a\u200b\u7684\u200b\u7535\u5b50\u90ae\u4ef6\u200b\u5730\u5740\u200b\u662f\u5426\u200b\u4e3a\u200b \u200b\u4e0e\u200b\u6b64\u4e3b\u200b\u670d\u52a1\u5668\u200b\u4e0a\u200b\u7684\u200b\u5e10\u6237\u200b\u5173\u8054\u200b\u3002\u200b\u6b64\u200b\u63a5\u53e3\u200b\u5e94\u4e3a\u200b \u200b\u7528\u4e8e\u200b\u5728\u200b\u5bf9\u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u8fdb\u884c\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u65f6\u200b\u8bf7\u6c42\u200b\u9a8c\u8bc1\u200b\u4ee4\u724c\u200b\u3002/account/password</p> <p>\u200b\u6b64\u200b API \u200b\u7684\u200b\u53c2\u6570\u200b\u548c\u200b\u54cd\u5e94\u200b\u4e0e\u200b /register/email/requestToken \u200b\u7aef\u70b9\u200b\u7684\u200b\u53c2\u6570\u200b\u548c\u200b\u54cd\u5e94\u200b\u76f8\u540c\u200b,\u200b\u53ea\u662f\u200b\u5982\u679c\u200b\u6ca1\u6709\u200b\u4e0e\u200b \u200b\u53ef\u4ee5\u200b\u627e\u5230\u200b\u7ed9\u5b9a\u200b\u7684\u200b\u7535\u5b50\u90ae\u4ef6\u200b\u5730\u5740\u200b\u3002\u200b\u670d\u52a1\u5668\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u53d1\u9001\u200b \u200b\u5411\u200b\u7ed9\u5b9a\u200b\u5730\u5740\u200b\u53d1\u9001\u200b\u7535\u5b50\u90ae\u4ef6\u200b,\u200b\u63d0\u793a\u200b\u7528\u6237\u200b\u521b\u5efa\u200b\u5e10\u6237\u200b\u3002 \u200b\u53ef\u80fd\u200b\u65e0\u6cd5\u200b\u9000\u8d27\u200b\u3002M_THREEPID_NOT_FOUNDM_THREEPID_IN_USE</p> <p>\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5e94\u200b\u9a8c\u8bc1\u200b\u7535\u5b50\u90ae\u4ef6\u200b\u672c\u8eab\u200b,\u200b\u65b9\u6cd5\u200b\u662f\u200b\u53d1\u9001\u200b \u200b\u9a8c\u8bc1\u200b\u7535\u5b50\u90ae\u4ef6\u200b\u672c\u8eab\u200b\u6216\u200b\u4f7f\u7528\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u63a7\u5236\u200b\u7684\u200b\u670d\u52a1\u200b\u3002</p> <pre><code>{\n  \"client_secret\": \"monkeys_are_GREAT\",\n  \"email\": \"alice@example.org\",\n  \"id_server\": \"id.example.com\",\n  \"next_link\": \"https://example.org/congratulations.html\",\n  \"send_attempt\": 1\n}\n</code></pre> <pre><code>{\n  \"sid\": \"123abc\",\n  \"submit_url\": \"https://example.org/path/to/submitToken\"\n}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3accountpasswordmsisdnrequesttoken","title":"POST /_matrix/client/v3/account/password/msisdn/requestToken","text":"<p>\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5fc5\u987b\u200b\u68c0\u67e5\u200b\u7ed9\u5b9a\u200b\u7684\u200b\u7535\u8bdd\u53f7\u7801\u200b\u662f\u5426\u200b\u4e3a\u200b \u200b\u4e0e\u200b\u6b64\u4e3b\u200b\u670d\u52a1\u5668\u200b\u4e0a\u200b\u7684\u200b\u5e10\u6237\u200b\u5173\u8054\u200b\u3002\u200b\u6b64\u200b\u63a5\u53e3\u200b\u5e94\u4e3a\u200b \u200b\u7528\u4e8e\u200b\u5728\u200b\u5bf9\u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u8fdb\u884c\u200b\u8eab\u4efd\u9a8c\u8bc1\u200b\u65f6\u200b\u8bf7\u6c42\u200b\u9a8c\u8bc1\u200b\u4ee4\u724c\u200b\u3002/account/password</p> <p>\u200b\u6b64\u200b API \u200b\u7684\u200b\u53c2\u6570\u200b\u548c\u200b\u54cd\u5e94\u200b\u4e0e\u200b /register/msisdn/requestToken \u200b\u7ec8\u7ed3\u200b\u70b9\u200b\u7684\u200b\u53c2\u6570\u200b\u548c\u200b\u54cd\u5e94\u200b\u76f8\u540c\u200b,\u200b\u53ea\u662f\u200b\u5982\u679c\u200b\u6ca1\u6709\u200b\u4e0e\u200b \u200b\u53ef\u4ee5\u200b\u627e\u5230\u200b\u7ed9\u5b9a\u200b\u7684\u200b\u7535\u8bdd\u53f7\u7801\u200b\u3002\u200b\u670d\u52a1\u5668\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u6539\u4e3a\u200b\u53d1\u9001\u200b\u77ed\u4fe1\u200b \u200b\u5230\u200b\u63d0\u793a\u200b\u7528\u6237\u200b\u521b\u5efa\u200b\u5e10\u6237\u200b\u7684\u200b\u7ed9\u5b9a\u200b\u7535\u8bdd\u53f7\u7801\u200b\u3002 \u200b\u53ef\u80fd\u200b\u65e0\u6cd5\u200b\u9000\u8d27\u200b\u3002M_THREEPID_NOT_FOUNDM_THREEPID_IN_USE</p> <p>\u200b\u4e3b\u200b\u670d\u52a1\u5668\u200b\u5e94\u200b\u9a8c\u8bc1\u200b\u7535\u8bdd\u53f7\u7801\u200b\u672c\u8eab\u200b,\u200b\u65b9\u6cd5\u200b\u662f\u200b\u53d1\u9001\u200b \u200b\u9a8c\u8bc1\u200b\u6d88\u606f\u200b\u672c\u8eab\u200b\u6216\u200b\u901a\u8fc7\u200b\u4f7f\u7528\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u63a7\u5236\u200b\u7684\u200b\u670d\u52a1\u200b\u3002</p> <pre><code>{\n  \"client_secret\": \"monkeys_are_GREAT\",\n  \"country\": \"GB\",\n  \"id_server\": \"id.example.com\",\n  \"next_link\": \"https://example.org/congratulations.html\",\n  \"phone_number\": \"07700900001\",\n  \"send_attempt\": 1\n}\n</code></pre> <pre><code>{\n  \"sid\": \"123abc\",\n  \"submit_url\": \"https://example.org/path/to/submitToken\"\n}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3register","title":"POST /_matrix/client/v3/register","text":"<p>\u200b\u6b64\u200b API \u200b\u7d42\u7d50\u9ede\u200b\u4f7f\u7528\u200b\u4f7f\u7528\u8005\u200b\u4e92\u52d5\u5f0f\u200b\u8eab\u4efd\u200b\u9a57\u8b49\u200b API,\u200b\u4f46\u200b \u200b\u6b63\u5728\u200b\u8a3b\u200b\u518a\u200b\u4f86\u200b\u8cd3\u200b\u5e33\u200b\u6236\u200b\u7684\u200b\u60c5\u200b\u6cc1\u200b\u3002</p> <p>\u200b\u5728\u200b\u6b64\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u8a3b\u200b\u518a\u200b\u4e00\u200b\u500b\u200b\u5e33\u200b\u6236\u200b\u3002</p> <p>\u200b\u6709\u200b\u5169\u7a2e\u200b\u985e\u578b\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u5e33\u6236\u200b:</p> <ul> <li>user\u200b\u5e33\u6236\u200b\u3002\u200b\u9019\u4e9b\u200b\u5e33\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u672c\u898f\u7bc4\u4e2d\u200b\u63cf\u8ff0\u200b\u7684\u200b\u5b8c\u6574\u200b API\u3002</li> <li>guest\u200b\u5e33\u6236\u200b\u3002\u200b\u9019\u4e9b\u200b\u5e33\u6236\u200b\u53ef\u80fd\u200b\u5177\u6709\u200b\u6709\u9650\u200b\u7684\u200b\u8a31\u53ef\u6b0a\u200b,\u200b\u4e26\u4e14\u200b\u53ef\u80fd\u200b\u4e26\u975e\u200b\u53d7\u200b\u6240\u6709\u200b\u4f3a\u670d\u5668\u200b\u652f\u63f4\u200b</li> </ul> <p>\u200b\u5982\u679c\u200b\u8a3b\u200b\u518a\u200b\u6210\u529f\u200b,\u200b\u6b64\u7d42\u200b\u7d50\u9ede\u5c07\u200b\u9812\u200b\u767c\u8a2a\u554f\u200b\u4ee4\u724c\u200b \u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b \u200b\u5728\u5f8c\u7e8c\u200b\u8acb\u6c42\u200b\u4e2d\u200b\u6388\u6b0a\u200b\u81ea\u8eab\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5ba2\u6236\u200b\u7aef\u200b\u672a\u200b\u63d0\u4f9b\u200b ,\u200b\u5247\u200b\u4f3a\u670d\u5668\u200b\u5fc5\u9808\u200b \u200b\u81ea\u52d5\u200b\u751f\u6210\u200b\u4e00\u500b\u200b\u3002device_id</p> <p>\u200b\u4f3a\u670d\u5668\u200b\u61c9\u6839\u64da\u200b\u63d0\u4f9b\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b ID \u200b\u8a3b\u200b\u518a\u200b\u4e00\u200b\u500b\u200b\u5e33\u200b\u6236\u200b\uff08\u200b\u5982\u679c\u200b\u6709\u200b\uff09\u3002\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u77e9\u9663\u200b\u4f7f\u7528\u8005\u200bID\u200b\u7684\u200b\u8a9e\u6cd5\u200b localparts \u200b\u53d7\u5230\u9650\u5236\u200b,\u200b\u56e0\u6b64\u200b\u4f3a\u670d\u5668\u200b\u5fc5\u9808\u200b\u4ee5\u200b\u908f\u8f2f\u200b\u65b9\u5f0f\u200b\u5c07\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6620\u5c04\u200b\u5230\u200b \u200b\u4e0a\u200b,\u200b\u6216\u8005\u200b\u62d2\u7d55\u200b\u4efb\u4f55\u200b\u4e0d\u200b\u7b26\u5408\u200b\u8a9e\u6cd5\u200b\u7684\u200b\u5167\u5bb9\u200b\u3002usernameusernameuser_idusernameM_INVALID_USERNAME</p> <p>\u200b\u77e9\u9663\u200b\u7528\u6236\u200b\u7aef\u200b\u4e0d\u5f97\u200b\u5047\u5b9a\u200b\u8a3b\u200b\u518a\u200b\u7684\u200b\u672c\u5730\u200b\u90e8\u5206\u200b\u8207\u200b\u63d0\u4f9b\u200b\u7684\u200b .user_idusername</p> <p>\u200b\u8fd4\u56de\u200b\u7684\u200b\u8a2a\u554f\u200b\u4ee4\u724c\u200b\u5fc5\u9808\u200b\u8207\u200b\u7528\u6236\u200b\u7aef\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6216\u200b\u7531\u200b\u4f3a\u670d\u5668\u200b\u751f\u6210\u200b\u7684\u200b\u76f8\u95dc\u806f\u200b\u3002\u200b\u4f3a\u670d\u5668\u200b\u53ef\u80fd\u200b \u200b\u4f7f\u200b\u4ee5\u524d\u200b\u8207\u200b\u8a72\u200b\u8a2d\u5099\u200b\u95dc\u806f\u200b\u7684\u200b\u4efb\u4f55\u200b\u8a2a\u554f\u200b\u4ee4\u724c\u200b\u7121\u6548\u200b\u3002\u200b\u8acb\u200b\u53c3\u95b1\u200b\u8a2a\u554f\u200b\u4ee4\u724c\u200b\u548c\u200b\u8a2d\u5099\u200b\u4e4b\u9593\u200b\u7684\u95dc\u200b\u4fc2\u200b\u3002device_id</p> <p>\u200b\u8a3b\u200b\u518a\u200b\u4f86\u200b\u8cd3\u200b\u5e33\u200b\u6236\u200b\u6642\u200b,\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u53c3\u6578\u200b \u200b\u5fc5\u9808\u200b\u5ffd\u7565\u200b\u9664\u5916\u200b \u200b\u7531\u200b\u4f3a\u670d\u5668\u200b\u3002\u200b\u4f3a\u670d\u5668\u200b\u5fc5\u9808\u200b\u70ba\u200b\u5e33\u6236\u200b\u9078\u64c7\u200b\u4e00\u500b\u200b \u200b\u7121\u8ad6\u200b\u8f38\u5165\u200b\u5982\u4f55\u200b\u3002initial_device_display_namedevice_id</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"auth\": {\n    \"example_credential\": \"verypoorsharedsecret\",\n    \"session\": \"xxxxx\",\n    \"type\": \"example.type.foo\"\n  },\n  \"device_id\": \"GHTYAJCE\",\n  \"initial_device_display_name\": \"Jungle Phone\",\n  \"password\": \"ilovebananas\",\n  \"username\": \"cheeky_monkey\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"access_token\": \"abc123\",\n  \"device_id\": \"GHTYAJCE\",\n  \"user_id\": \"@cheeky_monkey:matrix.org\"\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3registeravailable","title":"GET /_matrix/client/v3/register/available","text":"<p>\u200b\u6aa2\u67e5\u200b\u4f7f\u7528\u8005\u200b\u540d\u200b\u662f\u5426\u200b\u53ef\u7528\u200b\u65bc\u200b\u4f3a\u670d\u5668\u200b\u4e14\u200b\u6709\u6548\u200b\u3002</p> <p>\u200b\u4f3a\u670d\u5668\u200b\u61c9\u6aa2\u67e5\u200b\u4ee5\u78ba\u200b\u4fdd\u5728\u200b\u8acb\u6c42\u200b\u6642\u200b \u200b\u8acb\u6c42\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u540d\u200b\u53ef\u4f9b\u4f7f\u7528\u200b\u3002\u200b\u9019\u200b\u5305\u62ec\u200b\u9a57\u8b49\u200b \u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u670d\u52d9\u200b\u5c1a\u672a\u200b\u8072\u660e\u200b\u4f7f\u7528\u8005\u200b\u540d\u200b,\u200b\u4e26\u4e14\u200b\u8a72\u200b\u4f7f\u7528\u8005\u200b\u540d\u200b \u200b\u7b26\u5408\u200b\u4f3a\u670d\u5668\u200b\u7684\u200b\u6240\u200b\u9700\u200b\u8981\u6c42\u200b\uff08\u200b\u4f8b\u5982\u200b,\u200b\u4f3a\u670d\u5668\u200b\u53ef\u4ee5\u200b\u6307\u793a\u200b \u200b\u5b83\u200b\u4e0d\u200b\u5141\u200b\u8a31\u5e36\u200b\u4e0b\u5283\u7dda\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u540d\u200b\uff09\u3002</p> <p>\u200b\u77e9\u9663\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u5728\u200b\u5617\u200b\u8a66\u200b\u8a3b\u200b\u518a\u200b\u4e4b\u524d\u200b\u4f7f\u7528\u200b\u6b64\u200b API, \u200b\u4f46\u662f\u200b,\u200b\u5ba2\u6236\u200b\u7aef\u200b\u9084\u5fc5\u9808\u200b\u6ce8\u610f\u200b,\u200b\u901a\u5e38\u200b\u4e0d\u6703\u200b\u4f7f\u7528\u200b\u6b64\u200b API \u200b\u4fdd\u7559\u200b\u4f7f\u7528\u8005\u200b\u540d\u200b\u3002\u200b\u9019\u200b\u53ef\u80fd\u200b\u610f\u5473\u8457\u200b\u4f7f\u7528\u8005\u200b\u540d\u8b8a\u200b\u5f97\u200b\u4e0d\u53ef\u200b\u7528\u200b \u200b\u5728\u200b\u6aa2\u67e5\u200b\u5176\u200b\u53ef\u7528\u6027\u200b\u548c\u200b\u5617\u200b\u8a66\u200b\u8a3b\u200b\u518a\u200b\u5b83\u200b\u4e4b\u200b\u9593\u200b\u3002</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"available\": true\n}\n</code></pre> <p>400 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"errcode\": \"M_USER_IN_USE\",\n  \"error\": \"Desired user ID is already taken.\"\n}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3registeremailrequesttoken","title":"POST /_matrix/client/v3/register/email/requestToken","text":"<p>\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u5fc5\u9808\u200b\u6aa2\u67e5\u200b\u7d66\u5b9a\u200b\u7684\u200b\u96fb\u5b50\u200b\u90f5\u4ef6\u200b\u4f4d\u5740\u200b\u662f\u5426\u200b\u5c1a\u672a\u200b\u8207\u200b\u6b64\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u7684\u200b\u5e33\u6236\u200b\u95dc\u806f\u200b\u3002\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b \u200b\u61c9\u901a\u904e\u200b\u767c\u9001\u9a57\u200b\u8b49\u96fb\u5b50\u200b\u90f5\u4ef6\u200b\u4f86\u9a57\u200b\u8b49\u96fb\u5b50\u200b\u90f5\u4ef6\u200b\u672c\u8eab\u200b \u200b\u672c\u8eab\u200b\u6216\u200b\u901a\u904e\u200b\u4f7f\u7528\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u63a7\u5236\u200b\u7684\u200b\u670d\u52d9\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"client_secret\": \"monkeys_are_GREAT\",\n  \"email\": \"alice@example.org\",\n  \"id_server\": \"id.example.com\",\n  \"next_link\": \"https://example.org/congratulations.html\",\n  \"send_attempt\": 1\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"sid\": \"123abc\",\n  \"submit_url\": \"https://example.org/path/to/submitToken\"\n}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3registermsisdnrequesttoken","title":"POST /_matrix/client/v3/register/msisdn/requestToken","text":"<p>\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u5fc5\u9808\u200b\u6aa2\u67e5\u200b\u7d66\u5b9a\u200b\u7684\u200b\u96fb\u8a71\u200b\u865f\u78bc\u200b\u662f\u5426\u200b\u5c1a\u672a\u200b\u8207\u200b\u6b64\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u7684\u200b\u5e33\u6236\u200b\u95dc\u806f\u200b\u3002\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b \u200b\u61c9\u901a\u904e\u200b\u767c\u9001\u9a57\u200b\u8b49\u4f86\u9a57\u200b\u8b49\u96fb\u8a71\u200b\u865f\u78bc\u200b\u672c\u8eab\u200b \u200b\u6d88\u606f\u200b\u672c\u8eab\u200b\u6216\u200b\u901a\u904e\u200b\u4f7f\u7528\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u63a7\u5236\u200b\u7684\u200b\u670d\u52d9\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"client_secret\": \"monkeys_are_GREAT\",\n  \"country\": \"GB\",\n  \"id_server\": \"id.example.com\",\n  \"next_link\": \"https://example.org/congratulations.html\",\n  \"phone_number\": \"07700900001\",\n  \"send_attempt\": 1\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"sid\": \"123abc\",\n  \"submit_url\": \"https://example.org/path/to/submitToken\"\n}\n</code></pre>"},{"location":"chat/client_server/#48","title":"4.8 \u200b\u6dfb\u52a0\u200b\u5e33\u6236\u200b\u7ba1\u7406\u200b\u806f\u200b\u7e6b\u200b\u8cc7\u200b\u8a0a","text":""},{"location":"chat/client_server/#post-_matrixclientv3account3pidunbind","title":"POST /_matrix/client/v3/account/3pid/unbind","text":"<p>\u200b\u5f9e\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b\u4e2d\u200b\u522a\u9664\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u7b2c\u4e09\u65b9\u200b\u6a19\u8b58\u78bc\u200b \u200b\u7121\u200b\u9700\u5c07\u200b\u5176\u200b\u5f9e\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u4e2d\u200b\u522a\u9664\u200b\u3002</p> <p>\u200b\u8207\u200b\u5176\u4ed6\u200b\u7aef\u9ede\u200b\u4e0d\u540c\u200b,\u200b\u6b64\u7aef\u9ede\u200b\u4e0d\u200b\u63a1\u7528\u200b\u53c3\u6578\u200b,\u200b\u56e0\u70ba\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u61c9\u5c07\u200b\u8acb\u6c42\u200b\u7c3d\u540d\u200b\u5230\u200b \u200b\u800c\u662f\u200b\u6a19\u8b58\u200b\u4f3a\u670d\u5668\u200b\u3002id_access_token</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"address\": \"example@example.org\",\n  \"id_server\": \"example.org\",\n  \"medium\": \"email\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"id_server_unbind_result\": \"success\"\n}\n</code></pre>"},{"location":"chat/client_server/#49","title":"4.9 \u200b\u5f80\u4f86\u200b\u5e33\u6236\u200b\u8cc7\u8a0a","text":""},{"location":"chat/client_server/#get-_matrixclientv3accountwhoami","title":"GET /_matrix/client/v3/account/whoami","text":"<p>\u200b\u7372\u53d6\u200b\u6709\u200b\u95dc\u7d66\u5b9a\u200b\u8a2a\u554f\u200b\u4ee4\u724c\u200b\u7684\u200b\u6240\u6709\u8005\u200b\u7684\u200b\u8cc7\u8a0a\u200b\u3002</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u8207\u200b\u5ba2\u6236\u200b\u7aef\u200b-\u200b\u4f3a\u670d\u5668\u200b API \u200b\u7684\u200b\u5176\u9918\u200b\u90e8\u5206\u200b\u4e00\u6a23\u200b, \u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u670d\u52d9\u200b\u53ef\u80fd\u200b\u6703\u507d\u200b\u88dd\u6210\u200b\u5176\u200b\u4f7f\u7528\u8005\u200b \u200b\u547d\u540d\u200b\u7a7a\u9593\u200b,\u200b\u901a\u904e\u200b\u63d0\u4f9b\u200b\u67e5\u8a62\u200b\u53c3\u6578\u200b\u3002\u200b\u5728\u200b\u6b64\u200b \u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b,\u200b\u4f3a\u670d\u5668\u200b\u61c9\u9a57\u8b49\u200b\u7d66\u5b9a\u200b\u7684\u200b\u662f\u5426\u200b\u7531\u61c9\u200b\u7528\u670d\u200b\u52d9\u200b\u8a3b\u200b\u518a\u200b,\u200b\u4e26\u5728\u200b\u56de\u61c9\u200b\u4e2d\u200b\u8fd4\u56de\u200b body\u3002user_iduser_id</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"device_id\": \"ABC1234\",\n  \"user_id\": \"@joe:example.org\"\n}\n</code></pre>"},{"location":"chat/client_server/#491","title":"4.9.1 \u200b\u6709\u95dc\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b\u7684\u200b\u8aaa\u660e","text":"<p>Matrix \u200b\u4e2d\u200b\u7684\u200b\u8b58\u5225\u200b\u4f3a\u670d\u5668\u200b\u5132\u5b58\u200b\u7d81\u5b9a\u200b\uff08\u200b\u95dc\u200b\u4fc2\u200b\uff09 \u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u7b2c\u4e09\u65b9\u200b\u6a19\u8b58\u78bc\u200b,\u200b\u901a\u5e38\u200b\u662f\u200b\u96fb\u5b50\u200b\u90f5\u4ef6\u200b\u6216\u200b\u96fb\u8a71\u200b\u865f\u78bc\u200b,\u200b\u4ee5\u53ca\u200b \u200b\u4ed6\u5011\u200b\u7684\u200b\u4f7f\u7528\u8005\u200bID\u3002\u200b\u7528\u6236\u200b\u9078\u64c7\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b\u540e\u200b,\u200b\u8a72\u200b\u8eab\u4efd\u200b \u200b\u4f3a\u670d\u5668\u200b\u61c9\u7531\u200b\u6240\u6709\u200b\u7528\u6236\u200b\u7aef\u200b\u4f7f\u7528\u200b\u3002</p> <p>\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u5e33\u6236\u200b\u6578\u64da\u200b\u4e8b\u4ef6\u200b\u67e5\u770b\u200b\u7528\u6236\u200b\u9078\u64c7\u200b\u4e86\u200b\u54ea\u500b\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b,\u200b\u5982\u4e0b\u200b\u6240\u8ff0\u200b\u3002\u200b\u5ba2\u6236\u200b \u200b\u61c9\u200b\u907f\u514d\u200b\u5411\u200b\u4efb\u4f55\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b\u767c\u51fa\u200b\u8acb\u6c42\u200b,\u200b\u76f4\u5230\u200b \u200b\u7684\u200b\u5b58\u5728\u200b\u88ab\u78ba\u200b\u8a8d\u70ba\u200b\uff08\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff09\u3002\u200b\u5982\u679c\u200b \u200b\u5b58\u5728\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u6aa2\u67e5\u200b\u4e8b\u4ef6\u200b\u5167\u5bb9\u200b\u4e2d\u200b\u662f\u5426\u200b\u5b58\u5728\u200b\u5c6c\u6027\u200b\u3002\u200b\u5982\u679c\u200b\u5b58\u5728\u200b,\u200b\u5247\u200b \u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u4f7f\u7528\u200b\u8a72\u200b\u5c6c\u6027\u200b\u4e2d\u200b\u7684\u200b\u6a19\u8b58\u200b\u4f3a\u670d\u5668\u200b\u4f5c\u70ba\u200b\u6a19\u8b58\u200b \u200b\u7528\u6236\u200b\u7684\u200b\u4f3a\u670d\u5668\u200b\u3002\u200b\u5982\u679c\u200b\u7f3a\u5c11\u200b,\u200b\u6216\u8005\u200b\u5e33\u6236\u200b\u6578\u64da\u200b \u200b\u4e8b\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b,\u200b\u5ba2\u6236\u200b\u7aef\u200b\u61c9\u200b\u4f7f\u7528\u200b\u4efb\u4f55\u200b\u9810\u8a2d\u503c\u200b \u200b\u901a\u5e38\u200b\u9069\u7528\u200b\u65bc\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b\uff08\u200b\u5982\u679c\u200b\u9069\u7528\u200b\uff09\u3002\u200b\u5ba2\u6236\u200b\u4e0d\u61c9\u200b \u200b\u7576\u200b\u4f7f\u7528\u8005\u200b\u4f7f\u7528\u200b\u9810\u8a2d\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b\u66f4\u65b0\u200b\u5e33\u6236\u200b\u6578\u64da\u200b\u6642\u200b \u200b\u5176\u200b\u5e33\u6236\u200b\u6578\u64da\u200b\u4e2d\u200b\u7f3a\u5c11\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b\u3002m.identity_serverm.identity_serverbase_urlbase_urlbase_url</p> <p>\u200b\u5ba2\u6236\u200b\u61c9\u200b\u5075\u807d\u200b\u5e33\u6236\u200b\u7684\u200b\u66f4\u6539\u200b \u200b\u6578\u64da\u200b\u4e8b\u4ef6\u200b,\u200b\u4e26\u200b\u66f4\u65b0\u200b\u4ed6\u5011\u200b\u6b63\u5728\u200b\u806f\u200b\u7e6b\u200b\u7684\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b \u200b\u7d50\u679c\u200b\u3002m.identity_server</p> <p>\u200b\u5982\u679c\u200b\u7528\u6236\u200b\u7aef\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u7a2e\u200b\u8a2d\u7f6e\u200b\u8981\u200b\u4f7f\u7528\u200b\u7684\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b\u7684\u200b\u65b9\u6cd5\u200b,\u200b\u5247\u5fc5\u9808\u200b \u200b\u76f8\u61c9\u200b\u5730\u200b\u66f4\u65b0\u200b\u7684\u200b\u503c\u200b\u3002A \u200b\u7684\u200b MUST \u200b\u88ab\u8996\u200b\u70ba\u200b\u4f7f\u7528\u8005\u200b\u4e0d\u60f3\u200b\u4f7f\u7528\u200b \u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b,\u200b\u56e0\u6b64\u200b\u7981\u7528\u200b\u6240\u6709\u200b\u76f8\u95dc\u200b\u529f\u80fd\u200b\u3002m.identity_serverbase_urlnull</p> <p>\u200b\u5ba2\u6236\u200b\u61c9\u200b\u907f\u514d\u200b\u5c07\u5e33\u200b\u6236\u200b\u6578\u64da\u200b\u4f5c\u70ba\u200b\u9077\u79fb\u200b\u9032\u884c\u200b\u586b\u5145\u200b \u200b\u91dd\u5c0d\u200b\u7f3a\u5c11\u200b\u5e33\u6236\u200b\u6578\u64da\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u6b65\u9a5f\u200b,\u200b\u9664\u975e\u200b\u7528\u6236\u200b\u8a2d\u7f6e\u200b \u200b\u7528\u6236\u200b\u7aef\u200b\u5167\u200b\u7684\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b\u70ba\u503c\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u4f7f\u7528\u8005\u200b \u200b\u6c92\u6709\u200b\u5e33\u6236\u200b\u6578\u64da\u200b\u4e8b\u4ef6\u200b\u4e0d\u61c9\u200b\u6700\u7d42\u200b \u200b\u5728\u200b\u5e33\u6236\u200b\u6578\u64da\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u5ba2\u6236\u200b\u7aef\u7684\u200b\u9810\u8a2d\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b,\u200b\u9664\u975e\u200b \u200b\u4f7f\u7528\u8005\u200b\u9996\u5148\u200b\u8a2a\u554f\u200b\u5176\u200b\u5e33\u6236\u200b\u8a2d\u7f6e\u200b\u4ee5\u200b\u8a2d\u7f6e\u200b\u8eab\u4efd\u200b\u4f3a\u670d\u5668\u200b\u3002m.identity_server</p> <p>\u200b\u4f8b\u5b50\u200b</p> <pre><code>{\n  \"content\": {\n    \"base_url\": \"https://example.org\"\n  },\n  \"type\": \"m.identity_server\"\n}\n</code></pre>"},{"location":"chat/client_server/#5","title":"5. \u200b\u80fd\u529b\u200b\u5354\u5546","text":"<p>\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u53ef\u80fd\u200b\u4e0d\u200b\u652f\u63f4\u200b\u67d0\u4e9b\u200b\u64cd\u4f5c\u200b,\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5fc5\u9808\u200b\u80fd\u5920\u200b \u200b\u67e5\u8a62\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u53ef\u4ee5\u200b\u63d0\u4f9b\u200b\u548c\u200b\u4e0d\u80fd\u200b\u63d0\u4f9b\u200b\u7684\u200b\u5167\u5bb9\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u4e00\u500b\u200b \u200b\u5bb6\u5ead\u200b\u4f3a\u670d\u5668\u200b\u53ef\u80fd\u200b\u4e0d\u200b\u652f\u63f4\u200b\u4f7f\u7528\u8005\u200b\u6309\u200b\u539f\u6a23\u200b\u66f4\u6539\u200b\u5176\u5bc6\u78bc\u200b \u200b\u914d\u7f6e\u200b\u70ba\u200b\u5c0d\u200b\u5916\u90e8\u200b\u7cfb\u7d71\u200b\u57f7\u884c\u200b\u8eab\u4efd\u200b\u9a57\u8b49\u200b\u3002</p> <p>\u200b\u901a\u904e\u200b\u6b64\u7cfb\u7d71\u200b\u5ba3\u50b3\u200b\u7684\u200b\u529f\u80fd\u200b\u65e8\u5728\u200b \u200b\u901a\u544a\u200b\u5728\u200b API \u200b\u4e2d\u53ef\u9078\u200b\u7684\u200b\u529f\u80fd\u200b,\u200b\u6216\u8005\u200b\u4f9d\u8cf4\u200b\u65bc\u200b \u200b\u4f7f\u7528\u8005\u200b\u6216\u200b\u4f3a\u670d\u5668\u200b\u72c0\u614b\u200b\u7684\u200b\u67d0\u7a2e\u200b\u65b9\u5f0f\u200b\u3002\u200b\u9019\u500b\u200b\u7cfb\u7d71\u200b\u4e0d\u61c9\u200b\u8a72\u200b \u200b\u7528\u200b\u65bc\u200b\u5ba3\u50b3\u200b\u4e0d\u200b\u7a69\u5b9a\u200b\u6216\u200b\u5be6\u9a57\u200b\u6027\u529f\u80fd\u200b - \u200b\u9019\u200b\u66f4\u597d\u200b \u200b\u7531\u7aef\u9ede\u200b\u5b8c\u6210\u200b\u3002/versions</p> <p>\u200b\u5408\u7406\u200b\u80fd\u529b\u200b\u7684\u200b\u4e00\u4e9b\u200b\u7bc4\u4f8b\u200b\u5305\u62ec\u200b:</p> <ul> <li>\u200b\u4f3a\u670d\u5668\u200b\u662f\u5426\u200b\u652f\u63f4\u200b\u7528\u6236\u200b\u72c0\u614b\u200b\u3002</li> <li>\u200b\u4f3a\u670d\u5668\u200b\u662f\u5426\u200b\u652f\u63f4\u200b\u53ef\u9078\u200b\u529f\u80fd\u200b,\u200b\u4f8b\u5982\u200b\u4f7f\u7528\u8005\u200b\u6216\u200b \u200b\u623f\u9593\u200b\u76ee\u9304\u200b\u3002</li> <li>\u200b\u5c0d\u7528\u200b\u6236\u7aef\u200b\u65bd\u52a0\u200b\u7684\u200b\u901f\u7387\u200b\u9650\u5236\u200b\u6216\u200b\u6a94\u200b\u985e\u578b\u200b\u9650\u5236\u200b \u200b\u4f3a\u670d\u5668\u200b\u3002</li> </ul> <p>\u200b\u4e0d\u61c9\u200b\u6210\u70ba\u200b\u529f\u80fd\u200b\u7684\u200b\u4e00\u4e9b\u200b\u7bc4\u4f8b\u200b\u5305\u62ec\u200b:</p> <ul> <li>\u200b\u4f3a\u670d\u5668\u200b\u662f\u5426\u200b\u652f\u6301\u200b\u898f\u7bc4\u4e2d\u200b\u7684\u200b\u529f\u80fd\u200b\u3002unstable</li> <li>\u200b\u5a92\u9ad4\u200b\u5927\u5c0f\u200b\u9650\u5236\u200b - \u200b\u9019\u4e9b\u200b\u9650\u5236\u200b\u7531\u200b /config API \u200b\u8655\u7406\u200b\u3002</li> <li>\u200b\u7528\u200b\u65bc\u200b\u901a\u4fe1\u200b\u7684\u200b\u53ef\u9078\u200b\u7de8\u78bc\u200b\u6216\u200b\u66ff\u4ee3\u200b\u50b3\u8f38\u200b \u200b\u4f3a\u670d\u5668\u200b</li> </ul> <p>\u200b\u524d\u7db4\u200b\u70ba\u200b\u7684\u200b\u529f\u80fd\u200b\u4fdd\u7559\u200b\u7528\u200b\u65bc\u200b\u5728\u200b \u200b\u77e9\u9663\u200b\u898f\u7bc4\u200b,\u200b\u800c\u200b\u5176\u4ed6\u200b\u503c\u200b\u53ef\u80fd\u200b\u7531\u200b\u4f3a\u670d\u5668\u200b\u4f7f\u7528\u200b Java \u200b\u5305\u200b\u547d\u540d\u200b\u7d04\u5b9a\u200b\u3002\u200b\u77e9\u9663\u200b\u652f\u63f4\u200b\u7684\u200b\u529f\u80fd\u200b \u200b\u898f\u7bc4\u5c07\u200b\u5728\u200b\u672c\u200b\u7bc0\u5f8c\u9762\u200b\u5b9a\u7fa9\u200b\u3002m.</p>"},{"location":"chat/client_server/#get-_matrixclientv3capabilities","title":"GET /_matrix/client/v3/capabilities","text":"<p>\u200b\u7372\u53d6\u200b\u6709\u95dc\u200b\u4f3a\u670d\u5668\u200b\u652f\u63f4\u200b\u7684\u200b\u529f\u80fd\u96c6\u200b\u7684\u200b\u8cc7\u8a0a\u200b \u200b\u548c\u200b\u5176\u4ed6\u200b\u76f8\u95dc\u200b\u529f\u80fd\u200b\u3002</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"capabilities\": {\n    \"com.example.custom.ratelimit\": {\n      \"max_requests_per_hour\": 600\n    },\n    \"m.change_password\": {\n      \"enabled\": false\n    },\n    \"m.room_versions\": {\n      \"available\": {\n        \"1\": \"stable\",\n        \"2\": \"stable\",\n        \"3\": \"unstable\",\n        \"test-version\": \"unstable\"\n      },\n      \"default\": \"1\"\n    }\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#51-mchange_password","title":"5.1 m.change_password\u200b\u80fd\u529b","text":"<p>\u200b\u6b64\u200b\u529f\u80fd\u200b\u5177\u6709\u200b\u55ae\u500b\u200b\u6a19\u8a8c\u200b,\u200b\u6307\u793a\u200b\u662f\u5426\u200b\u6216\u200b \u200b\u4e0d\u662f\u200b\u4f7f\u7528\u8005\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b API \u200b\u4f86\u200b\u66f4\u6539\u200b\u5176\u200b \u200b\u5bc6\u78bc\u200b\u3002\u200b\u5982\u679c\u200b\u4e0d\u200b\u5b58\u5728\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u5047\u5b9a\u200b\u5bc6\u78bc\u200b\u66f4\u6539\u200b \u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b API \u200b\u5be6\u73fe\u200b\u3002\u200b\u5982\u679c\u200b\u5b58\u5728\u200b,\u200b\u5ba2\u6236\u200b\u61c9\u200b\u5c0a\u91cd\u200b \u200b\u529f\u80fd\u200b\u7684\u200b\u6a19\u8a8c\u200b,\u200b\u4e26\u5728\u200b\u7528\u6236\u200b\u7121\u6cd5\u200b\u6642\u200b\u5411\u200b\u4f7f\u7528\u8005\u200b\u6307\u793a\u200b \u200b\u4ee5\u200b\u66f4\u6539\u200b\u5176\u5bc6\u78bc\u200b\u3002enabled/account/passwordenabled</p> <p>\u200b\u529f\u80fd\u200b API \u200b\u5c0d\u6b64\u200b\u529f\u80fd\u200b\u7684\u200b\u56de\u61c9\u200b\u793a\u4f8b\u200b\u5982\u4e0b\u200b:</p> <pre><code>{\n  \"capabilities\": {\n    \"m.change_password\": {\n      \"enabled\": false\n    }\n  }\n}\n\n</code></pre>"},{"location":"chat/client_server/#52-mroom_versions","title":"5.2 m.room_versions\u200b\u80fd\u529b","text":"<p>\u200b\u6b64\u200b\u529f\u80fd\u200b\u63cf\u8ff0\u200b\u9810\u8a2d\u200b\u548c\u200b\u53ef\u7528\u200b\u7684\u200b\u623f\u9593\u200b\u7248\u672c\u200b a \u200b\u4f3a\u670d\u5668\u200b\u652f\u63f4\u200b,\u200b\u4ee5\u53ca\u200b\u7a69\u200b\u5b9a\u6027\u200b\u7d1a\u5225\u200b\u3002\u200b\u5ba2\u6236\u200b\u61c9\u200b\u4f7f\u7528\u200b \u200b\u6b64\u200b\u529f\u80fd\u200b,\u200b\u4ee5\u200b\u78ba\u5b9a\u200b\u662f\u5426\u200b\u9700\u8981\u200b\u9f13\u52f5\u200b\u4f7f\u7528\u8005\u200b \u200b\u5347\u7d1a\u200b\u4ed6\u5011\u200b\u7684\u200b\u623f\u9593\u200b\u3002</p> <p>\u200b\u529f\u80fd\u200b API \u200b\u5c0d\u6b64\u200b\u529f\u80fd\u200b\u7684\u200b\u56de\u61c9\u200b\u793a\u4f8b\u200b\u5982\u4e0b\u200b:</p> <pre><code>{\n  \"capabilities\": {\n    \"m.room_versions\": {\n      \"default\": \"1\",\n      \"available\": {\n        \"1\": \"stable\",\n        \"2\": \"stable\",\n        \"3\": \"unstable\",\n        \"custom-version\": \"unstable\"\n      }\n    }\n  }\n}\n</code></pre> <p>\u200b\u6b64\u200b\u529f\u80fd\u200b\u53cd\u6620\u200b\u4e86\u200b\u623f\u9593\u200b\u7684\u200b\u76f8\u540c\u200b\u9650\u5236\u200b \u200b\u7528\u200b\u65bc\u200b\u63cf\u8ff0\u200b\u54ea\u4e9b\u200b\u7248\u672c\u200b\u7684\u200b\u7248\u672c\u200b \u200b\u7a69\u5b9a\u200b\u548c\u200b\u4e0d\u200b\u7a69\u5b9a\u200b\u3002\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u5047\u5b9a\u200b\u7248\u672c\u200b\u70ba\u200b \u3002\u200b\u4efb\u4f55\u200b\u672a\u660e\u200b\u78ba\u6a19\u200b\u8a18\u70ba\u200b\u7248\u672c\u200b\u7684\u200b\u7248\u672c\u200b\u90fd\u5c07\u200b\u88ab\u200b\u8996\u70ba\u200b \u3002\u200b\u4f8b\u5982\u200b,\u200b\u4e00\u500b\u200b \u200b\u5217\u70ba\u200b\u7684\u200b\u7248\u672c\u200b\u61c9\u200b\u88ab\u200b\u8996\u70ba\u200b \u3002defaultstablestableavailableunstablefuture-stableunstable</p> <p>\u200b\u7248\u672c\u200b\u662f\u200b\u4f3a\u670d\u5668\u200b\u7528\u200b\u65bc\u200b\u5275\u200b\u5efa\u65b0\u200b\u7248\u672c\u200b\u7684\u200b\u7248\u672c\u200b \u200b\u623f\u9593\u200b\u3002\u200b\u7528\u6236\u200b\u7aef\u61c9\u200b\u9f13\u52f5\u200b\u5177\u6709\u200b\u8db3\u5920\u200b\u8a31\u53ef\u6b0a\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u5728\u200b \u200b\u623f\u9593\u5c07\u200b\u4ed6\u5011\u200b\u7684\u200b\u623f\u9593\u200b\u5347\u7d1a\u200b\u5230\u200b\u623f\u9593\u200b\u6642\u200b\u7684\u200b\u7248\u672c\u200b \u200b\u4f7f\u7528\u200b\u7248\u672c\u200b\u3002defaultdefaultunstable</p> <p>\u200b\u5982\u679c\u200b\u672a\u200b\u5217\u51fa\u200b\u6b64\u200b\u529f\u80fd\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u7528\u4f5c\u200b \u200b\u9ed8\u200b\u8a8d\u4e14\u200b\u552f\u4e00\u200b\u7a69\u5b9a\u200b\u7684\u200b\u623f\u9593\u200b\u7248\u672c\u200b\u3002\"1\"available</p>"},{"location":"chat/client_server/#53-mset_displayname","title":"5.3 m.set_displayname\u200b\u80fd\u529b","text":"<p>\u200b\u6b64\u200b\u529f\u80fd\u200b\u5177\u6709\u200b\u55ae\u500b\u200b\u6a19\u8a8c\u200b ,\u200b\u7528\u200b\u65bc\u200b\u6307\u793a\u200b\u4f7f\u7528\u8005\u200b\u662f\u5426\u200b \u200b\u80fd\u5920\u200b\u901a\u904e\u200b\u914d\u7f6e\u200b\u6a94\u7d42\u200b\u7d50\u9ede\u200b\u66f4\u6539\u200b\u81ea\u5df1\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u3002\u200b\u6848\u4f8b\u200b \u200b\u7981\u7528\u200b\u53ef\u80fd\u200b\u5305\u62ec\u200b\u5f9e\u200b\u5916\u90e8\u200b\u6a19\u8b58\u200b/\u200b\u76ee\u9304\u200b\u6620\u5c04\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b \u200b\u670d\u52d9\u200b,\u200b\u4f8b\u5982\u200bLDAP\u3002enabled</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u9019\u8207\u200b\u529f\u80fd\u200b\u5f88\u200b\u597d\u200b\u5730\u200b\u5339\u914d\u200b\u3002m.set_avatar_url</p> <p>\u200b\u5982\u679c\u200b\u672a\u200b\u5217\u51fa\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u5047\u5b9a\u200b\u7528\u6236\u200b\u80fd\u5920\u200b\u66f4\u6539\u200b\u5176\u200b \u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u3002</p> <p>\u200b\u529f\u80fd\u200b API \u200b\u5c0d\u6b64\u200b\u529f\u80fd\u200b\u7684\u200b\u56de\u61c9\u200b\u793a\u4f8b\u200b\u5982\u4e0b\u200b:</p> <pre><code>{\n  \"capabilities\": {\n    \"m.set_displayname\": {\n      \"enabled\": false\n    }\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#54-mset_avatar_url","title":"5.4 m.set_avatar_url\u200b\u80fd\u529b","text":"<p>\u200b\u6b64\u200b\u529f\u80fd\u200b\u5177\u6709\u200b\u55ae\u500b\u200b\u6a19\u8a8c\u200b ,\u200b\u7528\u200b\u65bc\u200b\u6307\u793a\u200b\u4f7f\u7528\u8005\u200b\u662f\u5426\u200b \u200b\u80fd\u5920\u200b\u901a\u904e\u200b\u914d\u7f6e\u200b\u6a94\u7aef\u9ede\u200b\u66f4\u6539\u200b\u81ea\u5df1\u200b\u7684\u200b\u982d\u50cf\u200b\u3002\u200b\u6848\u4f8b\u200b \u200b\u7981\u7528\u200b\u53ef\u80fd\u200b\u5305\u62ec\u200b\u5f9e\u200b\u5916\u90e8\u200b\u6a19\u8b58\u200b/\u200b\u76ee\u9304\u200b\u6620\u5c04\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b \u200b\u670d\u52d9\u200b,\u200b\u4f8b\u5982\u200bLDAP\u3002enabled</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u9019\u8207\u200b\u529f\u80fd\u200b\u5f88\u200b\u597d\u200b\u5730\u200b\u5339\u914d\u200b\u3002m.set_displayname</p> <p>\u200b\u5982\u679c\u200b\u672a\u200b\u5217\u51fa\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u5047\u5b9a\u200b\u7528\u6236\u200b\u80fd\u5920\u200b\u66f4\u6539\u200b\u5176\u200b \u200b\u5316\u8eab\u200b\u3002</p> <p>\u200b\u529f\u80fd\u200b API \u200b\u5c0d\u6b64\u200b\u529f\u80fd\u200b\u7684\u200b\u56de\u61c9\u200b\u793a\u4f8b\u200b\u5982\u4e0b\u200b:</p> <pre><code>{\n  \"capabilities\": {\n    \"m.set_avatar_url\": {\n      \"enabled\": false\n    }\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#55-m3pid_changes","title":"5.5 m.3pid_changes\u200b\u80fd\u529b","text":"<p>\u200b\u6b64\u200b\u529f\u80fd\u200b\u5177\u6709\u200b\u55ae\u500b\u200b\u6a19\u8a8c\u200b ,\u200b\u7528\u200b\u65bc\u200b\u6307\u793a\u200b\u4f7f\u7528\u8005\u200b\u662f\u5426\u200b \u200b\u80fd\u5920\u200b\u6dfb\u52a0\u200b,\u200b\u522a\u9664\u200b\u6216\u200b\u66f4\u6539\u200b\u5176\u200b\u5e33\u6236\u200b\u4e0a\u200b\u7684\u200b 3PID \u200b\u95dc\u806f\u200b\u3002\u200b\u6ce8\u610f\u200b \u200b\u9019\u50c5\u200b\u5f71\u97ff\u200b\u4f7f\u7528\u8005\u200b\u4f7f\u7528\u200b\u7ba1\u7406\u200b\u54e1\u200b\u806f\u200b\u7e6b\u200b\u8cc7\u200b\u8a0a\u200b API \u200b\u7684\u200b\u80fd\u529b\u200b,\u200b\u800c\u200b\u4e0d\u6703\u200b\u5f71\u97ff\u200b\u8eab\u4efd\u200b\u670d\u52d9\u516c\u958b\u200b\u7684\u200b\u7d42\u7d50\u9ede\u200b\u3002\u200b\u7981\u7528\u200b\u6848\u4f8b\u200b \u200b\u53ef\u80fd\u200b\u5305\u62ec\u200b\u5f9e\u200b\u5916\u90e8\u200b\u6a19\u8b58\u200b/\u200b\u76ee\u9304\u200b\u670d\u52d9\u200b\u6620\u5c04\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b, \u200b\u4f8b\u5982\u200bLDAP\u3002enabled</p> <p>\u200b\u5982\u679c\u200b\u672a\u200b\u5217\u51fa\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u5047\u5b9a\u200b\u7528\u6236\u200b\u80fd\u5920\u200b\u4fee\u6539\u200b\u5176\u200b 3PID \u200b\u5354\u6703\u200b\u3002</p> <p>\u200b\u529f\u80fd\u200b API \u200b\u5c0d\u6b64\u200b\u529f\u80fd\u200b\u7684\u200b\u56de\u61c9\u200b\u793a\u4f8b\u200b\u5982\u4e0b\u200b:</p> <pre><code>{\n  \"capabilities\": {\n    \"m.3pid_changes\": {\n      \"enabled\": false\n    }\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#6","title":"6 \u200b\u6ffe\u6ce2","text":"<p>\u200b\u904e\u6ffe\u5668\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u5275\u5efa\u200b,\u200b\u4e26\u200b\u53ef\u4ee5\u200b\u4f5c\u70ba\u200b\u53c3\u6578\u200b\u50b3\u200b\u905e\u7d66\u200b \u200b\u8fd4\u56de\u200b\u4e8b\u4ef6\u200b\u7684\u200b API\u3002\u200b\u9019\u4e9b\u200b\u7be9\u9078\u5668\u200b\u66f4\u6539\u200b\u5f9e\u200b\u8fd4\u56de\u200b\u7684\u200b\u6578\u64da\u200b \u200b\u90a3\u4e9b\u200b API\u3002\u200b\u4e26\u975e\u200b\u6240\u6709\u200b API \u200b\u90fd\u200b\u63a5\u53d7\u200b\u7be9\u9078\u5668\u200b\u3002</p>"},{"location":"chat/client_server/#61","title":"6.1 \u200b\u61f6\u4eba\u200b\u88dd\u8f09\u5ba4\u200b\u6210\u54e1","text":"<p>\u200b\u6703\u54e1\u200b\u6d3b\u52d5\u200b\u901a\u5e38\u200b\u9700\u8981\u200b\u5927\u91cf\u200b\u8cc7\u6e90\u4f9b\u200b\u5ba2\u6236\u200b\u8ddf\u200b\u8e64\u200b\u3002 \u200b\u70ba\u200b\u4e86\u200b\u6e1b\u5c11\u200b\u4f7f\u7528\u200b\u7684\u200b\u8cc7\u6e90\u200b\u6578\u91cf\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u555f\u7528\u200b \u200b\u623f\u9593\u200b\u6210\u54e1\u200b\u7684\u200b'\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b'\u3002\u3002\u200b\u901a\u904e\u200b\u9019\u6a23\u200b\u505a\u200b,\u200b\u4f3a\u670d\u5668\u200b\u5c07\u5617\u8a66\u200b \u200b\u50c5\u767c\u200b\u9001\u200b\u8207\u200b\u5ba2\u6236\u200b\u76f8\u95dc\u200b\u7684\u200b\u6703\u54e1\u200b\u6d3b\u52d5\u200b\u3002</p> <p>\u200b\u91cd\u8981\u200b\u7684\u200b\u662f\u200b\u8981\u200b\u4e86\u89e3\u200b\u5ef6\u9072\u8f09\u200b\u5165\u4e26\u200b\u4e0d\u662f\u200b\u70ba\u200b\u4e86\u200b \u200b\u5b8c\u7f8e\u200b\u7684\u200b\u512a\u5316\u200b,\u200b\u4e26\u4e14\u200b\u4f3a\u670d\u5668\u200b\u53ef\u80fd\u200b\u4e0d\u5207\u200b\u5be6\u969b\u200b \u200b\u7cbe\u78ba\u200b\u8a08\u7b97\u200b\u54ea\u4e9b\u200b\u6210\u54e1\u8cc7\u683c\u200b\u4e8b\u4ef6\u200b\u8207\u200b\u5ba2\u6236\u200b\u76f8\u95dc\u200b\u3002 \u200b\u56e0\u6b64\u200b,\u200b\u4f3a\u670d\u5668\u200b\u767c\u9001\u200b\u5197\u9918\u200b\u6210\u54e1\u8cc7\u683c\u200b\u662f\u200b\u6709\u6548\u200b\u7684\u200b \u200b\u4e8b\u4ef6\u200b\u5411\u200b\u5ba2\u6236\u200b\u7aef\u200b\u7c21\u5316\u200b\u5be6\u73fe\u200b,\u200b\u5118\u200b\u7ba1\u200b\u9019\u200b\u7a2e\u200b\u5197\u200b\u9918\u200b \u200b\u61c9\u76e1\u200b\u53ef\u80fd\u200b\u6e1b\u5c11\u200b\u4ee5\u7bc0\u200b\u7701\u983b\u200b\u5bec\u200b\u3002</p> <p>\u200b\u5728\u200b\u7be9\u6aa2\u200b\u7a0b\u5f0f\u200b\u65b9\u9762\u200b,\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u662f\u200b\u901a\u904e\u200b\u5728\u200b \uff08\u200b\u6216\u200b \u200b\u50c5\u200b\u5927\u5c0f\u200b\u5beb\u200b\uff09\u3002\u200b\u555f\u7528\u200b\u5f8c\u200b,\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u611f\u77e5\u200b\u7aef\u9ede\u200b\uff08\u200b\u8acb\u200b\u53c3\u95b1\u200b \u200b\u4ee5\u4e0b\u200b\uff09\u200b\u5c07\u50c5\u200b\u5305\u62ec\u200b OF \u200b\u6d3b\u52d5\u200b\u7684\u200b\u6703\u54e1\u200b\u6d3b\u52d5\u200b \u200b\u5305\u542b\u200b\u5728\u200b\u56de\u61c9\u200b\u4e2d\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u5982\u679c\u200b\u5ba2\u6236\u200b\u7aef\u200b\u767c\u51fa\u200b\u555f\u7528\u200b\u4e86\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u7684\u200b\u8acb\u6c42\u200b,\u200b\u5247\u200b\u4f3a\u670d\u5668\u200b\u5c07\u50c5\u200b\u8fd4\u56de\u200b \u200b\u6642\u9593\u200b\u7dda\u200b\u4e2d\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u4e8b\u4ef6\u200b,\u200b\u800c\u200b\u4e0d\u662f\u200b\u5168\u90e8\u200b \u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u6210\u54e1\u200b\u3002lazy_load_membersRoomEventFilterStateFilter/syncsender/syncsender</p> <p>\u200b\u5728\u200b\u8655\u7406\u200b\u4e00\u7cfb\u5217\u200b\u4e8b\u4ef6\u200b\u6642\u200b\uff08\u200b\u4f8b\u5982\u200b,\u200b\u901a\u904e\u200b\u8ff4\u200b\u5708\u200b\u6216\u200b \u200b\u5206\u9801\u200b \uff09,\u200b\u5c0d\u200b\u65bc\u200b\u4e8b\u4ef6\u200b\u584a\u200b\u4f86\u200b\u8aaa\u200b\u5f88\u5e38\u898b\u200b \u200b\u5e8f\u5217\u200b\u4ee5\u200b\u5171\u7528\u200b\u4e00\u7d44\u985e\u200b\u4f3c\u7684\u200b\u5bc4\u4ef6\u200b\u8005\u200b\u3002\u200b\u800c\u200b\u4e0d\u662f\u200b\u56de\u61c9\u200b \u200b\u5c07\u9019\u4e9b\u200b\u767c\u9001\u65b9\u200b\u7684\u200b\u91cd\u200b\u8907\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u4e8b\u4ef6\u200b\u767c\u200b\u9001\u5230\u200b \u200b\u7528\u6236\u200b\u7aef\u200b,\u200b\u4f3a\u670d\u5668\u200b\u53ef\u80fd\u200b\u6703\u200b\u5047\u8a2d\u200b\u5ba2\u6236\u200b\u7aef\u6703\u200b\u8a18\u4f4f\u200b\u6210\u54e1\u8cc7\u683c\u200b \u200b\u5df2\u767c\u200b\u9001\u200b\u7684\u200b\u4e8b\u4ef6\u200b,\u200b\u4e26\u9078\u64c7\u200b\u8df3\u904e\u200b\u767c\u9001\u200b \u200b\u6703\u54e1\u8cc7\u683c\u200b\u672a\u200b\u66f4\u6539\u200b\u7684\u200b\u6210\u54e1\u8cc7\u683c\u200b\u6d3b\u52d5\u200b\u3002\u200b\u9019\u4e9b\u200b \u200b\u7a31\u70ba\u200b'\u200b\u5197\u9918\u200b\u6210\u54e1\u8cc7\u683c\u200b\u4e8b\u4ef6\u200b'\u3002\u3002\u200b\u5ba2\u6236\u200b\u53ef\u4ee5\u200b\u8981\u6c42\u200b \u200b\u5197\u9918\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u4e8b\u4ef6\u200b\u59cb\u7d42\u200b\u5305\u542b\u200b\u5728\u200b\u56de\u61c9\u200b\u4e2d\u200b,\u200b\u65b9\u6cd5\u200b\u662f\u200b\u5728\u200b\u7be9\u9078\u5668\u200b\u4e2d\u200b\u8a2d\u7f6e\u200b\u70ba\u200b true\u3002/sync/messagesinclude_redundant_members</p> <p>\u200b\u4f7f\u7528\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u7684\u200b\u9810\u671f\u200b\u6a21\u5f0f\u200b\u76ee\u524d\u200b\u70ba\u200b:</p> <ul> <li>\u200b\u7528\u6236\u200b\u7aef\u200b\u5728\u200b\u555f\u7528\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u57f7\u884c\u200b\u521d\u59cb\u200b /sync,\u200b\u4e26\u4e14\u200b \u200b\u50c5\u200b\u63a5\u6536\u200b\u8207\u200b\u7684\u200b\u767c\u9001\u65b9\u200b\u76f8\u95dc\u200b\u7684\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u4e8b\u4ef6\u200b \u200b\u5b83\u200b\u63a5\u6536\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002</li> <li>\u200b\u652f\u6301\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u5236\u8868\u200b\u5143\u200b\u88dc\u5168\u200b\u6216\u200b\u5176\u4ed6\u200b\u529f\u80fd\u200b\u7684\u200b\u7528\u6236\u200b\u7aef\u200b \u200b\u9700\u8981\u200b\u5feb\u901f\u200b\u8a2a\u554f\u200b\u623f\u9593\u200b\u5167\u200b\u6240\u6709\u200b\u6210\u54e1\u200b\u7684\u200b\u64cd\u4f5c\u200b \u200b\u61c9\u70ba\u200b\u7576\u524d\u200b\u9078\u5b9a\u200b\u7684\u200b\u804a\u5929\u5ba4\u200b\u8abf\u7528\u200b /members,\u200b\u4e26\u5c07\u200b\u53c3\u6578\u200b\u8a2d\u7f6e\u200b\u70ba\u200b /sync \u200b\u56de\u61c9\u200b\u7684\u200b from \u200b\u4ee4\u724c\u200b\u3002\u200b\u6210\u54e1\u200b\u6e05\u55ae\u200b \u200b\u56e0\u70ba\u200b\u623f\u9593\u200b\u7136\u5f8c\u7531\u570b\u5bb6\u200b\u5728\u200b\u96a8\u5f8c\u7dad\u8b77\u200b \u200b\u589e\u91cf\u200b/\u200b\u540c\u6b65\u200b\u56de\u61c9\u200b\u3002?at</li> <li>\u200b\u4e0d\u200b\u652f\u63f4\u200b\u88fd\u200b\u8868\u200b\u7b26\u200b\u88dc\u200b\u5168\u200b\u7684\u200b\u7528\u200b\u6236\u200b\u7aef\u200b\u53ef\u80fd\u200b\u6703\u62c9\u5165\u200b \u200b\u4efb\u610f\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u914d\u7f6e\u200b\u6a94\u200b\uff08\u200b\u4f8b\u5982\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b,\u200b\u9375\u5165\u200b \u200b\u901a\u77e5\u200b\uff09\u200b\u901a\u904e\u200b\u67e5\u8a62\u200b\u623f\u9593\u200b\u72c0\u614b\u200b\u6216\u200b ./profile</li> </ul> <p>\u200b\u652f\u63f4\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u623f\u9593\u200b\u6210\u54e1\u200b\u7684\u200b\u7576\u524d\u200b\u7d42\u7d50\u9ede\u200b\u5305\u62ec\u200b:</p> <ul> <li>/sync</li> <li>/rooms//messages <li>/rooms//context/{eventId}"},{"location":"chat/client_server/#62","title":"6.2 \u200b\u4ecb\u9762\u200b\u9023\u63a5\u9ede","text":""},{"location":"chat/client_server/#post-_matrixclientv3useruseridfilter","title":"POST /_matrix/client/v3/user/{userId}/filter","text":"<p>\u200b\u5c07\u65b0\u200b\u7684\u200b\u7be9\u9078\u5668\u200b\u5b9a\u7fa9\u4e0a\u200b\u8f09\u200b\u5230\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u3002 \u200b\u8fd4\u56de\u200b\u7be9\u9078\u5668\u200bID,\u200b\u8a72\u200bID\u200b\u53ef\u200b\u5728\u200b\u5c07\u4f86\u200b\u7684\u200b\u8acb\u6c42\u200b\u4e2d\u200b\u4f7f\u7528\u200b \u200b\u9650\u5236\u200b\u5c07\u200b\u54ea\u4e9b\u200b\u4e8b\u4ef6\u200b\u8fd4\u56de\u200b\u5230\u200b\u7528\u6236\u200b\u7aef\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"event_fields\": [\n    \"type\",\n    \"content\",\n    \"sender\"\n  ],\n  \"event_format\": \"client\",\n  \"presence\": {\n    \"not_senders\": [\n      \"@alice:example.com\"\n    ],\n    \"types\": [\n      \"m.presence\"\n    ]\n  },\n  \"room\": {\n    \"ephemeral\": {\n      \"not_rooms\": [\n        \"!726s6s6q:example.com\"\n      ],\n      \"not_senders\": [\n        \"@spam:example.com\"\n      ],\n      \"types\": [\n        \"m.receipt\",\n        \"m.typing\"\n      ]\n    },\n    \"state\": {\n      \"not_rooms\": [\n        \"!726s6s6q:example.com\"\n      ],\n      \"types\": [\n        \"m.room.*\"\n      ]\n    },\n    \"timeline\": {\n      \"limit\": 10,\n      \"not_rooms\": [\n        \"!726s6s6q:example.com\"\n      ],\n      \"not_senders\": [\n        \"@spam:example.com\"\n      ],\n      \"types\": [\n        \"m.room.message\"\n      ]\n    }\n  }\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"filter_id\": \"66696p746572\"\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3useruseridfilterfilterid","title":"GET /_matrix/client/v3/user/{userId}/filter/{filterId}","text":"<p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"event_fields\": [\n    \"type\",\n    \"content\",\n    \"sender\"\n  ],\n  \"event_format\": \"client\",\n  \"presence\": {\n    \"not_senders\": [\n      \"@alice:example.com\"\n    ],\n    \"types\": [\n      \"m.presence\"\n    ]\n  },\n  \"room\": {\n    \"ephemeral\": {\n      \"not_rooms\": [\n        \"!726s6s6q:example.com\"\n      ],\n      \"not_senders\": [\n        \"@spam:example.com\"\n      ],\n      \"types\": [\n        \"m.receipt\",\n        \"m.typing\"\n      ]\n    },\n    \"state\": {\n      \"not_rooms\": [\n        \"!726s6s6q:example.com\"\n      ],\n      \"types\": [\n        \"m.room.*\"\n      ]\n    },\n    \"timeline\": {\n      \"limit\": 10,\n      \"not_rooms\": [\n        \"!726s6s6q:example.com\"\n      ],\n      \"not_senders\": [\n        \"@spam:example.com\"\n      ],\n      \"types\": [\n        \"m.room.message\"\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#7","title":"7 \u200b\u4e8b\u4ef6","text":"<p>\u200b\u7528\u6236\u200b\u7aef\u200b-\u200b\u4f3a\u670d\u5668\u200b API \u200b\u516c\u958b\u200b\u7684\u200b\u5c0d\u200b\u8a71\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b\u6a21\u578b\u200b\u53ef\u4ee5\u200b \u200b\u88ab\u8996\u200b\u70ba\u200b\u4e8b\u4ef6\u200b\u6e05\u55ae\u200b\u3002\u200b\u4f3a\u670d\u5668\u200b'\u200b\u884c\u5316\u200b'\u200b\u4e86\u200b \u200b\u5c07\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6700\u7d42\u200b\u4e00\u81f4\u6027\u200b\u4e8b\u4ef6\u200b\u5716\u8f49\u63db\u200b\u70ba\u200b\"\u200b\u4e8b\u4ef6\u200b\u6d41\u200b\" \u200b\u4efb\u4f55\u200b\u7d66\u5b9a\u200b\u7684\u200b\u6642\u9593\u9ede\u200b:</p> <pre><code>[E0]-&gt;[E1]-&gt;[E2]-&gt;[E3]-&gt;[E4]-&gt;[E5]\n</code></pre>"},{"location":"chat/client_server/#71","title":"7.1 \u200b\u623f\u9593\u200b\u6d3b\u52d5\u200b\u7684\u200b\u985e\u578b","text":"<p>\u200b\u6703\u8b70\u5ba4\u200b\u6d3b\u52d5\u200b\u5206\u70ba\u200b\u5169\u985e\u200b:</p> <ul> <li>\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b:\u200b\u9019\u4e9b\u200b\u662f\u200b\u66f4\u65b0\u200b\u623f\u9593\u200b\uff08\u200b\u4f8b\u5982\u200b\u623f\u9593\u200b\uff09\u200b\u5143\u6578\u64da\u200b\u72c0\u614b\u200b\u7684\u200b\u4e8b\u4ef6\u200b \u200b\u4e3b\u984c\u200b,\u200b\u623f\u9593\u200b\u6210\u54e1\u8cc7\u683c\u200b\u7b49\u200b\uff09\u3002\u200b\u72c0\u614b\u200b\u7531\u200b\u4e8b\u4ef6\u200b\u5143\u7d44\u200b\u548c\u200b .\u200b\u5177\u6709\u200b\u76f8\u540c\u200b\u9375\u5143\u7d44\u200b\u7684\u200b\u623f\u9593\u200b\u4e2d\u200b\u7684\u200b\u72c0\u614b\u200b\u5c07\u662f\u200b \u200b\u8986\u84cb\u200b\u3002typestate_key</li> <li>\u200b\u6d88\u606f\u200b\u4e8b\u4ef6\u200b:\u200b\u9019\u4e9b\u200b\u4e8b\u4ef6\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u623f\u9593\u200b\u4e2d\u200b\u7684\u200b\u66ab\u6642\u6027\u200b'\u200b\u4e00\u6b21\u6027\u200b'\u200b\u6d3b\u52d5\u200b:\u200b\u901a\u5e38\u200b\u662f\u200b\u901a\u4fe1\u200b,\u200b\u4f8b\u5982\u200b\u767c\u9001\u200b\u5373\u200b\u6642\u200b\u6d88\u606f\u200b\u6216\u200b\u8a2d\u7f6e\u200b \u200b\u7db2\u8def\u200b\u96fb\u8a71\u200b\u547c\u53eb\u200b\u3002</li> </ul> <p>\u200b\u6b64\u898f\u7bc4\u200b\u6982\u8ff0\u200b\u4e86\u200b\u5e7e\u500b\u200b\u4e8b\u4ef6\u200b,\u200b\u6240\u6709\u200b\u4e8b\u4ef6\u200b\u90fd\u200b\u5177\u6709\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b \u200b\u524d\u7db4\u200b\u3002\uff08\u200b\u6709\u95dc\u200b m. \u200b\u4e8b\u4ef6\u200b,\u200b\u8acb\u200b\u53c3\u95b1\u200b\u623f\u9593\u200b\u4e8b\u4ef6\u200b \u200b\u898f\u7bc4\u200b\u3002\u200b\u4f46\u662f\u200b,\u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u6dfb\u52a0\u200b\u81ea\u5df1\u200b\u7684\u200b\u985e\u578b\u200b \u200b\u4e8b\u4ef6\u200b,\u200b\u9019\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b \u200b\u4ee5\u4e0b\u200b\u5404\u7bc0\u200b\u3002\u200b\u5982\u679c\u200b\u6dfb\u52a0\u200b\u4e86\u200b\u65b0\u200b\u4e8b\u4ef6\u200b,\u200b\u5247\u200b\u4e8b\u4ef6\u200b\u9375\u61c9\u200b \u200b\u9075\u5faa\u200b Java \u200b\u5305\u200b\u547d\u540d\u200b\u7d04\u5b9a\u200b,\u200b\u4f8b\u5982\u200b .\u200b\u9019\u53ef\u78ba\u200b\u4fdd\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b\u5408\u9069\u200b \u200b\u70ba\u200b\u6bcf\u500b\u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u547d\u540d\u200b,\u200b\u4e26\u200b\u964d\u4f4e\u200b\u885d\u7a81\u200b\u98a8\u96aa\u200b\u3002m.typecom.example.myapp.event</p>"},{"location":"chat/client_server/#72","title":"7.2 \u200b\u6703\u8b70\u5ba4\u200b\u4e8b\u4ef6\u200b\u683c\u5f0f","text":"<p>\u200b\u804a\u5929\u5ba4\u200b\u4e8b\u4ef6\u200b\u7684\u200b'\u200b\u806f\u5408\u200b'\u200b\u683c\u5f0f\u200b,\u200b\u7531\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u5728\u200b\u5167\u90e8\u200b\u4f7f\u7528\u200b \u200b\u548c\u200b\u901a\u904e\u200b\u4f3a\u670d\u5668\u200b-\u200b\u4f3a\u670d\u5668\u200bAPI\u200b\u7684\u200b\u5bb6\u5ead\u200b\u4f3a\u670d\u5668\u200b\u4e4b\u9593\u200b,\u200b\u53d6\u6c7a\u200b\u65bc\u200b\"\u200b\u623f\u9593\u200b\" \u200b\u7248\u672c\u200b\"\u200b\u5728\u200b\u623f\u9593\u200b\u4f7f\u7528\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u8acb\u200b\u53c3\u95b1\u200b\u5b9a\u7fa9\u200b \u200b\u623f\u9593\u200b\u7248\u672c\u200b 1 \u200b\u548c\u200b\u623f\u9593\u200b\u7248\u672c\u200b 3.</p> <p>\u200b\u4f46\u662f\u200b,\u200b\u77e9\u9663\u200b\u7528\u6236\u200b\u7aef\u200b\u9047\u5230\u200b\u6b64\u200b\u4e8b\u4ef6\u200b\u662f\u200b\u4e0d\u200b\u5c0b\u5e38\u200b\u7684\u200b \u200b\u683c\u5f0f\u200b\u3002\u200b\u76f8\u53cd\u200b,\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u8ca0\u8cac\u5c07\u200b\u4e8b\u4ef6\u200b\u8f49\u63db\u200b\u70ba\u200b \u200b\u683c\u5f0f\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b,\u200b\u4ee5\u4fbf\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u8f15\u200b\u9b06\u200b\u89e3\u6790\u200b\u5b83\u5011\u200b\u3002</p>"},{"location":"chat/client_server/#clientevent","title":"ClientEvent","text":"<p>\u200b\u4e8b\u4ef6\u200b\u5f9e\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u8fd4\u56de\u200b\u5230\u200b\u7528\u200b\u6236\u7aef\u200b\u6642\u7528\u200b\u65bc\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u683c\u5f0f\u200b \u200b\u901a\u904e\u200b\u7528\u6236\u200b\u7aef\u200b-\u200b\u4f3a\u670d\u5668\u200b API,\u200b\u6216\u200b\u900f\u904e\u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u670d\u52d9\u200b API \u200b\u767c\u200b\u9001\u5230\u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u670d\u52d9\u200b\u3002</p> <p>\u200b\u4f8b\u5b50\u200b</p> <pre><code>{\n  \"content\": {\n    \"membership\": \"join\"\n  },\n  \"event_id\": \"$26RqwJMLw-yds1GAH_QxjHRC1Da9oasK0e5VLnck_45\",\n  \"origin_server_ts\": 1632489532305,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"@user:example.org\",\n  \"type\": \"m.room.member\",\n  \"unsigned\": {\n    \"age\": 1567437,\n    \"redacted_because\": {\n      \"content\": {\n        \"reason\": \"spam\"\n      },\n      \"event_id\": \"$Nhl3rsgHMjk-DjMJANawr9HHAhLg4GcoTYrSiYYGqEE\",\n      \"origin_server_ts\": 1632491098485,\n      \"redacts\": \"$26RqwJMLw-yds1GAH_QxjHRC1Da9oasK0e5VLnck_45\",\n      \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n      \"sender\": \"@moderator:example.org\",\n      \"type\": \"m.room.redaction\",\n      \"unsigned\": {\n        \"age\": 1257\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#73","title":"7.3 \u200b\u525d\u96e2\u200b\u72c0\u614b","text":"<p>\u200b\u525d\u96e2\u200b\u72c0\u614b\u200b\u662f\u200b\u623f\u9593\u200b\u72c0\u614b\u200b\u7684\u200b\u7c21\u5316\u200b\u8996\u5716\u200b,\u200b\u65e8\u5728\u200b\u8aac\u200b\u660e\u200b \u200b\u6f5b\u5728\u200b\u7684\u200b\u7d30\u200b\u6728\u5de5\u200b\u8b58\u5225\u200b\u623f\u9593\u200b\u3002\u200b\u5b83\u200b\u7531\u200b\u4e00\u7d44\u200b\u6709\u9650\u200b\u7684\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u7d44\u6210\u200b \u200b\u5b83\u5011\u200b\u672c\u8eab\u200b\u7d93\u904e\u200b\u7c21\u5316\u200b\u4ee5\u200b\u6e1b\u5c11\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6578\u64da\u91cf\u200b\u3002</p> <p>\u200b\u525d\u96e2\u200b\u7684\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u53ea\u80fd\u200b\u5b58\u5728\u200b, \u200b\u548c\u200b\u5c6c\u6027\u200b\u3002sendertypestate_keycontent</p> <p>\u200b\u525d\u96e2\u200b\u72c0\u614b\u200b\u901a\u5e38\u200b\u51fa\u73fe\u200b\u5728\u200b\u9080\u200b\u8acb\u200b,\u200b\u6572\u9580\u200b\u548c\u200b\u5176\u4ed6\u200b\u4f4d\u7f6e\u200b,\u200b\u5176\u4e2d\u200b \u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u5728\u200b\u53ef\u7528\u200b\u689d\u4ef6\u200b\uff08\u200b\u4f8b\u5982\u200b\u53d7\u9650\u200b\u623f\u9593\u200b\uff09\u200b\u4e0b\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b\u3002</p> <p>\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u50c5\u200b\u5728\u200b\u6c92\u200b\u6709\u200b \u200b\u9032\u5165\u200b\u623f\u9593\u200b\u7684\u200b\u6b63\u5e38\u200b\u72c0\u614b\u200b\u3002\u200b\u4e00\u65e6\u200b\u623f\u9593\u200b\u7684\u200b\u72c0\u614b\u200b\u70ba\u200b \u200b\u53ef\u7528\u200b,\u200b\u61c9\u200b\u4e1f\u68c4\u200b\u6240\u6709\u200b\u525d\u96e2\u200b\u72c0\u614b\u200b\u3002\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\u4e0b\u200b \u200b\u7528\u6236\u200b\u7aef\u200b\u5177\u6709\u200b\u623f\u9593\u200b\u7684\u200b\u5b58\u6a94\u200b\u72c0\u614b\u200b\uff08\u200b\u4f8b\u5982\u200b\u88ab\u200b\u8e22\u200b\u540e\u200b\uff09 \u200b\u4e26\u4e14\u200b\u7528\u6236\u200b\u7aef\u6b63\u200b\u5728\u200b\u63a5\u6536\u200b\u623f\u9593\u200b\u7684\u200b\u525d\u96e2\u200b\u72c0\u614b\u200b,\u200b\u4f8b\u5982\u200b\u4f86\u200b\u81ea\u200b \u200b\u9080\u8acb\u200b\u6216\u200b\u6572\u9580\u200b,\u200b\u5247\u525d\u200b\u96e2\u72c0\u614b\u200b\u61c9\u200b\u512a\u5148\u200b,\u200b\u76f4\u5230\u200b \u200b\u53ef\u4ee5\u200b\u5f9e\u200b\u806f\u63a5\u200b\u4e2d\u200b\u7372\u53d6\u200b\u65b0\u200b\u72c0\u614b\u200b\u3002</p> <p>\u200b\u525d\u96e2\u200b\u72c0\u614b\u200b\u61c9\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u90e8\u5206\u200b\u6216\u200b\u5168\u90e8\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b,\u200b\u9019\u4e9b\u200b\u4e8b\u4ef6\u200b \u200b\u61c9\u76e1\u200b\u53ef\u80fd\u200b\u8868\u793a\u200b\u70ba\u200b\u525d\u96e2\u200b\u7684\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b:</p> <ul> <li>m.room.create</li> <li>m.room.name</li> <li>m.room.avatar</li> <li>m.room.topic</li> <li>m.room.join_rules</li> <li>m.room.canonical_alias</li> <li>m.room.encryption</li> </ul>"},{"location":"chat/client_server/#74","title":"7.4 \u200b\u5927\u5c0f\u200b\u9650\u5236","text":"<p>\u200b\u683c\u5f0f\u5316\u200b\u6642\u200b,\u200b\u5b8c\u6574\u200b\u4e8b\u4ef6\u200b\u4e0d\u5f97\u200b\u5927\u200b\u65bc\u200b65536\u200b\u4f4d\u5143\u7d44\u200b \u200b\u4f7f\u7528\u200b\u806f\u5408\u200b\u4e8b\u4ef6\u200b\u683c\u5f0f\u200b,\u200b\u5305\u62ec\u200b\u4efb\u4f55\u200b \u200b\u7c3d\u540d\u200b,\u200b\u4e26\u7de8\u78bc\u200b\u70ba\u200b\u898f\u7bc4\u200b \u200b\u5091\u68ee\u200b\u3002</p> <p>\u200b\u6bcf\u500b\u200b\u91d1\u200b\u9470\u200b\u5927\u5c0f\u200b\u9084\u6709\u200b\u5176\u4ed6\u200b\u9650\u5236\u200b:</p> <ul> <li>sender\u200b\u4e0d\u5f97\u200b\u8d85\u904e\u200b255\u200b\u4f4d\u5143\u7d44\u200b\uff08\u200b\u5305\u62ec\u200b\u57df\u200b\uff09\u3002</li> <li>room_id\u200b\u4e0d\u5f97\u200b\u8d85\u904e\u200b 255 \u200b\u500b\u5b57\u7bc0\u200b\u3002</li> <li>state_key\u200b\u4e0d\u5f97\u200b\u8d85\u904e\u200b 255 \u200b\u500b\u5b57\u7bc0\u200b\u3002</li> <li>type\u200b\u4e0d\u5f97\u200b\u8d85\u904e\u200b 255 \u200b\u500b\u5b57\u7bc0\u200b\u3002</li> <li>event_id\u200b\u4e0d\u5f97\u200b\u8d85\u904e\u200b 255 \u200b\u500b\u5b57\u7bc0\u200b\u3002</li> </ul> <p>\u200b\u67d0\u4e9b\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b\u5177\u6709\u200b\u6307\u5b9a\u200b\u7684\u200b\u5176\u4ed6\u200b\u5927\u5c0f\u200b\u9650\u5236\u200b \u200b\u5728\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u63cf\u8ff0\u200b\u4e2d\u200b\u3002\u200b\u9644\u52a0\u200b\u9375\u200b\u6c92\u200b\u6709\u200b\u9650\u5236\u200b\u5176\u4ed6\u200b \u200b\u800c\u200b\u4e0d\u662f\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u7e3d\u200b 64 KiB \u200b\u9650\u5236\u200b\u6240\u200b\u6697\u793a\u200b\u7684\u200b\u3002</p>"},{"location":"chat/client_server/#75","title":"7.5 \u200b\u6703\u8b70\u5ba4\u200b\u6d3b\u52d5","text":"<p>\u200b\u6b64\u898f\u7bc4\u200b\u6982\u8ff0\u200b\u4e86\u200b\u5e7e\u7a2e\u200b\u6a19\u6e96\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b,\u200b\u6240\u6709\u200b\u9019\u4e9b\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b\u90fd\u200b \u200b\u524d\u7db4\u200b\u70ba\u200bm.</p>"},{"location":"chat/client_server/#mroomcanonical_alias","title":"m.room.canonical_alias","text":"<p>\u200b\u6b64\u200b\u4e8b\u4ef6\u200b\u7528\u200b\u65bc\u200b\u901a\u77e5\u200b\u804a\u5929\u5ba4\u200b\u61c9\u200b\u4f7f\u7528\u200b\u54ea\u500b\u200b\u5225\u540d\u200b \u200b\u88ab\u200b\u8a8d\u70ba\u200b\u662f\u200b\u898f\u7bc4\u200b\u7684\u200b,\u200b\u4ee5\u53ca\u200b\u5176\u4ed6\u200b\u54ea\u4e9b\u200b\u5225\u540d\u200b\u6307\u5411\u200b\u623f\u9593\u200b\u3002 \u200b\u9019\u200b\u53ef\u4ee5\u200b\u7528\u200b\u65bc\u200b\u986f\u793a\u200b\u76ee\u7684\u200b\u6216\u4f5c\u200b\u70ba\u200b\u5c0d\u200b\u5225\u540d\u200b\u7528\u6236\u200b\u7684\u200b\u5efa\u8b70\u200b \u200b\u7528\u200b\u65bc\u200b\u5ba3\u50b3\u200b\u548c\u200b\u8a2a\u554f\u200b\u623f\u9593\u200b\u3002</p> <p>\u200b\u4f8b\u5b50\u200b</p> <pre><code>{\n  \"content\": {\n    \"alias\": \"#somewhere:localhost\",\n    \"alt_aliases\": [\n      \"#somewhere:example.org\",\n      \"#myroom:example.com\"\n    ]\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"\",\n  \"type\": \"m.room.canonical_alias\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#mroomcreate","title":"m.room.create","text":"<p>\u200b\u9019\u662f\u200b\u6703\u200b\u8b70\u5ba4\u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e00\u200b\u500b\u200b\u4e8b\u4ef6\u200b,\u200b\u7121\u6cd5\u200b\u66f4\u6539\u200b\u3002\u200b\u5b83\u200b\u5145\u7576\u200b\u6240\u6709\u200b\u5176\u4ed6\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6839\u200b\u3002</p> <pre><code>{\n  \"content\": {\n    \"creator\": \"@example:example.org\",\n    \"m.federate\": true,\n    \"predecessor\": {\n      \"event_id\": \"$something:example.org\",\n      \"room_id\": \"!oldroom:example.org\"\n    },\n    \"room_version\": \"1\"\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"\",\n  \"type\": \"m.room.create\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#mroomjoin_rules","title":"m.room.join_rules","text":"<p>\u200b\u623f\u9593\u200b\u53ef\u4ee5\u200b\u5177\u6709\u200b\u4ee5\u4e0b\u200b\u540d\u7a31\u200b\u4e4b\u4e00\u200b:</p> <ul> <li>public- \u200b\u4efb\u4f55\u4eba\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u52a0\u5165\u200b\u623f\u9593\u200b,\u200b\u7121\u9700\u200b\u4e8b\u5148\u200b\u57f7\u884c\u200b\u4efb\u4f55\u200b\u64cd\u4f5c\u200b\u3002</li> <li>invite- \u200b\u7528\u6236\u200b\u5fc5\u9808\u200b\u9996\u5148\u200b\u6536\u5230\u200b\u6703\u8b70\u5ba4\u200b\u4e2d\u200b\u5df2\u6709\u200b\u4eba\u54e1\u200b\u7684\u200b\u9080\u200b\u8acb\u200b \u200b\u70ba\u200b\u4e86\u200b\u52a0\u5165\u200b\u3002</li> <li>knock- \u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u8acb\u6c42\u200b\u9080\u8acb\u200b\u52a0\u5165\u200b\u623f\u9593\u200b\u3002\u200b\u4ed6\u5011\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5141\u8a31\u200b\uff08\u200b\u9080\u8acb\u200b\uff09 \u200b\u6216\u200b\u62d2\u7d55\u200b\uff08\u200b\u8e22\u200b/\u200b\u7981\u6b62\u200b\uff09\u200b\u8a2a\u554f\u200b\u3002\u200b\u5426\u5247\u200b,\u200b\u9700\u8981\u200b\u9080\u8acb\u200b\u4f7f\u7528\u8005\u200b\u52a0\u5165\u200b\u3002\u200b\u53ea\u200b \u200b\u53ef\u200b\u5728\u200b\u652f\u6301\u200b\u6572\u9580\u200b\u7684\u200b\u623f\u9593\u200b\u4f7f\u7528\u200b\u3002</li> <li>restricted- \u200b\u4efb\u4f55\u200b\u80fd\u5920\u200b\u6eff\u8db3\u200b\u81f3\u5c11\u200b\u4e00\u500b\u200b\u5141\u8a31\u200b\u689d\u4ef6\u200b\u7684\u200b\u4eba\u200b\u90fd\u200b\u662f\u200b \u200b\u7121\u9700\u200b\u4e8b\u5148\u200b\u64cd\u4f5c\u200b\u5373\u53ef\u200b\u52a0\u5165\u200b\u623f\u9593\u200b\u3002\u200b\u5426\u5247\u200b,\u200b\u9700\u8981\u200b\u9080\u8acb\u200b\u3002 \u200b\u50c5\u9069\u200b\u7528\u200b\u65bc\u200b\u652f\u63f4\u200b\u52a0\u5165\u200b\u898f\u5247\u200b\u7684\u200b\u623f\u9593\u200b\u3002</li> <li>knock_restricted- \u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u63d0\u4f9b\u200b\u7684\u200b\u76f8\u540c\u200b\u529f\u80fd\u200b\u8acb\u6c42\u200b\u9080\u8acb\u200b \u200b\u901a\u904e\u200b\u52a0\u5165\u200b\u898f\u5247\u200b,\u200b\u6216\u8005\u200b\u53ef\u4ee5\u200b\u5728\u200b\u6eff\u8db3\u200b\u5141\u8a31\u200b\u689d\u4ef6\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u5617\u8a66\u200b\u52a0\u5165\u200b \u200b\u6839\u64da\u200b\u806f\u63a5\u200b\u898f\u5247\u200b\u3002\u200b\u50c5\u9069\u200b\u7528\u200b\u65bc\u200b\u652f\u63f4\u200b\u52a0\u5165\u200b\u898f\u5247\u200b\u7684\u200b\u623f\u9593\u200b\u3002knockrestricted</li> <li>private- \u200b\u4fdd\u7559\u200b\u800c\u200b\u4e0d\u200b\u5be6\u65bd\u200b\u3002\u200b\u6c92\u6709\u200b\u91cd\u8981\u200b\u610f\u7fa9\u200b\u3002</li> </ul> <pre><code>{\n  \"content\": {\n    \"join_rule\": \"public\"\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"\",\n  \"type\": \"m.room.join_rules\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre> <pre><code>{\n  \"content\": {\n    \"allow\": [\n      {\n        \"room_id\": \"!other:example.org\",\n        \"type\": \"m.room_membership\"\n      },\n      {\n        \"room_id\": \"!elsewhere:example.org\",\n        \"type\": \"m.room_membership\"\n      }\n    ],\n    \"join_rule\": \"restricted\"\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"\",\n  \"type\": \"m.room.join_rules\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#mroommember","title":"m.room.member","text":"<p>\u200b\u8abf\u6574\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u7528\u6236\u200b\u7684\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u72c0\u614b\u200b\u3002\u200b\u6700\u597d\u200b\u5728\u200b\u57f7\u884c\u200b\u6210\u54e1\u8cc7\u683c\u200b\u64cd\u4f5c\u200b\u6642\u200b\u4f7f\u7528\u200b\u6210\u54e1\u8cc7\u683c\u200b API\uff08 \u200b\u7b49\u200b\uff09,\u200b\u800c\u200b\u4e0d\u662f\u200b\u76f4\u63a5\u200b\u8abf\u6574\u200b\u72c0\u614b\u200b,\u200b\u56e0\u70ba\u200b\u5b58\u5728\u200b\u4e00\u7d44\u200b\u53d7\u9650\u5236\u200b\u7684\u200b\u6709\u6548\u200b\u8f49\u63db\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u4f7f\u7528\u8005\u200b A \u200b\u7121\u6cd5\u200b\u5f37\u5236\u200b\u4f7f\u7528\u8005\u200b B \u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b,\u200b\u4e26\u4e14\u200b\u5617\u8a66\u200b\u76f4\u63a5\u200b\u5f37\u5236\u200b\u66f4\u6539\u200b\u6b64\u72c0\u614b\u200b\u5c07\u5931\u6557\u200b\u3002/rooms//invite <p>\u200b\u6307\u5b9a\u200b\u4e86\u200b\u4ee5\u4e0b\u200b\u6210\u54e1\u8cc7\u683c\u200b\u72c0\u614b\u200b:</p> <ul> <li>invite- \u200b\u4f7f\u7528\u8005\u200b\u5df2\u200b\u88ab\u200b\u9080\u200b\u8acb\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b,\u200b\u4f46\u200b\u5c1a\u672a\u200b\u52a0\u5165\u200b\u8a72\u200b\u804a\u5929\u5ba4\u200b\u3002\u200b\u5728\u200b\u52a0\u5165\u200b\u4e4b\u524d\u200b,\u200b\u4ed6\u5011\u200b\u4e0d\u5f97\u200b\u53c3\u52a0\u6703\u200b\u8b70\u5ba4\u200b\u3002</li> <li>join- \u200b\u4f7f\u7528\u8005\u200b\u5df2\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b\uff08\u200b\u53ef\u80fd\u200b\u5728\u200b\u63a5\u53d7\u200b\u9080\u8acb\u200b\u540e\u200b\uff09,\u200b\u4e26\u200b\u53ef\u80fd\u200b\u53c3\u8207\u200b\u5176\u4e2d\u200b\u3002</li> <li>leave- \u200b\u7528\u6236\u200b\u66fe\u7d93\u200b\u52a0\u5165\u200b\u623f\u9593\u200b,\u200b\u4f46\u5f8c\u4f86\u200b\u96e2\u958b\u200b\u4e86\u200b\uff08\u200b\u53ef\u80fd\u200b\u662f\u200b\u51fa\u200b\u65bc\u200b\u9078\u64c7\u200b,\u200b\u4e5f\u200b\u53ef\u80fd\u200b\u662f\u200b\u88ab\u200b\u8e22\u200b\uff09\u3002</li> <li>ban- \u200b\u4f7f\u7528\u8005\u200b\u5df2\u200b\u88ab\u200b\u7981\u6b62\u200b\u9032\u5165\u200b\u804a\u5929\u5ba4\u200b,\u200b\u4e26\u4e14\u200b\u4e0d\u518d\u200b\u88ab\u200b\u5141\u8a31\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b,\u200b\u76f4\u5230\u200b\u4ed6\u5011\u200b\u88ab\u200b\u53d6\u6d88\u200b\u7981\u6b62\u200b\u9032\u5165\u200b\u804a\u5929\u5ba4\u200b\uff08\u200b\u901a\u904e\u200b\u5c07\u5176\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u72c0\u614b\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u975e\u200b \u200b\u503c\u200b\uff09\u3002ban</li> <li>knock- \u200b\u4f7f\u7528\u8005\u200b\u5df2\u200b\u6572\u200b\u623f\u9593\u200b,\u200b\u8acb\u6c42\u200b\u5141\u8a31\u200b\u53c3\u200b\u8207\u200b\u3002\u200b\u5728\u200b\u52a0\u5165\u200b\u4e4b\u524d\u200b,\u200b\u4ed6\u5011\u200b\u4e0d\u5f97\u200b\u53c3\u52a0\u6703\u200b\u8b70\u5ba4\u200b\u3002</li> </ul> <p>\u200b\u5982\u679c\u200b\u6b64\u9080\u200b\u8acb\u200b\u662f\u200b\u4e8b\u4ef6\u200b\u4e26\u4e14\u200b\u662f\u200b\u4e8b\u4ef6\u200b\u7684\u5f8c\u7e8c\u200b\u4e8b\u4ef6\u200b,\u200b\u5247\u8a2d\u200b\u7f6e\u200b\u8a72\u200b\u5c6c\u6027\u200b,\u200b\u5426\u5247\u200b\u4e0d\u200b\u5b58\u5728\u200b\u3002third_party_inviteinvitem.room.third_party_invite</p> <p>\u200b\u6b64\u200b\u4e8b\u4ef6\u200b\u9084\u200b\u53ef\u80fd\u200b\u5305\u542b\u200b\u4e8b\u4ef6\u200b\u6578\u64da\u200b\u4e2d\u200b\u7684\u200b\u9375\u200b\u3002 \u200b\u5982\u679c\u200b\u5b58\u5728\u200b,\u200b\u5247\u200b\u5305\u542b\u200b\u4e00\u7d44\u200b\u525d\u96e2\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b,\u200b\u4ee5\u200b\u8aac\u200b\u660e\u200b\u63a5\u6536\u5668\u200b\u8b58\u5225\u200b\u623f\u9593\u200b\u3002invite_room_stateunsigned</p> <p>\u200b\u5957\u7528\u200b\u6210\u54e1\u8cc7\u683c\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u7531\u200b .\u200b\u5728\u200b\u67d0\u4e9b\u200b\u60c5\u6cc1\u200b\u4e0b\u200b, \u200b\u548c\u200b\u53ef\u80fd\u200b\u4e0d\u200b\u5339\u914d\u200b - \u200b\u9019\u200b\u53ef\u80fd\u200b\u88ab\u200b\u89e3\u91cb\u200b\u70ba\u200b\u5f71\u97ff\u200b \u200b\u7528\u6236\u200b\u7684\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u72c0\u614b\u200b\u3002state_keysenderstate_keysenderstate_key</p> <p>\u200b\u7d66\u5b9a\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b TO \u200b\u53ef\u80fd\u200b\u6703\u200b\u96a8\u6642\u9593\u200b\u800c\u200b\u8b8a\u5316\u200b\u3002\u200b\u4e0b\u200b\u8868\u5217\u51fa\u200b\u4e86\u200b\u5404\u7a2e\u200b\u66f4\u6539\u200b \u200b\u96a8\u6642\u9593\u200b\u63a8\u79fb\u200b\u4ee5\u53ca\u200b\u5ba2\u6236\u200b\u7aef\u200b\u548c\u200b\u4f3a\u670d\u5668\u200b\u5fc5\u9808\u200b\u5982\u4f55\u200b\u89e3\u91cb\u200b\u9019\u4e9b\u200b\u66f4\u6539\u200b\u3002\u200b\u53ef\u4ee5\u200b\u6aa2\u7d22\u200b\u4ee5\u524d\u200b\u7684\u200b\u6703\u54e1\u8cc7\u683c\u200b \u200b\u5f9e\u200b\u4e8b\u4ef6\u200b\u4e0a\u200b\u7684\u200b\u7269\u4ef6\u200b\u3002\u200b\u5982\u679c\u200b\u4e0d\u200b\u5b58\u5728\u200b,\u200b\u5247\u5fc5\u9808\u200b\u5047\u5b9a\u200b\u4f7f\u7528\u8005\u200b\u4ee5\u524d\u200b\u7684\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b \u200b\u5982\u200b\u3002membershipprev_contentleave</p> <pre><code>{\n  \"content\": {\n    \"avatar_url\": \"mxc://example.org/SEsfnsuifSDFSSEF\",\n    \"displayname\": \"Alice Margatroid\",\n    \"membership\": \"join\",\n    \"reason\": \"Looking for support\"\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"@alice:example.org\",\n  \"type\": \"m.room.member\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre> <pre><code>{\n  \"content\": {\n    \"avatar_url\": \"mxc://example.org/SEsfnsuifSDFSSEF\",\n    \"displayname\": \"Alice Margatroid\",\n    \"membership\": \"invite\",\n    \"reason\": \"Looking for support\"\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"@alice:example.org\",\n  \"type\": \"m.room.member\",\n  \"unsigned\": {\n    \"age\": 1234,\n    \"invite_room_state\": [\n      {\n        \"content\": {\n          \"name\": \"Example Room\"\n        },\n        \"sender\": \"@bob:example.org\",\n        \"state_key\": \"\",\n        \"type\": \"m.room.name\"\n      },\n      {\n        \"content\": {\n          \"join_rule\": \"invite\"\n        },\n        \"sender\": \"@bob:example.org\",\n        \"state_key\": \"\",\n        \"type\": \"m.room.join_rules\"\n      }\n    ]\n  }\n}\n</code></pre> <pre><code>{\n  \"content\": {\n    \"avatar_url\": \"mxc://example.org/SEsfnsuifSDFSSEF\",\n    \"displayname\": \"Alice Margatroid\",\n    \"join_authorised_via_users_server\": \"@bob:other.example.org\",\n    \"membership\": \"join\"\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"@alice:example.org\",\n  \"type\": \"m.room.member\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre> <pre><code>{\n  \"content\": {\n    \"avatar_url\": \"mxc://example.org/SEsfnsuifSDFSSEF\",\n    \"displayname\": \"Alice Margatroid\",\n    \"membership\": \"knock\",\n    \"reason\": \"Looking for support\"\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"@alice:example.org\",\n  \"type\": \"m.room.member\",\n  \"unsigned\": {\n    \"age\": 1234,\n    \"knock_room_state\": [\n      {\n        \"content\": {\n          \"name\": \"Example Room\"\n        },\n        \"sender\": \"@bob:example.org\",\n        \"state_key\": \"\",\n        \"type\": \"m.room.name\"\n      },\n      {\n        \"content\": {\n          \"join_rule\": \"knock\"\n        },\n        \"sender\": \"@bob:example.org\",\n        \"state_key\": \"\",\n        \"type\": \"m.room.join_rules\"\n      }\n    ]\n  }\n}\n</code></pre> <pre><code>{\n  \"content\": {\n    \"avatar_url\": \"mxc://example.org/SEsfnsuifSDFSSEF\",\n    \"displayname\": \"Alice Margatroid\",\n    \"membership\": \"invite\",\n    \"third_party_invite\": {\n      \"display_name\": \"alice\",\n      \"signed\": {\n        \"mxid\": \"@alice:example.org\",\n        \"signatures\": {\n          \"magic.forest\": {\n            \"ed25519:3\": \"fQpGIW1Snz+pwLZu6sTy2aHy/DYWWTspTJRPyNp0PKkymfIsNffysMl6ObMMFdIJhk6g6pwlIqZ54rxo8SLmAg\"\n          }\n        },\n        \"token\": \"abc123\"\n      }\n    }\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"@alice:example.org\",\n  \"type\": \"m.room.member\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#mroompower_levels","title":"m.room.power_levels","text":"<p>\u200b\u6b64\u200b\u4e8b\u4ef6\u200b\u6307\u5b9a\u200b\u7528\u6236\u200b\u5fc5\u9808\u200b\u5177\u6709\u200b\u7684\u200b\u6700\u4f4e\u200b\u7d1a\u5225\u200b\u624d\u80fd\u200b\u57f7\u884c\u200b \u200b\u67d0\u4e9b\u200b\u52d5\u4f5c\u200b\u3002\u200b\u5b83\u9084\u200b\u6307\u5b9a\u200b\u6a94\u5ba4\u200b\u4e2d\u200b\u6bcf\u500b\u200b\u7528\u6236\u200b\u7684\u200b\u7d1a\u200b\u5225\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b a \u200b\u5728\u200b\u6e05\u55ae\u200b\u4e2d\u200b,\u200b\u5247\u200b\u5177\u6709\u200b \u200b\u76f8\u95dc\u200b\u7684\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u3002\u200b\u5426\u5247\u200b,\u200b\u5b83\u5011\u200b\u5177\u6709\u200b\u9ed8\u200b\u8a8d\u7d1a\u5225\u200b\u3002\u200b\u5982\u679c\u200b\u672a\u200b\u63d0\u4f9b\u200b,\u200b\u5247\u200b\u5047\u5b9a\u200b\u70ba\u200b 0. \u200b\u5982\u679c\u200b\u804a\u5929\u5ba4\u200b\u4e0d\u200b\u5305\u542b\u200b\u4efb\u4f55\u200b\u4e8b\u4ef6\u200b,\u200b\u5247\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u5efa\u7acb\u200b\u8005\u200b\u5177\u6709\u200b \u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u70ba\u200b 100,\u200b\u6240\u6709\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u70ba\u200b 0\u3002user_idusersuser_idusers_defaultusers_defaultm.room.power_levels</p> <p>\u200b\u767c\u9001\u200b\u7279\u5b9a\u200b\u4e8b\u4ef6\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u7d1a\u200b\u5225\u200b\u7531\u200b\u548c\u200b\u63a7\u5236\u200b\u3002\u200b\u5982\u679c\u200b\u5728\u200b \u200b\u4e2d\u200b\u6307\u5b9a\u200b\u4e86\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b,\u200b\u5247\u7528\u6236\u200b\u5fc5\u9808\u200b\u81f3\u5c11\u200b\u5177\u6709\u200b\u6307\u5b9a\u200b\u7684\u200b\u7d1a\u200b\u5225\u200b,\u200b\u4ee5\u4fbf\u200b \u200b\u767c\u9001\u200b\u8a72\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u5982\u679c\u200b\u672a\u200b\u63d0\u4f9b\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b,\u200b\u5247\u9810\u200b\u8a2d\u70ba\u200b for \u200b\u6d88\u606f\u200b\u4e8b\u4ef6\u200b\u548c\u200b state \u200b\u4e8b\u4ef6\u200b\u3002eventsstate_defaultevents_defaulteventsevents_defaultstate_default</p> <p>\u200b\u5982\u679c\u200b\u4e8b\u4ef6\u200b\u4e2d\u200b\u6c92\u200b\u6709\u200bstate_default,\u200b\u6216\u8005\u200b m.room.power_levels\u200b\u6c92\u6709\u200b\u4e8b\u4ef6\u200b,\u200b\u662f\u200b m.room.power_levels 50\u3002 \u200b\u5982\u679c\u200b\u4e8b\u4ef6\u200b\u4e2d\u200b\u6c92\u200b\u6709\u200bstate_default, \u200b\u6216\u8005\u200b\u6c92\u6709\u200b\u4e8b\u4ef6\u200bevents_default,\u200b\u5247\u70ba\u200b 0\u3002</p> <p>\u200b\u9080\u8acb\u200b\u4f7f\u7528\u8005\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b,\u200b\u5c07\u200b\u4f7f\u7528\u8005\u200b\u8e22\u200b\u51fa\u200b \u200b\u804a\u5929\u5ba4\u200b,\u200b\u7981\u6b62\u200b\u4f7f\u7528\u8005\u200b\u9032\u5165\u200b\u804a\u5929\u5ba4\u200b\u6216\u200b\u7de8\u8f2f\u200b\u5176\u4ed6\u200b\u7528\u6236\u200b\u767c\u9001\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u662f\u200b \u200b\u5206\u5225\u200b\u7531\u200b, , \u200b\u548c\u200b\u5b9a\u7fa9\u200b\u3002\u200b\u95dc\u5361\u200b ,\u200b\u5982\u679c\u200b\u672a\u200b\u5728\u200b\u4e8b\u4ef6\u200b\u4e2d\u200b\u6307\u5b9a\u200b,\u200b\u6216\u8005\u200b\u6a94\u5ba4\u200b\u4e0d\u200b\u5305\u542b\u200b\u4efb\u4f55\u200b\u4e8b\u4ef6\u200b,\u200b\u5247\u9810\u200b\u8a2d\u70ba\u200b 50\u3002 \u200b\u5728\u200b\u4efb\u4e00\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u5747\u200b\u9810\u8a2d\u200b\u70ba\u200b 0\u3002invite kick ban redact kick ban redact m.room.power_levels m.room.power_levels invite</p> <p>\u200b\u8afe\u7dad\u200b\u514b\u65af\u200b</p> <p>\u200b\u529f\u7387\u200b\u96fb\u5e73\u503c\u200b\u7684\u200b\u5141\u200b\u8a31\u7bc4\u570d\u200b\u70ba\u200b , \u200b\u6309\u7167\u200b\u898f\u7bc4\u200b JSON \u200b\u898f\u7bc4\u200b\u7684\u200b\u8981\u6c42\u200b\u3002[-(253)+1, (253)-1]</p> <pre><code>{\n  \"content\": {\n    \"ban\": 50,\n    \"events\": {\n      \"m.room.name\": 100,\n      \"m.room.power_levels\": 100\n    },\n    \"events_default\": 0,\n    \"invite\": 50,\n    \"kick\": 50,\n    \"notifications\": {\n      \"room\": 20\n    },\n    \"redact\": 50,\n    \"state_default\": 50,\n    \"users\": {\n      \"@example:localhost\": 100\n    },\n    \"users_default\": 0\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"state_key\": \"\",\n  \"type\": \"m.room.power_levels\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#751","title":"7.5.1 \u200b\u6b77\u53f2\u200b\u4e8b\u4ef6","text":"<p>\u200b\u4f46\u662f\u200b,\u200b\u547d\u540d\u200b\u7a7a\u9593\u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e9b\u200b\u4e8b\u4ef6\u200b\u53ef\u80fd\u200b\u6703\u200b\u51fa\u73fe\u200b\u5728\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u200b \u200b\u5b83\u5011\u200b\u5728\u200b\u6b64\u200b\u7248\u672c\u200b\u7684\u200b\u898f\u7bc4\u4e2d\u200b\u6c92\u6709\u200b\u91cd\u8981\u200b\u610f\u7fa9\u200b\u3002 \u200b\u5b83\u5011\u200b\u662f\u200b:m.</p> <ul> <li>m.room.aliases</li> </ul> <p>\u200b\u8a72\u200b\u898f\u7bc4\u200b\u7684\u200b\u5148\u524d\u200b\u7248\u672c\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u6709\u95dc\u200b\u9019\u4e9b\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u8cc7\u8a0a\u200b \u200b\u4e8b\u4ef6\u200b\u3002</p>"},{"location":"chat/client_server/#76","title":"7.6 \u200b\u540c\u6b65","text":"<p>\u200b\u82e5\u8981\u200b\u8b80\u53d6\u200b\u4e8b\u4ef6\u200b,\u200b\u9810\u671f\u200b\u7684\u200b\u64cd\u4f5c\u200b\u6d41\u662f\u200b\u7528\u6236\u200b\u7aef\u200b\u9996\u5148\u200b \u200b\u8abf\u7528\u200b\u4e0d\u5e36\u200b\u53c3\u6578\u200b\u7684\u200b /sync API\u3002\u200b\u9019\u5c07\u200b\u8fd4\u56de\u200b \u200b\u6bcf\u500b\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u6700\u65b0\u6d88\u606f\u200b\u4e8b\u4ef6\u200b,\u200b\u4ee5\u53ca\u200b \u200b\u8fd4\u56de\u200b\u6642\u9593\u200b\u7dda\u200b\u958b\u982d\u200b\u7684\u200b\u623f\u9593\u200b\u3002\u200b\u56de\u61c9\u9084\u200b\u5305\u62ec\u200b\u4e00\u500b\u200b\u5b57\u200b\u6bb5\u200b,\u200b\u8a72\u5b57\u200b\u6bb5\u200b\u61c9\u200b\u5728\u200b\u4e0b\u6b21\u200b\u8abf\u7528\u200b \u200b\u6642\u200b\u7528\u4f5c\u200b\u53c3\u6578\u200b\u7684\u200b\u503c\u200b\u3002\u200b\u6700\u200b\u5f8c\u200b,\u200b\u56de\u61c9\u200b\u5305\u62ec\u200b: \u200b\u5c0d\u200b\u65bc\u200b\u6bcf\u500b\u200b\u623f\u9593\u200b,\u200b\u4e00\u500b\u200b\u5b57\u200b\u6bb5\u200b,\u200b\u8a72\u5b57\u6bb5\u200b\u53ef\u4ee5\u200b\u4f5c\u70ba\u200b\u53c3\u6578\u200b\u50b3\u200b\u905e\u7d66\u200b /rooms//messages API \u200b\u4ee5\u200b\u63d0\u524d\u200b\u6aa2\u7d22\u200b \u200b\u6d88\u606f\u200b\u3002sincenext_batchsince/syncprev_batchstart <p>\u200b\u4f8b\u5982\u200b,\u200b\u4e00\u500b\u200b\u8acb\u6c42\u200b\u53ef\u80fd\u200b\u6703\u200b\u8fd4\u56de\u200b\u4e00\u500b\u200b\u7531\u200b\u56db\u500b\u200b\u4e8b\u4ef6\u200b\u7d44\u6210\u200b\u7684\u200b\u7bc4\u570d\u200b,\u200b\u4e26\u5728\u200b\u7d66\u5b9a\u200b\u7684\u200b\u623f\u9593\u200b\u5167\u200b,\u200b\u7701\u7565\u200b\u5169\u500b\u200b\u5148\u524d\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u548c\u200b \u3002\u200b\u9019\u200b\u53ef\u4ee5\u200b\u53ef\u8996\u5316\u200b\u5982\u4e0b\u200b:/syncE2E3E4E5E0E1</p> <pre><code>    [E0]-&gt;[E1]-&gt;[E2]-&gt;[E3]-&gt;[E4]-&gt;[E5]\n               ^                      ^\n               |                      |\n         prev_batch: '1-2-3'        next_batch: 'a-b-c'\n</code></pre> <p>\u200b\u901a\u5e38\u200b,\u200b\u5ba2\u6236\u200b\u7aef\u200b\u53ef\u898b\u200b\u7684\u200b\u6240\u6709\u200b\u65b0\u200b\u4e8b\u4ef6\u200b\u90fd\u200b\u5c07\u51fa\u73fe\u200b\u5728\u200b \u200b\u5c0d\u200b API \u200b\u7684\u200b\u56de\u61c9\u200b\u3002\u200b\u4f46\u662f\u200b,\u200b\u5982\u679c\u200b\u5927\u91cf\u200b\u4e8b\u4ef6\u200b \u200b\u5728\u200b\u8abf\u7528\u200b \u200b\u4e4b\u9593\u200b\u5230\u200b\u9054\u200b,\u200b\u8fd4\u56de\u200b'\u200b\u6709\u9650\u200b'\u200b\u6642\u9593\u200b\u7dda\u200b, \u200b\u50c5\u200b\u5305\u542b\u200b\u6700\u65b0\u200b\u7684\u200b\u6d88\u606f\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u72c0\u614b\u200b\"delta\"\u200b\u4e5f\u200b\u662f\u200b \u200b\u8fd4\u56de\u200b,\u200b\u7e3d\u7d50\u200b\u7701\u7565\u200b\u90e8\u5206\u200b\u7684\u200b\u4efb\u4f55\u200b\u72c0\u614b\u200b\u66f4\u6539\u200b \u200b\u6642\u9593\u8ef8\u200b\u3002\u200b\u56e0\u6b64\u200b,\u200b\u5ba2\u6236\u200b\u6700\u7d42\u200b\u53ef\u80fd\u200b\u6703\u200b\u5728\u200b\u5176\u200b\u77e5\u8b58\u200b\u4e0a\u200b\u51fa\u73fe\u200b\"\u200b\u5dee\u8ddd\u200b\" \u200b\u7684\u200b\u6d88\u606f\u200b\u6642\u9593\u200b\u7dda\u200b\u3002\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b /rooms//messages API \u200b\u586b\u5145\u200b\u9019\u4e9b\u200b\u7a7a\u767d\u200b\u3002/sync/sync <p>\u200b\u7e7c\u7e8c\u200b\u6211\u5011\u200b\u7684\u200b\u793a\u4f8b\u200b,\u200b\u5047\u8a2d\u200b\u6211\u5011\u200b\u767c\u51fa\u200b\u7b2c\u4e09\u200b\u500b\u200b\u8acb\u6c42\u200b,\u200b\u8981\u6c42\u200b \u200b\u81ea\u200b\u4e0a\u6b21\u200b\u540c\u6b65\u200b\u4ee5\u4f86\u200b\u7684\u200b\u4e8b\u4ef6\u200b,\u200b\u901a\u904e\u5c07\u200b\u4ee4\u724c\u200b\u4f5c\u70ba\u200b \u200b\u53c3\u6578\u200b\u3002\u200b\u4f3a\u670d\u5668\u200b\u77e5\u9053\u200b\u56db\u500b\u200b\u65b0\u200b\u4e8b\u4ef6\u200b,, \u200b\u548c\u200b ,\u200b\u4f46\u200b\u8a8d\u70ba\u200b\u9019\u592a\u591a\u200b\u4e86\u200b,\u200b\u7121\u6cd5\u200b\u4e00\u6b21\u200b\u5831\u544a\u200b\u3002\u200b\u76f8\u53cd\u200b \u200b\u4f3a\u670d\u5668\u200b\u767c\u9001\u200b\u5305\u542b\u200b\u7684\u200b\u56de\u61c9\u200b,\u200b\u4e26\u4e14\u200b \u200b\u7701\u7565\u200b\u3002\u200b\u9019\u200b\u5f62\u6210\u200b\u4e86\u200b\u4e00\u500b\u200b\u7f3a\u53e3\u200b,\u200b\u6211\u5011\u200b\u53ef\u4ee5\u200b\u5728\u200b\u53ef\u8996\u5316\u200b\u4e2d\u200b\u770b\u5230\u200b:/syncnext_batchx-y-zsinceE7E8E9E10limitedE8E9E10E7</p> <pre><code>                                            | gap |\n                                            | &lt;-&gt; |\n    [E0]-&gt;[E1]-&gt;[E2]-&gt;[E3]-&gt;[E4]-&gt;[E5]-&gt;[E6]-&gt;[E7]-&gt;[E8]-&gt;[E9]-&gt;[E10]\n                                            ^     ^                  ^\n                                            |     |                  |\n                                 since: 'x-y-z'   |                  |\n                                       prev_batch: 'd-e-f'       next_batch: 'u-v-w'\n</code></pre> <p>\u200b\u6709\u9650\u200b\u7684\u200b\u56de\u61c9\u200b\u5305\u62ec\u200b\u4e00\u500b\u200b\u72c0\u614b\u200b\u589e\u91cf\u200b,\u200b\u5b83\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u72c0\u614b\u200b \u200b\u7684\u200b\u623f\u9593\u200b\u5728\u200b\u9593\u200b\u9699\u200b\u4e0a\u200b\u8b8a\u5316\u200b\u3002\u200b\u6b64\u200b\u589e\u91cf\u200b\u8aaa\u660e\u200b\u5982\u4f55\u200b\u69cb\u5efa\u200b\u72c0\u614b\u200b \u200b\u5728\u200b\u5f9e\u200b\u7528\u6236\u200b\u7aef\u200b\u77e5\u9053\u200b\u7684\u200b\u72c0\u614b\u200b\u8fd4\u56de\u200b\u6642\u9593\u200b\u7dda\u200b\uff08\u200b\u5373\u200b\u5728\u200b\uff09\u200b\u4e4b\u524d\u200b \uff08\u200b\u5373\u200b\u5728\u200b \uff09\u3002\u200b\u70ba\u200b\u4e86\u200b\u7e2e\u200b\u5c0f\u200b\u5dee\u8ddd\u200b,\u200b\u5ba2\u6236\u200b\u7aef\u200b\u61c9\u8a72\u200b\u4f7f\u7528\u200b\u67e5\u8a62\u200b\u53c3\u6578\u200b\u548c\u200b \u200b\u5411\u200b /rooms//messages \u200b\u767c\u51fa\u200b\u8acb\u6c42\u200b\u3002E7E6from=x-y-zto=d-e-f"},{"location":"chat/client_server/#get-_matrixclientv3sync","title":"GET /_matrix/client/v3/sync","text":"<p>\u200b\u5c07\u5ba2\u6236\u200b\u7aef\u7684\u200b\u72c0\u614b\u200b\u8207\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u7684\u200b\u6700\u65b0\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u3002 \u200b\u7528\u6236\u200b\u7aef\u200b\u5728\u200b\u9996\u6b21\u200b\u767b\u9304\u200b\u6642\u200b\u4f7f\u7528\u200b\u6b64\u200b API \u200b\u4ee5\u200b\u7372\u53d6\u200b\u521d\u59cb\u200b\u5feb\u7167\u200b \u200b\u7684\u200b\u72c0\u614b\u200b,\u200b\u7136\u5f8c\u7e7c\u7e8c\u200b\u8abf\u7528\u200b\u6b64\u200b API \u200b\u7372\u53d6\u200b \u200b\u589e\u91cf\u200b\u589e\u91cf\u200b\u5230\u200b\u72c0\u614b\u200b,\u200b\u4e26\u200b\u63a5\u6536\u200b\u65b0\u200b\u6d88\u606f\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u200b:\u200b\u6b64\u7aef\u9ede\u200b\u652f\u63f4\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u3002\u200b\u6709\u95dc\u200b\u8a73\u7d30\u200b\u8cc7\u8a0a\u200b,\u200b\u8acb\u200b\u53c3\u95b1\u200b\u7be9\u9078\u200b\u3002\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u6210\u54e1\u50c5\u200b\u5728\u200b\u6b64\u7aef\u9ede\u200b\u4e0a\u200b\u53d7\u200b\u652f\u63f4\u200b\u3002\u200b\u555f\u7528\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u5f8c\u200b,\u200b\u4f3a\u670d\u5668\u200b\u5fc5\u9808\u200b\u5305\u62ec\u200b \u200b\u7576\u200b\u4f7f\u7528\u8005\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b\u6642\u200b\u540c\u6b65\u200b\u81ea\u5df1\u200b\u7684\u200b\u6210\u54e1\u8cc7\u683c\u200b\u4e8b\u4ef6\u200b,\u200b\u6216\u8005\u200b\u7576\u200b\u4f7f\u7528\u8005\u200b \u200b\u8acb\u6c42\u200b\u623f\u9593\u200b\u7684\u200b\u5b8c\u6574\u200b\u72c0\u614b\u200b,\u200b\u4ee5\u5e6b\u52a9\u200b\u767c\u73fe\u200b\u7528\u6236\u200b\u7684\u200b\u982d\u50cf\u200b\u548c\u200b \u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u3002StateFilter</p> <p>\u200b\u6b64\u5916\u200b,\u200b\u8207\u200b\u5176\u4ed6\u200b\u6703\u54e1\u200b\u4e00\u6a23\u200b,\u200b\u4f7f\u7528\u8005\u200b\u81ea\u5df1\u200b\u7684\u200b\u6703\u54e1\u200b\u6d3b\u52d5\u200b\u4e5f\u200b\u7b26\u5408\u200b\u689d\u4ef6\u200b \u200b\u88ab\u200b\u4f3a\u670d\u5668\u200b\u8996\u70ba\u200b\u5197\u9918\u200b\u3002\u200b\u7576\u200b\u540c\u6b65\u200b\u70ba\u200b \u200b\u6642\u200b , \u200b\u4f3a\u670d\u5668\u200b\u5fc5\u9808\u200b\u8fd4\u56de\u200b\u9593\u9699\u200b\u4e2d\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u4e8b\u4ef6\u200b \uff08\u200b\u5728\u200b\u8fd4\u56de\u200b\u7684\u200b\u6642\u9593\u200b\u7dda\u200b\u4e4b\u9593\u200b\u548c\u200b\u958b\u59cb\u200b\u4e4b\u9593\u200b\uff09,\u200b\u7121\u8ad6\u200b \u200b\u81f3\u65bc\u200b\u5b83\u5011\u200b\u662f\u5426\u662f\u200b\u591a\u9918\u200b\u7684\u200b\u3002\u200b\u9019\u53ef\u78ba\u200b\u4fdd\u9023\u63a5\u200b/\u200b\u96e2\u958b\u200b \u200b\u4e26\u4e14\u200b\u5728\u200b\u9593\u200b\u9699\u200b\u671f\u9593\u200b\u767c\u751f\u200b\u7684\u200b\u8f2a\u5ed3\u200b\u8b8a\u5316\u200b\u4e0d\u6703\u200b\u4e1f\u5931\u200b\u3002limitedsince</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u7684\u200b\u9810\u8a2d\u200b\u884c\u70ba\u200b\u662f\u200b\u5305\u62ec\u200b\u6240\u6709\u200b\u6210\u54e1\u8cc7\u683c\u200b \u200b\u4e8b\u4ef6\u200b\u4ee5\u53ca\u200b\u5176\u4ed6\u200b\u72c0\u614b\u200b,\u200b\u7576\u672a\u200b\u555f\u7528\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u6642\u200b\u3002state</p> <p>200\u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"account_data\": {\n    \"events\": [\n      {\n        \"content\": {\n          \"custom_config_key\": \"custom_config_value\"\n        },\n        \"type\": \"org.example.custom.config\"\n      }\n    ]\n  },\n  \"next_batch\": \"s72595_4483_1934\",\n  \"presence\": {\n    \"events\": [\n      {\n        \"content\": {\n          \"avatar_url\": \"mxc://localhost/wefuiwegh8742w\",\n          \"currently_active\": false,\n          \"last_active_ago\": 2478593,\n          \"presence\": \"online\",\n          \"status_msg\": \"Making cupcakes\"\n        },\n        \"sender\": \"@example:localhost\",\n        \"type\": \"m.presence\"\n      }\n    ]\n  },\n  \"rooms\": {\n    \"invite\": {\n      \"!696r7674:example.com\": {\n        \"invite_state\": {\n          \"events\": [\n            {\n              \"content\": {\n                \"name\": \"My Room Name\"\n              },\n              \"sender\": \"@alice:example.com\",\n              \"state_key\": \"\",\n              \"type\": \"m.room.name\"\n            },\n            {\n              \"content\": {\n                \"membership\": \"invite\"\n              },\n              \"sender\": \"@alice:example.com\",\n              \"state_key\": \"@bob:example.com\",\n              \"type\": \"m.room.member\"\n            }\n          ]\n        }\n      }\n    },\n    \"join\": {\n      \"!726s6s6q:example.com\": {\n        \"account_data\": {\n          \"events\": [\n            {\n              \"content\": {\n                \"tags\": {\n                  \"u.work\": {\n                    \"order\": 0.9\n                  }\n                }\n              },\n              \"type\": \"m.tag\"\n            },\n            {\n              \"content\": {\n                \"custom_config_key\": \"custom_config_value\"\n              },\n              \"type\": \"org.example.custom.room.config\"\n            }\n          ]\n        },\n        \"ephemeral\": {\n          \"events\": [\n            {\n              \"content\": {\n                \"user_ids\": [\n                  \"@alice:matrix.org\",\n                  \"@bob:example.com\"\n                ]\n              },\n              \"type\": \"m.typing\"\n            },\n            {\n              \"content\": {\n                \"$1435641916114394fHBLK:matrix.org\": {\n                  \"m.read\": {\n                    \"@rikj:jki.re\": {\n                      \"ts\": 1436451550453\n                    }\n                  },\n                  \"m.read.private\": {\n                    \"@self:example.org\": {\n                      \"ts\": 1661384801651\n                    }\n                  }\n                }\n              },\n              \"type\": \"m.receipt\"\n            }\n          ]\n        },\n        \"state\": {\n          \"events\": [\n            {\n              \"content\": {\n                \"avatar_url\": \"mxc://example.org/SEsfnsuifSDFSSEF\",\n                \"displayname\": \"Alice Margatroid\",\n                \"membership\": \"join\",\n                \"reason\": \"Looking for support\"\n              },\n              \"event_id\": \"$143273582443PhrSn:example.org\",\n              \"origin_server_ts\": 1432735824653,\n              \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n              \"sender\": \"@example:example.org\",\n              \"state_key\": \"@alice:example.org\",\n              \"type\": \"m.room.member\",\n              \"unsigned\": {\n                \"age\": 1234\n              }\n            }\n          ]\n        },\n        \"summary\": {\n          \"m.heroes\": [\n            \"@alice:example.com\",\n            \"@bob:example.com\"\n          ],\n          \"m.invited_member_count\": 0,\n          \"m.joined_member_count\": 2\n        },\n        \"timeline\": {\n          \"events\": [\n            {\n              \"content\": {\n                \"avatar_url\": \"mxc://example.org/SEsfnsuifSDFSSEF\",\n                \"displayname\": \"Alice Margatroid\",\n                \"membership\": \"join\",\n                \"reason\": \"Looking for support\"\n              },\n              \"event_id\": \"$143273582443PhrSn:example.org\",\n              \"origin_server_ts\": 1432735824653,\n              \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n              \"sender\": \"@example:example.org\",\n              \"state_key\": \"@alice:example.org\",\n              \"type\": \"m.room.member\",\n              \"unsigned\": {\n                \"age\": 1234\n              }\n            },\n            {\n              \"content\": {\n                \"body\": \"This is an example text message\",\n                \"format\": \"org.matrix.custom.html\",\n                \"formatted_body\": \"&lt;b&gt;This is an example text message&lt;/b&gt;\",\n                \"msgtype\": \"m.text\"\n              },\n              \"event_id\": \"$143273582443PhrSn:example.org\",\n              \"origin_server_ts\": 1432735824653,\n              \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n              \"sender\": \"@example:example.org\",\n              \"type\": \"m.room.message\",\n              \"unsigned\": {\n                \"age\": 1234\n              }\n            }\n          ],\n          \"limited\": true,\n          \"prev_batch\": \"t34-23535_0_0\"\n        },\n        \"unread_notifications\": {\n          \"highlight_count\": 1,\n          \"notification_count\": 5\n        },\n        \"unread_thread_notifications\": {\n          \"$threadroot\": {\n            \"highlight_count\": 3,\n            \"notification_count\": 6\n          }\n        }\n      }\n    },\n    \"knock\": {\n      \"!223asd456:example.com\": {\n        \"knock_state\": {\n          \"events\": [\n            {\n              \"content\": {\n                \"name\": \"My Room Name\"\n              },\n              \"sender\": \"@alice:example.com\",\n              \"state_key\": \"\",\n              \"type\": \"m.room.name\"\n            },\n            {\n              \"content\": {\n                \"membership\": \"knock\"\n              },\n              \"sender\": \"@bob:example.com\",\n              \"state_key\": \"@bob:example.com\",\n              \"type\": \"m.room.member\"\n            }\n          ]\n        }\n      }\n    },\n    \"leave\": {}\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#77","title":"7.7 \u200b\u7372\u53d6\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u4e8b\u4ef6","text":"<p>\u200b\u70ba\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u591a\u500b\u200b API:</p>"},{"location":"chat/client_server/#get-_matrixclientv3roomsroomideventeventid","title":"GET /_matrix/client/v3/rooms/{roomId}/event/{eventId}","text":"<p>\u200b\u7372\u53d6\u200b\u57fa\u200b\u65bc\u200b\u7684\u200b\u55ae\u500b\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u60a8\u200b\u5fc5\u9808\u200b\u5177\u6709\u200b\u4ee5\u4e0b\u200b\u6b0a\u9650\u200b:\u200b\u6aa2\u7d22\u6b64\u200b\u4e8b\u4ef6\u200b,\u200b\u4f8b\u5982\u200b,\u200b\u901a\u904e\u200b\u6210\u70ba\u200b\u6b64\u200b\u4e8b\u4ef6\u200b\u623f\u9593\u200b\u4e2d\u200b\u7684\u200b\u6210\u54e1\u200b\u3002roomId/eventId</p> <pre><code>{\n  \"content\": {\n    \"body\": \"This is an example text message\",\n    \"format\": \"org.matrix.custom.html\",\n    \"formatted_body\": \"&lt;b&gt;This is an example text message&lt;/b&gt;\",\n    \"msgtype\": \"m.text\"\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!636q39766251:matrix.org\",\n  \"sender\": \"@example:example.org\",\n  \"type\": \"m.room.message\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3roomsroomidjoined_members","title":"GET /_matrix/client/v3/rooms/{roomId}/joined_members","text":"<p>\u200b\u6b64\u200b API \u200b\u5c07\u200b MXID \u200b\u7684\u200b\u6620\u5c04\u200b\u8fd4\u56de\u200b\u5230\u200b\u804a\u5929\u5ba4\u200b\u6210\u54e1\u200b\u7684\u200b\u6210\u54e1\u200b\u4fe1\u606f\u200b\u7269\u4ef6\u200b\u3002\u200b\u7576\u524d\u200b\u7528\u6236\u200b\u5fc5\u9808\u200b\u5728\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u200b\u624d\u80fd\u200b\u5de5\u4f5c\u200b,\u200b\u9664\u975e\u200b\u5b83\u200b\u662f\u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u670d\u52d9\u200b,\u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b,\u200b\u4efb\u4f55\u200b AS \u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u90fd\u200b\u5fc5\u9808\u200b\u5728\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u200b\u3002\u200b\u6b64\u200b API \u200b\u4e3b\u8981\u200b\u7528\u200b\u65bc\u200b\u61c9\u7528\u200b\u7a0b\u5f0f\u200b\u670d\u52d9\u200b,\u200b\u56de\u61c9\u200b\u901f\u5ea6\u200b\u61c9\u5feb\u200b\u65bc\u200b\u5728\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u66f4\u200b\u9ad8\u6548\u200b\u5730\u5be6\u73fe\u200b\u3002/members</p> <pre><code>{\n  \"joined\": {\n    \"@bar:example.com\": {\n      \"avatar_url\": \"mxc://riot.ovh/printErCATzZijQsSDWorRaK\",\n      \"display_name\": \"Bar\"\n    }\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3roomsroomidmembers","title":"GET /_matrix/client/v3/rooms/{roomId}/members","text":"<p>\u200b\u7372\u53d6\u200b\u6b64\u6703\u200b\u8b70\u5ba4\u200b\u7684\u200b\u6210\u54e1\u200b\u6e05\u55ae\u200b\u3002</p> <pre><code>{\n  \"chunk\": [\n    {\n      \"content\": {\n        \"avatar_url\": \"mxc://example.org/SEsfnsuifSDFSSEF\",\n        \"displayname\": \"Alice Margatroid\",\n        \"membership\": \"join\",\n        \"reason\": \"Looking for support\"\n      },\n      \"event_id\": \"$143273582443PhrSn:example.org\",\n      \"origin_server_ts\": 1432735824653,\n      \"room_id\": \"!636q39766251:example.com\",\n      \"sender\": \"@example:example.org\",\n      \"state_key\": \"@alice:example.org\",\n      \"type\": \"m.room.member\",\n      \"unsigned\": {\n        \"age\": 1234\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3roomsroomidstate","title":"GET /_matrix/client/v3/rooms/{roomId}/state","text":"<p>\u200b\u7372\u53d6\u200b\u804a\u5929\u5ba4\u200b\u7576\u524d\u200b\u72c0\u614b\u200b\u7684\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u3002</p> <pre><code>[\n  {\n    \"content\": {\n      \"join_rule\": \"public\"\n    },\n    \"event_id\": \"$143273582443PhrSn:example.org\",\n    \"origin_server_ts\": 1432735824653,\n    \"room_id\": \"!636q39766251:example.com\",\n    \"sender\": \"@example:example.org\",\n    \"state_key\": \"\",\n    \"type\": \"m.room.join_rules\",\n    \"unsigned\": {\n      \"age\": 1234\n    }\n  },\n  {\n    \"content\": {\n      \"avatar_url\": \"mxc://example.org/SEsfnsuifSDFSSEF\",\n      \"displayname\": \"Alice Margatroid\",\n      \"membership\": \"join\",\n      \"reason\": \"Looking for support\"\n    },\n    \"event_id\": \"$143273582443PhrSn:example.org\",\n    \"origin_server_ts\": 1432735824653,\n    \"room_id\": \"!636q39766251:example.com\",\n    \"sender\": \"@example:example.org\",\n    \"state_key\": \"@alice:example.org\",\n    \"type\": \"m.room.member\",\n    \"unsigned\": {\n      \"age\": 1234\n    }\n  },\n  {\n    \"content\": {\n      \"creator\": \"@example:example.org\",\n      \"m.federate\": true,\n      \"predecessor\": {\n        \"event_id\": \"$something:example.org\",\n        \"room_id\": \"!oldroom:example.org\"\n      },\n      \"room_version\": \"1\"\n    },\n    \"event_id\": \"$143273582443PhrSn:example.org\",\n    \"origin_server_ts\": 1432735824653,\n    \"room_id\": \"!636q39766251:example.com\",\n    \"sender\": \"@example:example.org\",\n    \"state_key\": \"\",\n    \"type\": \"m.room.create\",\n    \"unsigned\": {\n      \"age\": 1234\n    }\n  },\n  {\n    \"content\": {\n      \"ban\": 50,\n      \"events\": {\n        \"m.room.name\": 100,\n        \"m.room.power_levels\": 100\n      },\n      \"events_default\": 0,\n      \"invite\": 50,\n      \"kick\": 50,\n      \"notifications\": {\n        \"room\": 20\n      },\n      \"redact\": 50,\n      \"state_default\": 50,\n      \"users\": {\n        \"@example:localhost\": 100\n      },\n      \"users_default\": 0\n    },\n    \"event_id\": \"$143273582443PhrSn:example.org\",\n    \"origin_server_ts\": 1432735824653,\n    \"room_id\": \"!636q39766251:example.com\",\n    \"sender\": \"@example:example.org\",\n    \"state_key\": \"\",\n    \"type\": \"m.room.power_levels\",\n    \"unsigned\": {\n      \"age\": 1234\n    }\n  }\n]\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3roomsroomidstateeventtypestatekey","title":"GET /_matrix/client/v3/rooms/{roomId}/state/{eventType}/{stateKey}","text":"<p>\u200b\u67e5\u627e\u200b\u6a94\u5ba4\u200b\u4e2d\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u5167\u5bb9\u200b\u3002\u200b\u5982\u679c\u200b\u4f7f\u7528\u8005\u200b\u662f\u200b \u200b\u52a0\u5165\u200b\u5230\u200b\u623f\u9593\u200b,\u200b\u7136\u5f8c\u72c0\u614b\u200b\u5f9e\u200b\u7576\u524d\u200b\u7372\u53d6\u200b \u200b\u623f\u9593\u200b\u7684\u200b\u72c0\u614b\u200b\u3002\u200b\u5982\u679c\u200b\u7528\u6236\u200b\u5df2\u200b\u96e2\u958b\u200b\u623f\u9593\u200b,\u200b\u5247\u72c0\u614b\u200b\u70ba\u200b \u200b\u53d6\u81ea\u200b\u4ed6\u5011\u200b\u96e2\u200b\u958b\u6642\u200b\u7684\u200b\u623f\u9593\u200b\u72c0\u614b\u200b\u3002</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"name\": \"Example room name\"\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3roomsroomidmessages","title":"GET /_matrix/client/v3/rooms/{roomId}/messages","text":"<p>\u200b\u6b64\u200b API \u200b\u8fd4\u56de\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u6d88\u606f\u200b\u548c\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u6e05\u55ae\u200b\u3002\u200b\u5b83\u200b\u4f7f\u7528\u200b \u200b\u5206\u9801\u200b\u67e5\u8a62\u200b\u53c3\u6578\u200b,\u200b\u7528\u200b\u65bc\u200b\u5c0d\u200b\u623f\u9593\u200b\u4e2d\u200b\u7684\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b\u9032\u884c\u200b\u5206\u9801\u200b\u3002</p> <p>\u200b\u6ce8\u200b:\u200b\u6b64\u7aef\u9ede\u200b\u652f\u63f4\u200b\u5ef6\u9072\u200b\u8f09\u5165\u200b\u6a94\u6848\u200b\u5ba4\u200b\u6210\u54e1\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u6709\u95dc\u200b\u8a73\u7d30\u200b\u8cc7\u8a0a\u200b,\u200b\u8acb\u200b\u53c3\u95b1\u200b\u61f6\u200b\u60f0\u8f09\u200b\u5165\u5ba4\u200b\u6210\u54e1\u200b\u3002</p> <pre><code>{\n  \"chunk\": [\n    {\n      \"content\": {\n        \"body\": \"This is an example text message\",\n        \"format\": \"org.matrix.custom.html\",\n        \"formatted_body\": \"&lt;b&gt;This is an example text message&lt;/b&gt;\",\n        \"msgtype\": \"m.text\"\n      },\n      \"event_id\": \"$143273582443PhrSn:example.org\",\n      \"origin_server_ts\": 1432735824653,\n      \"room_id\": \"!636q39766251:example.com\",\n      \"sender\": \"@example:example.org\",\n      \"type\": \"m.room.message\",\n      \"unsigned\": {\n        \"age\": 1234\n      }\n    },\n    {\n      \"content\": {\n        \"name\": \"The room name\"\n      },\n      \"event_id\": \"$143273582443PhrSn:example.org\",\n      \"origin_server_ts\": 1432735824653,\n      \"room_id\": \"!636q39766251:example.com\",\n      \"sender\": \"@example:example.org\",\n      \"state_key\": \"\",\n      \"type\": \"m.room.name\",\n      \"unsigned\": {\n        \"age\": 1234\n      }\n    },\n    {\n      \"content\": {\n        \"body\": \"Gangnam Style\",\n        \"info\": {\n          \"duration\": 2140786,\n          \"h\": 320,\n          \"mimetype\": \"video/mp4\",\n          \"size\": 1563685,\n          \"thumbnail_info\": {\n            \"h\": 300,\n            \"mimetype\": \"image/jpeg\",\n            \"size\": 46144,\n            \"w\": 300\n          },\n          \"thumbnail_url\": \"mxc://example.org/FHyPlCeYUSFFxlgbQYZmoEoe\",\n          \"w\": 480\n        },\n        \"msgtype\": \"m.video\",\n        \"url\": \"mxc://example.org/a526eYUSFFxlgbQYZmo442\"\n      },\n      \"event_id\": \"$143273582443PhrSn:example.org\",\n      \"origin_server_ts\": 1432735824653,\n      \"room_id\": \"!636q39766251:example.com\",\n      \"sender\": \"@example:example.org\",\n      \"type\": \"m.room.message\",\n      \"unsigned\": {\n        \"age\": 1234\n      }\n    }\n  ],\n  \"end\": \"t47409-4357353_219380_26003_2265\",\n  \"start\": \"t47429-4392820_219380_26003_2265\"\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv1roomsroomidtimestamp_to_event","title":"GET /_matrix/client/v1/rooms/{roomId}/timestamp_to_event","text":"<p>v1.6 \u200b\u4e2d\u200b\u65b0\u589e\u200b</p> <p>\u200b\u7372\u53d6\u200b\u6700\u200b\u63a5\u8fd1\u200b\u7d66\u5b9a\u200b\u6642\u9593\u200b\u6233\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u7684\u200bID,\u200b\u5728\u200b \u200b\u53c3\u6578\u200b\u6307\u5b9a\u200b\u7684\u200b\u65b9\u5411\u200b\u3002dir</p> <p>\u200b\u5982\u679c\u200b\u4f3a\u670d\u5668\u200b\u6c92\u6709\u200b\u6240\u6709\u200b\u623f\u9593\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b,\u200b\u4e26\u4e14\u200b\u6c92\u6709\u200b \u200b\u9069\u7576\u200b\u63a5\u8fd1\u200b\u8acb\u6c42\u200b\u6642\u9593\u200b\u6233\u200b\u7684\u200b\u4e8b\u4ef6\u200b,\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b \u200b\u76f8\u61c9\u200b\u7684\u200b\u806f\u5408\u7d42\u200b\u7d50\u9ede\u200b,\u200b\u7528\u200b\u65bc\u200b\u5411\u200b\u5176\u4ed6\u200b\u4f3a\u670d\u5668\u200b\u8acb\u6c42\u200b\u5408\u9069\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002</p> <p>\u200b\u8abf\u7528\u200b\u6b64\u7d42\u200b\u7d50\u9ede\u200b\u540e\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u8abf\u7528\u200b /rooms/{roomId}/context/{eventId} \u200b\u4f86\u200b\u7372\u200b\u53d6\u5206\u200b\u9801\u200b\u4ee4\u724c\u200b,\u200b\u4ee5\u6aa2\u7d22\u200b\u8fd4\u56de\u200b\u4e8b\u4ef6\u200b\u5468\u570d\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002</p> <p>\u200b\u6b64\u7d42\u200b\u7d50\u9ede\u200b\u8fd4\u56de\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u53ef\u80fd\u200b\u662f\u200b\u7528\u6236\u200b\u7aef\u200b\u8fd4\u56de\u200b\u7684\u200b\u4e8b\u4ef6\u200b \u200b\u7121\u6cd5\u200b\u5448\u73fe\u200b,\u200b\u56e0\u6b64\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u5206\u9801\u200b\u624d\u80fd\u200b\u627e\u5230\u200b\u4e8b\u4ef6\u200b \u200b\u5b83\u200b\u53ef\u4ee5\u200b\u986f\u793a\u200b,\u200b\u6700\u7d42\u200b\u53ef\u80fd\u200b\u6703\u200b\u8d85\u51fa\u200b\u7528\u6236\u200b\u7aef\u7684\u200b \u200b\u5408\u9069\u200b\u7684\u200b\u7bc4\u570d\u200b\u3002\u200b\u5ba2\u6236\u200b\u53ef\u4ee5\u200b\u63a1\u7528\u200b\u4e0d\u540c\u200b\u7684\u200b\u7b56\u7565\u200b\u4f86\u200b\u5c55\u793a\u200b \u200b\u5c0d\u7528\u200b\u6236\u4f86\u200b\u8aaa\u200b\u5408\u7406\u200b\u7684\u200b\u6771\u897f\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u5617\u8a66\u200b \u200b\u671d\u4e00\u500b\u200b\u65b9\u5411\u200b\u5206\u9801\u200b\u4e00\u6703\u5152\u200b,\u200b\u540c\u6642\u200b\u770b\u8457\u200b \u200b\u5b83\u200b\u6b63\u5728\u200b\u5206\u9801\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6642\u9593\u200b\u6233\u200b,\u200b\u4ee5\u53ca\u200b\u5b83\u200b\u662f\u5426\u200b \u200b\u8d85\u904e\u200b\u8207\u200b\u76ee\u6a19\u200b\u6642\u9593\u200b\u6233\u200b\u7684\u200b\u4e00\u5b9a\u200b\u5dee\u7570\u200b,\u200b\u53ef\u4ee5\u200b\u5617\u8a66\u200b \u200b\u4ee5\u200b\u76f8\u53cd\u200b\u7684\u200b\u65b9\u5411\u200b\u5206\u9801\u200b\u3002\u200b\u5ba2\u6236\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u7c21\u55ae\u200b\u5730\u200b \u200b\u5728\u200b\u4e00\u500b\u200b\u65b9\u5411\u200b\u4e0a\u200b\u5206\u9801\u200b,\u200b\u4e26\u200b\u901a\u77e5\u200b\u4f7f\u7528\u8005\u200b\u6700\u8fd1\u200b\u7684\u200b\u4e8b\u4ef6\u200b \u200b\u5728\u200b\u8a72\u200b\u65b9\u5411\u200b\u4e0a\u200b\u767c\u73fe\u200b\u8d85\u51fa\u200b\u4e86\u200b\u9810\u671f\u200b\u7bc4\u570d\u200b\u3002</p> <pre><code>{\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653\n}\n</code></pre>"},{"location":"chat/client_server/#78","title":"7.8 \u200b\u5c07\u200b\u4e8b\u4ef6\u200b\u767c\u200b\u9001\u5230\u200b\u804a\u5929\u5ba4","text":"<p>\u200b\u5982\u679c\u200b\u67d0\u4e9b\u200b\u4e8b\u4ef6\u200b\u8207\u200b\u53e6\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\u76f8\u95dc\u200b,\u200b\u5247\u200b\u4f3a\u670d\u5668\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u5c0d\u200b\u5176\u200b\u9032\u884c\u200b\u5f8c\u200b\u8655\u7406\u200b\u3002\u200b\u8a72\u200b\u6d3b\u52d5\u200b\u7684\u200b \u200b\u95dc\u200b\u4fc2\u200b\u985e\u578b\u200b \uff08\uff09 \u200b\u78ba\u5b9a\u200b\u53ef\u80fd\u200b\u9069\u7528\u200b\u7684\u200b\u4efb\u4f55\u200b\u9650\u5236\u200b, \u200b\u4f8b\u5982\u200b,\u200b\u4f7f\u7528\u8005\u200b\u53ea\u80fd\u200b\u767c\u9001\u200b\u4e00\u500b\u200b\u7d66\u5b9a\u200b\u985e\u578b\u200b\u7684\u200b\u4e8b\u4ef6\u200b \u200b\u5230\u200b\u53e6\u200b\u4e00\u500b\u200b\u3002rel_type</p>"},{"location":"chat/client_server/#put-_matrixclientv3roomsroomidstateeventtypestatekey","title":"PUT /_matrix/client/v3/rooms/{roomId}/state/{eventType}/{stateKey}","text":"<p>\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u6b64\u7d42\u200b\u7d50\u9ede\u200b\u767c\u9001\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u9019\u4e9b\u200b\u4e8b\u4ef6\u200b\u5c07\u662f\u200b \u200b\u8986\u84cb\u200b if \u200b\u548c\u200b\u6240\u6709\u200b \u200b\u706b\u67f4\u200b\u3002 <p>\u200b\u5c0d\u6b64\u200b\u7aef\u9ede\u200b\u7684\u200b\u8acb\u6c42\u200b\u4e0d\u80fd\u200b\u50cf\u200b\u5176\u4ed6\u200b\u8def\u5f91\u200b\u4e00\u6a23\u200b\u4f7f\u7528\u200b\u4e8b\u52d9\u200b ID,\u200b\u56e0\u70ba\u200b\u5b83\u5011\u200b\u7121\u6cd5\u200b\u8207\u200b .\u200b\u6b64\u5916\u200b,\u200b\u5728\u200b\u72c0\u614b\u200b\u8def\u5f91\u200b\u4e0a\u200b\u4e0d\u53d7\u200b\u652f\u63f4\u200b\u3002PUTstate_keyPOST</p> <p>\u200b\u8acb\u6c42\u200b\u7684\u200b\u6b63\u6587\u200b\u61c9\u8a72\u200b\u662f\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u5167\u5bb9\u200b\u7269\u4ef6\u200b;\u200b\u9019\u200b \u200b\u6b64\u200b\u7269\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u6b04\u4f4d\u200b\u5c07\u6839\u64da\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b\u800c\u200b\u6709\u6240\u4e0d\u540c\u200b\u3002\u200b\u6709\u95dc\u200b\u6d3b\u52d5\u200b\u898f\u7bc4\u200b,\u200b\u8acb\u200b\u53c3\u95b1\u200b\u6703\u200b\u8b70\u5ba4\u200b\u6d3b\u52d5\u200b\u3002m.</p> <p>\u200b\u5982\u679c\u200b\u8981\u200b\u767c\u9001\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b\u662f\u200b\u4f3a\u670d\u5668\u200b \u200b\u61c9\u78ba\u200b\u4fdd\u200b\u4e8b\u4ef6\u200b\u4e2d\u200b\u5217\u51fa\u200b\u7684\u200b\u4efb\u4f55\u200b\u65b0\u5225\u200b\u540d\u200b\u90fd\u200b\u6709\u6548\u200b \u200b\u6839\u64da\u200b\u4ed6\u5011\u200b\u7684\u200b\u8a9e\u6cd5\u200b/\u200b\u53e5\u6cd5\u200b,\u200b\u4e26\u4e14\u200b\u4ed6\u5011\u200b\u6307\u5411\u200b\u623f\u9593\u200bID\u200b\u5176\u4e2d\u200b \u200b\u5c07\u767c\u200b\u9001\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u4f3a\u670d\u5668\u200b\u4e0d\u9a57\u200b\u8b49\u5225\u200b\u540d\u200b \u200b\u6b63\u5728\u200b\u522a\u9664\u200b\u6216\u200b\u5df2\u200b\u5b58\u5728\u200b\u65bc\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u4e2d\u200b\u3002m.room.canonical_alias</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"avatar_url\": \"mxc://localhost/SEsfnsuifSDFSSEF\",\n  \"displayname\": \"Alice Margatroid\",\n  \"membership\": \"join\"\n}\n</code></pre> <p>200\u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"event_id\": \"$YUwRidLecu:example.com\"\n}\n</code></pre>"},{"location":"chat/client_server/#put-_matrixclientv3roomsroomidsendeventtypetxnid","title":"PUT /_matrix/client/v3/rooms/{roomId}/send/{eventType}/{txnId}","text":"<p>\u200b\u6b64\u7d42\u200b\u7d50\u9ede\u200b\u7528\u200b\u65bc\u5c07\u200b\u6d88\u606f\u200b\u4e8b\u4ef6\u200b\u767c\u200b\u9001\u5230\u200b\u804a\u5929\u5ba4\u200b\u3002\u200b\u6d88\u606f\u200b\u4e8b\u4ef6\u200b \u200b\u5141\u8a31\u200b\u8a2a\u554f\u200b\u6b77\u53f2\u200b\u4e8b\u4ef6\u200b\u548c\u200b\u5206\u9801\u200b,\u200b\u4f7f\u200b\u5176\u200b\u9069\u5408\u200b \u200b\u7528\u200b\u65bc\u200b\u623f\u9593\u200b\u5167\u200b\u7684\u200b'\u200b\u4e00\u6b21\u6027\u200b'\u200b\u6d3b\u52d5\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u7684\u200b\u6b63\u6587\u200b\u61c9\u8a72\u200b\u662f\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u5167\u5bb9\u200b\u7269\u4ef6\u200b;\u200b\u9019\u200b \u200b\u6b64\u200b\u7269\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u6b04\u4f4d\u200b\u5c07\u6839\u64da\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b\u800c\u200b\u6709\u6240\u4e0d\u540c\u200b\u3002\u200b\u6709\u95dc\u200b m. \u200b\u4e8b\u4ef6\u200b\u898f\u7bc4\u200b,\u200b\u8acb\u200b\u53c3\u95b1\u200b\u6703\u200b\u8b70\u5ba4\u200b\u4e8b\u4ef6\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"body\": \"hello\",\n  \"msgtype\": \"m.text\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"event_id\": \"$YUwRidLecu:example.com\"\n}\n</code></pre>"},{"location":"chat/client_server/#79","title":"7.9 \u200b\u5bc6\u6587","text":"<p>\u200b\u7531\u200b\u65bc\u200b\u4e8b\u4ef6\u200b\u662f\u200b\u53ef\u200b\u64f4\u5c55\u200b\u7684\u200b,\u200b\u56e0\u6b64\u200b\u60e1\u610f\u200b\u4f7f\u7528\u8005\u200b\u548c\u200b/\u200b\u6216\u200b \u200b\u4f3a\u670d\u5668\u200b,\u200b\u7528\u200b\u65bc\u200b\u6dfb\u52a0\u200b\u8af8\u5982\u200b\u653b\u64ca\u6027\u200b\u6216\u200b\u975e\u6cd5\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\u3002\u200b\u56e0\u70ba\u200b \u200b\u6709\u4e9b\u200b\u4e8b\u4ef6\u200b\u4e0d\u80fd\u200b\u7c21\u55ae\u200b\u5730\u200b\u522a\u9664\u200b,\u200b\u4f8b\u5982\u200b\u6703\u54e1\u200b\u6d3b\u52d5\u200b,\u200b\u6211\u5011\u200b\u53d6\u800c\u4ee3\u4e4b\u200b\u7684\u200b\u662f\u200b \"\u200b\u7de8\u8f2f\u200b\"\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u9019\u200b\u6d89\u53ca\u200b\u5f9e\u200b\u4e8b\u4ef6\u200b\u4e2d\u200b\u522a\u9664\u200b\u6240\u6709\u200b\u9375\u200b \u200b\u5354\u5b9a\u200b\u4e0d\u200b\u9700\u8981\u200b\u3002\u200b\u6b64\u200b\u5f8c\u200b,\u200b\u6b64\u200b\u7cbe\u7c21\u200b\u4e8b\u4ef6\u200b \u200b\u6bcf\u7576\u200b\u5ba2\u6236\u200b\u7aef\u200b\u6216\u200b\u9060\u7aef\u200b\u4f3a\u670d\u5668\u200b\u8acb\u6c42\u200b\u5b83\u200b\u6642\u200b\u8fd4\u56de\u200b\u3002\u200b\u7de8\u8f2f\u200b\u4e00\u500b\u200b \u200b\u4e8b\u4ef6\u200b\u7121\u6cd5\u200b\u64a4\u92b7\u200b,\u200b\u5141\u8a31\u200b\u4f3a\u670d\u5668\u200b\u64c1\u6709\u8005\u200b\u522a\u9664\u200b\u6709\u200b\u554f\u984c\u200b\u7684\u200b \u200b\u8cc7\u6599\u200b\u5eab\u200b\u4e2d\u200b\u7684\u200b\u5167\u5bb9\u200b\u3002\u200b\u4f3a\u670d\u5668\u200b\u61c9\u200b\u5728\u200b\u5411\u200b\u7528\u6236\u200b\u7aef\u200b\u63d0\u4f9b\u200b\u7d93\u904e\u200b\u7de8\u8f2f\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u6642\u200b\u5728\u200b as \u200b\u4e0b\u200b\u5305\u542b\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u526f\u672c\u200b\u3002m.room.redactionunsignedredacted_because</p> <p>\u200b\u5728\u200b\u623f\u9593\u200b\u4e2d\u5b9a\u200b\u7fa9\u8981\u200b\u61c9\u7528\u200b\u65bc\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u78ba\u5207\u200b\u6f14\u7b97\u6cd5\u200b \u200b\u7248\u672c\u200b\u898f\u7bc4\u200b,\u200b\u4ee5\u53ca\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u61c9\u200b\u9075\u5faa\u200b\u7684\u200b\u6a19\u6e96\u200b \u200b\u5728\u200b\u6c7a\u5b9a\u200b\u662f\u5426\u200b\u63a5\u53d7\u200b\u4f86\u200b\u81ea\u9060\u200b\u7aef\u7684\u200b\u7de8\u6821\u200b\u4e8b\u4ef6\u200b\u6642\u200b\u4f7f\u7528\u200b \u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u3002</p> <p>\u200b\u7576\u7528\u200b\u6236\u7aef\u200b\u6536\u5230\u200b\u4e8b\u4ef6\u200b\u6642\u200b,\u200b\u5b83\u200b\u61c9\u8a72\u200b\u66f4\u6539\u200b \u200b\u53d7\u5f71\u97ff\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u8207\u200b\u4f3a\u670d\u5668\u200b\u76f8\u540c\u200b\u3002m.room.redaction</p>"},{"location":"chat/client_server/#791","title":"7.9.1 \u200b\u4e8b\u4ef6","text":""},{"location":"chat/client_server/#mroomredaction","title":"m.room.redaction","text":"<p>\u200b\u6b64\u200b\u4e8b\u4ef6\u200b\u7531\u200b\u4f3a\u670d\u5668\u200b\u5275\u5efa\u200b,\u200b\u7528\u200b\u65bc\u200b\u63cf\u8ff0\u200b\u5df2\u200b\u7de8\u8f2f\u200b\u7684\u200b\u4e8b\u4ef6\u200b,\u200b\u7531\u200b\u8ab0\u200b\u7de8\u8f2f\u200b\u4ee5\u53ca\u200b\uff08\u200b\u53ef\u9078\u200b\uff09\u200b\u539f\u56e0\u200b\u3002\u200b\u5df2\u200b\u7de8\u8f2f\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u5728\u200b\u4e8b\u4ef6\u200b\u7d1a\u200b\u5225\u9375\u200b\u4e2d\u200b\u6307\u5b9a\u200b\u3002\u200b\u7de8\u8f2f\u200b\u4e8b\u4ef6\u200b\u610f\u5473\u8457\u200b\u5354\u5b9a\u200b\u4e0d\u200b\u9700\u8981\u200b\u7684\u200b\u6240\u6709\u200b\u5bc6\u200b\u9470\u200b\u90fd\u200b\u6703\u200b\u88ab\u200b\u525d\u96e2\u200b,\u200b\u5f9e\u200b\u800c\u200b\u5141\u8a31\u200b\u96b1\u85cf\u200b\u6d88\u606f\u200b\u6216\u200b\u5141\u8a31\u200b\u7ba1\u7406\u200b\u54e1\u200b\u522a\u9664\u200b\u5192\u72af\u200b\u6027\u200b\u6216\u200b\u975e\u6cd5\u200b\u5167\u5bb9\u200b\u3002redacts</p> <pre><code>{\n  \"content\": {\n    \"reason\": \"Spamming\"\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"redacts\": \"$fukweghifu23:localhost\",\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"type\": \"m.room.redaction\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#792","title":"7.9.2 \u200b\u5ba2\u6236\u200b\u7aef\u884c\u200b\u70ba","text":""},{"location":"chat/client_server/#put-_matrixclientv3roomsroomidredacteventidtxnid","title":"PUT /_matrix/client/v3/rooms/{roomId}/redact/{eventId}/{txnId}","text":"<p>\u200b\u5f9e\u200b\u5c0d\u200b \u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u4f3a\u670d\u5668\u200b\u7aef\u200b\u8868\u793a\u200b\u5f62\u5f0f\u200b\u7684\u200b\u5b8c\u6574\u6027\u200b\u3002</p> <p>\u200b\u9019\u662f\u200b\u7121\u6cd5\u200b\u64a4\u92b7\u200b\u7684\u200b\u3002</p> <p>\u200b\u4efb\u4f55\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u5927\u200b\u65bc\u200b\u6216\u200b\u7b49\u200b\u65bc\u200b\u4e8b\u4ef6\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u5728\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u767c\u200b\u9001\u200b\u5bc6\u6587\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u5982\u679c\u200b\u7528\u6236\u200b\u7684\u200b\u96fb\u6e90\u200b \u200b\u96fb\u5e73\u5927\u200b\u65bc\u200b\u4e5f\u200b\u5927\u200b\u65bc\u200b\u6216\u200b\u7b49\u200b\u65bc\u200b\u529f\u7387\u200b\u96fb\u5e73\u200b ,\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u7de8\u8f2f\u200b\u5176\u4ed6\u200b\u7528\u6236\u200b\u767c\u9001\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002m.room.redactionredact</p> <p>\u200b\u4f3a\u670d\u5668\u200b\u7ba1\u7406\u200b\u54e1\u200b\u53ef\u4ee5\u200b\u7de8\u8f2f\u200b\u4f7f\u7528\u8005\u200b\u5728\u200b\u5176\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u767c\u9001\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"reason\": \"Indecent material\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"event_id\": \"$YUwQidLecu:example.com\"\n}\n</code></pre>"},{"location":"chat/client_server/#710","title":"7.10 \u200b\u5728\u200b\u4e8b\u4ef6\u200b\u4e4b\u9593\u200b\u5f62\u6210\u200b\u95dc\u200b\u4fc2","text":"<p>\u200b\u5728\u200b\u67d0\u4e9b\u200b\u60c5\u6cc1\u200b\u4e0b\u200b,\u200b\u6700\u597d\u200b\u5728\u200b\u908f\u8f2f\u200b\u4e0a\u5c07\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u5167\u5bb9\u200b\u8207\u200b \u200b\u53e6\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u5167\u5bb9\u200b \u2014 \u200b\u4f8b\u5982\u200b,\u200b\u5728\u200b\u56de\u200b\u5fa9\u200b\u6d88\u606f\u200b\u6642\u200b,\u200b\u7de8\u8f2f\u200b \u200b\u4e8b\u4ef6\u200b,\u200b\u6216\u8005\u200b\u53ea\u662f\u200b\u5e0c\u671b\u200b\u70ba\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u76ee\u7684\u200b\u6dfb\u52a0\u200b\u4e0a\u4e0b\u6587\u200b\u3002</p> <p>\u200b\u4e8b\u4ef6\u200b\u5728\u200b\u7236\u200b/\u200b\u5b50\u200b\u7d50\u69cb\u200b\u4e2d\u200b\u76f8\u4e92\u200b\u95dc\u806f\u200b,\u200b\u5176\u4e2d\u200b\u4efb\u4f55\u200b\u4e8b\u4ef6\u200b\u90fd\u200b\u53ef\u4ee5\u200b \u200b\u901a\u904e\u200b\u7c21\u55ae\u200b\u5730\u200b\u8b93\u200b\u4e00\u500b\u200b\u5b69\u5b50\u200b\u4e8b\u4ef6\u200b\u9ede\u6210\u200b\u70ba\u200b\u7236\u6bcd\u200b\u3002\u200b\u7236\u200b\u4e8b\u4ef6\u200b\u4e0d\u200b \u200b\u5b9a\u7fa9\u4ed6\u200b\u5011\u200b\u7684\u200b\u5b69\u5b50\u200b,\u200b\u800c\u200b\u4e0d\u662f\u200b\u4f9d\u9760\u200b\u5b69\u5b50\u200b\u4f86\u200b\u63cf\u8ff0\u200b\u4ed6\u5011\u200b\u7684\u200b\u7236\u6bcd\u200b\u3002</p> <p>\u200b\u5b50\u200b\u4e8b\u4ef6\u200b\u8207\u200b\u5176\u7236\u200b\u4e8b\u4ef6\u200b\u4e4b\u9593\u200b\u7684\u95dc\u200b\u4fc2\u200b\u5728\u200b\u5b50\u200b\u4e8b\u4ef6\u200b\u4e2d\u200b\u63cf\u8ff0\u200b \u200b\u4e8b\u4ef6\u200b\u70ba\u200b\uff08\u200b\u5b9a\u7fa9\u200b\u5982\u4e0b\u200b\uff09\u3002\u200b\u5b50\u200b\u4e8b\u4ef6\u200b\u53ef\u4ee5\u200b\u6307\u5411\u200b \u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u4e8b\u4ef6\u200b,\u200b\u5305\u62ec\u200b\u53e6\u200b\u4e00\u500b\u5b50\u200b\u4e8b\u4ef6\u200b,\u200b\u4ee5\u200b\u5efa\u7acb\u200b\u5982\u6b64\u200b\u9577\u200b\u6642\u9593\u200b\u7684\u95dc\u200b\u4fc2\u200b \u200b\u7531\u200b\u65bc\u200b\u5169\u500b\u200b\u6d3b\u52d5\u200b\u90fd\u200b\u5728\u200b\u540c\u4e00\u200b\u500b\u200b\u623f\u9593\u200b\u5167\u200b,\u200b\u4f46\u662f\u200b\u53ef\u80fd\u200b\u6703\u200b\u65bd\u52a0\u200b\u984d\u5916\u200b\u7684\u200b\u9650\u5236\u200b \u200b\u6309\u95dc\u200b\u4fc2\u200b\u7684\u200b\u985e\u578b\u200b \uff08\uff09\u3002contentm.relates_torel_type</p> <p>\u200b\u82e5\u8981\u200b\u5141\u8a31\u200b\u4f3a\u670d\u5668\u200b\u805a\u5408\u200b\u548c\u200b\u67e5\u627e\u200b\u7236\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u5b50\u200b\u4e8b\u4ef6\u200b,\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u9375\u200b\u5fc5\u9808\u200b\u5305\u542b\u200b\u5728\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u660e\u6587\u200b\u90e8\u5206\u200b\u4e2d\u200b\u3002\u200b\u5b83\u200b\u4e0d\u200b\u53ef\u80fd\u200b \u200b\u4ee5\u7368\u200b\u4f54\u200b\u65b9\u5f0f\u200b\u8a18\u9304\u200b\u5728\u200b\u52a0\u5bc6\u200b\u7684\u200b\u6709\u6548\u200b\u8ca0\u8f09\u200b\u4e2d\u200b,\u200b\u56e0\u70ba\u200b\u4f3a\u670d\u5668\u200b\u7121\u6cd5\u200b\u89e3\u5bc6\u200b\u4e8b\u4ef6\u200b \u200b\u7528\u200b\u65bc\u200b\u8655\u7406\u200b\u3002m.relates_to</p> <p>\u200b\u8207\u200b\u67b6\u69cb\u200b\u4e0d\u200b\u5339\u914d\u200b\u6216\u200b\u9055\u53cd\u95dc\u200b\u4fc2\u200b\u898f\u5247\u200b\u7684\u95dc\u200b\u4fc2\u200b, \u200b\u53ea\u662f\u200b\u88ab\u5ffd\u7565\u4e86\u200b\u3002\u200b\u4e00\u500b\u200b\u4f8b\u5b50\u200b\u53ef\u80fd\u200b\u662f\u200b\u7236\u9805\u200b\u548c\u200b\u5b50\u200b\u9805\u8655\u200b\u65bc\u200b\u4e0d\u540c\u200b\u7684\u200b\u4f4d\u7f6e\u200b \u200b\u623f\u9593\u200b,\u200b\u6216\u200b\u4ee5\u4e0b\u200b\u67b6\u69cb\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u7f3a\u5c11\u200b\u5c6c\u6027\u200b\u7684\u95dc\u200b\u4fc2\u200b\u3002\u200b\u5ba2\u6236\u200b \u200b\u8655\u7406\u200b\u6b64\u985e\u200b\u7121\u6548\u95dc\u200b\u4fc2\u200b\u61c9\u200b\u7368\u7acb\u200b\u65bc\u200b\u6bcf\u500b\u200b\u4e8b\u4ef6\u200b\u986f\u793a\u200b\u4e8b\u4ef6\u200b \u200b\u5176\u4ed6\u200b,\u200b\u53ef\u9078\u53d6\u200b\u7684\u200b\u986f\u793a\u200b\u932f\u200b\u8aa4\u8a0a\u606f\u200b\u3002</p>"},{"location":"chat/client_server/#mrelates_to","title":"m.relates_to","text":"<pre><code>{\n  \"m.relates_to\": {\n    \"event_id\": \"$an_event\",\n    \"rel_type\": \"org.example.relationship\"\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#7101","title":"7.10.1 \u200b\u95dc\u200b\u4fc2\u200b\u985e\u578b","text":"<p>\u200b\u9019\u500b\u200b\u898f\u7bc4\u200b\u63cf\u8ff0\u200b\u4ee5\u4e0b\u200b\u95dc\u200b\u4fc2\u200b\u985e\u578b\u200b:</p> <ul> <li>Event replacements.</li> <li>Event annotations.</li> <li>Threads.</li> <li>References</li> </ul>"},{"location":"chat/client_server/#7102","title":"7.10.2 \u200b\u5b50\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u805a\u5408","text":"<p>\u200b\u67d0\u4e9b\u200b\u5b50\u200b\u4e8b\u4ef6\u200b\u53ef\u4ee5\u200b\u7531\u200b\u4f3a\u670d\u5668\u200b'\u200b\u805a\u5408\u200b',\u200b\u5177\u9ad4\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u5b83\u5011\u200b\u7684\u200b .\u200b\u9019\u200b\u53ef\u4ee5\u200b\u5141\u8a31\u200b\u5c07\u4e00\u200b\u7d44\u5b50\u200b\u4e8b\u4ef6\u200b\u532f\u7e3d\u5230\u200b\u7528\u6236\u200b\u7aef\u200b,\u200b\u800c\u200b\u7121\u200b\u9700\u200b \u200b\u9700\u8981\u200b\u5b50\u200b\u4e8b\u4ef6\u200b\u672c\u8eab\u200b\u7684\u200b\u7528\u6236\u200b\u7aef\u200b\u3002rel_type</p> <p>\u200b\u9019\u200b\u65b9\u9762\u200b\u7684\u200b\u4e00\u500b\u200b\u4f8b\u5b50\u200b\u53ef\u80fd\u200b\u662f\u200b a \u200b\u9700\u8981\u200b\u4e00\u500b\u200b\u984d\u5916\u200b\u7684\u200b\u6b04\u4f4d\u200b,\u200b\u7576\u200b \u200b\u9069\u7576\u200b\u6307\u5b9a\u200b,\u200b\u5c07\u200b\u610f\u5473\u8457\u200b\u7528\u6236\u200b\u7aef\u200b\u6536\u5230\u200b\u8a72\u6578\u200b\u5b57\u200b\u7684\u200b\u7e3d\u6578\u200b \u200b\u5b50\u200b\u4e8b\u4ef6\u200b\u4f7f\u7528\u200b\u7684\u200b\u6b21\u6578\u200b\u3002rel_typekeykey</p> <p>\u200b\u5be6\u969b\u200b\u7684\u200b\u805a\u5408\u200b\u683c\u5f0f\u200b\u53d6\u6c7a\u200b\u65bc\u200b .rel_type</p> <p>\u200b\u7576\u901a\u904e\u200b\u4e0b\u9762\u200b\u5217\u51fa\u200b\u7684\u200b API \u200b\u5c07\u200b\u4e8b\u4ef6\u200b\u63d0\u4f9b\u200b\u7d66\u7528\u200b\u6236\u7aef\u200b\u6642\u200b,\u200b\u5982\u679c\u200b\u4e8b\u4ef6\u200b\u5177\u6709\u200b\u5b50\u7d1a\u200b,\u200b\u5247\u5728\u200b'\u200b\u5982\u679c\u200b\u4e8b\u4ef6\u200b\u5177\u6709\u200b\u5b50\u9805\u200b'\u200b\u4e0b\u5c07\u200b\u5305\u542b\u200b\u4e00\u500b\u200b\u5c6c\u6027\u200b \u200b\u53ef\u4ee5\u200b\u805a\u5408\u200b\u4f75\u200b\u6307\u5411\u200b\u5b83\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u8a72\u7269\u696d\u200b\u662f\u200b \u200b\u7531\u548c\u503c\u200b\u70ba\u9375\u200b\u7684\u200b\u7269\u4ef6\u200b\u662f\u200b\u7279\u5b9a\u200b\u65bc\u200b\u985e\u578b\u200b\u7684\u200b\u805a\u5408\u200b \u200b\u683c\u5f0f\u200b.\u200b\u6b64\u5c6c\u200b\u6027\u7a31\u200b\u70ba\u200b'\u200b\u6346\u200b\u7d81\u200b'\u3002 \u200b\u805a\u5408\u200b\" \u3002m.relationsunsignedm.relationsrel_typerel_typem.relations</p> <p>\u200b\u4f8b\u5982\u200b\uff08\u200b\u4e0d\u200b\u5305\u62ec\u200b\u4e0d\u200b\u91cd\u8981\u200b\u7684\u200b\u6b04\u4f4d\u200b\uff09:</p> <pre><code>{\n  \"event_id\": \"$my_event\",\n  \"unsigned\": {\n    \"m.relations\": {\n      \"org.example.possible_annotations\": [\n        {\n          \"key\": \"\ud83d\udc4d\",\n          \"origin_server_ts\": 1562763768320,\n          \"count\": 3\n        },\n        {\n          \"key\": \"\ud83d\udc4e\",\n          \"origin_server_ts\": 1562763768320,\n          \"count\": 1\n        }\n      ],\n      \"org.example.possible_thread\": {\n        \"current_server_participated\": true,\n        \"count\": 7,\n        \"latest_event\": {\n          \"event_id\": \"$another_event\",\n          \"content\": {\n            \"body\": \"Hello world\"\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#7103","title":"7.10.3 \u200b\u95dc\u200b\u4fc2\u200b\u4ecb\u9762","text":"<p>\u200b\u82e5\u8981\u200b\u5f9e\u200b\u4f3a\u670d\u5668\u200b\u6aa2\u7d22\u200b\u7236\u9805\u200b\u7684\u200b\u5b50\u200b\u4e8b\u4ef6\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u8abf\u7528\u200b \u200b\u4ee5\u4e0b\u200b\u7aef\u9ede\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5ba2\u6236\u200b\u7aef\u200b\u4e1f\u5931\u200b\u4e86\u200b\u805a\u5408\u200b\u4e0a\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b,\u200b\u5247\u6b64\u7d42\u200b\u7d50\u9ede\u200b\u7279\u5225\u200b\u6709\u7528\u200b \u200b\u7236\u200b\u4e8b\u4ef6\u200b,\u200b\u9700\u8981\u200b\u91cd\u65b0\u200b\u751f\u6210\u200b/\u200b\u9a57\u8b49\u200b\u5b83\u200b\u3002</p>"},{"location":"chat/client_server/#get-_matrixclientv1roomsroomidrelationseventid","title":"GET /_matrix/client/v1/rooms/{roomId}/relations/{eventId}","text":"<p>\u200b\u6aa2\u7d22\u200b\u7d66\u5b9a\u7236\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u6240\u6709\u200b\u5b50\u200b\u4e8b\u4ef6\u200b\u3002</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u5206\u9801\u200b\u6642\u200b,\u200b\u4ee4\u724c\u200b\u61c9\u200b\"\u200b\u5728\u200b\"\u200b\u4ee4\u724c\u200b\u4e4b\u200b\u5f8c\u200b \u200b\u62d3\u64b2\u200b\u6392\u5e8f\u200b\u8853\u8a9e\u200b,\u200b\u56e0\u70ba\u200b\u53ea\u80fd\u200b'\u200b\u5411\u200b\u5f8c\u200b'\u200b\u5206\u9801\u200b \u200b\u901a\u904e\u200b\u4e8b\u4ef6\u200b,\u200b\u5f9e\u200b \u200b\u958b\u59cb\u200b\u3002fromtofrom</p> <p>\u200b\u4f8b\u5982\u200b,\u200b\u5f9e\u200b\u7d50\u679c\u200b\u7684\u200b\u7b2c\u200b 2 \u200b\u9801\u200b\u50b3\u905e\u200b\u4ee4\u724c\u200b,\u200b\u4ee5\u53ca\u200b\u4e00\u500b\u200b\u4ee4\u724c\u200b \u200b\u5f9e\u200b\u7b2c\u200b 1 \u200b\u9801\u200b\u958b\u59cb\u200b,\u200b\u5c07\u200b\u8fd4\u56de\u200b\u7a7a\u96c6\u200b\u3002\u200b\u8abf\u7528\u65b9\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4f86\u200b\u81ea\u200b \u200b\u4f46\u662f\u200b,\u200b\u7b2c\u200b 1 \u200b\u9801\u200b\u548c\u200b\u7b2c\u200b 2 \u200b\u9801\u200b\u4e2d\u200b\u7684\u200b\u6a19\u8a18\u5c07\u200b\u5728\u200b\u540c\u4e00\u200b\u7bc4\u570d\u200b\u5167\u200b\u9032\u884c\u200b\u5206\u9801\u200b\u3002fromtofromto</p> <pre><code>{\n  \"chunk\": [\n    {\n      \"content\": {\n        \"m.relates_to\": {\n          \"event_id\": \"$asfDuShaf7Gafaw\",\n          \"rel_type\": \"org.example.my_relation\"\n        }\n      },\n      \"event_id\": \"$143273582443PhrSn:example.org\",\n      \"origin_server_ts\": 1432735824653,\n      \"room_id\": \"!636q39766251:matrix.org\",\n      \"sender\": \"@example:example.org\",\n      \"type\": \"m.room.message\",\n      \"unsigned\": {\n        \"age\": 1234\n      }\n    }\n  ],\n  \"next_batch\": \"page2_token\",\n  \"prev_batch\": \"page1_token\"\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv1roomsroomidrelationseventidreltype","title":"GET /_matrix/client/v1/rooms/{roomId}/relations/{eventId}/{relType}","text":"<p>\u200b\u6aa2\u7d22\u200b\u7d66\u5b9a\u7236\u200b\u4e8b\u4ef6\u200b\u8207\u200b\u7236\u200b\u4e8b\u4ef6\u200b\u76f8\u95dc\u200b\u7684\u200b\u6240\u6709\u200b\u5b50\u200b\u4e8b\u4ef6\u200b \u200b\u4f7f\u7528\u200b\u7d66\u5b9a\u200b\u7684\u200b .relType</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u5206\u9801\u200b\u6642\u200b,\u200b\u4ee4\u724c\u200b\u61c9\u200b\"\u200b\u5728\u200b\"\u200b\u4ee4\u724c\u200b\u4e4b\u200b\u5f8c\u200b \u200b\u62d3\u64b2\u200b\u6392\u5e8f\u200b\u8853\u8a9e\u200b,\u200b\u56e0\u70ba\u200b\u53ea\u80fd\u200b'\u200b\u5411\u200b\u5f8c\u200b'\u200b\u5206\u9801\u200b \u200b\u901a\u904e\u200b\u4e8b\u4ef6\u200b,\u200b\u5f9e\u200b \u200b\u958b\u59cb\u200b\u3002fromtofrom</p> <p>\u200b\u4f8b\u5982\u200b,\u200b\u5f9e\u200b\u7d50\u679c\u200b\u7684\u200b\u7b2c\u200b 2 \u200b\u9801\u200b\u50b3\u905e\u200b\u4ee4\u724c\u200b,\u200b\u4ee5\u53ca\u200b\u4e00\u500b\u200b\u4ee4\u724c\u200b \u200b\u5f9e\u200b\u7b2c\u200b 1 \u200b\u9801\u200b\u958b\u59cb\u200b,\u200b\u5c07\u200b\u8fd4\u56de\u200b\u7a7a\u96c6\u200b\u3002\u200b\u8abf\u7528\u65b9\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4f86\u200b\u81ea\u200b \u200b\u4f46\u662f\u200b,\u200b\u7b2c\u200b 1 \u200b\u9801\u200b\u548c\u200b\u7b2c\u200b 2 \u200b\u9801\u200b\u4e2d\u200b\u7684\u200b\u6a19\u8a18\u5c07\u200b\u5728\u200b\u540c\u4e00\u200b\u7bc4\u570d\u200b\u5167\u200b\u9032\u884c\u200b\u5206\u9801\u200b\u3002fromtofromto</p> <pre><code>{\n  \"chunk\": [\n    {\n      \"content\": {\n        \"m.relates_to\": {\n          \"event_id\": \"$asfDuShaf7Gafaw\",\n          \"rel_type\": \"org.example.my_relation\"\n        }\n      },\n      \"event_id\": \"$143273582443PhrSn:example.org\",\n      \"origin_server_ts\": 1432735824653,\n      \"room_id\": \"!636q39766251:matrix.org\",\n      \"sender\": \"@example:example.org\",\n      \"type\": \"m.room.message\",\n      \"unsigned\": {\n        \"age\": 1234\n      }\n    }\n  ],\n  \"next_batch\": \"page2_token\",\n  \"prev_batch\": \"page1_token\"\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv1roomsroomidrelationseventidreltypeeventtype","title":"GET /_matrix/client/v1/rooms/{roomId}/relations/{eventId}/{relType}/{eventType}","text":"<p>\u200b\u6aa2\u7d22\u200b\u7d66\u5b9a\u7236\u200b\u4e8b\u4ef6\u200b\u8207\u200b\u7236\u200b\u4e8b\u4ef6\u200b\u76f8\u95dc\u200b\u7684\u200b\u6240\u6709\u200b\u5b50\u200b\u4e8b\u4ef6\u200b \u200b\u4f7f\u7528\u200b\u7d66\u5b9a\u200b\u7684\u200b\u4e26\u64c1\u200b\u6709\u200b\u7d66\u5b9a\u200b\u7684\u200b.relTypeeventType</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u5206\u9801\u200b\u6642\u200b,\u200b\u4ee4\u724c\u200b\u61c9\u200b\"\u200b\u5728\u200b\"\u200b\u4ee4\u724c\u200b\u4e4b\u200b\u5f8c\u200b \u200b\u62d3\u64b2\u200b\u6392\u5e8f\u200b\u8853\u8a9e\u200b,\u200b\u56e0\u70ba\u200b\u53ea\u80fd\u200b'\u200b\u5411\u200b\u5f8c\u200b'\u200b\u5206\u9801\u200b \u200b\u901a\u904e\u200b\u4e8b\u4ef6\u200b,\u200b\u5f9e\u200b \u200b\u958b\u59cb\u200b\u3002fromtofrom</p> <p>\u200b\u4f8b\u5982\u200b,\u200b\u5f9e\u200b\u7d50\u679c\u200b\u7684\u200b\u7b2c\u200b 2 \u200b\u9801\u200b\u50b3\u905e\u200b\u4ee4\u724c\u200b,\u200b\u4ee5\u53ca\u200b\u4e00\u500b\u200b\u4ee4\u724c\u200b \u200b\u5f9e\u200b\u7b2c\u200b 1 \u200b\u9801\u200b\u958b\u59cb\u200b,\u200b\u5c07\u200b\u8fd4\u56de\u200b\u7a7a\u96c6\u200b\u3002\u200b\u8abf\u7528\u65b9\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4f86\u200b\u81ea\u200b \u200b\u4f46\u662f\u200b,\u200b\u7b2c\u200b 1 \u200b\u9801\u200b\u548c\u200b\u7b2c\u200b 2 \u200b\u9801\u200b\u4e2d\u200b\u7684\u200b\u6a19\u8a18\u5c07\u200b\u5728\u200b\u540c\u4e00\u200b\u7bc4\u570d\u200b\u5167\u200b\u9032\u884c\u200b\u5206\u9801\u200b\u3002fromtofromto</p> <pre><code>{\n  \"chunk\": [\n    {\n      \"content\": {\n        \"m.relates_to\": {\n          \"event_id\": \"$asfDuShaf7Gafaw\",\n          \"rel_type\": \"org.example.my_relation\"\n        }\n      },\n      \"event_id\": \"$143273582443PhrSn:example.org\",\n      \"origin_server_ts\": 1432735824653,\n      \"room_id\": \"!636q39766251:matrix.org\",\n      \"sender\": \"@example:example.org\",\n      \"type\": \"m.room.message\",\n      \"unsigned\": {\n        \"age\": 1234\n      }\n    }\n  ],\n  \"next_batch\": \"page2_token\",\n  \"prev_batch\": \"page1_token\"\n}\n</code></pre>"},{"location":"chat/client_server/#8","title":"8 \u200b\u623f\u9593","text":""},{"location":"chat/client_server/#81","title":"8.1 \u200b\u985e\u578b","text":"<p>\uff08\u200b\u53ef\u9078\u200b\uff09\u200b\u623f\u9593\u200b\u53ef\u4ee5\u200b\u5177\u6709\u200b\u8868\u793a\u200b\u5176\u200b\u9810\u671f\u200b\u529f\u80fd\u200b\u7684\u200b\u985e\u578b\u200b\u3002\u200b\u4e00\u500b\u200b\u623f\u9593\u200b \u200b\u6c92\u6709\u200b\u985e\u578b\u200b\u4e26\u4e0d\u200b\u4e00\u5b9a\u200b\u610f\u5473\u8457\u200b\u5b83\u200b\u5177\u6709\u200b\u7279\u5b9a\u200b\u7684\u200b\u9810\u8a2d\u200b\u51fd\u6578\u200b, \u200b\u5118\u200b\u7ba1\u200b\u901a\u5e38\u200b\u9019\u4e9b\u200b\u623f\u9593\u200b\u5c07\u7528\u200b\u65bc\u200b\u5c0d\u200b\u8a71\u200b\u76ee\u7684\u200b\u3002</p> <p>\u200b\u7576\u5ba2\u6236\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u5340\u5206\u200b \u200b\u5169\u500b\u200b\u4e0d\u540c\u200b\u7684\u200b\u623f\u9593\u200b,\u200b\u4f8b\u5982\u200b\u5c0d\u8a71\u200b\u4fdd\u6301\u200b\u548c\u200b\u6578\u64da\u200b\u4fdd\u6301\u200b\u3002\u200b\u5982\u679c\u200b\u623f\u9593\u200b \u200b\u6709\u200b\u4e00\u500b\u200b\u985e\u578b\u200b,\u200b\u5b83\u200b\u5728\u200b m.room.create \u200b\u4e8b\u4ef6\u200b\u7684\u200b\u9375\u200b\u4e2d\u200b\u6307\u5b9a\u200b\u3002\u200b\u8981\u200b\u6307\u5b9a\u200b\u623f\u9593\u200b\u7684\u200b\u985e\u578b\u200b,\u200b\u8acb\u5c07\u200b\u5176\u4f5c\u200b\u70ba\u200b on \u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u63d0\u4f9b\u200b \u200b\u5275\u5efa\u6a94\u200b\u6848\u5ba4\u200b\u8acb\u6c42\u200b\u3002typecreation_content</p> <p>\u200b\u5728\u200b\u6b64\u200b\u898f\u7bc4\u4e2d\u200b,\u200b\u6307\u5b9a\u200b\u4e86\u200b\u4ee5\u4e0b\u200b\u623f\u578b\u200b:</p> <ul> <li>m.space</li> </ul> <p>\u200b\u901a\u904e\u200b\u4f7f\u7528\u200b\u547d\u540d\u200b\u7a7a\u9593\u200b\u6a19\u8b58\u78bc\u200b,\u200b\u5141\u8a31\u200b\u672a\u6307\u5b9a\u200b\u7684\u200b\u623f\u9593\u200b\u985e\u578b\u200b\u3002</p>"},{"location":"chat/client_server/#82","title":"8.2 \u200b\u5275\u9020","text":"<p>\u200b\u7576\u623f\u9593\u200b \u200b\u5df2\u200b\u5275\u5efa\u200b,\u200b\u7528\u4f5c\u200b\u6b64\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u5716\u200b\u7684\u200b\u6839\u200b\u3002\u200b\u9019\u200b \u200b\u4e8b\u4ef6\u200b\u9084\u6709\u200b\u4e00\u500b\u200b\u91d1\u200b\u9470\u200b,\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b ID \u200b\u9020\u7269\u4e3b\u200b\u3002\u200b\u5b83\u200b\u9084\u5c07\u200b\u751f\u6210\u200b\u5176\u4ed6\u200b\u5e7e\u500b\u200b\u4e8b\u4ef6\u200b\u4ee5\u200b\u7ba1\u7406\u200b \u200b\u6b64\u200b\u623f\u9593\u200b\u7684\u200b\u8a31\u53ef\u6b0a\u200b\u3002\u200b\u9019\u200b\u5305\u62ec\u200b:m.room.createcreator</p> <ul> <li>m.room.power_levels:\u200b\u8a2d\u7f6e\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u548c\u200b\u6240\u200b\u9700\u200b\u529f\u7387\u200b \u200b\u623f\u9593\u200b\u5167\u200b\u5404\u7a2e\u200b\u64cd\u4f5c\u200b\u7684\u200b\u7d1a\u200b\u5225\u200b,\u200b\u4f8b\u5982\u200b\u767c\u9001\u200b\u4e8b\u4ef6\u200b\u3002</li> <li>m.room.join_rules:\u200b\u623f\u9593\u200b\u662f\u5426\u200b\"\u200b\u50c5\u9650\u9080\u200b\u8acb\u200b\"\u3002</li> </ul> <p>\u200b\u6709\u95dc\u200b\u9019\u4e9b\u200b\u6d3b\u52d5\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u8cc7\u8a0a\u200b,\u200b\u8acb\u200b\u53c3\u95b1\u200b\u6703\u200b\u8b70\u5ba4\u200b\u6d3b\u52d5\u200b\u3002\u200b\u81ea\u200b \u200b\u5275\u200b\u5efa\u623f\u200b\u9593\u200b\u6642\u200b,\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5fc5\u9808\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b API\u3002</p>"},{"location":"chat/client_server/#post-_matrixclientv3createroom","title":"POST /_matrix/client/v3/createRoom","text":"<p>\u200b\u5275\u5efa\u200b\u5177\u6709\u200b\u5404\u7a2e\u200b\u914d\u7f6e\u200b\u9078\u9805\u200b\u7684\u200b\u65b0\u623f\u200b\u9593\u200b\u3002</p> <p>\u200b\u4f3a\u670d\u5668\u200b\u5fc5\u9808\u200b\u5728\u200b\u5275\u5efa\u6642\u200b\u61c9\u7528\u200b\u6b63\u5e38\u200b\u72c0\u614b\u200b\u89e3\u6790\u200b\u898f\u5247\u200b \u200b\u65b0\u623f\u200b\u9593\u200b,\u200b\u5305\u62ec\u200b\u6aa2\u67e5\u200b\u6bcf\u500b\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u3002\u200b\u5b83\u200b\u5fc5\u9808\u200b \u200b\u4f9d\u200b\u4ee5\u4e0b\u200b\u9806\u5e8f\u200b\u61c9\u7528\u200b\u8acb\u6c42\u200b\u96b1\u542b\u200b\u7684\u200b\u4e8b\u4ef6\u200b:</p> <ol> <li> <p>\u200b\u4e8b\u4ef6\u200b\u672c\u8eab\u200b\u3002\u200b\u5fc5\u9808\u200b\u662f\u200b \u200b\u623f\u9593\u200b\u3002m.room.create</p> </li> <li> <p>\u200b\u5efa\u7acb\u200b\u8005\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u9019\u662f\u200b \u200b\u9700\u8981\u200b,\u200b\u4ee5\u4fbf\u200b\u53ef\u4ee5\u200b\u767c\u9001\u200b\u5176\u9918\u200b\u4e8b\u4ef6\u200b\u3002m.room.member</p> </li> <li> <p>\u200b\u9ed8\u8a8d\u200b\u4e8b\u4ef6\u200b,\u200b\u70ba\u200b\u623f\u9593\u200b\u5efa\u7acb\u200b\u8005\u200b\u63d0\u4f9b\u200b \uff08\u200b\u800c\u200b\u4e0d\u662f\u200b\u5176\u4ed6\u200b\u6210\u54e1\u200b\uff09\u200b\u767c\u9001\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u8a31\u53ef\u6b0a\u200b\u3002\u200b\u91cd\u5beb\u200b \u200b\u6309\u200b\u53c3\u6578\u200b\u3002m.room.power_levelspower_level_content_override</p> </li> <li> <p>\u200b\u5982\u679c\u200b\u7d66\u5b9a\u200b,\u200b\u5247\u70ba\u200b\u4e8b\u4ef6\u200b\u3002m.room.canonical_aliasroom_alias_name</p> </li> <li> <p>\u200b\u7531\u200b\u8a2d\u7f6e\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u76ee\u524d\u200b,\u200b\u9019\u4e9b\u200b\u662f\u200b , \u200b\u548c\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u3002presetm.room.join_rulesm.room.history_visibilitym.room.guest_access</p> </li> <li> <p>\u200b\u4e2d\u200b\u5217\u51fa\u200b\u7684\u200b\u4e8b\u4ef6\u200b,\u200b\u6309\u200b\u5176\u200b\u9806\u5e8f\u200b\u6392\u5217\u200b \u200b\u4e0a\u5e02\u200b\u3002initial_state</p> </li> <li> <p>\u200b\u548c\u200b \uff08 \u200b\u548c\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\uff09\u200b\u6240\u96b1\u542b\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002nametopicm.room.namem.room.topic</p> </li> <li> <p>\u200b\u9080\u8acb\u200b\u548c\u200b \uff08 with and \uff09 \u200b\u6240\u96b1\u542b\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002inviteinvite_3pidm.room.membermembership: invitem.room.third_party_invite</p> </li> </ol> <p>\u200b\u4f3a\u670d\u5668\u200b\u5c07\u5728\u200b\u623f\u9593\u200b\u5167\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b,\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b \u200b\u8acb\u6c42\u200b\u4f7f\u7528\u8005\u200b\u4f5c\u70ba\u200b\u5efa\u7acb\u200b\u8005\u200b,\u200b\u4ee5\u53ca\u200b\u4e2d\u200b\u63d0\u4f9b\u200b\u7684\u200b\u5176\u4ed6\u200b\u5bc6\u9470\u200b\u3002m.room.createcreation_content</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"creation_content\": {\n    \"m.federate\": false\n  },\n  \"name\": \"The Grand Duke Pub\",\n  \"preset\": \"public_chat\",\n  \"room_alias_name\": \"thepub\",\n  \"topic\": \"All about happy hour\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"room_id\": \"!sefiuhWgwghwWgh:example.com\"\n}\n</code></pre> <p>8.3 \u200b\u623f\u9593\u200b\u5225\u540d\u200b \u200b\u4f3a\u670d\u5668\u200b\u53ef\u4ee5\u200b\u8a17\u200b\u7ba1\u200b\u5177\u6709\u200b\u4eba\u985e\u200b\u53cb\u597d\u200b\u540d\u7a31\u200b\u7684\u200b\u623f\u9593\u200b\u7684\u200b\u5225\u540d\u200b\u3002\u200b\u5225\u540d\u200b \u200b\u63a1\u53d6\u200b\u5f62\u5f0f\u200b.#friendlyname:server.name</p> <p>\u200b\u7531\u200b\u65bc\u200b\u623f\u9593\u200b\u5225\u540d\u200b\u7684\u200b\u7bc4\u570d\u200b\u9650\u5b9a\u200b\u70ba\u200b\u7279\u5b9a\u200b\u7684\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u529f\u80fd\u200b\u8b8a\u6578\u200b\u540d\u7a31\u200b,\u200b\u56e0\u6b64\u200b\u5b83\u200b\u662f\u200b \u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u53ef\u80fd\u200b\u6703\u200b\u62d2\u7d55\u200b\u5728\u200b \u200b\u4e0a\u7dad\u8b77\u200b\u5225\u540d\u200b\u7684\u200b\u5617\u8a66\u200b \u200b\u5176\u4ed6\u200b\u529f\u80fd\u200b\u8b8a\u6578\u200b\u540d\u7a31\u200b\u3002\u200b\u6b64\u898f\u7bc4\u200b\u4e0d\u200b\u63d0\u4f9b\u200b \u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b,\u200b\u7528\u200b\u65bc\u200b\u5411\u200b\u5176\u4ed6\u200b\u4f3a\u670d\u5668\u200b\u767c\u9001\u200b\u66f4\u65b0\u200b\u8acb\u6c42\u200b\u3002\u200b\u7136\u800c\u200b \u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u5fc5\u9808\u200b\u8655\u200b\u7406\u89e3\u200b\u6790\u200b\u5176\u4ed6\u200b\u5225\u540d\u200b\u7684\u200b\u8acb\u6c42\u200b \u200b\u4f3a\u670d\u5668\u200b;\u200b\u5982\u200b\u6709\u200b\u5fc5\u8981\u200b,\u200b\u4ed6\u5011\u200b\u61c9\u200b\u4f7f\u7528\u200b\u806f\u5408\u200b\u8eab\u4efd\u200b\u9a57\u8b49\u200b API \u200b\u57f7\u884c\u200b\u6b64\u200b\u64cd\u4f5c\u200b\u3002GET</p> <p>\u200b\u4f46\u662f\u200b,\u200b\u6a94\u5ba4\u200b\u4e0d\u6703\u200b\u5132\u5b58\u200b\u6a94\u5ba4\u200b\u4e2d\u200b\u5b58\u5728\u200b\u7684\u200b\u6240\u6709\u200b\u5225\u540d\u200b\u7684\u200b\u6e05\u55ae\u200b \u200b\u5177\u6709\u200b\u76f8\u95dc\u200b\u8a31\u53ef\u6b0a\u200b\u7684\u200b\u804a\u5929\u5ba4\u200b\u6210\u54e1\u200b\u53ef\u4ee5\u200b\u767c\u200b\u4f48\u200b\u9996\u9078\u200b \u200b\u901a\u904e\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u5225\u540d\u200b\u3002\u200b\u4e2d\u200b\u7684\u200b\u5225\u540d\u200b \u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u61c9\u200b\u6307\u5411\u200b\u5728\u200b\u5176\u4e2d\u200b\u767c\u200b\u4f48\u200b\u5b83\u5011\u200b\u7684\u200b\u623f\u9593\u200bID, \u200b\u4f46\u662f\u200b,\u200b\u96a8\u8457\u200b\u6642\u9593\u200b\u7684\u200b\u63a8\u79fb\u200b,\u200b\u623f\u9593\u200b\u5225\u540d\u200b\u53ef\u80fd\u200b\u6703\u200b\u6f02\u79fb\u200b\u5230\u200b\u5176\u4ed6\u200b\u623f\u9593\u200b ID\u3002 \u200b\u7528\u6236\u200b\u7aef\u200b\u4e0d\u61c9\u200b\u5c07\u5225\u200b\u540d\u8996\u200b\u70ba\u200b\u6e96\u78ba\u200b\u3002\u200b\u4ed6\u5011\u200b\u61c9\u8a72\u200b\u88ab\u200b\u6aa2\u67e5\u200b \u200b\u5728\u200b\u4f7f\u7528\u200b\u5b83\u5011\u200b\u6216\u200b\u8207\u200b\u5176\u4ed6\u200b\u7528\u6236\u200b\u5171\u7528\u200b\u4e4b\u524d\u200b\u3002\u200b\u5982\u679c\u200b\u623f\u9593\u200b\u770b\u200b\u8d77\u4f86\u200b \u200b\u5177\u6709\u200b\u7684\u200b\u623f\u9593\u200b\u5225\u540d\u200b,\u200b\u9019\u61c9\u200b\u8a72\u200b\u88ab\u200b\u6aa2\u67e5\u200b\u5230\u200b \u200b\u78ba\u4fdd\u200b\u623f\u9593\u200b\u7684\u200bID\u200b\u8207\u200b\u5f9e\u200b \u200b\u8acb\u6c42\u200b\u3002m.room.canonical_alias#alias: example.comroom_id</p>"},{"location":"chat/client_server/#get-_matrixclientv3directoryroomroomalias","title":"GET /_matrix/client/v3/directory/room/{roomAlias}","text":"<p>\u200b\u8acb\u6c42\u200b\u4f3a\u670d\u5668\u200b\u5c07\u6703\u200b\u8b70\u5ba4\u200b\u5225\u540d\u200b\u89e3\u6790\u200b\u70ba\u6703\u200b\u8b70\u5ba4\u200bID\u3002</p> <p>\u200b\u4f3a\u670d\u5668\u200b\u5c07\u200b\u4f7f\u7528\u200b\u806f\u5408\u200b API \u200b\u89e3\u6790\u200b\u5225\u540d\u200b,\u200b\u5982\u679c\u200b \u200b\u5225\u540d\u200b\u7684\u200b\u57df\u200b\u90e8\u5206\u200b\u8207\u200b\u4f3a\u670d\u5668\u200b\u81ea\u5df1\u200b\u7684\u200b\u4e0d\u200b\u5c0d\u200b\u61c9\u200b \u200b\u57df\u200b\u3002</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"room_id\": \"!abnjk1jdasj98:capuchins.com\",\n  \"servers\": [\n    \"capuchins.com\",\n    \"matrix.org\",\n    \"another.com\"\n  ]\n}\n</code></pre>"},{"location":"chat/client_server/#put-_matrixclientv3directoryroomroomalias","title":"PUT /_matrix/client/v3/directory/room/{roomAlias}","text":"<p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"room_id\": \"!abnjk1jdasj98:capuchins.com\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#delete-_matrixclientv3directoryroomroomalias","title":"DELETE /_matrix/client/v3/directory/room/{roomAlias}","text":"<p>\u200b\u522a\u9664\u200b\u623f\u9593\u200b\u5225\u540d\u200b\u5230\u200b\u623f\u9593\u200bID\u200b\u7684\u200b\u6620\u5c04\u200b\u3002</p> <p>\u200b\u4f3a\u670d\u5668\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u5728\u200b\u6b64\u8655\u200b\u5be6\u65bd\u984d\u200b\u5916\u200b\u7684\u200b\u8a2a\u554f\u200b\u63a7\u5236\u200b\u6aa2\u67e5\u200b,\u200b\u4f8b\u5982\u200b \u200b\u804a\u5929\u5ba4\u200b\u5225\u540d\u200b\u53ea\u80fd\u200b\u7531\u200b\u5176\u200b\u5efa\u7acb\u200b\u8005\u200b\u6216\u200b\u4f3a\u670d\u5668\u200b\u7ba1\u7406\u200b\u54e1\u200b\u522a\u9664\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u200b:\u200b\u4f3a\u670d\u5668\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u5728\u200b\u522a\u9664\u200b\u5225\u540d\u200b\u6642\u200b\u66f4\u65b0\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u200b\u7684\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u9078\u64c7\u200b\u66f4\u65b0\u200b \u200b\u5efa\u8b70\u200b\u4f7f\u7528\u200b\u898f\u7bc4\u5225\u200b\u540d\u200b\u4e8b\u4ef6\u200b,\u200b\u9664\u4e86\u200b\u5176\u200b\u5176\u4ed6\u200b\u76f8\u95dc\u200b\u8a31\u53ef\u6b0a\u200b\u5916\u200b \u200b\u6aa2\u67e5\u200b,\u200b\u522a\u9664\u200b\u5225\u200b\u540d\u4e26\u200b\u8fd4\u56de\u200b\u6210\u529f\u200b\u56de\u61c9\u200b,\u200b\u5373\u200b\u4f7f\u7528\u200b\u6236\u200b\u6c92\u200b\u6709\u200b \u200b\u6709\u6b0a\u200b\u66f4\u65b0\u200b\u4e8b\u4ef6\u200b\u3002alt_aliasesm.room.canonical_aliasm.room.canonical_alias</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3roomsroomidaliases","title":"GET /_matrix/client/v3/rooms/{roomId}/aliases","text":"<p>\u200b\u7372\u53d6\u200b\u7531\u200b\u672c\u5730\u200b\u4f3a\u670d\u5668\u200b\u7dad\u8b77\u200b\u7684\u200b\u5225\u540d\u200b\u6e05\u55ae\u200b \u200b\u7d66\u4e86\u200b\u7a7a\u9593\u200b\u3002</p> <p>\u200b\u6b64\u7d42\u200b\u7d50\u9ede\u200b\u53ef\u7531\u6703\u200b\u8b70\u5ba4\u200b\uff08\u200b\u5916\u90e8\u200b\uff09\u200b\u4e2d\u200b\u7684\u200b\u7528\u6236\u200b\u8abf\u7528\u200b \u200b\u4f7f\u7528\u8005\u200b\u6703\u200b\u6536\u5230\u200b\u932f\u8aa4\u200b\u56de\u61c9\u200b\uff09\u3002\u200b\u5982\u679c\u200b\u623f\u9593\u200b\u6620\u5c04\u200b\u5230\u200b ,\u200b\u5247\u200b\u4efb\u610f\u200b \u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u8abf\u7528\u200b\u6b64\u7d42\u200b\u7d50\u9ede\u200b\u3002M_FORBIDDENm.room.history_visibilityworld_readable</p> <p>\u200b\u4f3a\u670d\u5668\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u5728\u200b\u6b64\u8655\u200b\u5be6\u65bd\u984d\u200b\u5916\u200b\u7684\u200b\u8a2a\u554f\u200b\u63a7\u5236\u200b\u6aa2\u67e5\u200b, \u200b\u4f8b\u5982\u200b,\u200b\u5141\u8a31\u200b\u4f3a\u670d\u5668\u200b\u7ba1\u7406\u200b\u54e1\u200b\u67e5\u770b\u200b\u5225\u540d\u200b,\u200b\u800c\u200b\u4e0d\u7ba1\u200b \u200b\u6703\u54e1\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u200b:\u200b\u5efa\u8b70\u200b\u7528\u6236\u200b\u7aef\u200b\u4e0d\u8981\u200b\u7a81\u51fa\u200b\u986f\u793a\u200b\u6b64\u5225\u200b\u540d\u6e05\u55ae\u200b \u200b\u56e0\u70ba\u200b\u5b83\u5011\u200b\u4e0d\u662f\u200b\u7b56\u5283\u200b\u7684\u200b,\u200b\u4e0d\u50cf\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u4e2d\u200b\u5217\u51fa\u200b\u7684\u200b\u90a3\u4e9b\u200b\u3002m.room.canonical_alias</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"aliases\": [\n    \"#somewhere:example.com\",\n    \"#another:example.com\",\n    \"#hat_trick:example.com\"\n  ]\n}\n</code></pre>"},{"location":"chat/client_server/#84","title":"8.4 \u200b\u8a31\u53ef\u6b0a","text":"<p>\u200b\u623f\u9593\u200b\u7684\u200b\u8a31\u53ef\u6b0a\u200b\u662f\u200b\u901a\u904e\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u7684\u200b\u6982\u5ff5\u200b\u5b8c\u6210\u200b\u7684\u200b - \u200b\u5f85\u200b\u8fa6\u4e8b\u9805\u200b \u200b\u7528\u6236\u200b\u5728\u200b\u623f\u9593\u200b\u5167\u200b\u7684\u200b\u4efb\u4f55\u200b\u64cd\u4f5c\u200b\u90fd\u200b\u5fc5\u9808\u200b\u5177\u6709\u200b\u5408\u9069\u200b\u7684\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u3002\u200b\u6b0a\u529b\u200b \u200b\u95dc\u5361\u4f5c\u200b\u70ba\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u5b58\u5132\u5728\u7d66\u200b\u5b9a\u623f\u200b\u9593\u200b\u4e2d\u200b\u3002\u200b\u529f\u7387\u200b\u6c34\u6e96\u200b \u200b\u64cd\u4f5c\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u548c\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u5728\u200b \u200b\u4e2d\u5b9a\u7fa9\u200b,\u200b\u5176\u4e2d\u200b\u9810\u8a2d\u200b\u4f7f\u7528\u8005\u200b\u548c\u200b\u7279\u5b9a\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u529f\u7387\u200b \u200b\u53ef\u4ee5\u200b\u8a2d\u7f6e\u7d1a\u200b\u5225\u200b\u3002\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b,\u200b\u6240\u6709\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u70ba\u200b 0,\u200b\u5176\u4ed6\u200b \u200b\u6bd4\u96fb\u6e90\u7d1a\u200b\u5225\u200b\u9810\u8a2d\u200b\u70ba\u200b 100 \u200b\u7684\u200b\u804a\u5929\u5ba4\u200b\u5efa\u7acb\u200b\u8005\u200b\u3002\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u6388\u4e88\u200b \u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b\u5c07\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u63d0\u9ad8\u200b\u5230\u200b\u81ea\u5df1\u200b\u7684\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u3002\u200b\u70ba\u200b \u200b\u4f8b\u5982\u200b,\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u70ba\u200b50\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b A \u200b\u53ef\u4ee5\u200b\u63d0\u9ad8\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b \u200b\u4f7f\u7528\u8005\u200b B \u200b\u7684\u200b\u6700\u9ad8\u200b\u7b49\u7d1a\u200b\u70ba\u200b 50\u3002\u200b\u8ddf\u200b\u8e64\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u529f\u7387\u200b\u6c34\u6e96\u200b \u200b\u6bcf\u500b\u200b\u623f\u9593\u200b,\u200b\u5373\u4f7f\u200b\u4f7f\u7528\u8005\u200b\u4e0d\u200b\u5728\u200b\u623f\u9593\u200b\u4e2d\u200b\u3002\u200b\u5305\u542b\u200b\u7684\u200b\u91d1\u200b\u9470\u200b \u200b\u5728\u200b\u78ba\u5b9a\u200b\u67d0\u4e9b\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6c34\u6e96\u200b \u200b\u8e22\u200b,\u200b\u7981\u6b62\u200b\u548c\u200b\u767c\u9001\u200b\u570b\u5bb6\u200b\u4e8b\u4ef6\u200b\u7b49\u200b\u64cd\u4f5c\u200b\u3002\u200b\u6709\u95dc\u200b\u8a73\u7d30\u200b\u8cc7\u8a0a\u200b,\u200b\u8acb\u200b\u53c3\u95b1\u200bm.room.power_levels\u3002m.room.power_levelsm.room.power_levels</p> <p>\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u70ba\u200b\u7279\u5b9a\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u5206\u914d\u200b\u540d\u7a31\u200b\u3002\u200b\u4e00\u5efa\u8b70\u200b \u200b\u6620\u5c04\u200b\u5982\u4e0b\u200b:- 0 \u200b\u4f7f\u7528\u8005\u200b - 50 \u200b\u7248\u4e3b\u200b - 100 \u200b\u7ba1\u7406\u200b\u54e1\u200b</p>"},{"location":"chat/client_server/#85","title":"8.5 \u200b\u6a94\u5ba4\u200b\u6210\u54e1\u8cc7\u683c","text":"<p>\u200b\u4f7f\u7528\u8005\u200b\u9700\u8981\u200b\u662f\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u6210\u54e1\u200b\u624d\u80fd\u200b\u767c\u9001\u200b\u548c\u200b\u63a5\u6536\u200b\u4e8b\u4ef6\u200b \u200b\u5728\u200b\u90a3\u500b\u200b\u623f\u9593\u200b\u91cc\u200b\u3002\u200b\u4f7f\u7528\u8005\u200b\u53ef\u80fd\u200b\u8655\u200b\u65bc\u200b\u591a\u7a2e\u200b\u72c0\u614b\u200b,\u200b\u5728\u200b \u200b\u8207\u200b\u623f\u9593\u200b\u7684\u95dc\u200b\u4fc2\u200b:</p> <ul> <li>\u200b\u4e0d\u76f8\u95dc\u200b\uff08\u200b\u4f7f\u7528\u8005\u200b\u7121\u6cd5\u200b\u5728\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u50b3\u200b\u9001\u200b\u6216\u200b\u63a5\u6536\u200b\u4e8b\u4ef6\u200b\uff09</li> <li>\u200b\u6572\u9580\u200b\uff08\u200b\u4f7f\u7528\u8005\u200b\u5df2\u200b\u8acb\u6c42\u200b\u53c3\u8207\u200b\u623f\u9593\u200b,\u200b\u4f46\u200b \u200b\u5c1a\u200b\u4e0d\u200b\u88ab\u200b\u5141\u8a31\u200b \uff09</li> <li>\u200b\u5df2\u200b\u9080\u200b\u8acb\u200b\uff08\u200b\u4f7f\u7528\u8005\u200b\u5df2\u200b\u88ab\u200b\u9080\u200b\u8acb\u200b\u53c3\u200b\u8207\u200b\u804a\u5929\u5ba4\u200b,\u200b\u4f46\u200b \u200b\u5c1a\u672a\u200b\u53c3\u8207\u200b\uff09</li> <li>\u200b\u5df2\u200b\u52a0\u5165\u200b\uff08\u200b\u4f7f\u7528\u8005\u200b\u53ef\u4ee5\u200b\u5728\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u50b3\u200b\u9001\u200b\u8207\u200b\u63a5\u6536\u200b\u4e8b\u4ef6\u200b\uff09</li> <li>\u200b\u7981\u6b62\u200b\uff08\u200b\u4e0d\u5141\u8a31\u200b\u4f7f\u7528\u8005\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b\uff09</li> </ul> <p>\u200b\u6709\u200b\u4e00\u4e9b\u200b\u503c\u5f97\u6ce8\u610f\u200b\u7684\u200b\u4f8b\u5916\u200b\u60c5\u6cc1\u200b\u5141\u8a31\u200b\u672a\u200b\u52a0\u5165\u200b\u7684\u200b\u6210\u54e1\u200b \u200b\u5728\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u50b3\u200b\u9001\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u623f\u9593\u200b:</p> <ul> <li> <p>\u200b\u5e0c\u671b\u200b\u62d2\u7d55\u200b\u9080\u8acb\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u5c07\u200b\u4f7f\u7528\u200b \u200b\u767c\u9001\u200b\u5e36\u200b\u6709\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u4ed6\u5011\u200b\u4e00\u5b9a\u200b\u662f\u200b\u5148\u200b\u88ab\u200b\u9080\u200b\u8acb\u200b\u7684\u200b\u3002m.room.membercontent.membershipleave</p> </li> <li> <p>\u200b\u5982\u679c\u200b\u623f\u9593\u200b\u5141\u8a31\u200b,\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u767c\u9001\u200b\u5e36\u200b\u6709\u200b of \u200b\u7684\u200b\u4e8b\u4ef6\u200b\u4f86\u200b\u6572\u200b\u623f\u9593\u200b\u3002\u200b\u9019\u662f\u200b\u4f7f\u7528\u8005\u200b\u767c\u51fa\u200b\u7684\u200b\u9080\u8acb\u200b\u8acb\u6c42\u200b\u3002m.room.membercontent.membershipknock</p> </li> <li> <p>\u200b\u8981\u200b\u6536\u56de\u200b\u4e4b\u524d\u200b\u7684\u200b\u6572\u9580\u8072\u200b,\u200b\u7528\u6236\u200b\u5c07\u767c\u200b\u9001\u985e\u200b\u4f3c\u200b\u65bc\u200b \u200b\u62d2\u7d55\u200b\u9080\u8acb\u200b\u3002leave</p> </li> </ul> <p>\u200b\u6709\u4e9b\u200b\u804a\u5929\u5ba4\u200b\u8981\u6c42\u200b\u4f7f\u7528\u8005\u200b\u5728\u200b\u52a0\u5165\u200b\u4e4b\u524d\u200b\u5148\u200b\u53d7\u9080\u200b\u52a0\u5165\u200b; \u200b\u5176\u4ed6\u4eba\u200b\u5141\u8a31\u200b\u4efb\u4f55\u4eba\u200b\u52a0\u5165\u200b\u3002\u200b\u7d66\u5b9a\u200b\u7684\u200b\u804a\u5929\u5ba4\u200b\u662f\u5426\u200b\u70ba\u200b\"\u200b\u50c5\u9650\u200b\u53d7\u9080\u8005\u200b\" \u200b\u623f\u9593\u200b\u7531\u200b\u623f\u9593\u200b\u914d\u7f6e\u200b\u9375\u200b\u78ba\u5b9a\u200b\u3002\u200b\u5b83\u200b\u53ef\u4ee5\u200b \u200b\u5177\u6709\u200b\u4ee5\u4e0b\u200b\u503c\u200b\u4e4b\u4e00\u200b:m.room.join_rules</p> <p>public\u200b\u9019\u500b\u200b\u623f\u9593\u200b\u53ef\u4f9b\u200b\u4efb\u4f55\u4eba\u200b\u514d\u8cbb\u200b\u52a0\u5165\u200b,\u200b\u7121\u9700\u200b\u9080\u8acb\u200b\u3002</p> <p>invite\u200b\u53ea\u6709\u200b\u5728\u200b\u60a8\u200b\u88ab\u200b\u9080\u200b\u8acb\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u624d\u80fd\u200b\u52a0\u5165\u200b\u6b64\u200b\u623f\u9593\u200b\u3002</p> <p>knock\u200b\u6b64\u200b\u623f\u9593\u200b\u53ea\u6709\u200b\u5728\u200b\u60a8\u200b\u88ab\u200b\u9080\u200b\u8acb\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u624d\u80fd\u200b\u52a0\u5165\u200b,\u200b\u4e26\u5141\u8a31\u200b\u4efb\u4f55\u4eba\u200b \u200b\u8acb\u6c42\u200b\u9080\u8acb\u200b\u52a0\u5165\u200b\u6703\u8b70\u5ba4\u200b\u3002\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u6b64\u806f\u63a5\u200b\u898f\u5247\u50c5\u200b\u53ef\u7528\u200b \u200b\u5728\u200b\u652f\u63f4\u200b\u6572\u9580\u200b\u7684\u200b\u623f\u9593\u200b\u7248\u672c\u200b\u4e2d\u200b\u3002</p> <p>[v1.2 \u200b\u4e2d\u200b\u65b0\u589e\u200b]</p> <p>restricted\u200b\u5982\u679c\u200b\u60a8\u200b\u88ab\u200b\u9080\u200b\u8acb\u200b\u6216\u200b\u60a8\u200b\u662f\u200b\u53e6\u200b\u4e00\u500b\u200b\u623f\u9593\u200b\u7684\u200b\u6210\u54e1\u200b,\u200b\u5247\u200b\u53ef\u4ee5\u200b\u52a0\u5165\u200b\u6b64\u200b\u623f\u9593\u200b \u200b\u52a0\u5165\u200b\u898f\u5247\u200b\u4e2d\u200b\u5217\u51fa\u200b\u7684\u200b\u623f\u9593\u200b\u3002\u200b\u5982\u679c\u200b\u4f3a\u670d\u5668\u200b\u7121\u6cd5\u9a57\u8b49\u200b\u4efb\u4f55\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b \u200b\u5217\u51fa\u200b\u7684\u200b\u623f\u9593\u200b,\u200b\u90a3\u9ebc\u200b\u60a8\u200b\u53ea\u80fd\u200b\u901a\u904e\u200b\u9080\u8acb\u200b\u52a0\u5165\u200b\u3002\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u6b64\u898f\u5247\u200b \u200b\u53ea\u61c9\u200b\u5728\u200b\u652f\u63f4\u200b\u5b83\u200b\u7684\u200b\u623f\u9593\u200b\u7248\u672c\u200b\u4e2d\u200b\u5de5\u4f5c\u200b\u3002</p> <p>[v1.3 \u200b\u4e2d\u200b\u65b0\u589e\u200b]</p> <p>knock_restricted\u200b\u9019\u500b\u200b\u623f\u9593\u200b\u53ef\u4ee5\u200b\u50cf\u200b\u4ee5\u524d\u200b\u4e00\u6a23\u200b\u9023\u63a5\u200b\u3002\u200b\u5982\u679c\u200b\u4f60\u200b \u200b\u4f7f\u7528\u200b\u6572\u9580\u200b\u8207\u200b\u623f\u9593\u200b\u4ea4\u4e92\u200b,\u200b\u898f\u5247\u200b\u751f\u6548\u200b,\u200b\u800c\u200b \u200b\u5617\u8a66\u200b\u5728\u200b\u6c92\u200b\u6709\u200b\u9080\u200b\u8acb\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b\u5c07\u61c9\u7528\u200b\u52a0\u5165\u200b\u898f\u5247\u200b\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u6b64\u898f\u5247\u50c5\u200b\u9069\u7528\u200b\u65bc\u200b\u652f\u63f4\u200b\u5b83\u200b\u7684\u200b\u623f\u9593\u200b\u7248\u672c\u200b\u3002restrictedknockknockrestricted</p> <p>\u200b\u6210\u54e1\u8cc7\u683c\u200b\u5141\u8a31\u200b\u7684\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u70ba\u200b: </p>"},{"location":"chat/client_server/#get-_matrixclientv3joined_rooms","title":"GET /_matrix/client/v3/joined_rooms","text":"<p>\u200b\u6b64\u200b API \u200b\u50b3\u56de\u200b\u4f7f\u7528\u8005\u200b\u76ee\u524d\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u6e05\u55ae\u200b\u3002</p> <pre><code>{\n  \"joined_rooms\": [\n    \"!foo:example.com\"\n  ]\n}\n</code></pre>"},{"location":"chat/client_server/#851","title":"8.5.1 \u200b\u9023\u63a5\u200b\u623f\u9593","text":""},{"location":"chat/client_server/#post-_matrixclientv3roomsroomidinvite","title":"POST /_matrix/client/v3/rooms/{roomId}/invite","text":"<p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u6b64\u200b API \u200b\u6709\u200b\u5169\u7a2e\u200b\u5f62\u5f0f\u200b,\u200b\u5206\u5225\u200b\u8a18\u9304\u200b\u3002 \u200b\u6b64\u200b\u7248\u672c\u200b\u7684\u200b API \u200b\u8981\u6c42\u200b\u9080\u8acb\u8005\u200b\u77e5\u9053\u200b\u77e9\u9663\u200b \u200b\u88ab\u200b\u9080\u200b\u8acb\u8005\u200b\u7684\u200b\u6a19\u8b58\u78bc\u200b\u3002\u200b\u53e6\u200b\u4e00\u500b\u200b\u8a18\u9304\u200b\u5728\u200b\u7b2c\u4e09\u65b9\u200b\u9080\u8acb\u200b\u90e8\u5206\u200b\u4e2d\u200b\u3002</p> <p>\u200b\u6b64\u200b API \u200b\u9080\u8acb\u200b\u7528\u6236\u200b\u53c3\u200b\u8207\u200b\u7279\u5b9a\u200b\u804a\u5929\u5ba4\u200b\u3002 \u200b\u5728\u200b\u4ed6\u5011\u200b\u5be6\u969b\u200b\u52a0\u5165\u200b \u200b\u623f\u9593\u200b\u3002</p> <p>\u200b\u53ea\u6709\u200b\u7576\u524d\u200b\u4f4d\u200b\u65bc\u200b\u7279\u5b9a\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u624d\u80fd\u200b\u9080\u8acb\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b \u200b\u52a0\u5165\u200b\u90a3\u500b\u200b\u623f\u9593\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u4f7f\u7528\u8005\u200b\u88ab\u200b\u9080\u200b\u8acb\u200b\u5230\u200b\u804a\u5929\u5ba4\u200b,\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u6703\u5c07\u200b\u4e8b\u4ef6\u200b\u8ffd\u52a0\u200b\u5230\u200b\u804a\u5929\u5ba4\u200b\u3002m.room.member</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"reason\": \"Welcome to the team!\",\n  \"user_id\": \"@cheeky_monkey:matrix.org\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3joinroomidoralias","title":"POST /_matrix/client/v3/join/{roomIdOrAlias}","text":"<p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u6b64\u200b API \u200b\u63a1\u200b\u7528\u623f\u200b\u9593\u200b ID \u200b\u6216\u200b\u5225\u540d\u200b,\u200b\u9019\u8207\u200b ./rooms/{roomId}/join</p> <p>\u200b\u6b64\u200b API \u200b\u555f\u52d5\u200b\u53c3\u200b\u8207\u200b\u7279\u5b9a\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\uff08\u200b\u5982\u679c\u200b\u8a72\u200b\u4f7f\u7528\u8005\u200b\uff09 \u200b\u88ab\u200b\u5141\u8a31\u200b\u53c3\u52a0\u200b\u8a72\u200b\u623f\u9593\u200b\u3002\u200b\u5728\u200b\u6b64\u200b\u8abf\u7528\u200b\u4e4b\u200b\u5f8c\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u662f\u200b \u200b\u5141\u8a31\u200b\u67e5\u770b\u200b\u623f\u9593\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u7576\u524d\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b,\u200b\u4ee5\u53ca\u200b\u6240\u6709\u200b\u5f8c\u200b\u7e8c\u200b\u4e8b\u4ef6\u200b \u200b\u8207\u200b\u804a\u5929\u5ba4\u200b\u95dc\u806f\u200b\u7684\u200b\u4e8b\u4ef6\u200b,\u200b\u76f4\u5230\u200b\u4f7f\u7528\u8005\u200b\u96e2\u958b\u200b\u804a\u5929\u5ba4\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u8005\u200b\u52a0\u5165\u200b\u6a94\u5ba4\u200b\u540e\u200b,\u200b\u8a72\u200b\u804a\u5929\u5ba4\u200b\u5c07\u4f5c\u200b\u70ba\u200b\u689d\u76ee\u200b\u986f\u793a\u200b\u5728\u200b /initialSync \u200b\u548c\u200b /sync API \u200b\u7684\u200b\u56de\u61c9\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"reason\": \"Looking for support\",\n  \"third_party_signed\": {\n    \"mxid\": \"@bob:example.org\",\n    \"sender\": \"@alice:example.org\",\n    \"signatures\": {\n      \"example.org\": {\n        \"ed25519:0\": \"some9signature\"\n      }\n    },\n    \"token\": \"random8nonce\"\n  }\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"room_id\": \"!d41d8cd:matrix.org\"\n}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3roomsroomidjoin","title":"POST /_matrix/client/v3/rooms/{roomId}/join","text":"<p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u6b64\u200b API \u200b\u9700\u8981\u200b\u6703\u8b70\u5ba4\u200b ID,\u200b\u800c\u200b\u4e0d\u662f\u200b\u5225\u540d\u200b\u3002 \u200b\u5982\u679c\u200b\u60a8\u200b\u6709\u200b\u6a94\u5ba4\u200b\u5225\u540d\u200b,\u200b\u5247\u200b\u5b58\u5728\u200b\u3002/join/{roomIdOrAlias}</p> <p>\u200b\u6b64\u200b API \u200b\u555f\u52d5\u200b\u53c3\u200b\u8207\u200b\u7279\u5b9a\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\uff08\u200b\u5982\u679c\u200b\u8a72\u200b\u4f7f\u7528\u8005\u200b\uff09 \u200b\u88ab\u200b\u5141\u8a31\u200b\u53c3\u52a0\u200b\u8a72\u200b\u623f\u9593\u200b\u3002\u200b\u5728\u200b\u6b64\u200b\u8abf\u7528\u200b\u4e4b\u200b\u5f8c\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u662f\u200b \u200b\u5141\u8a31\u200b\u67e5\u770b\u200b\u623f\u9593\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u7576\u524d\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b,\u200b\u4ee5\u53ca\u200b\u6240\u6709\u200b\u5f8c\u200b\u7e8c\u200b\u4e8b\u4ef6\u200b \u200b\u8207\u200b\u804a\u5929\u5ba4\u200b\u95dc\u806f\u200b\u7684\u200b\u4e8b\u4ef6\u200b,\u200b\u76f4\u5230\u200b\u4f7f\u7528\u8005\u200b\u96e2\u958b\u200b\u804a\u5929\u5ba4\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u8005\u200b\u52a0\u5165\u200b\u6a94\u5ba4\u200b\u540e\u200b,\u200b\u8a72\u200b\u804a\u5929\u5ba4\u200b\u5c07\u4f5c\u200b\u70ba\u200b\u689d\u76ee\u200b\u986f\u793a\u200b\u5728\u200b /initialSync \u200b\u548c\u200b /sync API \u200b\u7684\u200b\u56de\u61c9\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"reason\": \"Looking for support\",\n  \"third_party_signed\": {\n    \"mxid\": \"@bob:example.org\",\n    \"sender\": \"@alice:example.org\",\n    \"signatures\": {\n      \"example.org\": {\n        \"ed25519:0\": \"some9signature\"\n      }\n    },\n    \"token\": \"random8nonce\"\n  }\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"room_id\": \"!d41d8cd:matrix.org\"\n}\n</code></pre>"},{"location":"chat/client_server/#852","title":"8.5.2 \u200b\u96e2\u958b\u200b\u623f\u9593","text":"<p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u96e2\u958b\u200b\u804a\u5929\u5ba4\u200b\u4ee5\u200b\u505c\u6b62\u200b\u63a5\u6536\u200b\u8a72\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u4e00\u500b\u200b\u4f7f\u7528\u8005\u200b \u200b\u5fc5\u9808\u200b\u5728\u200b\u4ed6\u5011\u200b\u88ab\u200b\u9080\u200b\u8acb\u200b\u6216\u200b\u52a0\u5165\u200b\u623f\u9593\u200b\u4e4b\u524d\u200b \u200b\u6709\u200b\u8cc7\u683c\u200b\u96e2\u958b\u200b\u623f\u9593\u200b\u3002\u200b\u96e2\u958b\u200b\u4f7f\u7528\u8005\u200b\u6240\u5728\u200b\u7684\u200b\u623f\u9593\u200b \u200b\u9080\u8acb\u200b\u62d2\u7d55\u200b\u9080\u8acb\u200b,\u200b\u4e26\u4e14\u200b\u53ef\u4ee5\u200b\u6536\u56de\u200b\u6572\u9580\u8072\u200b\u3002\u200b\u7528\u6236\u200b\u96e2\u200b\u958b\u540e\u200b \u200b\u4e00\u500b\u200b\u623f\u9593\u200b,\u200b\u5b83\u5c07\u200b\u4e0d\u518d\u200b\u51fa\u73fe\u200b\u5728\u200b\u5c0d\u200b /sync API \u200b\u7684\u200b\u56de\u61c9\u200b\u4e2d\u200b,\u200b\u9664\u975e\u200b\u5b83\u200b\u662f\u200b \u200b\u901a\u904e\u200b\u5177\u6709\u200b\u6b04\u4f4d\u200b\u96c6\u200b\u7684\u200b\u904e\u6ffe\u5668\u200b\u986f\u5f0f\u200b\u8acb\u6c42\u200b \u200b\u81ea\u200b\u3002include_leavetrue</p> <p>\u200b\u7121\u8ad6\u200b\u4ed6\u5011\u200b\u662f\u5426\u200b\u771f\u7684\u200b\u52a0\u5165\u200b\u4e86\u200b\u623f\u9593\u200b,\u200b\u5982\u679c\u200b\u623f\u9593\u200b\u662f\u200b\u4e00\u500b\u200b \"\u200b\u50c5\u9650\u9080\u200b\u8acb\u200b\"\u200b\u804a\u5929\u5ba4\u200b \u200b\u4f7f\u7528\u8005\u200b\u9700\u8981\u200b\u91cd\u65b0\u200b\u9080\u8acb\u200b\u624d\u80fd\u200b \u200b\u91cd\u65b0\u52a0\u5165\u200b\u623f\u9593\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u8005\u200b\u9084\u200b\u53ef\u4ee5\u200b\u5fd8\u8a18\u200b\u4ed6\u5011\u200b\u96e2\u958b\u200b\u7684\u200b\u623f\u9593\u200b\u3002\u200b\u5ba2\u623f\u200b\u6709\u200b \u200b\u88ab\u200b\u907a\u5fd8\u6c38\u9060\u200b\u4e0d\u6703\u200b\u51fa\u73fe\u200b\u5c0d\u200b /sync API \u200b\u7684\u200b\u56de\u61c9\u200b, \u200b\u76f4\u5230\u200b\u4f7f\u7528\u8005\u200b\u91cd\u65b0\u52a0\u5165\u200b,\u200b\u91cd\u65b0\u200b\u9080\u8acb\u200b\u6216\u200b\u6572\u9580\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u8005\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u5f37\u5236\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b\u96e2\u958b\u200b\u623f\u9593\u200b\u3002\u200b\u9019\u662f\u200b\u53ef\u4ee5\u200b\u505a\u5230\u200b\u7684\u200b \u200b\u901a\u904e\u200b'\u200b\u8e22\u200b'\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b\u3002\u200b\u70ba\u200b\u6b64\u200b,\u200b\u57f7\u884c\u200b\u8e22\u7403\u200b\u7684\u200b\u7528\u6236\u200b\u5fc5\u9808\u200b \u200b\u5177\u6709\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u529f\u7387\u200b\u6c34\u6e96\u200b\u3002\u200b\u4e00\u65e6\u200b\u4f7f\u7528\u8005\u200b\u88ab\u200b\u8e22\u200b\u51fa\u200b,\u200b\u5247\u200b \u200b\u884c\u70ba\u200b\u8207\u200b\u81ea\u9858\u200b\u96e2\u958b\u200b\u662f\u200b\u4e00\u6a23\u200b\u7684\u200b\u3002\u200b\u5728\u200b \u200b\u7279\u5225\u200b\u662f\u200b,\u200b\u5982\u679c\u200b\u623f\u9593\u200b\u4e0d\u662f\u200b,\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u81ea\u7531\u200b\u91cd\u65b0\u52a0\u5165\u200b \"\u200b\u50c5\u9650\u9080\u200b\u8acb\u200b\"\u3002</p>"},{"location":"chat/client_server/#post-_matrixclientv3roomsroomidforget","title":"POST /_matrix/client/v3/rooms/{roomId}/forget","text":"<p>\u200b\u6b64\u200b API \u200b\u963b\u6b62\u200b\u4f7f\u7528\u8005\u200b\u8a18\u4f4f\u200b\u7279\u5b9a\u200b\u623f\u9593\u200b\u3002</p> <p>\u200b\u4e00\u822c\u200b\u4f86\u200b\u8aaa\u200b,\u200b\u6b77\u53f2\u200b\u662f\u200b\u99ed\u5ba2\u200b\u5e1d\u570b\u200b\u7684\u200b\u4e00\u7b49\u200b\u516c\u6c11\u200b\u3002\u200b\u5728\u200b\u6b64\u200b API \u200b\u4e4b\u200b\u5f8c\u200b \u200b\u88ab\u200b\u8abf\u7528\u200b,\u200b\u4f46\u662f\u200b,\u200b\u4f7f\u7528\u8005\u200b\u5c07\u7121\u6cd5\u200b\u518d\u200b\u6aa2\u7d22\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b \u200b\u5c0d\u200b\u65bc\u200b\u9019\u500b\u200b\u623f\u9593\u200b\u3002\u200b\u5982\u679c\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u7684\u200b\u6240\u6709\u200b\u7528\u6236\u200b\u90fd\u200b\u5fd8\u8a18\u200b\u4e86\u200b\u4e00\u500b\u200b\u623f\u9593\u200b,\u200b\u5247\u8a72\u200b\u623f\u9593\u200b\u662f\u200b \u200b\u7b26\u5408\u200b\u5f9e\u200b\u8a72\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u522a\u9664\u200b\u7684\u200b\u689d\u4ef6\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u4f7f\u7528\u8005\u200b\u7576\u524d\u200b\u5df2\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b,\u200b\u5247\u4ed6\u5011\u200b\u5fc5\u9808\u200b\u96e2\u958b\u200b\u804a\u5929\u5ba4\u200b \u200b\u5728\u200b\u8abf\u7528\u200b\u6b64\u200b API \u200b\u4e4b\u524d\u200b\u3002</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3roomsroomidleave","title":"POST /_matrix/client/v3/rooms/{roomId}/leave","text":"<p>\u200b\u6b64\u200b API \u200b\u963b\u6b62\u200b\u7528\u6236\u200b\u53c3\u200b\u8207\u200b\u7279\u5b9a\u200b\u804a\u5929\u5ba4\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u7528\u6236\u200b\u5df2\u7d93\u200b\u5728\u200b\u623f\u9593\u200b\u4e2d\u200b,\u200b\u4ed6\u5011\u200b\u5c07\u7121\u6cd5\u200b\u518d\u200b\u770b\u5230\u200b \u200b\u623f\u9593\u200b\u91cc\u200b\u6709\u200b\u65b0\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u5982\u679c\u200b\u804a\u5929\u5ba4\u200b\u9700\u8981\u200b\u9080\u8acb\u200b\u624d\u80fd\u200b\u52a0\u5165\u200b,\u200b\u5247\u200b \u200b\u9700\u8981\u200b\u91cd\u65b0\u200b\u9080\u8acb\u200b\u624d\u80fd\u200b\u91cd\u65b0\u52a0\u5165\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u4f7f\u7528\u8005\u200b\u88ab\u200b\u9080\u200b\u8acb\u200b\u52a0\u5165\u200b\u804a\u5929\u5ba4\u200b,\u200b\u4f46\u200b\u5c1a\u672a\u200b\u52a0\u5165\u200b,\u200b\u5247\u6b64\u200b\u547c\u53eb\u200b \u200b\u7528\u200b\u65bc\u200b\u62d2\u7d55\u200b\u9080\u8acb\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u8005\u200b\u4ecd\u200b\u88ab\u200b\u5141\u8a31\u200b\u5f9e\u200b\u623f\u9593\u200b\u4e2d\u6aa2\u7d22\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b \u200b\u4ed6\u5011\u200b\u4ee5\u524d\u200b\u88ab\u200b\u5141\u8a31\u200b\u770b\u5230\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"reason\": \"Saying farewell - thanks for the support!\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#post-_matrixclientv3roomsroomidkick","title":"POST /_matrix/client/v3/rooms/{roomId}/kick","text":"<p>\u200b\u5c07\u200b\u4f7f\u7528\u8005\u200b\u8e22\u200b\u51fa\u200b\u623f\u9593\u200b\u3002</p> <p>\u200b\u8abf\u7528\u200b\u65b9\u5fc5\u9808\u200b\u5177\u6709\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u529f\u7387\u200b\u7d1a\u5225\u200b\u624d\u80fd\u200b\u57f7\u884c\u200b\u6b64\u200b\u64cd\u4f5c\u200b\u3002</p> <p>\u200b\u8e22\u200b\u51fa\u200b\u4f7f\u7528\u8005\u200b\u6703\u5c07\u200b\u76ee\u6a19\u200b\u6210\u54e1\u200b\u7684\u200b\u6210\u54e1\u8cc7\u683c\u200b\u72c0\u614b\u200b\u8abf\u6574\u200b\u70ba\u200b \u200b\u81ea\u9078\u200b\u3002\u200b\u8207\u200b\u5176\u4ed6\u200b\u6210\u54e1\u8cc7\u683c\u200b\u66f4\u6539\u200b\u4e00\u6a23\u200b,\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u8abf\u6574\u200b \u200b\u901a\u904e\u200b\u5411\u200b\u767c\u51fa\u200b\u8acb\u6c42\u200b\u4f86\u200b\u986f\u793a\u200b\u76ee\u6a19\u200b\u6210\u54e1\u200b\u7684\u200b\u72c0\u614b\u200b\u3002leavereason/rooms/ /state/m.room.member/ <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"reason\": \"Telling unfunny jokes\",\n  \"user_id\": \"@cheeky_monkey:matrix.org\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#86","title":"8.6 \u200b\u5217\u51fa\u200b\u623f\u9593","text":""},{"location":"chat/client_server/#get-_matrixclientv3directorylistroomroomid","title":"GET /_matrix/client/v3/directory/list/room/{roomId}","text":"<p>\u200b\u7372\u53d6\u200b\u7d66\u5b9a\u200b\u6a94\u5ba4\u200b\u5728\u200b\u4f3a\u670d\u5668\u200b\u7684\u200b\u516c\u5171\u200b\u6703\u8b70\u5ba4\u200b\u76ee\u9304\u200b\u4e2d\u200b\u7684\u200b\u53ef\u898b\u6027\u200b\u3002</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"visibility\": \"public\"\n}\n</code></pre>"},{"location":"chat/client_server/#put-_matrixclientv3directorylistroomroomid","title":"PUT /_matrix/client/v3/directory/list/room/{roomId}","text":"<p>\u200b\u8a2d\u7f6e\u200b\u7d66\u5b9a\u200b\u804a\u5929\u5ba4\u200b\u5728\u200b\u4f3a\u670d\u5668\u200b\u516c\u5171\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u200b\u7684\u200b\u53ef\u898b\u6027\u200b \u200b\u76ee\u9304\u200b\u3002</p> <p>\u200b\u4f3a\u670d\u5668\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u5be6\u65bd\u984d\u200b\u5916\u200b\u7684\u200b\u8a2a\u554f\u200b\u63a7\u5236\u200b\u6aa2\u67e5\u200b \u200b\u4f8b\u5982\u200b,\u200b\u5728\u200b\u9019\u88e1\u200b,\u200b\u623f\u9593\u200b\u7684\u200b\u53ef\u898b\u6027\u200b\u53ea\u80fd\u200b\u901a\u904e\u200b\u4ee5\u4e0b\u200b\u65b9\u5f0f\u200b\u66f4\u6539\u200b \u200b\u804a\u5929\u5ba4\u200b\u5efa\u7acb\u200b\u8005\u200b\u6216\u200b\u4f3a\u670d\u5668\u200b\u7ba1\u7406\u200b\u54e1\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"visibility\": \"public\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3publicrooms","title":"GET /_matrix/client/v3/publicRooms","text":"<p>\u200b\u5217\u51fa\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u7684\u200b\u516c\u5171\u200b\u6703\u8b70\u5ba4\u200b\u3002</p> <p>\u200b\u6b64\u200b API \u200b\u8fd4\u56de\u200b\u5206\u9801\u200b\u56de\u61c9\u200b\u3002\u200b\u623f\u9593\u200b\u6309\u200b\u7de8\u865f\u200b\u6392\u5e8f\u200b \u200b\u52a0\u5165\u200b\u7684\u200b\u6210\u54e1\u200b,\u200b\u6700\u5927\u200b\u7684\u200b\u623f\u9593\u200b\u6392\u200b\u5728\u200b\u7b2c\u4e00\u4f4d\u200b\u3002</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"chunk\": [\n    {\n      \"avatar_url\": \"mxc://bleecker.street/CHEDDARandBRIE\",\n      \"guest_can_join\": false,\n      \"join_rule\": \"public\",\n      \"name\": \"CHEESE\",\n      \"num_joined_members\": 37,\n      \"room_id\": \"!ol19s:bleecker.street\",\n      \"room_type\": \"m.space\",\n      \"topic\": \"Tasty tasty cheese\",\n      \"world_readable\": true\n    }\n  ],\n  \"next_batch\": \"p190q\",\n  \"prev_batch\": \"p1902\",\n  \"total_room_count_estimate\": 115\n}\n</code></pre>"},{"location":"chat/client_server/#9","title":"9 \u200b\u7528\u6236\u200b\u6578\u64da","text":""},{"location":"chat/client_server/#91","title":"9.1 \u200b\u7528\u6236\u200b\u76ee\u9304","text":""},{"location":"chat/client_server/#post-_matrixclientv3user_directorysearch","title":"POST /_matrix/client/v3/user_directory/search","text":"<p>\u200b\u5c0d\u200b\u4f7f\u7528\u8005\u200b\u57f7\u884c\u200b\u641c\u7d22\u200b\u3002\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u53ef\u80fd\u200b \u200b\u78ba\u5b9a\u200b\u641c\u7d22\u200b\u54ea\u4e9b\u200b\u7528\u6236\u200b\u5b50\u96c6\u200b,\u200b\u4f46\u4e3b\u200b\u4f3a\u670d\u5668\u200b \u200b\u5fc5\u9808\u200b\u81f3\u5c11\u200b\u8003\u616e\u200b\u8acb\u6c42\u200b\u4f7f\u7528\u8005\u200b\u5171\u4eab\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b \u200b\u8207\u200b\u5c45\u4f4f\u200b\u5728\u200b\u516c\u5171\u200b\u623f\u9593\u200b\uff08\u200b\u5bb6\u5ead\u200b\u4f3a\u670d\u5668\u200b\u5df2\u77e5\u200b\uff09\u200b\u7684\u200b\u4eba\u200b\u7684\u200b\u623f\u9593\u200b\u3002 \u200b\u641c\u7d22\u200b\u5fc5\u9808\u200b\u8003\u616e\u200b\u672c\u5730\u200b\u4f7f\u7528\u8005\u200b\u5230\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b,\u200b\u4e26\u4e14\u200b\u61c9\u8a72\u200b \u200b\u5728\u200b\u641c\u7d22\u200b\u904e\u7a0b\u200b\u4e2d\u67e5\u200b\u8a62\u9060\u7aef\u200b\u4f7f\u7528\u8005\u200b\u3002</p> <p>\u200b\u641c\u7d22\u200b\u5c0d\u200b\u4f7f\u7528\u8005\u200b ID \u200b\u548c\u200b\u986f\u793a\u200b\u4e0d\u5340\u200b\u5206\u200b\u5927\u5c0f\u200b\u5beb\u200b \u200b\u540d\u7a31\u200b\u6700\u597d\u200b\u4f7f\u7528\u200b\u57fa\u200b\u65bc\u200b\u8acb\u6c42\u200b\u4e2d\u200b\u63d0\u4f9b\u200b\u7684\u200b\u6a19\u982d\u200b\uff08\u200b\u5982\u679c\u200b\u5b58\u5728\u200b\uff09\u200b\u78ba\u5b9a\u200b\u7684\u200b\u6392\u5e8f\u200b\u898f\u5247\u200b\u3002Accept-Language</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"limit\": 10,\n  \"search_term\": \"foo\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"limited\": false,\n  \"results\": [\n    {\n      \"avatar_url\": \"mxc://bar.com/foo\",\n      \"display_name\": \"Foo\",\n      \"user_id\": \"@foo:bar.com\"\n    }\n  ]\n}\n</code></pre>"},{"location":"chat/client_server/#92","title":"9.2 \u200b\u914d\u7f6e\u200b \u200b\u6a94","text":""},{"location":"chat/client_server/#get-_matrixclientv3profileuserid","title":"GET /_matrix/client/v3/profile/{userId}","text":"<p>\u200b\u7372\u53d6\u200b\u6b64\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u7d44\u5408\u200b\u914d\u7f6e\u200b\u6a94\u8cc7\u8a0a\u200b\u3002\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u6b64\u200b\u4ecb\u9762\u200b \u200b\u7372\u53d6\u200b\u4f7f\u7528\u8005\u200b\u81ea\u5df1\u200b\u7684\u200b\u500b\u200b\u4eba\u200b\u8cc7\u6599\u200b\u8cc7\u8a0a\u200b\u6216\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b;\u200b\u4e5f\u200b \u200b\u672c\u5730\u200b\u6216\u9060\u7aef\u200b\u5bb6\u5ead\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u3002\u200b\u6b64\u200b API \u200b\u53ef\u80fd\u200b\u6703\u200b\u8fd4\u56de\u200b\u4e0d\u662f\u200b \u200b\u53ea\u9650\u200b\u65bc\u200b\u6216\u200b \u3002displaynameavatar_url</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"avatar_url\": \"mxc://matrix.org/SDGdghriugerRg\",\n  \"displayname\": \"Alice Margatroid\"\n}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3profileuseridavatar_url","title":"GET /_matrix/client/v3/profile/{userId}/avatar_url","text":"<p>\u200b\u7372\u200b\u53d6\u7528\u200b\u6236\u200b\u7684\u200b\u982d\u50cf\u200b\u7db2\u5740\u200b\u3002\u200b\u6b64\u200b API \u200b\u53ef\u7528\u200b\u65bc\u200b\u7372\u53d6\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b \u200b\u64c1\u6709\u982d\u200b\u50cf\u200b\u7db2\u5740\u200b\u6216\u200b\u67e5\u8a62\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u7db2\u5740\u200b;\u200b\u672c\u5730\u200b\u6216\u200b \u200b\u5728\u200b\u9060\u7aef\u200b\u5bb6\u5ead\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u3002</p> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{\n  \"avatar_url\": \"mxc://matrix.org/SDGdghriugerRg\"\n}\n</code></pre>"},{"location":"chat/client_server/#put-_matrixclientv3profileuseridavatar_url","title":"PUT /_matrix/client/v3/profile/{userId}/avatar_url","text":"<p>\u200b\u6b64\u200b API \u200b\u8a2d\u5b9a\u200b\u7d66\u5b9a\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u982d\u50cf\u200b URL\u3002\u200b\u60a8\u200b\u5fc5\u9808\u200b\u5177\u6709\u200b\u4ee5\u4e0b\u200b\u6b0a\u9650\u200b:\u200b\u8a2d\u5b9a\u200b\u6b64\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u982d\u50cf\u200b URL,\u200b\u4f8b\u5982\u200b,\u200b\u60a8\u200b\u9700\u8981\u200b\u64c1\u6709\u200b\u4ed6\u5011\u200b\u7684\u200b .access_token</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"avatar_url\": \"mxc://matrix.org/wefh34uihSDRGhw34\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#get-_matrixclientv3profileuseriddisplayname","title":"GET /_matrix/client/v3/profile/{userId}/displayname","text":"<p>\u200b\u7372\u53d6\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u3002\u200b\u6b64\u200b API \u200b\u53ef\u7528\u200b\u65bc\u200b\u7372\u53d6\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b \u200b\u81ea\u5df1\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u6216\u200b\u67e5\u8a62\u200b\u5176\u4ed6\u200b\u7528\u6236\u200b\u7684\u200b\u540d\u7a31\u200b;\u200b\u672c\u5730\u200b\u6216\u200b \u200b\u5728\u200b\u9060\u7aef\u200b\u5bb6\u5ead\u200b\u4f3a\u670d\u5668\u200b\u4e0a\u200b\u3002</p> <pre><code>{\n  \"displayname\": \"Alice Margatroid\"\n}\n</code></pre>"},{"location":"chat/client_server/#put-_matrixclientv3profileuseriddisplayname","title":"PUT /_matrix/client/v3/profile/{userId}/displayname","text":"<p>\u200b\u6b64\u200b API \u200b\u8a2d\u5b9a\u200b\u7d66\u5b9a\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u3002\u200b\u60a8\u200b\u5fc5\u9808\u200b\u5177\u6709\u200b\u4ee5\u4e0b\u200b\u6b0a\u9650\u200b:\u200b\u8a2d\u5b9a\u200b\u6b64\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b,\u200b\u4f8b\u5982\u200b,\u200b\u60a8\u200b\u9700\u8981\u200b\u5177\u6709\u200b\u4ed6\u5011\u200b\u7684\u200b .access_token</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"displayname\": \"Alice Margatroid\"\n}\n</code></pre> <p>200 \u200b\u56de\u61c9\u200b</p> <pre><code>{}\n</code></pre>"},{"location":"chat/client_server/#921","title":"9.2.1 \u200b\u500b\u200b\u4eba\u200b\u8cc7\u6599\u200b\u8cc7\u8a0a\u8b8a\u200b\u66f4\u200b\u4e8b\u4ef6","text":"<p>\u200b\u56e0\u70ba\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u548c\u200b\u982d\u50cf\u200b\u8cc7\u8a0a\u200b\u5f88\u200b\u53ef\u80fd\u200b\u662f\u200b \u200b\u5728\u200b\u5ba2\u6236\u200b\u7aef\u200b\u986f\u793a\u200b\u7684\u200b\u8a31\u591a\u200b\u4f4d\u7f6e\u200b\u4f7f\u7528\u200b,\u200b\u5c0d\u200b\u9019\u4e9b\u200b\u6b04\u4f4d\u200b\u7684\u200b\u66f4\u6539\u200b\u6703\u5c0e\u81f4\u200b \u200b\u767c\u751f\u200b\u81ea\u52d5\u200b\u50b3\u64ad\u200b\u4e8b\u4ef6\u200b,\u200b\u901a\u77e5\u200b\u53ef\u80fd\u200b\u611f\u8208\u8da3\u200b\u7684\u200b\u4eba\u200b \u200b\u65b0\u50f9\u503c\u200b\u89c0\u200b\u7684\u200b\u5404\u65b9\u200b\u3002\u200b\u6b64\u200b\u66f4\u6539\u200b\u4f7f\u7528\u200b\u5169\u500b\u200b\u55ae\u7368\u200b\u7684\u200b \u200b\u6a5f\u5236\u200b:</p> <ul> <li>\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\uff08\u200b\u5177\u6709\u200b\u6210\u54e1\u8cc7\u683c\u200b\uff09\u200b\u88ab\u200b\u767c\u200b\u9001\u5230\u200b\u6bcf\u500b\u200b \u200b\u4f7f\u7528\u8005\u200b\u6240\u5c6c\u200b\u7684\u200b\u804a\u5929\u5ba4\u200b,\u200b\u4ee5\u200b\u66f4\u65b0\u200b \u200b\u548c\u200b \u3002m.room.memberjoindisplaynameavatar_url</li> <li>\u200b\u767c\u9001\u200b\u72c0\u614b\u200b\u66f4\u65b0\u200b,\u200b\u518d\u6b21\u200b\u5305\u542b\u200b \u200b\u548c\u200b\u9375\u200b\u7684\u200b\u65b0\u503c\u200b,\u200b\u6b64\u5916\u200b \u200b\u5230\u200b\u5305\u542b\u200b\u7576\u524d\u200b\u72c0\u614b\u200b\u7684\u200b\u5fc5\u9700\u200b\u9375\u200b \u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u3002m.presencedisplaynameavatar_urlpresence   \u200b\u7576\u200b\u4f7f\u7528\u8005\u200b\u4f7f\u7528\u200b\u6642\u200b,\u200b\u9019\u5169\u8005\u200b\u90fd\u200b\u61c9\u7531\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u81ea\u52d5\u200b\u5b8c\u6210\u200b \u200b\u6210\u529f\u200b\u66f4\u6539\u200b\u5176\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u6216\u982d\u200b\u50cf\u200b URL \u200b\u6b04\u4f4d\u200b\u3002</li> </ul> <p>\u200b\u6b64\u5916\u200b,\u200b\u7576\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u70ba\u200b\u81ea\u5df1\u200b\u767c\u51fa\u200b\u623f\u9593\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u4e8b\u4ef6\u200b\u6642\u200b \u200b\u7528\u6236\u200b,\u200b\u4ed6\u5011\u200b\u61c9\u8a72\u200b\u5728\u200b \u200b\u9019\u4e9b\u200b\u4e8b\u4ef6\u200b\u4f7f\u200b\u5ba2\u6236\u200b\u5df2\u7d93\u200b\u638c\u63e1\u200b\u4e86\u200b\u9019\u4e9b\u200b\u8a73\u7d30\u200b\u8cc7\u8a0a\u200b,\u200b\u4e26\u4e14\u200b \u200b\u4e0d\u5fc5\u200b\u57f7\u884c\u200b\u984d\u5916\u200b\u7684\u200b\u5f80\u8fd4\u200b\u4f86\u200b\u67e5\u8a62\u200b\u5b83\u200b\u3002</p>"},{"location":"chat/client_server/#10","title":"10 \u200b\u5b89\u5168","text":""},{"location":"chat/client_server/#101","title":"10.1 \u200b\u901f\u7387\u200b\u9650\u5236","text":"<p>\u200b\u5bb6\u5ead\u200b\u4f3a\u670d\u5668\u200b\u61c9\u5be6\u65bd\u200b\u901f\u7387\u200b\u9650\u5236\u200b\u4ee5\u200b\u964d\u4f4e\u200b\u98a8\u96aa\u200b \u200b\u91cd\u8f09\u200b\u3002\u200b\u5982\u679c\u200b\u8acb\u6c42\u200b\u56e0\u200b\u901f\u7387\u200b\u9650\u5236\u200b\u800c\u200b\u88ab\u200b\u62d2\u7d55\u200b,\u200b\u5247\u61c9\u200b \u200b\u50b3\u56de\u200b\u4ee5\u4e0b\u200b\u5f62\u5f0f\u200b\u7684\u200b\u6a19\u6e96\u200b\u932f\u8aa4\u200b\u56de\u61c9\u200b:</p> <pre><code>{\n  \"errcode\": \"M_LIMIT_EXCEEDED\",\n  \"error\": \"string\",\n  \"retry_after_ms\": integer (optional)\n}\n</code></pre> <p>\u200b\u61c9\u200b\u5305\u542b\u200b\u91d1\u9470\u200b\u4ee5\u200b\u544a\u8a34\u200b\u5ba2\u6236\u200b\u7aef\u200b\u591a\u9577\u200b\u6642\u9593\u200b \u200b\u4ed6\u5011\u200b\u5fc5\u9808\u200b\u5728\u200b\u5e7e\u200b\u6beb\u79d2\u200b\u5167\u200b\u7b49\u5f85\u200b,\u200b\u7136\u200b\u5f8c\u200b\u624d\u80fd\u200b\u91cd\u8a66\u200b\u3002retry_after_ms</p>"},{"location":"chat/client_server/#11_1","title":"11 \u200b\u6a21\u7d44","text":"<p>\u200b\u6a21\u7d44\u200b\u662f\u200b\u7528\u6236\u200b\u7aef\u200b-\u200b\u4f3a\u670d\u5668\u200b API \u200b\u7684\u200b\u4e00\u90e8\u5206\u200b,\u200b\u4e26\u975e\u200b\u901a\u7528\u200b \u200b\u6240\u6709\u200b\u7d42\u7d50\u9ede\u200b\u3002\u200b\u6a21\u7d44\u200b\u5728\u200b\u6b64\u200b\u898f\u7bc4\u4e2d\u200b\u56b4\u683c\u5b9a\u200b\u7fa9\u200b \u200b\u4e26\u4e14\u200b\u4e0d\u61c9\u200b\u88ab\u8aa4\u200b\u8a8d\u70ba\u200b\u662f\u200b\u5be6\u9a57\u6027\u200b\u64f4\u5c55\u200b\u6216\u200b\u53ef\u9078\u200b\u64f4\u5c55\u200b \u200b\u7279\u5fb5\u200b\u3002\u200b\u76f8\u5bb9\u200b\u7684\u200b\u4f3a\u670d\u5668\u200b\u5be6\u73fe\u200b\u5fc5\u9808\u200b\u652f\u63f4\u200b\u6240\u6709\u200b\u6a21\u7d44\u200b\u548c\u200b \u200b\u652f\u63f4\u200b\u898f\u7bc4\u200b\uff08\u200b\u9664\u975e\u200b\u5be6\u73fe\u200b\u50c5\u91dd\u200b\u5c0d\u200b\u7528\u6236\u200b\u7aef\u200b \u200b\u67d0\u4e9b\u200b\u914d\u7f6e\u200b\u6a94\u200b,\u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b,\u200b\u53ea\u6709\u200b\u90a3\u4e9b\u200b\u914d\u7f6e\u200b\u6a94\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6a21\u7d44\u200b \u200b\u5fc5\u9808\u200b\u5be6\u73fe\u200b\u529f\u80fd\u200b\u914d\u7f6e\u200b\u6a94\u200b\uff09\u3002\u200b\u5408\u898f\u200b\u7684\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5be6\u73fe\u200b \u200b\u5fc5\u9808\u200b\u652f\u63f4\u200b\u6240\u6709\u200b\u5fc5\u9700\u200b\u7684\u200b\u6a21\u7d44\u200b\u548c\u200b\u652f\u6301\u200b\u898f\u7bc4\u200b \u200b\u5b83\u200b\u6240\u91dd\u200b\u5c0d\u200b\u7684\u200b\u529f\u80fd\u200b\u914d\u7f6e\u200b\u6a94\u200b\u3002</p>"},{"location":"chat/client_server/#111_1","title":"11.1 \u200b\u529f\u80fd\u200b\u914d\u7f6e\u200b\u6a94","text":"<p>\u200b\u77e9\u9663\u200b\u652f\u63f4\u200b\u8a31\u591a\u200b\u4e0d\u540c\u200b\u985e\u578b\u200b\u7684\u200b\u7528\u6236\u200b\u7aef\u200b:\u200b\u4f86\u200b\u81ea\u200b\u5d4c\u5165\u5f0f\u200b\u7269\u806f\u7db2\u200b \u200b\u8a2d\u5099\u200b\u5230\u200b\u684c\u9762\u200b\u7528\u6236\u200b\u7aef\u200b\u3002\u200b\u4e26\u975e\u200b\u6240\u6709\u200b\u7528\u6236\u200b\u7aef\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u63d0\u4f9b\u200b\u76f8\u540c\u200b\u7684\u200b\u529f\u80fd\u200b \u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u5176\u4ed6\u200b\u7528\u6236\u200b\u7aef\u200b,\u200b\u4f8b\u5982\u200b\u7531\u200b\u65bc\u200b\u7f3a\u5c11\u200b\u7269\u7406\u200b\u786c\u9ad4\u200b,\u200b\u4f8b\u5982\u200b \u200b\u6709\u200b\u4e00\u500b\u200b\u87a2\u5e55\u200b\u3002\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u5c6c\u65bc\u591a\u500b\u200b\u914d\u7f6e\u200b\u6a94\u200b\u4e4b\u4e00\u200b,\u200b\u6bcf\u500b\u200b\u914d\u7f6e\u200b\u6a94\u200b \u200b\u914d\u7f6e\u200b\u6a94\u200b\u5305\u542b\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5fc5\u9808\u200b\u652f\u63f4\u200b\u7684\u200b\u4e00\u7d44\u200b\u529f\u80fd\u200b\u3002\u200b\u9019\u200b \u200b\u90e8\u5206\u200b\u8a73\u7d30\u4ecb\u7d39\u200b\u4e86\u200b\u4e00\u7d44\u200b'\u200b\u529f\u80fd\u200b\u914d\u7f6e\u200b\u6a94\u200b'\u3002\u200b\u5ba2\u6236\u200b\u61c9\u200b \u200b\u5b8c\u6574\u200b\u5730\u5be6\u73fe\u200b\u914d\u7f6e\u200b\u6a94\u200b,\u200b\u4ee5\u4fbf\u200b\u5c07\u5176\u200b\u5206\u985e\u200b\u70ba\u200b \u200b\u8a72\u200b\u914d\u7f6e\u200b\u6a94\u200b\u3002</p>"},{"location":"chat/client_server/#112_1","title":"11.2 \u200b\u5373\u6642\u200b\u901a\u8a0a","text":"<p>\u200b\u6b64\u6a21\u7d44\u200b\u589e\u52a0\u200b\u4e86\u200b\u5c0d\u200b\u5411\u200b\u623f\u9593\u200b\u767c\u9001\u200b\u4eba\u985e\u200b\u53ef\u8b80\u200b\u6d88\u606f\u200b\u7684\u200b\u652f\u63f4\u200b\u3002 \u200b\u5b83\u9084\u200b\u589e\u52a0\u200b\u4e86\u200b\u5c0d\u200b\u5c07\u4eba\u985e\u200b\u53ef\u8b80\u200b\u8cc7\u8a0a\u200b\u8207\u200b \u200b\u623f\u9593\u200b\u672c\u8eab\u200b,\u200b\u4f8b\u5982\u200b\u623f\u9593\u200b\u540d\u7a31\u200b\u548c\u200b\u4e3b\u984c\u200b\u3002</p>"},{"location":"chat/client_server/#1121","title":"11.2.1 \u200b\u4e8b\u4ef6","text":""},{"location":"chat/client_server/#mroommessage","title":"m.room.message","text":"<p>\u200b\u5728\u200b\u804a\u5929\u5ba4\u200b\u4e2d\u767c\u200b\u9001\u200b\u6d88\u606f\u200b\u6642\u200b\u4f7f\u7528\u200b\u6b64\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u6d88\u606f\u200b\u4e0d\u9650\u200b\u65bc\u200b\u6587\u672c\u200b\u3002\u200b\u9375\u200b\u6982\u8ff0\u200b\u4e86\u200b\u6d88\u606f\u200b\u7684\u200b\u985e\u578b\u200b,\u200b\u4f8b\u5982\u200b\u6587\u672c\u200b,\u200b\u97f3\u8a0a\u200b,\u200b\u5716\u50cf\u200b,\u200b\u8996\u983b\u200b\u7b49\u200b\u3002\u200b\u5bc6\u200b\u9470\u200b\u662f\u200b\u6587\u672c\u200b,\u200b\u5fc5\u9808\u200b\u8207\u200b\u5404\u7a2e\u200b\u4e00\u8d77\u200b\u4f7f\u7528\u200b,\u200b\u4f5c\u70ba\u200b\u5ba2\u6236\u200b\u7aef\u200b\u7121\u6cd5\u200b\u5448\u73fe\u200b\u6d88\u606f\u200b\u6642\u200b\u7684\u200b\u56de\u9000\u200b\u6a5f\u5236\u200b\u3002\u200b\u9019\u5141\u8a31\u200b\u5ba2\u6236\u200b\u7aef\u200b\u986f\u793a\u200b\u67d0\u4e9b\u200b\u5167\u5bb9\u200b,\u200b\u5373\u4f7f\u200b\u5b83\u200b\u53ea\u662f\u200b\u7d14\u200b\u6587\u5b57\u200b\u3002msgtypebodymsgtype</p> <pre><code>{\n  \"content\": {\n    \"body\": \"This is an example text message\",\n    \"format\": \"org.matrix.custom.html\",\n    \"formatted_body\": \"&lt;b&gt;This is an example text message&lt;/b&gt;\",\n    \"msgtype\": \"m.text\"\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"type\": \"m.room.message\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#1122","title":"11.2.2 \u200b\u5ba2\u6236\u200b\u7aef\u884c\u200b\u70ba","text":"<p>\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u9a57\u8b49\u200b\u50b3\u5165\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u7d50\u69cb\u200b,\u200b\u4ee5\u78ba\u200b\u4fdd\u200b \u200b\u9810\u671f\u200b\u7684\u200b\u9375\u200b\u5b58\u5728\u200b,\u200b\u4e26\u4e14\u200b\u5b83\u5011\u5c6c\u200b\u65bc\u200b\u6b63\u78ba\u200b\u7684\u200b\u985e\u578b\u200b\u3002\u200b\u5ba2\u6236\u200b\u53ef\u4ee5\u200b \u200b\u653e\u68c4\u200b\u683c\u5f0f\u200b\u932f\u8aa4\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u6216\u200b\u5411\u200b\u7528\u6236\u200b\u986f\u793a\u200b\u4f54\u200b\u4f4d\u5143\u200b\u6d88\u606f\u200b\u3002 \u200b\u5fc5\u9808\u200b\u5f9e\u200b\u7528\u6236\u200b\u7aef\u200b\u4e2d\u200b\u522a\u9664\u200b\u5df2\u200b\u7de8\u8f2f\u200b\u7684\u200b'm.room.message'\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u9019\u200b \u200b\u53ef\u4ee5\u200b\u7528\u200b\u4f54\u200b\u4f4d\u5143\u200b\u6587\u672c\u200b\u66ff\u63db\u200b\uff08\u200b\u4f8b\u5982\u200b\"[\u200b\u5df2\u200b\u7de8\u8f2f\u200b]\"\uff09\u200b\u6216\u200b \u200b\u53ef\u4ee5\u200b\u5f9e\u200b\u90f5\u4ef6\u200b\u6aa2\u8996\u200b\u4e2d\u200b\u5b8c\u5168\u200b\u522a\u9664\u200b\u5df2\u200b\u7de8\u8f2f\u200b\u7684\u200b\u90f5\u4ef6\u200b\u3002</p> <p>\u200b\u5305\u542b\u200b\u9644\u4ef6\u200b\u7684\u200b\u4e8b\u4ef6\u200b\uff08\u200b\u4f8b\u5982\u200b\"m.image\",\"m.file\"\uff09\u200b\u61c9\u8a72\u200b\u662f\u200b \u200b\u4f7f\u7528\u200b [\u200b\u5167\u5bb9\u5b58\u200b\u5132\u5eab\u200b\u6a21\u7d44\u200b]\uff08#content\u200b\u5b58\u50a8\u200b\u5e93\u200b\uff09\u200b\u4e0a\u50b3\u200b \u200b\u5982\u679c\u200b\u53ef\u7528\u200b\u3002\u200b\u7136\u200b\u5f8c\u200b,\u200b\u53ef\u4ee5\u200b\u5728\u200b\"url\"\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u751f\u6210\u200b\u7684\u200b\"mxc://\"URI \u3002.key\u3002</p> <p>\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u5305\u542b\u200b\u7528\u6236\u200b\u7aef\u200b\u751f\u6210\u200b\u7684\u200b\u9644\u4ef6\u200b\u7e2e\u5716\u200b \u200b\u5728\u200b\"info.thumbnail_url\"\u200b\u9375\u4e0b\u200b\u3002\u200b\u7e2e\u5716\u200b\u4e5f\u200b\u61c9\u8a72\u200b\u662f\u200b \"mxc://\"\u200b\u70cf\u91cc\u200b\u3002\u200b\u986f\u793a\u200b\u5e36\u200b\u6709\u200b\u9644\u4ef6\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b \u200b\u7528\u6236\u200b\u7aef\u200b\u751f\u6210\u200b\u7684\u200b\u7e2e\u5716\u200b\u6216\u200b\u8981\u6c42\u200b\u5176\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u751f\u6210\u200b \u200b\u539f\u59cb\u200b\u9644\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u7e2e\u5716\u200b,\u200b\u4f7f\u7528\u200b [\u200b\u5167\u5bb9\u5b58\u200b\u5132\u5eab\u200b \u200b\u6a21\u7d44\u200b]\uff08#content\u200b\u5b58\u50a8\u200b\u5e93\u200b\uff09\u3002</p>"},{"location":"chat/client_server/#_1","title":"\u767c\u9001\u200b\u6d88\u606f\u200b\u6642\u200b\u7684\u200b\u5efa\u8b70","text":"<p>\u200b\u5982\u679c\u200b\u767c\u9001\u200b\u5931\u6557\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u4f7f\u7528\u200b \u200b\u4e00\u5b9a\u200b\u6642\u9593\u200b T \u200b\u7684\u200b\u6307\u6578\u200b\u9000\u907f\u200b\u6f14\u7b97\u6cd5\u200b\u3002\u200b\u662f\u200b\u7684\u200b \u200b\u5efa\u8b70\u200b T \u200b\u4e0d\u8d85\u904e\u200b 5 \u200b\u5206\u9418\u200b\u3002\u200b\u5728\u200b\u6b64\u200b\u4e4b\u200b\u5f8c\u200b, \u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u505c\u6b62\u200b\u91cd\u8a66\u200b\u4e26\u5c07\u200b\u6d88\u606f\u200b\u6a19\u8a18\u200b\u70ba\u200b'\u200b\u672a\u767c\u200b\u9001\u200b'\u3002\u200b\u4f7f\u7528\u8005\u200b \u200b\u61c9\u8a72\u200b\u80fd\u5920\u200b\u624b\u52d5\u200b\u91cd\u65b0\u200b\u767c\u9001\u200b\u672a\u200b\u767c\u9001\u200b\u7684\u200b\u6d88\u606f\u200b\u3002</p> <p>\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u4e00\u6b21\u200b\u9375\u5165\u200b\u591a\u689d\u200b\u6d88\u606f\u200b\u4e26\u200b\u5feb\u901f\u200b\u767c\u9001\u200b\u6240\u6709\u200b\u6d88\u606f\u200b \u200b\u7e7c\u627f\u200b\u3002\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u4fdd\u7559\u200b\u767c\u9001\u200b\u5b83\u5011\u200b\u7684\u200b\u9806\u5e8f\u200b \u200b\u4f7f\u7528\u8005\u200b\u3002\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u5ba2\u6236\u200b\u7aef\u200b\u61c9\u200b\u7b49\u5f85\u200b\u5c0d\u200b \u200b\u767c\u9001\u200b\u4e0b\u200b\u4e00\u500b\u200b\u8acb\u6c42\u200b\u4e4b\u524d\u200b\u7684\u200b\u4e0a\u200b\u4e00\u500b\u200b\u8acb\u6c42\u200b\u3002\u200b\u9019\u200b\u53ef\u80fd\u200b\u5c0e\u81f4\u200b \u200b\u7dda\u982d\u200b\u963b\u585e\u200b\u3002\u200b\u70ba\u200b\u4e86\u200b\u6e1b\u5c11\u7dda\u982d\u200b\u7684\u200b\u5f71\u97ff\u200b \u200b\u963b\u585e\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u4f7f\u7528\u200b\u6bcf\u500b\u200b\u623f\u9593\u200b\u7684\u200b\u4f47\u5217\u200b,\u200b\u800c\u200b\u4e0d\u662f\u200b\u5168\u57df\u200b\u4f47\u5217\u200b \u200b\u4f47\u5217\u200b,\u200b\u56e0\u70ba\u200b\u8a02\u200b\u8cfc\u50c5\u200b\u5728\u200b\u55ae\u500b\u200b\u623f\u9593\u200b\u5167\u200b\u76f8\u95dc\u200b,\u200b\u800c\u200b\u4e0d\u662f\u200b \u200b\u623f\u9593\u200b\u4e4b\u9593\u200b\u3002</p>"},{"location":"chat/client_server/#_2","title":"\u672c\u5730\u200b\u56de\u8072","text":"<p>\u200b\u7576\u200b\u4f7f\u7528\u8005\u200b\u4f7f\u7528\u200b\u6642\u200b,\u200b\u6d88\u606f\u200b\u61c9\u200b\u7acb\u5373\u200b\u986f\u793a\u200b\u5728\u200b\u6d88\u606f\u200b\u6aa2\u8996\u200b\u4e2d\u200b \u200b\u6309\u4e0b\u200b'\u200b\u767c\u9001\u200b'\u200b\u6309\u9215\u200b\u3002\u200b\u5373\u4f7f\u200b\u6d88\u606f\u200b\u662f\u200b \u200b\u4ecd\u200b\u5728\u200b\u767c\u9001\u200b\u3002\u200b\u9019\u7a31\u200b\u70ba\u200b'\u200b\u672c\u5730\u200b\u56de\u8072\u200b'\u3002\u200b\u5ba2\u6236\u200b\u61c9\u8a72\u200b \u200b\u5be6\u73fe\u200b\u6d88\u606f\u200b\u7684\u200b'\u200b\u672c\u5730\u200b\u56de\u986f\u200b'\u3002\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u5728\u200b \u200b\u4e0d\u540c\u200b\u7684\u200b\u683c\u5f0f\u200b,\u200b\u4ee5\u200b\u6307\u793a\u200b\u4f3a\u670d\u5668\u200b\u5c1a\u672a\u200b\u8655\u7406\u200b \u200b\u6d88\u606f\u200b\u3002\u200b\u4f3a\u670d\u5668\u200b\u56de\u61c9\u200b\u6642\u61c9\u200b\u522a\u9664\u200b\u6b64\u200b\u683c\u5f0f\u200b\u3002</p> <p>\u200b\u7528\u6236\u200b\u7aef\u200b\u9700\u8981\u200b\u80fd\u5920\u200b\u5c07\u4ed6\u5011\u200b\u767c\u9001\u200b\u7684\u200b\u6d88\u606f\u200b\u8207\u200b \u200b\u4ed6\u5011\u200b\u5f9e\u200b\u4e8b\u4ef6\u200b\u6d41\u200b\u6536\u5230\u200b\u7684\u200b\u6d88\u606f\u200b\u76f8\u540c\u200b\u3002\u200b\u56de\u8072\u200b \u200b\u4f86\u200b\u81ea\u200b\u4e8b\u4ef6\u200b\u6d41\u200b\u7684\u200b\u540c\u4e00\u200b\u6d88\u606f\u200b\u7a31\u70ba\u200b'\u200b\u9060\u7aef\u200b\u56de\u8072\u200b'\u3002\u3002\u200b\u96d9\u200b \u200b\u56de\u8072\u200b\u9700\u8981\u200b\u6a19\u8b58\u200b\u70ba\u200b\u540c\u4e00\u200b\u6d88\u606f\u200b,\u200b\u4ee5\u200b\u9632\u6b62\u200b \u200b\u986f\u793a\u200b\u91cd\u200b\u8907\u200b\u6d88\u606f\u200b\u3002\u200b\u7406\u60f3\u200b\u60c5\u6cc1\u200b\u4e0b\u200b,\u200b\u9019\u7a2e\u200b\u914d\u5c0d\u6703\u200b\u767c\u751f\u200b \u200b\u5c0d\u200b\u4f7f\u7528\u8005\u200b\u900f\u660e\u200b:UI \u200b\u5728\u200b\u8f49\u63db\u200b\u6642\u4e0d\u6703\u200b\u9583\u720d\u200b \u200b\u5f9e\u200b\u672c\u5730\u200b\u5230\u200b\u9060\u7aef\u200b\u3002\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u7528\u6236\u200b\u7aef\u200b\u4f7f\u200b\u9583\u720d\u200b\u6e1b\u5c11\u200b \u200b\u4f7f\u7528\u200b\u4ed6\u5011\u200b\u7528\u200b\u65bc\u200b\u767c\u9001\u200b\u7279\u5b9a\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u4e8b\u52d9\u200bID\u3002\u200b\u9019\u200b \u200b\u4f7f\u7528\u200b\u7684\u200b\u4ea4\u6613\u200b ID \u200b\u5c07\u200b\u5305\u542b\u200b\u5728\u200b\u4e8b\u4ef6\u200b\u7684\u200b'\u200b\u672a\u200b\u7c3d\u540d\u200b'\u200b\u6578\u64da\u200b\u4e2d\u200b,\u200b\u4f5c\u70ba\u200b \u200b\u7576\u5b83\u200b\u901a\u904e\u200b\u4e8b\u4ef6\u200b\u6d41\u5230\u200b\u9054\u6642\u200btransaction_id\u3002</p> <p>\u200b\u7121\u6cd5\u200b\u4f7f\u7528\u200b\u4ea4\u6613\u200b ID \u200b\u7684\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u80fd\u200b\u6703\u200b \u200b\u7576\u9060\u7aef\u200b\u56de\u8072\u200b\u5230\u200b\u9054\u200b\u4e8b\u4ef6\u200b\u6d41\u6642\u200b\u9ad4\u9a57\u200b\u9583\u720d\u200b \u200b\u5728\u200b\u767c\u9001\u200b\u6d88\u606f\u200b\u7684\u200b\u8acb\u6c42\u200b\u5b8c\u6210\u200b\u4e4b\u524d\u200b\u3002\u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b, \u200b\u4e8b\u4ef6\u200b\u5728\u200b\u5ba2\u6236\u200b\u7aef\u200b\u7372\u53d6\u200b\u4e8b\u4ef6\u200b ID \u200b\u4e4b\u524d\u200b\u5230\u200b\u9054\u200b,\u200b\u4f7f\u200b\u5176\u200b \u200b\u7121\u6cd5\u5c07\u200b\u5176\u8b58\u5225\u200b\u70ba\u200b\u9060\u7aef\u200b\u56de\u8072\u200b\u3002\u200b\u9019\u6703\u200b\u5c0e\u81f4\u200b\u7528\u6236\u200b\u7aef\u200b \u200b\u5728\u200b\u4e00\u6bb5\u200b\u6642\u9593\u200b\u5167\u200b\u986f\u793a\u200b\u5169\u6b21\u200b\u6d88\u606f\u200b\uff08\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u4f3a\u670d\u5668\u200b\uff09 \u200b\u56de\u61c9\u200b\u80fd\u529b\u200b\uff09\u200b\u5728\u200b\u539f\u59cb\u200b\u8acb\u6c42\u200b\u767c\u9001\u200b\u6d88\u606f\u200b\u4e4b\u524d\u200b \u200b\u5b8c\u6210\u200b\u3002\u200b\u5b8c\u6210\u200b\u5f8c\u200b,\u200b\u5ba2\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u63a1\u53d6\u200b\u88dc\u6551\u200b\u63aa\u65bd\u200b\u4f86\u200b \u200b\u901a\u904e\u200b\u67e5\u627e\u200b\u91cd\u200b\u8907\u200b\u7684\u200b\u4e8b\u4ef6\u200bID\u200b\u4f86\u200b\u522a\u9664\u200b\u91cd\u200b\u8907\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002</p>"},{"location":"chat/client_server/#_3","title":"\u8a08\u7b97\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31","text":"<p>\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u986f\u793a\u200b\u623f\u9593\u200b\u7684\u200b\u4eba\u985e\u200b\u53ef\u8b80\u200b\u986f\u793a\u200b\u540d\u7a31\u200b \u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b,\u200b\u6216\u7576\u200b\u4ed6\u5011\u200b\u767c\u9001\u200b\u6d88\u606f\u200b\u6642\u200b\u3002 \u200b\u4f46\u662f\u200b,\u200b\u4e0d\u540c\u200b\u7684\u200b\u6210\u54e1\u200b\u53ef\u80fd\u200b\u5177\u6709\u200b\u885d\u7a81\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u3002\u200b\u986f\u793a\u200b \u200b\u5728\u200b\u5411\u200b\u7528\u6236\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u4e4b\u524d\u200b,\u200b\u5fc5\u9808\u200b\u6d88\u9664\u200b\u540d\u7a31\u200b\u7684\u200b\u6b67\u7fa9\u200b,\u200b\u4ee5\u4fbf\u200b \u200b\u9632\u6b62\u200b\u6b3a\u9a19\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u78ba\u4fdd\u200b\u8de8\u7528\u200b\u6236\u7aef\u200b\u4e00\u81f4\u200b\u5730\u200b\u57f7\u884c\u200b\u6b64\u200b\u64cd\u4f5c\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u4f7f\u7528\u200b \u200b\u4ee5\u4e0b\u200b\u6f14\u7b97\u6cd5\u200b\u7528\u200b\u65bc\u200b\u8a08\u7b97\u200b \u200b\u7d66\u5b9a\u200b\u4f7f\u7528\u8005\u200b:</p> <ol> <li>\u200b\u6aa2\u67e5\u200b\u76f8\u95dc\u200b\u4f7f\u7528\u8005\u200b ID \u200b\u7684\u200b\"m.room.member\"\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u3002</li> <li>\u200b\u5982\u679c\u200b\"m.room.member\"\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\u6c92\u6709\u200b\"\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\"\u200b\u5b57\u200b\u6bb5\u200b,\u200b\u6216\u8005\u200b\u5982\u679c\u200b    \u200b\u8a72\u200b\u6b04\u4f4d\u200b\u5177\u6709\u200b'null' \u200b\u503c\u200b,\u200b\u8acb\u200b\u4f7f\u7528\u200b\u539f\u59cb\u200b\u4f7f\u7528\u8005\u200b ID \u200b\u4f5c\u70ba\u200b\u986f\u793a\u200b    \u200b\u540d\u5b57\u200b\u3002\u200b\u5426\u5247\u200b:</li> <li>\u200b\u5982\u679c\u200b\"m.room.member\"\u200b\u4e8b\u4ef6\u200b\u5177\u6709\u200b\u552f\u4e00\u200b\u7684\u200b\"\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\"    \u200b\u5728\u200b\u5177\u6709\u200b'\u200b\u6210\u54e1\u8cc7\u683c\u200b:\u200b\u52a0\u5165\u200b'\u200b\u6216\u200b    \"\u200b\u6210\u54e1\u8cc7\u683c\u200b:\u200b\u9080\u8acb\u200b\",\u200b\u4f7f\u7528\u200b\u7d66\u5b9a\u200b\u7684\u200b\"\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\"\u200b\u4f5c\u70ba\u200b    \u200b\u7528\u6236\u200b\u53ef\u898b\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u3002\u200b\u5426\u5247\u200b:</li> <li>\"m.room.member\"\u200b\u4e8b\u4ef6\u200b\u5177\u6709\u200b\u975e\u200b\u552f\u4e00\u200b\u7684\u200b\"\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\"\u3002\u200b\u9019\u200b    \u200b\u61c9\u200b\u4f7f\u7528\u200b\u4f7f\u7528\u8005\u200bID\u200b\u6d88\u9664\u200b\u6b67\u7fa9\u200b,\u200b\u4f8b\u5982\u200b\"\u200b\u986f\u793a\u200b\u540d\u7a31\u200b    (@id:homeserver.org\uff09\"\u3002</li> </ol> <p>\u200b\u958b\u767c\u200b\u4eba\u54e1\u200b\u5728\u200b\u5be6\u73fe\u200b\u4e0a\u8ff0\u200b\u5167\u5bb9\u200b\u6642\u61c9\u200b\u6ce8\u610f\u200b\u4ee5\u4e0b\u200b\u4e8b\u9805\u200b \u200b\u6f14\u7b97\u6cd5\u200b:</p> <ul> <li>\u200b\u4e00\u500b\u200b\u6210\u54e1\u200b\u7684\u200b\u7528\u6236\u200b\u53ef\u898b\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u53ef\u80fd\u200b\u53d7\u5230\u200b\u4ee5\u4e0b\u200b\u56e0\u7d20\u200b\u7684\u200b\u5f71\u97ff\u200b   \u200b\u53e6\u200b\u4e00\u500b\u200b\u6210\u54e1\u200b\u7684\u200b\u72c0\u614b\u200b\u66f4\u6539\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u5982\u679c\u200b   \"@user1:matrix.org\"\u200b\u51fa\u73fe\u200b\u5728\u200b\u4e00\u500b\u200b\u623f\u9593\u200b\u91cc\u200b,\u200b\u5e36\u6709\u200b\"\u200b\u986f\u793a\u200b\u540d\u7a31\u200b:\u200b\u611b\u9e97\u7d72\u200b\",   \u200b\u7136\u5f8c\u7576\u200b\"@user2:\u200b\u793a\u4f8b\u200b.com\"\u200b\u52a0\u5165\u200b\u623f\u9593\u200b\u6642\u200b,\u200b\u4e5f\u200b\u8207\u200b   \"\u200b\u986f\u793a\u200b\u540d\u7a31\u200b:\u200b\u611b\u9e97\u7d72\u200b\",\u200b\u5169\u500b\u200b\u7528\u6236\u200b\u5fc5\u9808\u200b\u6d88\u9664\u200b\u6b67\u7fa9\u200b   \u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u3002\u200b\u540c\u6a23\u200b,\u200b\u7576\u200b\u5176\u4e2d\u200b\u4e00\u500b\u200b\u4f7f\u7528\u8005\u200b\u96a8\u5f8c\u200b\u66f4\u6539\u200b\u5176\u200b   \u200b\u986f\u793a\u200b\u540d\u7a31\u200b,\u200b\u4e0d\u518d\u200b\u6709\u200b\u885d\u7a81\u200b,\u200b\u5169\u500b\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b   \u200b\u7d66\u5b9a\u200b\u4ed6\u5011\u200b\u9078\u64c7\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u3002\u200b\u5ba2\u6236\u200b\u61c9\u200b\u5c0d\u200b\u6b64\u200b\u4fdd\u6301\u8b66\u60d5\u200b   \u200b\u53ef\u80fd\u6027\u200b\u4e26\u78ba\u200b\u4fdd\u200b\u6240\u6709\u200b\u53d7\u5f71\u97ff\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u90fd\u200b\u6b63\u78ba\u200b   \u200b\u91cd\u65b0\u547d\u540d\u200b\u3002</li> <li>\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u4e5f\u200b\u53ef\u80fd\u200b\u53d7\u5230\u200b   \u200b\u6210\u54e1\u540d\u200b\u55ae\u200b\u3002\u200b\u9019\u662f\u200b\u7531\u200b\u65bc\u200b\u623f\u9593\u200b\u540d\u7a31\u200b\u6709\u200b\u6642\u200b\u662f\u200b\u57fa\u200b\u65bc\u200b   \u200b\u5728\u200b\u4f7f\u7528\u8005\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u4e0a\u200b\uff08\u200b\u8acb\u200b\u53c3\u95b1\u200b [\u200b\u8a08\u7b97\u200b \u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b   \u200b\u623f\u9593\u200b]\uff08#calculating\u200b\u623f\u95f4\u200b\u7684\u200b\u663e\u793a\u200b\u540d\u79f0\u200b\uff09\uff09\u3002</li> <li>\u200b\u5982\u679c\u200b\u641c\u7d22\u200b\u6574\u500b\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u6e05\u55ae\u200b\u4ee5\u200b\u986f\u793a\u200b\u885d\u7a81\u200b   \u200b\u540d\u7a31\u200b,\u200b\u9019\u5c0e\u81f4\u200b\u7528\u200b\u65bc\u200b\u69cb\u5efa\u200b\u6e05\u55ae\u200b\u7684\u200b O\uff08N^2\uff09 \u200b\u5be6\u73fe\u200b   \u200b\u7684\u200b\u623f\u9593\u200b\u6210\u54e1\u200b\u3002\u200b\u5c0d\u200b\u65bc\u200b\u5927\u578b\u200b\u623f\u9593\u200b\u4f86\u200b\u8aaa\u200b,\u200b\u9019\u5c07\u200b\u975e\u5e38\u200b\u4f4e\u6548\u200b   \u200b\u6210\u54e1\u4eba\u6578\u200b\u3002\u200b\u5efa\u8b70\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5be6\u73fe\u200b   \u200b\u7dad\u8b77\u200b\u5f9e\u200b'\u200b\u986f\u793a\u200b\u540d\u7a31\u200b'\u200b\u5230\u200b\u623f\u9593\u200b\u6e05\u55ae\u200b\u7684\u200b\u54c8\u5e0c\u200b\u8868\u200b\u6620\u5c04\u200b   \u200b\u4f7f\u7528\u200b\u8a72\u540d\u200b\u7a31\u200b\u7684\u200b\u6210\u54e1\u200b\u3002\u200b\u7136\u200b\u5f8c\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u9019\u6a23\u200b\u7684\u200b\u8868\u4f86\u200b\u6709\u6548\u200b\u5730\u200b   \u200b\u8a08\u7b97\u200b\u662f\u5426\u200b\u9700\u8981\u200b\u6d88\u9664\u200b\u6b67\u7fa9\u200b\u3002</li> </ul>"},{"location":"chat/client_server/#_4","title":"\u4f7f\u7528\u200b\u6d88\u606f\u200b\u986f\u793a\u200b\u6210\u54e1\u200b\u8eab\u4efd\u200b\u8cc7\u8a0a","text":"<p>\u200b\u5ba2\u6236\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u986f\u793a\u200b\u623f\u9593\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u548c\u200b\u982d\u50cf\u200bURL \u200b\u767c\u9001\u200b\u6d88\u606f\u200b\u7684\u200b\u6210\u54e1\u200b\u3002\u200b\u9019\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6aa2\u67e5\u200b \u200b\u8a72\u200b\u4f7f\u7528\u8005\u200b ID \u200b\u7684\u200b\"m.room.member\"\u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b\uff08\u200b\u8acb\u200b\u53c3\u95b1\u200b [\u200b\u8a08\u7b97\u200b \u200b\u7528\u6236\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b]\uff08#calculating\u200b\u7528\u6237\u200b\u7684\u200b\u663e\u793a\u200b\u540d\u79f0\u200b\uff09\uff09\u3002</p> <p>\u200b\u7576\u200b\u4f7f\u7528\u8005\u200b\u5c0d\u200b\u90f5\u4ef6\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b\u9032\u884c\u200b\u5206\u9801\u200b\u6642\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u986f\u793a\u200b \u200b\u804a\u5929\u5ba4\u200b\u6210\u54e1\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u548c\u200b\u982d\u50cf\u200bURL\u3002\u200b\u9019\u662f\u200b \u200b\u53ef\u80fd\u200b\u662f\u200b\u56e0\u70ba\u200b\u8f03\u200b\u820a\u200b\u7684\u200b'm.room.member'\u200b\u4e8b\u4ef6\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u8fd4\u56de\u200b \u200b\u5206\u9801\u200b\u3002\u200b\u9019\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u4fdd\u7559\u200b\u5169\u7d44\u200b \u200b\u623f\u9593\u200b\u72c0\u614b\u200b:\u200b\u820a\u200b\u548c\u200b\u7576\u524d\u200b\u3002\u200b\u96a8\u8457\u200b\u65b0\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u5230\u200b\u4f86\u200b\u548c\u200b/\u200b\u6216\u200b\u4f7f\u7528\u8005\u200b \u200b\u6642\u5149\u200b\u5012\u6d41\u200b,\u200b\u9019\u5169\u7d44\u200b\u72c0\u614b\u200b\u5f7c\u6b64\u200b\u5206\u9053\u200b\u63da\u9463\u200b\u3002 \u200b\u65b0\u200b\u4e8b\u4ef6\u200b\u66f4\u65b0\u200b\u7576\u524d\u200b\u72c0\u614b\u200b,\u200b\u5206\u9801\u200b\u4e8b\u4ef6\u200b\u66f4\u65b0\u200b\u820a\u72c0\u614b\u200b \u200b\u5dde\u200b\u3002\u200b\u6309\u9806\u5e8f\u200b\u8655\u7406\u200b\u5206\u9801\u200b\u4e8b\u4ef6\u200b\u6642\u200b,\u200b\u820a\u72c0\u614b\u200b \u200b\u8868\u793a\u200b\u767c\u9001\u200b\u4e8b\u4ef6\u200b\u6642\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u72c0\u614b\u200b*\u3002\u200b\u9019\u200b \u200b\u7136\u200b\u5f8c\u200b\u53ef\u7528\u200b\u65bc\u200b\u8a2d\u7f6e\u200b\u6b77\u53f2\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u548c\u200b\u982d\u50cf\u200bURL\u3002</p>"},{"location":"chat/client_server/#_5","title":"\u8a08\u7b97\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u986f\u793a\u200b\u540d\u7a31","text":"<p>\u200b\u5ba2\u6236\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u70ba\u200b\u623f\u9593\u200b\u986f\u200b\u793a\u4eba\u200b\u985e\u53ef\u8b80\u200b\u7684\u200b\u540d\u7a31\u200b\u3002\u200b\u6709\u200b\u4e00\u500b\u200b \u200b\u9078\u64c7\u200b\u6709\u7528\u200b\u540d\u7a31\u200b\u7684\u200b\u53ef\u80fd\u6027\u200b\u6578\u91cf\u200b\u3002\u200b\u78ba\u4fdd\u200b\u623f\u9593\u200b \u200b\u5728\u200b\u7528\u6236\u200b\u7aef\u200b\u4e2d\u200b\u4e00\u81f4\u200b\u547d\u540d\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u540d\u7a31\u200b \u200b\u9078\u64c7\u200b\u540d\u7a31\u200b\u7684\u200b\u6f14\u200b\u6f14\u7b97\u6cd5\u200b:</p> <ol> <li>\u200b\u5982\u679c\u200b\u804a\u5929\u5ba4\u200b\u5177\u6709\u200b\u975e\u7a7a\u200b\u7684\u200b [m.room.name]\uff08#mroomname\uff09 \u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b    \"\u200b\u540d\u7a31\u200b\"\u200b\u6b04\u4f4d\u200b,\u200b\u8acb\u200b\u4f7f\u7528\u200b\u8a72\u200b\u6b04\u4f4d\u200b\u6307\u5b9a\u200b\u7684\u200b\u540d\u7a31\u200b\u3002</li> <li>\u200b\u5982\u679c\u200b\u804a\u5929\u5ba4\u200b\u5177\u6709\u200b [m.room.canonical_alias]\uff08#mroomcanonical_alias\uff09 \u200b\u72c0\u614b\u200b\u4e8b\u4ef6\u200b,\u200b\u4e26\u4e14\u200b    \u200b\u6709\u6548\u200b\u7684\u200b\"\u200b\u5225\u540d\u200b\"\u200b\u6b04\u4f4d\u200b,\u200b\u4f7f\u7528\u200b\u8a72\u5b57\u6bb5\u200b\u7d66\u51fa\u200b\u7684\u200b\u5225\u200b\u540d\u4f5c\u200b\u70ba\u200b\u540d\u7a31\u200b\u3002    \u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5728\u200b\u8a08\u7b97\u200b\u6642\u61c9\u200b\u907f\u514d\u200b\u4f7f\u7528\u200b\"alt_aliases\"    \u200b\u623f\u9593\u200b\u540d\u7a31\u200b\u3002    3.\u200b\u5982\u679c\u200b\u4ee5\u4e0a\u200b\u689d\u4ef6\u200b\u90fd\u200b\u4e0d\u200b\u6eff\u8db3\u200b,\u200b\u5247\u61c9\u200b\u7d44\u6210\u200b\u4e00\u500b\u200b\u540d\u7a31\u200b    \u200b\u57fa\u200b\u65bc\u200b\u623f\u9593\u200b\u7684\u200b\u6210\u54e1\u200b\u3002\u200b\u5ba2\u6236\u200b\u61c9\u200b\u8003\u616e\u200b    [m.room.member]\uff08#mroommember\uff09 \u200b\u767b\u9304\u200b\u4f7f\u7528\u8005\u200b\u4ee5\u5916\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u4e8b\u4ef6\u200b,\u200b\u5982\u200b    \u200b\u5b9a\u7fa9\u200b\u5982\u4e0b\u200b\u3002<ol> <li>\u200b\u5982\u679c\u200b\u623f\u9593\u200b\u7684\u200b'm.hero'\u200b\u6578\u91cf\u200b\u5927\u200b\u65bc\u200b\u6216\u200b\u7b49\u200b\u65bc\u200b    \"m.joined_member_count + m.invited_member_count - 1\",\u200b\u7136\u200b\u5f8c\u200b\u4f7f\u7528\u200b    \u200b\u82f1\u96c4\u200b\u8a08\u7b97\u200b\u986f\u793a\u200b\u540d\u7a31\u200b\u7684\u200b\u6210\u54e1\u8cc7\u683c\u200b\u4e8b\u4ef6\u200b    \u200b\u5c0d\u200b\u65bc\u200b\u4f7f\u7528\u8005\u200b\uff08[\u200b\u6d88\u9664\u200b\u6b67\u7fa9\u200b,\u200b\u5982\u679c\u200b    \u200b\u5fc5\u9700\u200b]\uff08#calculating\u200b\u7528\u6237\u200b\u7684\u200b\u663e\u793a\u200b\u540d\u79f0\u200b\uff09\uff09\u200b\u548c\u200b    \u200b\u5c07\u5b83\u200b\u5011\u200b\u9023\u63a5\u200b\u8d77\u4f86\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u5ba2\u6236\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u986f\u793a\u200b    \"Alice, Bob, and Charlie \uff08@charlie:example.org\uff09\"\u200b\u4f5c\u70ba\u200b\u623f\u9593\u200b    \u200b\u540d\u5b57\u200b\u3002\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u9650\u5236\u200b\u5176\u7528\u200b\u6236\u6578\u200b    \u200b\u7528\u200b\u65bc\u200b\u751f\u6210\u200b\u623f\u9593\u200b\u540d\u7a31\u200b\u3002</li> <li>\u200b\u5982\u679c\u200b\u82f1\u96c4\u200b\u5c11\u200b\u65bc\u200b    \"m.joined_member_count + m.invited_member_count - 1\",\u200b\u4ee5\u53ca\u200b    \"m.joined_member_count + m.invited_member_count\"\u200b\u5927\u200b\u65bc\u200b    1,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u4f7f\u7528\u200b\u82f1\u96c4\u200b\u4f86\u8a08\u7b97\u200b\u986f\u793a\u200b\u540d\u7a31\u200b    \u200b\u5c0d\u200b\u65bc\u200b\u4f7f\u7528\u8005\u200b\uff08[\u200b\u6d88\u9664\u200b\u6b67\u7fa9\u200b,\u200b\u5982\u679c\u200b    \u200b\u5fc5\u9700\u200b]\uff08#calculating\u200b\u7528\u6237\u200b\u7684\u200b\u663e\u793a\u200b\u540d\u79f0\u200b\uff09\uff09\u200b\u548c\u200b    \u200b\u5c07\u5b83\u200b\u5011\u200b\u8207\u200b\u5269\u9918\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u8a08\u6578\u200b\u9023\u63a5\u200b\u8d77\u4f86\u200b\u3002\u200b\u70ba\u200b    \u200b\u4f8b\u5982\u200b,\"\u200b\u611b\u9e97\u7d72\u200b,\u200b\u9b91\u52c3\u200b\u548c\u200b\u5176\u4ed6\u200b 1234 \u200b\u4eba\u200b\"\u3002</li> <li>\u200b\u5982\u679c\u200b\"m.joined_member_count + m.invited_member_count\"\u200b\u5c0f\u200b\u65bc\u200b    \u200b\u6216\u200b\u7b49\u200b\u65bc\u200b 1\uff08\u200b\u8868\u793a\u200b\u6210\u54e1\u200b\u662f\u200b\u55ae\u7368\u200b\u7684\u200b\uff09,\u200b\u7528\u6236\u200b\u7aef\u200b    \u200b\u61c9\u200b\u4f7f\u7528\u200b\u4e0a\u8ff0\u200b\u898f\u5247\u200b\u4f86\u200b\u6307\u793a\u200b\u623f\u9593\u200b\u662f\u200b\u7a7a\u200b\u7684\u200b\u3002    \u200b\u4f8b\u5982\u200b,'\u200b\u7a7a\u623f\u200b\u9593\u200b\uff08\u200b\u662f\u200b\u611b\u9e97\u7d72\u200b\uff09','\u200b\u7a7a\u623f\u200b\u9593\u200b\uff08\u200b\u662f\u200b\u611b\u9e97\u7d72\u200b\uff09    \u200b\u548c\u200b\u5176\u4ed6\u200b 1234 \u200b\u4eba\u200b\uff09\",\u200b\u5982\u679c\u200b\u6c92\u6709\u200b\u82f1\u96c4\u200b,\u200b\u5247\u70ba\u200b\"\u200b\u7a7a\u623f\u200b\u9593\u200b\"\u3002</li> </ol> </li> </ol> <p>\u200b\u5ba2\u6236\u200b\u61c9\u5c07\u200b\u623f\u9593\u200b\u540d\u7a31\u200b\u570b\u969b\u5316\u200b\u70ba\u200b\u7528\u6236\u200b\u7684\u200b\u8a9e\u8a00\u200b \u200b\u7576\u200b\u4f7f\u7528\u200b\"m.heroes\"\u200b\u8a08\u7b97\u540d\u200b\u7a31\u6642\u200b\u3002\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u4f7f\u7528\u200b \u200b\u5728\u200b\u53ef\u80fd\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b,\u200b\u81f3\u5c11\u200b 5 \u200b\u500b\u200b\u82f1\u96c4\u200b\u4f86\u8a08\u7b97\u200b\u623f\u9593\u200b\u540d\u7a31\u200b,\u200b\u4f46\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b \u200b\u6216\u591a\u6216\u5c11\u200b\u662f\u200b\u70ba\u200b\u4e86\u200b\u66f4\u597d\u200b\u5730\u200b\u9069\u61c9\u200b\u4ed6\u5011\u200b\u7684\u200b\u7528\u6236\u200b\u9ad4\u9a57\u200b\u3002</p>"},{"location":"chat/client_server/#_6","title":"\u5287\u900f\u200b\u6d88\u606f","text":"<p>\u200b\u901a\u904e\u200b\u4f7f\u7528\u200b\u5287\u900f\u200b,\u200b\u53ef\u4ee5\u200b\u76f4\u89c0\u200b\u5730\u200b\u5411\u200b\u7528\u6236\u200b\u96b1\u85cf\u200b\u6d88\u606f\u200b\u7684\u200b\u67d0\u4e9b\u200b\u90e8\u5206\u200b\u3002 \u200b\u9019\u4e0d\u6703\u200b\u5f71\u97ff\u200b\u4f3a\u670d\u5668\u200b\u5c0d\u200b\u4e8b\u4ef6\u200b\u5167\u5bb9\u200b\u7684\u200b\u8868\u793a\u200b - \u200b\u5b83\u200b \u200b\u53ea\u662f\u200b\u5411\u200b\u4f7f\u7528\u8005\u200b\u63d0\u4f9b\u200b\u8996\u89ba\u200b\u63d0\u793a\u200b,\u200b\u6d88\u606f\u200b\u53ef\u80fd\u200b\u6703\u200b\u63ed\u793a\u200b\u91cd\u8981\u200b\u5167\u5bb9\u200b \u200b\u6709\u95dc\u200b\u67d0\u4e8b\u200b\u7684\u200b\u4fe1\u606f\u200b,\u200b\u7834\u58de\u200b\u4efb\u4f55\u200b\u76f8\u95dc\u200b\u7684\u200b\u9a5a\u559c\u200b\u3002</p> <p>\u200b\u8981\u200b\u767c\u9001\u200b\u5287\u900f\u200b,\u200b\u5ba2\u6236\u200b\u5fc5\u9808\u200b\u4f7f\u7528\u200b\"formatted_body\",\u200b\u56e0\u6b64\u200b \"org.matrix.custom.html\"\u200b\u683c\u5f0f\u200b,\u200b\u5982\u4e0a\u6240\u8ff0\u200b\u3002\u200b\u9019\u200b\u4f7f\u5f97\u200b\u5287\u900f\u200b\u5728\u200b \u200b\u4efb\u4f55\u200b\u53ef\u4ee5\u200b\u9069\u7576\u200b\u652f\u63f4\u200b\u6b64\u200b\u683c\u5f0f\u200b\u7684\u200b\"msgtype\"\u3002</p> <p>\u200b\u5287\u900f\u200b\u672c\u8eab\u200b\u5305\u542b\u200b'span'\u200b\u6a19\u200b\u7c64\u200b,\u200b\u539f\u56e0\u200b\uff08\u200b\u53ef\u9078\u200b\uff09 \u200b\u8655\u200b\u65bc\u200b'\u200b\u6578\u64da\u200b-MX-\u200b\u5287\u900f\u200b'\u200b\u5c6c\u6027\u200b\u4e2d\u200b\u3002\u200b\u7121\u6545\u200b\u5287\u900f\u200b\u5fc5\u9808\u200b\u81f3\u5c11\u200b \u200b\u6307\u5b9a\u200b\u5c6c\u6027\u200b,\u200b\u4f46\u200b\u8a72\u503c\u200b\u53ef\u80fd\u200b\u70ba\u7a7a\u200b/\u200b\u672a\u5b9a\u200b\u7fa9\u200b\u3002</p> <p>\u200b\u5287\u900f\u200b\u7684\u200b\u4e00\u500b\u200b\u4f8b\u5b50\u200b\u662f\u200b:</p> <pre><code>{\n  \"msgtype\": \"m.text\",\n  \"format\": \"org.matrix.custom.html\",\n  \"body\": \"\u200b\u96fb\u5f71\u200b\u4e2d\u200b\u7684\u200b\u611b\u9e97\u7d72\u200b[\u200b\u5287\u900f\u200b]\uff08mxc://example.org/abc123\uff09\u3002\n  \"formatted_body\": \"\u200b\u611b\u9e97\u7d72\u200b&lt;\u200b\u8de8\u6578\u64da\u200b-mx-\u200b\u5287\u900f\u200b&gt;\u200b\u5f9e\u200b\u6b64\u904e\u200b\u4e0a\u200b\u4e86\u200b\u5e78\u798f\u200b\u7684\u200b\u751f\u6d3b\u200b&lt;/\u200b\u8de8\u5ea6\u200b&gt;\u200b\u5728\u200b\u96fb\u5f71\u200b\u4e2d\u200b\u3002\n}\n</code></pre> <p>\u200b\u5982\u679c\u200b\u8981\u200b\u63d0\u4f9b\u200b\u539f\u56e0\u200b,\u200b\u5b83\u5c07\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b:</p> <pre><code>{\n  \"msgtype\": \"m.text\",\n  \"format\": \"org.matrix.custom.html\",\n  \"body\": \"\u200b\u611b\u9e97\u7d72\u200b[\u200b\u611b\u9e97\u7d72\u200b\u7684\u200b\u5065\u5eb7\u200b\u5287\u900f\u200b]\uff08mxc://example.org/abc123\uff09\u200b\u5728\u200b\u96fb\u5f71\u200b\u4e2d\u200b\u3002\n  \"formatted_body\": \"\u200b\u611b\u9e97\u7d72\u200b&lt;\u200b\u8de8\u5ea6\u200b\u6578\u64da\u200b-mx-spoiler='\u200b\u611b\u9e97\u7d72\u200b\u7684\u200b\u5065\u5eb7\u200b'&gt;\u200b\u5f9e\u200b\u6b64\u904e\u200b\u4e0a\u200b\u4e86\u200b\u5e78\u798f\u200b\u7684\u200b\u751f\u6d3b\u200b&lt;/\u200b\u8de8\u5ea6\u200b&gt;\u3002\n}\n</code></pre> <p>\u200b\u767c\u9001\u5287\u200b\u900f\u6642\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u5728\u200b\"\u200b\u6b63\u6587\u200b\"\u200b\u4e2d\u200b\u63d0\u4f9b\u200b\u56de\u9000\u200b,\u200b\u5982\u200b\u4e0a\u200b\u6240\u793a\u200b \uff08\u200b\u5305\u62ec\u200b\u539f\u56e0\u200b\uff09\u3002\u200b\u56de\u9000\u200b\u4e0d\u61c9\u200b\u5305\u542b\u200b\u5305\u542b\u200b\u5287\u900f\u200b\u7684\u200b\u6587\u672c\u200b,\u200b\u56e0\u70ba\u200b \"body\"\u200b\u53ef\u80fd\u200b\u6703\u200b\u986f\u793a\u200b\u5728\u200b\u7d14\u200b\u6587\u672c\u200b\u7528\u6236\u200b\u7aef\u200b\u6216\u200b\u901a\u77e5\u200b\u4e2d\u200b\u3002\u200b\u70ba\u200b\u9632\u6b62\u200b\u5287\u200b\u900f\u51fa\u200b\u73fe\u5728\u200b \u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b,\u200b\u5f37\u70c8\u200b\u5efa\u8b70\u200b\u5ba2\u6236\u200b\u5148\u4e0a\u200b\u50b3\u200b\u5305\u542b\u200b\u5287\u900f\u200b\u7684\u200b\u6587\u672c\u200b \u200b\u5230\u200b\u5a92\u9ad4\u200b\u5b58\u5132\u5eab\u200b,\u200b\u7136\u5f8c\u5728\u200b markdown \u200b\u6a23\u5f0f\u200b\u7684\u200b\u9023\u7d50\u200b\u4e2d\u200b\u5f15\u7528\u200b\"mxc://\"URI,\u200b\u5982\u200b\u4e0a\u200b\u6240\u793a\u200b\u3002</p> <p>\u200b\u5ba2\u6236\u200b\u61c9\u8a72\u200b\u901a\u904e\u200b\u67d0\u7a2e\u200b\u62ab\u9732\u200b\u4ee5\u200b\u4e0d\u540c\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5448\u200b\u73fe\u5287\u200b\u900f\u200b\u3002\u200b\u4f8b\u5982\u200b, \u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u6a21\u7cca\u200b\u5be6\u969b\u200b\u6587\u672c\u200b\u4e26\u200b\u8981\u6c42\u200b\u7528\u6236\u200b\u6309\u200b\u5169\u4e0b\u200b\u5b83\u200b\u4ee5\u200b\u986f\u793a\u200b\u5b83\u200b\u3002</p>"},{"location":"chat/client_server/#_7","title":"\u4f3a\u670d\u5668\u200b\u884c\u70ba","text":"<p>\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u61c9\u200b\u62d2\u7d55\u200b\u6c92\u6709\u200b \"msgtype\"\u200b\u9375\u200b,\u200b\u6216\u8005\u200b\u6c92\u6709\u200b\u6587\u672c\u200b\"body\"\u200b\u9375\u200b,\u200b\u5e36\u6709\u200b HTTP \u200b\u72c0\u614b\u200b\u4ee3\u78bc\u200b\u70ba\u200b 400\u3002</p>"},{"location":"chat/client_server/#_8","title":"\u5b89\u5168\u200b\u6ce8\u610f\u200b\u4e8b\u9805","text":"<p>\u200b\u4f7f\u7528\u200b\u6b64\u6a21\u200b\u7d44\u767c\u200b\u9001\u200b\u7684\u200b\u6d88\u606f\u200b\u672a\u200b\u52a0\u5bc6\u200b,\u200b\u5118\u200b\u7ba1\u200b\u662f\u200b\u7aef\u200b\u5230\u200b\u7aef\u7684\u200b \u200b\u52a0\u5bc6\u200b\u6b63\u5728\u200b\u958b\u767c\u200b\u4e2d\u200b\uff08\u200b\u8acb\u200b\u53c3\u95b1\u200b [E2E \u200b\u6a21\u7d44\u200b]\uff08#end \u200b\u7aef\u5230\u200b\u7aef\u200b\u52a0\u5bc6\u200b\uff09\uff09\u3002</p> <p>\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u6e05\u7406\u200b\u6240\u6709\u200b\u986f\u793a\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\u4ee5\u200b\u67e5\u627e\u200b\u4e0d\u200b\u5b89\u5168\u200b\u7684\u200bHTML \u200b\u9632\u6b62\u200b\u8de8\u7db2\u200b\u7ad9\u200b\u8173\u7a3f\u200b \uff08XSS\uff09 \u200b\u653b\u64ca\u200b\u3002\u200b\u9019\u200b\u5305\u62ec\u200b\u623f\u9593\u200b\u540d\u7a31\u200b\u548c\u200b \u200b\u4e3b\u984c\u200b\u3002</p>"},{"location":"chat/client_server/#113","title":"11.3 \u200b\u8c50\u5bcc\u200b\u7684\u200b\u56de\u200b\u5fa9","text":"<p>\u200b\u8c50\u5bcc\u200b\u7684\u200b\u56de\u200b\u5fa9\u200b\u662f\u200b\u4e00\u500b\u200b \u200b\u7279\u6b8a\u200b\u985e\u578b\u200b\u7684\u200b[\u200b\u95dc\u200b\u4fc2\u200b]\uff08#forming-\u200b\u4e8b\u4ef6\u200b\u4e4b\u9593\u200b\u7684\u95dc\u200b\u4fc2\u200b-\u200b\u4e8b\u4ef6\u200b\u4e4b\u9593\u200b\uff09 \u200b\u6709\u6548\u200b\u5730\u200b\u5f15\u7528\u200b\u5f15\u7528\u200b\u7684\u200b\u4e8b\u4ef6\u200b,\u200b\u4ee5\u4fbf\u200b\u7528\u6236\u200b\u7aef\u200b\u5448\u73fe\u200b/\u200b\u8655\u7406\u200b\u5982\u4f55\u200b \u200b\u5b83\u200b\u5e0c\u671b\u200b\u3002\u200b\u5b83\u5011\u200b\u901a\u5e38\u200b\u8207\u200b ['m.room.message']\uff08#mroommessage\uff09 \u200b\u4e8b\u4ef6\u200b\u4e00\u8d77\u200b\u4f7f\u7528\u200b\u3002</p> <p>\u200b\u5728\u200b\u898f\u7bc4\u200b\u7684\u200b v1.3 \u200b\u4e4b\u524d\u200b,\u200b\u8c50\u5bcc\u200b\u7684\u200b\u56de\u200b\u5fa9\u200b\u50c5\u9650\u200b\u65bc\u200b\"m.room.message\"\u200b\u4e8b\u4ef6\u200b \u200b\u5b83\u200b\u53ef\u4ee5\u200b\u8868\u793a\u200b HTML \u200b\u683c\u5f0f\u200b\u7684\u200b\u6b63\u6587\u200b\u3002\u200b\u5f9e\u200b v1.3 \u200b\u958b\u59cb\u200b,\u200b\u73fe\u5728\u200b\u5df2\u200b\u64f4\u5c55\u200b \u200b\u5230\u200b all \u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b,\u200b\u901a\u904e\u200b\u653e\u68c4\u200b HTML \u200b\u683c\u5f0f\u200b\u7684\u200b\u6b63\u6587\u200b\u7684\u200b\u8981\u6c42\u200b \u200b\u88ab\u200b\u5305\u62ec\u200b\u5728\u200b\u5167\u200b\u3002</p> <p>\u200b\u6b64\u5916\u200b,\u200b\u8c50\u5bcc\u200b\u7684\u200b\u56de\u200b\u5fa9\u200b\u53ef\u4ee5\u200b\u5f15\u7528\u200b\u81ea\u200b v1.3 \u200b\u8d77\u200b\u7684\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u4e8b\u4ef6\u200b\u985e\u578b\u200b\u3002 \u200b\u4ee5\u524d\u200b,\u200b\u8c50\u5bcc\u200b\u7684\u200b\u56de\u200b\u5fa9\u200b\u53ea\u80fd\u200b\u5f15\u7528\u200b\u53e6\u200b\u4e00\u500b\u200b\"m.room.message\"\u200b\u4e8b\u4ef6\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u53ef\u80fd\u200b,\u200b\u4e8b\u4ef6\u200b\u61c9\u200b\u5305\u62ec\u200b [\u200b\u56de\u9000\u200b\u8868\u793a\u200b\u5f62\u5f0f\u200b]\uff08#fallbacks-for-rich-replies\uff09 \u200b\u5141\u8a31\u200b\u4e0d\u200b\u5448\u200b\u73fe\u5bcc\u200b\u56de\u200b\u5fa9\u200b\u7684\u200b\u7528\u6236\u200b\u7aef\u200b\u4ecd\u7136\u200b\u770b\u5230\u200b\u4ee5\u4e0b\u200b\u5167\u5bb9\u200b \u200b\u4f3c\u4e4e\u200b\u662f\u200b\u5f15\u7528\u200b\u7684\u200b\u7b54\u8986\u200b\u3002</p> <p>\u200b\u5118\u200b\u7ba1\u200b\u8c50\u200b\u5bcc\u200b\u7684\u200b\u56de\u200b\u5fa9\u200b\u8207\u200b\u53e6\u200b\u4e00\u200b\u500b\u200b\u4e8b\u4ef6\u200b\u5f62\u6210\u200b\u95dc\u200b\u4fc2\u200b,\u200b\u4f46\u200b\u5b83\u5011\u200b\u4e0d\u6703\u200b \u200b\u4f7f\u7528\u200b\"rel_type\"\u200b\u5275\u5efa\u200b\u6b64\u95dc\u200b\u4fc2\u200b\u3002\u200b\u800c\u662f\u200b\u540d\u70ba\u200b\"m.in_reply_to\"\u200b\u7684\u200b\u5b50\u9805\u200b \u200b\u7528\u200b\u65bc\u200b\u63cf\u8ff0\u200b\u56de\u200b\u5fa9\u200b\u7684\u95dc\u200b\u4fc2\u200b,\u200b\u4fdd\u7559\u200b \"m.relates_to\"\u200b\u4f86\u200b\u63cf\u8ff0\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u4e3b\u8981\u200b\u95dc\u200b\u4fc2\u200b\u3002\u200b\u9019\u200b\u610f\u5473\u8457\u200b \u200b\u5982\u679c\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\u53ea\u662f\u200b\u56de\u200b\u5fa9\u200b\u53e6\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b,\u200b\u6c92\u6709\u200b\u9032\u200b\u4e00\u6b65\u200b\u7684\u95dc\u200b\u4fc2\u200b, \"m.relates_to\"\u200b\u7684\u200b\"rel_type\"\u200b\u548c\u200b\"event_id\"\u200b\u5c6c\u6027\u200b\u8b8a\u70ba\u200b\u53ef\u9078\u200b\u3002</p> <p>\u200b\u4e00\u500b\u200b\u7bc4\u4f8b\u200b\u56de\u200b\u5fa9\u200b\u662f\u200b:</p> <pre><code>{\n  \"\u200b\u5167\u5bb9\u200b\": {\n    \"m.relates_to\": {\n      \"m.in_reply_to\": {\n        \"event_id\": \"$another_\u200b\u4e8b\u4ef6\u200b\"\n      }\n    },\n    \"body\": \"\u200b\u9019\u807d\u200b\u8d77\u4f86\u200b\u662f\u200b\u500b\u200b\u597d\u200b\u4e3b\u610f\u200b\uff01\n  },\n  \u200b\u4e8b\u4ef6\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u5176\u4ed6\u200b\u6b04\u4f4d\u200b\n}\n</code></pre> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\"m.in_reply_to\"\u200b\u7269\u4ef6\u200b\u7684\u200b\"event_id\"\u200b\u5177\u6709\u200b\u76f8\u540c\u200b\u7684\u200b\u8981\u6c42\u200b \u200b\u597d\u50cf\u200b\u5b83\u200b\u76f4\u63a5\u200b\u5728\u200b\"m.relates_to\"\u200b\u4e0b\u200b\u3002</p>"},{"location":"chat/client_server/#_9","title":"\u8c50\u5bcc\u200b\u56de\u200b\u5fa9\u200b\u7684\u200b\u56de\u9000","text":"<p>\u200b\u67d0\u4e9b\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u80fd\u200b\u4e0d\u200b\u652f\u6301\u200b\u8c50\u5bcc\u200b\u7684\u200b\u56de\u200b\u5fa9\u200b,\u200b\u56e0\u6b64\u200b\u9700\u8981\u200b \u200b\u56de\u9000\u200b\u4ee5\u200b\u6539\u7528\u200b\u3002\u200b\u4e0d\u200b\u652f\u63f4\u200b\u5bcc\u56de\u200b\u5fa9\u200b\u7684\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b \u200b\u5c07\u200b\u4e8b\u4ef6\u200b\u5448\u200b\u73fe\u70ba\u200b\u8c50\u5bcc\u200b\u7684\u200b\u56de\u200b\u5fa9\u200b\u4e26\u4e0d\u7279\u5225\u200b\u3002</p> <p>\u200b\u652f\u63f4\u200b\u5bcc\u56de\u200b\u5fa9\u200b\u7684\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u63d0\u4f9b\u200b\u56de\u9000\u200b\u683c\u5f0f\u200b \u200b\u56de\u200b\u5fa9\u200b,\u200b\u4e26\u4e14\u200b\u5fc5\u9808\u200b\u5728\u200b\u5448\u200b\u73fe\u56de\u200b\u5fa9\u200b\u4e4b\u524d\u200b\u525d\u96e2\u200b\u56de\u9000\u200b\u3002\u200b\u9019\u200b \u200b\u6bcf\u500b\u200b\"msgtype\"\u200b\u7684\u200b\u7279\u5b9a\u200b\u56de\u9000\u200b\u6587\u672c\u200b\u90fd\u200b\u4e0d\u540c\u200b,\u200b\u4f46\u662f\u200b \"\u200b\u6b63\u6587\u200b\"\u200b\u7684\u200b\u4e00\u822c\u200b\u683c\u5f0f\u200b\u70ba\u200b:</p> <pre><code>&gt; &lt;@alice:example.org&gt;\u200b\u9019\u662f\u200b\u539f\u59cb\u200b\u6b63\u6587\u200b\n&gt; \u200b\u9019\u662f\u200b\u56de\u200b\u5fa9\u200b\u7684\u200b\u5730\u65b9\u200b\n\n</code></pre> <p>\"formatted_body\"\uff08\u200b\u5982\u679c\u200b\u5b58\u5728\u200b\uff09\u200b\u4e26\u200b\u4f7f\u7528\u200b\u95dc\u806f\u200b\u7684\u200b\"\u200b\u683c\u5f0f\u200b\" \"org.matrix.custom.html\"\u200b\u61c9\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u7bc4\u672c\u200b:</p> <pre><code>\n&lt;MX-\u200b\u56de\u200b\u5fa9\u200b&gt;\n    &lt;\u200b\u584a\u200b\u5f15\u7528\u200b&gt;\n        &lt;a href=\"https://matrix.to/#/!somewhere:example.org/$event:example.org\"&gt;\u200b\u56de\u200b\u5fa9\u200b&lt;/a&gt;\n        &lt;a href=\"https://matrix.to/#/@alice:example.org\"&gt;@alice:example.org&lt;/a&gt;\n        &lt;BR/&gt;\n        &lt;!--\u200b\u9019\u662f\u200b\u76f8\u95dc\u200b\u4e8b\u4ef6\u200b\u7684\u200b HTML \u200b\u6240\u5728\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002--&gt;\n    &lt;/\u200b\u584a\u200b\u5f15\u7528\u200b&gt;\n&lt;/MX-\u200b\u56de\u200b\u5fa9\u200b&gt;\n\u200b\u9019\u200b\u5c31\u662f\u200b\u7b54\u8986\u200b\u7684\u200b\u5730\u65b9\u200b\u3002\n</code></pre> <p>\u200b\u5982\u679c\u200b\u76f8\u95dc\u200b\u4e8b\u4ef6\u200b\u6c92\u6709\u200b\"formatted_body\",\u200b\u5247\u200b\u4e8b\u4ef6\u200b\u7684\u200b \u200b\u5728\u200b\u5c0d\u200b\u4efb\u4f55\u200b HTML \u200b\u7279\u6b8a\u200b\u5b57\u5143\u200b\u9032\u884c\u200b\u7de8\u78bc\u200b\u5f8c\u200b,\u200b\u61c9\u200b\u8003\u616e\u200b\"body\"\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u5169\u500b\u200b\u9328\u9ede\u200b\u4e2d\u200b\u7684\u200b\"href\"\u200b\u90fd\u200b\u4f7f\u7528\u200b [matrix.to URI]\uff08/appendices#matrixto-navigation\uff09.</p>"},{"location":"chat/client_server/#_10","title":"\u525d\u96e2\u200b\u56de\u9000","text":"<p>\u200b\u652f\u63f4\u200b\u5bcc\u56de\u200b\u5fa9\u200b\u7684\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5fc5\u9808\u200b\u5f9e\u200b \u200b\u4e8b\u4ef6\u200b,\u200b\u7136\u5f8c\u5448\u73fe\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u9019\u662f\u200b\u56e0\u70ba\u200b \u200b\u4e0d\u80fd\u200b\u4fe1\u4efb\u200b\u56de\u9000\u200b\u662f\u200b \u200b\u4e8b\u4ef6\u200b\u3002\u200b\u522a\u9664\u200b\u56de\u9000\u200b\u5f8c\u200b,\u200b\u5efa\u8b70\u200b\u7528\u6236\u200b\u7aef\u200b\u8868\u793a\u200b \"m.in_reply_to\"\u200b\u5f15\u7528\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u985e\u4f3c\u200b\u65bc\u200b\u56de\u9000\u200b\u7684\u200b\u4e8b\u4ef6\u200b \u200b\u8868\u793a\u200b,\u200b\u5118\u200b\u7ba1\u200b\u5ba2\u200b\u6236\u200b\u78ba\u200b\u5be6\u200b\u70ba\u200b\u5176\u200b\u4f7f\u7528\u8005\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u5275\u4f5c\u200b\u81ea\u7531\u200b \u200b\u4ecb\u9762\u200b\u3002\u200b\u5ba2\u6236\u200b\u61c9\u8a72\u200b\u66f4\u200b\u559c\u6b61\u200b\u300cformatted_body\u300d\u200b\u800c\u200b\u4e0d\u662f\u200b\u300cbody\u300d, \u200b\u5c31\u200b\u50cf\u200b\u5176\u4ed6\u200b\"m.room.message\"\u200b\u4e8b\u4ef6\u200b\u4e00\u6a23\u200b\u3002</p> <p>\u200b\u8981\u200b\u525d\u96e2\u200b\"\u200b\u6b63\u6587\u200b\"\u200b\u4e0a\u200b\u7684\u200b\u56de\u9000\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u904d\u6b77\u200b\u6bcf\u500b\u200b \u200b\u5b57\u4e32\u200b\u7684\u200b\u884c\u200b,\u200b\u522a\u200b\u9664\u4ee5\u200b\u56de\u9000\u200b\u958b\u982d\u200b\u7684\u200b\u4efb\u4f55\u200b\u884c\u200b \u200b\u524d\u7db4\u200b\uff08\"&gt; \",\u200b\u5305\u62ec\u200b\u7a7a\u683c\u200b,\u200b\u4e0d\u5e36\u200b\u5f15\u865f\u200b\uff09\u200b\u4e26\u5728\u200b\u4ee5\u4e0b\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u505c\u6b62\u200b \u200b\u9047\u5230\u200b\u4e0d\u5e36\u200b\u524d\u7db4\u200b\u7684\u200b\u884c\u200b\u3002\u200b\u6b64\u524d\u200b\u7db4\u200b\u7a31\u200b\u70ba\u200b \u200b\u56de\u9000\u200b\u524d\u7db4\u200b\u5e8f\u5217\u200b\"\u3002</p> <p>\u200b\u82e5\u8981\u200b\u525d\u96e2\u200b\"formatted_body\"\u200b\u4e0a\u200b\u7684\u200b\u56de\u9000\u200b,\u200b\u7528\u6236\u200b\u7aef\u61c9\u200b\u522a\u9664\u200b \u200b\u6574\u500b\u200b\"MX-\u200b\u56de\u200b\u5fa9\u200b\"\u200b\u6a19\u8a18\u200b\u3002</p>"},{"location":"chat/client_server/#mtextmnotice","title":"\"m.text\"\u3001\"m.notice\"\u200b\u548c\u200b\u7121\u6cd5\u8b58\u5225\u200b\u7684\u200b\u6d88\u606f\u200b\u985e\u578b\u200b\u7684\u200b\u56de\u9000","text":"<p>\u200b\u4f7f\u7528\u200b\u524d\u7db4\u200b\u5e8f\u5217\u200b,\u200b\u76f8\u95dc\u200b\u4e8b\u4ef6\u200b\"\u200b\u6b63\u6587\u200b\"\u200b\u7684\u200b\u7b2c\u4e00\u884c\u200b \u200b\u61c9\u4ee5\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b ID \u200b\u70ba\u200b\u524d\u7db4\u200b,\u200b\u5f8c\u200b\u8ddf\u200b\u6bcf\u884c\u200b \u200b\u4ee5\u200b\u56de\u9000\u200b\u524d\u7db4\u200b\u5e8f\u5217\u200b\u70ba\u200b\u524d\u7db4\u200b\u3002\u200b\u4f8b\u5982\u200b:</p> <pre><code>&gt; &lt;@alice:example.org&gt;\u200b\u9019\u662f\u200b\u7b2c\u4e00\u884c\u200b\n&gt; \u200b\u9019\u662f\u200b\u7b2c\u4e8c\u884c\u200b\n&gt; \u200b\u9019\u662f\u200b\u56de\u200b\u5fa9\u200b\n\n</code></pre> <p>\"formatted_body\"\u200b\u4f7f\u7528\u200b\u672c\u7bc0\u200b\u524d\u9762\u200b\u5b9a\u7fa9\u7684\u200b\u7bc4\u672c\u200b\u3002</p>"},{"location":"chat/client_server/#memote","title":"\"m.emote\"\u200b\u7684\u200b\u56de\u9000","text":"<p>\u200b\u8207\u200b\"m.text\"\u200b\u7684\u200b\u56de\u9000\u200b\u985e\u4f3c\u200b,\u200b\u6bcf\u884c\u200b\u90fd\u200b\u4ee5\u200b \u200b\u56de\u9000\u200b\u524d\u7db4\u200b\u5e8f\u5217\u200b\u3002\u200b\u4f46\u662f\u200b,\u200b\u61c9\u200b\u5728\u200b\u4e4b\u524d\u200b\u63d2\u5165\u200b\u661f\u865f\u200b \u200b\u4f7f\u7528\u8005\u200b\u7684\u200bID,\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b:</p> <pre><code>&gt; * &lt;@alice:example.org&gt; \u200b\u611f\u89ba\u200b\u4eca\u5929\u200b\u5c07\u662f\u200b\u7f8e\u597d\u200b\u7684\u200b\u4e00\u5929\u200b\n    \u200b\u9019\u662f\u200b\u56de\u200b\u5fa9\u200b\n</code></pre> <p>\"formatted_body\"\u200b\u5c0d\u200b\u65bc\u200b\u7bc4\u672c\u200b\u6709\u200b\u4e00\u500b\u200b\u7d30\u5fae\u200b\u7684\u200b\u5340\u5225\u200b,\u200b\u5176\u4e2d\u200b \u200b\u661f\u865f\u200b\u4e5f\u200b\u63d2\u5165\u200b\u5230\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b ID \u200b\u4e4b\u524d\u200b:</p> <pre><code>\n&lt;MX-\u200b\u56de\u200b\u5fa9\u200b&gt;\n    &lt;\u200b\u584a\u200b\u5f15\u7528\u200b&gt;\n        &lt;a href=\"https://matrix.to/#/!somewhere:example.org/$event:example.org\"&gt;\u200b\u56de\u200b\u5fa9\u200b&lt;/a&gt;\n\n        * &lt;a href=\"https://matrix.to/#/@alice:example.org\"&gt;@alice:example.org&lt;/a&gt;\n        &lt;BR/&gt;\n\n        &lt;!--\u200b\u9019\u662f\u200b\u76f8\u95dc\u200b\u4e8b\u4ef6\u200b\u7684\u200b HTML \u200b\u6240\u5728\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002--&gt;\n    &lt;/\u200b\u584a\u200b\u5f15\u7528\u200b&gt;\n&lt;/MX-\u200b\u56de\u200b\u5fa9\u200b&gt;\n\u200b\u9019\u200b\u5c31\u662f\u200b\u7b54\u8986\u200b\u7684\u200b\u5730\u65b9\u200b\u3002\n\n</code></pre>"},{"location":"chat/client_server/#mimagemvideomaudiomfile","title":"\"m.image\"\u3001\"m.video\"\u3001\"m.audio\"\u200b\u548c\u200b\"m.file\"\u200b\u7684\u200b\u56de\u9000","text":"<p>\u200b\u76f8\u95dc\u200b\u4e8b\u4ef6\u200b\u7684\u200b\"\u200b\u6b63\u6587\u200b\"\u200b\u5c07\u662f\u200b\u4e00\u500b\u200b\u6a94\u540d\u200b,\u200b\u53ef\u80fd\u200b\u4e0d\u662f\u200b\u5f88\u200b \u200b\u63cf\u8ff0\u200b\u3002\u200b\u76f8\u95dc\u200b\u4e8b\u4ef6\u200b\u4e0d\u61c9\u200b\u5177\u6709\u200b\"\u200b\u683c\u5f0f\u200b\" \u200b\u6216\u200b\"\u200b\u5167\u5bb9\u200b\"\u200b\u4e2d\u200b\u7684\u200b\"formatted_body\"\u2014\u2014\u200b\u5982\u679c\u200b\u6d3b\u52d5\u200b\u78ba\u5be6\u200b\u6709\u200b\"\u200b\u683c\u5f0f\u200b\" \u200b\u548c\u200b/\u200b\u6216\u200b\"formatted_body\",\u200b\u5247\u61c9\u200b\u5ffd\u7565\u200b\u9019\u4e9b\u200b\u6b04\u4f4d\u200b\u3002\u200b\u56e0\u70ba\u200b \u200b\u6a94\u540d\u200b\u672c\u8eab\u200b\u53ef\u80fd\u200b\u4e0d\u662f\u200b\u63cf\u8ff0\u6027\u200b\u7684\u200b,\u200b\u76f8\u95dc\u200b\u4e8b\u4ef6\u200b\u7684\u200b\"\u200b\u6b63\u6587\u200b\"\u200b\u61c9\u8a72\u200b \u200b\u88ab\u8996\u200b\u70ba\u200b\u300c\u200b\u5df2\u767c\u200b\u9001\u200b\u6a94\u200b\u300d\u3002' \u200b\u4f7f\u8f38\u51fa\u200b\u770b\u200b\u8d77\u4f86\u200b\u76f8\u4f3c\u200b \u200b\u5230\u200b\u4ee5\u4e0b\u200b\u5167\u5bb9\u200b:</p> <pre><code>&gt; &lt;@alice:example.org&gt;\u200b\u767c\u9001\u200b\u4e86\u200b\u4e00\u500b\u200b\u6a94\u200b\u3002\n\u200b\u9019\u662f\u200b\u56de\u200b\u5fa9\u200b\n</code></pre> <pre><code>\n&lt;MX-\u200b\u56de\u200b\u5fa9\u200b&gt;\n    &lt;\u200b\u584a\u200b\u5f15\u7528\u200b&gt;\n        &lt;a href=\"https://matrix.to/#/!somewhere:example.org/$event:example.org\"&gt;\u200b\u56de\u200b\u5fa9\u200b&lt;/a&gt;\n        &lt;a href=\"https://matrix.to/#/@alice:example.org\"&gt;@alice:example.org&lt;/a&gt;\n        &lt;BR/&gt;\n        \u200b\u767c\u9001\u200b\u4e86\u200b\u4e00\u500b\u200b\u6a94\u200b\u3002\n    &lt;/\u200b\u584a\u200b\u5f15\u7528\u200b&gt;\n&lt;/MX-\u200b\u56de\u200b\u5fa9\u200b&gt;\n\u200b\u9019\u200b\u5c31\u662f\u200b\u7b54\u8986\u200b\u7684\u200b\u5730\u65b9\u200b\u3002\n\n</code></pre> <p>\u200b\u5c0d\u200b\u65bc\u200b\"m.image\",\u200b\u6587\u672c\u200b\u61c9\u70ba\u200b\"\u200b\u767c\u9001\u200b\u5716\u200b\u50cf\u200b\"\u3002<code>.\u200b\u5c0d\u200b\u65bc\u200b\u300cm.video\u300d, \u200b\u6587\u672c\u200b\u61c9\u70ba\u200b\u300c\u200b\u767c\u9001\u200b\u8996\u983b\u200b\u300d\u3002</code>.\u200b\u5c0d\u200b\u65bc\u200b\"m.audio\",\u200b\u6587\u672c\u200b\u61c9\u70ba\u200b \u300c\u200b\u767c\u9001\u200b\u97f3\u8a0a\u6a94\u200b\u300d\u3002\u3002</p>"},{"location":"chat/client_server/#114-ip","title":"11.4 IP \u200b\u8a9e\u97f3","text":"<p>\u200b\u672c\u6a21\u7d44\u200b\u6982\u8ff0\u200b\u4e86\u200b\u623f\u9593\u200b\u4e2d\u200b\u7684\u200b\u5169\u500b\u200b\u4f7f\u7528\u8005\u200b\u5982\u4f55\u200b\u8a2d\u7f6e\u200bIP\u200b\u8a9e\u97f3\u200b \uff08VoIP\uff09\u200b\u4e92\u76f8\u200b\u547c\u53eb\u200b\u3002\u200b\u8a9e\u97f3\u200b\u548c\u200b\u8996\u983b\u200b\u901a\u8a71\u200b\u5efa\u7acb\u200b\u5728\u200b WebRTC 1.0\u200b\u6a19\u6e96\u200b\u3002\u200b\u547c\u53eb\u200b\u4fe1\u4ee4\u200b\u662f\u200b\u901a\u904e\u200b\u767c\u9001\u200b [\u200b\u6d88\u606f\u200b] \u200b\u4f86\u200b\u5be6\u73fe\u200b\u7684\u200b \u200b\u4e8b\u4ef6\u200b]\uff08#events\uff09\u200b\u5230\u200b\u623f\u9593\u200b\u3002\u200b\u5728\u200b\u6b64\u200b\u7248\u672c\u200b\u7684\u200b\u898f\u7bc4\u4e2d\u200b,\u200b\u53ea\u6709\u200b\u5169\u65b9\u200b \u200b\u652f\u63f4\u200b\u901a\u4fe1\u200b\uff08\u200b\u4f8b\u5982\u200b,\u200b\u5169\u500b\u200b\u5c0d\u200b\u7b49\u200b\u9ad4\u4e4b\u9593\u200b\u6216\u200b\u5c0d\u200b\u7b49\u200b\u9ad4\u4e4b\u9593\u200b \u200b\u548c\u200b\u591a\u9ede\u200b\u6703\u8b70\u200b\u88dd\u7f6e\u200b\uff09\u3002\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u7528\u6236\u200b\u7aef\u200b\u53ea\u80fd\u200b \u200b\u5c07\u200b\u547c\u53eb\u200b\u4e8b\u4ef6\u200b\u767c\u200b\u9001\u5230\u200b\u53ea\u6709\u200b\u5169\u500b\u200b\u53c3\u8207\u8005\u200b\u7684\u200b\u804a\u5929\u5ba4\u200b\u3002</p>"},{"location":"chat/client_server/#1141","title":"11.4.1 \u200b\u4e8b\u4ef6","text":""},{"location":"chat/client_server/#mcallanswer","title":"m.call.answer","text":"<p>\u200b\u6b64\u200b\u4e8b\u4ef6\u200b\u7531\u200b\u88ab\u53eb\u200b\u65b9\u5728\u200b\u5e0c\u671b\u200b\u61c9\u7b54\u200b\u547c\u53eb\u200b\u6642\u767c\u200b\u9001\u200b</p> <pre><code>{\n  \"content\": {\n    \"answer\": {\n      \"sdp\": \"v=0\\r\\no=- 6584580628695956864 2 IN IP4 127.0.0.1[...]\",\n      \"type\": \"answer\"\n    },\n    \"call_id\": \"12345\",\n    \"version\": 0\n  },\n  \"event_id\": \"$143273582443PhrSn:example.org\",\n  \"origin_server_ts\": 1432735824653,\n  \"room_id\": \"!jEsUZKDJdhlrceRyVU:example.org\",\n  \"sender\": \"@example:example.org\",\n  \"type\": \"m.call.answer\",\n  \"unsigned\": {\n    \"age\": 1234\n  }\n}\n</code></pre>"},{"location":"chat/client_server/#_11","title":"\u5ba2\u6236\u200b\u7aef\u884c\u200b\u70ba","text":"<p>\u200b\u4f7f\u7528\u200b\u4ea4\u63db\u200b\u7684\u200b\u6d88\u606f\u200b\u4e8b\u4ef6\u200b\u8a2d\u7f6e\u200b\u547c\u53eb\u200b,\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b:</p> <pre><code>\u200b\u4f86\u200b\u96fb\u8005\u200b\u88ab\u53eb\u200b\u65b9\u200b\n[\u200b\u64a5\u200b\u6253\u96fb\u8a71\u200b]\nm.call.invite -----------&gt;\nm.call.candidate --------&gt;\n[..\u200b\u5019\u9078\u4eba\u200b..]--------&gt;\n[\u200b\u63a5\u807d\u200b\u96fb\u8a71\u200b]\n&lt;--------------- m.call.answer\n[\u200b\u901a\u8a71\u200b\u6b63\u5728\u200b\u9032\u884c\u200b\u4e2d\u200b]\n&lt;--------------- m.call.hangup\n</code></pre> <p>\u200b\u6216\u200b\u62d2\u7d55\u200b\u7684\u200b\u547c\u53eb\u200b:</p> <pre><code>\u200b\u4f86\u200b\u96fb\u8005\u200b\u88ab\u53eb\u200b\u65b9\u200b\nm.call.invite ------------&gt;\nm.call.candidate ---------&gt;\n[..\u200b\u5019\u9078\u4eba\u200b..]---------&gt;\n[\u200b\u62d2\u7d55\u200b\u4f86\u96fb\u200b]\n&lt;-------------- m.call.hangup\n</code></pre> <p>\u200b\u8abf\u7528\u200b\u662f\u200b\u6839\u64da\u200bWebRTC\u200b\u898f\u7bc4\u5354\u5546\u200b\u7684\u200b\u3002</p>"},{"location":"chat/client_server/#_12","title":"\u7729\u5149","text":"<p>\"\u200b\u7729\u5149\u200b\"\u200b\u662f\u200b\u5169\u500b\u200b\u4f7f\u7528\u8005\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u4f4d\u7f6e\u200b\u76f8\u4e92\u200b\u547c\u53eb\u200b\u6642\u200b\u51fa\u73fe\u200b\u7684\u200b\u554f\u984c\u200b \u200b\u5927\u81f4\u200b\u5728\u200b\u540c\u4e00\u200b\u6642\u9593\u200b\u3002\u200b\u9019\u6703\u200b\u5c0e\u81f4\u200b\u547c\u53eb\u200b\u7121\u6cd5\u200b\u8a2d\u7f6e\u200b\u70ba\u200b \u200b\u5df2\u7d93\u200b\u6709\u200b\u4f86\u96fb\u200b/\u200b\u53bb\u96fb\u200b\u3002\u200b\u7729\u5149\u200b\u89e3\u6790\u5ea6\u200b\u6f14\u7b97\u6cd5\u200b \u200b\u53ef\u7528\u200b\u65bc\u200b\u78ba\u5b9a\u200b\u8981\u200b\u639b\u65b7\u200b\u7684\u200b\u547c\u53eb\u200b\u548c\u200b\u61c9\u7b54\u200b\u7684\u200b\u547c\u53eb\u200b\u3002 \u200b\u5982\u679c\u200b\u5169\u500b\u200b\u7528\u6236\u200b\u7aef\u200b\u5be6\u73fe\u200b\u76f8\u540c\u200b\u7684\u200b\u6f14\u7b97\u6cd5\u200b,\u200b\u5247\u5b83\u200b\u5011\u200b\u90fd\u200b\u5c07\u9078\u64c7\u200b \u200b\u540c\u4e00\u200b\u547c\u53eb\u200b\u548c\u200b\u547c\u53eb\u200b\u5c07\u200b\u6210\u529f\u200b\u9023\u63a5\u200b\u3002</p> <p>\u200b\u7576\u200b\u547c\u53eb\u200b\u88ab\u200b\"\u200b\u4e0b\u9054\u200b\"\u200b\u5230\u200b\u623f\u9593\u200b\u800c\u200b\u4e0d\u662f\u200b\u4f7f\u7528\u8005\u200b\u6642\u200b,\u200b\u7729\u5149\u200b\u89e3\u6790\u5ea6\u200b \u200b\u4e0b\u9762\u200b\u6982\u8ff0\u200b\u7684\u200b\u6f14\u7b97\u6cd5\u200b\u50c5\u8003\u616e\u200b\u7528\u200b\u65bc\u200b\u5c0d\u200b \u200b\u540c\u4e00\u200b\u500b\u200b\u623f\u9593\u200b\u3002\u200b\u6f14\u7b97\u6cd5\u200b\u5982\u4e0b\u200b:</p> <p>-\u200b\u5982\u679c\u200b\u6536\u5230\u200b\u623f\u9593\u200b\u7684\u200b\"m.call.invite\",\u200b\u800c\u200b\u5ba2\u6236\u200b \u200b\u6e96\u5099\u200b\u5411\u200b\u540c\u4e00\u200b\u623f\u9593\u200b\u767c\u9001\u200b\"m.call.invite\": -\u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u53d6\u6d88\u200b\u5176\u50b3\u51fa\u200b\u547c\u53eb\u200b,\u200b\u6539\u70ba\u200b \u200b\u4ee3\u8868\u200b\u7528\u6236\u200b\u81ea\u52d5\u200b\u63a5\u53d7\u200b\u50b3\u5165\u200b\u547c\u53eb\u200b\u3002 -\u200b\u5982\u679c\u200b\u6536\u5230\u200b\u623f\u9593\u200b\u7684\u200b\"m.call.invite\"\u200b\u5728\u200b\u7528\u6236\u200b\u7aef\u200b\u6709\u200b \u200b\u5df2\u767c\u200b\u9001\u200b \"m.call.invite\"\u200b\u5230\u200b\u540c\u4e00\u200b\u623f\u9593\u200b,\u200b\u6b63\u5728\u200b\u7b49\u5f85\u200b \u200b\u56de\u61c9\u200b: -\u200b\u5ba2\u6236\u200b\u61c9\u200b\u57f7\u884c\u200b \u200b\u5169\u500b\u200b\u547c\u53eb\u200b\u7684\u200b\u547c\u53eb\u200bID,\u200b\u4e26\u200b\u4f7f\u7528\u200b\u5169\u500b\u200b\u547c\u53eb\u200b\u4e2d\u200b\u7684\u200b\u8f03\u200b\u5c0f\u200b, \u200b\u6d41\u7522\u8d8a\u200b\u5927\u200b\u3002\u200b\u5982\u679c\u200b\u4f86\u200b\u96fb\u8f03\u200b\u5c0f\u200b,\u200b\u5247\u200b \u200b\u7528\u6236\u200b\u7aef\u200b\u61c9\u200b\u4ee3\u8868\u200b\u4f7f\u7528\u8005\u200b\u63a5\u53d7\u200b\u6b64\u8abf\u200b\u7528\u200b\u3002</p> <p>\u200b\u547c\u53eb\u200b\u8a2d\u7f6e\u200b\u61c9\u8a72\u200b\u5c0d\u200b\u7528\u6236\u200b\u986f\u793a\u200b\u7121\u7e2b\u200b,\u200b\u5c31\u200b\u597d\u50cf\u200b\u4ed6\u5011\u200b\u53ea\u662f\u200b\u7c21\u55ae\u200b\u5730\u200b \u200b\u6253\u200b\u4e86\u200b\u500b\u200b\u96fb\u8a71\u200b,\u200b\u5c0d\u65b9\u63a5\u200b\u807d\u200b\u4e86\u200b\u3002\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u4efb\u4f55\u200b\u5a92\u9ad4\u200b \u200b\u61c9\u8f49\u79fb\u200b\u5df2\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u7528\u200b\u65bc\u200b\u547c\u53eb\u200b\u7684\u200b\u6d41\u200b,\u200b\u4e26\u4e14\u200b \u200b\u7528\u200b\u65bc\u200b\u66ff\u63db\u200b\u5b83\u200b\u7684\u200b\u8abf\u7528\u200b\u3002</p>"},{"location":"chat/client_server/#1143","title":"11.4.3 \u200b\u4f3a\u670d\u5668\u200b\u884c\u70ba","text":"<p>\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u53ef\u4ee5\u200b\u63d0\u4f9b\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u7684\u200b TURN \u200b\u4f3a\u670d\u5668\u200b \u200b\u806f\u200b\u7e6b\u200b\u9060\u200b\u7aef\u65b9\u200b\u3002\u200b\u5c07\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b HTTP API \u200b\u7aef\u9ede\u200b \u200b\u7528\u6236\u200b\u7aef\u200b\u4ee5\u200b\u7372\u53d6\u200b\u6709\u95dc\u200b TURN \u200b\u4f3a\u670d\u5668\u200b\u7684\u200b\u8cc7\u8a0a\u200b\u3002</p>"},{"location":"chat/client_server/#1144","title":"11.4.4 \u200b\u5b89\u5168\u200b\u6ce8\u610f\u200b\u4e8b\u9805","text":"<p>\u200b\u53ea\u80fd\u200b\u5411\u200b\u5177\u6709\u200b\u53e6\u200b\u4e00\u500b\u200b\u7528\u6236\u200b\u7684\u200b\u623f\u9593\u200b\u767c\u51fa\u200b\u547c\u53eb\u200b\u3002\u200b\u5982\u679c\u200b \u200b\u5b83\u5011\u200b\u88ab\u200b\u653e\u7f6e\u200b\u5728\u200b\u7fa4\u804a\u200b\u5ba4\u200b\u4e2d\u200b,\u200b\u53ef\u80fd\u200b\u662f\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b \u200b\u5c07\u6514\u200b\u622a\u200b\u4e26\u63a5\u200b\u807d\u200b\u96fb\u8a71\u200b\u3002</p>"},{"location":"chat/client_server/#115","title":"11.5 \u200b\u9375\u5165\u200b\u901a\u77e5","text":"<p>\u200b\u4f7f\u7528\u8005\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u5728\u200b\u5176\u4ed6\u200b\u7528\u6236\u200b\u5728\u200b\u623f\u9593\u200b\u5167\u9375\u5165\u200b\u5167\u5bb9\u6642\u200b\u6536\u5230\u200b\u901a\u77e5\u200b\u3002 \u200b\u9019\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u9375\u5165\u200b\u901a\u77e5\u200b\u4f86\u200b\u5be6\u73fe\u200b\u3002\u200b\u9019\u4e9b\u200b\u662f\u200b\u77ed\u200b\u66ab\u200b\u7684\u200b \u200b\u4e8b\u4ef6\u200b,\u200b\u56e0\u6b64\u200b\u5b83\u5011\u200b\u4e0d\u69cb\u200b\u6210\u200b [\u200b\u4e8b\u4ef6\u200b\u5716\u200b]\uff08/#event\u200b\u56fe\u200b\uff09\u3002\u200b\u9375\u5165\u200b\u901a\u77e5\u200b\u7684\u200b\u7bc4\u570d\u200b\u9650\u5b9a\u200b \u200b\u5230\u200b\u4e00\u500b\u200b\u623f\u9593\u200b\u3002</p>"},{"location":"chat/client_server/#_13","title":"\u4e8b\u4ef6","text":""},{"location":"chat/client_server/#mtyping","title":"m.typing","text":"<p>\u200b\u901a\u77e5\u200b\u7528\u6236\u200b\u7aef\u200b\u76ee\u524d\u200b\u6b63\u5728\u200b\u9375\u5165\u200b\u7684\u200b\u7528\u6236\u200b\u6e05\u55ae\u200b\u3002</p> <pre><code>{\n  \"content\": {\n    \"user_ids\": [\n      \"@alice:matrix.org\",\n      \"@bob:example.com\"\n    ]\n  },\n  \"type\": \"m.typing\"\n}\n</code></pre>"},{"location":"chat/client_server/#_14","title":"\u5ba2\u6236\u200b\u7aef\u884c\u200b\u70ba","text":"<p>\u200b\u7576\u7528\u200b\u6236\u7aef\u200b\u6536\u5230\u200b\u300cm.typing\u300d\u200b\u4e8b\u4ef6\u200b\u6642\u200b,\u200b\u5b83\u200b\u5fc5\u9808\u200b\u4f7f\u7528\u200b\u4f7f\u7528\u8005\u200b ID \u200b\u6e05\u55ae\u200b \u200b\u66ff\u63db\u200b\u7576\u524d\u200b\u6b63\u5728\u200b\u9375\u5165\u200b\u7684\u200b\u6bcf\u500b\u200b\u7528\u6236\u200b\u7684\u200b\u77e5\u8b58\u200b\u3002\u200b\u9019\u200b \u200b\u539f\u56e0\u200b\u662f\u200b\u4f3a\u670d\u5668\u200b\u4e0d\u8a18\u200b\u5f97\u200b\u4e0d\u662f\u200b\u7684\u200b\u4f7f\u7528\u8005\u200b \u200b\u76ee\u524d\u200b\u8f38\u5165\u200b,\u200b\u56e0\u70ba\u200b\u8a72\u200b\u6e05\u55ae\u200b\u5f88\u5feb\u200b\u5c31\u6703\u200b\u8b8a\u5927\u200b\u3002\u200b\u5ba2\u6236\u200b\u61c9\u200b\u6a19\u8a18\u200b \u200b\u56e0\u70ba\u200b\u4e0d\u9375\u5165\u200b\u4e0d\u200b\u5728\u200b\u8a72\u200b\u6e05\u55ae\u200b\u4e2d\u200b\u7684\u200b\u4efb\u4f55\u200b\u4f7f\u7528\u8005\u200bID\u3002</p> <p>\u200b\u5efa\u8b70\u200b\u7528\u6236\u200b\u7aef\u5b58\u200b\u5132\u4e00\u500b\u200b\u300c\u200b\u5e03\u723e\u503c\u200b\u300d \u200b\u6307\u793a\u200b\u662f\u5426\u200b \u200b\u4f7f\u7528\u8005\u200b\u662f\u5426\u200b\u6b63\u5728\u200b\u9375\u5165\u200b\u3002\u200b\u96d6\u7136\u200b\u6b64\u503c\u200b\u70ba\u200b\"true\",\u200b\u4f46\u8a08\u200b\u6642\u5668\u200b\u61c9\u89f8\u200b\u767c\u200b \u200b\u5b9a\u671f\u200b\u6bcf\u200b N \u200b\u79d2\u200b\u767c\u9001\u200b\u4e00\u6b21\u200b\u9375\u5165\u200b\u7684\u200b HTTP \u200b\u8acb\u6c42\u200b\u3002\u200b\u7684\u200b\u50f9\u503c\u200b N\u200b\u5efa\u8b70\u200b\u4e0d\u200b\u8d85\u904e\u200b20-30\u200b\u79d2\u200b\u3002\u200b\u6b64\u8acb\u200b\u6c42\u61c9\u200b \u200b\u7531\u7528\u200b\u6236\u7aef\u200b\u91cd\u65b0\u200b\u767c\u9001\u200b\u4ee5\u200b\u7e7c\u7e8c\u200b\u901a\u77e5\u200b\u4f3a\u670d\u5668\u200b\u4f7f\u7528\u8005\u200b\u662f\u200b \u200b\u9084\u5728\u200b\u6253\u5b57\u200b\u3002\u200b\u7531\u200b\u65bc\u200b\u5f8c\u200b\u7e8c\u200b\u8acb\u6c42\u200b\u5c07\u66ff\u200b\u63db\u820a\u200b\u8acb\u6c42\u200b,\u200b\u56e0\u6b64\u200b \u200b\u9810\u671f\u200b\u8d85\u6642\u200b\u7528\u200b\u5b8c\u524d\u200b 5 \u200b\u79d2\u200b\u7684\u200b\u5b89\u5168\u200b\u88d5\u5ea6\u200b\u70ba\u200b \u200b\u63a8\u85a6\u200b\u3002\u200b\u7576\u200b\u4f7f\u7528\u8005\u200b\u505c\u6b62\u200b\u9375\u5165\u200b\u6642\u200b,\u200b\u72c0\u614b\u200b\u66f4\u6539\u200b \"\u200b\u5e03\u723e\u200b\"\u200b\u5230\u200b\"\u200b\u5047\u200b\"\u200b\u61c9\u8a72\u200b\u89f8\u767c\u200b\u53e6\u200b\u4e00\u500b\u200bHTTP\u200b\u8acb\u6c42\u200b\u4f86\u200b\u901a\u77e5\u200b \u200b\u4f7f\u7528\u8005\u200b\u5df2\u200b\u505c\u6b62\u200b\u9375\u5165\u200b\u7684\u200b\u4f3a\u670d\u5668\u200b\u3002</p>"},{"location":"chat/client_server/#put-_matrixclientv3roomsroomidtypinguserid","title":"PUT /_matrix/client/v3/rooms/{roomId}/typing/{userId}","text":"<p>\u200b\u9019\u544a\u8a34\u200b\u4f3a\u670d\u5668\u200b\u4f7f\u7528\u8005\u200b\u6b63\u5728\u200b\u9375\u5165\u200b\u4e0b\u200b\u4e00\u500b\u200b N \u200b\u6beb\u79d2\u200b,\u200b\u5176\u4e2d\u200b N \u200b\u662f\u200b\u9375\u200b\u4e2d\u200b\u6307\u5b9a\u200b\u7684\u200b\u503c\u200b\u3002 \u200b\u6216\u8005\u200b,\u200b\u5982\u679c\u200b\u662f\u200b ,\u200b\u5b83\u200b\u544a\u8a34\u200b\u4f3a\u670d\u5668\u200b \u200b\u4f7f\u7528\u8005\u200b\u5df2\u200b\u505c\u6b62\u200b\u9375\u5165\u200b\u3002timeouttypingfalse</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"timeout\": 30000,\n  \"typing\": true\n}\n</code></pre>"},{"location":"chat/client_server/#_15","title":"\u5b89\u5168\u200b\u6ce8\u610f\u200b\u4e8b\u9805","text":"<p>\u200b\u5ba2\u6236\u200b\u53ef\u80fd\u200b\u4e0d\u200b\u5e0c\u671b\u200b\u901a\u77e5\u200b\u623f\u9593\u200b\u91cc\u200b\u7684\u200b\u6bcf\u500b\u200b\u4eba\u200b\u4ed6\u5011\u200b\u6b63\u5728\u200b\u6253\u5b57\u200b \u200b\u800c\u662f\u200b\u50c5\u6703\u200b\u8b70\u5ba4\u200b\u4e2d\u200b\u7684\u200b\u7279\u5b9a\u200b\u4f7f\u7528\u8005\u200b\u3002</p>"},{"location":"chat/client_server/#116","title":"11.6 \u200b\u6536\u64da","text":"<p>{{&lt; changed-in v=\"1.4\" &gt;}}\u200b\u6dfb\u52a0\u200b\u4e86\u200b\u79c1\u4eba\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b\u3002</p> <p>\u200b\u6b64\u6a21\u7d44\u200b\u589e\u52a0\u200b\u4e86\u200b\u5c0d\u200b\u6536\u64da\u200b\u7684\u200b\u652f\u63f4\u200b\u3002\u200b\u9019\u4e9b\u200b\u6536\u64da\u200b\u662f\u200b \u200b\u4e8b\u4ef6\u200b\u78ba\u8a8d\u200b\u3002\u200b\u6b64\u6a21\u200b\u7d44\u5b9a\u7fa9\u200b\u300cm.read\u300d\u200b\u6536\u64da\u200b \u200b\u7528\u200b\u65bc\u200b\u6307\u793a\u200b\u4f7f\u7528\u8005\u200b\u5df2\u8b80\u200b\u53d6\u7d66\u5b9a\u200b\u4e8b\u4ef6\u200b,\u200b\u4ee5\u53ca\u200b\"m.read.private\" \u200b\u5728\u200b\u6c92\u200b\u6709\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b\u77e5\u9053\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u9054\u200b\u5230\u200b\u76f8\u540c\u200b\u7684\u200b\u76ee\u7684\u200b\u3002\u200b\u4e3b\u8981\u200b \"m.read.private\"\u200b\u65e8\u5728\u200b\u6e05\u9664\u200b[\u200b\u901a\u77e5\u200b]\uff08#receiving-\u200b\u901a\u77e5\u200b\uff09 \u200b\u6c92\u6709\u200b\u5411\u200b\u4ed6\u4eba\u200b\u5ba3\u50b3\u8b80\u200b\u5230\u200b\u72c0\u614b\u200b\u3002</p> <p>\u200b\u70ba\u200b\u6bcf\u500b\u200b\u4e8b\u4ef6\u200b\u767c\u9001\u200b\u6536\u64da\u200b\u53ef\u80fd\u200b\u6703\u5c0e\u81f4\u200b\u767c\u9001\u200b\u5927\u91cf\u200b \u200b\u5230\u200b\u4e3b\u200b\u4f3a\u670d\u5668\u200b\u7684\u200b\u6d41\u91cf\u200b\u3002\u200b\u70ba\u200b\u4e86\u200b\u9632\u6b62\u200b\u9019\u6210\u200b\u70ba\u200b\u4e00\u500b\u200b\u554f\u984c\u200b, \u200b\u6536\u64da\u200b\u662f\u200b\u4f7f\u7528\u200b\"\u200b\u6700\u200b\u591a\u200b\"\u200b\u6a19\u8a18\u200b\u5be6\u73fe\u200b\u7684\u200b\u3002\u200b\u6b64\u6a19\u8a18\u200b\u6307\u793a\u200b \u200b\u78ba\u8a8d\u200b\u9069\u7528\u200b\u65bc\u200b\"\u200b\u4e4b\u524d\u200b\u4e26\u200b\u5305\u62ec\u200b\"\u200b\u7684\u200b\u6240\u6709\u200b\u4e8b\u4ef6\u200b \u200b\u6307\u5b9a\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u5c07\u200b\u4e8b\u4ef6\u200b\u6a19\u8a18\u200b\u70ba\u200b\u300c\u200b\u5df2\u8b80\u200b\u300d \u200b\u5c07\u200b\u6307\u793a\u200b \u200b\u7528\u6236\u200b\u5df2\u200b\u8b80\u53d6\u200b\u6240\u6709\u200b\u4e8b\u4ef6\u200b\u76f4\u5230\u200b\u5f15\u7528\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002\u200b\u8acb\u200b\u53c3\u95b1\u200b\u7684\u200b [\u200b\u63a5\u6536\u200b\u901a\u77e5\u200b]\uff08#receiving-\u200b\u901a\u77e5\u200b\uff09\u200b\u90e8\u5206\u200b\u77ad\u89e3\u200b\u66f4\u200b\u591a\u200b\u8cc7\u8a0a\u200b \u200b\u6709\u95dc\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b\u5982\u4f55\u200b\u5f71\u97ff\u200b\u901a\u77e5\u200b\u8a08\u6578\u200b\u7684\u200b\u8cc7\u8a0a\u200b\u3002</p> <p>{{&lt; add-in v=\"1.4\" &gt;}}\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b\u4e3b\u8981\u200b\u6709\u4e09\u7a2e\u200b\u5f62\u5f0f\u200b: \u200b\u7121\u7dda\u7a0b\u200b:\u200b\u8868\u793a\u200b\u8b80\u53d6\u200b\u5230\u200b\u63a5\u6536\u200b,\u200b\u800c\u200b\u4e0d\u200b\u8003\u616e\u200b\u7dda\u7a0b\u200b\u3002\u200b\u9019\u200b\u5c31\u662f\u200b \u200b\u9810\u7dda\u200b\u7a0b\u5316\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b\u6709\u6548\u200b\u3002 \u200b\u7dda\u7a0b\u200b,\u200b\u4e3b\u6642\u9593\u200b\u7dda\u200b:\u200b\u8868\u793a\u200b\u4e0d\u200b\u5728\u200b \u200b\u7279\u5b9a\u200b\u7dda\u7a0b\u200b\u3002\u200b\u7531\u7dda\u7a0b\u200bID MAin\u200b\u8b58\u5225\u200b\u3002 *\u200b\u7dda\u7a0b\u200b,\u200b\u5728\u200b\u7dda\u7a0b\u200b\u4e2d\u200b:\u200b\u8868\u793a\u200b\u7279\u5b9a\u200b\u7dda\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u8b80\u200b\u5230\u200b\u63a5\u6536\u200b \u200b\u7dda\u200b\u3002\u200b\u7531\u7dda\u200b\u7a0b\u6839\u200b\u7684\u200b\u4e8b\u4ef6\u200bID\u200b\u6a19\u8b58\u200b\u3002</p> <p>\u200b\u7dda\u200b\u7a0b\u5f0f\u200b\u8b80\u56de\u200b\u57f7\u5c07\u200b\u5728\u200b\u4e0b\u9762\u200b\u9032\u200b\u4e00\u6b65\u200b\u8a73\u7d30\u200b\u8a0e\u8ad6\u200b\uff08#threaded-\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b\uff09\u3002</p>"},{"location":"chat/client_server/#_16","title":"\u4e8b\u4ef6","text":"<p>{{&lt; changed-in v=\"1.4\" &gt;}}\u200b\u6bcf\u500b\u200b\"user_id\"\u3001\"receipt_type\"\u200b\u548c\u200b\u5206\u985e\u200b \uff08\u200b\u7121\u7dda\u7a0b\u200b\u6216\u200b\"thread_id\"\uff09\u200b\u5143\u200b\u7d44\u5fc5\u200b\u9808\u50c5\u200b\u8207\u200b\u55ae\u500b\u200b\u5143\u200b\u7d44\u95dc\u806f\u200b \"event_id\"\u3002</p>"},{"location":"chat/client_server/#mreceipt","title":"m.receipt","text":"<p>\u200b\u901a\u77e5\u200b\u5ba2\u6236\u200b\u65b0\u200b\u6536\u64da\u200b\u3002</p> <pre><code>{\n  \"content\": {\n    \"$1435641916114394fHBLK:matrix.org\": {\n      \"m.read\": {\n        \"@rikj:jki.re\": {\n          \"ts\": 1436451550453\n        }\n      },\n      \"m.read.private\": {\n        \"@self:example.org\": {\n          \"ts\": 1661384801651\n        }\n      }\n    }\n  },\n  \"type\": \"m.receipt\"\n}\n</code></pre>"},{"location":"chat/client_server/#_17","title":"\u5ba2\u6236\u200b\u7aef\u884c\u200b\u70ba","text":"<p>{{&lt; changed-in v=\"1.4\" &gt;}}\u200b\u5df2\u200b\u66f4\u6539\u200b\u4ee5\u200b\u652f\u63f4\u200b\u7dda\u200b\u7a0b\u5f0f\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b\u3002</p> <p>\u200b\u5728\u200b\"/sync\"\u200b\u4e2d\u200b,\u200b\u6536\u64da\u5217\u200b\u5728\u200b\"\u200b\u81e8\u6642\u200b\"\u200b\u4e8b\u4ef6\u200b\u9663\u5217\u200b\u4e0b\u200b \u200b\u5c0d\u200b\u65bc\u200b\u7d66\u5b9a\u200b\u7684\u200b\u623f\u9593\u200b\u3002\u200b\u4e8b\u4ef6\u200b\u6d41\u4e2d\u200b\u7684\u200b\u65b0\u200b\u6536\u64da\u200b\u662f\u200b \u200b\u66f4\u65b0\u200b\u73fe\u6709\u200b\u6620\u5c04\u200b\u7684\u200b\u589e\u91cf\u200b\u3002\u200b\u7528\u6236\u200b\u7aef\u61c9\u200b\u66ff\u63db\u200b\u820a\u200b\u7684\u200b \u200b\u57fa\u200b\u65bc\u200b\"user_id\"\u3001\"receipt_type\"\u200b\u548c\u200b \"thread_id\"\uff08\u200b\u5982\u679c\u200b\u5b58\u5728\u200b\uff09\u3002 \u200b\u4f8b\u5982\u200b:</p> <pre><code>Client receives m.receipt:\n  user = @alice:example.com\n  receipt_type = m.read\n  event_id = $aaa:example.com\n  thread_id = undefined\n\nClient receives another m.receipt:\n  user = @alice:example.com\n  receipt_type = m.read\n  event_id = $bbb:example.com\n  thread_id = main\n\nThe client does not replace any acknowledgements, yet.\n\nClient receives yet another m.receipt:\n  user = @alice:example.com\n  receipt_type = m.read\n  event_id = $ccc:example.com\n  thread_id = undefined\n\nThe client replaces the older acknowledgement for $aaa:example.com\nwith this new one for $ccc:example.com, but does not replace the\nacknowledgement for $bbb:example.com because it belongs to a thread.\n\nClient receives yet another m.receipt:\n  user = @alice:example.com\n  receipt_type = m.read\n  event_id = $ddd:example.com\n  thread_id = main\n\nNow the client replaces the older $bbb:example.com acknowledgement with\nthis new $ddd:example.com acknowledgement. The client does NOT replace the\nolder acknowledgement for $ccc:example.com as it is unthreaded.\n</code></pre> <p>\u200b\u7576\u78ba\u5b9a\u200b \u200b\u6709\u200b\u554f\u984c\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u5df2\u5411\u200b\u7528\u6236\u200b\u986f\u793a\u200b\u3002\u200b\u53ea\u200b\u9700\u200b\u63a5\u6536\u200b \u200b\u4e8b\u4ef6\u200b\u4e0d\u80fd\u200b\u63d0\u4f9b\u200b\u8db3\u5920\u200b\u7684\u78ba\u200b\u5b9a\u6027\u200b,\u200b\u8868\u660e\u200b\u7528\u6236\u200b\u5df2\u7d93\u200b\u770b\u5230\u200b\u4e86\u200b \u200b\u4e8b\u4ef6\u200b\u3002\u200b\u7528\u6236\u200b\u61c9\u8a72\u200b\u9700\u8981\u200b\u63a1\u53d6\u200b\u4e00\u4e9b\u200b\u64cd\u4f5c\u200b,\u200b\u4f8b\u5982\u200b\u67e5\u770b\u200b \u200b\u4e8b\u4ef6\u200b\u767c\u200b\u9001\u5230\u200b\u7684\u200b\u623f\u9593\u200b\u6216\u200b\u6309\u200b\u9806\u5e8f\u200b\u95dc\u9589\u200b\u901a\u77e5\u200b \u200b\u4f7f\u200b\u4e8b\u4ef6\u200b\u8a08\u70ba\u200b\u300c\u200b\u5df2\u8b80\u200b\u300d\u3002\u200b\u7528\u6236\u200b\u7aef\u200b\u4e0d\u61c9\u200b\u767c\u9001\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b \u200b\u5c0d\u200b\u65bc\u200b\u81ea\u5df1\u200b\u7684\u200b\u7528\u6236\u200b\u767c\u9001\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002</p> <p>\u200b\u8207\u200b\u767c\u200b\u9001\u56de\u200b\u57f7\u7684\u200b\u898f\u5247\u200b\u985e\u4f3c\u200b,\u200b\u61c9\u986f\u200b\u793a\u7dda\u7a0b\u200b\u56de\u57f7\u200b \u200b\u5728\u200b\u7dda\u7a0b\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u3002\u200b\u5982\u679c\u200b\u7dda\u7a0b\u200b\u5448\u73fe\u200b\u5728\u200b\u62ab\u9732\u200b\u5f8c\u200b\u9762\u200b, \u200b\u7528\u6236\u200b\u7aef\u200b\u5c1a\u672a\u200b\u986f\u793a\u200b\u4e8b\u4ef6\u200b\uff08\u200b\u6216\u200b\u4efb\u4f55\u200b\u9069\u7528\u200b\u7684\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b\uff09 \u200b\u7d66\u200b\u4f7f\u7528\u8005\u200b\u3002\u200b\u4f46\u662f\u200b,\u200b\u4e00\u65e6\u200b\u4ed6\u5011\u200b\u64f4\u5c55\u200b\u4e86\u200b\u7dda\u7a0b\u200b,\u200b\u7dda\u7a0b\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b \u200b\u5c07\u767c\u200b\u9001\u200b\u4e26\u986f\u793a\u200b\u4f86\u200b\u81ea\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b\u7684\u200b\u6bcf\u500b\u200b\u7dda\u7a0b\u200b\u7684\u200b\u6536\u64da\u200b\u3002</p> <p>\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u8207\u200b \u200b\u9075\u5faa\u200b HTTP API\u3002</p>"},{"location":"chat/client_server/#post-_matrixclientv3roomsroomidreceiptreceipttypeeventid","title":"POST /_matrix/client/v3/rooms/{roomId}/receipt/{receiptType}/{eventId}","text":"<p>\u200b\u6b64\u200b API \u200b\u5c07\u7d66\u5b9a\u200b\u6536\u64da\u200b\u985e\u578b\u200b\u7684\u200b\u6a19\u8a18\u200b\u66f4\u65b0\u200b\u70ba\u200b\u4e8b\u4ef6\u200b ID \u200b\u6307\u5b9a\u200b\u3002</p> <p>\u200b\u8acb\u6c42\u200b\u6b63\u6587\u200b\u793a\u4f8b\u200b</p> <pre><code>{\n  \"thread_id\": \"main\"\n}\n</code></pre>"},{"location":"chat/client_server/#_18","title":"\u79c1\u4eba\u200b\u5df2\u8b80\u200b\u56de\u57f7","text":"<p>{{% add-in v=\"1.4\" %}}</p> <p>\u200b\u4e00\u4e9b\u200b\u4f7f\u7528\u8005\u200b\u5e0c\u671b\u200b\u5c07\u623f\u9593\u200b\u6a19\u8a18\u200b\u70ba\u200b\u5df2\u8b80\u200b,\u200b\u6e05\u9664\u200b\u5176\u200b[\u200b\u901a\u77e5\u200b\u8a08\u6578\u200b]\uff08#receiving\u200b\u901a\u77e5\u200b\uff09, \u200b\u4f46\u200b\u4e0d\u8981\u200b\u6d29\u9732\u200b\u4ed6\u5011\u200b\u5df2\u7d93\u200b\u95b1\u8b80\u200b\u4e86\u200b\u7279\u5b9a\u200b\u6d88\u606f\u200b\u7684\u200b\u4e8b\u5be6\u200b\u3002\u200b\u81ea\u200b \u200b\u70ba\u200b\u6b64\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u4ee5\u200b\u767c\u9001\u200b\u300cm.read.private\u300d\u200b\u6536\u64da\u200b\u800c\u200b\u4e0d\u662f\u200b\u300cm.read\u300d\u3002 \u200b\u8981\u200b\u505a\u5230\u200b\u9019\u4e00\u9ede\u200b:\u200b\u6e05\u9664\u200b\u901a\u77e5\u200b,\u200b\u4e0d\u8981\u200b\u5c07\u6536\u64da\u5ee3\u200b\u64ad\u5230\u200b \u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b\u3002</p> <p>\u200b\u4f3a\u670d\u5668\u200b\u4e0d\u5f97\u200b\u5c07\u200b\u300cm.read.private\u300d\u200b\u6536\u64da\u200b\u767c\u9001\u200b\u7d66\u9664\u200b \u200b\u4e00\u500b\u200b\u6700\u521d\u200b\u767c\u9001\u200b\u5b83\u200b\u3002</p> <p>\u200b\u5728\u200b\"m.read\"\u200b\u548c\u200b\"m.read.private\"\u200b\u4e4b\u9593\u200b,\u200b\u6536\u64da\u200b\u66f4\u200b\"\u200b\u9818\u5148\u200b\"\u200b\u6216\u200b \u200b\u5728\u200b\u78ba\u5b9a\u200b\u6700\u9ad8\u200b\u8b80\u6578\u6a19\u200b\u8a18\u6642\u200b\u4f7f\u7528\u200b\"\u200b\u6700\u8fd1\u200b\"\u3002\u200b\u8acb\u200b\u53c3\u95b1\u200b\u7684\u200b [\u200b\u901a\u77e5\u200b]\uff08#receiving-\u200b\u901a\u77e5\u200b\uff09\u200b\u90e8\u5206\u200b,\u200b\u4ee5\u200b\u7372\u53d6\u200b\u66f4\u200b\u591a\u200b\u8cc7\u8a0a\u200b \u200b\u9019\u5c0d\u200b\u901a\u77e5\u200b\u8a08\u6578\u200b\u6709\u4f55\u200b\u5f71\u97ff\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5ba2\u6236\u200b\u7aef\u200b\u767c\u9001\u200b\"m.read\"\u200b\u6536\u64da\u200b,\u200b\u8a72\u200b\u6536\u64da\u4f4d\u200b\u65bc\u200b\"m.read.private\"\u200b\u7684\u200b\"\u200b\u5f8c\u200b\u9762\u200b\" \u200b\u6536\u5230\u200b,\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u8005\u200b\u5c07\u200b\u770b\u5230\u200b\u66f4\u6539\u200b\u767c\u751f\u200b,\u200b\u4f46\u200b\u767c\u9001\u200b\u4f7f\u7528\u8005\u200b\u5c07\u200b \u200b\u4e0d\u6703\u5c07\u200b\u5176\u200b\u901a\u77e5\u200b\u8a08\u6578\u200b\u5012\u200b\u56de\u8a72\u200b\u6642\u9593\u9ede\u200b\u3002\u200b\u800c\u200b \u200b\u4e0d\u5e38\u898b\u200b,\"m.read\"\uff08\u200b\u516c\u5171\u200b\uff09\u200b\u63a5\u6536\u200b\u6eef\u5f8c\u88ab\u200b\u8a8d\u70ba\u200b\u662f\u200b\u6709\u6548\u200b\u7684\u200b \u200b\u4f8b\u5982\u200b,\"m.read.private\"\u200b\u6536\u64da\u5f8c\u9762\u200b\u7684\u200b\u5e7e\u689d\u200b\u6d88\u606f\u200b\u3002</p>"},{"location":"chat/client_server/#_19","title":"\u7dda\u200b\u7a0b\u5f0f\u200b\u8b80\u200b\u56de\u57f7","text":"<p>{{% add-in v=\"1.4\" %}}</p> <p>\u200b\u5982\u679c\u200b\u7528\u6236\u200b\u7aef\u200b\u4e0d\u200b\u4f7f\u7528\u200b [threading]\uff08#threading\uff09,\u200b\u90a3\u9ebc\u200b\u5b83\u5011\u200b\u53ea\u6703\u200b \u200b\u767c\u9001\u200b\u300c\u200b\u7121\u7dda\u7a0b\u200b\u300d\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b,\u200b\u7121\u8ad6\u200b\u7dda\u7a0b\u200b\u5982\u4f55\u200b,\u200b\u90fd\u200b\u6703\u200b\u5f71\u97ff\u200b\u6574\u500b\u200b\u623f\u9593\u200b\u3002</p> <p>\u200b\u7dda\u200b\u7a0b\u5f0f\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b\u53ea\u662f\u200b\u5e36\u6709\u200b\"thread_id\"\u200b\u7684\u200b\u56de\u57f7\u200b,\u200b\u76ee\u6a19\u200b \u200b\u7dda\u7a0b\u200b\u6839\u200b\u7684\u200b\u4e8b\u4ef6\u200b ID \u200b\u6216\u4e3b\u6642\u200b\u9593\u7dda\u200b\u7684\u200b\"main\"\u3002</p> <p>\u200b\u7dda\u7a0b\u200b\u5f15\u5165\u200b\u4e86\u200b\u5728\u200b\u540c\u4e00\u200b\u6703\u8a71\u200b\u4e2d\u200b\u9032\u884c\u200b\u591a\u500b\u200b\u5c0d\u200b\u8a71\u200b\u7684\u200b\u6982\u5ff5\u200b \u200b\u623f\u9593\u200b,\u200b\u56e0\u6b64\u200b\u503c\u5f97\u200b\u81ea\u5df1\u200b\u7684\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b\u548c\u200b\u901a\u77e5\u200b\u8a08\u6578\u200b\u3002\u200b\u4e8b\u4ef6\u200b\u662f\u200b \u200b\u5982\u679c\u200b\u6eff\u8db3\u200b\u4ee5\u4e0b\u200b\u4efb\u4f55\u200b\u689d\u4ef6\u200b,\u200b\u5247\u200b\u88ab\u200b\u8996\u70ba\u200b\u300c\u200b\u5728\u200b\u7dda\u7a0b\u200b\u4e2d\u200b\u300d: \u200b\u5b83\u200b\u7684\u200b\"rel_type\"\u200b\u70ba\u200b\"m.thread\"\u3002 \u200b\u5b83\u200b\u5177\u6709\u200b\"rel_type\"\u200b\u70ba\u200b\"m.thread\"\u200b\u7684\u200b\u5b50\u200b\u4e8b\u4ef6\u200b\uff08\u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b,\u200b\u5b83\u5c07\u200b\u662f\u200b \u200b\u7dda\u7a0b\u200b\u6839\u200b\uff09\u3002 *\u200b\u5728\u200b\u4e8b\u4ef6\u200b\u95dc\u200b\u4fc2\u200b\u4e4b\u200b\u5f8c\u200b,\u200b\u5b83\u200b\u6709\u200b\u4e00\u500b\u200b\u7236\u200b\u4e8b\u4ef6\u200b,\u200b\u8a72\u7236\u200b\u4e8b\u4ef6\u200b\u7b26\u5408\u200b \u200b\u4ee5\u4e0a\u200b\u4e4b\u4e00\u200b\u3002\u200b\u4f46\u662f\u200b,\u200b\u5be6\u73fe\u200b\u4e0d\u61c9\u200b\u8a72\u200b\u7121\u9650\u905e\u200b\u6b78\u200b:a \u200b\u5efa\u8b70\u200b\u6700\u591a\u200b\u4f7f\u7528\u200b 3 \u200b\u500b\u8e8d\u9ede\u200b\u4ee5\u6db5\u200b\u84cb\u9593\u200b\u63a5\u95dc\u200b\u4fc2\u200b\u3002</p> <p>\u200b\u4e0d\u200b\u5728\u200b\u7dda\u7a0b\u200b\u4e2d\u200b\u4f46\u200b\u4ecd\u200b\u5728\u200b\u623f\u9593\u200b\u4e2d\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u88ab\u8996\u200b\u70ba\u200b \"\u200b\u4e3b\u6642\u9593\u200b\u7dda\u200b\",\u200b\u6216\u200bID\u200b\u70ba\u200b\"main\"\u200b\u7684\u200b\u7279\u6b8a\u200b\u7dda\u7a0b\u200b\u3002</p> <p>\u200b\u4e0b\u9762\u200b\u662f\u200b\u4e00\u500b\u200b\u804a\u5929\u5ba4\u200b\u7684\u200b\u793a\u4f8b\u200b DAG,\u200b\u865b\u7dda\u200b\u8868\u793a\u200b\u4e8b\u4ef6\u200b \u200b\u95dc\u200b\u4fc2\u200b\u548c\u200b\u986f\u793a\u200b\u62d3\u64b2\u200b\u6392\u5e8f\u200b\u7684\u200b\u5be6\u7dda\u200b\u3002</p> <p></p> <p>\u200b\u6b64\u200b DAG \u200b\u53ef\u4ee5\u200b\u8868\u793a\u200b\u70ba\u200b 3 \u200b\u500b\u7dda\u7a0b\u200b\u6642\u9593\u200b\u7dda\u200b,\u200b\u5176\u4e2d\u200b\"A\"\u200b\u548c\u200b\"B\"\u200b\u662f\u200b\u7dda\u7a0b\u200b \u200b\u6839\u200b:</p> <p></p> <p>\u200b\u6709\u200b\u4e86\u200b\u9019\u500b\u200b,\u200b\u6211\u5011\u200b\u53ef\u4ee5\u200b\u8b49\u660e\u200b: \"I\"\u200b\u4e0a\u200b\u7684\u200b\u7dda\u7a0b\u200b\u5df2\u8b80\u200b\u56de\u200b\u57f7\u6703\u5c07\u200b\"A\"\u3001\"B\"\u200b\u548c\u200b\"I\"\u200b\u6a19\u8a18\u200b\u70ba\u200b\u5df2\u8b80\u200b\u3002 \"E\"\u200b\u4e0a\u200b\u7684\u200b\u7dda\u7a0b\u200b\u5df2\u8b80\u200b\u56de\u200b\u57f7\u6703\u5c07\u200b\"C\"\u200b\u548c\u200b\"E\"\u200b\u6a19\u8a18\u200b\u70ba\u200b\u5df2\u8b80\u200b\u3002 *\"D\"\u200b\u4e0a\u200b\u7684\u200b\u975e\u7dda\u7a0b\u200b\u5df2\u8b80\u200b\u56de\u200b\u57f7\u6703\u5c07\u200b\"A\"\u3001\"B\"\u3001\"C\"\u200b\u548c\u200b\"D\"\u200b\u6a19\u8a18\u200b\u70ba\u200b\u5df2\u8b80\u200b\u3002</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b,\u200b\u4f7f\u7528\u200b\u7dda\u7a0b\u200b\u5df2\u8b80\u200b\u56de\u200b\u57f7\u5c07\u200b\"A\"\u200b\u6a19\u8a18\u200b\u70ba\u200b\u5df2\u200b\u8b80\u4e26\u200b\u4e0d\u200b\u610f\u5473\u8457\u200b \"C\"\u3001\"E\"\u3001\"G\"\u200b\u6216\u200b\"H\"\u200b\u88ab\u200b\u6a19\u8a18\u200b\u70ba\u200b\u5df2\u8b80\u200b:\u200b\u7dda\u7a0b\u200b A \u200b\u7684\u200b\u6642\u9593\u200b\u7dda\u200b\u9700\u8981\u200b \u200b\u5b83\u200b\u81ea\u5df1\u200b\u7684\u200b\u7dda\u200b\u7a0b\u8b80\u200b\u53d6\u56de\u200b\u57f7\u4f4d\u200b\u65bc\u200b\u300cH\u300d\u200b\u8655\u4ee5\u200b\u5be6\u73fe\u200b\u6b64\u200b\u76ee\u7684\u200b\u3002</p> <p>\u200b\u4e0a\u8ff0\u200b 3 \u200b\u500b\u7bc4\u4f8b\u200b\u7684\u200b\u5df2\u8b80\u200b\u56de\u200b\u57f7\u70ba\u200b:</p> <pre><code>{\n  \"$I\": {\n    \"m.read\": {\n      \"@user:example.org\": {\n        \"ts\": 1661384801651,\n        \"thread_id\": \"main\" // because `I` is not in a thread, but is a threaded receipt\n      }\n    }\n  },\n  \"$E\": {\n    \"m.read\": {\n      \"@user:example.org\": {\n        \"ts\": 1661384801651,\n        \"thread_id\": \"$A\" // because `E` is in Thread `A`\n      }\n    }\n  },\n  \"$D\": {\n    \"m.read\": {\n      \"@user:example.org\": {\n        \"ts\": 1661384801651\n        // no `thread_id` because the receipt is *unthreaded*\n      }\n    }\n  }\n}\n</code></pre> <p>\u200b\u767c\u9001\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b\u7684\u200b\u689d\u4ef6\u200b\u8207\u200b\u7dda\u7a0b\u200b\u548c\u200b\u975e\u7dda\u200b\u7a0b\u8b80\u200b\u53d6\u985e\u200b\u4f3c\u200b \u200b\u6536\u76ca\u200b\u3002\u200b\u4f8b\u5982\u200b,\u200b\u7528\u6236\u200b\u7aef\u200b\u53ef\u80fd\u200b\u6703\u70ba\u200b\u7dda\u7a0b\u200b\u767c\u9001\u200b\u5c08\u7528\u200b\u5df2\u8b80\u200b\u56de\u57f7\u200b \u200b\u7528\u6236\u5c55\u200b\u958b\u8a72\u200b\u7dda\u7a0b\u200b\u6642\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u3002</p>"},{"location":"chat/client_server/#_20","title":"\u4f3a\u670d\u5668\u200b\u884c\u70ba","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u63d0\u9ad8\u6548\u7387\u200b,\u200b\u6536\u64da\u200b\u61c9\u200b\u5206\u6279\u200b\u5230\u200b\u6bcf\u500b\u200b\u623f\u9593\u200b\u7684\u200b\u4e00\u500b\u200b\u4e8b\u4ef6\u200b\u4e2d\u200b \u200b\u5728\u5c07\u200b\u5b83\u5011\u200b\u4ea4\u4ed8\u200b\u7d66\u5ba2\u6236\u200b\u4e4b\u524d\u200b\u3002</p> <p>\u200b\u67d0\u4e9b\u200b\u6536\u64da\u200b\u4f5c\u70ba\u200b\u985e\u578b\u200b\u70ba\u200b\u300cm.receipt\u300d\u200b\u7684\u200bEDU\u200b\u901a\u904e\u200b\u806f\u5408\u200b\u767c\u9001\u200b\u3002\u200b\u9019\u200b EDU \u200b\u683c\u5f0f\u200b\u70ba\u200b:</p> <pre><code>{\n    &lt;room_id&gt;: {\n        &lt;receipt_type&gt;: {\n            &lt;user_id&gt;: { &lt;content (ts &amp; thread_id, currently)&gt; }\n        },\n        ...\n    },\n    ...\n}\n</code></pre> <p>\u200b\u9019\u4e9b\u200b\u59cb\u7d42\u200b\u4f5c\u70ba\u200b\u589e\u91cf\u200b\u767c\u200b\u9001\u5230\u200b\u4ee5\u524d\u200b\u767c\u9001\u200b\u7684\u200b\u56de\u57f7\u200b\u3002\u200b\u73fe\u5728\u200b \u200b\u53ea\u61c9\u200b\u4f7f\u7528\u200b\u55ae\u500b\u200b\"\":\"m.read\"\u3002'm.read.private' \u200b\u4e0d\u5f97\u200b\u51fa\u73fe\u200b\u5728\u200b\u6b64\u200b\u806f\u5408\u200b\"m.receipt\"\u200b\u6559\u80b2\u200b\u4e2d\u200b\u3002"},{"location":"chat/client_server/#_21","title":"\u5b89\u5168\u200b\u6ce8\u610f\u200b\u4e8b\u9805","text":"<p>\u200b\u7531\u200b\u65bc\u200b\u6536\u64da\u200b\u662f\u200b\u5728\u200b\u4e8b\u4ef6\u200b\u5716\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u4e4b\u5916\u200b\u767c\u9001\u200b\u7684\u200b,\u200b\u56e0\u6b64\u200b\u5b58\u5728\u200b \u200b\u672a\u200b\u5c0d\u200b\u300cm.receipt\u300d\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u5167\u5bb9\u200b\u57f7\u884c\u200b\u5b8c\u6574\u6027\u200b\u6aa2\u67e5\u200b\u3002</p>"},{"location":"chat/customise_doc/","title":"\u670d\u52d9\u200b\u5b9a\u5236","text":""},{"location":"chat/customise_doc/#_2","title":"\u6982\u8ff0","text":"<p>\u200b\u57fa\u200b\u65bc\u200b\u804a\u5929\u200b\u5354\u8b70\u200b\uff0c\u200b\u6211\u5011\u200b\u505a\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u9069\u914d\u200b\u4e3b\u94fe\u200b\u751f\u614b\u200b\u7684\u200b\u5b9a\u5236\u200b\u5de5\u4f5c\u200b\u3002 \u200b\u5305\u62ec\u200b\u5b9a\u5236\u200bcosmos\u200b\u7c3d\u540d\u9a57\u200b\u7c3d\u767b\u9304\u200b\uff0c\u200b\u53ca\u200b\u4e00\u7cfb\u5217\u200b\u804a\u5929\u200b\u9650\u5236\u200b\u7684\u200b\u589e\u52a0\u200b\u7b49\u200b\u3002</p>"},{"location":"chat/customise_doc/#cosmos","title":"cosmos\u200b\u9a57\u7c3d\u200b\u767b\u9304","text":"<p>\u200b\u5728\u200b\u539f\u6709\u200b\u767b\u9304\u200bapi\u200b\u7684\u200b\u57fa\u790e\u200b\u4e0a\u200b\u589e\u52a0\u200bcom.xs.cosmos_sign_auth\u200b\u7684\u200b\u767b\u9678\u200b\u985e\u578b\u200b\uff0c\u200b\u4e26\u4e14\u200b\u5728\u200b\u767b\u9304\u200b\u6642\u200b\u5982\u679c\u200b\u767c\u73fe\u200b\u7528\u6236\u200b\u672a\u200b\u8a3b\u200b\u518a\u200b\uff0c\u200b\u5be6\u73fe\u200b\u4e86\u200b\u81ea\u200b\u52d5\u200b\u8a3b\u200b\u518a\u200b\uff0c \u200b\u904e\u7a0b\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>    1\uff0c\u200b\u6821\u9a57\u200b\u7c3d\u540d\u200b\n    2\uff0c\u200b\u5224\u65b7\u200b\u7c3d\u540d\u200b\u8207\u200b\u516c\u9470\u5c0e\u51fa\u200b\u5730\u5740\u200b\u662f\u5426\u200b\u4e00\u81f4\u200b\n    3\uff0c\u200b\u5224\u65b7\u200b\u7528\u6236\u200b\u662f\u5426\u200b\u5b58\u5728\u200b \n    4\uff0c\u200b\u5982\u679c\u200b3,\u200b\u5224\u65b7\u200b\u70ba\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u81ea\u52d5\u200b\u5c07\u7528\u200b\u6236\u200b\u8a3b\u200b\u518a\u200b\u5230\u200b\u804a\u5929\u200b\u7cfb\u7d71\u200b\n</code></pre>"},{"location":"chat/customise_doc/#_3","title":"\u7a7a\u9593\u200b\u9650\u5236","text":"<pre><code>\u200b\u4f7f\u7528\u91cf\u200b\u914d\u984d\u200b\u8a08\u7b97\u200b\u65b9\u6cd5\u200b\n\n\u200b\u52f3\u7ae0\u200b\u7b49\u7d1a\u200b\uff0c\u200b\u6bcf\u7d1a\u200b\u589e\u52a0\u200b \u200b\u52a0\u6210\u200b3% , 33\u200b\u7d1a\u200b\u6700\u200b\u591a\u200b\u53ef\u4ee5\u200b\u7372\u5f97\u200b 100% \u200b\u7684\u200b\u52a0\u6210\u200b\n\n\u200b\u7528\u6236\u200b\u57fa\u790e\u91cf\u200b = \u200b\u7bc0\u9ede\u200b\u7528\u200b\u7684\u200b\u5269\u9918\u78c1\u76e4\u200b / \u200b\u7bc0\u9ede\u200b\u4e0a\u200b\u7684\u200b\u4eca\u5929\u200b\u4f7f\u7528\u200b\u904e\u4e0a\u200b\u50b3\u200b\u7684\u200b\u7528\u200b\u6236\u6578\u200b / 2 (\u200b\u4e0a\u9650\u200b200M)\n\n\u200b\u7528\u6236\u200b\u52a0\u6210\u200b\u91cf\u200b = \u200b\u7528\u6236\u200b\u57fa\u790e\u91cf\u200b x \u200b\u52f3\u7ae0\u200b\u7b49\u7d1a\u200b\u589e\u5e45\u200b\n\n\u200b\u7576\u984d\u5ea6\u200b\u4e0d\u8db3\u200b\u6642\u6efe\u52d5\u200b\u8986\u84cb\u200b\u6700\u65e9\u200b\u7684\u200b\u6587\u4ef6\u200b\n\n\n++++++++++\u200b\u8209\u4f8b\u200b\u8aaa\u660e\u200b\uff1a++++++++++++++\n\n\u200b\u7bc0\u9ede\u200b\u53ef\u7528\u200b\u5269\u9918\u78c1\u76e4\u200b 100G\uff0c \u200b\u7bc0\u9ede\u200b\u4e0a\u200b\u4eca\u5929\u200b\u7684\u200b\u65e5\u6d3b\u200b\u7528\u6236\u200b\u70ba\u200b 500\u200b\u500b\u200b\n\n100G / 500  / 2 = 102M\uff08\u200b\u7bc0\u9ede\u200b\u7528\u6236\u200b\u57fa\u790e\u200b\u5b58\u5132\u91cf\u200b\uff09\n\n\u200b\u7528\u6236\u200b\u3000A \u200b\u52f3\u7ae0\u200b\u7b49\u7d1a\u200b\u70ba\u200b10\u200b\u7d1a\u200b \uff0c\u200b\u52a0\u6210\u200b\u6bd4\u4f8b\u200b\u70ba\u200b 9%\n\n102M x (1 + 0.09) = 111.18M (\u200b\u52f3\u7ae0\u200b\u52a0\u6210\u200b\u5f8c\u200b\u7684\u200b\u5be6\u969b\u5b58\u200b\u5132\u91cf\u200b)\n</code></pre>"},{"location":"chat/customise_doc/#_4","title":"\u5e36\u200b\u5bec\u200b\u9650\u5236","text":""},{"location":"chat/customise_doc/#_5","title":"\u516c\u5171\u200b\u623f\u9593\u200b\u6578\u91cf\u200b\u9650\u5236","text":"<p>\u200b\u7528\u6236\u200b\u5728\u200b5\u200b\u7d1a\u200b\u4e4b\u524d\u200b\u4e0d\u5141\u8a31\u200b\u5275\u5efa\u200b\u516c\u5171\u200b\u623f\u9593\u200b\uff0c\u200b\u8d85\u904e\u200b\u4e94\u7d1a\u200b\u5f8c\u200b\u6bcf\u200b\u4e00\u7d1a\u200b\u589e\u52a0\u200b\u4e00\u500b\u200b\u516c\u5171\u200b\u623f\u9593\u200b\u5275\u5efa\u200b\u6b0a\u9650\u200b</p>"},{"location":"chat/customise_doc/#_6","title":"\u904a\u5ba2\u200b\u6a21\u5f0f","text":"<p>\u200b\u904a\u5ba2\u200b\u6a21\u5f0f\u200b\u5340\u5225\u200b\u65bc\u200b\u6b63\u5f0f\u200b\u7528\u6236\u200b\uff0c\u200b\u904a\u5ba2\u200b\u4ee3\u8868\u200b\u50c5\u5728\u200b\u804a\u5929\u200b\u670d\u200b\u52d9\u200b\u8a3b\u200b\u518a\u200b\uff0c\u200b\u4f46\u662f\u200b\u672a\u9032\u200b\u884c\u8cea\u200b\u62bc\u200b\u4e0a\u200b\u934a\u200b\u767b\u8a18\u200b\u7684\u200b\u7528\u6236\u200b\uff0c\u200b\u904a\u5ba2\u200b\u5728\u200b\u672a\u8db3\u200b\u984d\u8cea\u200b\u62bc\u200b\u6642\u200b\u4e0d\u200b\u5141\u8a31\u200b\u767c\u9001\u200b\u6d88\u606f\u200b\u3002</p>"},{"location":"chat/faq/","title":"\u5e38\u898b\u200b\u554f\u984c","text":""},{"location":"chat/installation/","title":"\u5b89\u88dd\u200b\u555f\u52d5","text":""},{"location":"chat/installation/#_2","title":"\u5b89\u88dd","text":""},{"location":"chat/installation/#windows","title":"Windows\u200b\u5b89\u88dd","text":"<p>\u200b\u96a8\u200bPC\u200b\u7aef\u200b\u7a0b\u5e8f\u200b\u5b89\u88dd\u200b\u5373\u53ef\u200b</p>"},{"location":"chat/installation/#linux","title":"Linux\u200b\u5b89\u88dd","text":"<p>\u200b\u89e3\u58d3\u200bchat_linux.tar.gz\u200b\u5230\u200b\u7576\u524d\u200b\u6587\u4ef6\u200b\u593e\u200b\uff0c\u200b\u6703\u200b\u751f\u6210\u200b\u4e00\u500b\u200bchat/\u200b\u76ee\u9304\u200b\uff0c\u200b\u5305\u542b\u200b\u555f\u52d5\u200b\u7a0b\u5e8f\u200b\uff08\u200b\u7531\u8173\u672c\u200b\u5b8c\u6210\u200b\uff09</p>"},{"location":"chat/installation/#_3","title":"\u914d\u7f6e","text":""},{"location":"chat/installation/#_4","title":"\u914d\u7f6e\u6587\u4ef6","text":"<ul> <li>chat_key.pem\uff1a\u200b\u670d\u52d9\u7aef\u200b\u5bc6\u200b\u9470\u200b\u6587\u4ef6\u200b</li> <li>chat.yaml\uff1a\u200b\u670d\u52d9\u200b\u555f\u52d5\u200b\u914d\u7f6e\u6587\u4ef6\u200b</li> </ul>"},{"location":"chat/installation/#_5","title":"\u914d\u7f6e\u6587\u4ef6\u200b\u521d\u59cb\u5316","text":"<p>\u200b\u7531\u200b\u7db2\u95dc\u200b\u7a0b\u5e8f\u200b\u555f\u52d5\u6642\u200b\u81ea\u52d5\u200b\u751f\u6210\u200b</p>"},{"location":"chat/installation/#_6","title":"\u555f\u52d5","text":""},{"location":"chat/installation/#_7","title":"\u555f\u52d5\u200b\u524d\u7f6e\u200b\u689d\u4ef6","text":"<ul> <li>\u200b\u5df2\u200b\u8a3b\u200b\u518a\u200b\u7db2\u200b\u95dc\u200b</li> <li>\u200b\u5df2\u70ba\u200b\u8a72\u200b\u7db2\u95dc\u200b\u8a2d\u7f6e\u200b\u865f\u78bc\u200b\u6bb5\u200b</li> </ul>"},{"location":"chat/installation/#_8","title":"\u555f\u52d5\u200b\u547d\u4ee4","text":""},{"location":"chat/installation/#_9","title":"\u6ce8\u610f","text":"<p>\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u5168\u90e8\u200b\u7531\u200b\u7db2\u95dc\u200b\u7a0b\u5e8f\u200b\u57f7\u884c\u200b\uff0c\u200b\u7121\u9700\u200b\u624b\u52d5\u200b\u8abf\u7528\u200b</p>"},{"location":"chat/installation/#windows_1","title":"windows","text":"<pre><code>chat.exe -public-ip XXX.XXX.XXX.XXX\n</code></pre>"},{"location":"chat/installation/#linux_1","title":"Linux","text":"<pre><code>chat -public-ip XXX.XXX.XXX.XXX\n</code></pre>"},{"location":"chat/installation/#_10","title":"\u914d\u7f6e\u200b\u8bf4\u660e","text":"<pre><code>\n    version: 2  # \u200b\u7248\u672c\u200b\u865f\u200b\n    global:\n      mode: chain   # \u200b\u555f\u52d5\u200b\u6a21\u5f0f\u200bchain\u200b\u7121\u9700\u200b\u8b8a\u52d5\u200b\n      server_name: 2222222.fm   # \u200b\u865b\u64ec\u200b\u529f\u80fd\u200b\u8b8a\u6578\u200b\u540d\u7a31\u200b\uff0c\u200b\u5c0d\u61c9\u200b{\u200b\u9598\u9053\u200b\u9996\u500b\u200b\u865f\u6bb5\u200b}.fm\n      private_key: chat_key.pem  # \u200b\u670d\u52d9\u91d1\u200b\u9470\u200b\u6a94\u6848\u200b\uff0c\u200b\u56fa\u5b9a\u200b\u751f\u6210\u200b\u5373\u53ef\u200b\n      # guid\u200b\u516c\u958b\u91d1\u200b\u9470\u200b\uff0cmode=center\u200b\u6642\u200b\u6709\u7528\u200b\uff0cchain\u200b\u6a21\u5f0f\u200b\u7121\u6240\u8b02\u200b\n      guid_pub_key: |-\n        -----BEGIN PUBLIC KEY-----\n        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxXxkr6ikE7niKv/IuFDP\n        zB9ooLNfHO64vcIClgh++ot39myFnCknggXVTOc2+6kkTBqBWxt1/QJ0vDnmQDja\n        EVRDg9ynewas/1GjzpFjC6vlmZ5QbbWT+tcCApzntwmV7+QyJnJx3fePtKdxxpaA\n        PGaoS9DseRUeqSw5gjsYvOnHhzwoJO/qOvOZNaHJPuzJRfV3kDn6kPvy5KQ0/a8K\n        dqQ7koVK4O6AeM8G8K8WLVKQOl8xKt1KtRIiMoLpJHveCiTPeDsya7u4e/ikk5nR\n        FmDMMNaeDyS/xuOBx2Dk/D3Y0R7oH2k4GKbRKn62T7zpCzkLGu/Riw4Ur8pPUJQb\n        iwIDAQAB\n        -----END PUBLIC KEY-----\n      old_private_keys: []  # \u200b\u820a\u200b\u79c1\u5bc6\u200b\u91d1\u9470\u200b\n      key_validity_period: 168h0m0s  # \u200b\u79c1\u5bc6\u200b\u91d1\u200b\u9470\u9a57\u8b49\u200b\u9031\u671f\u200b\uff0c\u200b\u7121\u9700\u200b\u6539\u52d5\u200b\n      database:  # \u200b\u8cc7\u6599\u200b\u5eab\u76f8\u200b\u95dc\u914d\u200b\u5bd8\u200b\n        connection_string: postgresql://postgres:postgres@localhost:5432/chat?sslmode=disable\n        max_open_conns: 400\n        max_idle_conns: 50\n        conn_max_lifetime: -1\n      well_known_server_name: 8.8.8.8:28008  # \u200b\u8de8\u7bc0\u9ede\u200b\u901a\u8a0a\u6642\u200b\u4f7f\u7528\u200b\u7684\u200bservername\n      well_known_client_name: \"\"  # \u200b\u8de8\u7bc0\u9ede\u200b\u901a\u8a0a\u6642\u200b\u7684\u200b\u7528\u6236\u200b\u7aef\u200bname\n      disable_federation: false  # \u200b\u662f\u5426\u200b\u7981\u7528\u200b\u8de8\u7bc0\u9ede\u200b\u901a\u8a0a\u200b\n      presence:  # \u200b\u7528\u6236\u200b\u4e0a\u7dda\u200b\u901a\u77e5\u200b\u914d\u200b\u5bd8\u200b\n        enable_inbound: true\n        enable_outbound: true\n      trusted_third_party_id_servers:  # \u200b\u53ef\u4fe1\u200b\u4e09\u65b9\u200b\u670d\u52d9\u200b\uff0c\u200b\u4e0d\u200b\u91cd\u8981\u200b\n      - matrix.org\n      - vector.im\n      jetstream:  # \u200b\u6d88\u606f\u200b\u968a\u5217\u200b\u4e2d\u4ecb\u200b\u8edf\u9ad4\u200bjetstream\u200b\u914d\u200b\u5bd8\u200b\n        storage_path: ./\n        addresses: []\n        topic_prefix: Dendrite\n      metrics:   # prometheus\u200b\u76e3\u63a7\u914d\u200b\u5bd8\u200b\n        enabled: true\n        basic_auth:\n          username: metrics\n          password: metrics\n      dns_cache:  # DNS\u200b\u7de9\u5b58\u914d\u200b\u5bd8\u200b\n        enabled: false\n        cache_size: 256\n        cache_lifetime: 5m0s\n    app_service_api:  # app_service_api\u200b\u914d\u200b\u5bd8\u200b\n      disable_tls_validation: false\n      config_files: []\n    client_api:  # \u200b\u7528\u6236\u200b\u7aef\u200bAPI\u200b\u914d\u200b\u5bd8\u200b\n      registration_disabled: false  # \u200b\u7981\u7528\u200b\u6ce8\u518c\u200b\n      registration_shared_secret: dsfdfdfsdffdgfdg\n      guests_disabled: true\n      enable_registration_captcha: false\n      recaptcha_public_key: \"\"\n      recaptcha_private_key: \"\"\n      recaptcha_bypass_secret: \"\"\n      recaptcha_siteverify_api: \"\"\n      turn:  # \u200b\u7a7f\u900f\u200b\u4e2d\u8f49\u200b\u670d\u52d9\u914d\u200b\u5bd8\u200b\u7528\u200b\u65bc\u200b\u97f3\u8996\u983b\u200b\u901a\u8a71\u200b\n        turn_user_lifetime: 1m\n        turn_uris:\n        - turn:8.8.8.8:3478?transport=udp\n        turn_shared_secret: \"\"\n        turn_username: kurento\n        turn_password: kurento\n        trusted_servers:\n        - servername: self\n          host: 8.8.8.8\n          bandwidth: 100\n          turn_uris:\n          - turn:8.8.8.8:3478?transport=udp\n          salt_str: KryaEArg\n      rate_limiting:  # \u200b\u9650\u6d41\u200b\u914d\u200b\u5bd8\u200b \n        enabled: true\n        threshold: 5\n        cooloff_ms: 500\n        exempt_user_ids: []\n    federation_api:  # \u200b\u7bc0\u9ede\u9593\u200b\u901a\u8a0a\u200bAPI\u200b\u914d\u200b\u5bd8\u200b\n      send_max_retries: 16\n      disable_tls_validation: false\n      key_perspectives:\n      - server_name: daodst.com\n        keys:\n        - key_id: ed25519:auto\n          public_key: Noi6WqcDj0QmPxCNQqgezwTlBKrfqehY1u2FyWP9uYw\n        - key_id: ed25519:a_RXGa\n          public_key: l8Hft5qXKn1vfHrg3p4+W8gELQVo8N13JkluMfmn2sQ\n      prefer_direct_fetch: false\n    media_api:   # \u200b\u6a94\u5b58\u5132\u200bAPI\u200b\u914d\u200b\u5bd8\u200b\n      database:\n        connection_string: \"\"\n        max_open_conns: 0\n        max_idle_conns: 0\n        conn_max_lifetime: 0\n      base_path: ./media_store\n      clear_interval: 3\n      max_file_size_bytes: 10485760   # \u200b\u4e0a\u50b3\u200b\u6587\u4ef6\u5927\u5c0f\u200b\u9650\u5236\u200b\u503c\u200b\n      dynamic_thumbnails: false\n      max_thumbnail_generators: 10\n      thumbnail_sizes:\n      - width: 32\n        height: 32\n        method: crop\n      - width: 96\n        height: 96\n        method: crop\n      - width: 640\n        height: 480\n        method: scale\n    sync_api:   # \u200b\u540c\u6b65\u200bAPI\u200b\u914d\u200b\u5bd8\u200b\n      real_ip_header: \"\"\n    user_api:\n      bcrypt_cost: 10\n    mscs:\n      mscs:\n      - msc2946\n    tracing:\n      enabled: false\n      jaeger:\n        serviceName: \"\"\n        disabled: false\n        rpc_metrics: false\n        tags: []\n    logging:   # \u200b\u65e5\u8a8c\u200b\u914d\u200b\u5bd8\u200b\n    - type: file\n      level: info\n      params:\n        path: ./logs\n\n\n</code></pre>"},{"location":"chat/optional_cfg/","title":"\u53ef\u9078\u200b\u914d\u7f6e","text":""},{"location":"chat/optional_cfg/#1-","title":"1- \u200b\u5e36\u200b\u5bec\u200b\u5171\u4eab\u200b\u7bc0\u9ede\u6c60\u200b\u914d\u7f6e","text":"<p>\u200b\u5e36\u200b\u5bec\u200b\u5171\u4eab\u200b\u9700\u6c42\u200b\u88ab\u200b\u8a2d\u8a08\u200b\u70ba\u200b\uff0c\u200b\u5141\u8a31\u200b\u7bc0\u9ede\u200b\u64c1\u6709\u8005\u200b\u9032\u884c\u200b\u806f\u76df\u200b\uff0c\u200b\u5c07\u200bturn\u200b\u4e2d\u8f49\u200b\u670d\u52d9\u200b\u901a\u904e\u200b\u5167\u90e8\u200b\u6e9d\u901a\u200b\uff0c\u200b\u4e26\u200b\u4fee\u6539\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7684\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u4f86\u200b\u9054\u200b\u5230\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u8de8\u7bc0\u9ede\u200b\u4f7f\u7528\u200bturn\u200b\u670d\u52d9\u200b\u3002 \u200b\u4f86\u200b\u9054\u200b\u5230\u200b\u97f3\u8996\u983b\u200b\u901a\u4fe1\u200b\u6642\u200b\uff0c\u200b\u5171\u4eab\u200b\u5e36\u200b\u5bec\u200b\u7684\u200b\u76ee\u7684\u200b\u3002</p>"},{"location":"chat/optional_cfg/#_2","title":"\u914d\u7f6e\u200b\u6539\u52d5","text":"<p>\u200b\u5728\u200b\u751f\u6210\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u6642\u200b\uff0c\u200b\u9ed8\u8a8d\u200b\u65b0\u589e\u200b\u4e86\u200b\u7576\u524d\u200b\u7bc0\u9ede\u200b\u4fe1\u606f\u200b\u5230\u200btrusted_servers\u200b\u914d\u7f6e\u200b\u9805\u4e0b\u200b\u3002\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>\n  turn:\n    turn_user_lifetime: \"1m\"\n    turn_uris: [\"turn:192.168.10.242:3478?transport=udp\"]\n    turn_shared_secret: \"\"\n    turn_username: \"test\"\n    turn_password: \"pwd_test\"\n    trusted_servers:\n      - servername: self   # \u200b\u96a8\u4fbf\u200b\u547d\u540d\u200b\n        host: 192.168.3.32  # \u200b\u670d\u52d9\u5668\u200b\u516c\u7db2\u200bIP\n        bandwidth: 100  # \u200b\u670d\u52d9\u5668\u200b\u7db2\u7d61\u200b\u5e36\u200b\u5bec\u200b(\u200b\u55ae\u4f4d\u200bM)\n        turn_uris: [\"turn:192.168.3.32:3478?transport=udp\"]\n        salt_str: salt_str_here # \u200b\u7528\u200b\u65bc\u200b\u63a5\u53e3\u200b\u53c3\u6578\u200b\u7c3d\u540d\u200b\u7684\u200bsalt\u200b\u5b57\u7b26\u4e32\u200b\n\n</code></pre>"},{"location":"chat/optional_cfg/#_3","title":"\u5171\u4eab\u200b\u914d\u7f6e","text":"<p>\u200b\u7576\u7bc0\u9ede\u200b\u64c1\u6709\u8005\u200b\u79c1\u4e0b\u200b\u9054\u6210\u200b\u5171\u4eab\u200b\u5e36\u200b\u5bec\u5171\u8b58\u200b\u6642\u200b\uff0c\u200b\u53ea\u200b\u9700\u8981\u200b\u628a\u200b\u81ea\u5df1\u200b\u7bc0\u9ede\u200b\u7684\u200btrusted_servers\u200b\u914d\u7f6e\u200b\u9805\u4e0b\u200b\u7684\u200b\u7b2c\u4e00\u200b\u500b\u200btrusted_server\u200b\u914d\u7f6e\u200b\uff0c\u200b\u4e5f\u200b\u5c31\u662f\u200b\u81ea\u5df1\u200b\u7bc0\u9ede\u200b\u7684\u200b \u200b\u914d\u7f6e\u200b\u4e92\u76f8\u200b\u767c\u9001\u7d66\u200b\u5c0d\u65b9\u200b\uff0c\u200b\u7136\u5f8c\u5c0d\u65b9\u200b\u628a\u200b\u6536\u5230\u200b\u7684\u200b\u914d\u7f6e\u200b\u8ffd\u52a0\u200b\u5230\u200btrusted_servers\u200b\u4e0b\u200b\uff0c\u200b\u91cd\u555f\u200b\u670d\u52d9\u200b\u5373\u53ef\u200b\uff0c\u200b\u793a\u4f8b\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>\n  turn:\n    turn_user_lifetime: \"1m\"\n    turn_uris: [\"turn:192.168.10.242:3478?transport=udp\"]\n    turn_shared_secret: \"\"\n    turn_username: \"test\"\n    turn_password: \"pwd_test\"\n    trusted_servers:\n      - servername: self   # \u200b\u81ea\u5df1\u200b\u7bc0\u9ede\u200b\u7684\u200btrusted_server\u200b\u914d\u7f6e\u200b\uff0c\u200b\u540d\u7a31\u200b\u81ea\u5df1\u200b\u53d6\u200b\n        host: 192.168.3.32  # \u200b\u670d\u52d9\u5668\u200b\u516c\u7db2\u200bIP\n        bandwidth: 100  # \u200b\u670d\u52d9\u5668\u200b\u7db2\u7d61\u200b\u5e36\u200b\u5bec\u200b(\u200b\u55ae\u4f4d\u200bM)\uff0c\u200b\u8a72\u200b\u914d\u7f6e\u200b\u66ab\u6642\u200b\u6c92\u7528\u200b\n        turn_uris: [\"turn:192.168.3.32:3478?transport=udp\"]\n        salt_str: salt_str_here # \u200b\u7528\u200b\u65bc\u200b\u63a5\u53e3\u200b\u53c3\u6578\u200b\u7c3d\u540d\u200b\u7684\u200bsalt\u200b\u5b57\u7b26\u4e32\u200b\n\n      - servername: other1   # \u200b\u5c0d\u65b9\u200b\u7bc0\u9ede\u200b\u7684\u200btrusted_server\u200b\u914d\u7f6e\u200b\uff0c\u200b\u540d\u7a31\u200b\u81ea\u5df1\u200b\u53d6\u200b\n        host: 192.168.3.30  # \u200b\u670d\u52d9\u5668\u200b\u516c\u7db2\u200bIP\n        bandwidth: 50  # \u200b\u670d\u52d9\u5668\u200b\u7db2\u7d61\u200b\u5e36\u200b\u5bec\u200b(\u200b\u55ae\u4f4d\u200bM)\uff0c\u200b\u8a72\u200b\u914d\u7f6e\u200b\u66ab\u6642\u200b\u6c92\u7528\u200b\n        turn_uris: [\"turn:192.168.3.30:3478?transport=udp\"]\n        salt_str: other_salt_str_here # \u200b\u7528\u200b\u65bc\u200b\u63a5\u53e3\u200b\u53c3\u6578\u200b\u7c3d\u540d\u200b\u7684\u200bsalt\u200b\u5b57\u7b26\u4e32\u200b\n\n</code></pre>"},{"location":"chat/optional_cfg/#2-","title":"2-\u200b\u53ef\u4fe1\u200b\u8282\u70b9\u200b\u6c60\u200b\u914d\u7f6e","text":"<p>\u200b\u7db2\u95dc\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u4fe1\u4efb\u200b\u7bc0\u9ede\u200b\u914d\u7f6e\u200bchat.yaml\u200b\u7684\u200b\u914d\u7f6e\u200b\u9879\u200b\u4fee\u6539\u200b\uff0c\u200b\u4f86\u200b\u5be6\u73fe\u200b\u7bc0\u9ede\u9593\u200b\u7684\u200b\u7528\u6236\u200b\u901a\u8a0a\u200b\uff0c\u200b\u793a\u4f8b\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>trusted_federation_servers: [\"1111111.nxn\", \"2222222.nxn\"] # \u200b\u914d\u7f6e\u200b\u5167\u5bb9\u200b\u70ba\u200b\u7db2\u95dc\u200b\u7684\u200bservername\ndisable_federation: false\n</code></pre>"},{"location":"chat/optional_cfg/#_4","title":"\u6ce8\u610f","text":"<pre><code>    \u200b\u7576\u200b\u4fee\u6539\u200b\u672c\u7bc0\u9ede\u200b\u7684\u200b\u6587\u4ef6\u200b\u5b58\u5132\u200b\u6e05\u7406\u200b\u6642\u9593\u200b\u9031\u671f\u200b\u914d\u7f6e\u200b\u6642\u200b\uff0c\u200b\u804a\u5929\u200b\u670d\u52d9\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u6703\u200b\u91cd\u65b0\u200b\u751f\u6210\u200b\u3002\n    \u200b\u4e5f\u200b\u5c31\u200b\u610f\u5473\u8457\u200b\u9019\u88e1\u200b\u7684\u200b\u5171\u4eab\u200b\u5e36\u200b\u5bec\u200b\u914d\u7f6e\u200b\u6703\u200b\u5931\u6548\u200b\uff0c\u200b\u6240\u4ee5\u200b\u9700\u8981\u200b\u91cd\u65b0\u914d\u7f6e\u200b\n</code></pre>"},{"location":"chat/prometheus_doc/","title":"\u666e\u7f85\u200b\u7c73\u4fee\u65af\u200b\u72c0\u614b\u200b\u76e3\u63a7","text":"<pre><code>    # HELP dendrite_caching_ristretto_cost   *ristretto\u200b\u7de9\u5b58\u200b\u6d88\u8017\u200b\n\n    # TYPE dendrite_caching_ristretto_cost gauge\n\n    dendrite_caching_ristretto_cost 0\n\n    # HELP dendrite_caching_ristretto_ratio\n\n    # TYPE dendrite_caching_ristretto_ratio gauge\n\n    dendrite_caching_ristretto_ratio 0\n\n    # HELP dendrite_clientapi_reg_users_total Total number of registered users  \u200b\u7e3d\u200b\u8a3b\u200b\u518a\u200b\u7528\u200b\u6236\u200b\u6578\u200b\n\n    # TYPE dendrite_clientapi_reg_users_total counter\n\n    dendrite_clientapi_reg_users_total 0\n\n    # HELP dendrite_federationapi_destination_queues_backing_off   \u200b\u8de8\u7bc0\u9ede\u200b\u4e8b\u4ef6\u200b\u767c\u9001\u200b\u4e2d\u200b\u7684\u200b\u6578\u91cf\u200b\n\n    # TYPE dendrite_federationapi_destination_queues_backing_off gauge\n\n    dendrite_federationapi_destination_queues_backing_off 0\n\n    # HELP dendrite_federationapi_destination_queues_running  \u200b\u8de8\u7bc0\u9ede\u200b\u4e8b\u4ef6\u200b\u8655\u7406\u200b\u4e2d\u200b\u7684\u200b\u6578\u91cf\u200b\n\n    # TYPE dendrite_federationapi_destination_queues_running gauge\n\n    dendrite_federationapi_destination_queues_running 0\n\n    # HELP dendrite_federationapi_destination_queues_total   \u200b\u8de8\u7bc0\u9ede\u200b\u4e8b\u4ef6\u200b\u7e3d\u6578\u91cf\u200b\n\n    # TYPE dendrite_federationapi_destination_queues_total gauge\n\n    dendrite_federationapi_destination_queues_total 0\n\n    # HELP dendrite_federationapi_recv_edus Number of incoming EDUs from remote servers \u200b\u5f9e\u9060\u7aef\u200b\u63a5\u6536\u200b\u7684\u200b\u8de8\u200b\u7bc0\u9ede\u200b\u4e8b\u4ef6\u200b\u6578\u91cf\u200b\n\n    # TYPE dendrite_federationapi_recv_edus counter\n\n    dendrite_federationapi_recv_edus 0\n\n    # HELP dendrite_syncapi_active_sync_requests The number of sync requests that are active right now  \u200b\u6d3b\u8e8d\u7684\u200b\u540c\u6b65\u200b\u8acb\u6c42\u6578\u200b\n\n    # TYPE dendrite_syncapi_active_sync_requests gauge\n\n    dendrite_syncapi_active_sync_requests 0\n\n    # HELP dendrite_syncapi_waiting_sync_requests The number of sync requests that are waiting to be woken by a notifier  \u200b\u7b49\u5f85\u200b\u88ab\u200b\u559a\u9192\u200b\u7684\u200b\u540c\u6b65\u200b\u8acb\u6c42\u6578\u200b\n\n    # TYPE dendrite_syncapi_waiting_sync_requests gauge\n\n    dendrite_syncapi_waiting_sync_requests 0\n\n    # HELP dendrite_user_online_num_requests_total Total number of internal API calls  \u200b\u5167\u90e8\u200bAPI\u200b\u8acb\u6c42\u200b\u7e3d\u6578\u200b\n\n    # TYPE dendrite_user_online_num_requests_total counter\n\n    dendrite_user_online_num_requests_total{code=\"200\"} 1214\n\n    # HELP dendrite_user_online_num_response_size_bytes A histogram of response sizes for requests.  \u200b\u7528\u6236\u200b\u5728\u200b\u7dda\u6578\u200b\u8acb\u6c42\u200b\u7684\u200b\u6b77\u53f2\u200b\u8fd4\u56de\u200b\u6578\u64da\u200b\u5927\u5c0f\u200b\n\n    # TYPE dendrite_user_online_num_response_size_bytes histogram\n\n    dendrite_user_online_num_response_size_bytes_bucket{le=\"200\"} 1214\n\n    dendrite_user_online_num_response_size_bytes_bucket{le=\"500\"} 1214\n\n    dendrite_user_online_num_response_size_bytes_bucket{le=\"900\"} 1214\n\n    dendrite_user_online_num_response_size_bytes_bucket{le=\"1500\"} 1214\n\n    dendrite_user_online_num_response_size_bytes_bucket{le=\"5000\"} 1214\n\n    dendrite_user_online_num_response_size_bytes_bucket{le=\"15000\"} 1214\n\n    dendrite_user_online_num_response_size_bytes_bucket{le=\"50000\"} 1214\n\n    dendrite_user_online_num_response_size_bytes_bucket{le=\"100000\"} 1214\n\n    dendrite_user_online_num_response_size_bytes_bucket{le=\"+Inf\"} 1214\n\n    dendrite_user_online_num_response_size_bytes_sum 1214\n\n    dendrite_user_online_num_response_size_bytes_count 1214\n\n    # HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.\n\n    # TYPE go_gc_duration_seconds summary\n\n    go_gc_duration_seconds{quantile=\"0\"} 2.5635e-05\n\n    go_gc_duration_seconds{quantile=\"0.25\"} 4.6248e-05\n\n    go_gc_duration_seconds{quantile=\"0.5\"} 5.2428e-05\n\n    go_gc_duration_seconds{quantile=\"0.75\"} 6.108e-05\n\n    go_gc_duration_seconds{quantile=\"1\"} 0.0001923\n\n    go_gc_duration_seconds_sum 0.002047596\n\n    go_gc_duration_seconds_count 37\n\n    # HELP go_goroutines Number of goroutines that currently exist.\n\n    # TYPE go_goroutines gauge\n\n    go_goroutines 168\n\n    # HELP go_info Information about the Go environment.\n\n    # TYPE go_info gauge\n\n    go_info{version=\"go1.18.3\"} 1\n\n    # HELP go_memstats_alloc_bytes Number of bytes allocated and still in use.\n\n    # TYPE go_memstats_alloc_bytes gauge\n\n    go_memstats_alloc_bytes 8.1388416e+07\n\n    # HELP go_memstats_alloc_bytes_total Total number of bytes allocated, even if freed.\n\n    # TYPE go_memstats_alloc_bytes_total counter\n\n    go_memstats_alloc_bytes_total 2.02933024e+08\n\n    # HELP go_memstats_buck_hash_sys_bytes Number of bytes used by the profiling bucket hash table.\n\n    # TYPE go_memstats_buck_hash_sys_bytes gauge\n\n    go_memstats_buck_hash_sys_bytes 1.482235e+06\n\n    # HELP go_memstats_frees_total Total number of frees.\n\n    # TYPE go_memstats_frees_total counter\n\n    go_memstats_frees_total 849112\n\n    # HELP go_memstats_gc_sys_bytes Number of bytes used for garbage collection system metadata.\n\n    # TYPE go_memstats_gc_sys_bytes gauge\n\n    go_memstats_gc_sys_bytes 7.936496e+06\n\n    # HELP go_memstats_heap_alloc_bytes Number of heap bytes allocated and still in use.\n\n    # TYPE go_memstats_heap_alloc_bytes gauge\n\n    go_memstats_heap_alloc_bytes 8.1388416e+07\n\n    # HELP go_memstats_heap_idle_bytes Number of heap bytes waiting to be used.\n\n    # TYPE go_memstats_heap_idle_bytes gauge\n\n    go_memstats_heap_idle_bytes 8.8064e+06\n\n    # HELP go_memstats_heap_inuse_bytes Number of heap bytes that are in use.\n\n    # TYPE go_memstats_heap_inuse_bytes gauge\n\n    go_memstats_heap_inuse_bytes 8.5794816e+07\n\n    # HELP go_memstats_heap_objects Number of allocated objects.\n\n    # TYPE go_memstats_heap_objects gauge\n\n    go_memstats_heap_objects 77324\n\n    # HELP go_memstats_heap_released_bytes Number of heap bytes released to OS.\n\n    # TYPE go_memstats_heap_released_bytes gauge\n\n    go_memstats_heap_released_bytes 1.572864e+06\n\n    # HELP go_memstats_heap_sys_bytes Number of heap bytes obtained from system.\n\n    # TYPE go_memstats_heap_sys_bytes gauge\n\n    go_memstats_heap_sys_bytes 9.4601216e+07\n\n    # HELP go_memstats_last_gc_time_seconds Number of seconds since 1970 of last garbage collection.\n\n    # TYPE go_memstats_last_gc_time_seconds gauge\n\n    go_memstats_last_gc_time_seconds 1.6812883440088644e+09\n\n    # HELP go_memstats_lookups_total Total number of pointer lookups.\n\n    # TYPE go_memstats_lookups_total counter\n\n    go_memstats_lookups_total 0\n\n    # HELP go_memstats_mallocs_total Total number of mallocs.\n\n    # TYPE go_memstats_mallocs_total counter\n\n    go_memstats_mallocs_total 926436\n\n    # HELP go_memstats_mcache_inuse_bytes Number of bytes in use by mcache structures.\n\n    # TYPE go_memstats_mcache_inuse_bytes gauge\n\n    go_memstats_mcache_inuse_bytes 9600\n\n    # HELP go_memstats_mcache_sys_bytes Number of bytes used for mcache structures obtained from system.\n\n    # TYPE go_memstats_mcache_sys_bytes gauge\n\n    go_memstats_mcache_sys_bytes 15600\n\n    # HELP go_memstats_mspan_inuse_bytes Number of bytes in use by mspan structures.\n\n    # TYPE go_memstats_mspan_inuse_bytes gauge\n\n    go_memstats_mspan_inuse_bytes 274448\n\n    # HELP go_memstats_mspan_sys_bytes Number of bytes used for mspan structures obtained from system.\n\n    # TYPE go_memstats_mspan_sys_bytes gauge\n\n    go_memstats_mspan_sys_bytes 342720\n\n    # HELP go_memstats_next_gc_bytes Number of heap bytes when next garbage collection will take place.\n\n    # TYPE go_memstats_next_gc_bytes gauge\n\n    go_memstats_next_gc_bytes 1.5774864e+08\n\n    # HELP go_memstats_other_sys_bytes Number of bytes used for other system allocations.\n\n    # TYPE go_memstats_other_sys_bytes gauge\n\n    go_memstats_other_sys_bytes 1.646717e+06\n\n    # HELP go_memstats_stack_inuse_bytes Number of bytes in use by the stack allocator.\n\n    # TYPE go_memstats_stack_inuse_bytes gauge\n\n    go_memstats_stack_inuse_bytes 1.867776e+06\n\n    # HELP go_memstats_stack_sys_bytes Number of bytes obtained from system for stack allocator.\n\n    # TYPE go_memstats_stack_sys_bytes gauge\n\n    go_memstats_stack_sys_bytes 1.867776e+06\n\n    # HELP go_memstats_sys_bytes Number of bytes obtained from system.\n\n    # TYPE go_memstats_sys_bytes gauge\n\n    go_memstats_sys_bytes 1.0789276e+08\n\n    # HELP go_threads Number of OS threads created.\n\n    # TYPE go_threads gauge\n\n    go_threads 14\n\n    # HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.\n\n    # TYPE process_cpu_seconds_total counter\n\n    process_cpu_seconds_total 4.27\n\n    # HELP process_max_fds Maximum number of open file descriptors.\n\n    # TYPE process_max_fds gauge\n\n    process_max_fds 65535\n\n    # HELP process_open_fds Number of open file descriptors.\n\n    # TYPE process_open_fds gauge\n\n    process_open_fds 12\n\n    # HELP process_resident_memory_bytes Resident memory size in bytes.\n\n    # TYPE process_resident_memory_bytes gauge\n\n    process_resident_memory_bytes 5.7909248e+07\n\n    # HELP process_start_time_seconds Start time of the process since unix epoch in seconds.\n\n    # TYPE process_start_time_seconds gauge\n\n    process_start_time_seconds 1.68128474314e+09\n\n    # HELP process_virtual_memory_bytes Virtual memory size in bytes.\n\n    # TYPE process_virtual_memory_bytes gauge\n\n    process_virtual_memory_bytes 1.50509568e+09\n\n    # HELP process_virtual_memory_max_bytes Maximum amount of virtual memory available in bytes.\n\n    # TYPE process_virtual_memory_max_bytes gauge\n\n    process_virtual_memory_max_bytes 1.8446744073709552e+19\n\n    # HELP promhttp_metric_handler_requests_in_flight Current number of scrapes being served.\n\n    # TYPE promhttp_metric_handler_requests_in_flight gauge\n\n    promhttp_metric_handler_requests_in_flight 1\n\n    # HELP promhttp_metric_handler_requests_total Total number of scrapes by HTTP status code.\n\n    # TYPE promhttp_metric_handler_requests_total counter\n\n    promhttp_metric_handler_requests_total{code=\"200\"} 1\n\n    promhttp_metric_handler_requests_total{code=\"500\"} 0\n\n    promhttp_metric_handler_requests_total{code=\"503\"} 0\n\n\n</code></pre>"},{"location":"chat/voip_signaling/","title":"\u547c\u53eb\u200b\u6d41\u7a0b","text":"<p>Useful links: - https://codelabs.developers.google.com/codelabs/webrtc-web/#0 - http://webrtc.github.io/webrtc-org/native-code/android/</p> <p> </p>"},{"location":"gateway/config/","title":"\u914d\u7f6e","text":""},{"location":"gateway/config/#_2","title":"\u5340\u584a\u200b\u6642\u9593","text":"<p>\u200b\u7bc0\u9ede\u200b\u914d\u7f6e\u200b\u4e2d\u200b\u7684\u200b\u8d85\u6642\u200b\u63d0\u4ea4\u200b\u503c\u5b9a\u200b\u7fa9\u4e86\u200b\u6211\u5011\u200b\u5728\u200b\u63d0\u4ea4\u200b\u4e00\u500b\u200b\u584a\u200b\u4e4b\u200b\u5f8c\u200b\u7b49\u5f85\u200b\u591a\u9577\u200b\u6642\u9593\u200b\uff0c\u200b\u7136\u5f8c\u518d\u200b\u958b\u59cb\u200b\u65b0\u200b\u7684\u200b\u9ad8\u5ea6\u200b\uff08\u200b\u9019\u8b93\u200b\u6211\u5011\u200b\u6709\u200b\u6a5f\u6703\u200b\u6536\u5230\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u9810\u200b\u63d0\u4ea4\u200b\uff0c\u200b\u5373\u4f7f\u200b\u6211\u5011\u200b\u5df2\u7d93\u200b\u6709\u200b +2/3\uff09\u3002 \u200b\u7576\u524d\u9ed8\u200b\u8a8d\u503c\u200b\u70ba\u200b<code>6s</code>\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u4f86\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88dd\u200b <code>stcd</code> \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f91\u200b</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u5f9e\u200b v6 \u200b\u958b\u59cb\u200b\uff0c\u200b\u9019\u7531\u200b\u670d\u52d9\u5668\u200b\u5728\u200b\u521d\u59cb\u5316\u200b\u7bc0\u9ede\u200b\u6642\u200b\u81ea\u52d5\u200b\u8655\u7406\u200b\u3002 \u200b\u9a57\u8b49\u8005\u200b\u9700\u8981\u200b\u78ba\u4fdd\u200b\u4ed6\u5011\u200b\u7684\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b\u914d\u7f6e\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u5c07\u7db2\u7d61\u200b\u52a0\u901f\u200b\u5230\u200b\u7d04\u200b 2 \u200b\u79d2\u200b\u7684\u200b\u51fa\u584a\u200b\u6642\u9593\u200b\u3002 :::</p> <pre><code># In $install_path/.stcd/config/config.toml\n\n#######################################################\n###         Consensus Configuration Options         ###\n#######################################################\n[consensus]\n\n### ... \n\n# How long we wait after committing a block, before starting on the new\n# height (this gives us a chance to receive some more precommits, even\n# though we already have +2/3).\ntimeout_commit = \"1s\"\n</code></pre>"},{"location":"gateway/config/#_3","title":"\u7bc0\u9ede","text":"<p>\u200b\u5728\u200b <code>$install_path/.stcd/config/config.toml</code> \u200b\u4e2d\u200b\uff0c\u200b\u4f60\u200b\u53ef\u4ee5\u200b\u8a2d\u7f6e\u200b\u4f60\u200b\u7684\u200b\u5c0d\u200b\u7b49\u9ede\u200b\u3002</p> <p>\u200b\u8acb\u200b\u53c3\u95b1\u200b\u6211\u5011\u200b\u6587\u6a94\u200b\u4e2d\u200b\u7684\u200b \u200b\u6dfb\u52a0\u200b\u6301\u4e45\u200b\u7bc0\u9ede\u200b \u200b\u4ee5\u7372\u200b\u53d6\u81ea\u200b\u52d5\u5316\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u4f46\u200b\u5b57\u200b\u6bb5\u200b\u61c9\u8a72\u200b\u770b\u200b\u8d77\u4f86\u200b\u50cf\u200b\u9017\u865f\u200b\u5206\u9694\u200b\u7684\u200b peer \u200b\u5b57\u7b26\u4e32\u200b\uff08\u200b\u4e0d\u8981\u200b\u5fa9\u200b\u5236\u200b\u5b83\u200b\uff0c\u200b\u53ea\u662f\u200b\u4e00\u500b\u200b\u4f8b\u5b50\u200b\uff09\uff1a</p> <pre><code>persistent_peers = \"5576b0160761fe81ccdf88e06031a01bc8643d51@195.201.108.97:24656,13e850d14610f966de38fc2f925f6dc35c7f4bf4@176.9.60.27:26656,38eb4984f89899a5d8d1f04a79b356f15681bb78@18.169.155.159:26656,59c4351009223b3652674bd5ee4324926a5a11aa@51.15.133.26:26656,3a5a9022c8aa2214a7af26ebbfac49b77e34e5c5@65.108.1.46:26656,4fc0bea2044c9fd1ea8cc987119bb8bdff91aaf3@65.21.246.124:26656,6624238168de05893ca74c2b0270553189810aa7@95.216.100.80:26656,9d247286cd407dc8d07502240245f836e18c0517@149.248.32.208:26656,37d59371f7578101dee74d5a26c86128a229b8bf@194.163.172.168:26656,b607050b4e5b06e52c12fcf2db6930fd0937ef3b@95.217.107.96:26656,7a6bbbb6f6146cb11aebf77039089cd038003964@94.130.54.247:26656\"\n</code></pre>"},{"location":"gateway/config/#_4","title":"\u5206\u4eab\u200b\u4f60\u200b\u7684\u200b\u7bc0\u9ede","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>tendermint show-node-id</code> \u200b\u547d\u4ee4\u200b\u67e5\u770b\u200b\u548c\u200b\u5171\u4eab\u200b\u60a8\u200b\u7684\u200b\u5c0d\u200b\u7b49\u200b\u7bc0\u9ede\u200b</p> <pre><code>stcd tendermint show-node-id\nac29d21d0a6885465048a4481d16c12f59b2e58b\n</code></pre> <ul> <li>\u200b\u7bc0\u9ede\u200b\u683c\u5f0f\u200b: <code>node-id@ip:port</code></li> <li>\u200b\u6a23\u4f8b\u200b: <code>ac29d21d0a6885465048a4481d16c12f59b2e58b@143.198.224.124:26656</code></li> </ul>"},{"location":"gateway/config/#_5","title":"\u5065\u5eb7\u200b\u7bc0\u9ede","text":"<p>\u200b\u5982\u679c\u200b\u60a8\u200b\u53ea\u200b\u4f9d\u8cf4\u200b\u7a2e\u5b50\u200b\u7bc0\u9ede\u200b\u800c\u200b\u6c92\u200b\u6709\u200b\u6301\u4e45\u200b\u5c0d\u200b\u7b49\u200b\u7bc0\u9ede\u200b\u6216\u200b\u6578\u91cf\u200b\u5f88\u5c11\u200b\uff0c\u200b\u8acb\u200b\u5728\u200b <code>config.toml</code> \u200b\u4e2d\u200b\u589e\u52a0\u200b\u4ee5\u4e0b\u200b\u53c3\u6578\u200b\uff1a</p> <pre><code># Maximum number of inbound peers\nmax_num_inbound_peers = 120\n\n# Maximum number of outbound peers to connect to, excluding persistent peers\nmax_num_outbound_peers = 60\n</code></pre>"},{"location":"gateway/disk-usage/","title":"\u78c1\u76e4\u200b\u4f7f\u7528\u200b\u512a\u5316","text":"<p>\u200b\u81ea\u5b9a\u7fa9\u200b\u914d\u7f6e\u200b\u8a2d\u7f6e\u200b\u4ee5\u200b\u964d\u4f4e\u200b\u9a57\u8b49\u5668\u200b\u7bc0\u9ede\u200b\u7684\u200b\u78c1\u76e4\u200b\u8981\u6c42\u200b\u3002</p> <p>\u200b\u5340\u584a\u200b\u93c8\u200b\u6578\u64da\u5eab\u200b\u5f80\u5f80\u200b\u6703\u200b\u96a8\u8457\u200b\u6642\u9593\u200b\u7684\u200b\u63a8\u79fb\u200b\u800c\u200b\u589e\u9577\u200b\uff0c\u200b\u9019\u53d6\u200b\u6c7a\u200b\u65bc\u200b\u4f8b\u5982\u200b\u95dc\u65bc\u5340\u200b\u584a\u200b\u901f\u5ea6\u200b\u548c\u200b\u4ea4\u6613\u200b\u91d1\u984d\u200b\u3002 \u200b\u5c0d\u200b\u65bc\u200b Daodst\uff0c\u200b\u6211\u5011\u200b\u8ac7\u8ad6\u200b\u7684\u200b\u662f\u200b\u524d\u200b\u5169\u9031\u200b\u63a5\u8fd1\u200b 100GB \u200b\u7684\u200b\u78c1\u76e4\u200b\u4f7f\u7528\u91cf\u200b\u3002</p> <p>\u200b\u5f88\u5c11\u200b\u6709\u200b\u914d\u7f6e\u200b\u53ef\u4ee5\u200b\u986f\u8457\u200b\u6e1b\u5c11\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u78c1\u76e4\u200b\u4f7f\u7528\u91cf\u200b\u3002 \u200b\u5176\u4e2d\u200b\u4e00\u4e9b\u200b\u66f4\u6539\u200b\u53ea\u6709\u200b\u5728\u200b\u60a8\u200b\u9032\u884c\u200b\u914d\u7f6e\u200b\u4e26\u5f9e\u200b\u4f7f\u7528\u200b\u5b83\u5011\u200b\u958b\u59cb\u200b\u540c\u6b65\u200b\u6642\u624d\u200b\u6703\u200b\u5b8c\u5168\u200b\u751f\u6548\u200b\u3002</p>"},{"location":"gateway/disk-usage/#_2","title":"\u7d22\u5f15","text":"<p>\u200b\u5982\u679c\u200b\u4e0d\u200b\u9700\u8981\u200b\u5f9e\u200b\u7279\u5b9a\u200b\u7bc0\u9ede\u200b\u67e5\u8a62\u200b\u4ea4\u6613\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u7981\u7528\u200b\u7d22\u5f15\u200b\u3002\u200b\u5728\u200b <code>config.toml</code> \u200b\u4e2d\u200b\u9032\u884c\u200b\u8a2d\u7f6e\u200b</p> <pre><code>indexer = \"null\"\n</code></pre> <p>\u200b\u5982\u679c\u200b\u60a8\u200b\u5728\u200b\u5df2\u7d93\u200b\u540c\u6b65\u200b\u7684\u200b\u7bc0\u9ede\u200b\u4e0a\u200b\u57f7\u884c\u200b\u6b64\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5247\u200b\u6536\u96c6\u200b\u7684\u200b\u7d22\u5f15\u200b\u4e0d\u6703\u200b\u81ea\u52d5\u200b\u6e05\u9664\u200b\uff0c\u200b\u60a8\u200b\u9700\u8981\u200b\u624b\u52d5\u5c07\u200b\u5176\u200b\u522a\u9664\u200b\u3002 \u200b\u8a72\u200b\u7d22\u5f15\u200b\u4f4d\u200b\u65bc\u200b\u540d\u70ba\u200b <code>data/tx_index.db/</code> \u200b\u7684\u200b\u6578\u64da\u5eab\u200b\u76ee\u9304\u200b\u4e0b\u200b\u3002</p>"},{"location":"gateway/disk-usage/#_3","title":"\u72c0\u614b\u200b\u540c\u6b65\u200b\u5feb\u7167","text":"<p>\u200b\u6211\u200b\u76f8\u4fe1\u200b\u9019\u5728\u200b Daodst \u200b\u4e0a\u9ed8\u8a8d\u200b\u662f\u200b\u7981\u7528\u200b\u7684\u200b\uff0c\u200b\u4f46\u200b\u7121\u8ad6\u200b\u5982\u4f55\u200b\u90fd\u200b\u6703\u200b\u5728\u200b\u9019\u88e1\u200b\u5217\u51fa\u200b\u3002\u200b\u5728\u200b <code>app.toml</code> \u200b\u96c6\u200b</p> <pre><code>snapshot-interval = 0\n</code></pre> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u5982\u679c\u200b\u5728\u200b\u7db2\u7d61\u200b\u4e0a\u200b\u555f\u7528\u200b\u4e86\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u4e26\u4e14\u200b\u5de5\u4f5c\u200b\u6b63\u5e38\u200b\uff0c\u200b\u5b83\u5c07\u200b\u5141\u8a31\u200b\u4e00\u500b\u200b\u4eba\u200b\u5728\u200b\u5e7e\u5206\u200b\u9418\u5167\u200b\u540c\u6b65\u200b\u4e00\u500b\u200b\u65b0\u200b\u7bc0\u9ede\u200b\u3002\u200b\u4f46\u662f\u200b\u9019\u500b\u200b\u7bc0\u9ede\u200b\u4e0d\u6703\u200b\u6709\u200b\u6b77\u53f2\u200b\u3002</p>"},{"location":"gateway/disk-usage/#_4","title":"\u914d\u7f6e\u200b\u4fee\u526a","text":"<p>\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u6bcf\u200b 500 \u200b\u500b\u200b\u72c0\u614b\u200b\u4fdd\u7559\u200b\u4e00\u6b21\u200b\uff0c\u200b\u6700\u200b\u5f8c\u200b 100 \u200b\u500b\u200b\u72c0\u614b\u200b\u4fdd\u7559\u200b\u3002 \u200b\u5f9e\u9577\u200b\u9060\u4f86\u200b\u770b\u200b\uff0c\u200b\u9019\u6703\u200b\u6d88\u8017\u200b\u5927\u91cf\u200b\u78c1\u76e4\u200b\u7a7a\u9593\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u4ee5\u4e0b\u200b\u81ea\u5b9a\u7fa9\u200b\u914d\u7f6e\u200b\u9032\u884c\u200b\u512a\u5316\u200b\uff1a</p> <pre><code>pruning = \"custom\"\npruning-keep-recent = \"100\"\npruning-keep-every = \"0\"\npruning-interval = \"10\"\n</code></pre> <p>\u200b\u914d\u7f6e\u200b <code>pruning-keep-recent = \"0\"</code> \u200b\u807d\u8d77\u200b\u4f86\u200b\u5f88\u200b\u8a98\u4eba\u200b\uff0c\u200b\u4f46\u200b\u5982\u679c\u200b <code>stcd</code> \u200b\u56e0\u200b\u4efb\u4f55\u200b\u539f\u56e0\u200b\u88ab\u200b\u6bba\u200b\u6b7b\u200b\uff0c\u200b\u9019\u5c07\u200b\u6709\u200b\u6578\u64da\u5eab\u200b\u640d\u58de\u200b\u7684\u200b\u98a8\u96aa\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u5efa\u8b70\u200b\u4fdd\u7559\u200b\u5c11\u6578\u200b\u6700\u65b0\u200b\u72c0\u614b\u200b\u3002</p>"},{"location":"gateway/disk-usage/#_5","title":"\u65e5\u8a8c\u200b\u8a18\u9304","text":"<p>\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u65e5\u8a8c\u200b\u8a18\u9304\u7d1a\u200b\u5225\u200b\u8a2d\u7f6e\u200b\u70ba\u200b <code>info</code>\uff0c\u200b\u9019\u6703\u7522\u751f\u200b\u5927\u91cf\u200b\u65e5\u8a8c\u200b\u3002 \u200b\u7576\u555f\u200b\u52d5\u6642\u200b\u770b\u5230\u200b\u7bc0\u9ede\u200b\u958b\u59cb\u200b\u6b63\u78ba\u200b\u540c\u6b65\u200b\u6642\u200b\uff0c\u200b\u6b64\u65e5\u8a8c\u200b\u7d1a\u200b\u5225\u200b\u53ef\u80fd\u200b\u5f88\u200b\u597d\u200b\u3002 \u200b\u4f46\u662f\u200b\uff0c\u200b\u5728\u200b\u60a8\u200b\u770b\u5230\u200b\u540c\u6b65\u200b\u9806\u5229\u200b\u9032\u884c\u200b\u5f8c\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5c07\u65e5\u8a8c\u200b\u7d1a\u200b\u5225\u200b\u964d\u4f4e\u200b\u5230\u200b <code>warn</code>\uff08\u200b\u6216\u200b <code>error</code>\uff09\u3002 \u200b\u5728\u200b <code>config.toml</code> \u200b\u4e0a\u200b\u8a2d\u7f6e\u200b\u4ee5\u4e0b\u200b\u5167\u5bb9\u200b\u3002</p> <pre><code>log_level = \"warn\"\n</code></pre> <p>\u200b\u9084\u8981\u200b\u78ba\u4fdd\u200b\u60a8\u200b\u7684\u200b\u65e5\u8a8c\u200b\u8f2a\u63db\u200b\u914d\u7f6e\u200b\u6b63\u78ba\u200b\u3002</p>"},{"location":"gateway/disk-usage/#_6","title":"\u7d50\u679c","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b Daodst \u200b\u6e2c\u8a66\u7db2\u200b\u5169\u9031\u200b\u5f8c\u200b\u7684\u200b\u78c1\u76e4\u200b\u4f7f\u7528\u200b\u60c5\u6cc1\u200b\u3002 \u200b\u9ed8\u8a8d\u200b\u914d\u7f6e\u200b\u5c0e\u81f4\u200b\u78c1\u76e4\u200b\u4f7f\u7528\u91cf\u200b\u70ba\u200b 90GB\u3002</p> <pre><code>5.3G    ./state.db\n70G     ./application.db\n20K     ./snapshots/metadata.db\n24K     ./snapshots\n9.0G    ./blockstore.db\n20K     ./evidence.db\n1018M   ./cs.wal\n4.7G    ./tx_index.db\n90G     .\n</code></pre> <p>\u200b\u6b64\u200b\u512a\u5316\u200b\u914d\u7f6e\u200b\u5df2\u5c07\u200b\u78c1\u76e4\u200b\u4f7f\u7528\u91cf\u200b\u6e1b\u5c11\u200b\u5230\u200b 17 GB\u3002</p> <pre><code>17G     .\n1.1G    ./cs.wal\n946M    ./application.db\n20K     ./evidence.db\n9.1G    ./blockstore.db\n24K     ./snapshots\n20K     ./snapshots/metadata.db\n5.3G    ./state.db\n</code></pre>"},{"location":"gateway/faq/","title":"\u9a57\u8b49\u5668\u200b FAQ","text":"<p>\u200b\u67e5\u770b\u200b\u95dc\u65bc\u5728\u200b DST \u200b\u4e0a\u200b\u904b\u884c\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u5e38\u898b\u200b\u554f\u984c\u200b\u89e3\u7b54\u200b\u3002</p>"},{"location":"gateway/faq/#_1","title":"\u4e00\u822c\u200b\u6982\u5ff5","text":"\u4ec0\u9ebc\u200b\u662f\u200b\u9a57\u8b49\u5668\u200b? <p>DST \u200b\u7531\u200b [Tendermint](https://docs.tendermint.com/v0.34/introduction/what-is-tendermint.html) Core \u200b\u63d0\u4f9b\u200b\u652f\u6301\u200b\uff0c\u200b\u5b83\u200b\u4f9d\u8cf4\u200b\u65bc\u200b\u4e00\u200b\u7d44\u9a57\u200b\u8b49\u5668\u200b\u4f86\u200b\u4fdd\u8b77\u200b\u7db2\u7d61\u200b\u3002</p> <p>\u200b\u9a57\u8b49\u5668\u200b\u904b\u884c\u200b\u4e00\u500b\u200b\u5b8c\u6574\u200b\u7684\u200b\u7bc0\u9ede\u200b\u4e26\u901a\u904e\u200b\u5ee3\u64ad\u200b\u6295\u7968\u200b\u53c3\u8207\u5171\u8b58\u200b\uff0c\u200b\u6295\u7968\u200b\u5305\u542b\u200b\u7531\u200b\u4ed6\u5011\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\u7c3d\u540d\u200b\u7684\u200b\u52a0\u5bc6\u200b\u7c3d\u540d\u200b\u3002\u200b\u9a57\u8b49\u5668\u200b\u5728\u200b\u5340\u584a\u200b\u93c8\u200b\u4e2d\u200b\u63d0\u4ea4\u200b\u65b0\u5340\u200b\u584a\u200b\u4e26\u7372\u200b\u5f97\u200b\u6536\u5165\u200b\u4ee5\u63db\u53d6\u200b\u4ed6\u5011\u200b\u7684\u200b\u5de5\u4f5c\u200b\u3002</p> <p>\u200b\u4ed6\u5011\u200b\u9084\u901a\u904e\u200b\u5c0d\u200b\u6cbb\u7406\u200b\u63d0\u6848\u200b\u9032\u884c\u200b\u6295\u7968\u200b\u4f86\u200b\u53c3\u200b\u8207\u200b\u5354\u8b70\u200b\u5167\u200b\u7684\u200b\u8ca1\u52d9\u200b\u6cbb\u7406\u200b\u3002\u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u6295\u7968\u200b\u5f71\u97ff\u529b\u200b\u6839\u64da\u200b\u4ed6\u5011\u200b\u7684\u200b\u7e3d\u6b0a\u76ca\u200b\u9032\u884c\u200b\u52a0\u6b0a\u200b\u3002</p> \u200b\u4ec0\u9ebc\u200b\u662f\u200b\"\u200b\u8cea\u62bc\u200b\"? <p>DST \u200b\u662f\u200b\u4e00\u500b\u200b\u516c\u958b\u200b\u7684\u200b\u80a1\u6b0a\u200b\u8b49\u660e\u200b (PoS) \u200b\u5340\u584a\u200b\u93c8\u200b\uff0c\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u6b0a\u91cd\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u4f5c\u70ba\u200b\u62b5\u62bc\u54c1\u200b\u7684\u200b\u62b5\u62bc\u200b\u4ee3\u5e63\u200b (NXN) \u200b\u7684\u200b\u6578\u91cf\u200b\u3002 \u200b\u9019\u4e9b\u200b\u8cea\u62bc\u4ee3\u5e63\u200b\u53ef\u4ee5\u200b\u7531\u9a57\u200b\u8b49\u5668\u200b\u76f4\u63a5\u200b\u8cea\u62bc\u200b\u6216\u200b\u7531\u200b NXN \u200b\u6301\u6709\u8005\u200b\u59d4\u200b\u8a17\u200b\u7d66\u4ed6\u5011\u200b\u3002</p> <p>\u200b\u7cfb\u7d71\u200b\u4e2d\u200b\u7684\u200b\u4efb\u4f55\u200b\u7528\u6236\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u767c\u9001\u200b<code>create-validator</code>\u200b\u4ea4\u6613\u200b\u4f86\u200b\u8072\u660e\u200b\u5176\u6210\u200b\u70ba\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u610f\u5716\u200b\u3002 \u200b\u5f9e\u200b\u90a3\u88e1\u200b\uff0c\u200b\u4ed6\u5011\u200b\u6210\u70ba\u9a57\u200b\u8b49\u5668\u200b\u3002\u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u6b0a\u91cd\u200b\uff08\u200b\u5373\u200b\u7e3d\u6b0a\u76ca\u200b\u6216\u200b\u6295\u7968\u200b\u6b0a\u200b\uff09\u200b\u6c7a\u5b9a\u200b\u4e86\u200b\u5b83\u200b\u662f\u5426\u662f\u200b\u4e00\u500b\u200b\u6d3b\u8e8d\u7684\u9a57\u200b\u8b49\u5668\u200b\uff0c\u200b\u4e5f\u200b\u6c7a\u5b9a\u200b\u4e86\u200b\u8a72\u200b\u7bc0\u9ede\u200b\u63d0\u51fa\u200b\u5340\u584a\u200b\u7684\u200b\u983b\u7387\u200b\u4ee5\u53ca\u200b\u5b83\u5c07\u200b\u7372\u5f97\u200b\u591a\u5c11\u200b\u6536\u76ca\u200b\u3002</p> <p>\u200b\u6700\u521d\u200b\uff0c\u200b\u53ea\u6709\u200b\u6b0a\u91cd\u200b\u6700\u9ad8\u200b\u7684\u200b\u524d\u200b 150 \u200b\u500b\u9a57\u200b\u8b49\u5668\u200b\u624d\u200b\u662f\u200b\u6d3b\u8e8d\u7684\u9a57\u200b\u8b49\u5668\u200b\u3002\u200b\u5982\u679c\u200b\u9a57\u8b49\u5668\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\u6216\u200b\u7d93\u5e38\u200b\u96e2\u7dda\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5c07\u5192\u8457\u200b\u88ab\u200b\u62b5\u62bc\u200b\u7684\u200b\u4ee3\u5e63\u200b\uff08\u200b\u5305\u62ec\u200b\u7528\u6236\u59d4\u200b\u8a17\u200b\u7684\u200b NXN\uff09\u200b\u88ab\u200b\u5354\u8b70\u200b`\u200b\u7f70\u200b\u6c92\u200b`\u200b\u7684\u200b\u98a8\u96aa\u200b\uff0c\u200b\u4ee5\u200b\u61f2\u7f70\u200b\u758f\u5ffd\u200b\u548c\u200b\u4e0d\u200b\u7576\u884c\u200b\u70ba\u200b\u3002</p> \u200b\u4ec0\u9ebc\u200b\u662f\u200b\u5168\u7bc0\u9ede\u200b? <p>\u200b\u5168\u7bc0\u9ede\u200b\u662f\u200b\u4e00\u500b\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5b8c\u5168\u200b\u9a57\u8b49\u5340\u200b\u584a\u200b\u93c8\u200b\u7684\u200b\u4ea4\u6613\u200b\u548c\u200b\u5340\u584a\u200b\u3002\u200b\u5b83\u200b\u4e0d\u540c\u200b\u65bc\u200b\u50c5\u8655\u200b\u7406\u5340\u584a\u982d\u200b\u548c\u200b\u4e00\u5c0f\u90e8\u5206\u200b\u4ea4\u6613\u200b\u7684\u200b\u8f15\u578b\u200b\u5ba2\u6236\u200b\u7aef\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u904b\u884c\u200b\u4e00\u500b\u200b\u5b8c\u6574\u200b\u7684\u200b\u7bc0\u9ede\u200b\u9700\u8981\u200b\u6bd4\u8f15\u200b\u5ba2\u6236\u200b\u7aef\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u8cc7\u6e90\u200b\uff0c\u200b\u4f46\u200b\u9019\u662f\u200b\u6210\u70ba\u9a57\u200b\u8b49\u5668\u200b\u6240\u200b\u5fc5\u9700\u200b\u7684\u200b\u3002</p> <p>\u200b\u5728\u200b\u5be6\u8e10\u200b\u4e2d\u200b\uff0c\u200b\u904b\u884c\u200b\u5168\u7bc0\u200b\u9ede\u50c5\u200b\u610f\u5473\u8457\u200b\u904b\u884c\u200b\u672a\u59a5\u200b\u5354\u4e14\u200b\u6700\u65b0\u200b\u7248\u672c\u200b\u7684\u200b\u8edf\u4ef6\u200b\uff0c\u200b\u5177\u6709\u200b\u4f4e\u200b\u7db2\u7d61\u200b\u5ef6\u9072\u4e14\u200b\u4e0d\u6703\u200b\u505c\u6a5f\u200b\u3002\u200b\u7576\u7136\u200b\uff0c\u200b\u4efb\u4f55\u200b\u7528\u6236\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u4e26\u9f13\u52f5\u200b\u4ed6\u5011\u200b\u904b\u884c\u200b\u5b8c\u6574\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u5373\u4f7f\u200b\u4ed6\u5011\u200b\u4e0d\u200b\u6253\u7b97\u200b\u6210\u70ba\u9a57\u200b\u8b49\u5668\u200b\u3002</p> \u200b\u4ec0\u9ebc\u200b\u662f\u200bpos\u200b\u59d4\u200b\u8a17\u200b? <p>\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u662f\u200b NXN \u200b\u6301\u6709\u8005\u200b\uff0c\u200b\u4ed6\u5011\u200b\u4e0d\u80fd\u200b\u6216\u200b\u4e0d\u60f3\u200b\u81ea\u5df1\u200b\u904b\u884c\u9a57\u200b\u8b49\u5668\u200b\u64cd\u4f5c\u200b\u3002\u3002 \u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u5c07\u200b NXN \u200b\u59d4\u200b\u8a17\u200b\u7d66\u9a57\u200b\u8b49\u5668\u200b\u4e26\u7372\u200b\u5f97\u200b\u5176\u200b\u90e8\u5206\u200b\u6536\u5165\u200b\u4f5c\u70ba\u200b\u4ea4\u63db\u200b\uff08\u200b\u6709\u95dc\u200b\u6536\u5165\u200b\u5982\u4f55\u200b\u5206\u914d\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u53c3\u95b1\u200b\u4e0b\u9762\u200b\u7684\u200b\u8cea\u62bc\u200b\u7684\u200b\u52d5\u6a5f\u200b\u662f\u200b\u4ec0\u9ebc\u200b\uff1f \u200b\u548c\u200b \u200b\u4ec0\u9ebc\u200b\u662f\u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u4f63\u91d1\u200b\uff1f\u200b\u90e8\u5206\u200b\uff09\u3002</p> <p>\u200b\u56e0\u70ba\u200b\u4ed6\u5011\u200b\u8207\u200b\u4ed6\u5011\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u5206\u4eab\u200b\u6536\u5165\u200b\uff0c\u200b\u6240\u4ee5\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4e5f\u200b\u5206\u200b\u64d4\u8cac\u4efb\u200b\u3002\u200b\u5982\u679c\u200b\u9a57\u8b49\u5668\u200b\u884c\u70ba\u200b\u4e0d\u7576\u200b\uff0c\u200b\u5176\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u90fd\u200b\u5c07\u6839\u64da\u200b\u4ed6\u5011\u200b\u7684\u200b\u80a1\u4efd\u200b\u6bd4\u4f8b\u200b\u88ab\u200b\u90e8\u5206\u200b\u524a\u6e1b\u200b\u3002\u200b\u9019\u200b\u5c31\u662f\u200b\u70ba\u200b\u4ec0\u9ebc\u59d4\u200b\u8a17\u200b\u4eba\u200b\u61c9\u8a72\u200b\u5728\u200b\u59d4\u200b\u8a17\u200b\u4e4b\u524d\u200b\u5c0d\u9a57\u200b\u8b49\u4eba\u200b\u9032\u884c\u200b\u76e1\u8077\u200b\u8abf\u67e5\u200b\uff0c\u200b\u4e26\u901a\u200b\u904e\u5c07\u200b\u4ed6\u5011\u200b\u7684\u200b\u80a1\u4efd\u200b\u5206\u6563\u200b\u5230\u200b\u591a\u500b\u9a57\u200b\u8b49\u4eba\u4f86\u200b\u5be6\u73fe\u200b\u591a\u5143\u5316\u200b\u3002</p> <p>\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5728\u200b\u7cfb\u7d71\u200b\u4e2d\u200b\u626e\u6f14\u200b\u8457\u95dc\u9375\u200b\u89d2\u8272\u200b\uff0c\u200b\u56e0\u70ba\u200b\u4ed6\u5011\u200b\u8ca0\u8cac\u200b\u9078\u64c7\u9a57\u200b\u8b49\u5668\u200b\u3002\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u4f5c\u70ba\u59d4\u200b\u8a17\u200b\u4eba\u4e26\u200b\u4e0d\u662f\u200b\u4e00\u500b\u200b\u88ab\u52d5\u200b\u7684\u200b\u89d2\u8272\u200b\u3002 \u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6709\u7fa9\u52d9\u200b\u4fdd\u6301\u8b66\u60d5\u200b\u4e26\u7a4d\u200b\u6975\u76e3\u200b\u63a7\u5176\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u884c\u70ba\u200b\uff0c\u200b\u5982\u679c\u200b\u4ed6\u5011\u200b\u672a\u80fd\u200b\u8ca0\u8cac\u4efb\u200b\u5730\u200b\u63a1\u53d6\u200b\u884c\u52d5\u200b\uff0c\u200b\u5247\u9032\u200b\u884c\u5207\u63db\u200b\u3002</p>"},{"location":"gateway/faq/#_2","title":"\u6210\u70ba\u9a57\u200b\u8b49\u5668","text":"\u5982\u4f55\u200b\u6210\u70ba\u9a57\u200b\u8b49\u5668\u200b? <p> \u200b\u7db2\u7d61\u200b\u4e2d\u200b\u7684\u200b\u4efb\u4f55\u200b\u53c3\u8207\u8005\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u5275\u5efa\u9a57\u200b\u8b49\u5668\u200b\u4e26\u200b\u8a3b\u200b\u518a\u200b\u5176\u200b\u9a57\u200b\u8b49\u200b\u5668\u200b\u8cc7\u200b\u6599\u200b\u4f86\u200b\u8868\u660e\u200b\u4ed6\u5011\u200b\u6210\u70ba\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u610f\u5716\u200b\u3002 \u200b\u70ba\u200b\u6b64\u200b\uff0c\u200b\u5019\u9078\u4eba\u200b\u5ee3\u64ad\u200b\u4e00\u500b\u200b<code>create-validator</code>\u200b\u4ea4\u6613\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5fc5\u9808\u200b\u5728\u200b\u5176\u4e2d\u200b\u63d0\u4ea4\u200b\u4ee5\u4e0b\u200b\u4fe1\u606f\u200b\uff1a <ul> <li>Validator's PubKey: \u200b\u9a57\u8b49\u5668\u200b\u904b\u71df\u5546\u200b\u53ef\u4ee5\u200b\u6709\u200b\u4e0d\u540c\u200b\u7684\u200b\u8cec\u6236\u200b\u4f86\u9a57\u8b49\u200b\u548c\u200b\u6301\u6709\u200b\u6d41\u52d5\u200b\u8cc7\u91d1\u200b\u3002</li> \u200b\u63d0\u4ea4\u200b\u7684\u200b PubKey \u200b\u5fc5\u9808\u200b\u8207\u9a57\u200b\u8b49\u5668\u200b\u6253\u7b97\u200b\u7c3d\u7f72\u200b prevotes \u200b\u548c\u200b precommits \u200b\u7684\u200b\u79c1\u200b\u9470\u200b\u76f8\u95dc\u806f\u200b\u3002 <li>Validator's Address: dstvaloper1- \u200b\u5730\u5740\u200b\u3002\u200b\u9019\u662f\u200b\u7528\u200b\u65bc\u200b\u516c\u958b\u8b58\u5225\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u5730\u5740\u200b\u3002 \u200b\u8207\u200b\u6b64\u200b\u5730\u5740\u200b\u95dc\u806f\u200b\u7684\u200b\u79c1\u200b\u9470\u7528\u200b\u65bc\u200b\u7d81\u5b9a\u200b\u3001\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u548c\u200b\u9818\u53d6\u200b\u734e\u52f5\u200b\u3002</li> <li>Validator's name (\u200b\u4e5f\u200b\u7a31\u200b\u70ba\u200b \u200b\u7dbd\u865f\u200b)</li> <li>Validator's website(\u200b\u9078\u586b\u200b)</li> <li>Validator's description (\u200b\u9078\u586b\u200b)</li> <li>Initial commission rate: \u200b\u5340\u584a\u200b\u734e\u52f5\u200b\u548c\u200b\u5411\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6536\u53d6\u200b\u7684\u200b\u8cbb\u7528\u200b.</li> <li>Maximum commission: \u200b\u8a72\u9a57\u200b\u8b49\u5668\u5c07\u200b\u88ab\u200b\u5141\u8a31\u200b\u6536\u53d6\u200b\u7684\u200b\u6700\u9ad8\u200b\u4f63\u91d1\u200b\u7387\u200b\u3002</li> <li>Commission change rate: \u200b\u9a57\u8b49\u5668\u200b\u4f63\u91d1\u200b\u7684\u200b\u6bcf\u65e5\u200b\u6700\u5927\u200b\u589e\u5e45\u200b\u3002</li> <li>Minimum self-bond amount: \u200b\u9a57\u8b49\u5668\u200b\u9700\u8981\u200b\u59cb\u7d42\u200b\u7d81\u5b9a\u200b\u7684\u200b\u6700\u5c0f\u200b NXN \u200b\u6578\u91cf\u200b\u3002\u200b\u5982\u679c\u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u81ea\u200b\u62b5\u62bc\u200b\u8cea\u62bc\u200b\u4f4e\u200b\u65bc\u200b\u6b64\u200b\u9650\u5236\u200b\uff0c\u200b\u5176\u200b\u6574\u500b\u200b\u8cea\u62bc\u200b\u6c60\u5c07\u200b\u88ab\u200b\u89e3\u9664\u200b\u62b5\u62bc\u200b\u3002</li> <li>Initial self-bond amount: \u200b\u9a57\u8b49\u5668\u200b\u60f3\u8981\u200b\u81ea\u6211\u200b\u7d81\u5b9a\u200b\u7684\u200b\u521d\u59cb\u200b NXN \u200b\u6578\u91cf\u200b\u3002</li> </ul> <pre><code>stcd tx staking create-validator\n--pubkey dstvalconspub1zcjduepqs5s0vddx5m65h5ntjzwd0x8g3245rgrytpds4ds7vdtlwx06mcesmnkzly\n--amount \"20000000000nxn\"\n--from tmp\n--commission-rate=\"0.20\"\n--commission-max-rate=\"1.00\"\n--commission-max-change-rate=\"0.01\"\n--min-self-delegation \"10000000\"\n--moniker \"validator\"\n--chain-id \"daodst_7777-1\"\n--gas auto\n--node tcp://127.0.0.1:26657\n</code></pre> </p> <p> \ud83d\udea8 \u200b\u5371\u9669\u200b: \u200b\u4e0d\u8981\u200b \u200b\u4f7f\u7528\u200btest\u200b\u4f5c\u70ba\u200b keyring \u200b\u5f8c\u200b\u7aef\u200b\u4f86\u200b\u5275\u5efa\u200b\u60a8\u200b\u7684\u200b\u4e3b\u7db2\u9a57\u200b\u8b49\u5668\u200b\u5bc6\u200b\u9470\u200b\u3002 \u200b\u9019\u6a23\u200b\u505a\u200b\u53ef\u80fd\u200b\u6703\u5c0e\u81f4\u200b\u8cc7\u91d1\u200b\u640d\u5931\u200b\uff0c\u200b\u56e0\u70ba\u200b\u60a8\u200b\u7684\u200b\u8cc7\u91d1\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b <code>eth_sendTransaction</code> JSON-RPC \u200b\u7aef\u9ede\u200b\u9060\u7a0b\u200b\u8a2a\u554f\u200b\u3002 </p> <p> \u200b\u4e00\u65e6\u200b\u5275\u5efa\u200b\u4e26\u200b\u8a3b\u200b\u518a\u200b\u4e86\u200b\u9a57\u200b\u8b49\u200b\u5668\u200b\uff0cNXN \u200b\u6301\u6709\u8005\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u5c07\u200b NXN \u200b\u59d4\u200b\u8a17\u200b\u7d66\u5b83\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u6709\u6548\u200b\u5730\u5411\u200b\u5176\u6c60\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u80a1\u4efd\u200b\u3002 \u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u7e3d\u8cea\u200b\u62bc\u91cf\u200b\u662f\u200b\u9a57\u8b49\u5668\u200b\u904b\u71df\u8005\u200b\u81ea\u200b\u62b5\u62bc\u200b\u7684\u200b NXN \u200b\u548c\u200b\u5916\u200b\u90e8\u59d4\u200b\u8a17\u200b\u4eba\u200b\u62b5\u62bc\u200b\u7684\u200b NXN \u200b\u7684\u200b\u7e3d\u200b\u548c\u200b\u3002 </p> <p> \u200b\u53ea\u6709\u200b\u6301\u6709\u200b\u6700\u200b\u591a\u200b\u80a1\u4efd\u200b\u7684\u200b\u524d\u200b 150 \u200b\u540d\u9a57\u200b\u8b49\u5668\u200b\u624d\u200b\u88ab\u200b\u8996\u70ba\u200b\u6d3b\u8e8d\u9a57\u200b\u8b49\u5668\u200b\uff0c\u200b\u6210\u70ba\u200b \u200b\u7d81\u5b9a\u9a57\u200b\u8b49\u5668\u200b\u3002\u200b\u5982\u679c\u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u7e3d\u6b0a\u76ca\u200b\u4f4e\u200b\u65bc\u200b\u524d\u200b 150\uff0c\u200b\u9a57\u8b49\u200b\u5668\u5c07\u200b\u5931\u53bb\u200b\u5176\u9a57\u200b\u8b49\u5668\u200b\u7279\u6b0a\u200b\uff08\u200b\u610f\u5473\u8457\u200b\u5b83\u200b\u4e0d\u6703\u7522\u751f\u200b\u734e\u52f5\u200b\uff09\u200b\u4e26\u4e14\u200b\u4e0d\u518d\u200b\u4f5c\u70ba\u200b\u6d3b\u52d5\u96c6\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff08\u200b\u5373\u200b\u4e0d\u200b\u53c3\u8207\u5171\u8b58\u200b\uff09\uff0c\u200b\u8f38\u5165\u200b \u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u6a21\u5f0f\u200b\u4e26\u6700\u7d42\u200b\u8b8a\u70ba\u200b \u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u3002 </p>"},{"location":"gateway/faq/#_3","title":"\u9a57\u8b49\u5668\u200b\u5bc6\u200b\u9470\u200b\u548c\u200b\u72c0\u614b","text":"\u6709\u200b\u54ea\u4e9b\u200b\u4e0d\u540c\u200b\u985e\u578b\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b? <p>\u200b\u7c21\u200b\u800c\u8a00\u200b\u4e4b\u200b\uff0c\u200b\u6709\u200b\u5169\u7a2e\u200b\u985e\u578b\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\uff1a</p> <ul> <li>Tendermint \u200b\u5bc6\u94a5\u200b\uff1a\u200b\u9019\u662f\u200b\u7528\u200b\u65bc\u200b\u5c0d\u200b\u584a\u200b\u54c8\u5e0c\u200b\u9032\u884c\u200b\u7c3d\u540d\u200b\u7684\u200b\u552f\u4e00\u200b\u5bc6\u9470\u200b\u3002\u200b\u5b83\u200b\u8207\u200b\u516c\u9470\u200b\u76f8\u95dc\u806f\u200b <code>dstvalconspub</code>\u3002 <ul> <li>\u200b\u5728\u200b\u4f7f\u7528\u200b <code>stcd init</code> \u200b\u5275\u5efa\u7bc0\u200b\u9ede\u6642\u200b\u751f\u6210\u200b\u3002</li> <li>\u200b\u4f7f\u7528\u200b <code>stcd tendermint show-validator</code>\u200b\u7372\u53d6\u200b\u6b64\u503c\u200b,\u200b\u4f8b\u5982\u200b<code>dstvalconspub1zcjduc3qcyj09qc03elte23zwshdx92jm6ce88fgc90rtqhjx8v0608qh5ssp0w94c</code></li> </ul> </li> <li>\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5bc6\u9470\u200b\uff1a\u200b\u9019\u4e9b\u200b\u5bc6\u200b\u9470\u200b\u662f\u200b\u5f9e\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5275\u5efa\u200b\u7684\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\u3002\u200b\u4f5c\u70ba\u9a57\u200b\u8b49\u5668\u200b\uff0c\u200b\u60a8\u200b\u53ef\u80fd\u200b\u6703\u200b\u4f7f\u7528\u200b\u4e00\u500b\u200b\u5bc6\u200b\u9470\u4f86\u200b\u7c3d\u7f72\u200b\u8207\u200b staking \u200b\u76f8\u95dc\u200b\u7684\u200b\u4ea4\u6613\u200b\uff0c\u200b\u800c\u200b\u53e6\u200b\u4e00\u500b\u200b\u5bc6\u200b\u9470\u4f86\u200b\u7c3d\u7f72\u200b\u8207\u200b oracle \u200b\u76f8\u95dc\u200b\u7684\u200b\u4ea4\u6613\u200b\u4ea4\u6613\u200b\u3002\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5bc6\u200b\u9470\u200b\u8207\u200b\u516c\u9470\u200b <code>dstpub-</code> \u200b\u548c\u200b\u5730\u5740\u200b<code>dst-</code>\u200b\u76f8\u95dc\u806f\u200b\u3002\u200b\u5169\u8005\u200b\u90fd\u200b\u6e90\u81ea\u200b<code>stcd keys add</code>\u200b\u751f\u6210\u200b\u7684\u200b\u5e33\u6236\u200b\u5bc6\u200b\u9470\u200b\u3002</li> </ul> <p> \u26a0\ufe0f\u200b\u6ce8\u610f\u200b: \u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u64cd\u4f5c\u200b\u54e1\u5bc6\u200b\u9470\u200b\u76f4\u63a5\u200b\u7d81\u5b9a\u200b\u5230\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5bc6\u9470\u200b\uff0c\u200b\u4f46\u50c5\u200b\u70ba\u200b\u6b64\u200b\u76ee\u7684\u200b\u4f7f\u7528\u200b\u4fdd\u7559\u200b\u524d\u7db4\u200b\uff1a<code>dstvaloper</code> \u200b\u548c\u200b<code>dstvaloperpub</code> </p> \u200b\u9a57\u8b49\u5668\u200b\u53ef\u4ee5\u200b\u8655\u200b\u65bc\u200b\u54ea\u4e9b\u200b\u4e0d\u540c\u200b\u72c0\u614b\u200b? <p>\u200b\u4f7f\u7528\u200b create-validator \u200b\u4e8b\u52d9\u200b\u5275\u5efa\u9a57\u200b\u8b49\u5668\u200b\u5f8c\u200b\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u8655\u200b\u65bc\u200b\u4e09\u7a2e\u200b\u72c0\u614b\u200b\uff1a</p> <ul> <li>bonded\uff1a\u200b\u9a57\u8b49\u5668\u200b\u5728\u200b\u6d3b\u52d5\u200b\u96c6\u4e2d\u200b\u4e26\u53c3\u200b\u8207\u200b\u5171\u8b58\u200b\u3002\u200b\u9a57\u8b49\u5668\u200b\u6b63\u5728\u200b\u7372\u5f97\u200b\u734e\u52f5\u200b\uff0c\u200b\u4e26\u200b\u53ef\u80fd\u200b\u56e0\u4e0d\u7576\u884c\u200b\u70ba\u200b\u800c\u200b\u88ab\u200b\u524a\u6e1b\u200b\u3002</li> <li>unbonding\uff1a\u200b\u9a57\u8b49\u5668\u200b\u4e0d\u200b\u5728\u200b\u6d3b\u8e8d\u200b\u96c6\u4e2d\u200b\uff0c\u200b\u4e0d\u53c3\u200b\u8207\u200b\u5171\u8b58\u200b\u3002 \u200b\u9a57\u8b49\u5668\u200b\u6c92\u6709\u200b\u7372\u5f97\u200b\u734e\u52f5\u200b\uff0c\u200b\u4f46\u200b\u4ecd\u200b\u53ef\u80fd\u200b\u56e0\u4e0d\u7576\u884c\u200b\u70ba\u200b\u800c\u200b\u88ab\u200b\u524a\u6e1b\u200b\u3002\u200b\u9019\u662f\u200b\u5f9e\u200b \u200b\u7d81\u5b9a\u200b \u200b\u5230\u200b \u200b\u672a\u200b\u7d81\u5b9a\u200b \u200b\u7684\u200b\u904e\u6e21\u200b\u72c0\u614b\u200b\u3002\u200b\u5982\u679c\u200b\u9a57\u8b49\u5668\u200b\u5728\u200b \u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b \u200b\u6a21\u5f0f\u200b\u4e0b\u672a\u200b\u767c\u9001\u200b rebond \u200b\u4ea4\u6613\u200b\uff0c\u200b\u5247\u200b\u9700\u8981\u200b\u5169\u9031\u200b\u6642\u9593\u200b\u624d\u80fd\u200b\u5b8c\u6210\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u3002</li> <li>unbonded\uff1a\u200b\u9a57\u8b49\u5668\u200b\u4e0d\u200b\u5728\u200b\u6d3b\u52d5\u200b\u96c6\u4e2d\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e0d\u200b\u7c3d\u7f72\u200b\u5340\u584a\u200b\u3002 \u200b\u672a\u200b\u7d81\u5b9a\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u4e0d\u80fd\u200b\u88ab\u200b\u524a\u6e1b\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u6703\u200b\u5f9e\u200b\u4ed6\u5011\u200b\u7684\u200b\u64cd\u4f5c\u200b\u4e2d\u7372\u200b\u5f97\u200b\u4efb\u4f55\u200b\u734e\u52f5\u200b\u3002\u200b\u4ecd\u7136\u200b\u53ef\u4ee5\u200b\u5c07\u200b NXN \u200b\u59d4\u200b\u8a17\u200b\u7d66\u8a72\u200b\u9a57\u8b49\u5668\u200b\u3002 \u200b\u4ece\u200b\u4e00\u4e2a\u200b <code>unbonded</code> \u200b\u9a57\u8b49\u5668\u200b\u4e2d\u200b\u53d6\u6d88\u200b\u59d4\u200b\u8a17\u200b\u662f\u200b\u7acb\u5373\u200b\u7684\u200b\u3002\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u8207\u200b\u4ed6\u5011\u200b\u7684\u200b\u9a57\u8b49\u200b\u4eba\u200b\u5177\u6709\u200b\u76f8\u540c\u200b\u7684\u200b\u72c0\u614b\u200b\u3002</li> </ul> \u26a0\ufe0f\u200b\u6ce8\u610f\u200b: \u200b\u59d4\u200b\u8a17\u200b\u4e0d\u200b\u4e00\u5b9a\u200b\u662f\u200b\u7d81\u5b9a\u200b\u7684\u200b\u3002 NXN \u200b\u53ef\u4ee5\u200b\u662f\u200b\u59d4\u200b\u8a17\u200b\u548c\u200b\u7d81\u5b9a\u200b\u3001\u200b\u59d4\u200b\u8a17\u200b\u548c\u200b\u975e\u200b\u7d81\u5b9a\u200b\u3001\u200b\u59d4\u200b\u8a17\u200b\u548c\u200b\u975e\u200b\u7d81\u5b9a\u200b\u6216\u200b\u6d41\u52d5\u6027\u200b\u3002  \u200b\u4ec0\u9ebc\u200b\u662f\u200b\"\u200b\u81ea\u6211\u200b\u62b5\u62bc\u200b\"?\u200b\u5982\u4f55\u200b\u589e\u52a0\u200b\u6211\u200b\u7684\u200b\"\u200b\u81ea\u6211\u200b\u62b5\u62bc\u200b\"? <p> \u200b\u9a57\u8b49\u5668\u200b\u904b\u71df\u8005\u200b\u7684\u200b \u200b\u81ea\u6211\u200b\u62b5\u62bc\u200b \u200b\u662f\u200b\u6307\u59d4\u200b\u8a17\u200b\u7d66\u200b\u81ea\u5df1\u200b\u7684\u200b NXN \u200b\u8cea\u62bc\u91cf\u200b\u3002\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u901a\u904e\u5c07\u200b\u66f4\u200b\u591a\u200b NXN \u200b\u59d4\u200b\u8a17\u200b\u7d66\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u5e33\u6236\u200b\u4f86\u200b\u589e\u52a0\u200b\u60a8\u200b\u7684\u200b\u81ea\u6211\u200b\u62b5\u62bc\u200b\u3002 </p> \u200b\u6709\u200b\u6e2c\u8a66\u200b\u7db2\u6c34\u9f8d\u982d\u200b\u55ce\u200b? <p> \u200b\u5982\u679c\u200b\u60a8\u200b\u60f3\u200b\u7372\u5f97\u200b\u6e2c\u8a66\u200b\u7db2\u7684\u5e63\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b \u200b\u6c34\u9f8d\u982d\u200b </p> \u200b\u662f\u5426\u200b\u6709\u200b\u6700\u4f4e\u200b\u6578\u91cf\u200b\u7684\u200b NXN \u200b\u5fc5\u9808\u200b\u62b5\u62bc\u200b\u624d\u80fd\u200b\u6210\u70ba\u200b\u6d3b\u8e8d\u7684\u200b\uff08\u200b\u7d81\u5b9a\u200b\u7684\u200b\uff09\u200b\u9a57\u8b49\u5668\u200b\uff1f <p> \u200b\u6c92\u6709\u200b\u6700\u4f4e\u200b\u9650\u5ea6\u200b\u3002\u200b\u7e3d\u6b0a\u76ca\u200b\u6700\u9ad8\u200b\u7684\u200b\u524d\u200b 150 \u200b\u500b\u9a57\u200b\u8b49\u5668\u200b\uff08\u200b\u5176\u4e2d\u200b<code>total stake = self-bonded stake + delegators stake</code>) \u200b\u662f\u200b\u6d3b\u8e8d\u7684\u9a57\u200b\u8b49\u5668\u200b\u3002 </p> \u200b\u59d4\u200b\u8a17\u200b\u4eba\u5c07\u200b\u5982\u4f55\u200b\u9078\u64c7\u200b\u4ed6\u5011\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\uff1f <p> \u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u53ef\u4ee5\u200b\u6839\u64da\u200b\u81ea\u5df1\u200b\u7684\u200b\u4e3b\u89c0\u200b\u6a19\u6e96\u200b\u81ea\u7531\u200b\u9078\u64c7\u9a57\u200b\u8b49\u4eba\u200b\u3002\u200b\u4e5f\u200b\u5c31\u662f\u200b\u8aaa\u200b\uff0c\u200b\u9810\u8a08\u200b\u91cd\u8981\u200b\u7684\u200b\u6a19\u6e96\u200b\u5305\u62ec\u200b\uff1a </p> <ul> <li>\u200b\u81ea\u7d81\u5b9a\u200b NXN \u200b\u7684\u200b\u6578\u91cf\u200b\uff1a\u200b\u9a57\u8b49\u5668\u200b\u81ea\u7d81\u200b\u5b9a\u5230\u200b\u5176\u8cea\u200b\u62bc\u6c60\u200b\u7684\u200b NXN \u200b\u6578\u91cf\u200b\u3002\u200b\u64c1\u6709\u200b\u66f4\u200b\u591a\u200b\u81ea\u200b\u7d81\u5b9a\u200b NXN \u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u5728\u200b\u904a\u6232\u200b\u4e2d\u200b\u64c1\u6709\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u76ae\u819a\u200b\uff0c\u200b\u4f7f\u200b\u5176\u200b\u5c0d\u200b\u5176\u884c\u200b\u70ba\u200b\u627f\u64d4\u200b\u66f4\u200b\u591a\u8cac\u4efb\u200b\u3002</li> <li>\u200b\u59d4\u6258\u200b\u7684\u200b NXN \u200b\u6578\u91cf\u200b\uff1a\u200b\u59d4\u200b\u8a17\u200b\u7d66\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b NXN \u200b\u7e3d\u6578\u200b\u3002\u200b\u9ad8\u200b stake \u200b\u8868\u660e\u200b\u793e\u5340\u200b\u4fe1\u4efb\u200b\u9019\u500b\u9a57\u200b\u8b49\u5668\u200b\uff0c\u200b\u4f46\u200b\u4e5f\u200b\u610f\u5473\u8457\u200b\u9019\u500b\u9a57\u200b\u8b49\u5668\u200b\u662f\u200b\u9ed1\u5ba2\u200b\u66f4\u5927\u200b\u7684\u200b\u76ee\u6a19\u200b\u3002\u200b\u96a8\u8457\u59d4\u200b\u8a17\u200b NXN \u200b\u6578\u91cf\u200b\u7684\u200b\u589e\u9577\u200b\uff0c\u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u5438\u5f15\u529b\u200b\u9810\u8a08\u6703\u200b\u8d8a\u4f86\u200b\u8d8a\u200b\u4f4e\u200b\u3002\u200b\u66f4\u5927\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u4e5f\u200b\u6703\u200b\u589e\u52a0\u200b\u7db2\u7d61\u200b\u7684\u200b\u4e2d\u5fc3\u5316\u200b\u7a0b\u5ea6\u200b\u3002</li> <li>\u200b\u4f63\u91d1\u200b\u7387\u200b\uff1a\u200b\u9a57\u8b49\u5668\u200b\u5728\u5c07\u200b\u6536\u5165\u200b\u5206\u914d\u200b\u7d66\u4ed6\u200b\u5011\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4e4b\u524d\u200b\u5c0d\u200b\u6536\u5165\u200b\u61c9\u7528\u200b\u7684\u200b\u4f63\u91d1\u200b</li> <li>\u200b\u8ddf\u8e2a\u200b\u8a18\u9304\u200b\uff1a\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u53ef\u80fd\u200b\u6703\u200b\u67e5\u770b\u200b\u4ed6\u5011\u200b\u8a08\u5283\u59d4\u200b\u8a17\u200b\u7d66\u7684\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u8ddf\u8e2a\u200b\u8a18\u9304\u200b\u3002\u200b\u9019\u200b\u5305\u62ec\u200b\u8cc7\u6b77\u200b\u3001\u200b\u904e\u53bb\u200b\u5c0d\u200b\u63d0\u6848\u200b\u7684\u200b\u6295\u7968\u200b\u3001\u200b\u6b77\u53f2\u200b\u5e73\u5747\u200b\u6b63\u5e38\u200b\u904b\u884c\u200b\u6642\u9593\u200b\u4ee5\u53ca\u200b\u7bc0\u9ede\u200b\u88ab\u200b\u7834\u58de\u200b\u7684\u200b\u983b\u7387\u200b\u3002</li> </ul> <p> \u200b\u9664\u4e86\u200b\u9019\u4e9b\u200b\u6a19\u6e96\u200b\u4e4b\u5916\u200b\uff0c\u200b\u9a57\u8b49\u200b\u5668\u9084\u200b\u53ef\u4ee5\u200b\u63d0\u4f9b\u200b\u4e00\u500b\u200b\u7db2\u7ad9\u200b\u5730\u5740\u200b\u4f86\u200b\u5b8c\u6210\u200b\u4ed6\u5011\u200b\u7684\u200b\u7c21\u6b77\u200b\u3002\u200b\u9a57\u8b49\u5668\u200b\u9700\u8981\u200b\u4ee5\u200b\u67d0\u7a2e\u200b\u65b9\u5f0f\u200b\u5efa\u7acb\u200b\u8072\u8b7d\u200b\u4ee5\u200b\u5438\u5f15\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u9a57\u8b49\u5668\u200b\u8b93\u200b\u7b2c\u4e09\u65b9\u200b\u5be9\u6838\u200b\u4ed6\u5011\u200b\u7684\u200b\u8a2d\u7f6e\u200b\u662f\u200b\u4e00\u500b\u200b\u5f88\u200b\u597d\u200b\u7684\u200b\u505a\u6cd5\u200b\u3002\u200b\u4f46\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0cDST \u200b\u793e\u5340\u200b\u4e0d\u6703\u200b\u81ea\u884c\u200b\u6279\u51c6\u200b\u6216\u200b\u9032\u884c\u200b\u4efb\u4f55\u200b\u5be9\u6838\u200b\u3002 </p>"},{"location":"gateway/faq/#_4","title":"\u8077\u8cac","text":"\u9a57\u8b49\u8005\u200b\u662f\u5426\u200b\u9700\u8981\u200b\u516c\u958b\u200b\u8eab\u4efd\u200b\uff1f <p> \u200b\u4e0d\u200b\uff0c\u200b\u4ed6\u5011\u200b\u6c92\u6709\u200b\u3002\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u5c07\u200b\u6839\u64da\u200b\u81ea\u5df1\u200b\u7684\u200b\u6a19\u6e96\u200b\u8a55\u4f30\u9a57\u200b\u8b49\u8005\u200b\u3002 \u200b\u9a57\u8b49\u8005\u200b\u5c07\u80fd\u5920\u200b\uff08\u200b\u4e26\u88ab\u200b\u5efa\u8b70\u200b\uff09\u200b\u5728\u200b\u4ed6\u5011\u200b\u63d0\u540d\u200b\u81ea\u5df1\u200b\u6642\u200b\u8a3b\u200b\u518a\u200b\u4e00\u200b\u500b\u200b\u7db2\u200b\u7ad9\u200b\u5730\u5740\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u4ed6\u5011\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4ed6\u5011\u200b\u8a8d\u70ba\u200b\u5408\u9069\u200b\u7684\u200b\u6642\u5019\u200b\u5ba3\u50b3\u200b\u4ed6\u5011\u200b\u7684\u200b\u64cd\u4f5c\u200b\u3002 \u200b\u4e00\u4e9b\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u53ef\u80fd\u200b\u66f4\u200b\u559c\u6b61\u200b\u4e00\u500b\u200b\u7db2\u7ad9\u200b\uff0c\u200b\u8a72\u200b\u7db2\u7ad9\u200b\u53ef\u4ee5\u200b\u6e05\u695a\u200b\u5730\u200b\u986f\u793a\u200b\u904b\u884c\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u5718\u968a\u200b\u548c\u200b\u4ed6\u5011\u200b\u7684\u200b\u7c21\u6b77\u200b\uff0c\u200b\u800c\u200b\u5176\u4ed6\u4eba\u200b\u53ef\u80fd\u200b\u66f4\u200b\u559c\u6b61\u200b\u5177\u6709\u200b\u826f\u597d\u200b\u696d\u7e3e\u200b\u8a18\u9304\u200b\u7684\u200b\u533f\u540d\u200b\u9a57\u8b49\u8005\u200b\u3002 \u200b\u8eab\u4efd\u200b\u9a57\u8b49\u8005\u200b\u548c\u200b\u533f\u540d\u200b\u9a57\u8b49\u8005\u200b\u5f88\u200b\u53ef\u80fd\u200b\u6703\u5728\u9a57\u200b\u8b49\u8005\u200b\u96c6\u4e2d\u200b\u5171\u5b58\u200b\u3002 </p> \u200b\u9a57\u8b49\u200b\u4eba\u200b\u7684\u200b\u8077\u8cac\u200b\u662f\u200b\u4ec0\u9ebc\u200b? <p> \u200b\u9a57\u8b49\u8005\u200b\u4ff1\u200b\u6709\u200b\u4e09\u500b\u200b\u4e3b\u8981\u200b\u8077\u8cac\u200b\uff1a  <ul> <li> \u200b\u80fd\u5920\u200b\u6301\u7e8c\u200b\u904b\u884c\u200b\u6b63\u78ba\u200b\u7248\u672c\u200b\u7684\u200b\u8edf\u4ef6\u200b: \u200b\u9a57\u8b49\u8005\u200b\u9700\u8981\u200b\u78ba\u4fdd\u200b\u4ed6\u5011\u200b\u7684\u200b\u670d\u52d9\u5668\u200b\u59cb\u7d42\u200b\u5728\u200b\u7dda\u200b\u4e26\u4e14\u200b\u4ed6\u5011\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\u4e0d\u200b\u88ab\u200b\u6d29\u9732\u200b\u3002</li> <li> \u200b\u5c31\u200b\u793e\u5340\u200b\u6c60\u8cc7\u91d1\u200b\u7684\u200b\u6b63\u78ba\u200b\u90e8\u7f72\u200b\u63d0\u4f9b\u200b\u76e3\u7763\u200b\u548c\u200b\u53cd\u994b\u200b\uff1a Daodst \u200b\u5354\u8b70\u200b\u5305\u62ec\u200b\u4e00\u500b\u200b\u63d0\u6848\u200b\u6cbb\u7406\u200b\u7cfb\u7d71\u200b\uff0c\u200b\u4ee5\u4fc3\u200b\u9032\u5176\u200b\u8ca8\u5e63\u200b\u7684\u200b\u63a1\u7528\u200b\u3002\u200b\u9810\u8a08\u9a57\u200b\u8b49\u8005\u5c07\u200b\u8ffd\u7a76\u200b\u9810\u7b97\u57f7\u200b\u884c\u8005\u200b\u7684\u200b\u8cac\u4efb\u200b\uff0c\u200b\u4ee5\u200b\u63d0\u4f9b\u200b\u900f\u660e\u5ea6\u200b\u548c\u200b\u8cc7\u91d1\u200b\u7684\u200b\u6709\u6548\u200b\u4f7f\u7528\u200b\u3002</li> </ul>  \u200b\u6b64\u5916\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u61c9\u8a72\u200b\u662f\u200b\u793e\u5340\u200b\u7684\u200b\u6d3b\u8e8d\u6210\u54e1\u200b\u3002\u200b\u4ed6\u5011\u200b\u61c9\u8a72\u200b\u59cb\u7d42\u200b\u4e86\u89e3\u200b\u751f\u614b\u200b\u7cfb\u7d71\u200b\u7684\u200b\u7576\u524d\u200b\u72c0\u614b\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u4ed6\u5011\u200b\u53ef\u4ee5\u200b\u8f15\u200b\u9b06\u200b\u9069\u200b\u61c9\u200b\u4efb\u4f55\u200b\u8b8a\u5316\u200b\u3002 </p> \u200b\u8cea\u62bc\u200b\u610f\u5473\u8457\u200b\u4ec0\u9ebc\u200b? <p> \u200b\u8cea\u62bc\u200b NXN \u200b\u53ef\u4ee5\u200b\u88ab\u8996\u200b\u70ba\u9a57\u8b49\u200b\u6d3b\u52d5\u200b\u7684\u200b\u5b89\u5168\u200b\u4fdd\u8b49\u91d1\u200b\u3002\u200b\u7576\u9a57\u200b\u8b49\u8005\u200b\u6216\u59d4\u200b\u8a17\u200b\u4eba\u200b\u60f3\u8981\u200b\u53d6\u56de\u200b\u90e8\u5206\u200b\u6216\u200b\u5168\u90e8\u200b\u8cea\u62bc\u200b\u6642\u200b\uff0c\u200b\u4ed6\u5011\u200b\u6703\u200b\u767c\u9001\u200b\u4e00\u500b\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u7684\u200b\u4ea4\u6613\u200b\u3002\u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u5b58\u6b3e\u200b\u6703\u7d93\u6b77\u200b*\u200b\u5169\u9031\u200b\u7684\u200b\u89e3\u200b\u7d81\u671f\u200b*\uff0c\u200b\u5728\u200b\u6b64\u200b\u671f\u9593\u200b\uff0c\u200b\u4ed6\u5011\u200b\u53ef\u80fd\u200b\u6703\u200b\u56e0\u70ba\u9a57\u200b\u8b49\u8005\u200b\u5728\u200b\u89e3\u7d81\u200b\u904e\u7a0b\u200b\u958b\u59cb\u200b\u524d\u200b\u7684\u200b\u6f5b\u200b\u5728\u200b\u4e0d\u200b\u7576\u884c\u200b\u70ba\u200b\u800c\u200b\u88ab\u200b\u524a\u6e1b\u200b\u3002 </p> \u200b\u9a57\u8b49\u200b\u4eba\u200b\u53ef\u4ee5\u200b\u5e36\u8457\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b NXN \u200b\u9003\u8dd1\u200b\u55ce\u200b\uff1f <p> \u200b\u901a\u904e\u59d4\u200b\u8a17\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\uff0c\u200b\u7528\u6236\u59d4\u200b\u8a17\u200b\u4e86\u200b\u62b5\u62bc\u200b\u6b0a\u200b\u3002\u200b\u9a57\u8b49\u8005\u200b\u64c1\u6709\u200b\u7684\u200b\u62b5\u62bc\u200b\u6b0a\u8d8a\u200b\u591a\u200b\uff0c\u200b\u5b83\u200b\u5728\u200b\u5171\u8b58\u200b\u548c\u200b\u6d41\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u6b0a\u91cd\u200b\u5c31\u200b\u8d8a\u200b\u5927\u200b\u3002 \u200b\u9019\u4e26\u200b\u4e0d\u200b\u610f\u5473\u8457\u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u4fdd\u7ba1\u200b\u5176\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b NXN\u3002 \u200b\u9a57\u8b49\u8005\u7d55\u200b\u4e0d\u80fd\u200b\u5e36\u8457\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u8cc7\u91d1\u200b\u8dd1\u200b\u8def\u200b\u3002  \u200b\u5373\u4f7f\u200b\u59d4\u200b\u8a17\u200b\u8cc7\u91d1\u200b\u4e0d\u80fd\u200b\u88ab\u200b\u4ed6\u5011\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u7aca\u53d6\u200b\uff0c\u200b\u5982\u679c\u200b\u4ed6\u5011\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u884c\u70ba\u200b\u4e0d\u7576\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4ecd\u7136\u200b\u8981\u200b\u627f\u200b\u64d4\u8cac\u4efb\u200b\u3002\u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u80a1\u4efd\u200b\u5c07\u6839\u64da\u200b\u4ed6\u5011\u200b\u7684\u200b\u76f8\u200b\u5c0d\u200b\u80a1\u4efd\u200b\u6bd4\u4f8b\u200b\u88ab\u200b\u90e8\u5206\u200b\u524a\u6e1b\u200b\u3002 </p> \u200b\u591a\u4e45\u200b\u6703\u9078\u64c7\u200b\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b\u4f86\u200b\u63d0\u8b70\u200b\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\uff1f\u200b\u5b83\u6703\u200b\u96a8\u8457\u200b\u62b5\u62bc\u200b\u7684\u200b NXN \u200b\u6578\u91cf\u200b\u589e\u52a0\u200b\u55ce\u200b <p> \u200b\u88ab\u200b\u9078\u4e2d\u4f86\u200b\u6316\u6398\u200b\u4e0b\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u7a31\u200b\u70ba\u200b\u63d0\u8b70\u8005\u200b\uff0c\u200b\u5373\u8a72\u200b\u8f2a\u5171\u8b58\u200b\u4e2d\u200b\u7684\u200b`\u200b\u9818\u5c0e\u8005\u200b`\u201d`\u3002\u200b\u6bcf\u500b\u200b\u63d0\u8b70\u8005\u200b\u90fd\u200b\u662f\u78ba\u200b\u5b9a\u6027\u200b\u5730\u9078\u64c7\u200b\u7684\u200b\uff0c\u200b\u88ab\u200b\u9078\u4e2d\u200b\u7684\u200b\u983b\u7387\u200b\u7b49\u200b\u65bc\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u76f8\u200b\u5c0d\u200b\u7e3d\u6b0a\u76ca\u200b\uff08\u200b\u5176\u4e2d\u200b\u7e3d\u6b0a\u76ca\u200b = \u200b\u81ea\u200b\u62b5\u62bc\u200b\u6b0a\u76ca\u200b + \u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u6b0a\u76ca\u200b\uff09\u3002 \u200b\u4f8b\u5982\u200b\uff0c\u200b\u5982\u679c\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u7e3d\u200b\u62b5\u62bc\u200b\u6b0a\u76ca\u200b\u70ba\u200b 100 NXN\uff0c\u200b\u800c\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u7e3d\u6b0a\u76ca\u200b\u70ba\u200b 10 NXN\uff0c\u200b\u5247\u8a72\u200b\u9a57\u8b49\u8005\u200b\u5c07\u6709\u200b 10% \u200b\u7684\u200b\u6982\u7387\u200b\u88ab\u200b\u9078\u70ba\u200b\u63d0\u8b70\u8005\u200b\u3002  \u200b\u8981\u200b\u4e86\u89e3\u200b\u6709\u95dc\u200b Tendermint BFT \u200b\u5171\u8b58\u200b\u4e2d\u200b\u63d0\u8b70\u8005\u200b\u9078\u64c7\u200b\u904e\u7a0b\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u95b1\u8b80\u200b\u66f4\u200b\u591a\u200b (https://docs.tendermint.com/master/spec/consensus/proposer-selection.html) </p>"},{"location":"gateway/faq/#_5","title":"\u6fc0\u52f5\u200b\u63aa\u65bd","text":"\u8cea\u62bc\u200b\u7684\u200b\u52d5\u6a5f\u200b\u662f\u200b\u4ec0\u9ebc\u200b\uff1f  \u200b\u9a57\u8b49\u8005\u200b\u6b0a\u76ca\u6c60\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u500b\u200b\u6210\u54e1\u200b\u90fd\u200b\u6703\u200b\u7372\u5f97\u200b\u4e0d\u540c\u200b\u985e\u578b\u200b\u7684\u200b\u6536\u5165\u200b:  <p> \u200b\u5340\u584a\u200b\u734e\u52f5\u200b: \u200b\u9a57\u8b49\u5668\u200b\u904b\u884c\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u539f\u751f\u200b\u4ee3\u5e63\u200b\uff08\u200b\u4f8b\u5982\u200b Daodst \u200b\u4e0a\u200b\u7684\u200b NXN\uff09\u200b\u88ab\u200b\u81a8\u8139\u200b\u4ee5\u7522\u751f\u200b \u200b\u584a\u200b\u689d\u6b3e\u200b\u3002 \u200b\u9019\u4e9b\u200b\u689d\u6b3e\u200b\u7684\u200b\u5b58\u5728\u200b\u662f\u200b\u70ba\u200b\u4e86\u200b\u6fc0\u52f5\u200b NXN \u200b\u6301\u6709\u8005\u200b\u7d81\u5b9a\u200b\u4ed6\u5011\u200b\u7684\u200b\u80a1\u4efd\u200b\uff0c\u200b\u56e0\u70ba\u200b\u975e\u200b\u7d81\u5b9a\u200b NXN \u200b\u5c07\u200b \u200b\u96a8\u8457\u200b\u6642\u9593\u200b\u7684\u200b\u63a8\u79fb\u200b\u88ab\u200b\u7a00\u91cb\u200b. </p> <p> \u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b: Daodst \u200b\u7dad\u8b77\u8457\u200b\u4e00\u500b\u200b\u88ab\u200b\u63a5\u53d7\u200b\u70ba\u8cbb\u7528\u200b\u652f\u4ed8\u200b\u7684\u200b\u4ee3\u5e63\u200b\u767d\u540d\u200b\u55ae\u200b\u3002 \u200b\u521d\u59cb\u200b\u8cbb\u7528\u200b\u4ee4\u724c\u200b\u662f\u200b `dst`. <p>  \u200b\u8a72\u200b\u7e3d\u200b\u6536\u5165\u200b\u6839\u64da\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u6b0a\u91cd\u200b\u5206\u914d\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u6b0a\u76ca\u6c60\u200b\u3002 \u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u5728\u200b\u6bcf\u500b\u200b \u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u8cea\u62bc\u6c60\u200b\u6536\u5165\u200b\u6309\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u80a1\u4efd\u200b\u6bd4\u4f8b\u200b\u5206\u914d\u200b\u7d66\u59d4\u200b\u8a17\u200b\u4eba\u200b\u3002 \u200b\u4f63\u91d1\u200b \u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u6536\u5165\u200b\u5728\u200b\u5206\u914d\u200b\u4e4b\u524d\u200b\u7531\u9a57\u200b\u8b49\u8005\u200b\u61c9\u7528\u200b.   \u200b\u904b\u884c\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u52d5\u6a5f\u200b\u662f\u200b\u4ec0\u9ebc\u200b\uff1f  \u200b\u7531\u200b\u65bc\u200b\u4f63\u91d1\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u6bd4\u200b\u4ed6\u5011\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b\u8cfa\u200b\u53d6\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u6536\u5165\u200b\u3002  \u200b\u9a57\u8b49\u8005\u200b\u4e5f\u200b\u5728\u200b\u6cbb\u7406\u200b\u4e2d\u767c\u63ee\u200b\u91cd\u8981\u200b\u4f5c\u7528\u200b\u3002 \u200b\u5982\u679c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4e0d\u200b\u6295\u7968\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5c07\u7e7c\u627f\u200b\u4ed6\u5011\u200b\u7684\u200b\u6295\u7968\u200b\u6b0a\u200b \u200b\u9a57\u8b49\u5668\u200b\u3002 \u200b\u9019\u8ce6\u4e88\u200b\u4e86\u200b\u9a57\u8b49\u8005\u200b\u5728\u200b\u751f\u614b\u200b\u7cfb\u7d71\u200b\u4e2d\u200b\u7684\u200b\u4e3b\u8981\u200b\u8cac\u4efb\u200b.   \u200b\u4ec0\u9ebc\u200b\u662f\u200b\u9a57\u8b49\u8005\u200b\u4f63\u91d1\u200b\uff1f  \u200b\u9a57\u8b49\u8005\u200b\u6c60\u200b\u6536\u5230\u200b\u7684\u200b\u6536\u5165\u200b\u5728\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u5b83\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4e4b\u9593\u200b\u5206\u914d\u200b\u3002 \u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u7533\u8acb\u200b \u200b\u5206\u914d\u200b\u7d66\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u90e8\u5206\u200b\u6536\u5165\u200b\u7684\u200b\u4f63\u91d1\u200b\u3002 \u200b\u8a72\u200b\u4f63\u91d1\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u767e\u5206\u6bd4\u200b\u3002  \u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u81ea\u7531\u200b\u8a2d\u7f6e\u200b\u5176\u200b\u521d\u59cb\u200b\u4f63\u91d1\u200b\u3001\u200b\u6700\u5927\u200b\u6bcf\u65e5\u200b\u4f63\u91d1\u200b\u8b8a\u5316\u7387\u200b\u548c\u200b\u6700\u5927\u200b\u4f63\u91d1\u200b\u3002 Daodst \u200b\u5f37\u5236\u200b\u57f7\u884c\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u5668\u200b\u8a2d\u7f6e\u200b\u7684\u200b\u53c3\u6578\u200b\u3002 \u200b\u9019\u4e9b\u200b\u53c3\u6578\u200b\u53ea\u80fd\u200b\u5728\u200b\u6700\u521d\u200b\u8072\u660e\u200b\u6642\u5b9a\u7fa9\u200b \u200b\u5019\u9078\u200b\u8cc7\u683c\u200b\uff0c\u200b\u4e26\u4e14\u200b\u53ea\u6709\u200b\u5728\u200b\u5ba3\u5e03\u200b\u5f8c\u200b\u624d\u80fd\u200b\u9032\u200b\u4e00\u6b65\u200b\u53d7\u5230\u9650\u5236\u200b\u3002   \u200b\u96c6\u9ad4\u200b\u689d\u6b3e\u200b\u662f\u200b\u5982\u4f55\u200b\u5206\u914d\u200b\u7684\u200b\uff1f <p> \u200b\u5340\u584a\u200b\u689d\u6b3e\u200b\uff08\u200b\u734e\u52f5\u200b\uff09\u200b\u76f8\u5c0d\u200b\u65bc\u200b\u4ed6\u5011\u200b\u7684\u200b\u7e3d\u6b0a\u76ca\u200b\uff08\u200b\u6295\u7968\u200b\u6b0a\u200b\uff09\u200b\u6309\u200b\u6bd4\u4f8b\u200b\u5206\u914d\u200b\u7d66\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u3002 \u200b\u9019\u200b\u610f\u5473\u8457\u200b\u5373\u4f7f\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u901a\u904e\u200b\u6bcf\u9805\u200b\u4f9b\u61c9\u200b\u7372\u5f97\u200b NXN\uff0c\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u4ecd\u5c07\u200b\u4fdd\u6301\u200b\u5e73\u7b49\u200b \u200b\u91cd\u91cf\u200b\u3002 </p> <p> \u200b\u8b93\u200b\u6211\u5011\u200b\u8209\u500b\u200b\u4f8b\u5b50\u200b\uff0c\u200b\u6211\u5011\u200b\u6709\u200b 10 \u200b\u500b\u9a57\u200b\u8b49\u8005\u200b\uff0c\u200b\u4ed6\u5011\u200b\u64c1\u6709\u200b\u76f8\u540c\u200b\u7684\u200b\u62b5\u62bc\u200b\u6b0a\u548c\u200b 1% \u200b\u7684\u200b\u4f63\u91d1\u200b\u7387\u200b\u3002 \u200b\u8b93\u200b\u6211\u5011\u200b\u4e5f\u200b \u200b\u5047\u8a2d\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u4f9b\u200b\u61c9\u91cf\u200b\u662f\u200b 1000 \u200b\u500b\u200b NXN\uff0c\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u6709\u200b 20% \u200b\u7684\u200b\u81ea\u200b\u62b5\u62bc\u200b NXN\u3002 \u200b\u9019\u4e9b\u200b\u4ee3\u5e63\u200b \u200b\u4e0d\u8981\u200b\u76f4\u63a5\u200b\u53bb\u200b\u627e\u200b\u63d0\u8b70\u8005\u200b\u3002 \u200b\u76f8\u53cd\u200b\uff0c\u200b\u5b83\u5011\u200b\u5e73\u5747\u5206\u200b\u4f48\u200b\u5728\u200b\u9a57\u8b49\u8005\u200b\u4e4b\u9593\u200b\u3002 \u200b\u6240\u4ee5\u200b\u73fe\u5728\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u6c60\u200b \u200b\u6709\u200b 100 \u200b\u500b\u200b NXN\u3002 \u200b\u9019\u200b 100 \u200b\u500b\u200b NXN \u200b\u5c07\u6839\u64da\u200b\u6bcf\u500b\u200b\u53c3\u8207\u8005\u200b\u7684\u200b \u200b\u8d28\u62bc\u200b \u200b\u9032\u884c\u200b\u5206\u914d\u200b: </p> <ul> <li>\u200b\u4f63\u91d1\u200b: `100*80%*1% = 0.8 NXN`</li> <li> \u200b\u9a57\u8b49\u8005\u200b\u5f97\u5230\u200b: `100\\*20% + \u200b\u4f63\u91d1\u200b = 20.8 NXN`</li> <li> \u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7372\u5f97\u200b: `100\\*80% - \u200b\u4f63\u91d1\u200b = 79.2 NXN`</li> </ul> \u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u6839\u64da\u200b\u4ed6\u5011\u200b\u5728\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u6b0a\u76ca\u6c60\u200b\u4e2d\u200b\u7684\u200b\u80a1\u4efd\u200b\u6bd4\u4f8b\u200b\uff0c\u200b\u9818\u53d6\u200b 79.2 NXN \u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u4f63\u91d1\u200b\u4e0d\u200b\u9069\u7528\u200b\u65bc\u200b\u5340\u584a\u200b\u689d\u6b3e\u200b\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u5340\u584a\u200b\u734e\u52f5\u200b\u662f\u200b\u6309\u7167\u200b\u76f8\u540c\u200b\u7684\u200b\u6a5f\u5236\u200b\u5206\u767c\u200b\u3002   \u200b\u8cbb\u7528\u200b\u5982\u4f55\u200b\u5206\u914d\u200b\uff1f <p> \u200b\u8cbb\u7528\u200b\u7684\u200b\u5206\u914d\u200b\u65b9\u5f0f\u200b\u985e\u4f3c\u200b\uff0c\u200b\u9664\u4e86\u200b\u5340\u584a\u200b\u63d0\u8b70\u8005\u200b\u53ef\u4ee5\u200b\u7372\u5f97\u5340\u200b\u584a\u200b\u8cbb\u7528\u200b\u7684\u200b\u734e\u91d1\u200b \u200b\u5efa\u8b70\u200b\u5b83\u200b\u662f\u5426\u200b\u5305\u542b\u200b\u8d85\u904e\u200b\u6240\u200b\u9700\u9810\u200b\u63d0\u4ea4\u200b\u7684\u200b\u56b4\u683c\u200b\u6700\u5c0f\u503c\u200b\u3002 </p> <p> \u200b\u7576\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b\u88ab\u200b\u9078\u4e2d\u200b\u63d0\u8b70\u200b\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u6642\u200b\uff0c\u200b\u5b83\u200b\u5fc5\u9808\u200b\u81f3\u5c11\u200b\u5305\u62ec\u200b\u524d\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b \u2154 \u200b\u9810\u200b\u63d0\u4ea4\u200b \u200b\u9a57\u8b49\u8005\u200b\u7c3d\u540d\u200b\u7684\u200b\u5f62\u5f0f\u200b\u3002 \u200b\u7136\u800c\u200b\uff0c\u200b\u6709\u200b\u4e00\u7a2e\u200b\u52d5\u6a5f\u200b\u5305\u62ec\u200b\u8d85\u904e\u200b \u2154 \u200b\u7684\u200b\u9810\u200b\u63d0\u4ea4\u200b \u200b\u734e\u91d1\u200b\u3002 \u200b\u734e\u52f5\u200b\u662f\u200b\u7dda\u6027\u200b\u7684\u200b\uff1a\u200b\u5982\u679c\u200b\u63d0\u8b70\u8005\u200b\u5305\u62ec\u200b \u2154rd \u200b\u9810\u200b\u63d0\u4ea4\u200b\uff08\u200b\u584a\u200b\u7684\u200b\u6700\u5c0f\u503c\u200b\uff09\uff0c\u200b\u5247\u734e\u52f5\u200b\u7bc4\u570d\u200b\u70ba\u200b 1% \u200b\u6709\u6548\u200b\uff09\u200b\u5230\u200b 5%\uff0c\u200b\u5982\u679c\u200b\u63d0\u8b70\u8005\u200b\u5305\u62ec\u200b 100% \u200b\u9810\u200b\u63d0\u4ea4\u200b\u3002 \u200b\u7576\u7136\u200b\u6c42\u5a5a\u8005\u200b\u4e0d\u80fd\u200b\u7b49\u200b\u592a\u4e45\u200b\u6216\u200b\u5176\u4ed6\u200b \u200b\u9a57\u8b49\u8005\u200b\u53ef\u80fd\u200b\u6703\u200b\u8d85\u6642\u200b\u4e26\u8f49\u200b\u5230\u200b\u4e0b\u200b\u4e00\u500b\u200b\u63d0\u8b70\u8005\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u5fc5\u9808\u200b\u5728\u200b\u5169\u8005\u200b\u4e4b\u9593\u200b\u627e\u5230\u200b\u5e73\u8861\u200b \u200b\u7372\u5f97\u200b\u6700\u591a\u200b\u7c3d\u540d\u200b\u7684\u200b\u7b49\u5f85\u200b\u6642\u9593\u200b\u548c\u200b\u5931\u53bb\u200b\u63d0\u8b70\u200b\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u98a8\u96aa\u200b\u3002 \u200b\u8a72\u200b\u6a5f\u5236\u200b\u65e8\u5728\u200b \u200b\u6fc0\u52f5\u200b\u975e\u7a7a\u584a\u200b\u63d0\u6848\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u4e4b\u9593\u200b\u66f4\u597d\u200b\u7684\u200b\u7db2\u7d61\u200b\u4ee5\u53ca\u200b\u6e1b\u8f15\u200b\u5be9\u67e5\u200b\u5236\u5ea6\u200b\u3002 </p> <p> \u200b\u8b93\u200b\u6211\u5011\u200b\u8209\u4e00\u500b\u200b\u5177\u9ad4\u200b\u7684\u200b\u4f8b\u5b50\u200b\u4f86\u200b\u8aaa\u660e\u200b\u4e0a\u8ff0\u200b\u6982\u5ff5\u200b\u3002 \u200b\u5728\u200b\u9019\u500b\u200b\u4f8b\u5b50\u200b\u4e2d\u200b\uff0c\u200b\u6709\u200b 10 \u200b\u500b\u9a57\u200b\u8b49\u5668\u200b \u200b\u5e73\u7b49\u200b\u7684\u200b\u5229\u76ca\u200b\u3002 \u200b\u4ed6\u5011\u200b\u6bcf\u4eba\u200b\u6536\u53d6\u200b1%\u200b\u7684\u200b\u4f63\u91d1\u200b\uff0c\u200b\u4e26\u6709\u200b20%\u200b\u7684\u200b\u81ea\u4fdd\u200bNXN\u3002 \u200b\u73fe\u5728\u200b\u4f86\u200b\u4e86\u200b\u4e00\u500b\u200b\u6210\u529f\u200b\u7684\u200b\u584a\u200b \u200b\u7e3d\u5171\u200b\u6536\u53d6\u200b 1005 dst \u200b\u7684\u200b\u8cbb\u7528\u200b\u3002 \u200b\u5047\u8a2d\u200b\u63d0\u8b70\u8005\u200b\u5728\u200b\u5176\u200b\u63d0\u8b70\u200b\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b 100% \u200b\u7684\u200b\u7c3d\u540d\u200b \u200b\u5835\u585e\u200b\u3002 \u200b\u5f9e\u200b\u800c\u200b\u7372\u5f97\u200b5%\u200b\u7684\u200b\u5168\u984d\u200b\u7d05\u5229\u200b\u3002 </p> <p> \u200b\u6211\u5011\u200b\u5fc5\u9808\u200b\u6c42\u89e3\u200b\u9019\u500b\u200b\u7c21\u55ae\u200b\u7684\u200b\u7b49\u5f0f\u200b\u624d\u80fd\u200b\u627e\u5230\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u734e\u52f5\u200b: </p>  $$9R ~ + ~ R ~ + ~ 5\\%(R) ~ = ~ 1005 ~ \\\u200b\u5de6\u53f3\u200b\u7bad\u982d\u200b ~ R ~ = ~ 1005 ~/ ~10.05 ~ = ~ 100$$  <p> \u200b\u5c0d\u200b\u65bc\u200b\u63d0\u8b70\u8005\u9a57\u200b\u8b49\u8005\u200b: </p> <ul> <li> \u200b\u6c60\u7372\u200b\u5f97\u200b $R ~ + ~ 5\\%(R)$: 105 DST</li> <li> \u200b\u4f63\u91d1\u200b: $105 ~ *~ 80\\% ~* ~ 1\\%$ = 0.84 DST</li> <li> \u200b\u9a57\u8b49\u8005\u200b\u734e\u52f5\u200b: $105 ~ * ~ 20\\% ~ + ~ \u200b\u4f63\u91d1\u200b = 21.84 DST</li> <li> \u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u734e\u52f5\u200b: $105 ~ * ~ 80\\% ~ - ~ \u200b\u4f63\u91d1\u200b = 83.16 DST (\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u7d22\u53d6\u200b\u81ea\u5df1\u200b\u7684\u200b\u90e8\u5206\u200b \u200b\u9019\u4e9b\u200b\u734e\u52f5\u200b\u8207\u200b\u4ed6\u5011\u200b\u7684\u200b\u80a1\u4efd\u200b\u6210\u200b\u6bd4\u4f8b\u200b)</li> <li> \u200b\u6c60\u7372\u200b\u5f97\u200b $R$: 100 DST</li> <li> \u200b\u4f63\u91d1\u200b: $100 ~ *~ 80\\% ~* ~ 1\\%$ = 0.8 DST</li> <li> \u200b\u9a57\u8b49\u8005\u200b\u734e\u52f5\u200b: $100 ~ * ~ 20\\% ~ + ~ \u200b\u4f63\u91d1\u200b = 20.8 DST</li> <li> \u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u734e\u52f5\u200b: $100 ~ * ~ 80\\% ~ - ~ \u200b\u4f63\u91d1\u200b = 79.2 DST (\u200b\u6bcf\u500b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u7d22\u53d6\u200b\u81ea\u5df1\u200b\u7684\u200b\u90e8\u5206\u200b \u200b\u9019\u4e9b\u200b\u734e\u52f5\u200b\u8207\u200b\u4ed6\u5011\u200b\u7684\u200b\u80a1\u4efd\u200b\u6210\u200b\u6bd4\u4f8b\u200b)</li> </ul> \u200b\u524a\u6e1b\u200b\u689d\u4ef6\u200b\u662f\u200b\u4ec0\u9ebc\u200b\uff1f <p> \u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u884c\u70ba\u200b\u4e0d\u7576\u200b\uff0c\u200b\u5176\u200b\u62b5\u62bc\u200b\u80a1\u4efd\u200b\u53ca\u5176\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u7684\u200b\u80a1\u4efd\u200b\u5c07\u88ab\u200b\u524a\u6e1b\u200b\u3002 \u200b\u7684\u200b\u56b4\u91cd\u6027\u200b \u200b\u61f2\u7f70\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u932f\u8aa4\u200b\u7684\u200b\u985e\u578b\u200b\u3002 \u200b\u6709\u200b 3 \u200b\u500b\u200b\u4e3b\u8981\u200b\u932f\u8aa4\u200b\u53ef\u80fd\u200b\u5c0e\u81f4\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u8cc7\u91d1\u200b\u88ab\u200b\u524a\u6e1b\u200b \u200b\u53ca\u5176\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\uff1a </p> <p> \u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b: \u200b\u5982\u679c\u200b\u6709\u4eba\u200b\u5728\u200b\u93c8\u200b A \u200b\u4e0a\u5831\u200b\u544a\u9a57\u200b\u8b49\u8005\u200b\u5728\u200b\u93c8\u200b A \u200b\u4e0a\u200b\u7684\u200b\u76f8\u540c\u200b\u9ad8\u5ea6\u200b\u7c3d\u7f72\u200b\u4e86\u200b\u5169\u500b\u200b\u5340\u584a\u200b\u4e26\u4e14\u200b \u200b\u93c8\u200b B\uff0c\u200b\u5982\u679c\u200b\u93c8\u200b A \u200b\u548c\u200b\u93c8\u200b B \u200b\u5171\u4eab\u200b\u4e00\u500b\u200b\u5171\u540c\u200b\u7684\u200b\u7956\u5148\u200b\uff0c\u200b\u90a3\u9ebc\u200b\u9019\u500b\u9a57\u200b\u8b49\u8005\u200b\u5c07\u5728\u200b\u93c8\u200b A \u200b\u4e0a\u200b\u88ab\u200b\u7f70\u200b\u6c92\u200b\u3002\u200b\u61f2\u7f70\u200b \u200b\u96d9\u7c3d\u200b\u662f\u200b\u7e3d\u200b\u80a1\u4efd\u200b\u7684\u200b 10.00%\u3002 </p> <ul> <li>\u200b\u505c\u6a5f\u200b\u6642\u9593\u200b: \u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u932f\u904e\u200b\u4e86\u200b\u6700\u200b\u5f8c\u200b 90.000 \u200b\u500b\u5340\u200b\u584a\u200b\u4e2d\u200b\u8d85\u904e\u200b 50% \u200b\u7684\u200b\u5340\u584a\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5c07\u88ab\u200b\u524a\u6e1b\u200b 0.50%\u3002</li> <li>Unavailability: \u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u7c3d\u540d\u200b\u6c92\u6709\u200b\u5305\u542b\u200b\u5728\u200b\u6700\u200b\u5f8c\u200b\u7684\u200b X \u200b\u500b\u584a\u200b\u4e2d\u200b\uff0c\u200b\u9a57\u8b49\u8005\u5c07\u200b\u5f97\u5230\u200b \u200b\u88ab\u200b\u8207\u200b X \u200b\u6210\u200b\u6bd4\u4f8b\u200b\u7684\u200b\u908a\u969b\u91cf\u200b\u524a\u6e1b\u200b\u3002\u200b\u5982\u679c\u200b X \u200b\u9ad8\u200b\u65bc\u200b\u67d0\u500b\u200b\u9650\u5236\u200b Y\uff0c\u200b\u5247\u9a57\u200b\u8b49\u5668\u5c07\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u3002</li> </ul> <p> \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u5373\u4f7f\u200b\u9a57\u8b49\u8005\u200b\u4e0d\u662f\u6545\u610f\u200b\u884c\u70ba\u200b\u4e0d\u7576\u200b\uff0c\u200b\u5982\u679c\u200b\u5176\u7bc0\u9ede\u200b\u5d29\u6f70\u200b\u3001\u200b\u4e1f\u5931\u200b\uff0c\u200b\u5b83\u200b\u4ecd\u7136\u200b\u6703\u200b\u88ab\u200b\u524a\u6e1b\u200b \u200b\u9023\u63a5\u6027\u200b\u3001\u200b\u7372\u5f97\u200b DDoSed\uff0c\u200b\u6216\u8005\u200b\u5176\u79c1\u200b\u9470\u200b\u88ab\u200b\u6d29\u9732\u200b\u3002 </p> \u200b\u9a57\u8b49\u8005\u200b\u9700\u8981\u200b\u81ea\u7d81\u5b9a\u200b NXN \u200b\u55ce\u200b\uff1f <p> \u200b\u4e0d\u200b\uff0c\u200b\u4ed6\u5011\u200b\u6c92\u6709\u200b\u3002 \u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u7e3d\u6b0a\u76ca\u200b\u7b49\u200b\u65bc\u200b\u5176\u200b\u81ea\u8eab\u200b\u62b5\u62bc\u200b\u6b0a\u76ca\u200b\u53ca\u5176\u200b\u59d4\u200b\u8a17\u200b\u6b0a\u76ca\u200b\u7684\u200b\u7e3d\u200b\u548c\u200b\u3002 \u200b\u9019\u200b\u610f\u5473\u8457\u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u5438\u5f15\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u59d4\u200b\u8a17\u200b\u4eba\u4f86\u200b\u88dc\u511f\u200b\u5176\u200b\u5c11\u91cf\u200b\u7684\u200b\u81ea\u200b\u62b5\u62bc\u200b\u80a1\u4efd\u200b\u3002 \u200b\u9019\u662f\u200b \u200b\u70ba\u200b\u4ec0\u9ebc\u200b\u8072\u8b7d\u200b\u5c0d\u9a57\u200b\u8b49\u8005\u200b\u4f86\u200b\u8aaa\u200b\u975e\u5e38\u200b\u91cd\u8981\u200b\u3002 </p> <p> \u200b\u5373\u4f7f\u200b\u9a57\u8b49\u8005\u200b\u6c92\u6709\u200b\u7fa9\u52d9\u200b\u81ea\u884c\u200b\u7d81\u5b9a\u200b NXN\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u4e5f\u200b\u61c9\u8a72\u200b\u5e0c\u671b\u200b\u4ed6\u5011\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u64c1\u6709\u200b \u200b\u5728\u200b\u4ed6\u5011\u200b\u7684\u200b\u8cea\u62bc\u6c60\u200b\u4e2d\u81ea\u200b\u7d81\u5b9a\u200b NXN\u3002 \u200b\u63db\u53e5\u200b\u8a71\u200b\u8aaa\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u61c9\u8a72\u200b\u53c3\u200b\u8207\u200b\u5176\u4e2d\u200b\u3002 </p> <p> \u200b\u70ba\u200b\u4e86\u200b\u8b93\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u5c0d\u200b\u4ed6\u5011\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u6709\u200b\u591a\u5c11\u200b\u5229\u76ca\u200b\u6709\u200b\u4e00\u4e9b\u200b\u4fdd\u8b49\u200b\uff0c\u200b\u5f8c\u200b\u8005\u200b\u53ef\u4ee5\u200b\u767c\u51fa\u200b\u4fe1\u865f\u200b \u200b\u6700\u200b\u5c11\u91cf\u200b\u7684\u200b\u81ea\u9375\u5408\u200b NXN\u3002 \u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u81ea\u6211\u200b\u7d04\u675f\u200b\u4f4e\u200b\u65bc\u200b\u5176\u200b\u9810\u5b9a\u200b\u7fa9\u7684\u200b\u9650\u5236\u200b\uff0c\u200b\u5247\u6b64\u200b \u200b\u9a57\u8b49\u8005\u200b\u53ca\u5176\u200b\u6240\u6709\u200b\u59d4\u200b\u8a17\u200b\u4eba\u5c07\u200b\u89e3\u9664\u200b\u7d81\u5b9a\u200b\u3002 </p> \u200b\u5982\u4f55\u200b\u9632\u6b62\u200b\u8d28\u62bc\u200b\u96c6\u4e2d\u200b\u5728\u200b\u5c11\u6578\u200b\u9802\u7d1a\u9a57\u200b\u8b49\u8005\u200b\u624b\u4e2d\u200b\uff1f <p> \u200b\u76ee\u524d\u200b\uff0c\u200b\u793e\u5340\u200b\u61c9\u8a72\u200b\u4ee5\u200b\u4e00\u7a2e\u200b\u8070\u660e\u200b\u548c\u200b\u81ea\u6211\u200b\u4fdd\u8b77\u200b\u7684\u200b\u65b9\u5f0f\u200b\u884c\u4e8b\u200b\u3002 \u200b\u7576\u200b\u6bd4\u7279\u200b\u5e63\u7684\u200b\u7926\u6c60\u200b\u8b8a\u5f97\u200b\u592a\u200b \u200b\u793e\u5340\u200b\u901a\u5e38\u200b\u6703\u200b\u505c\u6b62\u200b\u5411\u200b\u8a72\u200b\u7926\u6c60\u200b\u8ca2\u737b\u200b\u5f88\u591a\u200b\u6316\u7926\u200b\u80fd\u529b\u200b\u3002 Daodst \u200b\u6700\u521d\u200b\u5c07\u4f9d\u8cf4\u200b\u65bc\u200b\u76f8\u540c\u200b\u7684\u200b\u6548\u679c\u200b\u3002 \u200b\u672a\u4f86\u200b\uff0c\u200b\u5c07\u200b\u90e8\u7f72\u200b\u5176\u4ed6\u200b\u6a5f\u5236\u200b\u4f86\u200b\u76e1\u200b\u53ef\u80fd\u200b\u5730\u200b\u5e73\u6ed1\u200b\u9019\u500b\u200b\u904e\u7a0b\u200b\uff1a </p> <p> Penalty-free re-delegation: \u200b\u9019\u662f\u200b\u70ba\u200b\u4e86\u200b\u8b93\u200b\u59d4\u200b\u8a17\u200b\u4eba\u200b\u53ef\u4ee5\u200b\u8f15\u200b\u9b06\u200b\u5730\u200b\u5f9e\u200b\u4e00\u200b\u500b\u200b\u9a57\u200b\u8b49\u200b\u5668\u200b\u5207\u200b\u63db\u200b\u5230\u200b\u53e6\u200b\u4e00\u200b\u500b\u200b\u9a57\u200b\u8b49\u200b\u5668\u200b\uff0c\u200b\u4ee5\u4fbf\u200b \u200b\u4ee5\u200b\u964d\u4f4e\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u7c98\u6027\u200b\u3002 </p> <p> UI warning: \u200b\u9322\u5305\u200b\u53ef\u4ee5\u200b\u5be6\u73fe\u200b\u8b66\u544a\u200b\uff0c\u200b\u5982\u679c\u200b\u4ed6\u5011\u200b\u60f3\u59d4\u200b\u8a17\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\uff0c\u200b\u9019\u4e9b\u200b\u8b66\u544a\u200b\u5c07\u986f\u200b\u793a\u7d66\u200b\u7528\u6236\u200b \u200b\u5df2\u7d93\u200b\u64c1\u6709\u200b\u5927\u91cf\u200b\u7684\u200b\u62b5\u62bc\u200b\u6b0a\u200b\u3002 </p>"},{"location":"gateway/faq/#_6","title":"\u6280\u8853\u200b\u8981\u6c42","text":"\u786c\u4ef6\u200b\u8981\u6c42\u200b\u662f\u200b\u4ec0\u9ebc\u200b\uff1f <p> \u200b\u9a57\u8b49\u8005\u200b\u61c9\u8a72\u200b\u671f\u671b\u200b\u70ba\u200b\u4e00\u500b\u200b\u6216\u200b\u591a\u500b\u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b\u4f4d\u7f6e\u200b\u63d0\u4f9b\u200b\u5197\u9918\u96fb\u6e90\u200b\u3001\u200b\u7db2\u7d61\u200b\u3001\u200b\u9632\u706b\u200b\u7246\u200b\u3001 HSM \u200b\u548c\u670d\u200b\u52d9\u5668\u200b\u3002 </p>  \u200b\u6211\u5011\u200b\u9810\u8a08\u200b\u6700\u521d\u200b\u9700\u8981\u200b\u9069\u5ea6\u200b\u7684\u200b\u786c\u4ef6\u200b\u898f\u683c\u200b\uff0c\u200b\u4e26\u4e14\u200b\u5b83\u5011\u200b\u53ef\u80fd\u200b\u6703\u200b\u96a8\u8457\u200b\u7db2\u7d61\u200b\u7684\u200b\u767c\u5c55\u200b\u800c\u200b\u589e\u52a0\u200b \u200b\u4f7f\u7528\u200b\u589e\u52a0\u200b\u3002 \u200b\u53c3\u8207\u200b\u6e2c\u8a66\u200b\u7db2\u662f\u200b\u4e86\u89e3\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\u7684\u200b\u6700\u4f73\u200b\u65b9\u5f0f\u200b\u3002   \u200b\u4ec0\u9ebc\u200b\u662f\u200b\u8edf\u4ef6\u200b\u8981\u6c42\u200b\uff1f  \u200b\u9664\u4e86\u200b\u904b\u884c\u200b Daodst \u200b\u7bc0\u9ede\u200b\u5916\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u9084\u61c9\u200b\u958b\u767c\u200b\u76e3\u63a7\u200b\u3001\u200b\u8b66\u5831\u200b\u548c\u200b\u7ba1\u7406\u200b\u89e3\u6c7a\u200b\u65b9\u6848\u200b\u3002   \u200b\u4ec0\u9ebc\u200b\u662f\u200b\u5e36\u200b\u5bec\u200b\u8981\u6c42\u200b\uff1f <p> \u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u6216\u200b\u6bd4\u7279\u200b\u5e63\u7b49\u93c8\u200b\u76f8\u6bd4\u200b\uff0cDaodst \u200b\u5177\u6709\u200b\u975e\u5e38\u200b\u9ad8\u200b\u7684\u200b\u541e\u5410\u91cf\u200b\u3002 </p> <p> \u200b\u56e0\u6b64\u200b\uff0c\u200b\u6211\u5011\u200b\u5efa\u8b70\u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b\u7bc0\u9ede\u200b\u53ea\u9023\u200b\u63a5\u5230\u200b\u96f2\u200b\u7aef\u7684\u200b\u53ef\u4fe1\u200b\u5168\u7bc0\u9ede\u200b\u6216\u200b\u5176\u4ed6\u200b\u9a57\u8b49\u5668\u200b \u200b\u5728\u200b\u793e\u4ea4\u200b\u4e0a\u200b\u76f8\u4e92\u4e86\u89e3\u200b\u3002 \u200b\u9019\u6e1b\u200b\u8f15\u200b\u4e86\u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b\u7bc0\u9ede\u200b\u6e1b\u8f15\u200b\u62d2\u7d55\u200b\u670d\u52d9\u200b\u653b\u64ca\u200b\u7684\u200b\u8ca0\u64d4\u200b\u3002 </p> <p> \u200b\u6700\u7d42\u200b\uff0c\u200b\u96a8\u8457\u200b\u7db2\u7d61\u200b\u7684\u200b\u4f7f\u7528\u200b\u8d8a\u4f86\u200b\u8d8a\u200b\u591a\u200b\uff0c\u200b\u4eba\u5011\u200b\u5be6\u969b\u200b\u4e0a\u200b\u53ef\u4ee5\u200b\u671f\u671b\u200b\u6bcf\u5929\u200b\u7684\u200b\u5e36\u200b\u5bec\u200b\u9054\u200b\u5230\u200b\u5e7e\u200b\u5343\u5146\u200b\u5b57\u7bc0\u200b\u7684\u200b\u6578\u91cf\u200b\u7d1a\u200b\u3002 </p> \u200b\u904b\u884c\u9a57\u200b\u8b49\u5668\u200b\u610f\u5473\u8457\u200b\u4ec0\u9ebc\u200b\uff1f  \u200b\u4e00\u500b\u200b\u6210\u529f\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u64cd\u4f5c\u200b\u5c07\u200b\u9700\u8981\u200b\u591a\u500b\u200b\u9ad8\u6280\u80fd\u200b\u4eba\u54e1\u200b\u7684\u200b\u52aa\u529b\u200b\u548c\u200b\u6301\u7e8c\u200b\u7684\u200b\u64cd\u4f5c\u200b \u200b\u6ce8\u610f\u529b\u200b\u3002 \u200b\u4f8b\u5982\u200b\uff0c\u200b\u9019\u6bd4\u200b\u904b\u884c\u200b\u6bd4\u7279\u200b\u5e63\u7926\u200b\u5de5\u8981\u200b\u5fa9\u200b\u96dc\u5f97\u200b\u591a\u200b\u3002   \u200b\u5982\u4f55\u200b\u8655\u7406\u5bc6\u200b\u9470\u200b\u7ba1\u7406\u200b\uff1f  \u200b\u9a57\u8b49\u8005\u200b\u61c9\u8a72\u200b\u671f\u671b\u200b\u904b\u884c\u200b\u652f\u6301\u200b ed25519 \u200b\u5bc6\u200b\u9470\u200b\u7684\u200b HSM  <p> Daodst \u200b\u5718\u968a\u200b\u4e0d\u200b\u63a8\u8350\u200b\u4e00\u7a2e\u200b\u89e3\u6c7a\u200b\u65b9\u6848\u200b\u9ad8\u200b\u65bc\u200b\u53e6\u200b\u4e00\u7a2e\u200b\u89e3\u6c7a\u200b\u65b9\u6848\u200b\u3002 \u200b\u9f13\u52f5\u200b\u793e\u5340\u200b\u52a0\u5f37\u200b\u52aa\u529b\u200b\uff0c\u200b\u4ee5\u200b \u200b\u6539\u9032\u200b HSM \u200b\u548c\u200b\u5bc6\u200b\u9470\u200b\u7ba1\u7406\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u3002 </p> \u200b\u9a57\u8b49\u8005\u200b\u5728\u200b\u64cd\u4f5c\u200b\u65b9\u9762\u200b\u53ef\u4ee5\u200b\u671f\u5f85\u200b\u4ec0\u9ebc\u200b\uff1f  \u200b\u904b\u884c\u200b\u6709\u6548\u200b\u7684\u200b\u64cd\u4f5c\u200b\u662f\u200b\u907f\u514d\u200b\u610f\u5916\u200b\u89e3\u7d81\u200b\u6216\u200b\u88ab\u200b\u780d\u200b\u7684\u200b\u95dc\u9375\u200b\u3002 \u200b\u9019\u200b\u5305\u62ec\u200b\u80fd\u5920\u200b \u200b\u97ff\u61c9\u200b\u653b\u64ca\u200b\u3001\u200b\u4e2d\u65b7\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u7dad\u8b77\u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b\u7684\u200b\u5b89\u5168\u200b\u548c\u200b\u9694\u96e2\u200b\u3002   \u200b\u7dad\u8b77\u200b\u8981\u6c42\u200b\u662f\u200b\u4ec0\u9ebc\u200b\uff1f  \u200b\u9a57\u8b49\u8005\u200b\u61c9\u8a72\u200b\u671f\u671b\u200b\u57f7\u884c\u200b\u5b9a\u671f\u200b\u8edf\u4ef6\u200b\u66f4\u65b0\u200b\u4ee5\u200b\u9069\u61c9\u200b\u5347\u7d1a\u200b\u548c\u200b\u932f\u8aa4\u200b\u4fee\u200b\u5fa9\u200b\u3002 \u200b\u96e3\u514d\u200b\u6703\u200b\u6709\u200b \u200b\u5728\u200b\u7db2\u7d61\u200b\u5f15\u5c0e\u968e\u6bb5\u200b\u7684\u200b\u65e9\u671f\u200b\u51fa\u73fe\u200b\u554f\u984c\u200b\uff0c\u200b\u9700\u8981\u200b\u9ad8\u5ea6\u200b\u8b66\u60d5\u200b\u3002   \u200b\u9a57\u8b49\u8005\u200b\u5982\u4f55\u200b\u4fdd\u8b77\u200b\u81ea\u5df1\u200b\u514d\u53d7\u200b\u62d2\u7d55\u200b\u670d\u52d9\u200b\u653b\u64ca\u200b\uff1f <p> \u200b\u7576\u653b\u200b\u64ca\u8005\u200b\u5411\u200b\u67d0\u500b\u200b IP \u200b\u5730\u5740\u200b\u767c\u9001\u200b\u5927\u91cf\u200b\u4e92\u806f\u7db2\u200b\u6d41\u91cf\u200b\u4ee5\u200b\u963b\u6b62\u200b\u670d\u52d9\u5668\u200b\u8a2a\u200b\u554f\u6642\u200b\uff0c\u200b\u5c31\u6703\u200b\u767c\u751f\u200b\u62d2\u7d55\u200b\u670d\u52d9\u200b\u653b\u64ca\u200b \u200b\u5728\u9023\u200b\u63a5\u5230\u200b\u4e92\u806f\u7db2\u200b\u7684\u200b IP \u200b\u5730\u5740\u200b\u4e0a\u200b\u3002 </p> <p> \u200b\u653b\u64ca\u8005\u200b\u6383\u63cf\u200b\u7db2\u7d61\u200b\uff0c\u200b\u8a66\u5716\u200b\u4e86\u89e3\u200b\u5404\u7a2e\u9a57\u200b\u8b49\u5668\u200b\u7bc0\u9ede\u200b\u7684\u200b IP \u200b\u5730\u5740\u200b\u4e26\u65b7\u200b\u958b\u200b\u5b83\u5011\u200b\u8207\u200b \u200b\u901a\u904e\u200b\u7528\u200b\u6d41\u91cf\u200b\u6df9\u200b\u6c92\u200b\u4ed6\u5011\u200b\u4f86\u200b\u9032\u884c\u200b\u6e9d\u901a\u200b\u3002 </p> <p> \u200b\u6e1b\u8f15\u200b\u9019\u4e9b\u200b\u98a8\u96aa\u200b\u7684\u200b\u4e00\u7a2e\u200b\u63a8\u85a6\u200b\u65b9\u6cd5\u200b\u662f\u9a57\u200b\u8b49\u8005\u200b\u4ee5\u200b\u6240\u8b02\u200b\u7684\u200b\u65b9\u5f0f\u200b\u4ed4\u7d30\u69cb\u200b\u5efa\u5176\u200b\u7db2\u7d61\u62d3\u200b\u64b2\u200b \u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u67b6\u69cb\u200b\u3002 </p> <p> \u200b\u9a57\u8b49\u8005\u200b\u7bc0\u9ede\u200b\u61c9\u8a72\u200b\u53ea\u9023\u200b\u63a5\u5230\u200b\u4ed6\u5011\u200b\u4fe1\u4efb\u200b\u7684\u200b\u5168\u7bc0\u9ede\u200b\uff0c\u200b\u56e0\u70ba\u200b\u4ed6\u5011\u200b\u81ea\u5df1\u200b\u64cd\u4f5c\u200b\u6216\u200b\u7531\u200b\u5176\u4ed6\u4eba\u200b\u904b\u884c\u200b \u200b\u4ed6\u5011\u200b\u5728\u200b\u793e\u4ea4\u200b\u4e0a\u200b\u8a8d\u8b58\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u3002 \u200b\u9a57\u8b49\u5668\u200b\u7bc0\u9ede\u200b\u901a\u5e38\u200b\u5728\u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b\u904b\u884c\u200b\u3002 \u200b\u5927\u591a\u200b\u6578\u6578\u64da\u200b\u4e2d\u5fc3\u200b\u76f4\u63a5\u200b\u63d0\u4f9b\u200b \u200b\u93c8\u63a5\u200b\u4e3b\u8981\u200b\u96f2\u200b\u63d0\u4f9b\u5546\u200b\u7684\u200b\u7db2\u7d61\u200b\u3002 \u200b\u9a57\u8b49\u5668\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u9019\u4e9b\u200b\u93c8\u200b\u63a5\u9023\u200b\u63a5\u5230\u200b\u96f2\u4e2d\u200b\u7684\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u9019\u5c07\u200b\u62d2\u7d55\u200b\u670d\u52d9\u200b\u7684\u200b\u8ca0\u64d4\u200b\u5f9e\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u7bc0\u9ede\u200b\u76f4\u63a5\u200b\u8f49\u79fb\u200b\u5230\u200b\u5b83\u200b\u7684\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u4e26\u4e14\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u65b0\u200b\u7684\u200b \u200b\u555f\u52d5\u200b\u6216\u200b\u6fc0\u6d3b\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u4ee5\u200b\u6e1b\u8f15\u200b\u5c0d\u200b\u73fe\u6709\u200b\u7bc0\u9ede\u200b\u7684\u200b\u653b\u64ca\u200b\u3002 </p> <p> \u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u53ef\u4ee5\u200b\u5feb\u901f\u200b\u555f\u52d5\u200b\u6216\u200b\u66f4\u6539\u200b\u5176\u200b IP \u200b\u5730\u5740\u200b\u3002 \u200b\u56e0\u70ba\u200b\u5230\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u7684\u200b\u93c8\u63a5\u200b\u662f\u200b\u79c1\u6709\u200b\u7684\u200b IP \u200b\u7a7a\u9593\u200b\uff0c\u200b\u57fa\u200b\u65bc\u200b\u4e92\u806f\u7db2\u200b\u7684\u200b\u653b\u64ca\u200b\u4e0d\u80fd\u200b\u76f4\u63a5\u200b\u5e72\u64fe\u200b\u4ed6\u5011\u200b\u3002 \u200b\u9019\u5c07\u200b\u78ba\u4fdd\u9a57\u200b\u8b49\u8005\u200b\u963b\u6b62\u200b\u63d0\u6848\u200b\u548c\u200b\u6295\u7968\u200b \u200b\u7e3d\u662f\u200b\u8b93\u200b\u5b83\u200b\u5230\u200b\u9054\u200b\u7db2\u7d61\u200b\u7684\u200b\u5176\u9918\u200b\u90e8\u5206\u200b\u3002 </p> <p> \u200b\u9810\u8a08\u200b\u9019\u200b\u90e8\u5206\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u826f\u597d\u200b\u64cd\u4f5c\u7a0b\u5e8f\u200b\u5c07\u200b\u5b8c\u5168\u200b\u6e1b\u8f15\u200b\u9019\u4e9b\u200b\u5a01\u8105\u200b\u3002 </p>"},{"location":"gateway/guide-linux/","title":"linux\u200b\u7db2\u95dc\u200b\u64cd\u4f5c\u200b\u6307\u5357","text":""},{"location":"gateway/guide-linux/#gui","title":"GUI\u200b\u5b89\u88c5","text":""},{"location":"gateway/guide-linux/#centos7","title":"centos7\u200b\u7cfb\u7d71","text":"<p>1.\u200b\u5f9e\u200b\u5b98\u7db2\u200b\uff08 https://www.daodst.com/ \uff09\u200b\u4e0b\u8f09\u200b\u7a0b\u5f0f\u200b\u58d3\u7e2e\u200b\u5305\u200b</p> <p></p> <p>2.\u200b\u4f7f\u7528\u200b\u6ed1\u9f20\u200b\u53f3\u9375\u200b\u9ede\u64ca\u200bDST.zip\uff0c\u200b\u5728\u200b\u5f48\u51fa\u200b\u83dc\u200b\u55ae\u4e2d\u200b\u9078\u64c7\u200b\u201c\u200b\u7528\u6b78\u6a94\u200b\u7ba1\u7406\u5668\u200b\u6253\u958b\u200b\u201d </p> <p>3.\u200b\u5728\u200b\u5f39\u51fa\u200b\u7684\u200b\u7a97\u53e3\u200b\u4e2d\u9ede\u64ca\u200b\u5de6\u4e0a\u89d2\u200b\u201c\u200b\u63d0\u53d6\u200b\u201d </p> <p>4.\u200b\u9078\u64c7\u200b\u4e00\u500b\u200b\u5b89\u88dd\u200b\u76ee\u9304\u200b,\u200b\u5efa\u8bae\u200b\u653e\u5230\u200b/data\u200b\u4e0b\u9762\u200b,\u200b\u4e14\u200b/data\u200b\u4e3a\u200b\u72ec\u7acb\u200b\u786c\u76d8\u200b</p> <p>\u200b\u70b9\u51fb\u200b\u53f3\u4fa7\u200b \u200b\u63d0\u53d6\u200b\u6309\u94ae\u200b\u540e\u200b \u200b\u7a0b\u5f0f\u200b\u6703\u200b\u81ea\u52d5\u200b\u8907\u200b\u88fd\u200b\u5230\u200b\u8a72\u200b\u76ee\u200b\u9304\u200b\u4e0b\u200b(\u200b\u5de6\u4fa7\u200b\u7ea2\u6846\u200b\u6807\u8bb0\u200b\u4e3a\u200b\u9009\u4e2d\u200b\u7684\u200b\u5b89\u88c5\u200b\u4f4d\u7f6e\u200b)</p> <p>\ud83d\udce3 \u200b\u6ce8\u610f\u200b1: \u200b\u4e00\u5b9a\u200b\u8981\u200b\u9078\u64c7\u200b\u78c1\u7247\u200b\u53ef\u7528\u200b\u7a7a\u9593\u200b\u8f03\u200b\u5927\u200b\u7684\u200b\u4f4d\u7f6e\u200b</p> <p>\ud83d\udce3 \u200b\u6ce8\u610f\u200b2: \u200b\u4e0d\u8981\u200b\u5c06\u200b\u5b89\u88c5\u200b\u76ee\u5f55\u200b\u9009\u62e9\u200b\u5728\u200b\u7528\u6237\u200b\u5bb6\u200b\u76ee\u5f55\u200b\u4e0b\u200b</p> <p></p> <p>5.\u200b\u9032\u5165\u200b\u5b89\u88dd\u200b\u76ee\u9304\u200b</p> <p>6.\u200b\u5728\u200b\u7a97\u53e3\u200b\u7a7a\u767d\u5904\u200b\u53f3\u9375\u200b\u9ede\u64ca\u200b\u9f20\u6807\u200b\uff0c\u200b\u5728\u200b\u5f39\u51fa\u200b\u7684\u200b\u7a97\u53e3\u200b\u4e2d\u200b\u70b9\u51fb\u200b\"\u200b\u5728\u200b\u7d42\u7aef\u200b\u6a5f\u958b\u555f\u200b\",\u200b\u6253\u958b\u200b\u547d\u4ee4\u884c\u200b\u754c\u9762\u200b </p> <p>7.\u200b\u7ed9\u200b\u521d\u59cb\u5316\u200b\u811a\u672c\u200b\u589e\u52a0\u200b\u6267\u884c\u200b\u6743\u9650\u200b</p> <p><code>chmod u+x daodst/init.sh</code></p> <p></p> <p>8.\u200b\u5728\u200b\u547d\u4ee4\u884c\u200b\u754c\u9762\u200b\u4e2d\u200b\u6267\u884c\u200b\u521d\u59cb\u5316\u200b\u547d\u4ee4\u200b</p> <p><code>pkexec $(pwd)/daodst/init.sh $USER</code></p> <p>9.\u200b\u521d\u59cb\u5316\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u9700\u8981\u200b\u8f38\u5165\u200b\u4e00\u6b21\u200broot\u200b\u7528\u6236\u200b\u7684\u200b\u5bc6\u78bc\u200b\u9032\u884c\u200b\u6388\u6b0a\u200b\u64cd\u4f5c\u200b </p> <p>10.\u200b\u521d\u59cb\u5316\u200b\u811a\u672c\u200b\u6267\u884c\u200b\u540e\u200b </p> <p>11.\u200b\u91cd\u542f\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b</p> <p>12.\u200b\u6253\u5f00\u200b\u7ec8\u7aef\u200b\uff0c\u200b\u5207\u6362\u200b\u5230\u200broot\u200b\u7528\u6237\u200b(\u200b\u5728\u200bsu\u200b\u547d\u4ee4\u200b\u540e\u200b\u8f93\u5165\u200broot\u200b\u7684\u200b\u5bc6\u7801\u200b),\u200b\u5207\u6362\u200b\u6210\u529f\u200b\u540e\u200b\u4f1a\u200b\u663e\u793a\u200broot\u200b\u7528\u6237\u200b </p> <p>13.\u200b\u8fdb\u5165\u200b\u7f51\u5173\u200b\u540e\u200b\u7aef\u200b\u76ee\u5f55\u200b</p> <p><code>cd /data/daodst/resources/gateway</code> </p> <p>14.\u200b\u542f\u52a8\u200b\u7f51\u5173\u200b\u540e\u200b\u7aef\u200b\u7a0b\u5e8f\u200b()</p> <p><code>./op.sh start</code></p> <p></p> <p>15.\u200b\u9032\u5165\u200b\u5b89\u88dd\u6839\u200b\u76ee\u9304\u200b\u6216\u8005\u200b\u7cfb\u7edf\u200b\u684c\u9762\u200b\uff0c\u200b\u96d9\u64ca\u200b\u5716\u6a19\u200b \"DstGatewayGUI.desktop\" \u200b\u542f\u52a8\u200b\u7f51\u5173\u200b\u524d\u7aef\u200b </p> <p>16.\u200b\u9ede\u64ca\u200b \"trust and Launch\" \u200b\u9032\u884c\u200b\u555f\u52d5\u200b(\u200b\u8be5\u200b\u63d0\u793a\u200b\u53ea\u4f1a\u200b\u663e\u793a\u200b\u4e00\u6b21\u200b) </p> <p>17.\u200b\u6ce8\u610f\u4e8b\u9879\u200b</p> <p>\u200b\u8981\u200b\u5148\u4ee5\u200broot\u200b\u7528\u6237\u200b\u542f\u52a8\u200b\u597d\u200b\u7f51\u5173\u200b\u540e\u200b\u7aef\u200b,\u200b\u7136\u540e\u200b\u624d\u80fd\u200b\u542f\u52a8\u200b\u7f51\u5173\u200b\u524d\u7aef\u200b</p>"},{"location":"gateway/guide-linux/#_1","title":"\u5f8c\u200b\u7aef\u200b\u7ba1\u7406","text":"<pre><code>GUI\u200b\u5b89\u88dd\u200b\u5b8c\u6210\u200b\u4ee5\u200b\u5f8c\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u64cd\u4f5c\u200b\u9598\u9053\u5f8c\u7aef\u200b\uff0c\u200b\u64cd\u4f5c\u65b9\u6cd5\u200b\u5982\u4e0b\u200b\uff1a\n</code></pre>"},{"location":"gateway/guide-linux/#_2","title":"\u555f\u52d5","text":"<pre><code>#\u200b\u5207\u63db\u200b\u5230\u200broot\u200b\u7528\u6236\u200b\nsu root\n\n#\u200b\u5207\u63db\u200b\u76ee\u9304\u200b\ncd \u200b\u5b89\u88dd\u200b\u76ee\u9304\u200b/resource/gateway\n\n./op.sh start\n</code></pre>"},{"location":"gateway/guide-linux/#_3","title":"\u505c\u6b62","text":"<pre><code>#\u200b\u5207\u63db\u200b\u5230\u200broot\u200b\u7528\u6236\u200b\nsu root\n\n#\u200b\u5207\u63db\u200b\u76ee\u9304\u200b\ncd \u200b\u5b89\u88dd\u200b\u76ee\u9304\u200b/resource/gateway\n\n./op.sh stop\n</code></pre>"},{"location":"gateway/guide-linux/#_4","title":"\u67e5\u770b\u200b\u72c0\u614b","text":"<pre><code>#\u200b\u5207\u63db\u200b\u5230\u200broot\u200b\u7528\u6236\u200b\nsu root\n\n#\u200b\u5b89\u88dd\u200b\u76ee\u9304\u200b\ncd \u200b\u5b89\u88c5\u200b\u76ee\u5f55\u200b/resource/gateway\n\n./op.sh status\n</code></pre>"},{"location":"gateway/guide-linux/#_5","title":"\u67e5\u770b\u200b\u65e5\u5fd7","text":"<pre><code>#\u200b\u5207\u63db\u200b\u5230\u200broot\u200b\u7528\u6236\u200b\nsu root\n\n#\u200b\u5b89\u88dd\u200b\u76ee\u9304\u200b\ncd \u200b\u5b89\u88c5\u200b\u76ee\u5f55\u200b/resource/gateway\n\n./op.sh log\n</code></pre>"},{"location":"gateway/guide-linux/#_6","title":"\u5378\u8f7d\u200b\u540e\u200b\u7aef\u200b\u670d\u52a1","text":"<p>\u200b\u5982\u679c\u200b\u9047\u5230\u200b\u540e\u200b\u7aef\u200b\u670d\u52a1\u200b\u542f\u52a8\u200b\u5931\u8d25\u200b\u7684\u200b\u95ee\u9898\u200b,\u200b\u53ef\u4ee5\u200b\u5148\u200b\u5378\u8f7d\u200b\u540e\u200b\u7aef\u200b\u670d\u52a1\u200b,\u200b\u7136\u540e\u200b\u91cd\u65b0\u542f\u52a8\u200b\u540e\u200b\u7aef\u200b,\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u81ea\u52a8\u200b\u4fee\u590d\u200b\u4e86\u200b\u3002</p> <pre><code>#\u200b\u5207\u63db\u200b\u5230\u200broot\u200b\u7528\u6236\u200b\nsu root\n\n#\u200b\u5b89\u88dd\u200b\u76ee\u9304\u200b\ncd \u200b\u5b89\u88c5\u200b\u76ee\u5f55\u200b/resource/gateway\n\n./gateway uninstall\n</code></pre>"},{"location":"gateway/guide-linux/#_7","title":"\u6d41\u7a0b","text":"<pre><code>\u200b\u65b0\u5efa\u200b\u6216\u5c0e\u5165\u200b\u9322\u200b\u5305\u200b\u5730\u5740\u200b--&gt;\u200b\u5275\u5efa\u200bdpos --&gt;\u200b\u5275\u5efa\u9598\u200b\u9053\u200b--&gt;\u200b\u8cea\u62bc\u200bFM --&gt;\u200b\u9818\u53d6\u200b\u734e\u52f5\u200b\n</code></pre>"},{"location":"gateway/guide-linux/#_8","title":"\u65b0\u5efa\u200b\u9322\u5305","text":""},{"location":"gateway/guide-linux/#_9","title":"\u5c0e\u5165\u200b\u9322\u200b\u5305","text":""},{"location":"gateway/guide-linux/#dpos","title":"\u5275\u5efa\u200bdpos","text":""},{"location":"gateway/guide-linux/#_10","title":"\u7533\u8bf7\u200b\u7f51\u5173","text":""},{"location":"gateway/guide-linux/#fm","title":"\u8cea\u62bc\u200bFM","text":""},{"location":"gateway/guide-linux/#_11","title":"\u9818\u53d6\u200b\u734e\u52f5","text":""},{"location":"gateway/guide-linux/#_12","title":"\u9996\u9801","text":"<pre><code>\u200b\u9996\u9801\u200b\u5305\u542b\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u5168\u5c40\u6027\u200b\u7684\u200b\u67e5\u770b\u200b\u8207\u200b\u529f\u80fd\u200b\n\u200b\u5176\u4e2d\u200b\u5305\u62ec\u200b\uff1a\n\n\u200b\u67e5\u770b\u200b\u5340\u584a\u200b\u540c\u6b65\u200b\u60c5\u6cc1\u200b \uff08\u200b\u4ecb\u9762\u200b\u53f3\u4e0a\u65b9\u200b\uff09\n</code></pre> <pre><code>\u200b\u67e5\u770b\u200b\u4efb\u52d9\u200b\u72c0\u614b\u200b\uff08\u200b\u4ecb\u9762\u200b\u53f3\u4e0a\u65b9\u200b\uff09\n</code></pre> <pre><code>\u200b\u7ba1\u7406\u200b\u8edf\u4ef6\u200b\u8a2d\u7f6e\u200b \uff08\u200b\u4ecb\u9762\u200b\u5de6\u4e0b\u89d2\u200b\uff09\n</code></pre>"},{"location":"gateway/guide-linux/#_13","title":"\u64cd\u4f5c","text":"<pre><code>\u200b\u53f3\u4e0a\u89d2\u200b\u7684\u200b\u64cd\u4f5c\u200b\u53ef\u4ee5\u200b\u7ba1\u7406\u200bDID\u200b\u548c\u200b\u4fee\u6539\u200b\u7db2\u95dc\u200b\u4fe1\u606f\u200b\n</code></pre>"},{"location":"gateway/guide-linux/#did","title":"DID\u200b\u6bb5\u200b\u7ba1\u7406","text":"<pre><code>\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u8cea\u62bc\u200bFM\u200b\u7684\u200b\u65b9\u5f0f\u200b\u7372\u53d6\u200b\u66f4\u200b\u591a\u200b\u7684\u200bDID\u200b\u865f\u6bb5\u200b\n</code></pre> <pre><code>\u200b\u9996\u9801\u200b\u5de6\u5074\u200b\u9078\u7dda\u689d\u200b\uff0c\u200b\u5305\u62ec\u200b\u8cc7\u7522\u200b\u548c\u200b\u7db2\u95dc\u200b\u5169\u500b\u200b\u9078\u9805\u200b\u5361\u200b\n</code></pre>"},{"location":"gateway/guide-linux/#_14","title":"\u8cc7\u7522","text":"<pre><code>\u200b\u8cc7\u7522\u200b\u754c\u9762\u200b\u7ba1\u7406\u200b\u5305\u62ec\u200b\u9918\u984d\u200b\u3001\u200b\u8f49\u8cec\u200b\u3001\u200b\u4ea4\u6613\u200b\u8a18\u9304\u200b\u3001\u200b\u8cec\u865f\u200b\u7684\u200b\u7ba1\u7406\u200b\n\n\u200b\u5de6\u5074\u200b\u4e09\u500b\u200b\u6309\u9215\u200b\uff0c\u200b\u5206\u5225\u200b\u5c0d\u200b\u61c9\u200b DST,FM\uff0cHASH\u200b\u4e09\u500b\u200b\u4e3b\u5e63\u200b\n</code></pre> <pre><code>\u200b\u53f3\u5074\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u9918\u984d\u200b\u6578\u91cf\u200b \u200b\u4ea4\u6613\u200b\u8a18\u9304\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u9032\u884c\u200b\u4e3b\u5e63\u200b\u7684\u200b\u767c\u9001\u200b\u548c\u200b\u63a5\u6536\u200b\n</code></pre> <pre><code>\u200b\u9019\u88e1\u5c0e\u200b\u51fa\u52a9\u200b\u8a18\u8a5e\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4fee\u6539\u200b\u5bc6\u78bc\u200b\n</code></pre>"},{"location":"gateway/guide-linux/#_15","title":"\u7db2\u95dc","text":"<pre><code>\u200b\u7db2\u95dc\u200b\u529f\u80fd\u200b\u7ba1\u7406\u200bdpos\u200b\u8cea\u62bc\u200b\uff0c\u200b\u7db2\u95dc\u200b\u670d\u52d9\u5668\u200b\uff0c\u200b\u7db2\u95dc\u200bapp\uff0c\u200b\u7db2\u95dc\u5bc6\u200b\u9470\u200b\u7b49\u200b\n</code></pre>"},{"location":"gateway/guide-linux/#dpos_1","title":"DPOS\u200b\u8cea\u62bc\u200b\u7ba1\u7406","text":"<pre><code>\u200b\u6210\u70ba\u9a57\u200b\u8b49\u5668\u200b\u5f8c\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b _DPOS\u200b\u8cea\u62bc\u200b\u7ba1\u7406\u200b_ \u200b\u9801\u9762\u200b\u67e5\u770b\u200b\u672c\u7bc0\u9ede\u200b\u7684\u200bDPOS\u200b\u72c0\u614b\u200b\n\n\u200b\u53ef\u4ee5\u200b\u9032\u884c\u8cea\u200b\u62bc\u200b\u8207\u200b\u8d16\u200b\u56de\u200b\n</code></pre> <pre><code>DPOS\u200b\u7684\u200b\u8d16\u200b\u56de\u200b\u4e0d\u662f\u200b\u7acb\u5373\u200b\u5230\u200b\u8cec\u200b\u7684\u200b\uff0c\u200b\u5728\u200b\u6b64\u200b\u67e5\u770b\u200b\u8d16\u56de\u200b\u72c0\u614b\u200b\n</code></pre> <pre><code>\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u548c\u200b\u9818\u53d6\u200b\u8cea\u62bc\u200b\u734e\u52f5\u200b\u4ee5\u53ca\u200b\u4f63\u91d1\u200b\n</code></pre> <pre><code>\u200b\u5728\u200b\u6b64\u200b\u4fee\u6539\u200b\u7db2\u95dc\u200b\u7684\u200b\u8a2d\u7f6e\u200b\n</code></pre>"},{"location":"gateway/guide-linux/#_16","title":"\u7db2\u95dc\u200b\u670d\u52d9\u5668\u200b\u8cc7\u6e90","text":""},{"location":"gateway/guide-linux/#app","title":"\u7db2\u95dc\u200bapp","text":""},{"location":"gateway/guide-linux/#_17","title":"\u7db2\u95dc\u5bc6\u200b\u9470","text":"<pre><code>\u200b\u7db2\u95dc\u5bc6\u200b\u9470\u200b\u7684\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b\u8a73\u898b\u200b\n</code></pre>"},{"location":"gateway/guide-linux/#_18","title":"\u7db2\u95dc\u5bc6\u200b\u9470\u200b\u4f7f\u7528\u200b\u65b9\u6cd5","text":""},{"location":"gateway/guide-linux/#_19","title":"\u8a2d\u7f6e","text":"<pre><code>\u200b\u8a2d\u7f6e\u200b\u5305\u62ec\u200b\uff1a\u200b\u7248\u672c\u200b\u6aa2\u6e2c\u200b\u3001\u200b\u8a9e\u8a00\u200b\u6aa2\u6e2c\u200b\u3001\u200b\u6b77\u53f2\u200b\u6e05\u9664\u200b\u8a2d\u7f6e\u200b\u3001\u200b\u7bc0\u9ede\u200b\u8a2d\u7f6e\u200b\u3001\u200b\u6578\u64da\u200b\u76ee\u9304\u200b\u8a2d\u7f6e\u200b\u3001\u200b\u8def\u7531\u200b\u5c64\u6578\u200b\u6aa2\u6e2c\u200b\n</code></pre>"},{"location":"gateway/guide-linux/#_20","title":"\u5347\u7d1a","text":""},{"location":"gateway/guide-linux/#centos","title":"centos\u200b\u7cfb\u7d71","text":"<pre><code>\u200b\u5982\u679c\u200b\u7cfb\u7d71\u200b\u6709\u200b\u5347\u7d1a\u200b\u4efb\u52d9\u200b\uff0c\u200b\u754c\u9762\u200b\u6703\u200b\u81ea\u52d5\u5f48\u200b\u51fa\u5347\u7d1a\u200b\u7a97\u53e3\u200b\n</code></pre> <pre><code>\u200b\u9ede\u64ca\u200b\u5347\u7d1a\u200b\uff0c\u200b\u6703\u200b\u81ea\u52d5\u200b\u4e0b\u8f09\u200b\u6700\u65b0\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\n</code></pre> <pre><code>\u200b\u65b0\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4e0b\u8f09\u200b\u5b8c\u6210\u200b\u5f8c\u200b\uff0c\u200b\u6703\u200b\u63d0\u793a\u200b\u5347\u7d1a\u200b\u6b65\u9a5f\u200b\uff0c\u200b\u7136\u5f8c\u9ede\u64ca\u200b\u9000\u51fa\u200b\n</code></pre> <pre><code>\u200b\u96d9\u64ca\u200b\u65b0\u200b\u751f\u6210\u200b\u7684\u200b\u5716\u6a19\u200bupgrade.desktop,\u200b\u9ede\u64ca\u200btrust and Launch \u200b\u555f\u52d5\u200b\u5347\u7d1a\u200b\u3002\n</code></pre> <pre><code>\u200b\u5347\u7d1a\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u9700\u8981\u200b\u8f38\u5165\u200b\u4e00\u6b21\u200b\u7576\u524d\u200b\u767b\u9304\u200b\u7528\u6236\u200b\u7684\u200b\u5bc6\u78bc\u200b\u9032\u884c\u200b\u6388\u6b0a\u200b\u64cd\u4f5c\u200b\n</code></pre>"},{"location":"gateway/guide-linux/#ubuntu","title":"ubuntu\u200b\u7cfb\u7d71","text":"<pre><code>\u200b\u5982\u679c\u200b\u7cfb\u7d71\u200b\u6709\u200b\u5347\u7d1a\u200b\u4efb\u52d9\u200b\uff0c\u200b\u754c\u9762\u200b\u6703\u200b\u81ea\u52d5\u5f48\u200b\u51fa\u5347\u7d1a\u200b\u7a97\u53e3\u200b\n</code></pre> <pre><code>\u200b\u9ede\u64ca\u200b\u5347\u7d1a\u200b\uff0c\u200b\u6703\u200b\u81ea\u52d5\u200b\u4e0b\u8f09\u200b\u6700\u65b0\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\n</code></pre> <pre><code>\u200b\u65b0\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4e0b\u8f09\u200b\u5b8c\u6210\u200b\u5f8c\u200b\uff0c\u200b\u6703\u200b\u63d0\u793a\u200b\u5347\u7d1a\u200b\u6b65\u9a5f\u200b\uff0c\u200b\u7136\u5f8c\u9ede\u64ca\u200b\u9000\u51fa\u200b\n</code></pre> <pre><code>\u200b\u53f3\u9375\u200b\u96fb\u64ca\u200b\u5716\u6a19\u200bupgrade.desktop,\u200b\u9ede\u64ca\u200b\u5c6c\u6027\u200b\n</code></pre> <pre><code>\u200b\u9ede\u64ca\u200b\u6b0a\u9650\u6a19\u200b\u7c64\u200b\uff0c\u200b\u52fe\u9078\u200b\u5141\u8a31\u200b\u6a94\u6848\u200b\u4f5c\u70ba\u200b\u7a0b\u5f0f\u200b\u57f7\u884c\u200b\n</code></pre> <pre><code>\u200b\u53f3\u9375\u200b\u9ede\u64ca\u200b\u5716\u6a19\u200bupgrade.desktop,\u200b\u9078\u64c7\u200b\u4f5c\u70ba\u200b\u7a0b\u5e8f\u200b\u904b\u884c\u200b\u4f86\u200b\u9032\u884c\u200b\u5347\u7d1a\u200b\u3002\n</code></pre> <pre><code>\u200b\u57f7\u884c\u200b\u904e\u7a0b\u200b\u4e2d\u6703\u200b\u63d0\u793a\u200b\u8f38\u5165\u200b\u7576\u524d\u200b\u7528\u6236\u200b\u5bc6\u78bc\u200b\u9032\u884c\u200b\u6388\u6b0a\u200b\u64cd\u4f5c\u200b\n</code></pre>"},{"location":"gateway/guide-linux/#_21","title":"\u624b\u5de5\u200b\u5347\u7ea7","text":"<pre><code>\u200b\u624b\u52a8\u200b\u5347\u7ea7\u200b\u9700\u8981\u200b\u5728\u200b\u547d\u4ee4\u200b\u7a97\u53e3\u200b\u4ee5\u200b\u7ba1\u7406\u5458\u200b\u8eab\u4efd\u200b\u8fd0\u884c\u200b\u547d\u4ee4\u200b./gateway upgrade\u200b\u8fdb\u884c\u200b\u624b\u52a8\u200b\u5347\u7ea7\u200b,\u200b\u5982\u679c\u200b\u7f51\u5173\u200b\u7a0b\u5e8f\u200b\u6b63\u5728\u200b\u8fd0\u884c\u200b\u4e2d\u200b,\u200b\u5219\u200b\u4f1a\u200b\u63d0\u793a\u200b\u5173\u95ed\u200b\u7f51\u5173\u200b,\u200b\u5e76\u200b\u7ed9\u51fa\u200b\u9000\u51fa\u200b\u7f51\u5173\u200b\u7684\u200b\u547d\u4ee4\u200b: curl http://127.0.0.1:50321/soft/exit\n</code></pre> <pre><code>\u200b\u6267\u884c\u200b\u9000\u51fa\u200b\u547d\u4ee4\u200b\u540e\u200b\u7f51\u5173\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u9000\u51fa\u200b\n</code></pre> <pre><code>\u200b\u91cd\u65b0\u200b\u6267\u884c\u200b\u5347\u7ea7\u200b\u547d\u4ee4\u200b ./gateway upgrade  \u200b\u7a0b\u5e8f\u200b\u4f1a\u200b\u63d0\u793a\u200b\u5f53\u524d\u200b\u7248\u672c\u53f7\u200b\u548c\u200b\u5347\u7ea7\u200b\u7248\u672c\u53f7\u200b,\u200b\u6838\u5bf9\u200b\u65e0\u8bef\u200b\u540e\u200b\u8f93\u5165\u200by\u200b\u6267\u884c\u200b\u5347\u7ea7\u200b\u64cd\u4f5c\u200b\n</code></pre> <pre><code>\u200b\u5347\u7ea7\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u4f1a\u200b\u63d0\u793a\u200b\u4e0b\u8f7d\u200b\u76ee\u5f55\u200b\u53ca\u200b\u4e0b\u8f7d\u200b\u7684\u200burl\u200b\u5730\u5740\u200b\n</code></pre> <pre><code>\u200b\u5982\u679c\u200b\u5347\u7ea7\u200b\u9047\u5230\u200b\u6743\u9650\u200b\u9519\u8bef\u200b,\u200b\u8bf7\u4ee5\u200b\u7ba1\u7406\u5458\u200b\u6a21\u5f0f\u200b\u91cd\u65b0\u200b\u8fd0\u884c\u200b\u5347\u7ea7\u200b\u547d\u4ee4\u200b\n</code></pre> <pre><code>\u200b\u5347\u7ea7\u200b\u7ed3\u675f\u200b\u540e\u200b\u4f1a\u200b\u63d0\u793a\u200b\u8fdb\u5165\u200b\u5230\u200b\u6307\u5b9a\u200b\u76ee\u5f55\u200b,\u200b\u4ee5\u200b\u7ba1\u7406\u5458\u200b\u8eab\u4efd\u200b\u91cd\u65b0\u200b\u6267\u884c\u200b\u521d\u59cb\u5316\u200b\u64cd\u4f5c\u200b,\u200b\u6267\u884c\u200b\u5b8c\u6210\u200b\u540e\u200b\u53ef\u200b\u6b63\u5e38\u200b\u542f\u52a8\u200b\u7a0b\u5e8f\u200b\n</code></pre>"},{"location":"gateway/guide-win/","title":"windows\u200b\u7db2\u95dc\u200b\u64cd\u4f5c\u200b\u6307\u5357","text":""},{"location":"gateway/guide-win/#_1","title":"\u5b89\u88dd","text":"<pre><code>\u200b\u9996\u5148\u200b\u4e0b\u8f09\u200b\u58d3\u7e2e\u200b\u6a94\u200b\n</code></pre> <pre><code>\u200b\u6309\u200b\u5169\u4e0b\u200b\u58d3\u7e2e\u200b\u6a94\u200b\uff0c\u200b\u5c07\u58d3\u7e2e\u200b\u5305\u5167\u200b\u7684\u200b\u76ee\u9304\u200b\u8907\u200b\u88fd\u200b\uff0c\u200b\u7c98\u8cbc\u200b\u5230\u200b\u65e2\u5b9a\u200b\u7684\u200b\u9805\u76ee\u200b\u76ee\u9304\u200b\u4e0b\u200b\n</code></pre> <pre><code>\u200b\u9ede\u64ca\u200binstall.bat\n</code></pre> <pre><code>\u200b\u6703\u200b\u5728\u6848\u200b\u982d\u200b\u751f\u6210\u200bDST.exe\uff0c\u200b\u6309\u200b\u5169\u4e0b\u200b\u5373\u53ef\u200b\u9032\u5165\u200b\u7a0b\u5f0f\u200b\n</code></pre>"},{"location":"gateway/guide-win/#_2","title":"\u6d41\u7a0b","text":"<pre><code>\u200b\u65b0\u5efa\u200b\u6216\u5c0e\u5165\u200b\u9322\u200b\u5305\u200b\u5730\u5740\u200b--&gt;\u200b\u5275\u5efa\u200bdpos --&gt;\u200b\u5275\u5efa\u9598\u200b\u9053\u200b--&gt;\u200b\u8cea\u62bc\u200bFM --&gt;\u200b\u9818\u53d6\u200b\u734e\u52f5\u200b\n</code></pre>"},{"location":"gateway/guide-win/#_3","title":"\u65b0\u5efa\u200b\u9322\u5305","text":""},{"location":"gateway/guide-win/#_4","title":"\u5c0e\u5165\u200b\u9322\u200b\u5305","text":""},{"location":"gateway/guide-win/#dpos","title":"\u5275\u5efa\u200bdpos","text":""},{"location":"gateway/guide-win/#_5","title":"\u7533\u8bf7\u200b\u7f51\u5173","text":""},{"location":"gateway/guide-win/#fm","title":"\u8cea\u62bc\u200bFM","text":""},{"location":"gateway/guide-win/#_6","title":"\u9818\u53d6\u200b\u734e\u52f5","text":""},{"location":"gateway/guide-win/#_7","title":"\u9996\u9801","text":"<pre><code>\u200b\u9996\u9801\u200b\u5305\u542b\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u5168\u5c40\u6027\u200b\u7684\u200b\u67e5\u770b\u200b\u8207\u200b\u529f\u80fd\u200b\n\u200b\u5176\u4e2d\u200b\u5305\u62ec\u200b\uff1a\n\n\u200b\u67e5\u770b\u200b\u5340\u584a\u200b\u540c\u6b65\u200b\u60c5\u6cc1\u200b \uff08\u200b\u4ecb\u9762\u200b\u53f3\u4e0a\u65b9\u200b\uff09\n</code></pre> <pre><code>\u200b\u67e5\u770b\u200b\u4efb\u52d9\u200b\u72c0\u614b\u200b\uff08\u200b\u4ecb\u9762\u200b\u53f3\u4e0a\u65b9\u200b\uff09\n</code></pre> <pre><code>\u200b\u7ba1\u7406\u200b\u8edf\u4ef6\u200b\u8a2d\u7f6e\u200b \uff08\u200b\u4ecb\u9762\u200b\u5de6\u4e0b\u89d2\u200b\uff09\n</code></pre>"},{"location":"gateway/guide-win/#_8","title":"\u64cd\u4f5c","text":"<pre><code>\u200b\u53f3\u4e0a\u89d2\u200b\u7684\u200b\u64cd\u4f5c\u200b\u53ef\u4ee5\u200b\u7ba1\u7406\u200bDID\u200b\u548c\u200b\u4fee\u6539\u200b\u7db2\u95dc\u200b\u4fe1\u606f\u200b\n</code></pre>"},{"location":"gateway/guide-win/#did","title":"DID\u200b\u6bb5\u200b\u7ba1\u7406","text":"<pre><code>\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u8cea\u62bc\u200bFM\u200b\u7684\u200b\u65b9\u5f0f\u200b\u7372\u53d6\u200b\u66f4\u200b\u591a\u200b\u7684\u200bDID\u200b\u865f\u6bb5\u200b\n</code></pre> <pre><code>\u200b\u9996\u9801\u200b\u5de6\u5074\u200b\u9078\u7dda\u689d\u200b\uff0c\u200b\u5305\u62ec\u200b\u8cc7\u7522\u200b\u548c\u200b\u7db2\u95dc\u200b\u5169\u500b\u200b\u9078\u9805\u200b\u5361\u200b\n</code></pre>"},{"location":"gateway/guide-win/#_9","title":"\u8cc7\u7522","text":"<pre><code>\u200b\u8cc7\u7522\u200b\u754c\u9762\u200b\u7ba1\u7406\u200b\u5305\u62ec\u200b\u9918\u984d\u200b\u3001\u200b\u8f49\u8cec\u200b\u3001\u200b\u4ea4\u6613\u200b\u8a18\u9304\u200b\u3001\u200b\u8cec\u865f\u200b\u7684\u200b\u7ba1\u7406\u200b\n\n\u200b\u5de6\u5074\u200b\u4e09\u500b\u200b\u6309\u9215\u200b\uff0c\u200b\u5206\u5225\u200b\u5c0d\u200b\u61c9\u200b DST,FM\uff0cHASH\u200b\u4e09\u500b\u200b\u4e3b\u5e63\u200b\n</code></pre> <pre><code>\u200b\u53f3\u5074\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u9918\u984d\u200b\u6578\u91cf\u200b \u200b\u4ea4\u6613\u200b\u8a18\u9304\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u9032\u884c\u200b\u4e3b\u5e63\u200b\u7684\u200b\u767c\u9001\u200b\u548c\u200b\u63a5\u6536\u200b\n</code></pre> <pre><code>\u200b\u9019\u88e1\u5c0e\u200b\u51fa\u52a9\u200b\u8a18\u8a5e\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4fee\u6539\u200b\u5bc6\u78bc\u200b\n</code></pre>"},{"location":"gateway/guide-win/#_10","title":"\u7db2\u95dc","text":"<pre><code>\u200b\u7db2\u95dc\u200b\u529f\u80fd\u200b\u7ba1\u7406\u200bdpos\u200b\u8cea\u62bc\u200b\uff0c\u200b\u7db2\u95dc\u200b\u670d\u52d9\u5668\u200b\uff0c\u200b\u7db2\u95dc\u200bapp\uff0c\u200b\u7db2\u95dc\u5bc6\u200b\u9470\u200b\u7b49\u200b\n</code></pre>"},{"location":"gateway/guide-win/#dpos_1","title":"DPOS\u200b\u8cea\u62bc\u200b\u7ba1\u7406","text":"<pre><code>\u200b\u6210\u70ba\u9a57\u200b\u8b49\u5668\u200b\u5f8c\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b _DPOS\u200b\u8cea\u62bc\u200b\u7ba1\u7406\u200b_ \u200b\u9801\u9762\u200b\u67e5\u770b\u200b\u672c\u7bc0\u9ede\u200b\u7684\u200bDPOS\u200b\u72c0\u614b\u200b\n\n\u200b\u53ef\u4ee5\u200b\u9032\u884c\u8cea\u200b\u62bc\u200b\u8207\u200b\u8d16\u200b\u56de\u200b\n</code></pre> <pre><code>DPOS\u200b\u7684\u200b\u8d16\u200b\u56de\u200b\u4e0d\u662f\u200b\u7acb\u5373\u200b\u5230\u200b\u8cec\u200b\u7684\u200b\uff0c\u200b\u5728\u200b\u6b64\u200b\u67e5\u770b\u200b\u8d16\u56de\u200b\u72c0\u614b\u200b\n</code></pre> <pre><code>\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b\u548c\u200b\u9818\u53d6\u200b\u8cea\u62bc\u200b\u734e\u52f5\u200b\u4ee5\u53ca\u200b\u4f63\u91d1\u200b\n</code></pre> <pre><code>\u200b\u5728\u200b\u6b64\u200b\u4fee\u6539\u200b\u7db2\u95dc\u200b\u7684\u200b\u8a2d\u7f6e\u200b\n</code></pre>"},{"location":"gateway/guide-win/#_11","title":"\u7db2\u95dc\u200b\u670d\u52d9\u5668\u200b\u8cc7\u6e90","text":""},{"location":"gateway/guide-win/#app","title":"\u7db2\u95dc\u200bapp","text":""},{"location":"gateway/guide-win/#_12","title":"\u7db2\u95dc\u5bc6\u200b\u9470","text":"<pre><code>\u200b\u7db2\u95dc\u5bc6\u200b\u9470\u200b\u7684\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b\u8a73\u898b\u200b\n</code></pre>"},{"location":"gateway/guide-win/#_13","title":"\u7db2\u95dc\u5bc6\u200b\u9470\u200b\u4f7f\u7528\u200b\u65b9\u6cd5","text":""},{"location":"gateway/guide-win/#_14","title":"\u8a2d\u7f6e","text":"<pre><code>\u200b\u8a2d\u7f6e\u200b\u5305\u62ec\u200b\uff1a\u200b\u7248\u672c\u200b\u6aa2\u6e2c\u200b\u3001\u200b\u8a9e\u8a00\u200b\u6aa2\u6e2c\u200b\u3001\u200b\u6b77\u53f2\u200b\u6e05\u9664\u200b\u8a2d\u7f6e\u200b\u3001\u200b\u7bc0\u9ede\u200b\u8a2d\u7f6e\u200b\u3001\u200b\u6578\u64da\u200b\u76ee\u9304\u200b\u8a2d\u7f6e\u200b\u3001\u200b\u8def\u7531\u200b\u5c64\u6578\u200b\u6aa2\u6e2c\u200b\n</code></pre>"},{"location":"gateway/guide-win/#_15","title":"\u5347\u7d1a","text":"<pre><code>\u200b\u901a\u904e\u200b\u6aa2\u67e5\u200b\u66f4\u65b0\u200b\u67e5\u770b\u200b\u662f\u5426\u200b\u6709\u200b\u53ef\u5347\u7d1a\u200b\u7684\u200b\u7248\u672c\u200b\n</code></pre> <pre><code>\u200b\u7b49\u5f85\u200b\u4e0b\u8f09\u200b\u5b8c\u7562\u200b\n</code></pre> <pre><code>\u200b\u9000\u51fa\u200b\u66f4\u65b0\u200b\u5373\u53ef\u200b\n</code></pre>"},{"location":"gateway/key-backup/","title":"\u5bc6\u94a5\u200b\u5907\u4efd\u200b\u548c\u200b\u6062\u590d","text":"<p> \u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u5c07\u9598\u200b\u9053\u200b\u7684\u200b\u91d1\u200b\u9470\u200b\uff0c\u200b\u9a57\u8b49\u5668\u200b\u91d1\u200b\u9470\u200b\u548c\u200bapp\u200b\u52a0\u5bc6\u200b\u6a94\u5099\u200b\u4efd\u200b\uff0c\u200b\u4ee5\u4f9b\u200b\u9700\u8981\u200b\u6642\u200b\u6062\u200b\u5fa9\u200b</p> <p>\u200b\u5099\u4efd\u200b\u5206\u70ba\u200b\u624b\u52d5\u5099\u200b\u4efd\u200b\u8207\u200b\u4e0a\u200b\u93c8\u5099\u200b\u4efd\u200b\uff0c\u200b\u4e0a\u200b\u93c8\u5099\u200b\u4efd\u200b\u53ea\u200b\u9700\u82b1\u8cbb\u200b\u5c11\u91cf\u200b\u7684\u200bgas\uff0c\u200b\u5373\u53ef\u200b\u5099\u4efd\u200b\u5230\u200b\u93c8\u200b\u4e0a\u200b\uff0c\u200b\u96a8\u6642\u200b\u53ef\u4ee5\u200b\u4e0b\u8f09\u200b</p>"},{"location":"gateway/key-backup/#_2","title":"\u624b\u52a8\u200b\u5907\u4efd","text":"<p>\u200b\u9ede\u64ca\u200b\u5de6\u5074\u200b\u9598\u9053\u200b\u9078\u9805\u200b\uff0c\u200b\u9ede\u64ca\u200b[\u200b\u4e0b\u8f09\u200b\u5bc6\u200b\u9470\u200b\u6a94\u6848\u200b]\u200b\u6309\u9215\u200b\uff0c\u200b\u5c07\u5176\u200b\u4fdd\u5b58\u200b\u5230\u200b\u6307\u5b9a\u200b\u4f4d\u7f6e\u200b\u5373\u53ef\u200b</p>"},{"location":"gateway/key-backup/#_3","title":"\u4e0a\u200b\u94fe\u200b\u5907\u4efd","text":"<p>\u200b\u9ede\u64ca\u200b\u5de6\u5074\u200b\u9598\u9053\u200b\u9078\u9805\u200b\uff0c\u200b\u9ede\u64ca\u200b[\u200b\u9598\u9053\u200b\u5bc6\u200b\u9470\u200b\u93c8\u200b\u4e0a\u200b\u5b58\u5132\u200b]\u200b\u6309\u9215\u200b\uff0c\u200b\u8f38\u5165\u200b\u5bc6\u78bc\u200b\uff0c\u200b\u5f85\u200b\u4e0a\u200b\u93c8\u200b\u6210\u529f\u200b\u5373\u200b\u5b58\u5132\u200b\u5b8c\u7562\u200b</p>"},{"location":"gateway/key-backup/#_4","title":"\u8fd8\u539f","text":"<p>\u200b\u5982\u679c\u200b\u662f\u200b\u93c8\u200b\u4e0a\u200b\u5b58\u5132\u200b\u7684\u200b\uff0c\u200b\u90a3\u9ebc\u200b[\u200b\u9598\u9053\u200b\u5bc6\u200b\u9470\u200b\u93c8\u200b\u4e0a\u200b\u5b58\u5132\u200b\u6309\u9215\u200b]\u200b\u6309\u200b\u9215\u6703\u8b8a\u200b\u66f4\u200b\u70ba\u200b[\u200b\u4e0b\u8f09\u200b\u93c8\u200b\u4e0a\u5bc6\u200b\u9470\u200b]\uff0c\u200b\u9ede\u64ca\u200b\u5f8c\u200b\uff0c\u200b\u6703\u5c07\u200b\u4e09\u500b\u200b\u6a94\u6848\u200b\u4fdd\u5b58\u200b\u5728\u200b\u9598\u9053\u200b\u76ee\u9304\u200b\u4e0b\u200b\u7684\u200bGatewayKey\u200b\u76ee\u9304\u200b</p> <pre><code>GatewayKey/\n\u251c\u2500\u2500 fmc.jks                 # app\u200b\u7684\u200b\u7c3d\u540d\u200b\u6a94\u6848\u200b\n\u2502\u2500\u2500 node_key.json           # \u200b\u9598\u9053\u200b\u5bc6\u200b\u9470\u200b\u6a94\u6848\u200b\n\u2514\u2500\u2500 priv_validator_key.json # \u200b\u9a57\u8b49\u5668\u200b\u79c1\u5bc6\u200b\u5bc6\u9470\u200b\u6a94\u6848\u200b\n</code></pre> <p>\u200b\u5728\u200b\u93c8\u200b\u505c\u6b62\u200b\u72c0\u614b\u200b\u4e0b\u200b \u200b\u5c07\u200bfmc.jks\u200b\u79fb\u52d5\u200b\u5230\u200b\u5bb6\u200b\u76ee\u9304\u200b\u4e0b\u200b</p> <p>linux\u200b\u7cfb\u7d71\u200b\u4e2d\u200b \u200b\u901a\u904e\u200b</p> <pre><code>echo $HOME\n</code></pre> <p>\u200b\u547d\u4ee4\u200b\u67e5\u770b\u200b\u7576\u524d\u200b\u7528\u200b\u6236\u5bb6\u200b\u76ee\u9304\u200b\u4f4d\u7f6e\u200b</p> <p>windows\u200b\u7cfb\u7d71\u200b\u4e2d\u200b\uff0c\u200b\u6253\u958b\u200b\u8cc7\u6e90\u200b\u7ba1\u7406\u5668\u200b\uff0c\u200b\u5728\u200b\u5730\u5740\u200b\u6b04\u4e2d\u200b\u8f38\u5165\u200b</p> <pre><code>%homepath%\n</code></pre> <p>\u200b\u5373\u53ef\u200b\u9032\u5165\u200b\u7576\u524d\u200b\u7528\u200b\u6236\u5bb6\u200b\u76ee\u9304\u200b\u4e0b\u200b</p> <p>\u200b\u5c07\u200bnode_ key.json\u200b\u548c\u200bpriv_ validator_ key.json\u200b\u79fb\u52d5\u200b\u5230\u200bgateway\u200b\u76ee\u9304\u200b\u4e0b\u200b\u7684\u200b     .stcd/config/ \u200b\u4e0b\u200b</p> <p>\u200b\u5982\u679c\u200b\u662f\u200b\u624b\u52d5\u200b\u5b58\u5132\u200b\uff0c\u200b\u5247\u540c\u6a23\u200b\u7684\u200b\uff0c\u200b\u5c07\u5c0d\u200b\u61c9\u200b\u6a94\u6848\u200b\u9084\u539f\u200b\u5230\u200b\u5c0d\u200b\u61c9\u200b\u4f4d\u7f6e\u200b\u5373\u53ef\u200b</p>"},{"location":"gateway/mainnet/","title":"\u4e3b\u7db2","text":"<p>\u200b\u672c\u6587\u200b\u6a94\u200b\u6982\u8ff0\u200b\u4e86\u200b\u52a0\u5165\u200b\u73fe\u6709\u200b\u4e3b\u7db2\u200b\u7684\u200b\u6b65\u9a5f\u200b\u3002</p>"},{"location":"gateway/mainnet/#_2","title":"\u5148\u51b3\u6761\u4ef6\u200b\u9605\u8bfb","text":"<ul> <li>\u200b\u9a57\u8b49\u5668\u200b\u5b89\u5168\u200b</li> </ul>"},{"location":"gateway/mainnet/#_3","title":"\u4e3b\u7db2","text":"<p>\u200b\u60a8\u200b\u9700\u8981\u200b\u8a2d\u7f6e\u200b \u200b\u521b\u4e16\u200b\u6587\u4ef6\u200b \u200b\u548c\u200b \u200b\u79cd\u5b50\u200b\u8282\u70b9\u200b\u3002 \u200b\u5982\u679c\u200b\u60a8\u200b\u9700\u8981\u200b\u6709\u200b\u95dc\u904e\u200b\u53bb\u200b\u7db2\u7d61\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u67e5\u770b\u200b\u6211\u5011\u200b\u7684\u200b mainnet repo\u3002 \u200b\u4e0b\u8868\u200b\u6982\u8ff0\u200b\u4e86\u200b\u6240\u6709\u4e3b\u200b\u7db2\u93c8\u200b ID\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u7576\u93c8\u200b\u4e0a\u200b\u5b58\u5728\u200b\u6d3b\u52d5\u200b\u7684\u200b\u8edf\u4ef6\u200b\u5347\u7d1a\u200b\u63d0\u8b70\u200b\u6642\u200b\uff0c\u200b\u986f\u793a\u200b\u7684\u200b\u7248\u672c\u200b\u53ef\u80fd\u200b\u6703\u200b\u6709\u6240\u4e0d\u540c\u200b\u3002</p> Chain ID \u200b\u63cf\u8ff0\u200b \u200b\u4f4d\u7f6e\u200b \u200b\u7248\u672c\u200b \u200b\u72c0\u614b\u200b <code>daodst_7777-1</code> Daodst Mainnet 1 Daodst <code>v1.0.0</code> <code>\u200b\u6d3b\u8dc3\u200b</code> <p>\u26a0\ufe0f\u200b\u91cd\u8981\u200b\u7684\u200b: \u200b\u5982\u679c\u200b\u60a8\u200b\u4f5c\u70ba\u9a57\u200b\u8b49\u8005\u200b\u52a0\u5165\u200b\u4e3b\u7db2\u200b\uff0c\u200b\u8acb\u200b\u78ba\u4fdd\u200b\u60a8\u200b\u9075\u5faa\u200b\u6240\u6709\u200b security \u200b\u5efa\u8b70\u200b\uff01</p>"},{"location":"gateway/mainnet/#daodst","title":"\u5b89\u88c5\u200b <code>daodst</code>","text":"<p>\u200b\u6309\u7167\u200b \u200b\u5b89\u88c5\u200b \u200b\u6587\u6a94\u200b\u5b89\u88dd\u200b \u200b\u7a0b\u5e8f\u200b</p> <p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b :  \u200b\u78ba\u200b\u4fdd\u5b89\u200b\u88dd\u4e86\u200b\u6b63\u78ba\u200b\u7248\u672c\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u3002</p>"},{"location":"gateway/mainnet/#chain-id","title":"\u4fdd\u5b58\u200b Chain ID","text":"<p>\u200b\u6211\u5011\u200b\u5efa\u8b70\u200b\u5c07\u4e3b\u7db2\u200b <code>chain-id</code> \u200b\u4fdd\u5b58\u200b\u5230\u200b\u60a8\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u7684\u200b <code>client.toml</code> \u200b\u4e2d\u200b\u3002 \u200b\u9019\u5c07\u200b\u4f7f\u200b\u60a8\u200b\u4e0d\u5fc5\u200b\u70ba\u200b\u6bcf\u500b\u200b CLI \u200b\u547d\u4ee4\u200b\u624b\u52d5\u200b\u50b3\u905e\u200b <code>chain-id</code> \u200b\u6a19\u8a8c\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  \u200b\u8acb\u200b\u53c3\u95b1\u200b\u5b98\u65b9\u200b \u200b\u93c8\u200b ID \u200b\u4ee5\u4f9b\u200b\u53c3\u8003\u200b\u3002</p> <pre><code>stcd config chain-id daodst_7777-1\n</code></pre>"},{"location":"gateway/mainnet/#_4","title":"\u521d\u59cb\u5316\u200b\u7bc0\u9ede","text":"<p>\u200b\u6211\u5011\u200b\u9700\u8981\u200b\u521d\u59cb\u5316\u200b\u7bc0\u9ede\u200b\u4ee5\u200b\u5275\u5efa\u200b\u6240\u6709\u200b\u5fc5\u8981\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u548c\u200b\u7bc0\u9ede\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff1a</p> <pre><code>stcd init &lt;your_custom_moniker&gt; --chain-id daodst_7777-1\n</code></pre> <p>\u26a0\ufe0f\u200b\u5371\u9669\u200b :  \u200b\u540d\u5b57\u200b\u5c0d\u200b\u50cf\u200b\u53ea\u80fd\u200b\u5305\u542b\u200b ASCII \u200b\u5b57\u7b26\u200b\u3002\u200b\u4f7f\u7528\u200b Unicode \u200b\u5b57\u7b26\u200b\u5c07\u4f7f\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u7121\u6cd5\u200b\u8a2a\u554f\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u6765\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88c5\u200b <code>stcd</code> \u200b\u4e8c\u8fdb\u5236\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f84\u200b</p> <p>\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c<code>init</code> \u200b\u547d\u4ee4\u200b\u5275\u5efa\u5e36\u200b\u6709\u5b50\u200b\u6587\u4ef6\u200b\u593e\u200b<code>config/</code> \u200b\u548c\u200b<code>data/</code> \u200b\u7684\u200b<code>$install_path/.stcd</code>\uff08\u200b\u5373\u200b<code>$HOME</code>\uff09\u200b\u76ee\u9304\u200b\u3002 \u200b\u5728\u200b <code>config</code> \u200b\u76ee\u9304\u200b\u4e2d\u200b\uff0c\u200b\u6700\u200b\u91cd\u8981\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u662f\u200b <code>app.toml</code> \u200b\u548c\u200b <code>config.toml</code>\u3002</p>"},{"location":"gateway/mainnet/#_5","title":"\u521b\u4e16\u200b &amp; \u200b\u79cd\u5b50\u200b\u8282\u70b9","text":""},{"location":"gateway/mainnet/#_6","title":"\u8907\u200b\u88fd\u200b\u5275\u200b\u4e16\u200b\u6587\u4ef6","text":"<p>\u200b\u5f9e\u200b <code>github</code> \u200b\u4e0b\u8f7d\u200b <code>genesis.json</code> \u200b\u6587\u4ef6\u200b\u4e26\u5c07\u200b\u5176\u200b\u8907\u200b\u88fd\u200b\u5230\u200b <code>config</code> \u200b\u76ee\u9304\u200b\uff1a<code>$install_path/.stcd/config/genesis.json</code>\u3002\u200b\u9019\u662f\u200b\u4e00\u500b\u200b\u5305\u542b\u200b\u93c8\u200b ID \u200b\u548c\u200b\u5275\u4e16\u8cec\u200b\u6236\u9918\u984d\u200b\u7684\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\u3002</p> <pre><code>wget https://github.com/daodst/mainnet/daodst_7777-1/genesis.json\nmv genesis.json $install_path/.stcd/config/\n</code></pre> <p>\u200b\u7136\u5f8c\u9a57\u8b49\u200bgenesis\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7684\u200b\u6b63\u200b\u78ba\u6027\u200b\uff1a</p> <pre><code>stcd validate-genesis\n</code></pre>"},{"location":"gateway/mainnet/#_7","title":"\u6dfb\u52a0\u200b\u7a2e\u5b50\u200b\u7bc0\u9ede","text":"<p>\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u9700\u8981\u200b\u77e5\u9053\u200b\u5982\u4f55\u200b\u627e\u5230\u200b peers\u3002</p> <p>\u200b\u60a8\u200b\u9700\u8981\u200b\u6dfb\u52a0\u200b\u5065\u5eb7\u200b\u7684\u200b\u7a2e\u5b50\u200b\u7bc0\u9ede\u200b \u200b\u5230\u200b <code>$install_path/.stcd/config/config.toml</code> <code>mainnet</code> \u200b\u5b58\u5132\u5eab\u200b\u5305\u542b\u200b\u4e00\u4e9b\u200b\u93c8\u63a5\u200b \u200b\u7a2e\u5b50\u200b\u7bc0\u9ede\u200b\u3002</p> <p>\u200b\u5c07\u4f4d\u200b\u65bc\u200b <code>$install_path/.stcd/config/config.toml</code> \u200b\u548c\u200b <code>seeds</code> \u200b\u4e2d\u200b\u7684\u200b\u6587\u4ef6\u200b\u7de8\u8f2f\u200b\u70ba\u200b\u4ee5\u4e0b\u200b\u5167\u5bb9\u200b\uff1a</p> <pre><code>#######################################################\n###           P2P Configuration Options             ###\n#######################################################\n[p2p]\n\n# ...\n\n# Comma separated list of seed nodes to connect to\nseeds = \"&lt;node-id&gt;@&lt;ip&gt;:&lt;p2p port&gt;\"\n</code></pre> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u4ee3\u78bc\u200b\u5f9e\u200b\u5b58\u5132\u5eab\u200b\u4e2d\u200b\u7372\u53d6\u200b\u7a2e\u5b50\u200b\u4e26\u5c07\u200b\u5176\u200b\u6dfb\u52a0\u200b\u5230\u200b\u60a8\u200b\u7684\u200b\u914d\u7f6e\u200b\u4e2d\u200b\uff1a</p> <pre><code>SEEDS=`curl -sL https://raw.githubusercontent.com/daodst/mainnet/main/daodst_7777-1/seeds.txt | awk '{print $1}' | paste -s -d, -`\nsed -i.bak -e \"s/^seeds =.*/seeds = \\\"$SEEDS\\\"/\" $install_path/.stcd/config/config.toml\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  \u200b\u6709\u95dc\u200b\u7a2e\u5b50\u200b\u548c\u200b\u7bc0\u9ede\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b Tendermint P2P \u200b\u6587\u6a94\u200b\u3002</p>"},{"location":"gateway/mainnet/#_8","title":"\u6dfb\u52a0\u200b\u6301\u4e45\u200b\u7bc0\u9ede","text":"<p>\u200b\u6211\u5011\u200b\u53ef\u4ee5\u200b\u8a2d\u7f6e\u200b <code>persistent_peers</code> <code>$install_path/.stcd/config/config.toml</code> \u200b\u4e2d\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b\u6307\u5b9a\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u5c07\u200b\u8207\u200b\u4e4b\u200b\u4fdd\u6301\u200b\u6301\u4e45\u200b\u9023\u63a5\u200b\u7684\u200b\u5c0d\u200b\u7b49\u9ede\u200b\u3002 \u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5f9e\u200b <code>mainnet</code> \u200b\u5b58\u5132\u5eab\u200b\u7684\u200b\u53ef\u7528\u200b\u7bc0\u9ede\u200b\u5217\u8868\u200b\u4e2d\u6aa2\u7d22\u200b\u5b83\u5011\u200b\u3002</p> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u904b\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u5f9e\u200b <code>PEERS</code> \u200b\u8b8a\u91cf\u200b\u7684\u200b <code>peers.txt</code> \u200b\u6587\u4ef6\u200b\u4e2d\u200b\u96a8\u6a5f\u200b\u7372\u53d6\u200b 10 \u200b\u500b\u200b\u689d\u76ee\u200b\uff1a</p> <pre><code>PEERS=`curl -sL https://raw.githubusercontent.com/daodst/mainnet/main/daodst_7777-1/peers.txt | sort -R | head -n 10 | awk '{print $1}' | paste -s -d, -`\n</code></pre> <p>\u200b\u4f7f\u7528\u200b <code>sed</code> \u200b\u5c07\u5b83\u200b\u5011\u200b\u5305\u542b\u200b\u5230\u200b\u914d\u7f6e\u200b\u4e2d\u200b\u3002\u200b\u60a8\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u624b\u52d5\u200b\u6dfb\u52a0\u200b\u5b83\u5011\u200b\uff1a</p> <pre><code>sed -i.bak -e \"s/^persistent_peers *=.*/persistent_peers = \\\"$PEERS\\\"/\" $install_path/.stcd/config/config.toml\n</code></pre>"},{"location":"gateway/mainnet/#_9","title":"\u904b\u884c\u200b\u4e3b\u7db2\u9a57\u200b\u8b49\u5668","text":"<p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  \u200b\u6709\u95dc\u200b\u5982\u4f55\u200b\u904b\u884c\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u9075\u5faa\u200b\u9a57\u8b49\u5668\u200b \u200b\u9019\u4e9b\u200b \u200b\u6307\u793a\u200b\u3002</p> <pre><code>stcd tx staking create-validator \\\n--amount=1000000000000dst \\\n--pubkey=$(stcd tendermint show-validator) \\\n--moniker=\"Daodst1\" \\\n--chain-id=&lt;chain_id&gt; \\\n--commission-rate=\"0.05\" \\\n--commission-max-rate=\"0.20\" \\\n--commission-max-change-rate=\"0.01\" \\\n--min-self-delegation=\"1000000\" \\\n--gas=\"auto\" \\\n--gas-prices=\"5000000000dst\" \\\n--from=&lt;key_name&gt;\n</code></pre> <p>\ud83d\udea8 \u200b\u5371\u96aa\u200b: \u200b\u6c38\u9060\u200b\u4e0d\u8981\u200b\u4f7f\u7528\u200b <code>test</code> \u200b\u4f5c\u4e3a\u200b\u5bc6\u94a5\u200b\u73af\u5f8c\u7aef\u200b\u5275\u5efa\u9a57\u200b\u8b49\u5668\u200b\u5bc6\u200b\u9470\u200b\u3002 \u200b\u9019\u6a23\u200b\u505a\u200b\u53ef\u80fd\u200b\u6703\u5c0e\u81f4\u200b\u60a8\u200b\u7684\u200b\u8cc7\u200b\u91d1\u901a\u200b\u904e\u200b<code>eth_sendTransaction</code> JSON-RPC \u200b\u7aef\u9ede\u200b\u9060\u7a0b\u200b\u8a2a\u554f\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u5c0e\u81f4\u200b\u8cc7\u91d1\u200b\u640d\u5931\u200b\u3002</p> <p>\u200b\u53c3\u8003\u200b\uff1a\u200b\u5b89\u5168\u200b\u8aee\u200b\u8a62\u200b\uff1a\u200b\u4e0d\u200b\u5b89\u5168\u200b\u914d\u7f6e\u200b\u7684\u200b geth \u200b\u53ef\u4ee5\u200b\u4f7f\u8cc7\u200b\u91d1\u9060\u7a0b\u200b\u8a2a\u554f\u200b</p>"},{"location":"gateway/mainnet/#_10","title":"\u555f\u52d5\u200b\u4e3b\u7db2","text":"<p>\u200b\u6700\u200b\u5f8c\u200b\u4e00\u6b65\u200b\u662f\u200b\u555f\u52d5\u200b\u7bc0\u9ede\u200b\u3002\u200b\u4e00\u65e6\u200b\u8db3\u5920\u200b\u7684\u200b\u6295\u7968\u200b\u6b0a\u200b\uff08+2/3\uff09 \u200b\u5f9e\u200b\u5275\u4e16\u9a57\u200b\u8b49\u5668\u200b\u958b\u59cb\u200b\u904b\u884c\u200b\uff0c\u200b\u7bc0\u9ede\u200b\u5c07\u958b\u59cb\u200b\u751f\u7522\u584a\u200b\u3002</p> <pre><code>stcd daemon\n</code></pre>"},{"location":"gateway/mainnet/#_11","title":"\u5206\u4eab\u200b\u4f60\u200b\u7684\u200b\u7bc0\u9ede","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5728\u200b Daodst Discord \u200b\u7684\u200b<code>#find-peers</code>\u200b\u983b\u9053\u200b\u4e2d\u200b\u5206\u4eab\u200b\u60a8\u200b\u7684\u200b\u540c\u4f34\u200b\u4e26\u5c07\u200b\u5176\u200b\u767c\u5e03\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u8981\u200b\u7372\u53d6\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b ID\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b</p> <pre><code>stcd tendermint show-node-id\n</code></pre>"},{"location":"gateway/mainnet/#_12","title":"\u72c0\u614b\u200b\u540c\u6b65\u200b\u7bc0\u9ede","text":"<p>\u200b\u5982\u679c\u200b\u60a8\u200b\u60f3\u200b\u4f7f\u7528\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u52a0\u5165\u200b\u7db2\u7d61\u200b\uff08\u200b\u5feb\u901f\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u200b\u9069\u7528\u200b\u65bc\u200b\u5b58\u6a94\u200b\u7bc0\u9ede\u200b\uff09\uff0c\u200b\u8acb\u200b\u67e5\u770b\u200b\u6211\u5011\u200b\u7684\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b \u200b\u9801\u9762\u200b\u3002</p>"},{"location":"gateway/mempool/","title":"\u5167\u5b58\u6c60","text":"<p>\u200b\u4e86\u89e3\u200b Tendermint \u200b\u4e2d\u200b\u53ef\u7528\u200b\u7684\u200b\u5167\u200b\u5b58\u6c60\u200b\u9078\u9805\u200b\u3002</p>"},{"location":"gateway/mempool/#_2","title":"\u5148\u9032\u200b\u5148\u51fa\u200b\u5167\u200b\u5b58\u6c60","text":"<p>\u200b\u5167\u5b58\u6c60\u200b\u6301\u6709\u200b\u672a\u200b\u63d0\u4ea4\u200b\u7684\u200b\u4ea4\u6613\u200b\uff0c\u200b\u9019\u4e9b\u200b\u4ea4\u6613\u200b\u5c1a\u672a\u200b\u5305\u542b\u200b\u5728\u200b\u5340\u584a\u200b\u4e2d\u200b\u3002 Tendermint \u200b\u5340\u584a\u200b\u93c8\u200b\u7684\u200b\u9ed8\u200b\u8a8d\u5167\u200b\u5b58\u6c60\u200b\u5be6\u73fe\u200b\u9075\u5faa\u200b\u5148\u9032\u200b\u5148\u51fa\u200b (FIFO) \u200b\u539f\u5247\u200b\uff0c\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u4ea4\u6613\u200b\u7684\u200b\u9806\u5e8f\u50c5\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u5b83\u5011\u200b\u5230\u200b\u9054\u200b\u7bc0\u9ede\u200b\u7684\u200b\u9806\u5e8f\u200b\u3002 \u200b\u6536\u5230\u200b\u7684\u200b\u7b2c\u4e00\u200b\u7b46\u200b\u4ea4\u6613\u200b\u5c07\u662f\u200b\u7b2c\u4e00\u200b\u7b46\u8981\u200b\u8655\u7406\u200b\u7684\u200b\u4ea4\u6613\u200b\u3002 \u200b\u9019\u9069\u200b\u7528\u200b\u65bc\u5c07\u200b\u6536\u5230\u200b\u7684\u200b\u4ea4\u6613\u200b\u516b\u5366\u200b\u7d66\u200b\u5176\u4ed6\u200b\u7bc0\u9ede\u200b\u4e26\u5c07\u200b\u5b83\u5011\u200b\u5305\u542b\u200b\u5728\u200b\u4e00\u500b\u200b\u584a\u200b\u4e2d\u200b\u3002</p>"},{"location":"gateway/mempool/#_3","title":"\u512a\u5148\u5167\u200b\u5b58\u6c60","text":"<p>\u200b\u5f9e\u200b Tendermint v0.35 \u200b\u958b\u59cb\u200b \uff08\u200b\u4e5f\u200b\u5df2\u200b\u53cd\u5411\u200b\u79fb\u690d\u200b\u5230\u200b v0.34.20\uff09 \u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u512a\u5148\u5167\u200b\u5b58\u6c60\u200b\u5be6\u73fe\u200b\u3002 \u200b\u9019\u5141\u200b\u8a31\u9a57\u200b\u8b49\u8005\u200b\u6839\u64da\u200b\u76f8\u95dc\u200b\u8cbb\u7528\u200b\u6216\u200b\u5176\u4ed6\u200b\u6fc0\u52f5\u200b\u6a5f\u5236\u200b\u9078\u64c7\u200b\u4ea4\u6613\u200b\u3002 \u200b\u5b83\u200b\u662f\u200b\u901a\u904e\u200b\u70ba\u200b\u6bcf\u500b\u200b <code>CheckTx</code> \u200b\u97ff\u61c9\u200b \u200b\u50b3\u905e\u200b\u4e00\u500b\u200b <code>priority</code> \u200b\u5b57\u6bb5\u200b\u4f86\u200b\u5be6\u73fe\u200b\u7684\u200b\uff0c \u200b\u5b83\u200b\u5728\u200b\u4efb\u4f55\u200b\u8a66\u5716\u200b\u9032\u5165\u200b\u5167\u200b\u5b58\u6c60\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e0a\u904b\u884c\u200b\u3002</p> <p>daodst \u200b\u901a\u904e\u200b\u5176\u200b\u652f\u6301\u200b EIP-1559 EVM \u200b\u4ea4\u6613\u200b \u3002 \u200b\u9019\u7a2e\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u4f7f\u7528\u200b\u4e00\u500b\u200b\u57fa\u672c\u200b\u8cbb\u7528\u200b\u548c\u200b\u4e00\u500b\u200b\u53ef\u9078\u64c7\u200b\u7684\u200b\u512a\u5148\u200b\u63d0\u793a\u200b\uff0c\u200b\u5b83\u5011\u200b\u52a0\u8d77\u200b\u4f86\u200b\u5c31\u662f\u200b\u7e3d\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\u3002 \u200b\u512a\u5148\u5167\u200b\u5b58\u6c60\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u500b\u200b\u9078\u9805\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u81ea\u52d5\u200b\u4f7f\u7528\u200b\u9019\u7a2e\u200b\u6a5f\u5236\u200b\u4f86\u200b\u751f\u6210\u200b\u584a\u200b\u3002</p> <p>\u200b\u7576\u200b\u4f7f\u7528\u200b\u512a\u5148\u200b\u5167\u5b58\u200b\u6c60\u6642\u200b\uff0c\u200b\u4e0b\u4e00\u500b\u200b\u751f\u6210\u200b\u584a\u200b\u7684\u200b\u4ea4\u6613\u200b\u6309\u7167\u200b\u512a\u5148\u7d1a\u200b\uff08\u200b\u5373\u8cbb\u7528\u200b\uff09\u200b\u5f9e\u200b\u9ad8\u5230\u200b\u4f4e\u200b\u7684\u200b\u9806\u5e8f\u200b\u9078\u64c7\u200b\u3002 \u200b\u5982\u679c\u200b mempool \u200b\u5df2\u6eff\u200b\uff0c\u200b\u512a\u5148\u7d1a\u200b\u5be6\u73fe\u200b\u5141\u8a31\u200b\u522a\u9664\u200b\u512a\u5148\u7d1a\u200b\u6700\u4f4e\u200b\u7684\u200b\u4ea4\u6613\u200b\uff0c\u200b\u76f4\u5230\u200b\u6709\u8db3\u5920\u200b\u7684\u200b\u78c1\u76e4\u200b\u7a7a\u9593\u200b\u53ef\u7528\u200b\u65bc\u200b\u50b3\u5165\u200b\u7684\u200b\u3001\u200b\u66f4\u9ad8\u200b\u512a\u5148\u7d1a\u200b\u7684\u200b\u4ea4\u6613\u200b\uff08\u200b\u53c3\u898b\u200b v1/mempool.go\u200b\u5be6\u73fe\u200b\u66f4\u200b\u591a\u200b\u7d30\u7bc0\u200b\uff09\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a\u200b\u5118\u200b\u7ba1\u4e8b\u200b\u52d9\u8655\u7406\u200b\u53ef\u4ee5\u200b\u6309\u200b\u512a\u5148\u7d1a\u200b\u6392\u5e8f\u200b\uff0c\u200b\u4f46\u4e8b\u52d9\u200b\u7684\u200b\u516b\u5366\u200b\u5c07\u59cb\u7d42\u200b\u6309\u7167\u200b FIFO \u200b\u9032\u884c\u200b\u3002</p>"},{"location":"gateway/mempool/#_4","title":"\u914d\u7f6e","text":"<p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u4f86\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88dd\u200b <code>stcd</code> \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f91\u200b</p> <p>\u200b\u8981\u200b\u4f7f\u7528\u200b\u512a\u5148\u5167\u200b\u5b58\u6c60\u200b\uff0c\u200b\u8acb\u200b\u5728\u200b <code>$install_path/.stcd/config/config.toml</code> \u200b\u7684\u200b\u7bc0\u9ede\u200b\u914d\u7f6e\u200b\u4e2d\u200b\u8abf\u6574\u200b <code>version = \"v1\"</code>\u3002 \u200b\u9ed8\u200b\u8a8d\u503c\u200b<code>v0</code>\u200b\u8868\u793a\u200b\u50b3\u7d71\u200b\u7684\u200b FIFO \u200b\u5167\u5b58\u6c60\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a\u200b\u8acb\u200b\u8a18\u4f4f\u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b\u7bc0\u9ede\u200b\u4ee5\u200b\u4f7f\u200b\u66f4\u6539\u200b\u751f\u6548\u200b\u3002</p> <p>\u200b\u8acb\u200b\u5728\u200b\u6b64\u8655\u200b\u67e5\u770b\u200b <code>config.toml</code> \u200b\u7684\u200b\u76f8\u95dc\u200b\u6458\u9304\u200b\uff1a</p> <pre><code>#######################################################\n###          Mempool Configuration Option          ###\n#######################################################\n[mempool]\n\n# Mempool version to use:\n#   1) \"v0\" - (default) FIFO mempool.\n#   2) \"v1\" - prioritized mempool.\nversion = \"v1\"\n</code></pre>"},{"location":"gateway/mempool/#_5","title":"\u8cc7\u6e90","text":"<p>\u200b\u66f4\u200b\u8a73\u7d30\u200b\u7684\u200b\u4fe1\u606f\u200b\u53ef\u4ee5\u200b\u5f9e\u200b\u9019\u88e1\u200b\u627e\u5230\u200b\uff1a</p> <ul> <li>Tendermint ADR-067 - Mempool Refactor.</li> <li>Blogpost: Tendermint v0.35 Announcement</li> <li>EIP-1559: Fee market change for ETH 1.0 chain</li> <li>EIP-1559 FAQ</li> <li>Blogpost: What is EIP-1559? How will it change Ethereum?</li> </ul>"},{"location":"gateway/run/","title":"\u904b\u884c\u9a57\u200b\u8b49\u5668","text":"<p>\u200b\u4e86\u89e3\u200b\u5982\u4f55\u200b\u904b\u884c\u9a57\u200b\u8b49\u7bc0\u9ede\u200b\u3002</p>"},{"location":"gateway/run/#_2","title":"\u5148\u6c7a\u200b\u689d\u4ef6","text":"<ul> <li>\u200b\u4e0b\u8f7d\u200b\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u7a0b\u5e8f\u200b</li> <li>\u200b\u5207\u6362\u200b\u5230\u200broot\u200b\u7528\u6237\u200b</li> </ul>"},{"location":"gateway/run/#_3","title":"\u652f\u6301\u200b\u7684\u200b\u4f5c\u696d\u200b\u7cfb\u7d71","text":"<ul> <li>Centos 7</li> </ul> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u9700\u8981\u200b\u5207\u63db\u200b\u5230\u200broot\u200b\u7528\u6236\u200b\u518d\u200b\u57f7\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u3002\u3002</p>"},{"location":"gateway/run/#_4","title":"\u89e3\u538b\u200b\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u7a0b\u5e8f","text":"<pre><code>unzip xxxx.zip\n</code></pre>"},{"location":"gateway/run/#_5","title":"\u8a2d\u5b9a\u200b\u6b0a\u9650","text":"<pre><code>cd dpos_linux\nchmod u+x init.sh\n</code></pre>"},{"location":"gateway/run/#_6","title":"\u57f7\u884c\u5b89\u88dd\u200b\u548c\u200b\u521d\u59cb\u5316","text":"<p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : init.sh\u200b\u53ea\u200b\u9700\u8981\u200b\u57f7\u884c\u200b\u4e00\u6b21\u200b\u5373\u53ef\u200b</p> <pre><code>./init.sh\n</code></pre>"},{"location":"gateway/run/#_7","title":"\u542f\u52a8\u200b\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u7a0b\u5e8f","text":"<pre><code>./start.sh\n</code></pre>"},{"location":"gateway/run/#_8","title":"\u505c\u6b62\u200b\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u7a0b\u5e8f","text":"<pre><code>./stop.sh\n</code></pre>"},{"location":"gateway/run/#_9","title":"\u67e5\u770b\u200b\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u72b6\u6001","text":"<pre><code>./status.sh\n</code></pre> <p>\u200b\u8f38\u51fa\u200b\u5167\u5bb9\u200b\u5982\u4e0b\u200b\uff1a</p> <p>\u200b\u5176\u4e2d\u200b <code>Active: active(running)</code> \u200b\u8868\u793a\u200b\u670d\u52d9\u200b\u6b63\u5728\u200b\u904b\u884c\u200b\u4e2d\u200b</p> <p>Detail Info \u200b\u4e2d\u200b\u7684\u200b <code>SyncInfo.latest_block_height</code> \u200b\u70ba\u200b\u7576\u524d\u200b\u540c\u6b65\u200b\u5230\u200b\u672c\u5730\u200b\u7684\u200b\u5340\u584a\u200b\u9ad8\u5ea6\u200b</p> <pre><code>----------------------------------------------------------------------------------------------\nDst Blockchain   Active: active (running) since Thu 2023-11-23 17:11:00 CST; 17h ago\n----------------------------------------------------------------------------------------------\n\nDetail Info\n\n{\n    \"NodeInfo\": {\n        \"protocol_version\": {\n            \"p2p\": \"8\",\n            \"block\": \"11\",\n            \"app\": \"0\"\n        },\n        \"id\": \"a5a01042711e08f779c90c0e089b02fcc929b0b7\",\n        \"listen_addr\": \"tcp://0.0.0.0:26656\",\n        \"network\": \"daodst_7777-1\",\n        \"version\": \"0.34.24\",\n        \"channels\": \"40202122233038606100\",\n        \"moniker\": \"localtestnet\",\n        \"other\": {\n            \"tx_index\": \"on\",\n            \"rpc_address\": \"tcp://0.0.0.0:26657\"\n        }\n    },\n    \"SyncInfo\": {\n        \"latest_block_hash\": \"01C697478D77D90C2574D46E9DE324A891A5E56B3957409A299CADB33F11B611\",\n        \"latest_app_hash\": \"50FCFD03EFD60BECAD7B1E9239B38C1C98B279901BE8BDFC2194BF919E834663\",\n        \"latest_block_height\": \"346331\",\n        \"latest_block_time\": \"2023-11-15T21:52:27.506694104Z\",\n        \"earliest_block_hash\": \"F86D8282C9DA9311A623C63FF127D8C0D80D24A1A8BBC4B2A2EFA6DC215BAF0E\",\n        \"earliest_app_hash\": \"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855\",\n        \"earliest_block_height\": \"1\",\n        \"earliest_block_time\": \"2023-10-26T02:19:50.6593807Z\",\n        \"catching_up\": true\n    },\n    \"ValidatorInfo\": {\n        \"Address\": \"B530BC0E192CF798AF0AE1166F72713CAB1829FB\",\n        \"PubKey\": {\n            \"type\": \"tendermint/PubKeyEd25519\",\n            \"value\": \"eWAhNr6hJG07OKPC3fVrZAImTxFZCExCrfEbB4FFu8M=\"\n        },\n        \"VotingPower\": \"0\"\n    }\n}\n</code></pre>"},{"location":"gateway/safe-node/","title":"\u54e8\u5175\u200b\u7bc0\u9ede","text":""},{"location":"gateway/safe-node/#_1","title":"\u8a2d\u5b9a\u200b\u54e8\u5175\u200b\u7bc0\u9ede","text":"<p>\u200b\u8a2d\u5b9a\u9a57\u200b\u8b49\u5668\u200b\u6642\u200b\uff0c\u200b\u6709\u200b\u7121\u6578\u7a2e\u200b\u65b9\u6cd5\u200b\u53ef\u4ee5\u200b\u914d\u200b\u5bd8\u200b\u60a8\u200b\u7684\u200b\u8a2d\u5b9a\u200b\u3002 \u200b\u672c\u200b\u6307\u5357\u200b\u65e8\u5728\u200b\u5c55\u793a\u200b\u5176\u4e2d\u200b\u4e4b\u4e00\u200b\uff0c\u200b\u5373\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u8a2d\u8a08\u200b\u3002 \u200b\u9019\u500b\u200b\u8a2d\u8a08\u200b\u4e3b\u8981\u200b\u662f\u200b\u70ba\u200b\u4e86\u200b\u9810\u9632\u200bDDOS</p>"},{"location":"gateway/safe-node/#_2","title":"\u7db2\u7d61\u200b\u4f48\u200b\u5c40","text":"<p>\u200b\u8a72\u5716\u200b\u662f\u200b\u57fa\u200b\u65bc\u200bAWS\u200b\u7684\u200b\uff0c\u200b\u5176\u4ed6\u200b\u96f2\u200b\u63d0\u4f9b\u5546\u200b\u4e5f\u200b\u6703\u200b\u6709\u985e\u200b\u4f3c\u7684\u200b\u89e3\u6c7a\u200b\u65b9\u6848\u200b\u4f86\u200b\u8a2d\u8a08\u200b\u89e3\u6c7a\u200b\u65b9\u6848\u200b\u3002 \u200b\u904b\u884c\u200b\u7bc0\u9ede\u200b\u4e0d\u50c5\u9650\u200b\u65bc\u200b\u96f2\u200b\u63d0\u4f9b\u5546\u200b\uff0c\u200b\u60a8\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5728\u200b\u88f8\u200b\u6a5f\u7cfb\u200b\u7d71\u4e0a\u200b\u904b\u884c\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u7121\u8ad6\u200b\u60a8\u200b\u51b3\u5b9a\u200b\u63a1\u7528\u200b\u54ea\u7a2e\u200b\u8a2d\u5b9a\u200b\uff0c\u200b\u67b6\u69cb\u200b\u90fd\u200b\u5c07\u662f\u200b\u76f8\u540c\u200b\u7684\u200b\u3002</p> <p>\u200b\u6240\u200b\u63d0\u51fa\u200b\u7684\u200b\u7db2\u7d61\u200b\u5716\u985e\u200b\u4f3c\u200b\u65bc\u200b\u4f01\u696d\u200b\u74b0\u5883\u200b\u4e2d\u7d93\u5178\u200b\u7684\u200b\u5f8c\u200b\u7aef\u200b/\u200b\u524d\u7aef\u200b\u670d\u52d9\u5206\u200b\u96e2\u200b\u3002 \u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u201c\u200b\u5f8c\u200b\u7aef\u200b\u201d\u200b\u662f\u200b\u8cc7\u6599\u200b\u4e2d\u5fc3\u200b\u4e2d\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u5c08\u7528\u200b\u7db2\u7d61\u200b\u3002 \u200b\u8cc7\u6599\u200b\u4e2d\u5fc3\u200b\u7db2\u7d61\u200b\u53ef\u80fd\u200b\u6d89\u53ca\u200b\u591a\u500b\u200b\u5b50\u7db2\u200b\u3001\u200b\u9632\u706b\u200b\u7246\u200b\u548c\u200b\u5197\u9918\u200b\u8a2d\u5099\u200b\uff0c\u200b\u5728\u200b\u6b64\u5716\u200b\u4e2d\u200b\u672a\u200b\u8a73\u7d30\u200b\u8aaa\u660e\u200b\u3002 \u200b\u91cd\u8981\u200b\u7684\u200b\u4e00\u9ede\u200b\u662f\u200b\u8cc7\u6599\u200b\u4e2d\u5fc3\u200b\u5141\u8a31\u200b\u76f4\u63a5\u200b\u9023\u200b\u63a5\u5230\u200b\u6240\u9078\u200b\u7684\u200b\u96f2\u200b\u74b0\u5883\u200b\u3002 \u200b\u4e9e\u99ac\u905c\u200bAWS\u200b\u6709\u200b\u201cDirect Connect\u201d\uff0c\u200b\u800c\u200b\u7a40\u200b\u6b4c\u96f2\u6709\u200b\u201c\u200b\u5408\u4f5c\u200b\u5925\u4f34\u200b\u4e92\u9023\u200b\u201d\u3002 \u200b\u9019\u662f\u200b\u8207\u200b\u96f2\u200b\u63d0\u4f9b\u5546\u200b\u7684\u200b\u5c08\u7528\u200b\u9023\u63a5\u200b\uff08\u200b\u901a\u5e38\u200b\u76f4\u63a5\u200b\u9023\u200b\u63a5\u5230\u200b\u67d0\u500b\u200b\u5340\u57df\u200b\u4e2d\u200b\u7684\u200b\u865b\u64ec\u200b\u79c1\u6709\u200b\u96f2\u5be6\u4f8b\u200b\uff09\u3002</p> <p>\u200b\u6240\u6709\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\uff08\u201c\u200b\u524d\u7aef\u200b\u201d\uff09\u200b\u90fd\u200b\u4f7f\u7528\u200b\u6b64\u200b\u79c1\u6709\u200b\u9023\u63a5\u9023\u200b\u63a5\u5230\u200b\u9a57\u8b49\u5668\u200b\u3002 \u200b\u9a57\u8b49\u8005\u200b\u6c92\u6709\u200b\u516c\u5171\u200bIP\u200b\u5730\u5740\u200b\u4f86\u200b\u63d0\u4f9b\u200b\u670d\u52d9\u200b\u3002</p> <p>\u200b\u4e9e\u99ac\u905c\u200b\u5728\u200b\u4e00\u500b\u200b\u5340\u57df\u200b\u5167\u200b\u6709\u200b\u591a\u500b\u200b\u53ef\u7528\u200b\u5340\u200b\u3002 \u200b\u5176\u4ed6\u200b\u5730\u5340\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5b89\u88dd\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u7b2c\u4e8c\u200b\u500b\u200b\u3001\u200b\u7b2c\u4e09\u200b\u500b\u200b\u548c\u200b\u66f4\u200b\u591a\u5340\u57df\u200b\u9700\u8981\u200b\u5177\u6709\u200b\u5230\u9a57\u200b\u8b49\u5668\u200b\u7bc0\u9ede\u200b\u7684\u200b\u79c1\u6709\u200b\u9023\u63a5\u200b\u3002 \u200b\u9019\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200bVPC\u200b\u5c0d\u200b\u7b49\u200b\u4e92\u9023\u200b\uff08Google Cloud\u200b\u4e2d\u200b\u7684\u200b\u201cVPC\u200b\u7db2\u7d61\u200b\u5c0d\u200b\u7b49\u200b\u4e92\u9023\u200b\u201d\uff09\u200b\u4f86\u200b\u5be6\u73fe\u200b\u3002 \u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u7b2c\u4e8c\u200b\u3001\u200b\u7b2c\u4e09\u200b\u548c\u200b\u66f4\u200b\u591a\u5340\u57df\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u5c07\u200b\u88ab\u200b\u5b9a\u5411\u200b\u5230\u200b\u7b2c\u4e00\u200b\u5340\u57df\u200b\u4e26\u901a\u904e\u200b\u76f4\u63a5\u200b\u9023\u200b\u63a5\u5230\u200b\u8cc7\u6599\u200b\u4e2d\u5fc3\u200b\uff0c\u200b\u5230\u200b\u9054\u9a57\u200b\u8b49\u5668\u200b\u3002</p> <p>\u200b\u66f4\u200b\u6301\u4e45\u200b\u7684\u200b\u89e3\u6c7a\u200b\u65b9\u6848\u200b\uff08\u200b\u5716\u4e2d\u200b\u672a\u200b\u8a73\u7d30\u200b\u8aaa\u660e\u200b\uff09\u200b\u662f\u200b\u5f9e\u200b\u8cc7\u6599\u200b\u4e2d\u5fc3\u200b\u5230\u200b\u4e0d\u540c\u200b\u5340\u57df\u200b\u7684\u200b\u591a\u500b\u200b\u76f4\u63a5\u200b\u9023\u63a5\u200b\u3002 \u200b\u9019\u6a23\u200b\uff0cVPC\u200b\u5c0d\u200b\u7b49\u200b\u9023\u63a5\u200b\u4e0d\u662f\u200b\u5f37\u5236\u6027\u200b\u7684\u200b\uff0c\u200b\u4f46\u200b\u4ecd\u7136\u200b\u6709\u5229\u65bc\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u9019\u200b\u514b\u670d\u200b\u4e86\u200b\u4f9d\u8cf4\u200b\u4e00\u500b\u200b\u5730\u5340\u200b\u7684\u200b\u98a8\u96aa\u200b\u3002 \u200b\u5b83\u200b\u7684\u200b\u6210\u672c\u200b\u66f4\u9ad8\u200b\u3002</p>"},{"location":"gateway/safe-node/#_3","title":"\u672c\u5730\u200b\u914d\u200b\u5bd8","text":"<p>\u200b\u9a57\u8b49\u5668\u200b\u53ea\u6703\u200b\u8207\u200b\u63d0\u4f9b\u200b\u7684\u200b\u54e8\u5175\u200b\u901a\u4fe1\u200b\uff0c\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u5c07\u901a\u904e\u200b\u79d8\u5bc6\u200b\u9023\u63a5\u200b\u8207\u9a57\u200b\u8b49\u5668\u200b\u901a\u4fe1\u200b\uff0c\u200b\u4e26\u901a\u904e\u200b\u6b63\u5e38\u200b\u9023\u63a5\u200b\u8207\u200b\u7db2\u7d61\u200b\u7684\u200b\u5176\u9918\u200b\u90e8\u5206\u200b\u901a\u4fe1\u200b\u3002 \u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u76f8\u4e92\u200b\u901a\u4fe1\u200b\u3002 \u200b\u7576\u200b<code>config.toml</code>\u200b\u521d\u59cb\u5316\u200b\u7bc0\u9ede\u200b\u6642\u200b\uff0c\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u66f4\u6539\u200b\u4e94\u500b\u200b\u53c3\u6578\u200b\u3002</p> <ul> <li><code>pex:</code> \u200b\u5e03\u5c14\u503c\u200b\u3002 \u200b\u9019\u5c07\u200b\u6253\u958b\u200b\u6216\u200b\u95dc\u9589\u200b\u7bc0\u9ede\u200b\u7684\u200b\u5c0d\u200b\u7b49\u200b\u7db2\u7d61\u200b\u8cc7\u8a0a\u200b\u4ea4\u63db\u5668\u200b\u3002 \u200b\u7576\u200b<code>pex=false</code>\u200b\u6642\u200b\uff0c\u200b\u53ea\u6709\u200b<code>persistent_ peers</code>\u200b\u6e05\u55ae\u200b\u53ef\u7528\u200b\u65bc\u200b\u9023\u63a5\u200b.</li> <li><code>persistent_peers:</code> \u200b\u9017\u865f\u200b\u5206\u9694\u200b\u7684\u200b<code>nodeID@ip:port</code>\u200b\u503c\u6e05\u55ae\u200b\uff0c\u200b\u5b9a\u7fa9\u9810\u200b\u671f\u59cb\u200b\u7d42\u7dda\u200b\u4e0a\u200b\u7684\u200b\u5c0d\u200b\u7b49\u200b\u9ede\u6e05\u55ae\u200b\u3002 \u200b\u9019\u5728\u200b\u7b2c\u4e00\u6b21\u200b\u555f\u52d5\u6642\u200b\u662f\u200b\u5fc5\u8981\u200b\u7684\u200b\uff0c\u200b\u56e0\u70ba\u200b\u901a\u904e\u200b\u8a2d\u5b9a\u200b<code>pex=false</code>\u200b\u7bc0\u9ede\u200b\u5c07\u7121\u6cd5\u200b\u52a0\u5165\u200b\u7db2\u7d61\u200b.</li> <li><code>unconditional_peer_ids:</code> \u200b\u9017\u865f\u200b\u5206\u9694\u200b\u7684\u200b\u7bc0\u9ede\u200bID\u200b\u6e05\u55ae\u200b\u3002 \u200b\u7121\u8ad6\u5165\u200b\u7ad9\u200b\u548c\u200b\u51fa\u200b\u7ad9\u200b\u5c0d\u200b\u7b49\u9ede\u200b\u7684\u200b\u9650\u5236\u200b\u5982\u4f55\u200b\uff0c\u200b\u9019\u4e9b\u200b\u7bc0\u9ede\u200b\u90fd\u200b\u5c07\u9023\u200b\u63a5\u5230\u200b\u3002 \u200b\u7576\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u5177\u6709\u200b\u5b8c\u6574\u200b\u7684\u200b\u5730\u5740\u200b\u7c3f\u200b\u6642\u200b\uff0c\u200b\u9019\u200b\u975e\u5e38\u200b\u6709\u7528\u200b\u3002</li> <li><code>private_peer_ids:</code> \u200b\u9017\u865f\u200b\u5206\u9694\u200b\u7684\u200b\u7bc0\u9ede\u200bID\u200b\u6e05\u55ae\u200b\u3002 \u200b\u9019\u4e9b\u200b\u7bc0\u9ede\u200b\u4e0d\u6703\u200b\u88ab\u200b\u50b3\u200b\u64ad\u5230\u200b\u7db2\u7d61\u200b\u4e0a\u200b\u3002 \u200b\u9019\u662f\u200b\u4e00\u500b\u200b\u91cd\u8981\u200b\u7684\u200b\u6b04\u4f4d\u200b\uff0c\u200b\u56e0\u70ba\u200b\u60a8\u200b\u4e0d\u200b\u5e0c\u671b\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200bIP\u200b\u88ab\u200b\u50b3\u200b\u64ad\u5230\u200b\u7db2\u7d61\u200b\u4e0a\u200b\u3002</li> <li><code>addr_book_strict:</code> \u200b\u5e03\u5c14\u503c\u200b\u3002 \u200b\u9ed8\u8a8d\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u5177\u6709\u200b\u53ef\u200b\u8def\u7531\u200b\u5730\u5740\u200b\u7684\u200b\u7bc0\u9ede\u5c07\u200b\u88ab\u200b\u8003\u616e\u200b\u9032\u884c\u200b\u9023\u63a5\u200b\u3002 \u200b\u5982\u679c\u200b\u95dc\u9589\u200b\u6b64\u200b\u8a2d\u5b9a\u200b\uff08false\uff09\uff0c\u200b\u5247\u200b\u53ef\u4ee5\u200b\u5c07\u200b\u4e0d\u53ef\u200b\u8def\u7531\u200b\u7684\u200bIP\u200b\u5730\u5740\u200b\uff08\u200b\u4f8b\u5982\u200b\u5c08\u7528\u200b\u7db2\u7d61\u200b\u4e2d\u200b\u7684\u200b\u5730\u5740\u200b\uff09\u200b\u6dfb\u52a0\u200b\u5230\u200b\u5730\u5740\u200b\u7c3f\u200b\u4e2d\u200b\u3002</li> <li><code>double_sign_check_height</code> int64 \u200b\u9ad8\u5ea6\u200b\u3002 \u200b\u5728\u200b\u52a0\u5165\u200b\u5171\u8b58\u200b\u4e4b\u524d\u200b\u8981\u200b\u56de\u9867\u200b\u591a\u5c11\u200b\u500b\u5340\u200b\u584a\u200b\u4f86\u200b\u6aa2\u67e5\u200b\u7bc0\u9ede\u200b\u5171\u8b58\u200b\u6295\u7968\u200b\u7684\u200b\u5b58\u5728\u200b\u3002 \u200b\u7576\u975e\u200b\u96f6\u6642\u200b\uff0c\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b\u7684\u200b\u5171\u8b58\u91d1\u200b\u9470\u4f86\u200b\u7c3d\u7f72\u200b{double_sign_check_height}\u200b\u6700\u5f8c\u4e00\u500b\u200b\u5340\u584a\u200b\uff0c\u200b\u7bc0\u9ede\u5c07\u200b\u5728\u200b\u91cd\u65b0\u200b\u555f\u52d5\u6642\u200b\u51fa\u73fe\u200b\u6050\u614c\u200b\u3002 \u200b\u56d9\u200b\u6b64\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u61c9\u8a72\u200b\u505c\u6b62\u200b\u72c0\u614b\u6a5f\u200b\uff0c\u200b\u7b49\u5f85\u200b\u4e00\u4e9b\u200b\u584a\u200b\uff0c\u200b\u7136\u200b\u5f8c\u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b\u72c0\u614b\u200b\u6a5f\u4ee5\u200b\u907f\u514d\u200b\u6050\u614c\u200b\u3002</li> </ul>"},{"location":"gateway/safe-node/#_4","title":"\u9a57\u8b49\u5668\u200b\u7bc0\u9ede\u914d\u200b\u5bd8","text":"\u914d\u7f6e\u200b\u9078\u9805\u200b \u200b\u8a2d\u5b9a\u200b pex false persistent_peers \u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u6e05\u55ae\u200b private_peer_ids none unconditional_peer_ids \u200b\u53ef\u9078\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200bID addr_book_strict false double_sign_check_height 10 <p>\u200b\u9a57\u8b49\u5668\u200b\u7bc0\u9ede\u200b\u61c9\u8a72\u200b\u5177\u6709\u200b\u9019\u6a23\u200b\u7684\u200b\u7279\u6027\u200b<code>pex=false</code>\uff0c\u200b\u9019\u6a23\u200b\u5b83\u200b\u5c31\u200b\u4e0d\u6703\u200b\u5411\u200b\u6574\u500b\u200b\u7db2\u8def\u200b\u50b3\u64ad\u200b\u516b\u5366\u200b\u3002 \u200b\u6301\u4e45\u200b\u5c0d\u200b\u7b49\u200b\u9ede\u5c07\u200b\u662f\u200b\u60a8\u200b\u7684\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u79c1\u6709\u200b\u7bc0\u9ede\u200b\u53ef\u4ee5\u200b\u7559\u7a7a\u200b\uff0c\u200b\u56e0\u70ba\u9a57\u200b\u8b49\u5668\u200b\u4e0d\u6703\u200b\u8a66\u5716\u200b\u96b1\u85cf\u200b\u6b63\u5728\u200b\u8207\u200b\u8ab0\u200b\u901a\u4fe1\u200b\u3002 \u200b\u5c0d\u200b\u65bc\u200b\u9a57\u8b49\u8005\u200b\u4f86\u200b\u8aaa\u200b\uff0c\u200b\u8a2d\u5b9a\u200b\u7121\u200b\u689d\u4ef6\u200b\u5c0d\u200b\u7b49\u9ede\u200b\u662f\u200b\u53ef\u9078\u200b\u7684\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u5011\u200b\u6c92\u6709\u200b\u5b8c\u6574\u200b\u7684\u200b\u5730\u5740\u200b\u7c3f\u200b\u3002</p>"},{"location":"gateway/safe-node/#_5","title":"\u54e8\u5175\u200b\u7bc0\u9ede\u914d\u200b\u5bd8","text":"\u914d\u7f6e\u200b\u9078\u9805\u200b \u200b\u8a2d\u5b9a\u200b pex true persistent_peers \u200b\u9a57\u8b49\u8005\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u53ef\u9078\u200b\u5176\u4ed6\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b private_peer_ids \u200b\u9a57\u8b49\u8005\u200b\u7bc0\u9ede\u200bID unconditional_peer_ids \u200b\u9a57\u8b49\u8005\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u53ef\u9078\u200b\u5176\u4ed6\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b addr_book_strict false <p>\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u61c9\u8a72\u200b\u80fd\u591f\u200b\u8207\u200b\u6574\u500b\u200b\u7db2\u8def\u200b\u901a\u4fe1\u200b\uff0c\u200b\u9019\u200b\u5c31\u662f\u200b\u70ba\u200b\u4ec0\u9ebc\u200b<code>pex=true</code>\u3002 \u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u7684\u200b\u6301\u4e45\u200b\u5c0d\u200b\u7b49\u200b\u9ede\u5c07\u200b\u662f\u200b\u9a57\u8b49\u8005\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u662f\u200b\u5176\u4ed6\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u61c9\u78ba\u200b\u4fdd\u5b83\u200b\u5011\u200b\u4e0d\u6703\u200b\u50b3\u64ad\u9a57\u200b\u8b49\u5668\u200b\u7684\u200bIP\uff0c\u200b\u70ba\u200b\u6b64\u200b\uff0c\u200b\u60a8\u200b\u5fc5\u9808\u200b\u5c07\u9a57\u200b\u8b49\u5668\u200b\u7684\u200bnodeID\u200b\u8a2d\u5b9a\u200b\u70ba\u200b\u79c1\u6709\u200b\u5c0d\u7b49\u9ede\u200b\u3002 \u200b\u7121\u689d\u4ef6\u200b\u5c0d\u200b\u7b49\u200bID\u200b\u5c07\u662f\u9a57\u200b\u8b49\u8005\u200bID\u200b\u548c\u200b\u53ef\u9078\u200b\u7684\u200b\u5176\u4ed6\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u3002</p> <p>\u200b\u6ce8\u610f\u200b\uff1a\u200b\u8a2d\u5b9a\u200b\u7bc0\u9ede\u200b\u6642\u200b\u4e0d\u8981\u200b\u5fd8\u8a18\u200b\u4fdd\u8b77\u200b\u7bc0\u9ede\u200b\u7684\u200b\u9632\u706b\u200b\u7246\u200b.</p>"},{"location":"gateway/safe-node/#nodeid","title":"\u7372\u53d6\u200b\u7bc0\u9ede\u200bnodeid","text":"<p>\u200b\u9996\u5148\u200b\u9032\u5165\u200bstcd\u200b\u547d\u4ee4\u200b\u6240\u5728\u200b\u7684\u200b\u76ee\u9304\u200b\u4e0b\u200b\uff0c\u200b\u7136\u5f8c\u904b\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u7372\u53d6\u200bNodeId</p> <pre><code>./stcd tendermint show-node-id\n</code></pre> <p>nodeid\u200b\u662f\u200b\u9577\u200b\u5ea6\u200b40\u200b\u7684\u200b\u5b57\u4e32\u200b\uff0c\u200b\u4f8b\u5982\u200b\uff1a</p> <pre><code>b86863115efa5ded87ec36d0ad287aaee050e4d2\n</code></pre> <p>\u200b\u7bc0\u9ede\u200b\u901a\u8a0a\u57e0\u9ed8\u200b\u8a8d\u70ba\u200b26656\uff0c\u200b\u5047\u5982\u200b\u7576\u524d\u200b\u7bc0\u9ede\u200bIP\u200b\u70ba\u200b8.8.8.8\u200b\u7684\u200b\u8a71\u200b\uff0c\u200b\u90a3\u9ebc\u200b\u7bc0\u9ede\u200b\u7684\u200b\u6700\u7d42\u200b\u5730\u5740\u200b\u7d44\u5408\u200b\u61c9\u8a72\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>b86863115efa5ded87ec36d0ad287aaee050e4d2@8.8.8.8:26656\n</code></pre> <p>\u200b\u66f4\u591a\u200b\u8cc7\u8a0a\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u9023\u7d50\u200b\u4e2d\u200b\u627e\u5230\u200b\uff1a</p> <ul> <li>https://kb.certus.one/</li> <li>https://forum.cosmos.network/t/sentry-node-architecture-overview/454</li> </ul>"},{"location":"gateway/security/","title":"\u9a57\u8b49\u5668\u200b\u5b89\u5168\u200b\u6aa2\u200b\u67e5\u8868","text":"<p>\u200b\u5728\u200b\u4e0b\u9762\u200b\u627e\u5230\u200b\u4e00\u500b\u200b\u5b89\u5168\u200b\u6aa2\u200b\u67e5\u8868\u200b\u8abf\u67e5\u200b\uff0c\u200b\u4ee5\u9032\u200b\u884c\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u5b89\u5168\u200b\u6e2c\u91cf\u200b\u3002 \u200b\u5c0d\u200b\u8a17\u200b\u7ba1\u7406\u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b\u548c\u200b\u7bc0\u9ede\u200b\u8a2d\u7f6e\u200b\u9032\u884c\u200b\u8abf\u67e5\u200b\uff0c\u200b\u4e26\u5c07\u200b\u60a8\u200b\u7684\u200b\u7d50\u679c\u200b\u8207\u200b\u4e0b\u9762\u200b\u5efa\u8b70\u200b\u7684\u200b\u6700\u4f73\u200b\u5be6\u8e10\u200b\u9032\u884c\u200b\u6bd4\u200b\u8f03\u200b\u3002</p>"},{"location":"gateway/security/#_2","title":"\u8a17\u200b\u7ba1\u6578\u64da\u200b\u4e2d\u5fc3\u200b\u7684\u200b\u4e00\u822c\u200b\u63a7\u5236","text":"\u63a7\u5236\u200b\u985e\u200b \u200b\u6700\u4f73\u200b\u5be6\u8e10\u200b\u8aaa\u660e\u200b \u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b \u200b\u5197\u9918\u96fb\u6e90\u200b \u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b \u200b\u5197\u9918\u51b7\u200b\u537b\u200b \u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b \u200b\u5197\u9918\u200b\u7db2\u7d61\u200b \u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b \u200b\u7269\u7406\u200b\u7c60\u5b50\u200b/\u200b\u9580\u63a7\u200b\u8a2a\u554f\u200b \u200b\u6578\u64da\u200b\u4e2d\u5fc3\u200b \u200b\u9060\u7a0b\u200b\u8b66\u5831\u200b\u5b89\u5168\u200b\u651d\u50cf\u982d"},{"location":"gateway/security/#_3","title":"\u7bc0\u9ede\u200b\u8a2d\u7f6e","text":"\u63a7\u5236\u200b\u985e\u200b \u200b\u6700\u4f73\u200b\u5be6\u8e10\u200b\u8aaa\u660e\u200b \u200b\u4e00\u822c\u200b\u7cfb\u7d71\u200b\u5b89\u5168\u200b \u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u200b\u5df2\u200b\u9069\u7576\u200b\u4fee\u88dc\u200b\u3002\u200b\u5167\u6838\u200b\u66f4\u65b0\u200b\u5230\u200b\u6700\u65b0\u200b\u7684\u200b\u7a69\u5b9a\u200b\u7248\u672c\u200b. \u200b\u7bc0\u9ede\u200b\u8981\u200b\u904b\u884c\u200b\u5728\u200bx86_64\u200b\u74b0\u5883\u200b\u4e0b\u200b \u200b\u4e00\u822c\u200b\u7cfb\u7d71\u200b\u5b89\u5168\u200b \u200b\u914d\u7f6e\u200b\u4e86\u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u200b\u7684\u200b\u81ea\u52d5\u200b\u66f4\u65b0\u200b\u3002\u200b\u5b58\u5728\u200b\u7528\u200b\u65bc\u200b\u81ea\u52d5\u200b\u5347\u7d1a\u200b\u7684\u200b\u5de5\u5177\u5305\u200b\uff08\u200b\u4f8b\u5982\u200b auter\u3001yum-cron\u3001dnf-automatic\u3001unattended-upgrades\uff09 \u200b\u4e00\u822c\u200b\u7cfb\u7d71\u200b\u5b89\u5168\u200b \u200b\u555f\u7528\u200b\u548c\u200b\u57f7\u884c\u200b\u5b89\u5168\u200b\u6846\u67b6\u200b\u3002 SELinux / AppArmor / Tomoyo / Grsecurity \u200b\u5df2\u200b\u555f\u7528\u200b\u3002 \u200b\u4e00\u822c\u200b\u7cfb\u7d71\u200b\u5b89\u5168\u200b \u200b\u6c92\u6709\u200b\u5b89\u88dd\u200b\u4e0d\u200b\u5b89\u5168\u200b\u548c\u200b\u4e0d\u5fc5\u8981\u200b\u7684\u200b\u670d\u52d9\u200b\u3002 \uff08\u200b\u4f8b\u5982\u200b telnet\u3001rsh\u3001inetd \u200b\u7b49\u200b... \u200b\u4e00\u822c\u200b\u7cfb\u7d71\u200b\u5b89\u5168\u200b GRUB \u200b\u5f15\u5c0e\u200b\u88dd\u8f09\u200b\u7a0b\u5e8f\u200b\u5bc6\u78bc\u200b\u5df2\u200b\u914d\u7f6e\u200b\u3002 Grub2 \u200b\u914d\u7f6e\u200b\u5bc6\u78bc\u200b \u200b\u4e00\u822c\u200b\u7cfb\u7d71\u200b\u5b89\u5168\u200b \u200b\u53ea\u6709\u200b\u6838\u5fc3\u200b\u7cfb\u7d71\u200b\u6587\u4ef6\u200b\u7684\u200broot\u200b\u6b0a\u9650\u200b \u200b\u6587\u4ef6\u200b\u76ee\u9304\u200b\u5b89\u5168\u200b \u200b\u78ba\u4fdd\u200b\u76ee\u9304\u200b\u201c~/.stcd\u201d\u200b\u50c5\u4f9b\u200b\u5f52\u5c5e\u200b\u8005\u200b\u8a2a\u554f\u200b \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u914d\u7f6e\u200b \u200b\u70ba\u200b\u6027\u80fd\u200b\u548c\u200b\u5b89\u5168\u6027\u200b\u63a8\u85a6\u200b config.toml \u200b\u4e2d\u200b\u7684\u200b\u4ee5\u4e0b\u200b\u8a2d\u7f6e\u200b - \u200b\u5c0d\u200b\u65bc\u200b sentry \u200b\u7bc0\u9ede\u200b\uff1a<code>max_num_inbound_peers = 500, max_num_outbound_peers = 50, flush_throttle_timeout = \"300ms\"</code> - \u200b\u5c0d\u200b\u65bc\u200b validator \u200b\u7bc0\u9ede\u200b\uff1a<code>max_num_inbound_peers = 100 , max_num_outbound_peers = 10, flush_throttle_timeout = \"100ms\"</code> \u200b\u5e33\u6236\u200b\u5b89\u5168\u200b\u548c\u200b\u9060\u7a0b\u200b\u8a2a\u554f\u200b \u200b\u5f37\u5236\u200b\u57f7\u884c\u200b\u4ee5\u4e0b\u200b\u5bc6\u78bc\u200b\u7b56\u7565\u200b\uff1a\u200b\u6c92\u6709\u200b\u7a7a\u767d\u200b\u5bc6\u78bc\u200b\uff1b\u200b\u4e0d\u5141\u8a31\u200b\u4f7f\u7528\u200b\u5f31\u5bc6\u78bc\u200b \u200b\u5e33\u6236\u200b\u5b89\u5168\u200b\u548c\u200b\u9060\u7a0b\u200b\u8a2a\u554f\u200b \u200b\u555f\u7528\u200b\u4ee5\u4e0b\u200b SSH \u200b\u914d\u7f6e\u200b\uff1aPermitRootLogin: <code>no</code>; PasswordAuthentication <code>no</code>; ChallengeResponseAuthentication <code>no</code>;\u200b\u4f7f\u7528\u200bPAM <code>yes</code>; AllowUsers <code>\u200b\u50c5\u9650\u200b\u5fc5\u8981\u200b\u7684\u200b\u7528\u6236\u200b</code>\uff1b AllowGroups <code>\u200b\u50c5\u9650\u200b\u5fc5\u8981\u200b\u7684\u200b\u7d44\u200b</code>\u3002 \u200b\u806f\u7db2\u200b \u200b\u4f7f\u7528\u200b speedtest \u200b\u9032\u884c\u200b\u7db2\u7d61\u200b\u541e\u5410\u91cf\u200b\u6e2c\u8a66\u200b\u3002\u200b\u5efa\u8b70\u200b\u4e0a\u200b\u50b3\u200b\u901f\u5ea6\u200b\u81f3\u5c11\u200b\u70ba\u200b 5 Mbps\uff0c\u200b\u4e0b\u8f09\u200b\u901f\u5ea6\u200b\u81f3\u5c11\u200b\u70ba\u200b 5 Mbps\uff09 \u200b\u806f\u7db2\u200b \u200b\u555f\u7528\u200b\u57fa\u200b\u65bc\u200b\u4e3b\u6a5f\u200b\uff08\u200b\u4f8b\u5982\u200b iptables\uff09\u200b\u6216\u57fa\u200b\u65bc\u200b\u96f2\u200b\uff08\u200b\u4f8b\u5982\u200b AWS \u200b\u5b89\u5168\u200b\u7d44\u200b\uff09\u200b\u7684\u200b\u9632\u706b\u200b\u7246\u4f86\u200b\u4fdd\u8b77\u200b\u6240\u6709\u200b\u76f8\u95dc\u200b\u7bc0\u9ede\u200b\u3002\u200b\u9060\u7a0b\u200b\u7ba1\u7406\u200b\u7aef\u53e3\u200b\uff08\u200b\u4f8b\u5982\u200b SSH - TCP 22\uff09\u200b\u61c9\u8a72\u200b\u53ea\u200b\u66b4\u9732\u200b\u7d66\u9078\u5b9a\u200b\u7684\u200b IP \u200b\u800c\u200b\u4e0d\u662f\u200b\u4e92\u806f\u7db2\u200b\u3002\u200b\u4e0d\u61c9\u200b\u8a2d\u7f6e\u904e\u200b\u65bc\u200b\u5bec\u200b\u9b06\u200b\u7684\u200b\u898f\u200b\u5247\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c\u200b\u5141\u8a31\u200b\u7684\u200b\u7aef\u53e3\u200b\u7bc4\u570d\u200b\u5f88\u5ee3\u200b 1-65535\uff09\u3002\u200b\u5c0d\u200b\u65bc\u200b\u7bc0\u9ede\u200b\u4e4b\u9593\u200b\u7684\u200b\u5167\u90e8\u200b\u901a\u4fe1\u200b\u901a\u9053\u200b\uff0c\u200b\u5b83\u5011\u200b\u61c9\u8a72\u200b\u8a2d\u7f6e\u200b\u6709\u200b\u7279\u5b9a\u200b\u7684\u200b\u6e90\u5730\u5740\u200b\u548c\u200b\u76ee\u7684\u200b\u5730\u5740\u200b\u3002\u200b\u5c0d\u200b\u65bc\u200b Internet \u200b\u53ef\u9054\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u5982\u679c\u200b\u53ef\u80fd\u200b\uff0c\u200b\u5c07\u200b TCP 26656 \u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u552f\u4e00\u200b\u7684\u200b\u50b3\u5165\u200b\u7aef\u53e3\u200b\u3002 \u200b\u806f\u7db2\u200b \u200b\u5b89\u88dd\u4e26\u200b\u57f7\u884c\u200b\u5165\u4fb5\u200b\u6aa2\u6e2c\u200b/\u200b\u9810\u9632\u7cfb\u7d71\u200b\uff08\u200b\u4f8b\u5982\u200b Fail2Ban\u3001Snort\u3001OSSEC\uff09 \u200b\u806f\u7db2\u200b \u200b\u8a2d\u7f6e\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u67b6\u69cb\u200b\u4ee5\u200b\u4fdd\u8b77\u9a57\u200b\u8b49\u7bc0\u9ede\u200b\uff0c\u200b\u4e26\u8a2d\u200b\u7f6e\u200b\u9632\u706b\u200b\u7246\u898f\u5247\u200b\u4ee5\u200b\u9650\u5236\u200b\u5c0d\u200b\u5176\u200b\u7684\u200b\u76f4\u63a5\u200b\u4e92\u806f\u7db2\u200b\u8a2a\u554f\u200b\u3002 \u200b\u806f\u7db2\u200b \u200b\u9060\u7a0b\u200b\u904e\u7a0b\u200b\u8abf\u7528\u200b (RPC) \u200b\u63d0\u4f9b\u200b\u4e0d\u61c9\u200b\u66b4\u9732\u200b\u5728\u200b Internet \u200b\u4e0a\u200b\u7684\u200b\u654f\u611f\u200b\u64cd\u4f5c\u200b\u548c\u200b\u4fe1\u606f\u200b\u3002\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0cRPC \u200b\u8655\u200b\u65bc\u200b\u6253\u958b\u200b\u72c0\u614b\u200b\u4e26\u4e14\u200b\u50c5\u5141\u200b\u8a31\u4f86\u200b\u81ea\u200b <code>127.0.0.1</code> \u200b\u7684\u200b\u9023\u63a5\u200b\u3002\u200b\u5982\u679c\u200b\u60a8\u200b\u9700\u8981\u200b\u5141\u8a31\u200b\u4f86\u200b\u81ea\u200b\u5176\u4ed6\u200b IP \u200b\u5730\u5740\u200b\u7684\u200b RPC\uff0c\u200b\u8acb\u200b\u683c\u5916\u200b\u5c0f\u5fc3\u200b\u3002 \u200b\u5197\u9918\u200b \u200b\u71b1\u5099\u200b\u7bc0\u9ede\u200b\u8a2d\u7f6e\u200b\u8207\u200b\u4e3b\u7bc0\u9ede\u200b\u76f8\u540c\u200b\u7684\u200b\u914d\u7f6e\u200b \u200b\u5197\u9918\u200b \u200b\u8a2d\u7f6e\u200b\u7cfb\u7d71\u200b\u76e3\u63a7\u200b\u548c\u200b\u8b66\u5831\u200b\u4ee5\u200b\u63d0\u9192\u200b\u6240\u6709\u8005\u200b\u7570\u200b\u5e38\u60c5\u200b\u6cc1\u200b \u200b\u5bc6\u9470\u200b\u7ba1\u7406\u200b \u200b\u4f7f\u7528\u200b HSM \u200b\u6216\u200b\u7b49\u6548\u200b\u7684\u200b\u5728\u200b\u7dda\u200b\u670d\u52d9\u200b\u8a2d\u7f6e\u200b Tendermint KMS\uff0c\u200b\u5b83\u200b\u61c9\u8a72\u200b\u66ff\u200b\u63db\u975c\u614b\u200b\u5bc6\u200b\u9470\u200b\u6587\u4ef6\u200b\u3002 DDOS \u200b\u6839\u64da\u200b\u54e8\u5175\u200b\u67b6\u69cb\u200b\u8a2d\u7f6e\u9a57\u200b\u8b49\u5668\u200b\u3002\u200b\u8acb\u200b\u53c3\u8003\u200b\u8a2d\u7f6e\u200b\u8aaa\u660e\u200b\u548c\u200b\u8a73\u7d30\u200b\u8aaa\u660e\u200b\u3002"},{"location":"gateway/state-sync/","title":"\u72c0\u614b\u200b\u540c\u6b65","text":"<p>\u200b\u4e86\u89e3\u200b Cosmos SDK \u200b\u63d0\u4f9b\u200b\u7684\u200b Tendermint Core \u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u548c\u200b\u652f\u6301\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u53ea\u662f\u200b\u95dc\u5fc3\u200b\u5982\u4f55\u200b\u5c07\u7bc0\u9ede\u200b\u8207\u200b\u7db2\u7d61\u200b\u540c\u6b65\u200b\uff1f\u200b\u8df3\u200b\u5230\u200b \u200b\u672c\u7bc0\u200b\u3002</p>"},{"location":"gateway/state-sync/#tendermint","title":"Tendermint \u200b\u6838\u5fc3\u200b\u72c0\u614b\u200b\u540c\u6b65","text":"<p>\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u5141\u8a31\u200b\u65b0\u200b\u7bc0\u9ede\u200b\u901a\u904e\u200b\u7372\u53d6\u200b\u6700\u8fd1\u200b\u9ad8\u5ea6\u200b\u7684\u200b\u7db2\u7d61\u200b\u72c0\u614b\u200b\u5feb\u7167\u200b\u4f86\u200b\u52a0\u5165\u200b\u7db2\u7d61\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u7372\u53d6\u200b\u548c\u200b\u91cd\u64ad\u200b\u6240\u6709\u200b\u6b77\u53f2\u584a\u200b\u3002 \u200b\u7531\u200b\u65bc\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u72c0\u614b\u200b\u5c0f\u200b\u65bc\u200b\u6240\u6709\u200b\u584a\u200b\u7684\u200b\u7d44\u5408\u200b\uff0c\u200b\u4e26\u4e14\u200b\u6062\u200b\u5fa9\u200b\u72c0\u614b\u200b\u6bd4\u91cd\u200b\u653e\u584a\u200b\u66f4\u200b\u5feb\u200b\uff0c\u200b\u9019\u5c07\u200b\u8207\u200b\u7db2\u7d61\u200b\u540c\u6b65\u200b\u7684\u200b\u6642\u9593\u200b\u5f9e\u200b\u5e7e\u5929\u7e2e\u200b\u77ed\u5230\u200b\u5e7e\u5206\u9418\u200b\u3002</p> <p>\u200b\u672c\u6587\u200b\u6a94\u200b\u7684\u200b\u9019\u200b\u4e00\u90e8\u5206\u200b\u7c21\u8981\u200b\u6982\u8ff0\u200b\u4e86\u200b Tendermint \u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u5354\u8b70\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u5982\u4f55\u200b\u540c\u6b65\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u6709\u95dc\u200b\u66f4\u200b\u591a\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u53c3\u95b1\u200b ABCI \u200b\u61c9\u7528\u200b\u6307\u5357\u200b \u200b\u548c\u200b ABCI \u200b\u53c3\u8003\u200b\u6587\u6a94\u200b\u3002</p>"},{"location":"gateway/state-sync/#_2","title":"\u72c0\u614b\u200b\u540c\u6b65\u200b\u5feb\u7167","text":"<p>\u200b\u8a2d\u8a08\u200b Tendermint \u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u6642\u200b\u7684\u200b\u6307\u5c0e\u200b\u539f\u5247\u200b\u662f\u200b\u70ba\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u63d0\u4f9b\u200b\u76e1\u200b\u53ef\u80fd\u200b\u591a\u7684\u9748\u200b\u6d3b\u6027\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0cTendermint \u200b\u4e0d\u95dc\u5fc3\u200b\u5feb\u7167\u200b\u5305\u542b\u200b\u4ec0\u9ebc\u200b\u3001\u200b\u5b83\u5011\u200b\u662f\u200b\u5982\u4f55\u200b\u62cd\u651d\u200b\u7684\u200b\u6216\u200b\u5b83\u5011\u200b\u662f\u200b\u5982\u4f55\u200b\u6062\u200b\u5fa9\u200b\u7684\u200b\u3002\u200b\u5b83\u200b\u53ea\u200b\u95dc\u5fc3\u200b\u767c\u73fe\u200b\u7db2\u7d61\u200b\u4e2d\u200b\u7684\u200b\u73fe\u6709\u200b\u5feb\u7167\u200b\u3001\u200b\u7372\u53d6\u200b\u5b83\u5011\u200b\u4e26\u901a\u904e\u200b ABCI \u200b\u5c07\u5b83\u200b\u5011\u200b\u50b3\u200b\u905e\u7d66\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u3002</p> <p>Tendermint \u200b\u4f7f\u7528\u200b\u8f15\u5ba2\u6236\u200b\u7aef\u9a57\u200b\u8b49\u4f86\u200b\u6aa2\u67e5\u200b\u5df2\u200b\u6062\u200b\u5fa9\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u6700\u7d42\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u54c8\u5e0c\u200b\u503c\u200b\u8207\u200b\u93c8\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u54c8\u5e0c\u200b\u503c\u200b\u7684\u200b\u5c0d\u200b\u6bd4\u200b\uff0c\u200b\u4f46\u200b\u4efb\u4f55\u200b\u9032\u200b\u4e00\u6b65\u200b\u7684\u200b\u9a57\u8b49\u200b\u90fd\u200b\u5fc5\u9808\u200b\u5728\u200b\u6062\u200b\u5fa9\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u7531\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u672c\u8eab\u200b\u5b8c\u6210\u200b\u3002</p> <p>\u200b\u5feb\u7167\u200b\u7531\u200b\u4efb\u610f\u200b\u683c\u5f0f\u200b\u7684\u200b\u4e8c\u9032\u200b\u5236\u584a\u200b\u7d44\u6210\u200b\u3002\u200b\u584a\u200b\u4e0d\u80fd\u200b\u5927\u200b\u65bc\u200b 16 MB\uff0c\u200b\u5426\u5247\u200b\u6c92\u6709\u200b\u9650\u5236\u200b\u3002 \u200b\u5feb\u7167\u200b\u5143\u6578\u64da\u200b\uff0c\u200b\u901a\u904e\u200b ABCI \u200b\u548c\u200b P2P \u200b\u4ea4\u63db\u200b\uff0c\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u5b57\u200b\u6bb5\u200b\uff1a</p> <ul> <li><code>height</code> (<code>uint64</code>): \u200b\u62cd\u651d\u200b\u5feb\u7167\u200b\u7684\u200b\u9ad8\u5ea6\u200b</li> <li><code>format</code> (<code>uint32</code>)\uff1a\u200b\u4efb\u610f\u200b\u7279\u5b9a\u200b\u65bc\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u683c\u5f0f\u200b\u6a19\u8b58\u7b26\u200b\uff08\u200b\u4f8b\u5982\u200b\u7248\u672c\u200b\uff09</li> <li><code>chunks</code> (<code>uint32</code>): \u200b\u5feb\u7167\u200b\u4e2d\u4e8c\u9032\u200b\u5236\u584a\u200b\u7684\u200b\u6578\u91cf\u200b</li> <li><code>hash</code> (<code>bytes</code>): \u200b\u7528\u200b\u65bc\u200b\u8de8\u200b\u7bc0\u9ede\u200b\u6bd4\u200b\u8f03\u200b\u5feb\u7167\u200b\u7684\u200b\u4efb\u610f\u200b\u5feb\u7167\u200b\u54c8\u5e0c\u200b</li> <li><code>metadata</code> (<code>bytes</code>)\uff1a\u200b\u4f9b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4f7f\u7528\u200b\u7684\u200b\u4efb\u610f\u200b\u4e8c\u200b\u9032\u5236\u200b\u5feb\u7167\u200b\u5143\u6578\u64da\u200b</li> </ul> <p><code>format</code> \u200b\u5b57\u6bb5\u200b\u5141\u8a31\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4ee5\u5411\u200b\u5f8c\u200b\u517c\u5bb9\u200b\u7684\u200b\u65b9\u5f0f\u200b\u66f4\u6539\u200b\u5176\u200b\u5feb\u7167\u200b\u683c\u5f0f\u200b\uff0c\u200b\u65b9\u6cd5\u200b\u662f\u200b\u63d0\u4f9b\u200b\u591a\u7a2e\u200b\u683c\u5f0f\u200b\u7684\u200b\u5feb\u7167\u200b\uff0c\u200b\u4e26\u9078\u64c7\u200b\u5728\u200b\u6062\u200b\u5fa9\u200b\u671f\u9593\u200b\u63a5\u53d7\u200b\u54ea\u4e9b\u200b\u683c\u5f0f\u200b\u3002</p> <p>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u9019\u5728\u200b\u66f4\u6539\u200b\u5e8f\u5217\u5316\u200b\u6216\u200b\u58d3\u7e2e\u200b\u683c\u5f0f\u200b\u6642\u200b\u5f88\u200b\u6709\u7528\u200b\uff1a\u200b\u56e0\u70ba\u200b\u7bc0\u9ede\u200b\u53ef\u80fd\u200b\u80fd\u5920\u200b\u5411\u200b\u904b\u884c\u200b\u820a\u200b\u7248\u672c\u200b\u7684\u200b\u7bc0\u9ede\u200b\u63d0\u4f9b\u200b\u5feb\u7167\u200b\uff0c\u200b\u6216\u8005\u200b\u5728\u200b\u4f7f\u7528\u200b\u8f03\u200b\u65b0\u200b\u7248\u672c\u200b\u555f\u52d5\u6642\u200b\u4f7f\u7528\u200b\u820a\u200b\u5feb\u7167\u200b\u3002</p> <p><code>hash</code> \u200b\u5b57\u200b\u6bb5\u200b\u5305\u542b\u200b\u4efb\u610f\u200b\u5feb\u7167\u200b\u54c8\u5e0c\u200b\u3002\u200b\u8de8\u7bc0\u9ede\u200b\u5177\u6709\u200b\u76f8\u540c\u200b <code>metadata</code> \u200b\u5b57\u200b\u6bb5\u200b\uff08\u200b\u5305\u62ec\u200b <code>hash</code>\uff09\u200b\u7684\u200b\u5feb\u7167\u200b\u88ab\u200b\u8a8d\u70ba\u200b\u662f\u200b\u76f8\u540c\u200b\u7684\u200b\uff0c\u200b\u4e26\u4e14\u200b\u5c07\u5f9e\u200b\u9019\u4e9b\u200b\u7bc0\u9ede\u200b\u4e2d\u200b\u7684\u200b\u4efb\u4f55\u200b\u4e00\u500b\u200b\u7372\u53d6\u200b <code>chunks</code>\u3002</p> <p><code>hash</code> \u200b\u4e0d\u53ef\u200b\u4fe1\u4efb\u200b\uff0c\u200b\u4e26\u4e14\u200b\u672a\u7d93\u200b Tendermint \u200b\u672c\u8eab\u200b\u9a57\u8b49\u200b\uff0c\u200b\u9019\u200b\u53ef\u4ee5\u200b\u9632\u6b62\u200b\u5feb\u7167\u200b\u751f\u6210\u200b\u4e2d\u200b\u7684\u200b\u7121\u610f\u200b\u4e0d\u78ba\u200b\u5b9a\u6027\u200b\u3002</p> <p><code>hash</code> \u200b\u53ef\u4ee5\u200b\u6539\u70ba\u200b\u7531\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u9a57\u8b49\u200b\u3002</p> <p><code>metadata</code> \u200b\u5b57\u200b\u6bb5\u200b\u53ef\u4ee5\u200b\u5305\u542b\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u4efb\u4f55\u200b\u4efb\u610f\u200b\u5143\u6578\u64da\u200b\u3002 \u200b\u4f8b\u5982\u200b\uff0c\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u5305\u542b\u200b\u584a\u200b\u6821\u9a57\u200b\u548c\u200b\u4ee5\u200b\u4e1f\u68c4\u200b\u640d\u58de\u200b\u7684\u200b<code>chunks</code>\uff0c\u200b\u6216\u200b Merkle \u200b\u8b49\u660e\u200b \u200b\u6839\u64da\u200b\u93c8\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u54c8\u5e0c\u200b\u5206\u5225\u9a57\u8b49\u200b\u6bcf\u500b\u200b\u584a\u200b\u3002 \u200b\u5728\u200b Protobuf \u200b\u7de8\u78bc\u200b\u5f62\u5f0f\u200b\u4e2d\u200b\uff0c\u200b\u5feb\u7167\u200b <code>metadata</code> \u200b\u6d88\u606f\u200b\u4e0d\u80fd\u200b\u8d85\u904e\u200b 4 MB\u3002</p>"},{"location":"gateway/state-sync/#_3","title":"\u62cd\u651d\u200b\u3001\u200b\u63d0\u4f9b\u200b\u5feb\u7167","text":"<p>\u200b\u8981\u200b\u555f\u7528\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\uff0c\u200b\u7db2\u7d61\u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e9b\u200b\u7bc0\u9ede\u200b\u5fc5\u9808\u200b\u62cd\u200b\u651d\u4e26\u200b\u63d0\u4f9b\u200b\u5feb\u7167\u200b\u3002 \u200b\u7576\u5c0d\u200b\u7b49\u200b\u9ede\u5617\u8a66\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u6642\u200b\uff0c\u200b\u73fe\u6709\u200b\u7684\u200b Tendermint \u200b\u7bc0\u9ede\u5c07\u200b\u5728\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4e0a\u200b\u8abf\u7528\u200b\u4ee5\u4e0b\u200b ABCI \u200b\u65b9\u6cd5\u200b\u4ee5\u5411\u200b\u8a72\u200b\u5c0d\u200b\u7b49\u9ede\u200b\u63d0\u4f9b\u200b\u5feb\u7167\u200b\u6578\u64da\u200b\uff1a</p> <ul> <li><code>ListSnapshots</code>\uff1a\u200b\u8fd4\u56de\u200b\u53ef\u7528\u200b\u5feb\u7167\u200b\u5217\u8868\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u5143\u6578\u64da\u200b</li> <li><code>LoadSnapshotChunk</code>\uff1a\u200b\u8fd4\u56de\u200b\u4e8c\u9032\u200b\u5236\u584a\u200b\u6578\u64da\u200b</li> </ul> <p>\u200b\u5feb\u7167\u200b\u901a\u5e38\u200b\u61c9\u8a72\u200b\u5b9a\u671f\u200b\u751f\u6210\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u6309\u200b\u9700\u200b\u751f\u6210\u200b\uff1a\u200b\u9019\u200b\u53ef\u4ee5\u200b\u63d0\u9ad8\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u6027\u80fd\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5feb\u7167\u200b\u751f\u6210\u200b\u53ef\u80fd\u200b\u5f88\u200b\u6162\u200b\uff0c\u200b\u4e26\u4e14\u200b\u53ef\u4ee5\u200b\u907f\u514d\u200b\u653b\u64ca\u8005\u200b\u7528\u200b\u6b64\u985e\u200b\u8acb\u6c42\u200b\u6df9\u200b\u6c92\u200b\u7bc0\u9ede\u200b\u7684\u200b\u62d2\u7d55\u200b\u670d\u52d9\u200b\u5411\u91cf\u200b\u3002</p> <p>\u200b\u901a\u5e38\u200b\u53ef\u4ee5\u200b\u522a\u9664\u200b\u8f03\u200b\u820a\u200b\u7684\u200b\u5feb\u7167\u200b\uff0c\u200b\u4f46\u200b\u81f3\u5c11\u200b\u4fdd\u7559\u200b\u5169\u500b\u200b\u6700\u65b0\u200b\u7684\u200b\u5feb\u7167\u200b\u53ef\u80fd\u200b\u5f88\u200b\u6709\u7528\u200b\uff0c\u200b\u4ee5\u200b\u907f\u514d\u200b\u5728\u200b\u7bc0\u9ede\u200b\u6062\u200b\u5fa9\u200b\u6642\u200b\u522a\u9664\u200b\u5148\u524d\u200b\u7684\u200b\u5feb\u7167\u200b\u3002</p> <p>\u200b\u5b8c\u5168\u200b\u7531\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u6c7a\u5b9a\u200b\u5982\u4f55\u200b\u62cd\u651d\u200b\u5feb\u7167\u200b\uff0c\u200b\u4f46\u200b\u5b83\u200b\u61c9\u200b\u52aa\u529b\u200b\u6eff\u8db3\u200b\u4ee5\u4e0b\u200b\u4fdd\u8b49\u200b\uff1a</p> <ul> <li>\u200b\u7570\u6b65\u200b\uff1a\u200b\u5feb\u7167\u200b\u4e0d\u61c9\u200b\u8a72\u200b\u505c\u6b62\u200b\u584a\u200b\u8655\u7406\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5b83\u200b\u61c9\u8a72\u200b\u7570\u6b65\u200b\u767c\u751f\u200b\uff0c\u200b\u4f8b\u5982\u200b\u3002\u200b\u5728\u200b\u4e00\u500b\u200b\u55ae\u7368\u200b\u7684\u200b\u7dda\u7a0b\u200b\u4e2d\u200b</li> <li>\u200b\u4e00\u81f4\u200b\uff1a\u200b\u5feb\u7167\u200b\u61c9\u200b\u5728\u200b\u5b64\u7acb\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u62cd\u651d\u200b\uff0c\u200b\u4e26\u4e14\u200b\u4e0d\u61c9\u200b\u53d7\u5230\u200b\u4e26\u767c\u200b\u5beb\u5165\u200b\u7684\u200b\u5f71\u97ff\u200b\uff0c\u200b\u4f8b\u5982\u200b\u3002\u200b\u7531\u200b\u65bc\u200b\u4e3b\u7dda\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u584a\u200b\u8655\u7406\u200b</li> <li>\u200b\u78ba\u200b\u5b9a\u6027\u200b\uff1a\u200b\u5c0d\u200b\u65bc\u200b\u7d66\u5b9a\u200b\u7684\u200b<code>height</code>\u200b\u548c\u200b<code>format</code>\uff0c\u200b\u6240\u6709\u200b\u7bc0\u9ede\u200b\u7684\u200b\u5feb\u7167\u200b<code>chunks</code>\u200b\u548c\u200b<code>metadata</code> \u200b\u61c9\u8a72\u200b\u76f8\u540c\u200b\uff08\u200b\u5728\u200b\u5b57\u200b\u7bc0\u7d1a\u5225\u200b\uff09\uff0c\u200b\u4ee5\u78ba\u200b\u4fdd\u200b<code>chunks</code>\u200b\u7684\u200b\u826f\u597d\u200b\u53ef\u7528\u6027\u200b</li> </ul> <p>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u9019\u200b\u53ef\u4ee5\u200b\u6309\u200b\u5982\u4e0b\u200b\u65b9\u5f0f\u200b\u5be6\u73fe\u200b\uff1a</p> <ol> <li>\u200b\u4f7f\u7528\u200b\u652f\u6301\u200b\u5e36\u200b\u5feb\u7167\u200b\u9694\u96e2\u200b\u7684\u200b\u4e8b\u52d9\u200b\u7684\u200b\u6578\u64da\u200b\u5b58\u5132\u200b\uff0c\u200b\u4f8b\u5982\u200b RocksDB \u200b\u6216\u200b BadgerDB\u3002</li> <li>\u200b\u63d0\u4ea4\u200b\u584a\u200b\u5f8c\u200b\u5728\u200b\u4e3b\u7dda\u200b\u7a0b\u4e2d\u200b\u555f\u52d5\u200b\u53ea\u8b80\u200b\u6578\u64da\u5eab\u200b\u4e8b\u52d9\u200b\u3002</li> <li>\u200b\u5c07\u6578\u64da\u200b\u5eab\u4e8b\u52d9\u200b\u53e5\u67c4\u200b\u50b3\u905e\u200b\u5230\u200b\u65b0\u200b\u751f\u6210\u200b\u7684\u200b\u7dda\u7a0b\u200b\u4e2d\u200b\u3002</li> <li>\u200b\u4ee5\u200b\u78ba\u5b9a\u200b\u7684\u200b\u9806\u5e8f\u200b\u904d\u6b77\u200b\u6240\u6709\u200b\u6578\u64da\u9805\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c\u200b\u6309\u9375\u200b\u6392\u5e8f\u200b\uff09</li> <li>\u200b\u5e8f\u5217\u5316\u200b\u6578\u64da\u9805\u200b\uff08\u200b\u4f8b\u5982\u200b\u4f7f\u7528\u200b Protobuf\uff09\uff0c\u200b\u4e26\u5c07\u200b\u5b83\u5011\u200b\u5beb\u5165\u200b\u5b57\u200b\u7bc0\u6d41\u200b\u3002</li> <li>\u200b\u5c0d\u5b57\u200b\u7bc0\u6d41\u200b\u9032\u884c\u200b\u54c8\u5e0c\u200b\u8655\u7406\u200b\uff0c\u200b\u4e26\u5c07\u200b\u5176\u200b\u62c6\u5206\u200b\u70ba\u200b\u56fa\u5b9a\u200b\u5927\u5c0f\u200b\u7684\u200b\u584a\u200b\uff08\u200b\u4f8b\u5982\u200b 10 MB\uff09</li> <li>\u200b\u5c07\u584a\u200b\u4f5c\u70ba\u200b\u55ae\u7368\u200b\u7684\u200b\u6587\u4ef6\u200b\u5b58\u5132\u200b\u5728\u200b\u6587\u4ef6\u200b\u7cfb\u7d71\u200b\u4e2d\u200b\u3002</li> <li>\u200b\u5c07\u200b\u5feb\u7167\u200b\u5143\u6578\u64da\u200b\u5beb\u5165\u200b\u6578\u64da\u5eab\u200b\u6216\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5305\u62ec\u200b\u5b57\u200b\u7bc0\u6d41\u200b\u54c8\u5e0c\u200b\u3002</li> <li>\u200b\u95dc\u9589\u200b\u6578\u64da\u5eab\u200b\u4e8b\u52d9\u4e26\u200b\u9000\u51fa\u200b\u7dda\u7a0b\u200b\u3002</li> </ol> <p>\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u53ef\u80fd\u200b\u9084\u200b\u9700\u8981\u200b\u63a1\u53d6\u200b\u984d\u5916\u200b\u7684\u200b\u6b65\u9a5f\u200b\uff0c\u200b\u4f8b\u5982\u200b\u58d3\u7e2e\u200b\u6578\u64da\u200b\u3001\u200b\u6821\u9a57\u584a\u200b\u3001\u200b\u70ba\u200b\u589e\u91cf\u200b\u9a57\u8b49\u200b\u751f\u6210\u200b\u8b49\u660e\u200b\u4ee5\u53ca\u200b\u522a\u9664\u200b\u820a\u200b\u5feb\u7167\u200b\u3002</p>"},{"location":"gateway/state-sync/#_4","title":"\u6062\u200b\u5fa9\u200b\u5feb\u7167","text":"<p>\u200b\u7576\u200b Tendermint \u200b\u555f\u52d5\u6642\u200b\uff0c\u200b\u5b83\u6703\u200b\u6aa2\u67e5\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b\u662f\u5426\u200b\u6709\u200b\u4efb\u4f55\u200b\u72c0\u614b\u200b\uff08\u200b\u5373\u200b\u662f\u5426\u200b <code>LastBlockHeight == 0</code>\uff09\uff0c\u200b\u5982\u679c\u200b\u6c92\u6709\u200b\uff0c\u200b\u5b83\u5c07\u200b\u958b\u59cb\u200b\u901a\u904e\u200b P2P \u200b\u7db2\u7d61\u200b\u767c\u73fe\u200b\u5feb\u7167\u200b\u3002 \u200b\u9019\u4e9b\u200b\u5feb\u7167\u200b\u5c07\u901a\u904e\u200b\u4ee5\u4e0b\u200b ABCI \u200b\u8abf\u7528\u200b\u63d0\u4f9b\u200b\u7d66\u200b\u672c\u5730\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\uff1a</p> <ul> <li><code>OfferSnapshot(snapshot, apphash)</code>\uff1a\u200b\u5411\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u63d0\u4f9b\u200b\u5df2\u200b\u767c\u73fe\u200b\u7684\u200b\u5feb\u7167\u200b</li> <li><code>ApplySnapshotChunk(index, chunk, sender)</code>\uff1a\u200b\u61c9\u7528\u200b\u5feb\u7167\u200b\u584a\u200b</li> </ul> <p>\u200b\u5c07\u767c\u73fe\u200b\u7684\u200b\u5feb\u7167\u200b\u63d0\u4f9b\u200b\u7d66\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u63a5\u53d7\u200b\u5feb\u7167\u200b\u3001\u200b\u62d2\u7d55\u200b\u5feb\u7167\u200b\u3001\u200b\u62d2\u7d55\u200b\u683c\u5f0f\u200b\u3001\u200b\u62d2\u7d55\u200b\u767c\u9001\u8005\u200b\u3001\u200b\u4e2d\u6b62\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u7b49\u200b\u65b9\u5f0f\u200b\u505a\u51fa\u200b\u97ff\u61c9\u200b\u3002</p> <p>\u200b\u4e00\u65e6\u200b\u5feb\u7167\u200b\u88ab\u200b\u63a5\u53d7\u200b\uff0cTendermint \u200b\u5c07\u5f9e\u200b\u53ef\u7528\u200b\u7684\u200b\u5c0d\u200b\u7b49\u9ede\u200b\u7372\u53d6\u200b\u584a\u200b\uff0c\u200b\u4e26\u5c07\u200b\u5b83\u5011\u200b\u6309\u200b\u9806\u5e8f\u200b\u61c9\u200b\u7528\u5230\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u9078\u64c7\u200b\u63a5\u53d7\u200b\u584a\u200b\u3001\u200b\u91cd\u65b0\u200b\u7372\u53d6\u200b\u3001\u200b\u62d2\u7d55\u200b\u5feb\u7167\u200b\u3001\u200b\u62d2\u7d55\u200b\u767c\u9001\u8005\u200b\u3001\u200b\u4e2d\u6b62\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u7b49\u200b\u3002</p> <p>\u200b\u61c9\u7528\u200b\u6240\u6709\u200b\u584a\u200b\u5f8c\u200b\uff0cTendermint \u200b\u5c07\u5728\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4e0a\u200b\u8abf\u7528\u200b <code>Info</code> ABCI \u200b\u65b9\u6cd5\u200b\uff0c\u200b\u4e26\u6aa2\u67e5\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u54c8\u5e0c\u200b\u548c\u200b\u9ad8\u5ea6\u200b\u5c0d\u61c9\u200b\u65bc\u200b\u93c8\u200b\u4e2d\u200b\u7684\u200b\u53ef\u4fe1\u200b\u503c\u200b\u3002 \u200b\u7136\u5f8c\u5b83\u200b\u5c07\u5207\u200b\u63db\u5230\u200b\u5feb\u901f\u200b\u540c\u6b65\u200b\u4ee5\u200b\u7372\u53d6\u200b\u4efb\u4f55\u200b\u5269\u9918\u200b\u7684\u200b\u584a\u200b\uff08\u200b\u5982\u679c\u200b\u555f\u7528\u200b\uff09\uff0c\u200b\u7136\u200b\u5f8c\u200b\u6700\u7d42\u200b\u52a0\u5165\u200b\u6b63\u5e38\u200b\u7684\u200b\u5171\u8b58\u200b\u64cd\u4f5c\u200b\u3002</p> <p>\u200b\u5feb\u7167\u200b\u5982\u4f55\u200b\u5be6\u969b\u200b\u6062\u200b\u5fa9\u200b\u5b8c\u5168\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u4f46\u200b\u901a\u5e38\u200b\u8207\u200b\u5b83\u5011\u200b\u7684\u200b\u751f\u6210\u200b\u65b9\u5f0f\u200b\u76f8\u53cd\u200b\u3002</p> <p>\u200b\u4f46\u662f\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0cTendermint \u200b\u50c5\u5728\u200b\u6240\u6709\u200b\u584a\u200b\u90fd\u200b\u5df2\u200b\u6062\u200b\u5fa9\u200b\u5f8c\u200b\u624d\u200b\u9a57\u8b49\u200b\u5feb\u7167\u200b\uff0c\u200b\u4e26\u4e14\u200b\u4e0d\u6703\u200b\u81ea\u884c\u200b\u62d2\u7d55\u200b\u4efb\u4f55\u200b P2P \u200b\u5c0d\u200b\u7b49\u200b\u65b9\u200b\u3002</p> <p>\u200b\u53ea\u8981\u200b\u53ef\u4fe1\u200b\u54c8\u5e0c\u200b\u548c\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4ee3\u78bc\u200b\u662f\u200b\u6b63\u78ba\u200b\u7684\u200b\uff0c\u200b\u5c0d\u624b\u200b\u5c31\u200b\u4e0d\u200b\u53ef\u80fd\u200b\u5728\u200b\u52a0\u5165\u200b\u5171\u8b58\u200b\u6642\u5c0e\u81f4\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u7bc0\u9ede\u200b\u5177\u6709\u200b\u4e0d\u6b63\u200b\u78ba\u7684\u200b\u72c0\u614b\u200b\uff0c\u200b\u4f46\u662f\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u62b5\u6d88\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u62d2\u7d55\u200b\u670d\u52d9\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c\u200b\u901a\u904e\u200b\u5be6\u65bd\u200b\u589e\u91cf\u200b\u9a57\u8b49\u200b\u3001\u200b\u62d2\u7d55\u200b\u7121\u6548\u200b\u7bc0\u9ede\u200b\uff09\u3002</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u7bc0\u9ede\u200b\u5c07\u6709\u200b\u4e00\u500b\u200b\u5f9e\u200b\u6062\u200b\u5fa9\u200b\u5feb\u7167\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u958b\u59cb\u200b\u7684\u200b\u622a\u65b7\u200b\u584a\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b\uff0c\u200b\u76ee\u524d\u200b\u6c92\u6709\u200b\u6240\u6709\u200b\u584a\u200b\u6578\u64da\u200b\u7684\u200b\u56de\u586b\u200b\u3002 \u200b\u7db2\u7d61\u200b\u61c9\u8a72\u200b\u8003\u616e\u200b\u66f4\u200b\u5ee3\u6cdb\u200b\u7684\u200b\u5f71\u97ff\u200b\uff0c\u200b\u4e26\u4e14\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u78ba\u4fdd\u200b\u81f3\u5c11\u200b\u6709\u200b\u5e7e\u500b\u200b\u5b58\u6a94\u200b\u7bc0\u9ede\u200b\u4fdd\u7559\u200b\u5b8c\u6574\u200b\u7684\u200b\u584a\u200b\u6b77\u53f2\u200b\u8a18\u9304\u200b\uff0c\u200b\u4ee5\u7528\u200b\u65bc\u200b\u53ef\u200b\u5be9\u8a08\u6027\u200b\u548c\u200b\u5099\u4efd\u200b\u3002</p>"},{"location":"gateway/state-sync/#cosmos-sdk","title":"Cosmos SDK \u200b\u72c0\u614b\u200b\u540c\u6b65","text":"<p>Cosmos SDK v0.40+ \u200b\u5305\u542b\u200b\u5c0d\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u7684\u200b\u81ea\u52d5\u200b\u652f\u6301\u200b\uff0c\u200b\u56e0\u6b64\u200b\u61c9\u7528\u200b\u958b\u767c\u8005\u200b\u53ea\u200b\u9700\u200b\u555f\u7528\u200b\u5b83\u200b\u5373\u53ef\u200b\u4f7f\u7528\u200b\u3002\u200b\u4ed6\u5011\u200b\u5c07\u4e0d\u200b\u9700\u8981\u200b\u81ea\u5df1\u200b\u5be6\u65bd\u200b \u200b\u4e0a\u9762\u200b\u95dc\u65bc\u200b Tendermint \u200b\u7684\u200b\u90e8\u5206\u200b \u200b\u4e2d\u200b\u63cf\u8ff0\u200b\u7684\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u5354\u8b70\u200b\u3002</p>"},{"location":"gateway/state-sync/#_5","title":"\u72c0\u614b\u200b\u540c\u6b65\u200b\u5feb\u7167","text":"<p>Tendermint Core \u200b\u8655\u7406\u200b\u5927\u90e8\u5206\u200b\u70ba\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u767c\u73fe\u200b\u3001\u200b\u4ea4\u63db\u200b\u548c\u200b\u9a57\u8b49\u200b\u72c0\u614b\u200b\u6578\u64da\u200b\u7684\u200b\u7e41\u91cd\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u4f46\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5fc5\u9808\u200b\u5b9a\u671f\u200b\u70ba\u200b\u5176\u200b\u72c0\u614b\u200b\u62cd\u200b\u651d\u200b\u5feb\u7167\u200b\uff0c\u200b\u4e26\u901a\u904e\u200b ABCI \u200b\u8abf\u7528\u5c07\u200b\u9019\u4e9b\u200b\u5feb\u7167\u200b\u63d0\u4f9b\u200b\u7d66\u200b Tendermint\uff0c\u200b\u4e26\u80fd\u5920\u200b\u6062\u200b\u5fa9\u200b\u9019\u4e9b\u200b\u540c\u6b65\u200b\u65b0\u7bc0\u200b\u9ede\u6642\u200b\u3002</p> <p>Cosmos SDK \u200b\u5c07\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u72c0\u614b\u200b\u5b58\u5132\u200b\u5728\u200b\u540d\u70ba\u200b IAVL \u200b\u7684\u200b\u6578\u64da\u200b\u5b58\u5132\u4e2d\u200b\uff0c\u200b\u6bcf\u500b\u200b\u6a21\u584a\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u8a2d\u7f6e\u200b\u81ea\u5df1\u200b\u7684\u200b IAVL \u200b\u5b58\u5132\u200b\u3002 \u200b\u5728\u200b\u56fa\u5b9a\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u9593\u200b\u9694\u200b\uff08\u200b\u53ef\u200b\u914d\u7f6e\u200b\uff09\uff0cCosmos SDK \u200b\u5c07\u5728\u200b\u8a72\u200b\u9ad8\u5ea6\u200b\u5c0e\u51fa\u200b\u6bcf\u500b\u200b\u5546\u5e97\u200b\u7684\u200b\u5167\u5bb9\u200b\uff0cProtobuf-\u200b\u7de8\u78bc\u200b\u548c\u200b\u58d3\u7e2e\u200b\u5b83\u200b\uff0c\u200b\u4e26\u5c07\u200b\u5176\u200b\u4fdd\u5b58\u200b\u5230\u200b\u672c\u5730\u200b\u6587\u4ef6\u200b\u7cfb\u7d71\u200b\u4e2d\u200b\u7684\u200b\u5feb\u7167\u200b\u5b58\u5132\u4e2d\u200b\u3002 \u200b\u7531\u200b\u65bc\u200b IAVL \u200b\u4fdd\u7559\u200b\u4e86\u200b\u6578\u64da\u200b\u7684\u200b\u6b77\u53f2\u200b\u7248\u672c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u53ef\u4ee5\u200b\u5728\u200b\u57f7\u884c\u200b\u65b0\u584a\u200b\u7684\u200b\u540c\u6642\u200b\u751f\u6210\u200b\u9019\u4e9b\u200b\u5feb\u7167\u200b\u3002</p> <p>\u200b\u7576\u65b0\u200b\u7bc0\u9ede\u200b\u9032\u884c\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u6642\u200b\uff0cTendermint \u200b\u5c07\u901a\u904e\u200b ABCI \u200b\u7372\u53d6\u200b\u9019\u4e9b\u200b\u5feb\u7167\u200b\u3002</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u53ea\u6709\u200b\u7531\u200b Cosmos SDK \u200b\u7ba1\u7406\u200b\u7684\u200b IAVL \u200b\u5b58\u5132\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5feb\u7167\u200b\u3002\u200b\u5982\u679c\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5728\u200b\u5916\u90e8\u200b\u6578\u64da\u200b\u5b58\u5132\u200b\u4e2d\u5b58\u200b\u5132\u984d\u200b\u5916\u200b\u7684\u200b\u6578\u64da\u200b\uff0c\u200b\u76ee\u524d\u200b\u6c92\u6709\u200b\u6a5f\u5236\u5c07\u200b\u9019\u4e9b\u200b\u5305\u542b\u200b\u5728\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u5feb\u7167\u200b\u4e2d\u200b\uff0c\u200b\u56e0\u6b64\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7121\u6cd5\u200b\u901a\u904e\u200b SDK \u200b\u4f7f\u7528\u200b\u81ea\u52d5\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u3002</p> <p>\u200b\u4f46\u662f\u200b\uff0c\u200b\u5982\u200b ABCI \u200b\u6587\u6a94\u200b \u200b\u4e2d\u200b\u6240\u8ff0\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u81ea\u7531\u200b\u5be6\u65bd\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u5354\u8b70\u200b\u672c\u8eab\u200b\u3002</p> <p>\u200b\u7576\u4e00\u500b\u200b\u65b0\u200b\u7bc0\u9ede\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u6642\u200b\uff0cTendermint \u200b\u5c07\u5f9e\u200b\u7db2\u7d61\u200b\u4e2d\u200b\u7684\u200b\u5c0d\u200b\u7b49\u9ede\u200b\u7372\u53d6\u200b\u5feb\u7167\u200b\u4e26\u5c07\u200b\u5176\u200b\u63d0\u4f9b\u200b\u7d66\u200b\u672c\u5730\u200b\uff08\u200b\u7a7a\u200b\uff09\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u8a72\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u6703\u5c07\u200b\u5176\u5c0e\u5165\u200b\u5176\u200b IAVL \u200b\u5b58\u5132\u200b\u3002</p> <p>Tendermint \u200b\u7136\u200b\u5f8c\u200b\u4f7f\u7528\u200b\u8f15\u5ba2\u6236\u200b\u7aef\u9a57\u200b\u8b49\u91dd\u200b\u5c0d\u200b\u4e3b\u5340\u200b\u584a\u200b\u93c8\u9a57\u8b49\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u54c8\u5e0c\u200b\uff0c\u200b\u4e26\u50cf\u200b\u5f80\u5e38\u200b\u4e00\u6a23\u200b\u7e7c\u7e8c\u200b\u57f7\u884c\u584a\u200b\u3002</p> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u7bc0\u9ede\u200b\u53ea\u6703\u200b\u6062\u200b\u5fa9\u200b\u5feb\u7167\u200b\u62cd\u651d\u200b\u9ad8\u5ea6\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u72c0\u614b\u200b\uff0c\u200b\u4e26\u4e14\u200b\u4e0d\u6703\u200b\u5305\u542b\u200b\u6b77\u53f2\u200b\u6578\u64da\u200b\u6216\u200b\u6b77\u53f2\u584a\u200b\u3002</p>"},{"location":"gateway/state-sync/#_6","title":"\u555f\u7528\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u5feb\u7167","text":"<p>\u200b\u8981\u200b\u555f\u7528\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u5feb\u7167\u200b\uff0c\u200b\u4f7f\u7528\u200b CosmosSDK <code>BaseApp</code> \u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u9700\u8981\u200b\u8a2d\u7f6e\u200b\u5feb\u7167\u200b\u5b58\u5132\u200b\uff08\u200b\u5e36\u6709\u200b\u6578\u64da\u5eab\u200b\u548c\u200b\u6587\u4ef6\u200b\u7cfb\u7d71\u200b\u76ee\u9304\u200b\uff09\u200b\u4e26\u200b\u914d\u7f6e\u200b\u5feb\u7167\u200b\u9593\u200b\u9694\u200b\u548c\u200b\u8981\u200b\u4fdd\u7559\u200b\u7684\u200b\u6b77\u53f2\u200b\u5feb\u7167\u200b\u6578\u91cf\u200b\u3002\u200b\u4e00\u500b\u200b\u6700\u5c0f\u200b\u7684\u200b\u4f8b\u5b50\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>snapshotDir := filepath.Join(\n  cast.ToString(appOpts.Get(flags.FlagHome)), \"data\", \"snapshots\")\nsnapshotDB, err := sdk.NewLevelDB(\"metadata\", snapshotDir)\nif err != nil {\n  panic(err)\n}\nsnapshotStore, err := snapshots.NewStore(snapshotDB, snapshotDir)\nif err != nil {\n  panic(err)\n}\napp := baseapp.NewBaseApp(\n  \"app\", logger, db, txDecoder,\n  baseapp.SetSnapshotStore(snapshotStore),\n  baseapp.SetSnapshotInterval(cast.ToUint64(appOpts.Get(\n    server.FlagStateSyncSnapshotInterval))),\n  baseapp.SetSnapshotKeepRecent(cast.ToUint32(appOpts.Get(\n    server.FlagStateSyncSnapshotKeepRecent))),\n)\n</code></pre> <p>\u200b\u7576\u200b\u4f7f\u7528\u200b\u9069\u7576\u200b\u7684\u200b\u6a19\u8a8c\u200b\u555f\u52d5\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u6642\u200b\uff0c\uff08\u200b\u4f8b\u5982\u200b <code>--state-sync.snapshot-interval 1000 --state-sync.snapshot-keep-recent 2</code>\uff09\u200b\u5b83\u200b\u61c9\u8a72\u200b\u751f\u6210\u200b\u5feb\u7167\u200b\u4e26\u8f38\u51fa\u200b\u65e5\u8a8c\u200b\u6d88\u606f\u200b\uff1a</p> <pre><code>Creating state snapshot    module=main height=3000\nCompleted state snapshot   module=main height=3000 format=1\n</code></pre> <p>\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u5feb\u7167\u200b\u9593\u200b\u9694\u200b\u7576\u524d\u200b\u5fc5\u9808\u200b\u662f\u200b <code>pruning-keep-every</code>\uff08\u200b\u9ed8\u8a8d\u200b\u70ba\u200b 100\uff09\u200b\u7684\u200b\u500d\u6578\u200b\uff0c\u200b\u4ee5\u200b\u9632\u6b62\u200b\u5728\u200b\u62cd\u200b\u651d\u200b\u5feb\u7167\u200b\u6642\u200b\u4fee\u526a\u200b\u9ad8\u5ea6\u200b\u3002\u200b\u81f3\u5c11\u200b\u4fdd\u7559\u200b 2 \u200b\u500b\u200b\u6700\u8fd1\u200b\u7684\u200b\u5feb\u7167\u200b\u901a\u5e38\u200b\u4e5f\u200b\u662f\u200b\u4e00\u500b\u200b\u597d\u200b\u4e3b\u610f\u200b\uff0c\u200b\u9019\u6a23\u200b\u7576\u7bc0\u200b\u9ede\u5617\u8a66\u200b\u4f7f\u7528\u200b\u5b83\u200b\u9032\u884c\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u6642\u200b\uff0c\u200b\u4e0d\u6703\u200b\u522a\u9664\u200b\u4ee5\u524d\u200b\u7684\u200b\u5feb\u7167\u200b\u3002</p>"},{"location":"gateway/state-sync/#_7","title":"\u72c0\u614b\u200b\u540c\u6b65\u200b\u7bc0\u9ede","text":"<p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u5c0b\u627e\u200b\u5feb\u7167\u200b\u6216\u200b\u5b58\u6a94\u200b\u7bc0\u9ede\u200b\u4f86\u200b\u540c\u6b65\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\uff1f\u200b\u67e5\u770b\u200b \u200b\u6b64\u9801\u200b\u9762\u200b\u3002</p> <p>\u200b\u4e00\u65e6\u200b\u7db2\u7d61\u200b\u4e2d\u200b\u7684\u200b\u5e7e\u500b\u200b\u7bc0\u9ede\u200b\u62cd\u200b\u651d\u200b\u4e86\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u5feb\u7167\u200b\uff0c\u200b\u65b0\u7bc0\u9ede\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u52a0\u5165\u200b\u7db2\u7d61\u200b\u3002 \u200b\u70ba\u200b\u6b64\u200b\uff0c\u200b\u9996\u5148\u200b\u61c9\u8a72\u200b\u50cf\u200b\u5f80\u5e38\u200b\u4e00\u6a23\u200b\u914d\u7f6e\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u4e26\u4e14\u200b\u5fc5\u9808\u200b\u7372\u53d6\u200b\u4ee5\u4e0b\u200b\u4fe1\u606f\u200b\u4ee5\u9032\u200b\u884c\u8f15\u200b\u5ba2\u6236\u200b\u7aef\u9a57\u8b49\u200b\uff1a</p> <ul> <li>\u200b\u5169\u500b\u200b\u53ef\u7528\u200b\u7684\u200b RPC \u200b\u670d\u52d9\u5668\u200b\uff08\u200b\u81f3\u5c11\u200b\uff09</li> <li>\u200b\u53ef\u4fe1\u200b\u9ad8\u5ea6\u200b</li> <li>\u200b\u53ef\u4fe1\u200b\u9ad8\u5ea6\u200b\u7684\u200b\u5340\u584a\u200bID\u200b\u54c8\u5e0c\u200b</li> </ul> <p>\u200b\u53ef\u4fe1\u200b\u54c8\u5e0c\u200b\u5fc5\u9808\u200b\u5f9e\u200b\u53ef\u200b\u4fe1\u6e90\u200b\uff08\u200b\u4f8b\u5982\u200b\u5340\u584a\u200b\u700f\u89bd\u5668\u200b\uff09\u200b\u7372\u5f97\u200b\uff0c\u200b\u4f46\u200b RPC \u200b\u670d\u52d9\u5668\u200b\u4e0d\u200b\u9700\u8981\u200b\u53ef\u4fe1\u200b\u3002 Tendermint \u200b\u5c07\u200b\u4f7f\u7528\u200b\u54c8\u5e0c\u200b\u5f9e\u5340\u200b\u584a\u200b\u93c8\u200b\u4e2d\u200b\u7372\u53d6\u200b\u53d7\u200b\u4fe1\u4efb\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u54c8\u5e0c\u200b\uff0c\u200b\u4ee5\u9a57\u8b49\u200b\u6062\u200b\u5fa9\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5feb\u7167\u200b\u3002\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u54c8\u5e0c\u200b\u548c\u200b\u76f8\u61c9\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u662f\u200b\u6062\u200b\u5fa9\u200b\u5feb\u7167\u200b\u6642\u200b\u552f\u4e00\u200b\u53ef\u4ee5\u200b\u4fe1\u4efb\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002\u200b\u5176\u4ed6\u200b\u4e00\u5207\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u7531\u200b\u5c0d\u200b\u624b\u200b\u507d\u9020\u200b\u3002</p> <p>\u200b\u5728\u200b\u672c\u200b\u6307\u5357\u200b\u4e2d\u200b\uff0c\u200b\u6211\u5011\u200b\u4f7f\u7528\u200b Ubuntu 20.04</p>"},{"location":"gateway/state-sync/#_8","title":"\u6e96\u5099\u200b\u7cfb\u7d71","text":"<p>\u200b\u66f4\u65b0\u200b\u7cfb\u7d71\u200b</p> <pre><code>sudo apt update -y\n</code></pre> <p>\u200b\u5347\u7d1a\u200b\u7cfb\u7d71\u200b</p> <pre><code>sudo apt upgrade -y\n</code></pre> <p>\u200b\u5b89\u88dd\u200b\u4f9d\u8cf4\u200b</p> <pre><code>sudo apt-get install ca-certificates curl gnupg lsb-release make gcc git jq wget -y\n</code></pre> <p>\u200b\u5b89\u88dd\u200b Go</p> <pre><code>wget -q -O - https://raw.githubusercontent.com/canha/golang-tools-install-script/master/goinstall.sh | bash\nsource ~/.bashrc\n</code></pre> <p>\u200b\u8a2d\u7f6e\u200b\u7bc0\u9ede\u200b\u540d\u7a31\u200b</p> <pre><code>moniker=\"NODE_NAME\"\n</code></pre>"},{"location":"gateway/state-sync/#_9","title":"\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u9032\u884c\u200b\u4e3b\u7db2\u200b\u8a2d\u7f6e","text":"<pre><code>SNAP_RPC1=\"http://xxx1:26657\"\nSNAP_RPC=\"http://xxx:26657\"\nCHAIN_ID=\"daodst_7777-1\"\nPEER=\"96557e26aabf3b23e8ff5282d03196892a7776fc@xxx,dec587d55ff38827ebc6312cedda6085c59683b6@xxx\"\nwget -O $HOME/genesis.json https://raw.githubusercontent.com/daodst/mainnet/genesis.json \n</code></pre>"},{"location":"gateway/state-sync/#stcd","title":"\u5b89\u88dd\u200b stcd","text":"<pre><code>git clone https://github.com/daodst/blockchain.git &amp;&amp; \\ \ncd cmd &amp;&amp; cd stcd\ngo build\n</code></pre>"},{"location":"gateway/state-sync/#_10","title":"\u914d\u7f6e","text":"<p>\u200b\u7bc0\u9ede\u200b\u521d\u59cb\u5316\u200b</p> <pre><code>stcd init $moniker --chain-id $CHAIN_ID\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u4f86\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88dd\u200b <code>stcd</code> \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f91\u200b</p> <p>\u200b\u5c07\u200b genesis \u200b\u6587\u4ef6\u200b\u79fb\u52d5\u200b\u5230\u200b $install_path/.stcd/config \u200b\u6587\u4ef6\u200b\u593e\u200b</p> <pre><code>mv $HOME/genesis.json $install_path/.stcd/config/\n</code></pre> <p>\u200b\u91cd\u7f6e\u200b\u7bc0\u9ede\u200b</p> <pre><code>stcd tendermint unsafe-reset-all --home .stcd\n</code></pre> <p>\u200b\u66f4\u6539\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff08\u200b\u8a2d\u7f6e\u200b\u7bc0\u9ede\u200b\u540d\u7a31\u200b\u3001\u200b\u6dfb\u52a0\u200b\u6301\u4e45\u200b\u5c0d\u7b49\u9ede\u200b\u3001\u200b\u8a2d\u7f6e\u200b\u7d22\u5f15\u200b\u5668\u200b =\u201cnull\u201d\uff09</p> <pre><code>sed -i -e \"s%^moniker *=.*%moniker = \\\"$moniker\\\"%; \" $install_path/.stcd/config/config.toml\nsed -i -e \"s%^indexer *=.*%indexer = \\\"null\\\"%; \" $install_path/.stcd/config/config.toml\nsed -i -e \"s%^persistent_peers *=.*%persistent_peers = \\\"$PEER\\\"%; \" $install_path/.stcd/config/config.toml\n</code></pre> <p>\u200b\u8a2d\u7f6e\u200b\u5f9e\u200b\u5feb\u7167\u200b\u958b\u59cb\u200b\u7684\u200b\u8b8a\u91cf\u200b</p> <pre><code>LATEST_HEIGHT=$(curl -s $SNAP_RPC/block | jq -r .result.block.header.height); \\\nBLOCK_HEIGHT=$((LATEST_HEIGHT - 2000)); \\\nTRUST_HASH=$(curl -s \"$SNAP_RPC/block?height=$BLOCK_HEIGHT\" | jq -r .result.block_id.hash)\n</code></pre> <p>\u200b\u6aa2\u67e5\u200b</p> <pre><code>echo $LATEST_HEIGHT $BLOCK_HEIGHT $TRUST_HASH\n</code></pre> <p>\u200b\u8f38\u51fa\u200b\u793a\u4f8b\u200b\uff08\u200b\u6578\u5b57\u6703\u200b\u6709\u6240\u4e0d\u540c\u200b\uff09\uff1a</p> <pre><code>376080 374080 F0C78FD4AE4DB5E76A298206AE3C602FF30668C521D753BB7C435771AEA47189\n</code></pre> <p>\u200b\u5982\u679c\u200b\u8f38\u51fa\u200b\u6b63\u5e38\u200b\uff0c\u200b\u4e0b\u200b\u4e00\u6b65\u200b</p> <pre><code>sed -i.bak -E \"s|^(enable[[:space:]]+=[[:space:]]+).*$|\\1true| ; \\\n\ns|^(rpc_servers[[:space:]]+=[[:space:]]+).*$|\\1\\\"$SNAP_RPC,$SNAP_RPC1\\\"| ; \\\n\ns|^(trust_height[[:space:]]+=[[:space:]]+).*$|\\1$BLOCK_HEIGHT| ; \\\n\ns|^(trust_hash[[:space:]]+=[[:space:]]+).*$|\\1\\\"$TRUST_HASH\\\"| ; \\\n\ns|^(seeds[[:space:]]+=[[:space:]]+).*$|\\1\\\"\\\"|\" $install_path/.stcd/config/config.toml\n</code></pre>"},{"location":"gateway/state-sync/#stcd_1","title":"\u5275\u5efa\u200bstcd\u200b\u670d\u52d9","text":"<pre><code>echo \"[Unit]\nDescription=Daodst Chain Node\nAfter=network.target\n#\n[Service]\nUser=$USER\nType=simple\nExecStart=$(which stcd) daemon\nRestart=on-failure\nLimitNOFILE=65535\n#\n[Install]\nWantedBy=multi-user.target\" &gt; $HOME/stcd.service; sudo mv $HOME/stcd.service /etc/systemd/system/\n</code></pre> <pre><code>sudo systemctl enable stcd.service &amp;&amp; sudo systemctl daemon-reload\n</code></pre>"},{"location":"gateway/state-sync/#stcd_2","title":"\u904b\u884c\u200b stcd","text":"<pre><code>sytemctl start stcd\n</code></pre>"},{"location":"gateway/state-sync/#_11","title":"\u6aa2\u67e5\u200b\u65e5\u8a8c","text":"<pre><code>journalctl -u stcd -f\n</code></pre> <p>\u200b\u7576\u7bc0\u9ede\u200b\u555f\u52d5\u6642\u200b\uff0c\u200b\u5b83\u200b\u5c07\u5617\u8a66\u200b\u5728\u200b\u7db2\u7d61\u200b\u4e2d\u200b\u627e\u5230\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u5feb\u7167\u200b\uff0c\u200b\u4e26\u6062\u200b\u5fa9\u200b\u5b83\u200b\uff1a</p> <pre><code>Started node                   module=main nodeInfo=\"...\"\nDiscovering snapshots for 20s\nDiscovered new snapshot        height=3000 format=1 hash=0F14A473\nDiscovered new snapshot        height=2000 format=1 hash=C6209AF7\nOffering snapshot to ABCI app  height=3000 format=1 hash=0F14A473\nSnapshot accepted, restoring   height=3000 format=1 hash=0F14A473\nFetching snapshot chunk        height=3000 format=1 chunk=0 total=3\nFetching snapshot chunk        height=3000 format=1 chunk=1 total=3\nFetching snapshot chunk        height=3000 format=1 chunk=2 total=3\nApplied snapshot chunk         height=3000 format=1 chunk=0 total=3\nApplied snapshot chunk         height=3000 format=1 chunk=1 total=3\nApplied snapshot chunk         height=3000 format=1 chunk=2 total=3\nVerified ABCI app              height=3000 appHash=F7D66BC9\nSnapshot restored              height=3000 format=1 hash=0F14A473\nExecuted block                 height=3001 validTxs=16 invalidTxs=0\nCommitted state                height=3001 txs=16 appHash=0FDBB0D5F\nExecuted block                 height=3002 validTxs=25 invalidTxs=0\nCommitted state                height=3002 txs=25 appHash=40D12E4B3\n</code></pre> <p>\u200b\u7bc0\u9ede\u73fe\u200b\u5728\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\uff0c\u200b\u5728\u200b\u5e7e\u79d2\u200b\u9418\u5167\u200b\u52a0\u5165\u200b\u7db2\u7d61\u200b</p>"},{"location":"gateway/state-sync/#_12","title":"\u95dc\u9589\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u6a21\u5f0f","text":"<p>\u200b\u5728\u200b\u7bc0\u9ede\u200b\u5b8c\u5168\u200b\u540c\u6b65\u200b\u5f8c\u200b\uff0c\u200b\u4f7f\u7528\u200b\u6b64\u200b\u547d\u4ee4\u200b\u95dc\u9589\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u4ee5\u200b\u907f\u514d\u200b\u5c07\u4f86\u200b\u7bc0\u9ede\u200b\u91cd\u65b0\u200b\u555f\u52d5\u6642\u200b\u51fa\u73fe\u200b\u554f\u984c\u200b\uff01</p> <pre><code>sed -i.bak -E \"s|^(enable[[:space:]]+=[[:space:]]+).*$|\\1false|\" $install_path/.stcd/config/config.toml\n</code></pre> <p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b :\u200b\u672c\u6587\u200b\u6a94\u4e2d\u200b\u5305\u542b\u200b\u7684\u200b\u4fe1\u606f\u200b\u4f86\u200b\u81ea\u200b Erik Grinaker\uff0c\u200b\u7279\u5225\u200b\u662f\u200b\u4ed6\u200b\u7684\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u6307\u5357\u200b Tendermint Core and the Cosmos SDK.</p>"},{"location":"gateway/testnet/","title":"\u6e2c\u8a66\u7db2","text":"<p>\u200b\u672c\u6587\u200b\u6a94\u200b\u6982\u8ff0\u200b\u4e86\u200b\u52a0\u5165\u200b\u73fe\u6709\u200b\u6e2c\u8a66\u7db2\u200b\u7684\u200b\u6b65\u9a5f\u200b\u3002</p>"},{"location":"gateway/testnet/#_2","title":"\u9078\u64c7\u200b\u4e00\u500b\u200b\u6e2c\u8a66\u7db2","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u8a2d\u7f6e\u200b \u200b\u521b\u4e16\u200b\u6587\u4ef6\u200b \u200b\u548c\u200b \u200b\u79cd\u5b50\u200b\u8282\u70b9\u200b \u200b\u4f86\u200b\u6307\u5b9a\u200b\u8981\u200b\u52a0\u5165\u200b\u7684\u200b\u7db2\u7d61\u200b\u3002</p> \u200b\u6e2c\u8a66\u7db2\u200b Chain ID \u200b\u63cf\u8ff0\u200b \u200b\u5730\u9ede\u200b \u200b\u7248\u672c\u200b \u200b\u72c0\u614b\u200b <code>daodst_7000-1</code> daodst Testnet Arsia Mons <code>v0.1.x</code> <code>\u200b\u6d3b\u8dc3\u200b</code>"},{"location":"gateway/testnet/#stcd","title":"\u5b89\u88c5\u200b <code>stcd</code>","text":"<p>\u200b\u6309\u7167\u200b \u200b\u5b89\u88c5\u200b \u200b\u6587\u6a94\u200b\u5b89\u88dd\u200b ** \u200b\u7a0b\u5e8f\u200b **\u3002</p> <p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b :  \u200b\u78ba\u200b\u4fdd\u5b89\u200b\u88dd\u4e86\u200b\u6b63\u78ba\u200b\u7248\u672c\u200b\u7684\u200b \u200b\u7a0b\u5e8f\u200b\u3002</p>"},{"location":"gateway/testnet/#chain-id","title":"\u4fdd\u5b58\u200b Chain ID","text":"<p>\u200b\u6211\u5011\u200b\u5efa\u8b70\u200b\u5c07\u6e2c\u200b\u8a66\u7db2\u200b <code>chain-id</code> \u200b\u4fdd\u5b58\u200b\u5230\u200b\u60a8\u200b\u7684\u200b <code>client.toml</code> \u200b\u4e2d\u200b\u3002 \u200b\u9019\u5c07\u200b\u4f7f\u200b\u60a8\u200b\u4e0d\u5fc5\u200b\u70ba\u200b\u6bcf\u500b\u200b CLI \u200b\u547d\u4ee4\u200b\u624b\u52d5\u200b\u50b3\u905e\u200b <code>chain-id</code> \u200b\u6a19\u8a8c\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u8acb\u200b\u53c3\u95b1\u200b\u5b98\u65b9\u200b \u200b\u93c8\u200b ID \u200b\u4ee5\u4f9b\u200b\u53c3\u8003\u200b\u3002</p> <pre><code>stcd config chain-id daodst_7000-1\n</code></pre>"},{"location":"gateway/testnet/#_3","title":"\u521d\u59cb\u5316\u200b\u8282\u70b9","text":"<p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u6765\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88c5\u200b <code>stcd</code> \u200b\u4e8c\u8fdb\u5236\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f84\u200b</p> <p>\u200b\u6211\u5011\u200b\u9700\u8981\u200b\u521d\u59cb\u5316\u200b\u7bc0\u9ede\u200b\u4ee5\u200b\u5275\u5efa\u200b\u6240\u6709\u200b\u5fc5\u8981\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u548c\u200b\u7bc0\u9ede\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff1a</p> <pre><code>stcd init &lt;your_custom_moniker&gt; --chain-id daodst_7000-1\n</code></pre> <p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b :  \u200b\u540d\u5b57\u200b\u5c0d\u200b\u50cf\u200b\u53ea\u80fd\u200b\u5305\u542b\u200b ASCII \u200b\u5b57\u7b26\u200b\u3002\u200b\u4f7f\u7528\u200b Unicode \u200b\u5b57\u7b26\u200b\u5c07\u4f7f\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u7121\u6cd5\u200b\u8a2a\u554f\u200b\u3002</p> <p>\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c<code>init</code> \u200b\u547d\u4ee4\u200b\u5275\u5efa\u5e36\u200b\u6709\u5b50\u200b\u6587\u4ef6\u200b\u593e\u200b<code>config/</code> \u200b\u548c\u200b<code>data/</code> \u200b\u7684\u200b<code>$install_path/.stcd</code>\uff08\u200b\u5373\u200b<code>$HOME</code>\uff09\u200b\u76ee\u9304\u200b\u3002 \u200b\u5728\u200b <code>config</code> \u200b\u76ee\u9304\u200b\u4e2d\u200b\uff0c\u200b\u6700\u200b\u91cd\u8981\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u662f\u200b <code>app.toml</code> \u200b\u548c\u200b <code>config.toml</code>\u3002</p>"},{"location":"gateway/testnet/#seeds","title":"\u521b\u4e16\u200b &amp; Seeds","text":""},{"location":"gateway/testnet/#_4","title":"\u62f7\u8d1d\u200b\u521b\u4e16\u200b\u6587\u4ef6","text":"<p>\u200b\u5f9e\u200b <code>github</code> \u200b\u4e0b\u8f7d\u200b <code>genesis.json</code> \u200b\u6587\u4ef6\u200b\u4e26\u5c07\u200b\u5176\u200b\u8907\u200b\u88fd\u200b\u5230\u200b <code>config</code> \u200b\u76ee\u9304\u200b\uff1a<code>$install_path/.stcd/config/genesis.json</code>\u3002  \u200b\u9019\u662f\u200b\u4e00\u500b\u200b\u5305\u542b\u200b\u93c8\u200b ID \u200b\u548c\u200b\u5275\u4e16\u8cec\u200b\u6236\u9918\u984d\u200b\u7684\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\u3002</p> <pre><code>sudo apt install -y unzip wget\nwget -P $install_path/.stcd/config https://github.com/daodst/testnets/daodst_7000-1/genesis.json\n</code></pre> <p>\u200b\u7136\u5f8c\u9a57\u8b49\u200bgenesis\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7684\u200b\u6b63\u200b\u78ba\u6027\u200b\uff1a</p> <pre><code>stcd validate-genesis\n</code></pre>"},{"location":"gateway/testnet/#seeds_1","title":"seeds","text":"<p>\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u9700\u8981\u200b\u77e5\u9053\u200b\u5982\u4f55\u200b\u627e\u5230\u200b peers\u3002 \u200b\u60a8\u200b\u9700\u8981\u200b\u6dfb\u52a0\u200b\u5065\u5eb7\u200b\u7684\u200b\u7a2e\u5b50\u200b\u7bc0\u9ede\u200b \u200b\u5230\u200b <code>$HOME/.stcd/config/config.toml</code>\u3002   <code>testnets</code> \u200b\u5b58\u5132\u5eab\u200b\u5305\u542b\u200b\u6307\u5411\u200b\u4e00\u4e9b\u200b\u7a2e\u5b50\u200b\u7bc0\u9ede\u200b\u3002</p> <p>\u200b\u5c07\u4f4d\u200b\u65bc\u200b <code>$install_path/.stcd/config/config.toml</code> \u200b\u548c\u200b <code>seeds</code> \u200b\u4e2d\u200b\u7684\u200b\u6587\u4ef6\u200b\u7de8\u8f2f\u200b\u70ba\u200b\u4ee5\u4e0b\u200b\u5167\u5bb9\u200b\uff1a</p> <pre><code>#######################################################\n###           P2P Configuration Options             ###\n#######################################################\n[p2p]\n\n# ...\n\n# Comma separated list of seed nodes to connect to\nseeds = \"&lt;node-id&gt;@&lt;ip&gt;:&lt;p2p port&gt;\"\n</code></pre> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u4ee3\u78bc\u200b\u5f9e\u200b\u5b58\u5132\u5eab\u200b\u4e2d\u200b\u7372\u53d6\u200b\u7a2e\u5b50\u200b\u4e26\u5c07\u200b\u5176\u200b\u6dfb\u52a0\u200b\u5230\u200b\u60a8\u200b\u7684\u200b\u914d\u7f6e\u200b\u4e2d\u200b\uff1a</p> <pre><code>SEEDS=`curl -sL https://raw.githubusercontent.com/daodst/testnets/main/daodst_7000-1/seeds.txt | awk '{print $1}' | paste -s -d, -`\nsed -i.bak -e \"s/^seeds =.*/seeds = \\\"$SEEDS\\\"/\" ~/.stcd/config/config.toml\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u6709\u95dc\u200b\u7a2e\u5b50\u200b\u548c\u200b\u540c\u884c\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u8a2a\u554f\u200b Tendermint P2P \u200b\u6587\u6a94\u200b\u3002</p>"},{"location":"gateway/testnet/#persistent_peers","title":"persistent_peers","text":"<p>\u200b\u6211\u5011\u200b\u53ef\u4ee5\u200b\u5728\u200b <code>$install_path/.stcd/config/config.toml</code> \u200b\u4e2d\u8a2d\u200b\u7f6e\u200b <code>persistent_peers</code> \u200b\u5b57\u200b\u6bb5\u200b\u3002  \u200b\u4f86\u200b\u6307\u5b9a\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u5c07\u200b\u8207\u200b\u4e4b\u200b\u4fdd\u6301\u200b\u6301\u4e45\u200b\u9023\u63a5\u200b\u7684\u200b\u5c0d\u200b\u7b49\u9ede\u200b\u3002  \u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5f9e\u200b <code>testnets</code> \u200b\u5b58\u5132\u5eab\u200b\u7684\u200b\u53ef\u7528\u200b\u5c0d\u7b49\u9ede\u200b\u5217\u8868\u200b\u4e2d\u6aa2\u7d22\u200b\u5b83\u5011\u200b\u3002</p> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5f9e\u200b <code>peers.txt</code> \u200b\u4e2d\u200b\u96a8\u6a5f\u200b\u7372\u5f97\u200b 10 \u200b\u500b\u200b\u689d\u76ee\u200b\u901a\u904e\u200b\u904b\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u5c07\u200b\u6587\u4ef6\u200b\u6dfb\u52a0\u200b\u5230\u200b <code>PEERS</code> \u200b\u8b8a\u91cf\u200b\u4e2d\u200b\uff1a</p> <pre><code>PEERS=`curl -sL https://raw.githubusercontent.com/daodst/testnets/main/daodst_7000-1/peers.txt | sort -R | head -n 10 | awk '{print $1}' | paste -s -d, -`\n</code></pre> <p>\u200b\u4f7f\u7528\u200b <code>sed</code> \u200b\u5c07\u5b83\u200b\u5011\u200b\u5305\u542b\u200b\u5230\u200b\u914d\u7f6e\u200b\u4e2d\u200b\u3002\u200b\u60a8\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u624b\u52d5\u200b\u6dfb\u52a0\u200b\u5b83\u5011\u200b\uff1a</p> <pre><code>sed -i.bak -e \"s/^persistent_peers *=.*/persistent_peers = \\\"$PEERS\\\"/\" $install_path/.stcd/config/config.toml\n</code></pre>"},{"location":"gateway/testnet/#_5","title":"\u904b\u884c\u200b\u6e2c\u8a66\u200b\u7db2\u9a57\u200b\u8b49\u5668","text":"<p>\u200b\u5728\u200b \u200b\u6c34\u9f8d\u982d\u200b \u200b\u4e0a\u8072\u660e\u200b\u60a8\u200b\u7684\u200b\u6e2c\u8a66\u7db2\u200b\u4f7f\u7528\u200b\u4f60\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u8cec\u6236\u200b\u5730\u5740\u200b\u4e26\u200b\u63d0\u4ea4\u200b\u4f60\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u8cec\u6236\u200b\u5730\u5740\u200b\uff1a</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u6709\u95dc\u200b\u5982\u4f55\u200b\u904b\u884c\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u9075\u5faa\u200b \u200b\u9019\u4e9b\u200b \u200b\u8aaa\u660e\u200b\u3002</p> <pre><code>stcd tx staking create-validator \\\n  --amount=1000000000000dst \\\n  --pubkey=$(stcd tendermint show-validator) \\\n  --moniker=\"Daodst1\" \\\n  --chain-id=&lt;chain_id&gt; \\\n  --commission-rate=\"0.10\" \\\n  --commission-max-rate=\"0.20\" \\\n  --commission-max-change-rate=\"0.01\" \\\n  --min-self-delegation=\"1000000\" \\\n  --gas=\"auto\" \\\n  --gas-prices=\"5000000000dst\" \\\n  --from=&lt;key_name&gt;\n</code></pre>"},{"location":"gateway/testnet/#_6","title":"\u555f\u52d5\u6e2c\u200b\u8a66\u7db2","text":"<p>\u200b\u6700\u200b\u5f8c\u200b\u4e00\u6b65\u200b\u662f\u200b\u555f\u52d5\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u4e00\u65e6\u200b\u4f86\u200b\u81ea\u200b\u5275\u4e16\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b\u8db3\u5920\u200b\u6295\u7968\u200b\u6b0a\u200b\uff08+2/3\uff09\u200b\u555f\u52d5\u200b\u4e26\u904b\u884c\u200b\uff0c\u200b\u6e2c\u8a66\u200b\u7db2\u5c07\u200b\u958b\u59cb\u200b\u751f\u7522\u5340\u200b\u584a\u200b\u3002</p> <pre><code>stcd daemon\n</code></pre>"},{"location":"gateway/testnet/#_7","title":"\u5347\u7d1a\u200b\u4f60\u200b\u7684\u200b\u7bc0\u9ede","text":"<p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  \u200b\u9019\u4e9b\u200b\u8aaa\u660e\u200b\u9069\u7528\u200b\u65bc\u200b\u5df2\u7d93\u200b\u5728\u200b\u4e4b\u524d\u200b\u7248\u672c\u200b\u4e0a\u200b\u904b\u884c\u4e26\u200b\u5e0c\u671b\u200b\u5347\u7d1a\u200b\u5230\u200b\u6700\u65b0\u200b\u6e2c\u8a66\u7db2\u200b\u7248\u672c\u200b\u7684\u200b\u5b8c\u6574\u200b\u7bc0\u9ede\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u6765\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88c5\u200b <code>stcd</code> \u200b\u4e8c\u8fdb\u5236\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f84\u200b</p>"},{"location":"gateway/testnet/#_8","title":"\u91cd\u7f6e\u200b\u6578\u64da","text":"<p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b :  \u200b\u5982\u679c\u200b\u60a8\u200b\u8981\u200b\u5347\u7d1a\u200b\u5230\u200b\u7684\u200b\u7248\u672c\u200b  \u200b\u8207\u200b\u4e4b\u524d\u200b\u7684\u200b\u7248\u672c\u200b\u6c92\u6709\u200b\u885d\u7a81\u200b\uff0c\u200b\u60a8\u200b\u4e0d\u200b\u61c9\u8a72\u200b\u91cd\u7f6e\u200b\u6578\u64da\u200b\u3002 \u200b\u5982\u679c\u200b\u662f\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u8df3\u200b\u5230\u200b \u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b <p>\u200b\u9996\u5148\u200b\uff0c\u200b\u522a\u9664\u200b\u904e\u6642\u200b\u7684\u200b\u6587\u4ef6\u200b\u4e26\u200b\u91cd\u7f6e\u200b\u6578\u64da\u200b\u3002</p> <pre><code>rm $install_path/.stcd/config/addrbook.json $install_path/.stcd/config/genesis.json\nstcd tendermint unsafe-reset-all --home $install_path/.stcd\n</code></pre> <p>\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u73fe\u200b\u5728\u200b\u8655\u200b\u65bc\u200b\u539f\u59cb\u200b\u72c0\u614b\u200b\uff0c\u200b\u540c\u6642\u200b\u4fdd\u7559\u200b\u539f\u59cb\u200b\u7684\u200b <code>priv_validator.json</code> \u200b\u548c\u200b <code>config.toml</code>\u3002 \u200b\u5982\u679c\u200b\u60a8\u200b\u4e4b\u524d\u200b\u8a2d\u7f6e\u200b\u4e86\u200b\u4efb\u4f55\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u6216\u200b\u5b8c\u6574\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u4ecd\u200b\u5c07\u5617\u200b\u8a66\u9023\u200b\u63a5\u5230\u200b\u5b83\u5011\u200b\uff0c\u200b\u4f46\u200b\u5982\u679c\u200b\u5b83\u5011\u200b\u9084\u6c92\u6709\u200b\u5347\u7d1a\u200b\uff0c\u200b\u5247\u200b\u53ef\u80fd\u200b\u6703\u200b\u5931\u6557\u200b\u3002</p> <p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b :  \u200b\u78ba\u4fdd\u200b\u6bcf\u500b\u200b\u7bc0\u9ede\u200b\u90fd\u200b\u6709\u200b\u4e00\u500b\u200b\u552f\u4e00\u200b\u7684\u200b <code>priv_validator.json</code>\u3002\u200b\u4e0d\u8981\u200b\u5c07\u200b <code>priv_validator.json</code> \u200b\u5f9e\u820a\u200b\u7bc0\u9ede\u200b\u8907\u200b\u88fd\u200b\u5230\u200b\u591a\u200b\u500b\u200b\u65b0\u200b\u7bc0\u200b\u9ede\u200b\u3002 \u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b\u7684\u200b <code>priv_validator.json</code> \u200b\u904b\u884c\u200b\u5169\u500b\u200b\u7bc0\u9ede\u200b\u5c07\u5c0e\u81f4\u200b\u60a8\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\u3002</p>"},{"location":"gateway/testnet/#_9","title":"\u91cd\u65b0\u200b\u958b\u59cb","text":"<p>\u200b\u8981\u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u53ea\u200b\u9700\u9375\u5165\u200b\uff1a</p> <pre><code>stcd daemon\n</code></pre>"},{"location":"gateway/testnet/#_10","title":"\u5206\u4eab\u200b\u4f60\u200b\u7684\u200b\u8282\u70b9\u200b\u4fe1\u606f","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4e92\u8054\u7f51\u200b\u4e0a\u200b\u5206\u4eab\u200b\u60a8\u200b\u7684\u200b\u540c\u4f34\u200b\u4e26\u5c07\u200b\u5176\u200b\u767c\u5e03\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u8981\u200b\u7372\u53d6\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b ID\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b</p> <pre><code>stcd tendermint show-node-id\n</code></pre>"},{"location":"gateway/testnet/#_11","title":"\u72c0\u614b\u200b\u540c\u6b65\u200b\u7bc0\u9ede","text":"<p>\u200b\u5982\u679c\u200b\u60a8\u200b\u60f3\u200b\u4f7f\u7528\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u52a0\u5165\u200b\u7db2\u7d61\u200b\uff08\u200b\u5feb\u901f\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u200b\u9069\u7528\u200b\u65bc\u200b\u5b58\u6a94\u200b\u7bc0\u9ede\u200b\uff09\uff0c\u200b\u8acb\u200b\u67e5\u770b\u200b\u6211\u5011\u200b\u7684\u200b \u200b\u72c0\u614b\u200b\u540c\u6b65\u200b \u200b\u9801\u9762\u200b</p>"},{"location":"gateway/validator/","title":"\u7ba1\u7406\u200b\u9a57\u8b49\u5668","text":"<p>\u200b\u77ad\u89e3\u200b\u5982\u4f55\u200b\u5275\u5efa\u200b\u3001\u200b\u4fee\u6539\u200b\u3001\u200b\u67e5\u770b\u200b\u3001\u200b\u89e3\u7981\u200b\u9a57\u8b49\u5668\u200b\u3002</p>"},{"location":"gateway/validator/#_2","title":"\u5148\u6c7a\u200b\u689d\u4ef6","text":"<ul> <li>\u200b\u7b49\u5f85\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b\u5340\u584a\u200b\u540c\u6b65\u200b\u5b8c\u6210\u200b</li> <li>\u200b\u9a57\u8b49\u5668\u200b\u5b89\u5168\u200b</li> <li>\u200b\u5efa\u7acb\u200b\u5e33\u865f\u200b</li> </ul>"},{"location":"gateway/validator/#_3","title":"\u5275\u5efa\u200b\u4f60\u200b\u7684\u200b\u9a57\u8b49\u5668","text":"<p>\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u5171\u8b58\u200b\u516c\u9470\u200b (<code>dstvalconspub...</code>) \u200b\u53ef\u7528\u200b\u65bc\u200b\u901a\u904e\u200b\u62b5\u62bc\u200b NXN \u200b\u4ee3\u5e63\u200b\u4f86\u200b\u5275\u200b\u5efa\u65b0\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u3002\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u904b\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u627e\u5230\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u516c\u9470\u200b\uff1a</p> <pre><code>stcd tendermint show-validator\n</code></pre> <p>\ud83d\udea8 \u200b\u5371\u96aa\u200b\uff1a\u200b\u5207\u52ff\u200b\u4f7f\u7528\u200b <code>test</code> \u200b\u9375\u200b\u63a7\u5f8c\u7aef\u200b\u5275\u5efa\u200b\u60a8\u200b\u7684\u200b\u4e3b\u7db2\u9a57\u200b\u8b49\u5668\u200b\u5bc6\u200b\u9470\u200b\u3002\u200b\u9019\u6a23\u200b\u505a\u200b\u53ef\u80fd\u200b\u6703\u5c0e\u81f4\u200b\u60a8\u200b\u7684\u200b\u8cc7\u200b\u91d1\u901a\u200b\u904e\u200b<code>eth_sendTransaction</code>JSON-RPC \u200b\u7aef\u9ede\u200b\u9060\u7a0b\u200b\u8a2a\u554f\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u5c0e\u81f4\u200b\u8cc7\u91d1\u200b\u640d\u5931\u200b\u3002</p> <p>Ref: \u200b\u5b89\u5168\u200b\u5efa\u8b70\u200b\uff1a\u200b\u4e0d\u200b\u5b89\u5168\u200b\u914d\u7f6e\u200b\u7684\u200b geth \u200b\u53ef\u4ee5\u200b\u9060\u7a0b\u8a2a\u200b\u554f\u8cc7\u91d1\u200b</p> <p>\u200b\u8981\u200b\u5728\u200b\u6e2c\u8a66\u200b\u7db2\u4e0a\u200b\u5275\u5efa\u9a57\u200b\u8b49\u5668\u200b\uff0c\u200b\u53ea\u200b\u9700\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a</p> <pre><code>stcd tx staking create-validator \\\n  --amount=100000000000000000000nxn \\\n  --pubkey=$(stcd tendermint show-validator) \\\n  --moniker=\"choose a moniker\" \\\n  --chain-id=&lt;chain_id&gt; \\\n  --commission-rate=\"0.05\" \\\n  --commission-max-rate=\"0.10\" \\\n  --commission-max-change-rate=\"0.01\" \\\n  --min-self-delegation=\"1000000\" \\\n  --gas=\"auto\" \\\n  --gas-prices=\"5000000000dst\" \\\n  --from=&lt;key_name&gt;\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u6307\u5b9a\u200b\u4f63\u91d1\u200b\u53c3\u6578\u200b\u6642\u200b\uff0c<code>commission-max-change-rate</code> \u200b\u7528\u200b\u65bc\u200b\u8861\u91cf\u200b % point  \u200b\u76f8\u5c0d\u200b\u65bc\u200b <code>commission-rate</code> \u200b\u7684\u200b\u8b8a\u5316\u200b\u3002\u200b\u4f8b\u5982\u200b\u3002 1% \u200b\u5230\u200b 2% \u200b\u662f\u200b 100% \u200b\u7684\u200b\u589e\u9577\u200b\u7387\u200b\uff0c\u200b\u4f46\u200b\u53ea\u6709\u200b 1 \u200b\u500b\u200b\u767e\u5206\u200b\u9ede\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>Min-self-delegation</code> \u200b\u662f\u200b\u4e00\u500b\u200b\u56b4\u683c\u200b\u7684\u200b\u6b63\u200b\u6574\u6578\u200b\uff0c\u200b\u8868\u793a\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u5fc5\u9808\u200b\u59cb\u7d42\u200b\u64c1\u6709\u200b\u7684\u200b\u6700\u5c0f\u200b\u81ea\u6211\u200b\u59d4\u200b\u8a17\u200b\u6295\u7968\u200b\u6b0a\u200b\u3002 <code>min-self-delegation</code> \u200b\u70ba\u200b <code>1000000000000000000</code> \u200b\u610f\u5473\u8457\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u81ea\u6211\u200b\u59d4\u200b\u8a17\u200b\u6c38\u9060\u200b\u4e0d\u80fd\u200b\u4f4e\u200b\u65bc\u200b <code>1 nxn</code></p> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u7b2c\u4e09\u65b9\u200b\u700f\u89bd\u5668\u200b\u78ba\u8a8d\u200b\u60a8\u200b\u5728\u200b\u9a57\u8b49\u200b\u4eba\u200b\u96c6\u4e2d\u200b\u3002</p>"},{"location":"gateway/validator/#_4","title":"\u7de8\u8f2f\u9a57\u200b\u8b49\u5668\u200b\u8aaa\u660e","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u7de8\u8f2f\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u516c\u958b\u200b\u63cf\u8ff0\u200b\u3002\u200b\u6b64\u200b\u4fe1\u606f\u200b\u7528\u200b\u65bc\u200b\u8b58\u5225\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\uff0c\u200b\u59d4\u200b\u8a17\u200b\u4eba\u5c07\u200b\u6839\u64da\u200b\u9019\u4e9b\u200b\u4fe1\u606f\u200b\u4f86\u6c7a\u200b\u5b9a\u5411\u200b\u54ea\u4e9b\u200b\u9a57\u8b49\u8005\u200b\u4e0b\u6ce8\u200b\u3002\u200b\u78ba\u4fdd\u70ba\u200b\u4e0b\u9762\u200b\u7684\u200b\u6bcf\u500b\u200b\u6a19\u8a8c\u200b\u63d0\u4f9b\u200b\u8f38\u5165\u200b\u3002\u200b\u5982\u679c\u200b\u547d\u4ee4\u200b\u4e2d\u672a\u200b\u5305\u542b\u200b\u6a19\u8a8c\u200b\uff0c\u200b\u5247\u8a72\u200b\u5b57\u200b\u6bb5\u200b\u5c07\u9ed8\u200b\u8a8d\u70ba\u200b\u7a7a\u200b\uff08<code>--moniker</code> \u200b\u9ed8\u8a8d\u200b\u70ba\u200b\u6a5f\u5668\u200b\u540d\u7a31\u200b\uff09\uff0c\u200b\u5982\u679c\u200b\u8a72\u5b57\u200b\u6bb5\u200b\u5f9e\u200b\u672a\u200b\u8a2d\u7f6e\u904e\u200b\uff0c\u200b\u6216\u8005\u200b\u5982\u679c\u200b\u904e\u53bb\u200b\u8a2d\u7f6e\u200b\u904e\u5247\u200b\u4fdd\u6301\u200b\u4e0d\u8b8a\u200b\u3002</p> <p> \u200b\u6307\u5b9a\u200b\u60a8\u200b\u6b63\u5728\u200b\u7de8\u8f2f\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u3002\u200b\u5982\u679c\u200b\u60a8\u200b\u9078\u64c7\u200b\u4e0d\u200b\u5305\u542b\u200b\u67d0\u4e9b\u200b\u6a19\u8a8c\u200b\uff0c\u200b\u8acb\u200b\u8a18\u4f4f\u200b\u5fc5\u9808\u200b\u5305\u542b\u200b --from \u200b\u6a19\u8a8c\u200b\u4ee5\u200b\u6a19\u8b58\u200b\u8981\u200b\u66f4\u65b0\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u3002 <p><code>--identity</code> \u200b\u53ef\u7528\u200b\u65bc\u200b\u901a\u904e\u200b Keybase \u200b\u6216\u200b UPort \u200b\u7b49\u7cfb\u200b\u7d71\u9a57\u8b49\u200b\u8eab\u4efd\u200b\u3002\u200b\u8207\u200b Keybase \u200b\u4e00\u8d77\u200b\u4f7f\u7528\u200b\u6642\u200b\uff0c\u200b\u61c9\u200b\u4f7f\u7528\u200b keybase.io \u200b\u5e33\u6236\u200b\u751f\u6210\u200b\u7684\u200b 16 \u200b\u4f4d\u200b\u5b57\u7b26\u4e32\u200b\u586b\u5145\u200b <code>--identity</code>\u3002\u200b\u9019\u662f\u200b\u4e00\u7a2e\u200b\u8de8\u591a\u500b\u200b\u5728\u200b\u7dda\u200b\u7db2\u7d61\u9a57\u8b49\u200b\u60a8\u200b\u8eab\u4efd\u200b\u7684\u200b\u52a0\u5bc6\u200b\u5b89\u5168\u200b\u65b9\u6cd5\u200b\u3002 Keybase API \u200b\u5141\u8a31\u200b\u6211\u5011\u200b\u6aa2\u7d22\u200b\u60a8\u200b\u7684\u200b Keybase \u200b\u982d\u50cf\u200b\u3002\u200b\u9019\u200b\u5c31\u662f\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5c07\u5fbd\u6a19\u200b\u6dfb\u52a0\u200b\u5230\u9a57\u200b\u8b49\u5668\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7684\u200b\u65b9\u6cd5\u200b\u3002</p> <pre><code>stcd tx staking edit-validator\n  --moniker=\"choose a moniker\" \\\n  --website=\"https://daodst.com\" \\\n  --identity=6A0D65E29A4CBC8E \\\n  --details=\"To infinity and beyond!\" \\\n  --chain-id=&lt;chain_id&gt; \\\n  --gas=\"auto\" \\\n  --gas-prices=\"5000000000dst\" \\\n  --from=&lt;key_name&gt; \\\n  --commission-rate=\"0.10\"\n</code></pre> <p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b:<code>commission-rate</code> \u200b\u503c\u5fc5\u9808\u200b\u9075\u5b88\u200b\u4ee5\u4e0b\u200b\u8981\u6c42\u200b\uff1a</p> <ul> <li>\u200b\u5fc5\u9808\u200b\u5728\u200b 0 \u200b\u548c\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b <code>commission-max-rate</code> \u200b\u4e4b\u9593\u200b</li> <li>\u200b\u4e0d\u5f97\u200b\u8d85\u904e\u9a57\u200b\u8b49\u8005\u200b\u7684\u200b <code>commission-max-change-rate</code>\uff0c\u200b\u9019\u662f\u200b\u6bcf\u5929\u200b\u7684\u200b\u6700\u5927\u200b\u767e\u5206\u6bd4\u200b\u8b8a\u5316\u7387\u200b\u3002\u200b\u63db\u53e5\u200b\u8a71\u200b\u8aaa\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u6bcf\u5929\u200b\u53ea\u80fd\u200b\u5728\u200b<code>commission-max-change-rate</code> \u200b\u7bc4\u570d\u200b\u5167\u200b\u66f4\u6539\u200b\u5176\u200b\u4f63\u91d1\u200b\u4e00\u6b21\u200b\u3002</li> </ul>"},{"location":"gateway/validator/#_5","title":"\u67e5\u770b\u200b\u9a57\u8b49\u5668\u200b\u8aaa\u660e","text":"<p>\u200b\u4f7f\u7528\u200b\u6b64\u200b\u547d\u4ee4\u200b\u67e5\u770b\u200b\u9a57\u8b49\u5668\u200b\u7684\u200b\u4fe1\u606f\u200b\uff1a</p> <pre><code>stcd query staking validator &lt;account_cosmos&gt;\n</code></pre>"},{"location":"gateway/validator/#_6","title":"\u8ddf\u8e2a\u200b\u9a57\u8b49\u5668\u200b\u7c3d\u540d\u200b\u4fe1\u606f","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u8ddf\u8e2a\u200b\u904e\u53bb\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u7c3d\u540d\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>signing-info</code> \u200b\u547d\u4ee4\u200b\uff1a</p> <pre><code>stcd query slashing signing-info &lt;validator-pubkey&gt;\\\n  --chain-id=&lt;chain_id&gt;\n</code></pre>"},{"location":"gateway/validator/#_7","title":"\u89e3\u7981\u200b\u9a57\u8b49\u5668","text":"<p>\u200b\u7576\u9a57\u200b\u8b49\u8005\u200b\u56e0\u200b\u505c\u6a5f\u200b\u800c\u200b\u201c\u200b\u5165\u7344\u200b\u201d\u200b\u6642\u200b\uff0c\u200b\u60a8\u200b\u5fc5\u9808\u200b\u5f9e\u200b\u904b\u71df\u5546\u200b\u8cec\u6236\u200b\u63d0\u4ea4\u200b <code>Unjail</code> \u200b\u4ea4\u6613\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u80fd\u5920\u200b\u518d\u6b21\u200b\u7372\u5f97\u5340\u200b\u584a\u200b\u63d0\u8b70\u8005\u200b\u734e\u52f5\u200b\uff08\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u5340\u57df\u200b\u8cbb\u7528\u200b\u5206\u914d\u200b\uff09\u3002</p> <pre><code>stcd tx slashing unjail \\\n  --from=&lt;key_name&gt; \\\n  --chain-id=&lt;chain_id&gt;\n</code></pre>"},{"location":"gateway/validator/#_8","title":"\u78ba\u8a8d\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u6b63\u5728\u200b\u904b\u884c","text":"<p>\u200b\u5982\u679c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u8fd4\u56de\u200b\u4efb\u4f55\u200b\u5167\u5bb9\u200b\uff0c\u200b\u5247\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u8655\u200b\u65bc\u200b\u6d3b\u52d5\u200b\u72c0\u614b\u200b\uff1a</p> <pre><code>stcd query tendermint-validator-set | grep \"$(stcd tendermint show-address)\"\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u4f86\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88dd\u200b <code>stcd</code> \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f91\u200b</p> <p>\u200b\u60a8\u200b\u73fe\u5728\u200b\u61c9\u8a72\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5176\u4e2d\u200b\u4e00\u500b\u200b Daodst \u200b\u700f\u89bd\u5668\u200b\u4e2d\u200b\u770b\u5230\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u3002\u200b\u60a8\u200b\u6b63\u5728\u200b\u5c0b\u627e\u200b <code>$install_path/.stcd/config/priv_validator.json</code> \u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b <code>bech32</code> \u200b\u7de8\u78bc\u200b\u7684\u200b <code>address</code>\u3002</p> <p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b \u200b\u8981\u200b\u9032\u5165\u9a57\u200b\u8b49\u8005\u200b\u96c6\u5408\u200b\uff0c\u200b\u60a8\u200b\u9700\u8981\u200b\u64c1\u6709\u200b\u6bd4\u200b\u7b2c\u200b 100 \u200b\u500b\u9a57\u200b\u8b49\u8005\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u7e3d\u200b\u6295\u7968\u200b\u6b0a\u200b\u3002</p>"},{"location":"gateway/validator/#_9","title":"\u505c\u6b62\u200b\u4f60\u200b\u7684\u200b\u9a57\u8b49\u5668","text":"<p>\u200b\u7576\u5617\u8a66\u200b\u57f7\u884c\u200b\u4f8b\u884c\u200b\u7dad\u8b77\u200b\u6216\u200b\u8a08\u5283\u200b\u5373\u5c07\u200b\u9032\u884c\u200b\u7684\u200b\u5354\u8abf\u200b\u5347\u7d1a\u200b\u6642\u200b\uff0c\u200b\u8b93\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u7cfb\u7d71\u200b\u5730\u200b\u3001\u200b\u512a\u96c5\u5730\u200b\u505c\u6b62\u200b\u662f\u200b\u5f88\u200b\u6709\u7528\u200b\u7684\u200b\u3002</p> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u901a\u904e\u5c07\u200b <code>halt-height</code> \u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u60a8\u200b\u5e0c\u671b\u200b\u7bc0\u9ede\u200b\u95dc\u9589\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u6216\u5c07\u200b <code>--halt-height</code> \u200b\u6a19\u8a8c\u200b\u50b3\u200b\u905e\u7d66\u200b <code>stcd</code> \u200b\u4f86\u200b\u5be6\u73fe\u200b\u6b64\u200b\u76ee\u7684\u200b\u3002</p> <p>\u200b\u63d0\u4ea4\u200b\u584a\u200b\u5f8c\u200b\uff0c\u200b\u7bc0\u9ede\u5c07\u200b\u5728\u200b\u7d66\u5b9a\u200b\u9ad8\u5ea6\u200b\u4ee5\u200b\u96f6\u200b\u9000\u51fa\u200b\u4ee3\u78bc\u200b\u95dc\u9589\u200b\u3002</p>"},{"location":"gateway/validator/#_10","title":"\u5e38\u898b\u200b\u554f\u984c","text":""},{"location":"gateway/validator/#1-voting_power-0","title":"\u554f\u984c\u200b #1\uff1a\u200b\u6211\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u662f\u200b <code>voting_power: 0</code>","text":"<p>\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u5df2\u5165\u200b\u7344\u200b\u3002\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u4e0d\u200b\u5c0d\u200b\u6700\u200b\u5f8c\u200b<code>10000</code>\u200b\u584a\u200b\u4e2d\u200b\u7684\u200b<code>500</code>\u200b\u9032\u884c\u200b\u6295\u7968\u200b\uff0c\u200b\u6216\u8005\u200b\u5982\u679c\u200b\u4ed6\u5011\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\uff0c\u200b\u9a57\u8b49\u8005\u5c07\u200b\u88ab\u200b\u76e3\u7981\u200b\uff0c\u200b\u5373\u200b\u5f9e\u200b\u6d3b\u52d5\u9a57\u200b\u8b49\u8005\u200b\u96c6\u5408\u200b\u4e2d\u200b\u79fb\u9664\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u60a8\u200b\u56e0\u200b\u505c\u6a5f\u200b\u800c\u200b\u5165\u7344\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5c07\u60a8\u200b\u7684\u200b\u6295\u7968\u200b\u6b0a\u9084\u7d66\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u3002\u200b\u9996\u5148\u200b\uff0c\u200b\u5982\u679c\u200b <code>stcd</code> \u200b\u6c92\u6709\u200b\u904b\u884c\u200b\uff0c\u200b\u8acb\u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b\u5b83\u200b\uff1a</p> <pre><code>stcd daemon\n</code></pre> <p>\u200b\u7b49\u5f85\u200b\u4f60\u200b\u7684\u200b\u5168\u7bc0\u9ede\u200b\u8d95\u4e0a\u200b\u6700\u65b0\u200b\u7684\u200b\u5340\u584a\u200b\u3002\u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b \u200b\u89e3\u7981\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b \u200b\u6700\u200b\u5f8c\u200b\uff0c\u200b\u518d\u6b21\u200b\u6aa2\u67e5\u200b\u60a8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\uff0c\u200b\u770b\u770b\u200b\u60a8\u200b\u7684\u200b\u6295\u7968\u200b\u6b0a\u200b\u662f\u5426\u200b\u6062\u200b\u5fa9\u200b\u3002</p> <pre><code>stcd status\n</code></pre> <p>\u200b\u60a8\u200b\u53ef\u80fd\u200b\u6703\u200b\u6ce8\u610f\u200b\u5230\u200b\u60a8\u200b\u7684\u200b\u6295\u7968\u200b\u6b0a\u6bd4\u200b\u4ee5\u524d\u200b\u5c11\u200b\u4e86\u200b\u3002\u200b\u90a3\u200b\u662f\u200b\u56e0\u70ba\u200b\u4f60\u200b\u56e0\u200b\u505c\u6a5f\u200b\u800c\u200b\u88ab\u200b\u524a\u6e1b\u200b\u4e86\u200b\uff01</p>"},{"location":"gateway/validator/#2too-many-open-files","title":"\u554f\u984c\u200b #2\uff1a\u200b\u6211\u200b\u7684\u200b\u7bc0\u9ede\u200b\u56e0\u70ba\u200b<code>too many open files</code>\u200b\u800c\u200b\u5d29\u6f70","text":"<p>Linux \u200b\u53ef\u4ee5\u200b\u6253\u958b\u200b\u7684\u200b\u9ed8\u8a8d\u200b\u6587\u4ef6\u200b\u6578\u200b\uff08\u200b\u6bcf\u500b\u200b\u9032\u7a0b\u200b\uff09\u200b\u662f\u200b<code>1024</code>\u3002\u200b\u773e\u6240\u200b\u5468\u77e5\u200b\uff0c<code>stcd</code> \u200b\u53ef\u4ee5\u200b\u6253\u958b\u200b\u8d85\u904e\u200b <code>1024</code> \u200b\u500b\u200b\u6587\u4ef6\u200b\u3002 \u200b\u9019\u6703\u200b\u5c0e\u81f4\u200b\u9032\u7a0b\u200b\u5d29\u6f70\u200b\u3002\u200b\u5feb\u901f\u200b\u4fee\u200b\u5fa9\u200b\u662f\u200b\u904b\u884c\u200b <code>ulimit -n 40960</code>\uff08\u200b\u589e\u52a0\u200b\u5141\u8a31\u200b\u6253\u958b\u200b\u7684\u200b\u6587\u4ef6\u200b\u6578\u200b\uff09\uff0c\u200b\u7136\u200b\u5f8c\u200b\u4f7f\u7528\u200b <code>stcd daemon</code> \u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b\u9032\u7a0b\u200b\u3002 \u200b\u5982\u679c\u200b\u60a8\u200b\u4f7f\u7528\u200b <code>systemd</code> \u200b\u6216\u200b\u5176\u4ed6\u200b\u9032\u7a0b\u200b\u7ba1\u7406\u5668\u200b\u4f86\u200b\u555f\u52d5\u200b <code>stcd</code>\uff0c\u200b\u9019\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u5728\u200b\u8a72\u7d1a\u5225\u200b\u9032\u884c\u200b\u4e00\u4e9b\u200b\u914d\u7f6e\u200b\u3002 \u200b\u4fee\u200b\u5fa9\u200b\u6b64\u200b\u554f\u984c\u200b\u7684\u200b\u793a\u4f8b\u200b<code>systemd</code>\u200b\u6587\u4ef6\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code># /etc/systemd/system/stcd.service\n[Unit]\nDescription=Daodst Chain Node\nAfter=network.target\n\n[Service]\nType=simple\nUser=ubuntu\nWorkingDirectory=/home/ubuntu\nExecStart=/home/ubuntu/go/bin/stcd start\nRestart=on-failure\nRestartSec=3\nLimitNOFILE=40960\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>"},{"location":"protocol/account/","title":"\u5e33\u865f","text":"<p>\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u5340\u584a\u200b\u93c8\u200b\u4e0a\u200b\u4ee5\u200b\u7368\u7279\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5275\u5efa\u200b\u548c\u200b\u8868\u793a\u200b\u52a0\u5bc6\u200b\u9322\u5305\u200b\uff08\u200b\u6216\u200b\u5e33\u6236\u200b\uff09\u3002\u200b\u5c0d\u200b\u65bc\u200b\u5728\u200b Daodst \u200b\u4e0a\u200b\u8207\u200b\u5e33\u6236\u200b\u985e\u578b\u200b\u4ea4\u4e92\u200b\u7684\u200b\u958b\u200b\u767c\u4eba\u54e1\u200b\uff0c\u200b\u5728\u200b\u5176\u200b dApp \u200b\u524d\u7aef\u200b\u7684\u200b\u9322\u200b\u5305\u200b\u96c6\u6210\u200b\u904e\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u91cd\u8981\u200b\u7684\u200b\u662f\u200b\u8981\u200b\u4e86\u89e3\u200b Daodst \u200b\u4e0a\u200b\u7684\u200b\u8cec\u6236\u200b\u88ab\u200b\u5be6\u65bd\u200b\u70ba\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u5730\u5740\u200b\u517c\u5bb9\u200b\u3002</p>"},{"location":"protocol/account/#_1","title":"\u5275\u5efa\u200b\u8cec\u865f","text":"<p>\u200b\u8981\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u5e33\u6236\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5275\u5efa\u79c1\u200b\u9470\u200b\u3001\u200b\u5bc6\u9470\u5eab\u200b\u6587\u4ef6\u200b\uff08\u200b\u53d7\u5bc6\u78bc\u200b\u4fdd\u8b77\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\uff09\u200b\u6216\u52a9\u200b\u8a18\u8a5e\u200b\uff08\u200b\u53ef\u4ee5\u200b\u8a2a\u554f\u200b\u591a\u500b\u200b\u79c1\u200b\u9470\u200b\u7684\u200b\u4e00\u4e32\u200b\u55ae\u8a5e\u200b\uff09\u3002</p> <p>\u200b\u9664\u4e86\u200b\u5177\u6709\u200b\u4e0d\u540c\u200b\u7684\u200b\u5b89\u5168\u200b\u529f\u80fd\u200b\u5916\u200b\uff0c\u200b\u5b83\u5011\u200b\u4e4b\u9593\u200b\u6700\u5927\u200b\u7684\u200b\u5340\u5225\u200b\u5728\u200b\u65bc\u200b\u79c1\u200b\u9470\u200b\u6216\u200b\u5bc6\u200b\u9470\u5eab\u200b\u6587\u4ef6\u200b\u50c5\u5275\u200b\u5efa\u4e00\u500b\u200b\u5e33\u6236\u200b\u3002\u200b\u5275\u5efa\u200b\u4e00\u500b\u52a9\u200b\u8a18\u8a5e\u200b\u53ef\u4ee5\u200b\u8b93\u200b\u60a8\u200b\u63a7\u5236\u200b\u8a31\u591a\u200b\u5e33\u6236\u200b\uff0c\u200b\u6240\u6709\u200b\u5e33\u6236\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u540c\u4e00\u200b\u500b\u200b\u77ed\u8a9e\u200b\u8a2a\u554f\u200b\u3002</p> <p>Cosmos \u200b\u5340\u584a\u200b\u93c8\u200b\u8207\u200b Daodst \u200b\u4e00\u6a23\u200b\uff0c\u200b\u652f\u6301\u200b\u4f7f\u7528\u200b\u52a9\u8a18\u8a5e\u200b\u5275\u5efa\u200b\u5e33\u6236\u200b\uff0c\u200b\u4e5f\u200b\u7a31\u200b\u70ba\u200b\u5206\u5c64\u78ba\u200b\u5b9a\u6027\u200b\u5bc6\u9470\u200b\u751f\u6210\u200b\uff08HD \u200b\u5bc6\u9470\u200b\uff09\u3002\u200b\u9019\u5141\u8a31\u200b\u7528\u6236\u200b\u5728\u200b\u591a\u500b\u200b\u5340\u584a\u200b\u93c8\u4e0a\u200b\u5275\u5efa\u200b\u5e33\u6236\u200b\uff0c\u200b\u800c\u200b\u7121\u200b\u9700\u200b\u7ba1\u7406\u200b\u591a\u500b\u200b\u5bc6\u200b\u9470\u200b\u3002</p> <p>HD \u200b\u5bc6\u9470\u200b\u901a\u904e\u200b\u7372\u200b\u53d6\u52a9\u200b\u8a18\u8a5e\u200b\u4e26\u5c07\u200b\u5176\u200b\u8207\u200b\u4e00\u689d\u200b\u7a31\u200b\u70ba\u200b\u6d3e\u751f\u200b\u8def\u5f91\u200b\u7684\u200b\u4fe1\u606f\u200b\u7d44\u5408\u4f86\u200b\u751f\u6210\u200b\u5730\u5740\u200b\u3002\u200b\u5340\u584a\u200b\u93c8\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5b83\u5011\u200b\u652f\u6301\u200b\u7684\u200b\u63a8\u5c0e\u8def\u5f91\u200b\u4e0a\u200b\u6709\u6240\u4e0d\u540c\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u8981\u901a\u200b\u904e\u5340\u200b\u584a\u200b\u93c8\u200b\u4e0a\u200b\u7684\u200b\u52a9\u200b\u8a18\u8a5e\u200b\u8a2a\u554f\u200b\u6240\u6709\u200b\u8cec\u6236\u200b\uff0c\u200b\u4f7f\u7528\u200b\u8a72\u5340\u200b\u584a\u200b\u93c8\u200b\u7684\u200b\u7279\u5b9a\u200b\u63a8\u5c0e\u8def\u5f91\u200b\u975e\u5e38\u200b\u91cd\u8981\u200b\u3002</p>"},{"location":"protocol/account/#_2","title":"\u4ee3\u7406\u200b\u8cec\u6236","text":"<p>\u200b\u8853\u8a9e\u200b<code>\u200b\u8cec\u6236\u200b</code>\u200b\u548c\u200b<code>\u200b\u5730\u5740\u200b</code>\u200b\u7d93\u5e38\u200b\u4e92\u63db\u200b\u4f7f\u7528\u200b\u4f86\u200b\u63cf\u8ff0\u200b\u52a0\u5bc6\u200b\u9322\u5305\u200b\u3002\u200b\u5728\u200b Cosmos SDK \u200b\u4e2d\u200b\uff0c\u200b\u4e00\u500b\u200b\u8cec\u6236\u200b\u6307\u5b9a\u200b\u4e00\u5c0d\u200b\u516c\u9470\u200b\uff08PubKey\uff09\u200b\u548c\u200b\u79c1\u200b\u9470\u200b\uff08PrivKey\uff09\u3002\u200b\u6d3e\u751f\u200b\u8def\u5f91\u200b\u5b9a\u7fa9\u4e86\u200b\u79c1\u200b\u9470\u200b\u3001\u200b\u516c\u9470\u200b\u548c\u200b\u5730\u5740\u200b\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u6d3e\u751f\u200b PubKey \u200b\u4ee5\u200b\u751f\u6210\u200b\u4e0d\u540c\u200b\u683c\u5f0f\u200b\u7684\u200b\u5404\u7a2e\u200b\u5730\u5740\u200b\uff0c\u200b\u9019\u4e9b\u200b\u5730\u5740\u200b\u7528\u200b\u65bc\u200b\u8b58\u5225\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u7684\u200b\u7528\u6236\u200b\uff08\u200b\u4ee5\u53ca\u200b\u5176\u4ed6\u200b\u65b9\u200b\uff09\u3002 Cosmos \u200b\u93c8\u200b\u7684\u200b\u5e38\u898b\u200b\u5730\u5740\u200b\u5f62\u5f0f\u200b\u662f\u200b bech32 \u200b\u683c\u5f0f\u200b\uff08\u200b\u4f8b\u5982\u200b dst1 ...\uff09\u3002\u200b\u5730\u5740\u200b\u4e5f\u200b\u8207\u200b\u6d88\u606f\u200b\u76f8\u95dc\u200b\u806f\u4ee5\u8b58\u5225\u200b\u6d88\u606f\u200b\u7684\u200b\u767c\u9001\u8005\u200b\u3002</p> <p>PrivKey \u200b\u7528\u200b\u65bc\u200b\u751f\u6210\u200b\u6578\u5b57\u200b\u7c3d\u540d\u200b\uff0c\u200b\u4ee5\u8b49\u660e\u200b\u8207\u200b PrivKey \u200b\u95dc\u806f\u200b\u7684\u200b\u5730\u5740\u200b\u6279\u51c6\u200b\u7d66\u5b9a\u200b\u6d88\u606f\u200b\u3002\u200b\u901a\u904e\u200b\u5c0d\u200b PrivKey \u200b\u61c9\u7528\u200b\u52a0\u5bc6\u200b\u65b9\u6848\u200b\uff08\u200b\u7a31\u70ba\u200b\u6a62\u5713\u66f2\u7dda\u200b\u6578\u5b57\u200b\u7c3d\u540d\u200b\u7b97\u6cd5\u200b (ECDSA)\uff09\u200b\u4f86\u200b\u57f7\u884c\u200b\u8b49\u660e\u200b\uff0c\u200b\u4ee5\u200b\u751f\u6210\u200b\u8207\u200b\u6d88\u606f\u200b\u4e2d\u200b\u7684\u200b\u5730\u5740\u200b\u9032\u884c\u200b\u6bd4\u200b\u8f03\u200b\u7684\u200b\u516c\u9470\u200b\u3002</p>"},{"location":"protocol/account/#daodst","title":"Daodst \u200b\u8cec\u865f","text":"<p>Daodst \u200b\u5b9a\u7fa9\u4e86\u200b\u81ea\u5df1\u200b\u7684\u200b\u81ea\u5b9a\u200b\u7fa9\u8cec\u200b\u6236\u985e\u200b\u578b\u200b\uff0c\u200b\u4ee5\u5be6\u73fe\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u5730\u5740\u200b\u517c\u5bb9\u200b\u7684\u200b HD \u200b\u9322\u5305\u200b\u3002\u200b\u5b83\u200b\u4f7f\u7528\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b ECDSA secp256k1 \u200b\u66f2\u7dda\u200b\u4f5c\u70ba\u200b\u5bc6\u200b\u9470\u200b (eth_secp265k1) \u200b\u4e26\u6eff\u8db3\u200b EIP84 \u200b\u7684\u200b\u5b8c\u6574\u200b BIP44 \u200b\u8def\u5f91\u200b\u3002\u200b\u4e0d\u8981\u200b\u5c07\u9019\u689d\u200b\u52a0\u5bc6\u200b\u66f2\u7dda\u200b\u8207\u200b\u6bd4\u7279\u200b\u5e63\u7684\u200b ECDSA secp256k1 \u200b\u66f2\u7dda\u200b\u6df7\u6dc6\u200b\u3002</p> <p>\u200b\u57fa\u200b\u65bc\u200b Daodst \u200b\u7684\u200b\u5e33\u6236\u200b\u7684\u200b\u6839\u200b HD \u200b\u8def\u5f91\u200b\u662f\u200b <code>m/44'/60'/0'/0</code>\u3002 Daodst \u200b\u4f7f\u7528\u200b Coin type 60 \u200b\u4f86\u200b\u652f\u6301\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u7684\u200b\u8cec\u6236\u200b\uff0c\u200b\u4e0d\u50cf\u200b\u8a31\u591a\u200b\u5176\u4ed6\u200b\u4f7f\u7528\u200b Coin type 118 \u200b\u7684\u200b Cosmos \u200b\u93c8\u200b\uff08coin types \u200b\u5217\u8868\u200b</p> <p>\u200b\u81ea\u5b9a\u7fa9\u200b Daodst EthAccount \u200b\u6eff\u8db3\u4f86\u200b\u81ea\u200b Cosmos SDK \u200b\u8eab\u4efd\u200b\u9a57\u8b49\u200b\u6a21\u584a\u200b\u7684\u200b AccountI \u200b\u63a5\u53e3\u200b\uff0c\u200b\u4e26\u200b\u5305\u542b\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u5730\u5740\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u5176\u4ed6\u200b\u5b57\u200b\u6bb5\u200b\uff1a</p> <pre><code>// EthAccountI represents the interface of an Daodst compatible account\ntype EthAccountI interface {\n    authtypes.AccountI\n    // EthAddress returns the ethereum Address representation of the AccAddress\n    EthAddress() common.Address\n    // CodeHash is the keccak256 hash of the contract code (if any)\n    GetCodeHash() common.Hash\n    // SetCodeHash sets the code hash to the account fields\n    SetCodeHash(code common.Hash) error\n    // Type returns the type of Ethereum Account (EOA or Contract)\n    Type() int8\n}\n</code></pre>"},{"location":"protocol/account/#_3","title":"\u5730\u5740\u200b\u548c\u200b\u516c\u9470","text":"<p>BIP-0173 \u200b\u70ba\u200b\u9694\u200b\u96e2\u898b\u200b\u8b49\u8f38\u51fa\u200b\u5730\u5740\u200b\u5b9a\u7fa9\u4e86\u200b\u4e00\u7a2e\u200b\u65b0\u200b\u683c\u5f0f\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u6a19\u8b58\u200b Bech32 \u200b\u7528\u6cd5\u200b\u7684\u200b\u4eba\u985e\u200b\u53ef\u8b80\u200b\u90e8\u5206\u200b\u3002 Daodst \u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b HRP\uff08\u200b\u4eba\u985e\u200b\u53ef\u8b80\u200b\u524d\u7db4\u200b\uff09\u200b\u4f5c\u70ba\u200b\u57fa\u790e\u200b HRP\uff1a</p> \u200b\u7f51\u7edc\u200b \u200b\u4e3b\u7f51\u200b \u200b\u6d4b\u8bd5\u200b\u7f51\u200b Daodst dst dst <p>\u200b\u5728\u200b Daodst \u200b\u4e0a\u9ed8\u8a8d\u200b\u53ef\u7528\u200b\u7684\u200b\u5730\u5740\u200b/\u200b\u516c\u9470\u200b\u6709\u200b 3 \u200b\u7a2e\u200b\u4e3b\u8981\u200b\u985e\u578b\u200b\u7684\u200b HRP\uff1a</p> <ul> <li>\u200b\u5e33\u6236\u200b\u7684\u200b\u5730\u5740\u200b\u548c\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u8b58\u5225\u200b\u7528\u6236\u200b\uff08\u200b\u4f8b\u5982\u200b\u6d88\u606f\u200b\u7684\u200b\u767c\u4ef6\u200b\u4eba\u200b\uff09\u3002\u200b\u5b83\u5011\u200b\u662f\u200b\u4f7f\u200b eth_secp256k1 \u200b\u66f2\u7dda\u200b\u5f97\u51fa\u200b\u7684\u200b\u3002</li> <li>\u200b\u9a57\u8b49\u5668\u200b\u64cd\u4f5c\u200b\u54e1\u200b\u7684\u200b\u5730\u5740\u200b\u548c\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u8b58\u200b\u5225\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b\u64cd\u4f5c\u200b\u54e1\u200b\u3002\u200b\u5b83\u5011\u200b\u662f\u200b\u4f7f\u200b eth_secp256k1 \u200b\u66f2\u7dda\u200b\u5f97\u51fa\u200b\u7684\u200b\u3002</li> <li>\u200b\u5171\u8b58\u200b\u7bc0\u9ede\u200b\u7684\u200b\u5730\u5740\u200b\u548c\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u6a19\u8b58\u200b\u53c3\u8207\u5171\u8b58\u200b\u7684\u200b\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u3002\u200b\u5b83\u5011\u200b\u662f\u200b\u4f7f\u7528\u200b ed25519 \u200b\u66f2\u7dda\u200b\u5f97\u51fa\u200b\u7684\u200b</li> </ul> \u200b\u540d\u79f0\u200b bech32 \u200b\u5730\u5740\u200b\u524d\u7f00\u200b bech32 \u200b\u516c\u94a5\u200b\u524d\u7f00\u200b \u200b\u66f2\u7ebf\u200b ** \u200b\u5730\u5740\u200b\u5b57\u8282\u200b\u957f\u5ea6\u200b** \u200b\u516c\u94a5\u200b\u5b57\u8282\u200b\u957f\u5ea6\u200b \u200b\u5e33\u6236\u200b dst dstpub eth_secp256k1 20 33(compressed) \u200b\u9a57\u8b49\u5668\u200b\u64cd\u4f5c\u200b dstvaloper dstvaloperpub eth_secp256k1 20 33(compressed) \u200b\u5171\u8b58\u200b\u7bc0\u9ede\u200b dstvalcons dstvalconspub ed25519 32"},{"location":"protocol/account/#_4","title":"\u5ba2\u6237\u200b\u7684\u200b\u5730\u5740\u200b\u683c\u5f0f","text":"<p>Eth\u200b\u8d26\u53f7\u200b \u200b\u53ef\u4ee5\u200b\u7528\u200b Bech32 (dst1...) \u200b\u548c\u200b\u5341\u516d\u8fdb\u5236\u200b (0x...) \u200b\u683c\u5f0f\u200b\u8868\u793a\u200b\uff0c\u200b\u4ee5\u200b\u5b9e\u73b0\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b Web3 \u200b\u5de5\u5177\u200b\u517c\u5bb9\u6027\u200b.</p> <p>Bech32 \u200b\u683c\u5f0f\u200b\u662f\u200b\u901a\u904e\u200b CLI \u200b\u548c\u200b REST \u200b\u5ba2\u6236\u200b\u7aef\u200b\u9032\u884c\u200b Cosmos-SDK \u200b\u67e5\u8a62\u200b\u548c\u200b\u4ea4\u6613\u200b\u7684\u200b\u9ed8\u8a8d\u200b\u683c\u5f0f\u200b\u3002\u200b\u53e6\u4e00\u65b9\u9762\u200b\uff0c\u200b\u5341\u516d\u200b\u9032\u5236\u200b\u683c\u5f0f\u200b\u662f\u200b\u4ee5\u592a\u200b\u574a\u200b common.Address \u200b\u8868\u793a\u200b Cosmos sdk.AccAddress\u3002</p> <ul> <li>\u200b\u5730\u5740\u200b (Bech32): <code>dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw</code></li> <li>\u200b\u5730\u5740\u200b (EIP55 16\u200b\u8fdb\u5236\u200b): <code>0x91defC7fE5603DFA8CC9B655cF5772459BF10c6f</code></li> <li>\u200b\u538b\u7f29\u200b\u516c\u94a5\u200b: <code>{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"AsV5oddeB+hkByIJo/4lZiVUgXTzNfBPKC73cZ4K1YD2\"}</code></li> </ul>"},{"location":"protocol/account/#_5","title":"\u5730\u5740\u200b\u8f6c\u6362","text":"<p>stcd debug addr  \u200b\u53ef\u200b\u7528\u4e8e\u200b\u5728\u200b\u5341\u516d\u8fdb\u5236\u200b\u548c\u200b bech32 \u200b\u683c\u5f0f\u200b\u4e4b\u95f4\u200b\u8f6c\u6362\u200b\u5730\u5740\u200b\u3002\u200b\u4f8b\u5982\u200b\uff1a Bech32 <pre><code> $ stcd debug addr dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw\n  Address: [20 87 74 109 255 45 223 158 7 130 139 67 69 211 4 9 25 175 86 82]\n  Address (hex): 14574A6DFF2DDF9E07828B4345D3040919AF5652\n  Bech32 Acc: dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw\n  Bech32 Val: dstvaloper1z3t55m0l9h0eupuz3dp5t5cypyv674jjn4d6nn\n</code></pre> <p>Hex</p> <pre><code> $ stcd debug addr 14574A6DFF2DDF9E07828B4345D3040919AF5652\n  Address: [20 87 74 109 255 45 223 158 7 130 139 67 69 211 4 9 25 175 86 82]\n  Address (hex): 14574A6DFF2DDF9E07828B4345D3040919AF5652\n  Bech32 Acc: dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw\n  Bech32 Val: dstvaloper1z3t55m0l9h0eupuz3dp5t5cypyv674jjn4d6nn\n</code></pre>"},{"location":"protocol/account/#key","title":"Key \u200b\u5bfc\u51fa","text":"<p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u5e26\u6709\u200b\u6807\u5fd7\u200b --bech  (acc|val|cons) \u200b\u7684\u200b stcd \u200b\u7684\u200b keys show \u200b\u547d\u4ee4\u200b\u6765\u200b\u83b7\u53d6\u200b\u5730\u5740\u200b\u548c\u200b\u5bc6\u94a5\u200b\uff0c\u200b\u5982\u4e0a\u6240\u8ff0\u200b\uff0c <p>\u200b\u666e\u901a\u200b\u8d26\u53f7\u200b</p> <pre><code> $ stcd keys show dev0 --bech acc\n- name: dev0\n  type: local\n  address: dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw\n  pubkey: '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"AsV5oddeB+hkByIJo/4lZiVUgXTzNfBPKC73cZ4K1YD2\"}'\n  mnemonic: \"\"\n</code></pre> <p>\u200b\u9a8c\u8bc1\u200b\u5668\u200b</p> <pre><code> $ stcd keys show dev0 --bech val\n- name: dev0\n  type: local\n  address: dstvaloper1z3t55m0l9h0eupuz3dp5t5cypyv674jjn4d6nn\n  pubkey: '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"AsV5oddeB+hkByIJo/4lZiVUgXTzNfBPKC73cZ4K1YD2\"}'\n  mnemonic: \"\"\n</code></pre> <p>\u200b\u5171\u8bc6\u200b</p> <pre><code> $ stcd keys show dev0 --bech cons\n- name: dev0\n  type: local\n  address: dstvalcons1rllqa5d97n6zyjhy6cnscc7zu30zjn3f7wyj2n\n  pubkey: '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"A/fVLgIqiLykFQxum96JkSOoTemrXD0tFaFQ1B0cpB2c\"}'\n  mnemonic: \"\"\n</code></pre>"},{"location":"protocol/account/#_6","title":"\u8cec\u865f\u200b\u67e5\u8a62","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b CLI\u3001gRPC \u200b\u6216\u200b</p> <p>\u200b\u547d\u4ee4\u884c\u200b\u754c\u9762\u200b</p> <pre><code># NOTE: the --output (-o) flag will define the output format in JSON or YAML (text)\nstcd q auth account $(stcd keys show dev0 -a) -o text\n\n'@type': /ethermint.types.v1.EthAccount\nbase_account:\naccount_number: \"0\"\naddress: dst1z3t55m0l9h0eupuz3dp5t5cypyv674jj7mz2jw\npub_key:\n  '@type': /ethermint.crypto.v1.ethsecp256k1.PubKey\n  key: AsV5oddeB+hkByIJo/4lZiVUgXTzNfBPKC73cZ4K1YD2\nsequence: \"1\"\ncode_hash: 0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470\n</code></pre> <p>Cosmos gRPC and REST</p> <pre><code># GET /cosmos/auth/v1beta1/accounts/{address}\ncurl -X GET \"http://localhost:10337/cosmos/auth/v1beta1/accounts/dst14au322k9munkmx5wrchz9q30juf5wjgz2cfqku\" -H \"accept: application/json\"\n</code></pre> <p>JSON-RPC \u200b\u8981\u200b\u4f7f\u7528\u200b Web3 \u200b\u68c0\u7d22\u200b\u4ee5\u592a\u200b\u574a\u200b\u5341\u516d\u8fdb\u5236\u200b\u5730\u5740\u200b\uff0c\u200b\u8bf7\u200b\u4f7f\u7528\u200b JSON-RPC eth_accounts \u200b\u6216\u200b personal_listAccounts \u200b\u7aef\u70b9\u200b</p> <pre><code># query against a local node\ncurl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_accounts\",\"params\":[],\"id\":1}' -H \"Content-Type: application/json\" http://localhost:8545\n\ncurl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"personal_listAccounts\",\"params\":[],\"id\":1}' -H \"Content-Type: application/json\" http://localhost:8545\n</code></pre>"},{"location":"protocol/chainid/","title":"\u93c8\u200bID","text":"<p>\u200b\u93c8\u200b ID \u200b\u662f\u200b\u4ee3\u8868\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u7684\u200b\u552f\u4e00\u200b\u6a19\u8b58\u7b26\u200b\u3002\u200b\u6211\u5011\u200b\u7528\u200b\u5b83\u200b\u4f86\u200b\u5340\u5206\u200b\u4e0d\u540c\u200b\u7684\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\uff0c\u200b\u4e26\u78ba\u200b\u4fdd\u200b\u4ea4\u6613\u200b\u548c\u200b\u6d88\u606f\u200b\u88ab\u200b\u767c\u200b\u9001\u5230\u200b\u6b63\u78ba\u200b\u7684\u200b\u7db2\u7d61\u200b\u3002 Daodst\u200b\u7db2\u7d61\u200b\u9075\u5faa\u200b identifier_EIP155-version \u200b\u7684\u200b\u683c\u5f0f\u200b\u3002</p>"},{"location":"protocol/chainid/#_1","title":"\u4e3b\u7db2","text":"\u540d\u7a31\u200b \u200b\u93c8\u200b ID \u200b\u6a19\u8b58\u7b26\u200b EIP155 Number \u200b\u7248\u672c\u200b \u200b\u6fc0\u6d3b\u200b Daodst1 <code>daodst_7777-1</code> daodst 7777 1 yes"},{"location":"protocol/chainid/#_2","title":"\u6e2c\u8a66\u7db2","text":"\u540d\u7a31\u200b \u200b\u93c8\u200b ID \u200b\u6a19\u8b58\u7b26\u200b EIP155 Number \u200b\u7248\u672c\u200b \u200b\u6fc0\u6d3b\u200b Daodst Public Testnet <code>daodst_9000-1</code> daodst 9000 1 yes"},{"location":"protocol/chainid/#_3","title":"\u93c8\u200b\u8eab\u4efd","text":"<p>\u200b\u6bcf\u689d\u200b\u93c8\u200b\u90fd\u200b\u5fc5\u9808\u200b\u6709\u200b\u4e00\u500b\u200b\u552f\u4e00\u200b\u7684\u200b\u6a19\u8b58\u7b26\u200b\u6216\u200b <code>chain-id</code>\u3002 Tendermint \u200b\u8981\u6c42\u200b\u6bcf\u500b\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u5728\u200b genesis.json \u200b\u5b57\u200b\u6bb5\u200b \u200b\u4e2d\u5b9a\u7fa9\u200b\u81ea\u5df1\u200b\u7684\u200b <code>chain-id</code>\u3002\u200b\u4f46\u662f\u200b\uff0c\u200b\u70ba\u200b\u4e86\u200b\u540c\u6642\u200b\u7b26\u5408\u200b EIP155 \u200b\u548c\u200b Cosmos \u200b\u93c8\u5347\u7d1a\u200b\u6a19\u6e96\u200b\uff0cDaodst \u200b\u517c\u5bb9\u200b\u93c8\u5fc5\u9808\u200b\u5be6\u73fe\u200b\u4ed6\u5011\u200b\u7684\u200b\u93c8\u200b\u6a19\u8b58\u7b26\u200b\u7684\u200b\u7279\u6b8a\u200b\u7d50\u69cb\u200b\u3002</p>"},{"location":"protocol/chainid/#_4","title":"\u7d50\u69cb","text":"<p>Daodst \u200b\u93c8\u200b ID \u200b\u5305\u542b\u200b 3 \u200b\u500b\u200b\u4e3b\u8981\u200b\u7d44\u4ef6\u200b</p> <ul> <li>\u200b\u6a19\u8b58\u7b26\u200b: \u200b\u5b9a\u7fa9\u61c9\u200b\u7528\u200b\u7a0b\u5e8f\u200b\u540d\u7a31\u200b\u7684\u200b\u975e\u7d50\u200b\u69cb\u5316\u200b\u5b57\u7b26\u4e32\u200b\u3002</li> <li>EIP155 Number: \u200b\u4e0d\u53ef\u200b\u8b8a\u200b EIP155 <code>CHAIN_ID</code>   \u200b\u5b9a\u7fa9\u91cd\u200b\u653e\u200b\u653b\u64ca\u200b\u4fdd\u8b77\u6578\u200b\u3002</li> <li>\u200b\u7248\u672c\u200b\u865f\u200b: \u200b\u662f\u200b\u93c8\u200b\u7576\u524d\u200b\u6b63\u5728\u200b\u904b\u884c\u200b\u7684\u200b\u7248\u672c\u200b\u865f\u200b\uff08\u200b\u59cb\u7d42\u200b\u70ba\u200b\u6b63\u6578\u200b\uff09\u3002\u200b\u6bcf\u6b21\u200b\u93c8\u5347\u7d1a\u200b\u6216\u200b\u5206\u53c9\u200b\u6642\u200b\uff0c\u200b\u9019\u500b\u200b\u6578\u5b57\u200b\u5fc5\u9808\u200b\u905e\u589e\u200b\uff0c\u200b\u4ee5\u200b\u907f\u514d\u200b\u7db2\u7d61\u200b\u6216\u5171\u8b58\u200b\u932f\u8aa4\u200b\u3002</li> </ul>"},{"location":"protocol/chainid/#_5","title":"\u683c\u5f0f","text":"<p>genesis\u200b\u4e2d\u200b\u6307\u5b9a\u200b\u548c\u200bDaodst\u200b\u517c\u5bb9\u200b\u7684\u200bchain-id\u200b\u7684\u200b\u683c\u5f0f\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>{identifier}_{EIP155}-{version}\n</code></pre> <p>\u200b\u4e0b\u8868\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u500b\u200b\u793a\u4f8b\u200b\uff0c\u200b\u5176\u4e2d\u200b\u7b2c\u4e8c\u884c\u200b\u5c0d\u61c9\u200b\u65bc\u200b\u7b2c\u4e00\u884c\u200b\u7684\u200b\u5347\u7d1a\u200b\uff1a</p> ChainID Identifier EIP155 Number Version Number <code>daodst_7777-1</code> daodst 7777 1 <code>daodst_7777-2</code> daodst 7777 2 <code>...</code> ... ... ... <code>daodst_7777-N</code> daodst 7777 N"},{"location":"protocol/coin/","title":"\u4ee3\u5e63","text":""},{"location":"protocol/coin/#daodst","title":"DAODST \u200b\u4ee3\u5e01","text":"<p>DST \u200b\u63d0\u4f9b\u200b\u4ee5\u4e0b\u200b\u5be6\u7528\u200b\u7a0b\u5e8f\u200b\uff1a\u200b\u4f5c\u70ba\u200b\u5728\u200b EVM \u200b\u4e0a\u904b\u884c\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u7684\u200b\u71c3\u6599\u200b\u3002</p> <p>NXN \u200b\u63d0\u4f9b\u200b\u4ee5\u4e0b\u200b\u5be6\u7528\u200b\u7a0b\u5e8f\u200b\uff1a\u200b\u4fdd\u8b77\u200b\u6b0a\u76ca\u200b\u8b49\u660e\u93c8\u200b\u3001\u200b\u7528\u200b\u65bc\u200b\u6cbb\u7406\u200b\u5efa\u8b70\u200b\u7684\u200b\u4ee3\u5e63\u200b\u3001\u200b\u5411\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u7528\u6236\u200b\u5206\u914d\u200b\u8cbb\u7528\u200b\u3002</p> <p>DAODST \u200b\u8cc7\u7522\u5206\u200b\u70ba\u200b\u4e09\u985e\u200b\uff1a</p> <ul> <li>\u200b\u539f\u751f\u200b NXN\u3001DST\u3001HASH \u200b\u4ee3\u5e63\u200b</li> <li>IBC\u200b\u4ee3\u5e63\u200b\uff08\u200b\u901a\u904e\u200b IBC\uff09</li> <li>\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u7684\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u4f8b\u5982\u200b ERC-20</li> </ul>"},{"location":"protocol/coin/#cosmos","title":"Cosmos \u200b\u4ee3\u5e01","text":"<p>\u200b\u8cec\u6236\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5176\u9918\u984d\u200b\u4e2d\u200b\u64c1\u6709\u200b Cosmos \u200b\u5e63\u200b\uff0c\u200b\u9019\u4e9b\u200b\u5e63\u7528\u200b\u65bc\u200b\u8207\u200b\u5176\u4ed6\u200b Cosmos \u200b\u7684\u200b\u64cd\u4f5c\u200b\u548c\u200b\u4ea4\u6613\u200b\u3002 \u200b\u9019\u4e9b\u200b\u4f8b\u5b50\u200b\u5305\u62ec\u200b\u4f7f\u7528\u200b\u4ee3\u5e63\u200b\u9032\u884c\u8cea\u200b\u62bc\u200b\u3001IBC \u200b\u8f49\u8cec\u200b\u3001\u200b\u6cbb\u7406\u200b\u5b58\u6b3e\u200b\u548c\u200b EVM\u3002</p>"},{"location":"protocol/coin/#evm","title":"EVM \u200b\u4ee3\u5e01","text":"<p>Daodst \u200b\u8207\u200b ERC20 \u200b\u4ee3\u5e63\u200b\u548c\u200b EVM \u200b\u539f\u751f\u200b\u652f\u6301\u200b\u7684\u200b\u5176\u4ed6\u200b\u4e0d\u53ef\u200b\u66ff\u4ee3\u200b\u4ee3\u5e63\u200b\u6a19\u6e96\u200b\uff08EIP721\u3001EIP1155\uff09\u200b\u517c\u5bb9\u200b\u3002</p>"},{"location":"protocol/encode/","title":"\u7de8\u78bc","text":"<p>\u200b\u7de8\u78bc\u200b\u662f\u200b\u6307\u5c07\u200b\u6578\u64da\u200b\u5f9e\u200b\u4e00\u7a2e\u200b\u683c\u5f0f\u200b\u8f49\u63db\u200b\u70ba\u200b\u53e6\u200b\u4e00\u7a2e\u200b\u683c\u5f0f\u200b\u4ee5\u4f7f\u200b\u5176\u200b\u66f4\u52a0\u200b\u5b89\u5168\u200b\u548c\u200b\u9ad8\u6548\u200b\u7684\u200b\u904e\u7a0b\u200b\u3002</p> <p>\u200b\u5728\u200b\u5340\u584a\u200b\u93c8\u200b\u7684\u200b\u80cc\u666f\u200b\u4e0b\u200b\uff0c\u200b\u7de8\u78bc\u200b\u7528\u200b\u65bc\u200b\u78ba\u4fdd\u6578\u200b\u64da\u200b\u4ee5\u200b\u5b89\u5168\u200b\u4e14\u6613\u200b\u65bc\u200b\u8a2a\u554f\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5b58\u5132\u200b\u548c\u200b\u50b3\u8f38\u200b\u3002</p> <p>\u200b\u905e\u6b78\u9577\u200b\u5ea6\u200b\u524d\u7db4\u200b (RLP) \u200b\u662f\u200b\u4e00\u7a2e\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u57f7\u200b\u884c\u5ba2\u200b\u6236\u7aef\u200b\u4e2d\u5ee3\u6cdb\u200b\u4f7f\u7528\u200b\u7684\u200b\u5e8f\u5217\u5316\u200b\u683c\u5f0f\u200b\u3002</p> <p>\u200b\u5b83\u200b\u7684\u200b\u76ee\u7684\u200b\u662f\u200b\u5c0d\u200b\u4efb\u610f\u200b\u5d4c\u5957\u200b\u7684\u200b\u4e8c\u200b\u9032\u5236\u200b\u6578\u64da\u200b\u6578\u7d44\u200b\u9032\u884c\u200b\u7de8\u78bc\u200b\uff0c\u200b\u662f\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e2d\u7528\u200b\u65bc\u200b\u5e8f\u5217\u5316\u200b\u5c0d\u8c61\u200b\u7684\u200b\u4e3b\u8981\u200b\u7de8\u78bc\u200b\u65b9\u5f0f\u200b\u3002</p> <p>RLP \u200b\u50c5\u5c0d\u200b\u7d50\u69cb\u200b\u9032\u884c\u200b\u7de8\u78bc\u200b\uff0c\u200b\u800c\u5c07\u200b\u5c0d\u200b\u7279\u5b9a\u200b\u539f\u5b50\u200b\u6578\u64da\u200b\u985e\u578b\u200b\uff08\u200b\u4f8b\u5982\u200b\u5b57\u7b26\u4e32\u200b\u3001\u200b\u6574\u6578\u200b\u548c\u200b\u6d6e\u9ede\u6578\u200b\uff09\u200b\u7684\u200b\u7de8\u78bc\u200b\u7559\u7d66\u200b\u9ad8\u968e\u5354\u8b70\u200b\u3002</p> <p>\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e2d\u200b\uff0c\u200b\u6574\u6578\u200b\u5fc5\u9808\u200b\u4ee5\u200b\u6c92\u200b\u6709\u200b\u524d\u5c0e\u200b\u96f6\u200b\u7684\u200b\u5927\u7aef\u200b\u4e8c\u200b\u9032\u5236\u200b\u5f62\u5f0f\u200b\u8868\u793a\u200b\uff0c\u200b\u4f7f\u5f97\u200b\u6574\u6578\u503c\u200b\u96f6\u200b\u7b49\u540c\u200b\u65bc\u200b\u7a7a\u5b57\u7bc0\u200b\u6578\u7d44\u200b\u3002</p> <p>RLP \u200b\u7de8\u78bc\u200b\u51fd\u6578\u200b\u63a5\u53d7\u200b\u4e00\u500b\u200b\u9805\u76ee\u200b\uff0c\u200b\u8a72\u200b\u9805\u76ee\u200b\u88ab\u200b\u5b9a\u7fa9\u70ba\u200b\u503c\u200b\u5728\u200b [0x00, 0x7f] \u200b\u7bc4\u570d\u200b\u5167\u200b\u7684\u200b\u55ae\u500b\u200b\u5b57\u7bc0\u200b\u6216\u200b 0-55 \u200b\u5b57\u200b\u7bc0\u9577\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5b57\u7b26\u4e32\u200b\u7684\u200b\u9577\u200b\u5ea6\u200b\u8d85\u904e\u200b 55 \u200b\u500b\u5b57\u7bc0\u200b\uff0c\u200b\u5247\u200b RLP \u200b\u7de8\u78bc\u200b\u5305\u542b\u200b\u4e00\u500b\u200b\u503c\u200b\u70ba\u200b 0xb7\uff08dec.183\uff09\u200b\u7684\u200b\u5b57\u7bc0\u200b\u52a0\u4e0a\u200b\u9577\u200b\u5ea6\u200b \u200b\u4e8c\u200b\u9032\u5236\u200b\u5f62\u5f0f\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b\u9577\u200b\u5ea6\u200b\u7684\u200b\u5b57\u7bc0\u200b\uff0c\u200b\u5f8c\u200b\u8ddf\u200b\u5b57\u7b26\u4e32\u200b\u7684\u200b\u9577\u200b\u5ea6\u200b\uff0c\u200b\u5f8c\u200b\u8ddf\u200b\u5b57\u7b26\u4e32\u200b\u3002</p> <p>RLP \u200b\u7528\u200b\u65bc\u200b\u54c8\u5e0c\u200b\u9a57\u8b49\u200b\uff0c\u200b\u5176\u4e2d\u200b\u901a\u904e\u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u7684\u200b RLP \u200b\u54c8\u5e0c\u200b\u4f86\u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\uff0c\u200b\u4e26\u4e14\u200b\u5340\u584a\u200b\u7531\u200b\u5176\u200b\u6a19\u982d\u200b\u7684\u200b RLP \u200b\u54c8\u5e0c\u200b\u6a19\u8b58\u200b\u3002</p> <p>RLP \u200b\u9084\u7528\u200b\u65bc\u200b\u901a\u904e\u200b\u7db2\u7d61\u200b\u5c0d\u200b\u6578\u64da\u200b\u9032\u884c\u200b\u7de8\u78bc\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u5728\u200b\u67d0\u4e9b\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u61c9\u8a72\u200b\u652f\u6301\u200b\u9ed8\u514b\u200b\u723e\u6a39\u200b\u6578\u64da\u200b\u7d50\u69cb\u200b\u7684\u200b\u9ad8\u6548\u200b\u7de8\u78bc\u200b\u3002</p> <p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u57f7\u884c\u5c64\u200b\u4f7f\u7528\u200b RLP \u200b\u4f5c\u70ba\u200b\u5e8f\u5217\u5316\u200b\u5c0d\u8c61\u200b\u7684\u200b\u4e3b\u8981\u200b\u7de8\u78bc\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u4f46\u200b\u66f4\u65b0\u200b\u7684\u200b Simple Serialize (SSZ) \u200b\u53d6\u4ee3\u200b\u4e86\u200b RLP \u200b\u4f5c\u70ba\u200b\u4ee5\u592a\u200b\u574a\u200b 2.0 \u200b\u4e2d\u65b0\u5171\u8b58\u5c64\u200b\u7684\u200b\u7de8\u78bc\u200b\u3002</p> <p>Cosmos Stargate \u200b\u7248\u672c\u200b\u5f15\u5165\u200b\u4e86\u200b protobuf \u200b\u4f5c\u70ba\u200b\u5ba2\u6236\u200b\u7aef\u200b\u548c\u200b\u72c0\u614b\u200b\u5e8f\u5217\u5316\u200b\u7684\u200b\u4e3b\u8981\u200b\u7de8\u78bc\u200b\u683c\u5f0f\u200b\u3002</p> <p>\u200b\u6240\u6709\u200b\u7528\u200b\u65bc\u200b\u72c0\u614b\u200b\u548c\u200b\u5ba2\u6236\u200b\u7aef\u7684\u200b EVM \u200b\u6a21\u584a\u200b\u985e\u578b\u200b\uff0c\u200b\u5982\u200b\u4ea4\u6613\u200b\u6d88\u606f\u200b\u3001\u200b\u5275\u4e16\u200b\u3001\u200b\u67e5\u8a62\u200b\u670d\u52d9\u200b\u7b49\u200b\uff0c\u200b\u90fd\u200b\u5c07\u4f5c\u200b\u70ba\u200b\u5354\u8b70\u200b\u7de9\u885d\u5340\u200b\u6d88\u606f\u200b\u5be6\u73fe\u200b\u3002</p> <p>Cosmos SDK \u200b\u9084\u200b\u652f\u6301\u200b\u50b3\u7d71\u200b\u7684\u200b Amino \u200b\u7de8\u78bc\u200b\u3002</p> <p>Protocol Buffers (protobuf) \u200b\u662f\u200b\u4e00\u7a2e\u200b\u8207\u200b\u8a9e\u8a00\u7121\u95dc\u200b\u7684\u200b\u4e8c\u200b\u9032\u5236\u200b\u5e8f\u5217\u5316\u200b\u683c\u5f0f\u200b\uff0c\u200b\u5b83\u200b\u6bd4\u200b JSON \u200b\u66f4\u200b\u5c0f\u200b\u66f4\u200b\u5feb\u200b\u3002</p> <p>\u200b\u5b83\u200b\u7528\u200b\u65bc\u200b\u5e8f\u5217\u5316\u200b\u7d50\u69cb\u200b\u5316\u6578\u64da\u200b\uff0c\u200b\u4f8b\u5982\u200b\u6d88\u606f\u200b\uff0c\u200b\u4e26\u4e14\u200b\u88ab\u200b\u8a2d\u8a08\u200b\u70ba\u200b\u9ad8\u6548\u200b\u548c\u200b\u53ef\u200b\u64f4\u5c55\u200b\u7684\u200b\u3002</p> <p>\u200b\u7de8\u78bc\u200b\u683c\u5f0f\u200b\u4ee5\u200b\u8207\u200b\u8a9e\u8a00\u7121\u95dc\u200b\u7684\u200b\u8a9e\u8a00\u5b9a\u200b\u7fa9\u200b\uff0c\u200b\u7a31\u70ba\u200b Protocol Buffers Language (proto3)\uff0c\u200b\u7de8\u78bc\u200b\u7684\u200b\u6d88\u606f\u200b\u53ef\u7528\u200b\u65bc\u200b\u70ba\u200b\u5404\u7a2e\u200b\u7de8\u7a0b\u200b\u8a9e\u8a00\u200b\u751f\u6210\u200b\u4ee3\u78bc\u200b\u3002</p> <p>protobuf \u200b\u7684\u200b\u4e3b\u8981\u200b\u512a\u9ede\u200b\u662f\u200b\u5b83\u200b\u7684\u200b\u6548\u7387\u200b\uff0c\u200b\u9019\u5c0e\u81f4\u200b\u66f4\u200b\u5c0f\u200b\u7684\u200b\u6d88\u606f\u200b\u5927\u5c0f\u200b\u548c\u200b\u66f4\u200b\u5feb\u200b\u7684\u200b\u5e8f\u5217\u5316\u200b\u548c\u200b\u53cd\u200b\u5e8f\u5217\u5316\u200b\u6642\u9593\u200b\u3002</p> <p>RLP\u200b\u89e3\u78bc\u200b\u904e\u7a0b\u200b\u5982\u4e0b\u200b\uff1a\u200b\u6839\u64da\u200b\u8f38\u5165\u200b\u6578\u64da\u200b\u7684\u200b\u7b2c\u4e00\u200b\u500b\u5b57\u7bc0\u200b\uff08\u200b\u5373\u524d\u200b\u7db4\u200b\uff09\u200b\u89e3\u78bc\u200b\u6578\u64da\u200b\u985e\u578b\u200b\u3001\u200b\u5be6\u969b\u200b\u6578\u64da\u200b\u7684\u200b\u9577\u200b\u5ea6\u200b\u548c\u200b\u504f\u79fb\u91cf\u200b\uff1b\u200b\u6839\u64da\u200b\u6578\u64da\u200b\u7684\u200b\u985e\u578b\u200b\u548c\u200b\u504f\u79fb\u91cf\u200b\uff0c\u200b\u5c0d\u200b\u6578\u64da\u200b\u9032\u884c\u200b\u76f8\u61c9\u200b\u7684\u200b\u89e3\u78bc\u200b\u3002</p>"},{"location":"protocol/encode/#_1","title":"\u5148\u6c7a\u200b\u689d\u4ef6\u200b\u95b1\u8b80","text":"<ul> <li>Cosmos SDK Encoding</li> <li>Ethereum RLP</li> </ul>"},{"location":"protocol/encode/#_2","title":"\u7de8\u78bc\u200b\u683c\u5f0f","text":"<p>*** Protocol Buffers ***</p> <p>Cosmos Stargate \u200b\u7248\u672c\u200b\u5f15\u5165\u200b\u4e86\u200b protobuf \u200b\u4f5c\u70ba\u200b\u5ba2\u6236\u200b\u7aef\u200b\u548c\u200b\u72c0\u614b\u200b\u5e8f\u5217\u5316\u200b\u7684\u200b\u4e3b\u8981\u200b\u7de8\u78bc\u200b\u683c\u5f0f\u200b\u3002</p> <p>\u200b\u6240\u6709\u200b\u7528\u200b\u65bc\u200b\u72c0\u614b\u200b\u548c\u200b\u5ba2\u6236\u200b\u7aef\u200b\uff08\u200b\u4ea4\u6613\u200b\u6d88\u606f\u200b\u3001\u200b\u5275\u4e16\u200b\u3001\u200b\u67e5\u8a62\u200b\u670d\u52d9\u200b\u7b49\u200b\uff09\u200b\u7684\u200b EVM \u200b\u6a21\u584a\u200b\u985e\u578b\u200b\u90fd\u200b\u5c07\u4f5c\u200b\u70ba\u200b\u5354\u8b70\u200b\u7de9\u885d\u5340\u200b\u6d88\u606f\u200b\u5be6\u73fe\u200b\u3002</p> <p>***  Amino ***</p> <p>Cosmos SDK \u200b\u9084\u200b\u652f\u6301\u200b\u820a\u7248\u200b Amino \u200b\u7de8\u78bc\u200b\u683c\u5f0f\u200b\uff0c\u200b\u4ee5\u5411\u200b\u5f8c\u200b\u517c\u5bb9\u200b\u4ee5\u524d\u200b\u7684\u200b\u7248\u672c\u200b\uff0c\u200b\u7279\u5225\u200b\u662f\u200b\u7528\u200b\u65bc\u200b\u5ba2\u6236\u200b\u7aef\u200b\u7de8\u78bc\u200b\u548c\u200b\u4f7f\u7528\u200b Ledger \u200b\u8a2d\u5099\u200b\u7c3d\u540d\u200b\u3002</p> <p>Daodst \u200b\u5728\u200b EVM \u200b\u6a21\u584a\u200b\u4e2d\u200b\u4e0d\u200b\u652f\u6301\u200b Amino\uff0c\u200b\u4f46\u200b\u6240\u6709\u200b\u5176\u4ed6\u200b\u555f\u7528\u200b\u5b83\u200b\u7684\u200b Cosmos SDK \u200b\u6a21\u584a\u200b\u90fd\u200b\u652f\u6301\u200b\u5b83\u200b\u3002</p> <p>***  RLP ***</p> <p>\u200b\u905e\u6b78\u9577\u200b\u5ea6\u200b\u524d\u7db4\u200b (RLP) \u200b\u662f\u200b\u4e00\u7a2e\u200b\u7de8\u78bc\u200b/\u200b\u89e3\u78bc\u200b\u7b97\u6cd5\u200b\uff0c\u200b\u53ef\u200b\u5e8f\u5217\u5316\u200b\u6d88\u606f\u200b\u4e26\u5141\u8a31\u200b\u5feb\u901f\u200b\u91cd\u5efa\u200b\u7de8\u78bc\u200b\u6578\u64da\u200b\u3002</p> <p>Daodst \u200b\u4f7f\u7528\u200b RLP \u200b\u7de8\u78bc\u200b/\u200b\u89e3\u78bc\u200b\u4ee5\u592a\u200b\u574a\u200b\u6d88\u606f\u200b\u4ee5\u200b\u9032\u884c\u200b JSON-RPC \u200b\u8655\u7406\u200b\uff0c\u200b\u4ee5\u200b\u4f7f\u200b\u6d88\u606f\u200b\u7b26\u5408\u200b\u6b63\u78ba\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u683c\u5f0f\u200b\u3002\u200b\u9019\u5141\u200b\u8a31\u4ee5\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b\u683c\u5f0f\u200b\u5b8c\u5168\u76f8\u540c\u200b\u7684\u200b\u683c\u5f0f\u200b\u5c0d\u200b\u6d88\u606f\u200b\u9032\u884c\u200b\u7de8\u78bc\u200b\u548c\u89e3\u200b\u78bc\u200b\u3002</p> <p><code>x/evm</code> \u200b\u4ea4\u6613\u200b (<code>MsgEthereumTx</code>) \u200b\u7de8\u78bc\u200b\u662f\u200b\u901a\u904e\u5c07\u200b\u6d88\u606f\u200b\u8f49\u63db\u200b\u70ba\u200b go-ethereum \u200b\u7684\u200b <code>Transaction</code> \u200b\u7136\u200b\u5f8c\u200b\u4f7f\u7528\u200b RLP \u200b\u7de8\u7d44\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u4f86\u200b\u57f7\u884c\u200b\u7684\u200b\uff1a</p> <pre><code>// TxEncoder overwrites sdk.TxEncoder to support MsgEthereumTx\nfunc (g txConfig) TxEncoder() sdk.TxEncoder {\nreturn func(tx sdk.Tx) ([]byte, error) {\n  msg, ok := tx.(*evmtypes.MsgEthereumTx)\n  if ok {\n    return msg.AsTransaction().MarshalBinary()\n  }\n  return g.TxConfig.TxEncoder()(tx)\n}\n}\n\n// TxDecoder overwrites sdk.TxDecoder to support MsgEthereumTx\nfunc (g txConfig) TxDecoder() sdk.TxDecoder {\nreturn func(txBytes []byte) (sdk.Tx, error) {\n  tx := &amp;ethtypes.Transaction{}\n\n  err := tx.UnmarshalBinary(txBytes)\n  if err == nil {\n    msg := &amp;evmtypes.MsgEthereumTx{}\n    msg.FromEthereumTx(tx)\n    return msg, nil\n  }\n\n  return g.TxConfig.TxDecoder()(txBytes)\n}\n}\n</code></pre>"},{"location":"protocol/gas/","title":"Gas\u200b\u548c\u200b\u624b\u7e8c\u8cbb","text":"<p>\u200b\u7528\u6236\u200b\u9700\u8981\u200b\u652f\u4ed8\u200b\u8cbb\u7528\u200b\u624d\u80fd\u200b\u5728\u200b Daodst \u200b\u7db2\u7d61\u200b\u4e0a\u200b\u63d0\u4ea4\u200b\u4ea4\u6613\u200b\u3002 \u200b\u7531\u200b\u65bc\u200b\u4ee5\u592a\u200b\u574a\u200b\u548c\u200b Cosmos \u200b\u7684\u200b\u8cbb\u7528\u200b\u8655\u7406\u200b\u65b9\u5f0f\u200b\u4e0d\u540c\u200b\uff0c\u200b\u4e86\u89e3\u200b Daodst \u200b\u5340\u584a\u200b\u93c8\u200b\u5982\u4f55\u200b\u5be6\u73fe\u200b\u8207\u200b Cosmos SDK \u200b\u517c\u5bb9\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u7684\u200b\u8cbb\u7528\u200b\u8a08\u7b97\u200b\u975e\u5e38\u200b\u91cd\u8981\u200b\u3002</p> <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u672c\u200b\u6982\u8ff0\u200b\u89e3\u91cb\u200b\u4e86\u200b\u5929\u7136\u200b\u6c23\u8a08\u7b97\u200b\u7684\u200b\u57fa\u790e\u200b\u77e5\u8b58\u200b\u3001\u200b\u5982\u4f55\u200b\u70ba\u200b\u4ea4\u6613\u200b\u63d0\u4f9b\u200b\u8cbb\u7528\u200b\u4ee5\u53ca\u200b\u4ee5\u592a\u200b\u574a\u200b\u985e\u578b\u200b\u7684\u200b\u8cbb\u7528\u200b\u8a08\u7b97\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200b\u8cbb\u7528\u200b\u5e02\u5834\u200b (EIP1559) \u200b\u4f86\u200b\u78ba\u5b9a\u200b\u4ea4\u6613\u200b\u7684\u200b\u512a\u5148\u7d1a\u200b\u3002</p> <p>\u200b\u53e6\u5916\u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u8207\u200b Daodst \u200b\u4e0a\u200b\u7684\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u4ea4\u4e92\u200b\u6240\u200b\u652f\u4ed8\u200b\u7684\u200b\u8cbb\u7528\u200b\u53ef\u4ee5\u200b\u70ba\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u90e8\u7f72\u200b\u8005\u200b\u8cfa\u53d6\u200b\u6536\u5165\u200b\u3002</p>"},{"location":"protocol/gas/#_1","title":"\u5148\u6c7a\u200b\u689d\u4ef6\u200b\u95b1\u8b80","text":"<ul> <li>Cosmos SDK Gas</li> <li>Ethereum Gas</li> </ul>"},{"location":"protocol/gas/#_2","title":"\u57fa\u790e","text":""},{"location":"protocol/gas/#_3","title":"\u70ba\u200b\u4ec0\u9ebc\u200b\u4ea4\u6613\u200b\u9700\u8981\u200b\u624b\u7e8c\u8cbb\u200b?","text":"<p>\u200b\u5982\u679c\u200b\u4efb\u4f55\u4eba\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u514d\u8cbb\u200b\u5411\u200b\u7db2\u7d61\u200b\u63d0\u4ea4\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5247\u7db2\u7d61\u200b\u53ef\u80fd\u200b\u6703\u200b\u88ab\u200b\u5c11\u6578\u200b\u53c3\u8207\u8005\u200b\u767c\u9001\u200b\u5927\u91cf\u200b\u6b3a\u8a50\u200b\u6027\u4ea4\u6613\u200b\u4ee5\u200b\u963b\u585e\u200b\u7db2\u7d61\u200b\u4e26\u4f7f\u200b\u5176\u7121\u6cd5\u200b\u6b63\u5e38\u200b\u5de5\u4f5c\u200b\u3002</p> <p>\u200b\u9019\u500b\u200b\u554f\u984c\u200b\u7684\u200b\u89e3\u6c7a\u200b\u65b9\u6848\u200b\u662f\u200b\u4e00\u500b\u200b\u53eb\u505a\u200b<code>gas</code>\u200b\u7684\u200b\u6982\u5ff5\u200b\uff0c\u200b\u5b83\u200b\u662f\u200b\u5728\u200b\u6574\u500b\u200b\u4ea4\u6613\u200b\u57f7\u884c\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u6d88\u8017\u200b\u7684\u200b\u8cc7\u6e90\u200b\u3002</p> <p>\u200b\u5728\u200b\u5be6\u8e10\u200b\u4e2d\u200b\uff0c\u200b\u4ee3\u78bc\u200b\u57f7\u884c\u200b\u7684\u200b\u6bcf\u200b\u4e00\u6b65\u200b\u90fd\u200b\u6703\u200b\u6d88\u8017\u200b\u5c11\u91cf\u200bgas\uff0c\u200b\u5f9e\u200b\u800c\u200b\u6709\u6548\u200b\u5730\u5c0d\u9a57\u200b\u8b49\u8005\u200b\u8cc7\u6e90\u200b\u7684\u200b\u4f7f\u7528\u200b\u9032\u884c\u200b\u6536\u8cbb\u200b\uff0c\u200b\u4e26\u200b\u9632\u6b62\u200b\u60e1\u610f\u884c\u200b\u70ba\u8005\u200b\u96a8\u200b\u610f\u4e2d\u200b\u65b7\u200b\u7db2\u7d61\u200b\u3002</p>"},{"location":"protocol/gas/#gas","title":"\u4ec0\u9ebc\u200b\u662f\u200b Gas?","text":"<p>\u200b\u4e00\u822c\u200b\u4f86\u200b\u8aaa\u200b\uff0cgas \u200b\u662f\u200b\u8861\u91cf\u200b\u7279\u5b9a\u200b\u4ea4\u6613\u200b\u8a08\u7b97\u200b\u5f37\u5ea6\u200b\u7684\u200b\u55ae\u4f4d\u200b\u2014\u2014\u200b\u63db\u53e5\u200b\u8a71\u200b\u8aaa\u200b\uff0c\u200b\u8a55\u4f30\u200b\u548c\u200b\u57f7\u884c\u200b\u9019\u9805\u200b\u5de5\u4f5c\u200b\u9700\u8981\u200b\u591a\u5c11\u200b\u5de5\u4f5c\u91cf\u200b\u3002</p> <p>\u200b\u8907\u200b\u96dc\u7684\u200b\u591a\u6b65\u200b\u4ea4\u6613\u200b\uff0c\u200b\u4f8b\u5982\u200b\u59d4\u200b\u8a17\u200b\u7d66\u5341\u5e7e\u500b\u9a57\u200b\u8b49\u5668\u200b\u7684\u200b Cosmos \u200b\u4ea4\u6613\u200b\uff0c\u200b\u6bd4\u200b\u7c21\u55ae\u200b\u7684\u200b\u55ae\u6b65\u200b\u4ea4\u6613\u200b\uff08\u200b\u4f8b\u5982\u200b\u5c07\u4ee3\u5e63\u200b\u767c\u200b\u9001\u5230\u200b\u53e6\u200b\u4e00\u500b\u200b\u5730\u5740\u200b\u7684\u200b Cosmos \u200b\u4ea4\u6613\u200b\uff09\u200b\u9700\u8981\u200b\u66f4\u200b\u591a\u200b\u7684\u200b gas\u3002</p> <p>\u200b\u5728\u200b\u63d0\u53ca\u200b\u4ea4\u6613\u200b\u6642\u200b\uff0c<code>gas</code>\u200b\u662f\u200b\u6307\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200bgas\u200b\u7e3d\u91cf\u200b\u3002</p> <p>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u4e00\u7b46\u200b\u4ea4\u6613\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b 300,000 \u200b\u55ae\u4f4d\u200b\u7684\u200bgas\u200b\u624d\u80fd\u200b\u57f7\u884c\u200b\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u5c07\u200bgas\u200b\u8996\u70ba\u200b\u623f\u5c4b\u200b\u6216\u200b\u5de5\u5ee0\u200b\u5167\u200b\u7684\u200b\u96fb\u529b\u200b (kWh)\uff0c\u200b\u6216\u200b\u6c7d\u8eca\u200b\u71c3\u6599\u200b\u3002</p> <p>\u200b\u9019\u500b\u200b\u60f3\u6cd5\u200b\u662f\u200b\u8981\u200b\u82b1\u200b\u4e00\u4e9b\u200b\u9322\u200b\u624d\u80fd\u200b\u5230\u200b\u9054\u200b\u67d0\u500b\u200b\u5730\u65b9\u200b\u3002</p> <p>\u200b\u66f4\u200b\u591a\u200b Gas \u200b\u4ecb\u7d39\u200b:</p> <ul> <li>Cosmos Gas Fees</li> <li>Cosmos Tx Lifecycle</li> <li>Ethereum Gas</li> </ul>"},{"location":"protocol/gas/#gas_1","title":"\u5982\u4f55\u200b\u8a08\u7b97\u200bGas","text":"<p>\u200b\u4e00\u822c\u200b\u4f86\u200b\u8aaa\u200b\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u7c21\u55ae\u200b\u5730\u904b\u884c\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5c31\u200b\u7121\u6cd5\u200b\u78ba\u5207\u200b\u77e5\u9053\u200b\u4ea4\u6613\u200b\u5c07\u82b1\u8cbb\u200b\u591a\u5c11\u200b gas\u3002</p> <p>\u200b\u4f7f\u7528\u200b Cosmos SDK\uff0c\u200b\u9019\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6a21\u64ec\u200b Tx \u200b\u4f86\u200b\u5b8c\u6210\u200b\u3002</p> <p>\u200b\u5426\u5247\u200b\uff0c\u200b\u6709\u200b\u4e00\u4e9b\u200b\u65b9\u6cd5\u200b\u53ef\u4ee5\u200b\u6839\u64da\u200b\u4ea4\u6613\u200b\u5b57\u6bb5\u200b\u548c\u200b\u6578\u64da\u200b\u7684\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\u4f86\u200b\u4f30\u8a08\u200b\u4ea4\u6613\u200b\u5c07\u200b\u9700\u8981\u200b\u7684\u200bgas\u3002</p> <p>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u5728\u200b EVM \u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u6bcf\u500b\u200b\u5b57\u200b\u7bc0\u78bc\u200b\u64cd\u4f5c\u200b\u90fd\u200b\u6709\u200b \u200b\u76f8\u61c9\u200b\u6578\u91cf\u200b\u7684\u200bgas\u3002</p> <p>\u200b\u66f4\u591a\u95dc\u200b\u65bc\u200bGas\u200b\u8a08\u7b97\u200b:</p> <ul> <li>Estimate Gas</li> <li>Executing EVM Bytecode</li> <li>Simulate a Cosmos SDK Tx</li> </ul>"},{"location":"protocol/gas/#gas_2","title":"Gas\u200b\u548c\u200b\u624b\u7e8c\u200b\u8cbb\u7684\u95dc\u200b\u4fc2\u200b?","text":"<p>Gas \u200b\u662f\u200b\u6307\u200b\u57f7\u884c\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u8a08\u7b97\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u800c\u8cbb\u7528\u200b\u662f\u200b\u6307\u200b\u60a8\u200b\u5be6\u969b\u200b\u82b1\u8cbb\u4f86\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u7684\u200b\u4ee3\u5e63\u200b\u6578\u91cf\u200b\u3002</p> <p>\u200b\u5b83\u5011\u200b\u662f\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u516c\u5f0f\u200b\u5f97\u51fa\u200b\u7684\u200b\uff1a</p> <pre><code>Total Fees = Gas * Gas Price (the price per unit of gas)\n</code></pre> <p>\u200b\u5982\u679c\u200b <code>gas</code> \u200b\u4ee5\u200b kWh \u200b\u70ba\u200b\u55ae\u4f4d\u200b\uff0c\u200b\u5247\u200b\u201cgas price\u201d\u200b\u5c07\u662f\u200b\u60a8\u200b\u7684\u200b\u80fd\u6e90\u200b\u4f9b\u61c9\u5546\u200b\u78ba\u5b9a\u200b\u7684\u200b\u8cbb\u7387\u200b\uff08\u200b\u4ee5\u200b\u7f8e\u5143\u200b/kWh \u200b\u70ba\u200b\u55ae\u4f4d\u200b\uff09\uff0c\u200b\u800c\u200b <code>fees\u200b\u200b</code> \u200b\u5c07\u662f\u200b\u60a8\u200b\u7684\u200b\u8cec\u55ae\u200b\u3002</p> <p>\u200b\u8207\u200b\u96fb\u529b\u200b\u4e00\u6a23\u200b\uff0cgas\u200b\u50f9\u683c\u200b\u5728\u200b\u67d0\u200b\u4e00\u5929\u200b\u53ef\u80fd\u200b\u6703\u6ce2\u52d5\u200b\uff0c\u200b\u5177\u9ad4\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u7db2\u7d61\u200b\u6d41\u91cf\u200b\u3002</p> <p>\u200b\u66f4\u591a\u95dc\u200b\u65bc\u200b Gas \u200b\u548c\u200b \u200b\u624b\u7e8c\u8cbb\u200b:</p> <ul> <li>Cosmos Gas and Fees</li> <li>Ethereum Gas and Fees</li> </ul>"},{"location":"protocol/gas/#cosmos","title":"Cosmos\u200b\u5982\u4f55\u200b\u8655\u7406\u200b\u624b\u7e8c\u8cbb\u200b?","text":"<p>Cosmos \u200b\u7684\u200bgas\u200b\u8cbb\u76f8\u200b\u5c0d\u200b\u7c21\u55ae\u200b\u3002\u200b\u4f5c\u70ba\u200b\u7528\u6236\u200b\uff0c\u200b\u60a8\u200b\u6307\u5b9a\u200b\u5169\u500b\u200b\u5b57\u200b\u6bb5\u200b\uff1a</p> <ol> <li>\u200b\u5c0d\u61c9\u200b\u65bc\u200b\u57f7\u884c\u200b\u6c23\u9ad4\u200b\u4e0a\u9650\u200b\u7684\u200b <code>GasLimit</code>\uff0c\u200b\u5b9a\u7fa9\u70ba\u200b<code>GasWanted</code></li> <li><code>Fees</code> \u200b\u6216\u200b <code>GasPrice</code> \u200b\u4e4b\u4e00\u200b\uff0c\u200b\u5c07\u7528\u200b\u65bc\u200b\u6307\u5b9a\u200b\u6216\u200b\u8a08\u7b97\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b</li> </ol> <p>\u200b\u7bc0\u9ede\u5c07\u200b\u5b8c\u5168\u200b\u6d88\u8017\u200b\u6240\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8cbb\u7528\u200b\uff0c\u200b\u7136\u5f8c\u958b\u59cb\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u3002 \u200b\u5982\u679c\u200b\u5728\u200b\u57f7\u884c\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u767c\u73fe\u200b<code>GasLimit</code>\u200b\u4e0d\u8db3\u200b\uff0c\u200b\u4ea4\u6613\u200b\u5c07\u5931\u6557\u200b\u4e26\u56de\u200b\u6efe\u200b\u4efb\u4f55\u200b\u66f4\u6539\u200b\uff0c\u200b\u4e0d\u200b\u9000\u9084\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8cbb\u7528\u200b\u3002</p> <p>\u200b\u57fa\u200b\u65bc\u200b Cosmos SDK \u200b\u7684\u200b\u93c8\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u6307\u5b9a\u200b\u4ed6\u5011\u200b\u5728\u200b\u9078\u64c7\u200b\u8981\u200b\u5305\u542b\u200b\u5728\u200b\u5340\u584a\u200b\u4e2d\u200b\u7684\u200b\u4ea4\u6613\u200b\u6642\u5c07\u200b\u5f37\u5236\u200b\u57f7\u884c\u200b\u7684\u200b\u201c\u200b\u6700\u4f4e\u200b\u6c7d\u6cb9\u200b\u50f9\u683c\u200b\u201d\u3002</p> <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u8cbb\u7528\u200b\u4e0d\u8db3\u200b\u7684\u200b\u4ea4\u6613\u200b\u5c07\u200b\u9047\u5230\u200b\u5ef6\u9072\u200b\u6216\u200b\u5fb9\u5e95\u200b\u5931\u6557\u200b\u3002</p> <p>\u200b\u5728\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u958b\u59cb\u200b\uff0c\u200b\u524d\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u8cbb\u7528\u200b\u88ab\u200b\u5206\u914d\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b\uff0c\u200b\u4e4b\u5f8c\u5b83\u200b\u5011\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u63d0\u53d6\u200b\u548c\u200b\u4f7f\u7528\u200b\u3002</p>"},{"location":"protocol/gas/#_4","title":"\u5982\u4f55\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e0a\u200b\u8655\u7406\u200b\u624b\u7e8c\u8cbb\u200b?","text":"<p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b\u8cbb\u7528\u200b\u5305\u62ec\u200b\u96a8\u8457\u200b\u6642\u9593\u200b\u7684\u200b\u63a8\u79fb\u200b\u5f15\u5165\u200b\u7684\u200b\u591a\u7a2e\u200b\u5be6\u73fe\u200b\u3002</p> <p>\u200b\u6700\u521d\u200b\uff0c\u200b\u7528\u6236\u200b\u6703\u200b\u5728\u200b\u4ea4\u6613\u200b\u4e2d\u200b\u6307\u5b9a\u200b <code>GasPrice</code> \u200b\u548c\u200b <code>GasLimit</code> \u2014\u2014\u200b\u5f88\u200b\u50cf\u200b Cosmos SDK \u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u5340\u584a\u200b\u63d0\u8b70\u8005\u200b\u5c07\u5f9e\u5340\u200b\u584a\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u4e2d\u200b\u6536\u53d6\u200b\u5168\u90e8\u200b\u6c7d\u6cb9\u200b\u8cbb\u200b\uff0c\u200b\u4e26\u4e14\u200b\u4ed6\u5011\u200b\u6703\u200b\u76f8\u61c9\u200b\u5730\u200b\u9078\u64c7\u200b\u8981\u200b\u5305\u542b\u200b\u7684\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u96a8\u8457\u200b\u63d0\u6848\u200b EIP-1559 \u200b\u548c\u200b\u502b\u6566\u200b\u786c\u200b\u5206\u53c9\u200b\uff0cgas \u200b\u8a08\u7b97\u200b\u767c\u751f\u200b\u4e86\u200b\u8b8a\u5316\u200b\u3002</p> <p>\u200b\u4e0a\u9762\u200b\u7684\u200b <code>GasPrice</code> \u200b\u73fe\u5728\u200b\u88ab\u200b\u5206\u6210\u200b\u5169\u500b\u200b\u7368\u7acb\u200b\u7684\u200b\u90e8\u5206\u200b\uff1a<code>BaseFee</code> \u200b\u548c\u200b <code>PriorityFee</code>\u3002</p> <p><code>BaseFee</code> \u200b\u662f\u200b\u6839\u64da\u5340\u200b\u584a\u200b\u5927\u5c0f\u200b\u81ea\u52d5\u200b\u8a08\u7b97\u200b\u7684\u200b\uff0c\u200b\u4e00\u65e6\u200b\u5340\u584a\u200b\u88ab\u200b\u6316\u51fa\u200b\u5c31\u200b\u6703\u200b\u88ab\u200b\u92b7\u6bc0\u200b\u3002</p> <p><code>PriorityFee</code> \u200b\u4ea4\u7d66\u200b\u63d0\u8b70\u8005\u4e26\u200b\u4ee3\u8868\u200b\u4e00\u500b\u200b\u5c0f\u8cbb\u200b\uff0c\u200b\u6216\u200b\u6fc0\u52f5\u200b\u63d0\u8b70\u8005\u5c07\u200b\u4ea4\u6613\u200b\u5305\u542b\u200b\u5728\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b\u3002</p> <pre><code>Gas Price = Base Fee + Priority Fee\n</code></pre> <p>\u200b\u5728\u200b\u4ea4\u6613\u200b\u4e2d\u200b\uff0c\u200b\u9664\u4e86\u200b\u50cf\u200b\u4ee5\u524d\u200b\u4e00\u6a23\u200b\u6307\u5b9a\u200b <code>gas_limit</code> \u200b\u4e4b\u5916\u200b\uff0c\u200b\u7528\u6236\u9084\u200b\u53ef\u4ee5\u200b\u6307\u5b9a\u200b\u5c0d\u61c9\u200b\u65bc\u200b\u7e3d\u200b <code>GasPrice</code> \u200b\u7684\u200b <code>max_fee_per_gas</code> \u200b\u548c\u200b\u5c0d\u200b\u61c9\u200b\u65bc\u200b\u6700\u5927\u200b <code>PriorityFee</code> \u200b\u7684\u200b <code>max_priority_fee_per_gas</code>\u3002</p> <p>\u200b\u6240\u6709\u200b\u4e0d\u200b\u9700\u8981\u200b\u57f7\u884c\u200b\u7684\u200b\u591a\u9918\u6c23\u9ad4\u200b\u90fd\u200b\u9000\u200b\u9084\u7d66\u200b\u7528\u6236\u200b\u3002</p> <p>\u200b\u66f4\u591a\u95dc\u200b\u65bc\u200b Ethereum \u200b\u624b\u7e8c\u8cbb\u200b:</p> <ul> <li>Gas Calculation Docs</li> <li>Proposal EIP-1559</li> </ul>"},{"location":"protocol/gas/#_5","title":"\u5be6\u65bd","text":""},{"location":"protocol/gas/#daodstgas","title":"\u5982\u4f55\u200b\u5728\u200bDaodst\u200b\u4e0a\u200b\u8655\u7406\u200bGas\u200b\u548c\u200b\u624b\u7e8c\u8cbb\u200b?","text":"<p>\u200b\u5f9e\u200b\u6839\u672c\u200b\u4e0a\u200b\u8aaa\u200b\uff0cDaodst \u200b\u662f\u200b\u4e00\u500b\u200b Cosmos SDK \u200b\u93c8\u200b\uff0c\u200b\u53ef\u4f5c\u200b\u70ba\u200b Cosmos SDK \u200b\u6a21\u584a\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u5be6\u73fe\u200b EVM \u200b\u517c\u5bb9\u6027\u200b\u3002\u200b\u7531\u200b\u65bc\u200b\u9019\u7a2e\u200b\u67b6\u69cb\u200b\uff0c\u200b\u6240\u6709\u200b EVM \u200b\u4ea4\u6613\u200b\u6700\u7d42\u200b\u90fd\u200b\u88ab\u200b\u7de8\u78bc\u200b\u70ba\u200b Cosmos SDK \u200b\u4ea4\u6613\u200b\u4e26\u200b\u66f4\u65b0\u200b Cosmos SDK \u200b\u7ba1\u7406\u200b\u7684\u200b\u72c0\u614b\u200b\u3002\u200b\u7531\u200b\u65bc\u200b\u6240\u6709\u200b\u4ea4\u6613\u200b\u90fd\u200b\u8868\u793a\u200b\u70ba\u200b Cosmos SDK \u200b\u4ea4\u6613\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4e0d\u540c\u200b\u57f7\u884c\u5c64\u200b\u3002</p> <p>\u200b\u5be6\u969b\u200b\u4e0a\u200b\uff0c\u200b\u8655\u7406\u8cbb\u7528\u200b\u5305\u62ec\u200b\u6a19\u6e96\u200b\u7684\u200b Cosmos SDK \u200b\u908f\u8f2f\u200b\u3001\u200b\u4e00\u4e9b\u200b\u4ee5\u592a\u200b\u574a\u200b\u908f\u8f2f\u200b\u548c\u200b customDaodst \u200b\u908f\u8f2f\u200b\u3002\u200b\u5927\u591a\u200b\u6578\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u8cbb\u7528\u200b\u7531\u200b <code>fee_collector</code> \u200b\u6a21\u584a\u200b\u6536\u53d6\u200b\uff0c\u200b\u7136\u200b\u5f8c\u200b\u652f\u4ed8\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b\u3002\u200b\u4e00\u4e9b\u200b\u95dc\u9375\u200b\u7684\u200b\u5340\u5225\u200b\u5982\u4e0b\u200b\uff1a</p> <p>1.Fee \u200b\u5e02\u5834\u200b\u6a21\u584a\u200b</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u5728\u200b Daodst \u200b\u7684\u200b EVM \u200b\u5c64\u4e0a\u200b\u652f\u6301\u200b EIP-1559 \u200b\u6c23\u9ad4\u200b\u548c\u200b\u8cbb\u7528\u200b\u8a08\u7b97\u200b\uff0cDaodst \u200b\u8ddf\u8e2a\u200b\u70ba\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u4f9b\u61c9\u200b\u7684\u200b\u6c23\u9ad4\u200b\uff0c\u200b\u4e26\u200b\u4f7f\u7528\u200b\u5b83\u4f86\u200b\u8a08\u7b97\u200b\u672a\u4f86\u200b EVM \u200b\u4ea4\u6613\u200b\u7684\u200b\u57fa\u672c\u200b\u8cbb\u7528\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u5be6\u73fe\u200b EIP \u200b\u6307\u5b9a\u200b\u7684\u200b EVM \u200b\u52d5\u614b\u200b\u8cbb\u7528\u200b\u548c\u200b\u4ea4\u6613\u200b\u512a\u5148\u7d1a\u200b -1559\u3002</p> <p>\u200b\u5c0d\u200b\u65bc\u200b EVM \u200b\u4ea4\u6613\u200b\uff0c\u200b\u6bcf\u500b\u200b\u7bc0\u9ede\u200b\u90fd\u200b\u7e5e\u904e\u200b\u5176\u200b\u672c\u5730\u200b\u7684\u200b <code>min-gas-prices</code> \u200b\u914d\u7f6e\u200b\uff0c\u200b\u800c\u662f\u200b\u61c9\u7528\u200b EIP-1559 \u200b\u8cbb\u7528\u200b\u908f\u8f2f\u200b\u2014\u2014gas \u200b\u50f9\u683c\u200b\u5fc5\u9808\u200b\u7c21\u55ae\u200b\u5730\u5927\u200b\u65bc\u200b\u5168\u5c40\u200b <code>min-gas-price</code> \u200b\u548c\u200b\u5340\u584a\u200b\u7684\u200b <code>BaseFee</code> \uff0c\u200b\u5269\u9918\u200b\u90e8\u5206\u200b\u88ab\u200b\u8996\u70ba\u200b\u512a\u5148\u200b\u5c0f\u8cbb\u200b\u3002</p> <p>\u200b\u9019\u5141\u200b\u8a31\u9a57\u200b\u8b49\u8005\u200b\u5728\u200b\u4e0d\u200b\u61c9\u7528\u200b Cosmos SDK \u200b\u8cbb\u7528\u200b\u908f\u8f2f\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u8a08\u7b97\u200b\u4ee5\u592a\u200b\u574a\u200b\u8cbb\u7528\u200b\u3002</p> <p>\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e0d\u540c\u200b\uff0cDaodst \u200b\u4e0a\u200b\u7684\u200b<code>BaseFee</code>\u200b\u4e0d\u6703\u200b\u88ab\u200b\u92b7\u6bc0\u200b\uff0c\u200b\u800c\u662f\u200b\u5206\u767c\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b</p> <p>\u200b\u6b64\u5916\u200b\uff0c<code>BaseFee</code> \u200b\u53d7\u200b\u5168\u5c40\u200b<code>min-gas-price</code> \u200b\u7684\u200b\u4e0b\u9650\u200b\uff08\u200b\u76ee\u524d\u200b\uff0c\u200b\u5168\u5c40\u200b<code>min-gas-price</code> \u200b\u53c3\u6578\u200b\u8a2d\u7f6e\u200b\u70ba\u200b\u96f6\u200b\uff0c\u200b\u5118\u200b\u7ba1\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6cbb\u7406\u200b\u9032\u884c\u200b\u66f4\u65b0\u200b\uff09\u3002</p> <p>2.EVM Gas\u200b\u8fd4\u9084\u200b</p> <p>Daodst \u200b\u6703\u70ba\u200b EVM \u200b\u4ea4\u6613\u200b\u9000\u9084\u200b\u4e00\u5c0f\u90e8\u5206\u200b\uff08\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u81f3\u5c11\u200b 50%\uff09\u200b\u672a\u200b\u4f7f\u7528\u200b\u7684\u200b\u6c23\u9ad4\u200b\uff0c\u200b\u4ee5\u200b\u63a5\u8fd1\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e0a\u7684\u7576\u200b\u524d\u884c\u200b\u70ba\u200b\u3002</p> <p>3.\u200b\u6536\u5165\u200b\u6a21\u584a\u200b</p> <p>Daodst \u200b\u958b\u767c\u200b\u6536\u5165\u200b\u6a21\u584a\u200b\u4f5c\u70ba\u200b\u734e\u52f5\u200b\u958b\u767c\u200b\u4eba\u54e1\u5275\u200b\u5efa\u6709\u200b\u7528\u200b\u7684\u200b dApp \u200b\u7684\u200b\u4e00\u7a2e\u200b\u65b9\u5f0f\u200b\u2014\u2014\u200b\u4efb\u4f55\u200b\u5728\u200b Daodst \u200b\u6536\u5165\u200b\u6a21\u200b\u584a\u200b\u8a3b\u200b\u518a\u200b\u7684\u200b\u5408\u540c\u200b\u90fd\u200b\u6703\u200b\u5f9e\u200b\u8207\u200b\u5408\u540c\u200b\u4ea4\u4e92\u200b\u7684\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u4e2d\u5411\u200b\u5408\u540c\u200b\u958b\u767c\u200b\u4eba\u54e1\u200b\u734e\u52f5\u200b\u4e00\u5c0f\u90e8\u5206\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\uff08\u200b\u76ee\u524d\u200b\u70ba\u200b 95%\uff09. \u200b\u9a57\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b\u8cfa\u53d6\u200b\u5269\u9918\u200b\u90e8\u5206\u200b\u3002</p>"},{"location":"protocol/gas/#_6","title":"\u8a73\u7d30\u200b\u6642\u9593\u200b\u8868","text":"<p>1.\u200b\u7bc0\u9ede\u57f7\u200b\u884c\u524d\u200b\u4e00\u500b\u200b\u584a\u200b\u4e26\u904b\u884c\u200b <code>EndBlock</code> \u200b\u639b\u9264\u200b * \u200b\u4f5c\u70ba\u200b\u6b64\u639b\u200b\u9264\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0cFeeMarket (EIP-1559) \u200b\u6a21\u584a\u200b\u5f9e\u200b\u8a72\u200b\u584a\u200b\u4e0a\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e2d\u200b\u8ddf\u8e2a\u200b\u7e3d\u200b\u7684\u200b <code>TransientGasWanted</code>\u3002 \u200b\u9019\u5c07\u200b\u7528\u200b\u65bc\u200b\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b <code>BaseFee</code>\u3002</p> <p>2.\u200b\u7bc0\u9ede\u200b\u63a5\u6536\u200b\u5f8c\u200b\u7e8c\u5340\u200b\u584a\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e26\u5c07\u200b\u9019\u4e9b\u200b\u4ea4\u6613\u200b\u516b\u5366\u200b\u7d66\u200b\u540c\u884c\u200b*\u200b\u9019\u4e9b\u200b\u53ef\u4ee5\u200b\u6309\u200b\u5305\u542b\u200b\u7684\u200b\u8cbb\u7528\u200b\u50f9\u683c\u200b\u6392\u5e8f\u200b\u548c\u200b\u512a\u5148\u7d1a\u200b\uff08\u200b\u4f7f\u7528\u200b EIP-1559 \u200b\u8cbb\u7528\u200b\u512a\u5148\u200b\u6a5f\u5236\u200b\u9032\u884c\u200b EVM \u200b\u4ea4\u6613\u200b \uff0c\u200b\u5c07\u200b\u5305\u542b\u200b\u5728\u200b\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u4e2d\u200b</p> <p>3.\u200b\u7bc0\u9ede\u200b\u70ba\u5f8c\u7e8c\u200b\u584a\u200b\u904b\u884c\u200b <code>BeginBlock</code> * FeeMarket \u200b\u6a21\u584a\u200b\u8a08\u7b97\u200b <code>BaseFee</code> \u200b\u4f7f\u7528\u200b\u524d\u4e00\u500b\u200b\u584a\u200b\u4e2d\u200b\u7684\u200b\u7e3d\u200b <code>GasWanted</code> \u200b\u61c9\u7528\u200b\u65bc\u200b\u6b64\u584a\u200b\u3002 * \u200b\u5206\u914d\u200b\u6a21\u584a\u200b distributes \u200b\u524d\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b\u8cbb\u7528\u200b\u734e\u52f5\u200b\u7d66\u9a57\u200b\u8b49\u8005\u200b\u548c\u200b\u59d4\u200b\u8a17\u200b\u8005\u200b</p> <p>4.\u200b\u5c0d\u200b\u65bc\u5c07\u200b\u5305\u542b\u200b\u5728\u200b\u6b64\u584a\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u500b\u200b\u6709\u6548\u200b\u4ea4\u6613\u200b\uff0c\u200b\u7bc0\u9ede\u200b\u57f7\u884c\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a</p> <p>** \u200b\u4ed6\u5011\u200b\u904b\u884c\u200b\u4e00\u500b\u200b\u5c0d\u200b\u61c9\u200b\u65bc\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u7684\u200b<code>AnteHandler</code> **\u3002</p> <p>\u200b\u9019\u500b\u200b\u6d41\u7a0b\u200b:</p> <ol> <li>\u200b\u57f7\u884c\u200b\u57fa\u672c\u200b\u4ea4\u6613\u200b\u9a57\u8b49\u200b</li> <li>\u200b\u9a57\u8b49\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8cbb\u7528\u200b\u662f\u5426\u200b\u5927\u200b\u65bc\u200b\u5168\u7403\u200b\u548c\u200b\u672c\u5730\u200b\u6700\u5c0f\u200b\u9a57\u8b49\u200b\u5668\u503c\u200b\u4e26\u4e14\u200b\u5927\u200b\u65bc\u200b\u8a08\u7b97\u51fa\u200b\u7684\u200b<code>BaseFee</code>    3.\uff08\u200b\u5c0d\u200b\u65bc\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\uff09\u200b\u6436\u200b\u5360\u200bEVM\u200b\u4ea4\u6613\u200b\u6d88\u8017\u200bgas</li> <li>\u200b\u6263\u9664\u200b\u7528\u6236\u200b\u7684\u200b\u4ea4\u6613\u200b\u624b\u7e8c\u8cbb\u200b\uff0c\u200b\u8f49\u5165\u200b<code>fee_collector</code>\u200b\u6a21\u584a\u200b</li> <li> <p>\u200b\u589e\u52a0\u200b\u7576\u524d\u200b\u5340\u584a\u200b\u4e2d\u200b\u7684\u200b <code>TransientGasWanted</code>\uff0c\u200b\u7528\u200b\u65bc\u200b\u8a08\u7b97\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u7684\u200b <code>BaseFee</code></p> <p>\u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u5c0d\u200b\u65bc\u200b\u6a19\u6e96\u200bCosmos\u200b\u4ea4\u6613\u200b,\u200b\u8282\u70b9\u200b</p> <ul> <li>\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u4e26\u200b\u66f4\u65b0\u200b\u72c0\u614b\u200b</li> <li>\u200b\u4ea4\u6613\u200b\u6d88\u8017\u200bgas</li> </ul> <p>\u200b\u5c0d\u200b\u65bc\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\uff0c\u200b\u7bc0\u9ede\u200b:</p> <ul> <li>\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u4e26\u200b\u66f4\u65b0\u200b\u72c0\u614b\u200b</li> <li>\u200b\u8a08\u7b97\u200b\u4f7f\u7528\u200b\u7684\u200bgas\u200b\u4e26\u8207\u200b\u4f9b\u61c9\u200b\u7684\u200bgas\u200b\u9032\u884c\u200b\u6bd4\u200b\u8f03\u200b\uff0c\u200b\u7136\u5f8c\u9000\u9084\u200b\u6307\u5b9a\u200b\u90e8\u5206\u200b\u7684\u200b\u5269\u9918\u200b\u90e8\u5206\u200b</li> <li>\u200b\u5982\u679c\u200b\u4ea4\u6613\u200b\u8207\u200b\u5df2\u200b\u8a3b\u200b\u518a\u200b\u7684\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u4ea4\u4e92\u200b\uff0c\u200b\u5247\u5c07\u200b\u4e00\u5c0f\u90e8\u5206\u200b\u7528\u4f5c\u200b\u6536\u5165\u200b\u7684\u8cbb\u200b\u7528\u4f5c\u200b\u70ba\u200b\u6536\u5165\u200b\u6a21\u584a\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u767c\u9001\u7d66\u200b\u5408\u540c\u200b\u958b\u767c\u5546\u200b</li> </ul> </li> <li> <p>\u200b\u7bc0\u9ede\u200b\u70ba\u200b\u6b64\u584a\u200b\u904b\u884c\u200b <code>EndBlock</code> \u200b\u4e26\u5b58\u200b\u5132\u584a\u200b\u7684\u200b <code>GasWanted</code></p> </li> </ol>"},{"location":"protocol/gas/#_7","title":"\u8be6\u7ec6\u200b\u505a\u6cd5","text":""},{"location":"protocol/gas/#cosmos-gas","title":"Cosmos <code>Gas</code>","text":"<p>\u200b\u5728\u200b Cosmos SDK \u200b\u4e2d\u200b\uff0cgas \u200b\u4e3b\u8981\u200b\u5728\u200b <code>GasMeter</code>\u200b\u548c\u200b <code>BlockGasMeter</code> \u200b\u4e2d\u200b\u9032\u884c\u200b\u8ddf\u8e2a\u200b\uff1a</p> <ul> <li><code>GasMeter</code>\uff1a\u200b\u8ddf\u8e2a\u200b\u5c0e\u81f4\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u7684\u200b\u57f7\u884c\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u6d88\u8017\u200b\u7684\u200b\u6c23\u9ad4\u200b\u3002 \u200b\u5b83\u200b\u5728\u200b\u6bcf\u6b21\u200b\u4ea4\u6613\u200b\u57f7\u884c\u200b\u6642\u200b\u91cd\u7f6e\u200b\u3002</li> <li><code>BlockGasMeter</code>\uff1a\u200b\u8ddf\u8e2a\u200b\u5340\u584a\u200b\u4e2d\u200b\u6d88\u8017\u200b\u7684\u200b\u6c23\u9ad4\u200b\u4e26\u5f37\u200b\u5236\u6c23\u9ad4\u200b\u4e0d\u200b\u8d85\u904e\u200b\u9810\u5b9a\u200b\u7fa9\u7684\u200b\u9650\u5236\u200b\u3002\u200b\u6b64\u200b\u9650\u5236\u200b\u5728\u200b Tendermint \u200b\u5171\u8b58\u200b\u53c3\u6578\u200b\u4e2d\u5b9a\u7fa9\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6cbb\u7406\u200b\u53c3\u6578\u200b\u66f4\u6539\u200b\u63d0\u6848\u200b\u9032\u884c\u200b\u66f4\u6539\u200b\u3002</li> </ul> <p>\u200b\u7531\u200b\u65bc\u200b gas \u200b\u662f\u200b\u6309\u200b\u5b57\u200b\u7bc0\u5b9a\u50f9\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u76f8\u540c\u200b\u7684\u200b\u4ea4\u4e92\u200b\u5728\u200b\u53c3\u6578\u503c\u200b\u8f03\u200b\u5927\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u6bd4\u200b\u8f03\u200b\u5c0f\u200b\u7684\u200b\u53c3\u6578\u503c\u200b\u66f4\u200b\u8017\u8cbb\u200b\u6c23\u9ad4\u200b\uff08\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b <code>uint256</code> \u200b\u503c\u200b\u4e0d\u540c\u200b\uff0cCosmos SDK \u200b\u6578\u503c\u200b\u4f7f\u7528\u200b Big.Int \u200b\u985e\u578b\u200b\uff0c\u200b\u5b83\u5011\u200b\u662f\u200b\u52d5\u614b\u200b\u8abf\u6574\u200b\u5927\u5c0f\u200b\u7684\u200b\uff09\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u5728\u200b\u6b64\u8655\u200b \u200b\u627e\u5230\u200b\u6709\u200b\u95dc\u4f5c\u200b\u70ba\u200b Cosmos SDK \u200b\u4e00\u90e8\u5206\u200b\u7684\u200b gas \u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"protocol/gas/#evm-gas","title":"\u5339\u914d\u200bEVM Gas\u200b\u6d88\u8017","text":"<p>Daodst \u200b\u662f\u200b\u4e00\u689d\u200b EVM \u200b\u517c\u5bb9\u200b\u93c8\u200b\uff0c\u200b\u652f\u6301\u200b\u4ee5\u592a\u200b\u574a\u200b Web3 \u200b\u5de5\u5177\u200b\u3002 \u200b\u51fa\u200b\u65bc\u200b\u9019\u500b\u200b\u539f\u56e0\u200b\uff0c\u200b\u6c23\u9ad4\u200b\u6d88\u8017\u200b\u5fc5\u9808\u200b\u8207\u200b\u5176\u4ed6\u200b EVM \u200b\u76f8\u7576\u200b\uff0c\u200b\u6700\u200b\u91cd\u8981\u200b\u7684\u200b\u662f\u200b\u4ee5\u592a\u200b\u574a\u200b\u3002</p> <p>EVM \u200b\u548c\u200b Cosmos \u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u4e4b\u9593\u200b\u7684\u200b\u4e3b\u8981\u200b\u5340\u5225\u200b\u5728\u200b\u65bc\u200b\uff0cEVM \u200b\u70ba\u200b\u6bcf\u500b\u200b\u64cd\u4f5c\u200b\u78bc\u200b\u4f7f\u7528\u200b\u4e00\u500b\u200b gas table\uff0c\u200b\u800c\u200b Cosmos \u200b\u4f7f\u7528\u200b<code>GasConfig</code>\u200b\u70ba\u200b\u6bcf\u500b\u200b CRUD \u200b\u64cd\u4f5c\u200b\u6536\u53d6\u200b gas\uff0c\u200b\u65b9\u6cd5\u200b\u662f\u200b\u70ba\u200b\u8a2a\u554f\u200b\u6578\u64da\u5eab\u200b\u8a2d\u7f6e\u200b\u56fa\u5b9a\u200b\u7684\u200b\u6bcf\u5b57\u7bc0\u200b\u6210\u672c\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u5339\u914d\u200bEVM\u200b\u6d88\u8017\u200b\u7684\u200bgas\uff0c\u200b\u5ffd\u7565\u200bSDK\u200b\u4e2d\u200b\u7684\u200bgas\u200b\u6d88\u8017\u200b\u908f\u8f2f\u200b\uff0c\u200b\u53d6\u800c\u4ee3\u4e4b\u200b\u7684\u200b\u662f\u200b\u6d88\u8017\u200b\u7684\u200bgas\u200b\u662f\u200b\u901a\u904e\u200b\u5f9e\u200b\u6d88\u606f\u200b\u4e0a\u5b9a\u200b\u7fa9\u7684\u200b\u6c23\u9ad4\u200b\u9650\u5236\u200b\u4e2d\u6e1b\u200b\u53bb\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\u5269\u9918\u6c23\u9ad4\u200b\u52a0\u4e0a\u200b\u9000\u6b3e\u200b\u4f86\u8a08\u7b97\u200b\u7684\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u5ffd\u7565\u200b SDK \u200b\u7684\u200b gas \u200b\u6d88\u8017\u200b\uff0c\u200b\u6211\u5011\u5c07\u200b\u4ea4\u6613\u200b<code>GasMeter</code>\u200b\u8a08\u6578\u200b\u91cd\u7f6e\u200b\u70ba\u200b 0\uff0c\u200b\u4e26\u624b\u200b\u52d5\u5c07\u200b\u5176\u200b\u8a2d\u7f6e\u200b\u70ba\u200b EVM \u200b\u6a21\u584a\u200b\u5728\u200b\u57f7\u884c\u200b\u7d50\u675f\u200b\u6642\u200b\u8a08\u7b97\u51fa\u200b\u7684\u200b<code>gasUsed</code>\u200b\u503c\u200b\u3002</p>"},{"location":"protocol/gas/#antehandler","title":"<code>AnteHandler</code>","text":"<p>Cosmos SDK <code>AnteHandler</code> \u200b\u5728\u200b\u4ea4\u6613\u200b\u57f7\u884c\u200b\u4e4b\u524d\u200b\u57f7\u884c\u200b\u57fa\u672c\u200b\u6aa2\u67e5\u200b\u3002</p> <p>\u200b\u9019\u4e9b\u200b\u6aa2\u67e5\u200b\u901a\u5e38\u200b\u662f\u200b\u7c3d\u540d\u9a57\u8b49\u200b\u3001\u200b\u4ea4\u6613\u200b\u5b57\u200b\u6bb5\u9a57\u8b49\u200b\u3001\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\u7b49\u200b\u3002</p> <p>\u200b\u95dc\u65bc\u200b gas \u200b\u6d88\u8017\u200b\u548c\u200b\u8cbb\u7528\u200b\uff0c<code>AnteHandler</code> \u200b\u6aa2\u67e5\u200b\u7528\u6236\u200b\u662f\u5426\u200b\u6709\u8db3\u5920\u200b\u7684\u200b\u9918\u984d\u200b\u4f86\u200b\u652f\u4ed8\u200b tx \u200b\u6210\u672c\u200b\uff08\u200b\u91d1\u984d\u200b\u52a0\u4e0a\u200b\u8cbb\u7528\u200b\uff09\uff0c\u200b\u4e26\u6aa2\u67e5\u200b\u6d88\u606f\u200b\u4e2d\u5b9a\u200b\u7fa9\u7684\u200b gas \u200b\u9650\u5236\u200b\u662f\u5426\u200b\u5927\u200b\u65bc\u200b\u6216\u200b\u7b49\u200b\u65bc\u200b\u8a08\u7b97\u200b\u7684\u200b\u56fa\u6709\u200b gas \u200b\u6d88\u606f\u200b\u3002</p>"},{"location":"protocol/gas/#gas_3","title":"Gas \u200b\u8fd4\u8fd8","text":"<p>\u200b\u5728\u200b EVM \u200b\u4e2d\u200b\uff0cgas \u200b\u53ef\u4ee5\u200b\u5728\u200b\u57f7\u884c\u200b\u4e4b\u524d\u200b\u6307\u5b9a\u200b\u3002 \u200b\u6307\u5b9a\u200b\u7684\u200b\u5168\u90e8\u200b\u6c23\u9ad4\u200b\u5728\u200b\u57f7\u884c\u200b\u958b\u59cb\u200b\u6642\u200b\uff08\u200b\u5728\u200b<code>AnteHandler</code>\u200b\u6b65\u9a5f\u200b\u671f\u9593\u200b\uff09\u200b\u88ab\u200b\u6d88\u8017\u200b\uff0c\u200b\u5982\u679c\u200b\u57f7\u884c\u5f8c\u6709\u200b\u4efb\u4f55\u200b\u6c23\u9ad4\u200b\u5269\u9918\u200b\uff0c\u200b\u5269\u9918\u200b\u7684\u200b\u6c23\u9ad4\u200b\u5c07\u9000\u200b\u9084\u7d66\u200b\u7528\u6236\u200b\u3002</p> <p>\u200b\u6b64\u5916\u200b\uff0cEVM \u200b\u9084\u200b\u53ef\u4ee5\u200b\u5b9a\u7fa9\u8981\u200b\u8fd4\u200b\u9084\u7d66\u200b\u7528\u6236\u200b\u7684\u200b\u6c23\u9ad4\u200b\uff0c\u200b\u4f46\u200b\u9019\u4e9b\u200b\u6c23\u9ad4\u5c07\u200b\u88ab\u200b\u9650\u5236\u200b\u70ba\u200b\u6240\u7528\u200b\u6c23\u9ad4\u200b\u7684\u200b\u4e00\u5c0f\u90e8\u5206\u200b\uff0c\u200b\u5177\u9ad4\u200b\u53d6\u6c7a\u200b\u65bc\u200b\u6240\u200b\u4f7f\u7528\u200b\u7684\u200b\u5206\u53c9\u200b/\u200b\u7248\u672c\u200b\u3002</p>"},{"location":"protocol/gas/#_8","title":"\u96f6\u200b\u624b\u7eed\u8d39\u200b\u4ea4\u6613","text":"<p>\u200b\u5728\u200b Cosmos \u200b\u4e2d\u200b\uff0c<code>AnteHandler</code> \u200b\u4e0d\u200b\u5f37\u5236\u200b\u57f7\u884c\u200b\u6700\u4f4e\u200b gas \u200b\u50f9\u683c\u200b\uff0c\u200b\u56e0\u70ba\u200b<code>min-gas-prices</code>\u200b\u662f\u200b\u6839\u64da\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b/\u200b\u9a57\u8b49\u5668\u200b\u6aa2\u67e5\u200b\u7684\u200b\u3002</p> <p>\u200b\u63db\u53e5\u200b\u8a71\u200b\u8aaa\u200b\uff0c\u200b\u63a5\u53d7\u200b\u7684\u200b\u6700\u4f4e\u200b\u8cbb\u7528\u200b\u7531\u200b\u7db2\u7d61\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u6c7a\u5b9a\u200b\uff0c\u200b\u6bcf\u500b\u9a57\u200b\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u70ba\u200b\u5176\u8cbb\u7528\u200b\u6307\u5b9a\u200b\u4e0d\u540c\u200b\u7684\u200b\u6700\u4f4e\u503c\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u81f3\u5c11\u200b\u6709\u200b\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b\u9858\u200b\u610f\u5728\u200b\u4ed6\u5011\u200b\u63d0\u8b70\u200b\u7684\u200b\u5340\u584a\u200b\u4e2d\u200b\u5305\u542b\u200b<code>0</code> gas price \u200b\u7684\u200b\u4ea4\u6613\u200b\uff0c\u200b\u9019\u200b\u53ef\u80fd\u200b\u5141\u8a31\u200b\u6700\u7d42\u200b\u7528\u6236\u200b\u63d0\u4ea4\u200b 0 \u200b\u8cbb\u7528\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u51fa\u200b\u65bc\u200b\u540c\u6a23\u200b\u7684\u200b\u539f\u56e0\u200b\uff0c\u200b\u5728\u200b Daodst \u200b\u4e2d\u200b\uff0c\u200b\u5c0d\u200b\u65bc\u200b<code>evm</code>\u200b\u6a21\u584a\u200b\u5b9a\u7fa9\u7684\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u4ee5\u5916\u200b\u7684\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u767c\u9001\u200b<code>0</code>\u200b\u8cbb\u7528\u200b\u7684\u200b\u4ea4\u6613\u200b\u3002</p> <p>EVM \u200b\u6a21\u584a\u200b\u4ea4\u6613\u200b\u4e0d\u80fd\u200b\u6709\u200b\u201c0\u201d\u200b\u8cbb\u7528\u200b\uff0c\u200b\u56e0\u70ba\u200b EVM \u200b\u672c\u8eab\u200b\u5c31\u200b\u9700\u8981\u200b gas\u3002</p> <p>\u200b\u6b64\u6aa2\u67e5\u200b\u7531\u200b EVM \u200b\u4e8b\u52d9\u7121\u72c0\u200b\u614b\u9a57\u8b49\u200b\uff08\u200b\u5373\u200b<code>ValidateBasic</code>\uff09\u200b\u51fd\u6578\u200b\u4ee5\u53ca\u200b Daodst \u200b\u5b9a\u7fa9\u7684\u200b\u81ea\u5b9a\u7fa9\u200b<code>AnteHandler</code>\u200b\u5b8c\u6210\u200b\u3002</p>"},{"location":"protocol/gas/#gas_4","title":"Gas \u200b\u9884\u4f30","text":"<p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u500b\u200b JSON-RPC \u200b\u7aef\u9ede\u200b<code>eth_estimateGas</code>\u200b\u4f86\u200b\u5e6b\u52a9\u200b\u7528\u6236\u200b\u5728\u200b\u4ed6\u5011\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e2d\u8a2d\u200b\u7f6e\u200b\u6b63\u78ba\u200b\u7684\u200b\u6c23\u9ad4\u200b\u9650\u5236\u200b\u3002</p> <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5728\u200b Daodst \u200b\u4e2d\u5be6\u73fe\u200b\u4e86\u200b\u4e00\u500b\u200b\u7279\u5b9a\u200b\u7684\u200b\u67e5\u8a62\u200b API <code>EstimateGas</code>\u3002 \u200b\u5b83\u200b\u5c07\u91dd\u200b\u5c0d\u200b\u7576\u524d\u200b\u5340\u584a\u200b/\u200b\u72c0\u614b\u200b\u61c9\u7528\u200b\u4ea4\u6613\u200b\u4e26\u57f7\u884c\u200b\u4e8c\u200b\u9032\u5236\u200b\u641c\u7d22\u200b\u4ee5\u200b\u627e\u5230\u200b\u8fd4\u56de\u200b\u7d66\u7528\u6236\u200b\u7684\u200b\u6700\u4f73\u200b\u6c23\u9ad4\u503c\u200b\uff08\u200b\u76f8\u540c\u200b\u7684\u200b\u4ea4\u6613\u200b\u5c07\u200b\u4e00\u904d\u200b\u53c8\u200b\u4e00\u904d\u200b\u5730\u61c9\u7528\u200b\uff0c\u200b\u76f4\u5230\u200b\u6211\u5011\u200b\u627e\u5230\u200b\u5931\u6557\u200b\u524d\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6700\u5c0f\u200b\u6c23\u9ad4\u200b\uff09 .</p> <p>\u200b\u6211\u5011\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b\u4e8c\u5206\u200b\u67e5\u627e\u200b\u7684\u200b\u539f\u56e0\u200b\u662f\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200b gas \u200b\u53ef\u80fd\u200b\u9ad8\u200b\u65bc\u200b\u61c9\u7528\u200b\u4ea4\u6613\u200b\u5f8c\u200b EVM \u200b\u8fd4\u56de\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u5011\u200b\u9700\u8981\u200b\u5617\u8a66\u200b\u76f4\u5230\u200b\u627e\u5230\u200b\u6700\u200b\u512a\u503c\u200b\u3002</p> <p>\u200b\u5728\u200b\u6574\u500b\u200b\u57f7\u884c\u200b\u904e\u7a0b\u200b\u4e2d\u5c07\u200b\u4f7f\u7528\u200b\u7de9\u5b58\u200b\u4e0a\u4e0b\u6587\u200b\u4ee5\u200b\u907f\u514d\u200b\u66f4\u6539\u200b\u5728\u200b\u72c0\u614b\u200b\u4e2d\u200b\u6301\u4e45\u200b\u5316\u200b\u3002</p> <p>\u200b\u5c0d\u200b\u65bc\u200b Cosmos Tx\uff0c\u200b\u958b\u767c\u8005\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b Cosmos SDK \u200b\u7684\u200b\u4ea4\u6613\u200b\u6a21\u64ec\u200b \u200b\u4f86\u200b\u5275\u5efa\u200b\u6e96\u78ba\u200b\u7684\u200b\u9810\u4f30\u200b\u3002</p>"},{"location":"protocol/gas/#daodst-cligas","title":"\u4f7f\u7528\u200bDaodst CLI\u200b\u5904\u7406\u200bGas\u200b\u548c\u200b\u624b\u7eed\u8d39","text":"<p>\u200b\u4f7f\u7528\u200b Daodst CLI \u200b\u5ba2\u6236\u200b\u7aef\u200b\u5ee3\u64ad\u200b\u4ea4\u6613\u200b\u6642\u200b\uff0c\u200b\u7528\u6236\u200b\u61c9\u200b\u8003\u616e\u200b\u53ef\u7528\u200b\u7684\u200b\u9078\u9805\u200b\u3002 \u200b\u5411\u200b\u7db2\u7d61\u200b\u767c\u9001\u200b\u4ea4\u6613\u200b\u6642\u200b\u9700\u8981\u200b\u8003\u616e\u200b\u4e09\u500b\u200b\u6a19\u8a8c\u200b\uff1a</p> <ul> <li><code>--fees</code>: \u200b\u96a8\u200b\u4ea4\u6613\u200b\u4e00\u8d77\u200b\u652f\u4ed8\u200b\u7684\u200b\u8cbb\u7528\u200b\uff1b \u200b\u4f8b\u5982\u200b\uff1a10dst\u3002 \u200b\u9ed8\u8a8d\u200b\u70ba\u200b\u6240\u200b\u9700\u8cbb\u7528\u200b\u3002</li> <li><code>--gas</code>: \u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u8a2d\u7f6e\u200b\u7684\u200b\u6c23\u9ad4\u200b\u9650\u5236\u200b\uff1b \u200b\u9ed8\u200b\u8a8d\u503c\u200b\u70ba\u200b 200000\u3002</li> <li><code>--gas-prices</code>: gas \u200b\u50f9\u683c\u4f86\u200b\u78ba\u5b9a\u200b\u4ea4\u6613\u200b\u8cbb\u7528\u200b\uff08\u200b\u4f8b\u5982\u200b 10dst\uff09\u3002</li> </ul> <p>\u200b\u4f46\u662f\u200b\uff0c\u200b\u4e26\u975e\u200b\u6240\u6709\u200b\u9019\u4e9b\u200b\u90fd\u200b\u9700\u8981\u200b\u5728\u200b\u6bcf\u500b\u200b\u4e8b\u52d9\u200b\u4e2d\u5b9a\u7fa9\u200b\u3002 \u200b\u6b63\u78ba\u200b\u7684\u200b\u7d44\u5408\u200b\u662f\u200b\uff1a</p> <ul> <li><code>--fees=auto</code>: \u200b\u81ea\u52d5\u200b\u4f30\u7b97\u200b\u8cbb\u7528\u200b\u548c\u200b\u6c7d\u6cb9\u200b\uff08\u200b\u8207\u200b --gas=auto \u200b\u76f8\u540c\u200b\u7684\u200b\u884c\u70ba\u200b\uff09\u3002   \u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u8207\u200b\u8cbb\u7528\u200b\u76f8\u95dc\u200b\u7684\u200b\u6a19\u8a8c\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c<code>--gas-prices</code>\u3001<code>--fees</code>\uff09\uff0c\u200b\u5247\u6703\u200b\u5f15\u767c\u200b\u932f\u8aa4\u200b</li> <li><code>--gas=auto</code>: \u200b\u8207\u200b <code>--fees=auto</code> \u200b\u76f8\u540c\u200b\u7684\u200b\u884c\u70ba\u200b\u3002   \u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u8207\u200b\u8cbb\u7528\u200b\u76f8\u95dc\u200b\u7684\u200b\u6a19\u8a8c\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c<code>--gas-prices</code>\u3001<code>--fees</code>\uff09\uff0c\u200b\u5247\u6703\u200b\u5f15\u767c\u200b\u932f\u8aa4\u200b</li> <li><code>--gas={int}</code>: \u200b\u4f7f\u7528\u200b\u6307\u5b9a\u200b\u7684\u200b\u6c23\u9ad4\u91cf\u200b\u548c\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200b\u8cbb\u7528\u200b</li> <li><code>--fees={int}{denom}</code>: \u200b\u4f7f\u7528\u200b tx \u200b\u7684\u200b\u6307\u5b9a\u200b\u8cbb\u7528\u200b\u3002 \u200b\u5c0d\u200b tx \u200b\u4f7f\u7528\u200b gas \u200b\u9ed8\u200b\u8a8d\u503c\u200b (200000)\u3002</li> <li><code>--fees={int}{denom} --gas={int}</code>: \u200b\u4f7f\u7528\u200b\u6307\u5b9a\u200b\u7684\u200b\u6c23\u9ad4\u200b\u548c\u200b\u8cbb\u7528\u200b\u3002 \u200b\u4f7f\u7528\u200b\u63d0\u4f9b\u200b\u7684\u200b\u53c3\u6578\u200b\u8a08\u7b97\u200b gas-price</li> <li><code>--gas-prices={int}{denom}</code>: \u200b\u4f7f\u7528\u200b\u63d0\u4f9b\u200b\u7684\u200b gas \u200b\u50f9\u683c\u200b\u548c\u200b\u9ed8\u8a8d\u200b gas \u200b\u91cf\u200b (200000)</li> <li><code>--gas-prices={int}{denom} --gas={int}</code>: \u200b\u4f7f\u7528\u200b\u70ba\u200b tx \u200b\u6307\u5b9a\u200b\u7684\u200b\u6c23\u9ad4\u200b\uff0c\u200b\u4e26\u200b\u4f7f\u7528\u200b\u76f8\u61c9\u200b\u7684\u200b\u53c3\u6578\u200b\u8a08\u7b97\u8cbb\u7528\u200b\u3002</li> </ul> <p>\u200b\u8b80\u8005\u200b\u61c9\u200b\u6ce8\u610f\u200b\uff0c\u200b\u524d\u200b\u5169\u500b\u200b\u9078\u9805\u200b\u70ba\u200b\u65b0\u200b\u7528\u6236\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u66f4\u200b\u53cb\u597d\u200b\u7684\u200b\u7528\u6236\u200b\u9ad4\u9a57\u200b\uff0c\u200b\u800c\u5f8c\u8005\u5247\u200b\u9069\u7528\u200b\u65bc\u200b\u66f4\u200b\u9ad8\u7d1a\u200b\u7684\u200b\u7528\u6236\u200b\uff0c\u200b\u4ed6\u5011\u200b\u5e0c\u671b\u200b\u5c0d\u200b\u9019\u4e9b\u200b\u53c3\u6578\u200b\u6709\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u63a7\u5236\u200b\u6b0a\u200b\u3002</p> <p>\u200b\u8a72\u5718\u968a\u200b\u5f15\u5165\u200b\u4e86\u200b<code>\u200b\u81ea\u52d5\u200b</code>\u200b\u6a19\u8a8c\u200b\u9078\u9805\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u81ea\u52d5\u200b\u8a08\u7b97\u200b\u57f7\u884c\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200b\u6c7d\u6cb9\u200b\u548c\u200b\u8cbb\u7528\u200b\u3002\u200b\u901a\u904e\u200b\u9019\u7a2e\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u65b0\u7528\u6236\u200b\u6216\u200b\u958b\u200b\u767c\u4eba\u54e1\u200b\u53ef\u4ee5\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u800c\u200b\u7121\u200b\u9700\u5b9a\u7fa9\u200b\u7279\u5b9a\u200b\u7684\u200b gas \u200b\u548c\u200b\u8cbb\u7528\u503c\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b <code>auto</code> \u200b\u6a19\u8a8c\u200b\u6709\u200b\u6642\u200b\u53ef\u80fd\u200b\u7121\u6cd5\u200b\u6839\u64da\u200b\u7db2\u7d61\u200b\u6d41\u91cf\u200b\u4f30\u7b97\u200b\u6b63\u78ba\u200b\u7684\u200b gas \u200b\u548c\u200b\u8cbb\u7528\u200b\u3002 \u200b\u70ba\u200b\u4e86\u200b\u514b\u670d\u200b\u9019\u500b\u200b\u554f\u984c\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u70ba\u200b <code>--gas-adjustment</code> \u200b\u6a19\u8a8c\u200b\u4f7f\u7528\u200b\u66f4\u200b\u9ad8\u200b\u7684\u200b\u503c\u200b\u3002 \u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u5b83\u200b\u8a2d\u7f6e\u200b\u70ba\u200b<code>1.2</code>\u3002 \u200b\u7576\u4f30\u200b\u8a08\u503c\u200b\u4e0d\u8db3\u200b\u6642\u200b\uff0c\u200b\u91cd\u8a66\u200b\u66f4\u200b\u9ad8\u200b\u7684\u200b gas \u200b\u8abf\u6574\u200b\uff0c\u200b\u4f8b\u5982\u200b <code>--gas-adjustment 1.3</code>\u3002</p> <p>\u200b\u4e0d\u80fd\u200b\u7d50\u5408\u200b\u4f7f\u7528\u200b <code>--gas-prices</code> \u200b\u548c\u200b <code>--fees</code> \u200b\u6a19\u8a8c\u200b\u3002 \u200b\u5982\u679c\u200b\u662f\u200b\u9019\u6a23\u200b\uff0c\u200b\u7528\u6236\u5c07\u200b\u6536\u5230\u200b\u4e00\u689d\u200b\u932f\u8aa4\u200b\u6d88\u606f\u200b\uff0c\u200b\u6307\u51fa\u200b\u7121\u6cd5\u200b\u540c\u6642\u200b\u63d0\u4f9b\u200b\u8cbb\u7528\u200b\u548c\u200b\u6c7d\u6cb9\u200b\u50f9\u683c\u200b\u3002</p> <p>\u200b\u8acb\u200b\u8a18\u4f4f\u200b\uff0c\u200b\u5982\u679c\u200b\u63d0\u4f9b\u200b\u7684\u200b\u8cbb\u7528\u200b\u6216\u200b\u6c7d\u6cb9\u200b\u91cf\u200b\u4e0d\u8db3\u200b\uff0c\u200b\u4e0a\u8ff0\u200b\u7d44\u5408\u200b\u53ef\u80fd\u200b\u6703\u200b\u5931\u6557\u200b\u3002 \u200b\u5982\u679c\u200b\u662f\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\uff0cCLI \u200b\u5c07\u200b\u8fd4\u56de\u200b\u4e00\u689d\u200b\u5305\u542b\u200b\u7279\u5b9a\u200b\u539f\u56e0\u200b\u7684\u200b\u932f\u8aa4\u200b\u6d88\u606f\u200b\u3002 \u200b\u4f8b\u5982\u200b\uff1a</p> <pre><code>raw_log: 'out of gas in location: submit proposal; gasWanted: 200000, gasUsed: 263940.\n  Please retry with a gas (--gas flag) amount higher than gasUsed: out of gas'\n</code></pre>"},{"location":"protocol/key-management/","title":"\u5bc6\u9470\u200b\u7ba1\u7406","text":"<p>\u200b\u52a9\u8a18\u8a5e\u200b\uff0c\u200b\u4e5f\u200b\u7a31\u200b\u70ba\u52a9\u200b\u8a18\u8a5e\u200b\uff0c\u200b\u662f\u200b\u4e00\u200b\u7d44\u7528\u200b\u65bc\u200b\u6062\u200b\u5fa9\u200b\u6216\u200b\u6062\u200b\u5fa9\u200b\u52a0\u5bc6\u200b\u8ca8\u5e63\u200b\u9322\u200b\u5305\u200b\u7684\u200b\u8a5e\u200b\u3002\u200b\u5982\u679c\u200b\u60a8\u200b\u7121\u6cd5\u200b\u8a2a\u554f\u200b\u539f\u59cb\u200b\u9322\u5305\u200b\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u4f5c\u70ba\u200b\u8a2a\u554f\u200b\u60a8\u200b\u7684\u200b\u6578\u5b57\u200b\u8cc7\u7522\u200b\u7684\u200b\u5099\u4efd\u200b\u3002\u200b\u8a72\u200b\u77ed\u8a9e\u200b\u901a\u5e38\u200b\u662f\u200b\u60a8\u200b\u5275\u5efa\u9322\u200b\u5305\u6642\u200b\u751f\u6210\u200b\u7684\u200b\u4e00\u7cfb\u5217\u200b 12-24 \u200b\u500b\u200b\u55ae\u8a5e\u200b\uff0c\u200b\u61c9\u200b\u4fdd\u6301\u200b\u5b89\u5168\u200b\u548c\u200b\u79c1\u5bc6\u200b\u3002</p> <p>\u200b\u52a9\u8a18\u200b\u8a5e\u200b\u7684\u200b\u91cd\u8981\u6027\u200b\u5728\u200b\u65bc\u200b\u52a0\u5bc6\u200b\u8ca8\u5e63\u200b\u4ee5\u200b\u5206\u6563\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5b58\u5132\u200b\uff0c\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u6c92\u6709\u200b\u4e2d\u592e\u200b\u6a5f\u69cb\u200b\u6216\u200b\u6a5f\u69cb\u200b\u6301\u6709\u200b\u6216\u200b\u63a7\u5236\u200b\u4f60\u200b\u7684\u200b\u8cc7\u91d1\u200b\u3002\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u5982\u679c\u200b\u60a8\u200b\u7121\u6cd5\u200b\u8a2a\u554f\u200b\u60a8\u200b\u7684\u200b\u9322\u200b\u5305\u200b\uff08\u200b\u4f8b\u5982\u200b\u5fd8\u8a18\u200b\u5bc6\u78bc\u200b\u3001\u200b\u4e1f\u5931\u200b\u60a8\u200b\u7684\u200b\u8a2d\u5099\u200b\uff09\uff0c\u200b\u60a8\u200b\u5c07\u7121\u6cd5\u200b\u5728\u200b\u6c92\u200b\u6709\u52a9\u200b\u8a18\u8a5e\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u53d6\u56de\u200b\u60a8\u200b\u7684\u200b\u8cc7\u91d1\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5c07\u60a8\u200b\u7684\u200b\u52a9\u200b\u8a18\u8a5e\u200b\u5b58\u5132\u200b\u5728\u200b\u5b89\u5168\u53ef\u9760\u200b\u7684\u200b\u5730\u65b9\u200b\u81f3\u95dc\u200b\u91cd\u8981\u200b\uff0c\u200b\u4f8b\u5982\u200b\u7269\u7406\u200b\u7d19\u5f35\u200b\u6216\u200b\u5b89\u5168\u200b\u7684\u200b\u6578\u5b57\u200b\u6587\u4ef6\u200b\u3002</p> <p>\u200b\u6b64\u5916\u200b\uff0c\u200b\u5efa\u200b\u8b70\u200b\u88fd\u200b\u4f5c\u200b\u591a\u4efd\u200b\u526f\u672c\u200b\u4e26\u5c07\u200b\u5b83\u5011\u200b\u5b58\u653e\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4efb\u4f55\u200b\u7dca\u200b\u6025\u60c5\u200b\u6cc1\u4e0b\u200b\u4f7f\u7528\u200b\u60a8\u200b\u7684\u200b\u8cc7\u91d1\u200b\u3002</p>"},{"location":"protocol/key-management/#_1","title":"\u52a9\u8a18\u200b\u7b26\u77ed\u8a9e\u200b\u8207\u200b\u79c1\u200b\u9470","text":"<p>\u200b\u7a2e\u5b50\u200b\u77ed\u8a9e\u200b\uff0c\u200b\u4e5f\u200b\u7a31\u200b\u70ba\u200b\u6062\u200b\u5fa9\u200b\u77ed\u8a9e\u200b\u6216\u200b\u5099\u4efd\u200b\u77ed\u8a9e\u200b\uff0c\u200b\u662f\u200b\u7528\u200b\u65bc\u200b\u751f\u6210\u200b\u79c1\u9470\u200b\u7684\u200b\u4e00\u7cfb\u5217\u200b\u55ae\u8a5e\u200b\u3002\u200b\u5b83\u200b\u901a\u5e38\u200b\u662f\u200b\u4e00\u7d44\u200b 12 \u200b\u6216\u200b 24 \u200b\u500b\u200b\u55ae\u8a5e\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u5728\u200b\u539f\u59cb\u200b\u79c1\u9470\u200b\u4e1f\u5931\u200b\u6216\u200b\u640d\u58de\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u6062\u200b\u5fa9\u200b\u6216\u200b\u6062\u200b\u5fa9\u200b\u5c0d\u200b\u52a0\u5bc6\u200b\u8ca8\u5e63\u200b\u9322\u200b\u5305\u200b\u7684\u200b\u8a2a\u554f\u200b\u3002\u200b\u7a2e\u5b50\u200b\u77ed\u8a9e\u200b\u53ef\u7528\u200b\u65bc\u200b\u751f\u6210\u200b\u591a\u500b\u200b\u79c1\u200b\u9470\u200b\uff0c\u200b\u9019\u4e9b\u200b\u79c1\u200b\u9470\u200b\u53ef\u7528\u200b\u65bc\u200b\u8a2a\u200b\u554f\u591a\u500b\u200b\u52a0\u5bc6\u200b\u8ca8\u5e63\u200b\u5730\u5740\u200b\u548c\u200b\u4f59\u984d\u200b\u3002</p> <p>\u200b\u53e6\u4e00\u65b9\u9762\u200b\uff0c\u200b\u79c1\u9470\u200b\u662f\u200b\u4e00\u9577\u200b\u4e32\u200b\u5b57\u7b26\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\u4e26\u200b\u63d0\u4f9b\u200b\u5c0d\u200b\u60a8\u200b\u7684\u200b\u52a0\u5bc6\u200b\u8ca8\u5e63\u200b\u8cc7\u91d1\u200b\u7684\u200b\u8a2a\u554f\u200b\u3002\u200b\u79c1\u9470\u200b\u662f\u200b\u5f9e\u200b\u7a2e\u5b50\u200b\u77ed\u8a9e\u200b\u751f\u6210\u200b\u7684\u200b\uff0c\u200b\u4e26\u4e14\u200b\u5c0d\u200b\u65bc\u200b\u6bcf\u500b\u200b\u52a0\u5bc6\u200b\u8ca8\u5e63\u200b\u5730\u5740\u200b\u90fd\u200b\u662f\u200b\u552f\u4e00\u200b\u7684\u200b\u3002\u200b\u5b83\u200b\u7528\u200b\u65bc\u200b\u70ba\u200b\u4ea4\u6613\u200b\u5275\u5efa\u6578\u200b\u5b57\u200b\u7c3d\u540d\u200b\uff0c\u200b\u4ee5\u78ba\u200b\u4fdd\u200b\u4ea4\u6613\u200b\u5408\u6cd5\u200b\u4e26\u5df2\u200b\u7372\u5f97\u200b\u8cc7\u91d1\u200b\u5408\u6cd5\u200b\u6240\u6709\u8005\u200b\u7684\u200b\u6388\u6b0a\u200b\u3002</p> <p>\u200b\u7e3d\u200b\u4e4b\u200b\uff0c\u200b\u60a8\u200b\u7684\u200b\u79c1\u200b\u9470\u548c\u52a9\u200b\u8a18\u8a5e\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u81f3\u95dc\u200b\u91cd\u8981\u200b\u3002\u200b\u5982\u679c\u200b\u60a8\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\u906d\u5230\u200b\u6d29\u9732\u200b\uff0c\u200b\u53ef\u80fd\u200b\u6703\u200b\u4f7f\u200b\u6240\u6709\u200b\u95dc\u806f\u200b\u7684\u200b\u5e33\u6236\u200b\u9762\u81e8\u200b\u98a8\u96aa\u200b\u3002\u200b\u4f46\u662f\u200b\uff0c\u200b\u4e1f\u5931\u52a9\u200b\u8a18\u8a5e\u200b\u53ef\u80fd\u200b\u6703\u7522\u751f\u200b\u66f4\u200b\u56b4\u91cd\u200b\u7684\u200b\u5f8c\u200b\u679c\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u200b\u7528\u200b\u65bc\u200b\u751f\u6210\u200b\u591a\u500b\u200b\u79c1\u200b\u9470\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u63a1\u53d6\u200b\u9069\u7576\u200b\u7684\u200b\u63aa\u65bd\u200b\u4f86\u200b\u4fdd\u8b77\u200b\u60a8\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\u548c\u200b\u52a9\u8a18\u200b\u8a5e\u4ee5\u200b\u907f\u514d\u200b\u4efb\u4f55\u200b\u707d\u96e3\u6027\u200b\u7684\u200b\u640d\u5931\u200b\u662f\u200b\u81f3\u95dc\u200b\u91cd\u8981\u200b\u7684\u200b\u3002</p>"},{"location":"protocol/key-management/#stcd-cli","title":"stcd CLI\u200b\u4e2d\u200b\u7684\u200b\u52a9\u200b\u8a18\u7b26","text":"<p>**\u200b\u5728\u200b\u7e7c\u7e8c\u200b\u4f7f\u7528\u200b CLI \u200b\u4e4b\u524d\u200b\uff0c\u200b\u8acb\u200b\u78ba\u4fdd\u200b\u60a8\u200b\u5df2\u5b89\u88dd\u200b <code>stcd</code></p> <p>\u200b\u7576\u60a8\u5275\u200b\u5efa\u65b0\u200b\u5bc6\u9470\u6642\u200b\uff0c\u200b\u60a8\u200b\u6703\u200b\u6536\u5230\u200b\u4e00\u500b\u200b\u53ef\u7528\u200b\u65bc\u200b\u6062\u200b\u5fa9\u200b\u8a72\u200b\u5bc6\u200b\u9470\u200b\u7684\u200b\u52a9\u200b\u8a18\u8a5e\u200b\u3002\u200b\u5099\u4efd\u52a9\u200b\u8a18\u8a5e\u200b\uff1a</p> <pre><code>stcd keys add dev0\n{\n  \"name\": \"dev0\",\n  \"type\": \"local\",\n  \"address\": \"dst1n253dl2tgyhxjm592p580c38r4dn8023ctv28d\",\n  \"pubkey\": '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"ArJhve4v5HkLm+F7ViASU/rAGx7YrwU4+XKV2MNJt+Cq\"}',\n  \"mnemonic\": \"\"\n}\n\n**Important** write this mnemonic phrase in a safe place.\nIt is the only way to recover your account if you ever forget your password.\n\n# &lt;24 word mnemonic phrase&gt;\n</code></pre> <p>\u200b\u8981\u200b\u6062\u200b\u5fa9\u200b\u5bc6\u200b\u9470\u200b\uff1a</p> <pre><code>$ stcd keys add dev0-restored --recover\n&gt; Enter your bip39 mnemonic\nbanner genuine height east ghost oak toward reflect asset marble else explain foster car nest make van divide twice culture announce shuffle net peanut\n{\n  \"name\": \"dev0-restored\",\n  \"type\": \"local\",\n  \"address\": \"dst1n253dl2tgyhxjm592p580c38r4dn8023ctv28d\",\n  \"pubkey\": '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"ArJhve4v5HkLm+F7ViASU/rAGx7YrwU4+XKV2MNJt+Cq\"}'\n}\n</code></pre>"},{"location":"protocol/key-management/#_2","title":"\u5bc6\u200b\u9470\u5c0e\u51fa","text":""},{"location":"protocol/key-management/#tendermint-","title":"Tendermint-\u200b\u79c1\u9470\u200b\u683c\u5f0f","text":"<p>\u200b\u8981\u5099\u200b\u4efd\u200b\u6b64\u985e\u200b\u4e0d\u200b\u5e36\u52a9\u200b\u8a18\u8a5e\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u8acb\u200b\u57f7\u884c\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a</p> <pre><code>stcd keys export dev0\nEnter passphrase to decrypt your key:\nEnter passphrase to encrypt the exported key:\n-----BEGIN TENDERMINT PRIVATE KEY-----\nkdf: bcrypt\nsalt: 14559BB13D881A86E0F4D3872B8B2C82\ntype: secp256k1\n\n# &lt;Tendermint private key&gt;\n-----END TENDERMINT PRIVATE KEY-----\n\n$ echo \"\\\n-----BEGIN TENDERMINT PRIVATE KEY-----\nkdf: bcrypt\nsalt: 14559BB13D881A86E0F4D3872B8B2C82\ntype: secp256k1\n\n# &lt;Tendermint private key&gt;\n-----END TENDERMINT PRIVATE KEY-----\" &gt; dev0.export\n</code></pre>"},{"location":"protocol/key-management/#ethereum-","title":"Ethereum-\u200b\u79c1\u9470\u200b\u683c\u5f0f","text":"<p>\u200b\u6ce8\u610f\u200b: \u200b\u9019\u4e9b\u200b\u985e\u578b\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\u8207\u200b MetaMask \u200b\u517c\u5bb9\u200b</p> <p>\u200b\u8981\u5099\u200b\u4efd\u200b\u6b64\u985e\u200b\u4e0d\u200b\u5e36\u52a9\u200b\u8a18\u8a5e\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u8acb\u200b\u57f7\u884c\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u200b\uff1a</p> <pre><code>stcd keys unsafe-export-eth-key dev0 &gt; dev0.export\n**WARNING** this is an unsafe way to export your unencrypted private key, are you sure? [y/N]: y\nEnter keyring passphrase:\n</code></pre>"},{"location":"protocol/key-management/#_3","title":"\u5bc6\u200b\u9470\u5c0e\u5165","text":""},{"location":"protocol/key-management/#tendermint-_1","title":"Tendermint-\u200b\u79c1\u9470\u200b\u683c\u5f0f","text":"<pre><code>$ stcd keys import dev0-imported ./dev0.export\nEnter passphrase to decrypt your key:\n</code></pre>"},{"location":"protocol/key-management/#ethereum-_1","title":"Ethereum-\u200b\u79c1\u9470\u200b\u683c\u5f0f","text":"<pre><code>$ stcd keys unsafe-import-eth-key dev0-imported ./dev0.export\nEnter passphrase to encrypt your key:\n</code></pre>"},{"location":"protocol/key-management/#_4","title":"\u9a57\u8b49","text":"<p>Verify that your key has been restored using the following command:</p> <pre><code>$ stcd keys list\n[\n  {\n    \"name\": \"dev0-imported\",\n    \"type\": \"local\",\n    \"address\": \"dst1n253dl2tgyhxjm592p580c38r4dn8023ctv28d\",\n    \"pubkey\": '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"ArJhve4v5HkLm+F7ViASU/rAGx7YrwU4+XKV2MNJt+Cq\"}'\n  },\n  {\n    \"name\": \"dev0-restored\",\n    \"type\": \"local\",\n    \"address\": \"dst1n253dl2tgyhxjm592p580c38r4dn8023ctv28d\",\n    \"pubkey\": '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"ArJhve4v5HkLm+F7ViASU/rAGx7YrwU4+XKV2MNJt+Cq\"}'\n  },\n  {\n    \"name\": \"dev0\",\n    \"type\": \"local\",\n    \"address\": \"dst1n253dl2tgyhxjm592p580c38r4dn8023ctv28d\",\n    \"pubkey\": '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"ArJhve4v5HkLm+F7ViASU/rAGx7YrwU4+XKV2MNJt+Cq\"}'\n  }\n]\n</code></pre>"},{"location":"protocol/keyring/","title":"\u5bc6\u9470\u74b0\u200b Keyring","text":"<p>\u200b\u4f7f\u7528\u200b CLI \u200b\u5bc6\u9470\u74b0\u200b\u5275\u5efa\u200b\u3001\u200b\u5c0e\u5165\u200b\u3001\u200b\u5c0e\u51fa\u200b\u548c\u200b\u522a\u9664\u200b\u5bc6\u200b\u9470\u200b\u3002</p> <p>\u200b\u5bc6\u9470\u74b0\u200b\u4fdd\u5b58\u200b\u7528\u200b\u65bc\u200b\u8207\u200b\u7bc0\u9ede\u200b\u4ea4\u4e92\u200b\u7684\u200b\u79c1\u200b\u9470\u200b/\u200b\u516c\u9470\u200b\u5c0d\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u5728\u200b\u904b\u884c\u200b\u7bc0\u9ede\u200b\u4e4b\u524d\u200b\u9700\u8981\u200b\u8a2d\u7f6e\u200b\u4e00\u500b\u9a57\u200b\u8b49\u5668\u200b\u5bc6\u200b\u9470\u200b\uff0c\u200b\u9019\u6a23\u200b\u624d\u80fd\u200b\u6b63\u78ba\u200b\u5730\u200b\u5c0d\u200b\u584a\u200b\u9032\u884c\u200b\u7c3d\u540d\u200b\u3002\u200b\u79c1\u9470\u200b\u53ef\u4ee5\u200b\u5b58\u5132\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u7a31\u70ba\u200b\"backends\"\uff0c\u200b\u4f8b\u5982\u200b\u6587\u4ef6\u200b\u6216\u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u200b\u81ea\u5df1\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\u5b58\u5132\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u5982\u679c\u200b\u60a8\u200b\u9700\u8981\u200b\u5fa9\u200b\u7fd2\u79c1\u200b\u9470\u200b\u548c\u200b\u5bc6\u200b\u9470\u200b\u7ba1\u7406\u200b\uff0c\u200b\u8acb\u200b\u53c3\u8003\u200b\u6211\u5011\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\u7ba1\u7406\u200b\u3002</p>"},{"location":"protocol/keyring/#_1","title":"\u6dfb\u52a0\u200b\u5bc6\u9470","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u4f86\u200b\u7372\u53d6\u200b<code>keys</code>\u200b\u547d\u4ee4\u200b\u7684\u200b\u5e6b\u52a9\u200b\u4ee5\u53ca\u200b\u6709\u95dc\u200b\u7279\u5b9a\u200b\u5b50\u200b\u547d\u4ee4\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c \u200b\u5206\u5225\u200b\uff1a</p> <pre><code>stcd keys\n</code></pre> <pre><code>stcd keys [command] --help\n</code></pre> <p>\u200b\u8981\u200b\u5728\u200b\u5bc6\u200b\u9470\u200b\u74b0\u4e2d\u5275\u200b\u5efa\u65b0\u200b\u5bc6\u9470\u200b\uff0c\u200b\u8acb\u904b\u884c\u200b\u5e36\u200b\u6709\u200b <code>&lt;key_name&gt;</code> \u200b\u53c3\u6578\u200b\u7684\u200b <code>add</code> \u200b\u5b50\u200b\u547d\u4ee4\u200b\u3002\u200b\u60a8\u200b\u5c07\u5fc5\u9808\u200b\u63d0\u4f9b\u200b\u5bc6\u78bc\u200b \u200b\u5c0d\u200b\u65bc\u200b\u65b0\u200b\u751f\u6210\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\u3002\u200b\u9019\u500b\u200b\u5bc6\u200b\u9470\u5c07\u200b\u5728\u200b\u4e0b\u200b\u4e00\u7bc0\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u3002</p> <pre><code>stcd keys add dev0\n\n# Put the generated address in a variable for later use.\nMY_VALIDATOR_ADDRESS=$(stcd keys show dev0 -a)\n</code></pre> <p>\u200b\u6b64\u200b\u547d\u4ee4\u200b\u751f\u6210\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b 24 \u200b\u5b57\u52a9\u200b\u8a18\u8a5e\u200b\uff0c\u200b\u4e26\u5c07\u200b\u5176\u200b\u6301\u4e45\u200b\u5316\u5230\u200b\u76f8\u95dc\u5f8c\u7aef\u200b\uff0c\u200b\u4e26\u8f38\u51fa\u200b\u6709\u200b\u95dc\u5bc6\u200b\u9470\u200b\u5c0d\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002\u200b\u5982\u679c\u200b\u9019\u500b\u200b\u5bc6\u200b\u9470\u200b\u5c0d\u5c07\u200b\u88ab\u200b\u7528\u200b\u4f86\u200b\u4fdd\u5b58\u200b\u6709\u200b\u50f9\u503c\u200b\u7684\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u4e00\u5b9a\u200b\u8981\u200b\u628a\u200b\u52a9\u200b\u8a18\u8a5e\u200b\u5beb\u200b\u5728\u200b\u5b89\u5168\u200b\u7684\u200b\u5730\u65b9\u200b\uff01</p> <p>\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u5bc6\u9470\u74b0\u200b\u751f\u6210\u200b\u4e00\u500b\u200b<code>eth_secp256k1</code>\u200b\u5bc6\u9470\u200b\u3002\u200b\u5bc6\u9470\u200b\u74b0\u9084\u200b\u652f\u6301\u200b<code>ed25519</code>\u200b\u5bc6\u9470\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u50b3\u905e\u200b<code>--algo</code>\u200b\u6a19\u8a8c\u200b\u4f86\u200b\u5275\u5efa\u200b\u3002\u200b\u9470\u5319\u200b\u5708\u200b\u7576\u7136\u200b\u53ef\u4ee5\u200b\u540c\u6642\u200b\u6301\u6709\u200b\u9019\u5169\u7a2e\u200b\u985e\u578b\u200b\u7684\u200b\u9470\u5319\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a\u200b\u8207\u200b\u516c\u9470\u200b\u95dc\u806f\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u5730\u5740\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u7372\u53d6\u200b<code>eth_secp256k1</code>\u200b\u985e\u578b\u200b\u7684\u200b\u5b8c\u6574\u200b\u4ee5\u592a\u200b\u574a\u200b\u516c\u9470\u200b\u3001\u200b\u8a08\u7b97\u200b<code>Keccak-256</code>\u200b\u54c8\u5e0c\u200b\u4e26\u622a\u65b7\u200b\u524d\u200b\u5341\u4e8c\u200b\u500b\u200b\u5b57\u200b\u7bc0\u4f86\u200b\u5c0e\u51fa\u200b\u3002</p> <p>\ud83d\udea8 \u200b\u5371\u96aa\u200b\uff1a\u200b\u7531\u200b\u65bc\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u7684\u200b\u517c\u5bb9\u6027\u200b\u554f\u984c\u200b\uff0cDaodst \u200b\u4e0d\u200b\u652f\u6301\u200b Cosmos <code>secp256k1</code> \u200b\u5bc6\u9470\u200b\u3002</p>"},{"location":"protocol/keyring/#_2","title":"\u5bc6\u9470\u200b\u74b0\u5f8c\u7aef","text":""},{"location":"protocol/keyring/#os","title":"OS","text":"<p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a <code>os</code> \u200b\u662f\u200b\u9ed8\u8a8d\u200b\u9078\u9805\u200b\uff0c\u200b\u56e0\u70ba\u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u200b\u7684\u200b\u9ed8\u8a8d\u200b\u6191\u64da\u200b\u7ba1\u7406\u5668\u200b\u65e8\u5728\u200b\u6eff\u8db3\u200b\u7528\u6236\u200b\u6700\u5e38\u898b\u200b\u7684\u200b\u9700\u6c42\u200b\uff0c\u200b\u4e26\u5728\u200b\u4e0d\u200b\u5f71\u97ff\u200b\u5b89\u5168\u6027\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u70ba\u200b\u4ed6\u5011\u200b\u63d0\u4f9b\u200b\u8212\u9069\u200b\u7684\u200b\u9ad4\u9a57\u200b\u3002</p> <p><code>os</code> \u200b\u5f8c\u200b\u7aef\u200b\u4f9d\u8cf4\u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u200b\u7279\u5b9a\u200b\u7684\u200b\u9ed8\u200b\u8a8d\u503c\u200b\u4f86\u200b\u5b89\u5168\u200b\u5730\u8655\u200b\u7406\u5bc6\u200b\u9470\u200b\u5b58\u5132\u200b\u3002\u200b\u901a\u5e38\u200b\uff0c\u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u200b\u7684\u200b\u6191\u200b\u8b49\u5b50\u200b\u7cfb\u7d71\u200b\u6839\u64da\u200b\u7528\u6236\u200b\u7684\u200b\u5bc6\u78bc\u200b\u7b56\u7565\u200b\u8655\u7406\u200b\u5bc6\u78bc\u200b\u63d0\u793a\u200b\u3001\u200b\u79c1\u9470\u5b58\u200b\u5132\u548c\u7528\u200b\u6236\u6703\u8a71\u200b\u3002\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u6700\u200b\u6d41\u884c\u200b\u7684\u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u200b\u53ca\u5176\u200b\u5404\u81ea\u200b\u7684\u200b\u5bc6\u78bc\u200b\u7ba1\u7406\u5668\u200b\u7684\u200b\u5217\u8868\u200b\uff1a</p> <ul> <li>macOS (since Mac OS 8.6): Keychain</li> <li>Windows: \u200b\u6191\u64da\u200b\u7ba1\u7406\u200b API</li> <li>GNU/Linux:</li> <li>libsecret</li> <li>kwallet</li> </ul> <p>\u200b\u4f7f\u7528\u200b GNOME \u200b\u4f5c\u70ba\u200b\u9ed8\u8a8d\u200b\u684c\u9762\u200b\u74b0\u5883\u200b\u7684\u200b GNU/Linux \u200b\u767c\u884c\u200b\u7248\u200b\u901a\u5e38\u200b\u5e36\u6709\u200b Seahorse\u3002 \u200b\u57fa\u200b\u65bc\u200b KDE \u200b\u7684\u200b\u767c\u884c\u200b\u7248\u200b\u7684\u200b\u7528\u6236\u200b\u901a\u5e38\u200b\u6703\u200b\u7372\u5f97\u200b KDE \u200b\u9322\u5305\u200b\u7ba1\u7406\u5668\u200b\u3002 \u200b\u524d\u8005\u200b\u5be6\u969b\u200b\u4e0a\u200b\u662f\u200b\u4e00\u500b\u200b\u65b9\u4fbf\u200b\u7684\u200b <code>libsecret</code> \u200b\u524d\u7aef\u200b\uff0c\u200b\u800c\u5f8c\u8005\u200b\u662f\u200b\u4e00\u500b\u200b <code>kwallet</code> \u200b\u5ba2\u6236\u200b\u7aef\u200b\u3002</p> <p>\u200b\u7121\u982d\u200b\u74b0\u5883\u200b\u7684\u200b\u63a8\u85a6\u5f8c\u7aef\u200b\u662f\u200b <code>file</code> \u200b\u548c\u200b <code>pass</code>\u3002</p>"},{"location":"protocol/keyring/#file","title":"File","text":"<p><code>file</code> \u200b\u5c07\u200b\u52a0\u5bc6\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b\u74b0\u5b58\u200b\u5132\u5728\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u914d\u7f6e\u200b\u76ee\u9304\u200b\u4e2d\u200b\u3002\u200b\u6bcf\u6b21\u200b\u8a2a\u554f\u200b\u6b64\u5bc6\u200b\u9470\u200b\u74b0\u6642\u200b\u90fd\u200b\u6703\u200b\u8acb\u6c42\u200b\u5bc6\u78bc\u200b\uff0c\u200b\u9019\u200b\u53ef\u80fd\u200b\u6703\u200b\u5728\u200b\u55ae\u500b\u200b\u547d\u4ee4\u200b\u4e2d\u200b\u591a\u6b21\u51fa\u200b\u73fe\u200b\uff0c\u200b\u5f9e\u800c\u5c0e\u200b\u81f4\u91cd\u200b\u8907\u200b\u7684\u200b\u5bc6\u78bc\u200b\u63d0\u793a\u200b\u3002\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b bash \u200b\u8173\u672c\u200b\u901a\u904e\u200b <code>file</code> \u200b\u9078\u9805\u200b\u57f7\u884c\u200b\u547d\u4ee4\u200b\uff0c\u200b\u60a8\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u5c0d\u591a\u500b\u200b\u63d0\u793a\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u683c\u5f0f\u200b\uff1a</p> <pre><code># assuming that KEYPASSWD is set in the environment\nyes $KEYPASSWD | stcd keys add me\nyes $KEYPASSWD | stcd keys show me\n# start stcd with keyring-backend flag\nstcd --keyring-backend=file start\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a\u200b\u7b2c\u4e00\u6b21\u200b\u5c07\u5bc6\u200b\u9470\u200b\u6dfb\u52a0\u200b\u5230\u200b\u7a7a\u5bc6\u200b\u9470\u200b\u74b0\u6642\u200b\uff0c\u200b\u7cfb\u7d71\u5c07\u200b\u63d0\u793a\u200b\u60a8\u200b\u8f38\u5165\u200b\u5bc6\u78bc\u200b\u5169\u6b21\u200b\u3002</p>"},{"location":"protocol/keyring/#pass","title":"Pass","text":"<p><code>pass</code> \u200b\u5f8c\u200b\u7aef\u200b\u4f7f\u7528\u200b pass \u200b\u5be6\u7528\u200b\u7a0b\u5e8f\u200b\u4f86\u200b\u7ba1\u7406\u200b\u5bc6\u200b\u9470\u200b\u7684\u200b\u654f\u611f\u200b\u6578\u64da\u200b\u548c\u200b\u5143\u200b\u6578\u64da\u200b\u7684\u200b\u78c1\u76e4\u200b\u52a0\u5bc6\u200b\u3002\u200b\u5bc6\u9470\u200b\u5b58\u5132\u200b\u5728\u200b\u7279\u5b9a\u200b\u65bc\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u76ee\u9304\u200b\u4e2d\u200b\u7684\u200b\u201cgpg\u201d\u200b\u52a0\u5bc6\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u3002 <code>pass</code> \u200b\u9069\u7528\u200b\u65bc\u200b\u6700\u200b\u6d41\u884c\u200b\u7684\u200b UNIX \u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u200b\u4ee5\u53ca\u200b GNU/Linux \u200b\u767c\u884c\u200b\u7248\u200b\u3002\u200b\u6709\u95dc\u200b\u5982\u4f55\u200b\u4e0b\u8f09\u200b\u548c\u200b\u5b89\u88dd\u200b\u5b83\u200b\u7684\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u53c3\u95b1\u200b\u5176\u200b\u624b\u518a\u200b\u9801\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a<code>pass</code> \u200b\u4f7f\u7528\u200b GnuPG \u200b\u9032\u884c\u200b\u52a0\u5bc6\u200b\u3002 <code>gpg</code> \u200b\u5728\u200b\u57f7\u884c\u200b\u6642\u200b\u81ea\u52d5\u200b\u8abf\u7528\u200b <code>gpg-agent</code> \u200b\u5b88\u8b77\u200b\u9032\u7a0b\u200b\uff0c\u200b\u5b83\u200b\u8655\u7406\u200b GnuPG \u200b\u6191\u8b49\u200b\u7684\u200b\u7de9\u5b58\u200b\u3002\u200b\u6709\u95dc\u200b\u5982\u4f55\u200b\u914d\u7f6e\u200b\u7de9\u5b58\u200b\u53c3\u6578\u200b\uff08\u200b\u4f8b\u5982\u200b\u6191\u64da\u200b TTL \u200b\u548c\u200b\u5bc6\u78bc\u200b\u904e\u671f\u200b\u6642\u9593\u200b\uff09\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u53c3\u95b1\u200b <code>gpg-agent</code> \u200b\u624b\u518a\u200b\u9801\u200b\u3002</p> <p>\u200b\u5fc5\u9808\u200b\u5728\u200b\u9996\u6b21\u200b\u4f7f\u7528\u200b\u4e4b\u524d\u200b\u8a2d\u7f6e\u200b\u5bc6\u78bc\u200b\u5b58\u5132\u200b\uff1a</p> <pre><code>pass init &lt;GPG_KEY_ID&gt;\n</code></pre> <p>\u200b\u5c07\u200b <code>&lt;GPG_KEY_ID&gt;</code> \u200b\u66ff\u63db\u200b\u70ba\u200b\u60a8\u200b\u7684\u200b GPG \u200b\u5bc6\u9470\u200b ID\u3002\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u60a8\u200b\u7684\u200b\u500b\u200b\u4eba\u200b GPG \u200b\u5bc6\u200b\u9470\u200b\u6216\u200b\u60a8\u200b\u53ef\u80fd\u200b\u60f3\u200b\u5c08\u9580\u7528\u200b\u4f86\u200b\u52a0\u5bc6\u200b\u5bc6\u78bc\u200b\u5b58\u5132\u200b\u7684\u200b\u66ff\u4ee3\u200b\u5bc6\u9470\u200b\u3002</p>"},{"location":"protocol/keyring/#kwallet","title":"Kwallet","text":"<p><code>kwallet</code> \u200b\u5f8c\u200b\u7aef\u200b\u4f7f\u7528\u200b <code>KDE Wallet Manager</code>\uff0c\u200b\u5b83\u9ed8\u200b\u8a8d\u5b89\u88dd\u200b\u5728\u200b\u4ee5\u200b KDE \u200b\u4f5c\u70ba\u200b\u9ed8\u8a8d\u200b\u684c\u9762\u200b\u74b0\u5883\u200b\u7684\u200b GNU/Linux \u200b\u767c\u884c\u200b\u7248\u200b\u4e0a\u200b\u3002\u200b\u66f4\u200b\u591a\u200b\u8acb\u200b\u53c3\u8003\u200bKWallet\u200b\u624b\u518a\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"protocol/keyring/#testing","title":"Testing","text":"<p><code>test</code> \u200b\u5f8c\u200b\u7aef\u200b\u662f\u200b <code>file</code> \u200b\u5f8c\u200b\u7aef\u7684\u200b\u7121\u5bc6\u78bc\u200b\u8b8a\u9ad4\u200b\u3002\u200b\u5bc6\u200b\u9470\u200b\u4ee5\u200b\u672a\u200b\u52a0\u5bc6\u200b\u7684\u200b\u5f62\u5f0f\u200b\u5b58\u5132\u200b\u5728\u200b\u78c1\u76e4\u200b\u4e0a\u200b\u3002\u200b\u6b64\u5bc6\u200b\u9470\u200b\u74b0\u50c5\u200b\u7528\u200b\u65bc\u200b\u6e2c\u8a66\u200b\u76ee\u7684\u200b\u3002\u200b\u4f7f\u7528\u200b\u98a8\u96aa\u200b\u81ea\u8ca0\u200b\uff01</p> <p>\ud83d\udea8 \u200b\u5371\u96aa\u200b\uff1a\u200b\u6c38\u9060\u200b\u4e0d\u8981\u200b\u4f7f\u7528\u200b <code>test</code> \u200b\u9375\u200b\u63a7\u5f8c\u7aef\u200b\u5275\u5efa\u200b\u60a8\u200b\u7684\u200b\u4e3b\u7db2\u9a57\u200b\u8b49\u5668\u200b\u5bc6\u200b\u9470\u200b\u3002\u200b\u9019\u6a23\u200b\u505a\u200b\u53ef\u80fd\u200b\u6703\u5c0e\u81f4\u200b \u200b\u901a\u904e\u200b<code>eth_sendTransaction</code>JSON-RPC \u200b\u7aef\u9ede\u200b\u9060\u7a0b\u200b\u8a2a\u554f\u200b\u60a8\u200b\u7684\u200b\u8cc7\u91d1\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u9020\u6210\u200b\u8cc7\u91d1\u200b\u640d\u5931\u200b\u3002</p>"},{"location":"protocol/keyring/#memory","title":"Memory","text":"<p><code>memory</code> \u200b\u5f8c\u200b\u7aef\u200b\u5c07\u5bc6\u200b\u9470\u200b\u5b58\u5132\u200b\u5728\u200b\u5167\u5b58\u200b\u4e2d\u200b\u3002\u200b\u7a0b\u5e8f\u200b\u9000\u51fa\u200b\u5f8c\u200b\uff0c\u200b\u5bc6\u9470\u5c07\u200b\u7acb\u5373\u200b\u522a\u9664\u200b\u3002</p> <p>\ud83d\udea8 \u200b\u5371\u96aa\u200b\uff1a\u200b\u50c5\u4f9b\u200b\u6e2c\u8a66\u200b\u4e4b\u7528\u200b\u3002 <code>memory</code> \u200b\u5f8c\u200b\u7aef\u200b\u4e0d\u200b\u63a8\u85a6\u200b\u7528\u200b\u65bc\u200b\u751f\u7522\u200b\u74b0\u5883\u200b\u3002\u200b\u4f7f\u7528\u200b\u98a8\u96aa\u200b\u81ea\u8ca0\u200b\uff01</p>"},{"location":"protocol/multsign/","title":"\u591a\u7c3d","text":"<p>\u200b\u4e86\u89e3\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200b\u5bc6\u9470\u74b0\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b\u751f\u6210\u200b\u3001\u200b\u7c3d\u7f72\u200b\u548c\u200b\u5ee3\u64ad\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b\u8cec\u6236\u200b\u662f\u200b\u4e00\u7a2e\u200b\u5e36\u200b\u6709\u200b\u7279\u6b8a\u200b\u5bc6\u200b\u9470\u200b\u7684\u200b Dst \u200b\u8cec\u6236\u200b\uff0c\u200b\u9700\u8981\u200b\u591a\u500b\u200b\u7c3d\u540d\u200b\u624d\u80fd\u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\u3002 \u200b\u9019\u5c0d\u200b\u65bc\u200b\u63d0\u9ad8\u200b\u5e33\u6236\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u6216\u200b\u9700\u8981\u200b\u591a\u65b9\u200b\u540c\u610f\u200b\u624d\u80fd\u200b\u9032\u884c\u200b\u4ea4\u6613\u200b\u5f88\u200b\u6709\u7528\u200b\u3002 \u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u6307\u5b9a\u200b\u4ee5\u4e0b\u200b\u5167\u5bb9\u4f86\u200b\u5275\u5efa\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b\u5e33\u6236\u200b\uff1a</p> <ul> <li>\u200b\u6240\u9700\u200b\u7c3d\u540d\u200b\u7684\u200b\u95be\u503c\u200b\u6578\u91cf\u200b</li> <li>\u200b\u53c3\u8207\u200b\u7c3d\u540d\u200b\u7684\u200b\u516c\u9470\u200b</li> </ul> <p>\u200b\u8981\u200b\u4f7f\u7528\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b\u8cec\u6236\u200b\u7c3d\u540d\u200b\uff0c\u200b\u4ea4\u6613\u200b\u5fc5\u9808\u200b\u7531\u200b\u70ba\u200b\u8a72\u200b\u8cec\u6236\u200b\u6307\u5b9a\u200b\u7684\u200b\u4e0d\u540c\u200b\u5bc6\u9470\u200b\u55ae\u7368\u200b\u7c3d\u540d\u200b\u3002\u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u7c3d\u540d\u5c07\u200b\u88ab\u200b\u7d44\u200b\u5408\u6210\u200b\u4e00\u500b\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b\uff0c\u200b\u53ef\u7528\u200b\u65bc\u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\u3002\u200b\u5982\u679c\u200b\u5b58\u5728\u200b\u7684\u200b\u7c3d\u540d\u200b\u6578\u91cf\u200b\u5c11\u200b\u65bc\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u95be\u503c\u200b\u6578\u91cf\u200b\uff0c\u200b\u5247\u200b\u7531\u6b64\u200b\u7522\u751f\u200b\u7684\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b\u88ab\u200b\u8996\u70ba\u200b\u7121\u6548\u200b\u3002</p>"},{"location":"protocol/multsign/#_1","title":"\u751f\u6210\u200b\u591a\u200b\u7c3d\u5bc6\u200b\u9470\u200b\u5c0d","text":"<pre><code>stcd keys add --multisig=name1,name2,name3[...] --multisig-threshold=K new_key_name\n</code></pre> <p><code>K</code> \u200b\u662f\u200b\u5fc5\u9808\u200b\u7c3d\u7f72\u200b\u5e36\u200b\u6709\u200b\u516c\u9470\u200b\u5730\u5740\u200b\u4f5c\u70ba\u200b\u7c3d\u540d\u8005\u200b\u7684\u200b\u4ea4\u6613\u200b\u7684\u200b\u6700\u5c0f\u200b\u79c1\u9470\u200b\u6578\u91cf\u200b\u3002</p> <p><code>--multisig</code> \u200b\u6a19\u8a8c\u200b\u5fc5\u9808\u200b\u5305\u542b\u200b\u516c\u9470\u200b\u7684\u200b\u540d\u7a31\u200b\uff0c\u200b\u9019\u4e9b\u200b\u516c\u9470\u200b\u5c07\u7d44\u200b\u5408\u6210\u200b\u4e00\u500b\u200b\u516c\u9470\u200b\uff0c\u200b\u8a72\u516c\u200b\u9470\u5c07\u200b\u5728\u200b\u672c\u5730\u200b\u6578\u64da\u5eab\u200b\u4e2d\u200b\u751f\u6210\u200b\u4e26\u5b58\u200b\u5132\u70ba\u200b <code>new_key_name</code>\u3002</p> <p>\u200b\u901a\u904e\u200b <code>--multisig</code> \u200b\u63d0\u4f9b\u200b\u7684\u200b\u6240\u6709\u200b\u540d\u7a31\u200b\u5fc5\u9808\u200b\u5df2\u7d93\u200b\u5b58\u5728\u200b\u65bc\u200b\u672c\u5730\u200b\u6578\u64da\u5eab\u200b\u4e2d\u200b\u3002</p> <p>\u200b\u9664\u975e\u200b\u8a2d\u7f6e\u200b\u4e86\u200b\u6a19\u8a8c\u200b <code>--nosort</code>\uff0c\u200b\u5426\u5247\u200b\u5728\u200b\u547d\u4ee4\u884c\u200b\u4e0a\u200b\u63d0\u4f9b\u200b\u9375\u200b\u7684\u200b\u9806\u5e8f\u200b\u7121\u95dc\u200b\u7dca\u8981\u200b\uff0c\u200b\u5373\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u751f\u6210\u200b\u5169\u500b\u200b\u76f8\u540c\u200b\u7684\u200b\u9375\u200b\uff1a</p> <pre><code>stcd keys add --multisig=p1,p2,p3 --multisig-threshold=2 multisig_address\nstcd keys add --multisig=p2,p3,p1 --multisig-threshold=2 multisig_address\n</code></pre> <p>\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b\u5730\u5740\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5373\u6642\u200b\u751f\u6210\u200b\u4e26\u901a\u904e\u200b\u547d\u4ee4\u200b\u6253\u5370\u200b\uff1a</p> <pre><code>stcd keys show --multisig-threshold=K name1 name2 name3 [...]\n</code></pre>"},{"location":"protocol/multsign/#_2","title":"\u7c3d\u540d\u200b\u4ea4\u6613","text":""},{"location":"protocol/multsign/#step-1","title":"Step 1: \u200b\u5275\u5efa\u591a\u200b\u7c3d\u5bc6\u200b\u9470","text":"<p>\u200b\u5047\u8a2d\u200b\u60a8\u200b\u6709\u200b <code>test1</code> \u200b\u548c\u200b <code>test2</code> \u200b\u60f3\u8981\u200b\u4f7f\u7528\u200b <code>test3</code> \u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b\u5e33\u6236\u200b\u3002</p> <p>\u200b\u9996\u5148\u200b\u67e5\u770b\u200b <code>test3</code> \u200b\u7684\u200b\u516c\u9470\u200b\u3002</p> <pre><code>stcd.exe keys show test3 --output json\n</code></pre> <p>\u200b\u4ee5\u4e0b\u200b\u4e3a\u200b<code>test3</code>\u200b\u7684\u200b\u8d26\u6237\u200b\u4fe1\u606f\u200b</p> <pre><code>{\n\"name\":\"test3\",\n\"type\":\"local\",\n\"address\":\"dst1xe6xf2t9krt0694alapp9w095g5elyqj6tchpv\",\n\"pubkey\":\"{\\\"@type\\\":\\\"/ethermint.crypto.v1.ethsecp256k1.PubKey\\\",\\\"key\\\":\\\"A+WM1PhFFV6XSI4xEdb6/l19TjUoGp4DW7m8VJk5hxbV\\\"}\"\n}\n</code></pre> <p>\u200b\u6ce8\u610f\u200b,\u200b\u516c\u94a5\u200b\u7684\u200b\u5185\u5bb9\u200b\u4f4d\u4e8e\u200bpubkey\u200b\u5c5e\u6027\u200b\u503c\u5185\u200b,\u200b\u4f8b\u5982\u200b:</p> <pre><code>\"{\\\"@type\\\":\\\"/ethermint.crypto.v1.ethsecp256k1.PubKey\\\",\\\"key\\\":\\\"A+WM1PhFFV6XSI4xEdb6/l19TjUoGp4DW7m8VJk5hxbV\\\"}\"\n</code></pre> <p>\u200b\u5c07\u200b <code>test3</code> \u200b\u7684\u200b\u516c\u9470\u200b\u590d\u5236\u200b\u4e0b\u6765\u200b,\u200b\u7136\u540e\u200b\u5c0e\u5165\u200b\u5230\u200b\u5bc6\u200b\u9470\u74b0\u200b\u3002</p> <pre><code>stcd keys add \\\n    test3 \\\n    --pubkey \"{\\\"@type\\\":\\\"/ethermint.crypto.v1.ethsecp256k1.PubKey\\\",\\\"key\\\":\\\"A+WM1PhFFV6XSI4xEdb6/l19TjUoGp4DW7m8VJk5hxbV\\\"}\"\n</code></pre> <p>\u200b\u751f\u6210\u200b\u5177\u6709\u200b 2/3 \u200b\u95be\u503c\u200b\u7684\u200b\u591a\u91cd\u200b\u7c3d\u540d\u5bc6\u200b\u9470\u200b multi\u3002</p> <pre><code>stcd keys add \\\n    multi \\\n    --multisig=test1,test2,test3 \\\n    --multisig-threshold=2\n</code></pre> <p>\u200b\u4f60\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\u5b83\u200b\u7684\u200b\u5730\u5740\u200b\u548c\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\uff1a</p> <pre><code>stcd keys show multi\n\n- address: dst18289xqh4ej6p7sucd6car6tch87h9vket6myxu\n  name: multi\n  pubkey: '{\"@type\":\"/cosmos.crypto.multisig.LegacyAminoPubKey\",\"threshold\":2,\"public_keys\":[{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"A+WM1PhFFV6XSI4xEdb6/l19TjUoGp4DW7m8VJk5hxbV\"},{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"A3uJG64OFWiIlhjBQqIGxa/pioP10jX0gmU3Cfoet+OT\"},{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"A/wAMQvrs34IaRK6wSuRdBPJ9Ju99Csys5P3vjDGqx7b\"}]}'\n  type: multi\n</code></pre> <p>\u200b\u8b93\u200b\u6211\u5011\u200b\u5411\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b\u9322\u200b\u5305\u200b\u8f6c\u79fb\u200b 10 \u200b\u500b\u200b DST\uff1a</p> <pre><code>stcd tx bank send \\\n    test1 \\\n    dst18289xqh4ej6p7sucd6car6tch87h9vket6myxu \\\n    10000000000000000000dst \\\n    --chain-id=daodst_7777-1 \\\n    --gas=auto \\\n    --broadcast-mode=block\n</code></pre>"},{"location":"protocol/multsign/#step-2","title":"Step 2: \u200b\u5275\u5efa\u591a\u7c3d\u200b\u4ea4\u6613","text":"<p>\u200b\u6211\u5011\u200b\u60f3\u200b\u5f9e\u200b\u6211\u5011\u200b\u7684\u200b\u591a\u91cd\u200b\u7c3d\u540d\u200b\u8cec\u6236\u200b\u767c\u9001\u200b 5 \u200b\u500b\u200b DST \u200b\u5230\u200b <code>dst1xe6xf2t9krt0694alapp9w095g5elyqj6tchpv</code>\u3002</p> <pre><code>stcd tx bank send \\\n    multi \\\n    dst1xe6xf2t9krt0694alapp9w095g5elyqj6tchpv \\\n    5000000000000000000dst \\\n    --gas=\"\" \\\n    --chain-id=daodst_7777-1 \\\n    --generate-only &gt; unsignedTx.json\n</code></pre> <p>\u200b\u6587\u4ef6\u200b <code>unsignedTx.json</code> \u200b\u5305\u542b\u200b\u4ee5\u200b JSON \u200b\u7de8\u78bc\u200b\u7684\u200b\u672a\u200b\u7c3d\u540d\u200b\u4ea4\u6613\u200b\u3002</p> <pre><code>{\n    \"body\": {\n        \"messages\": [\n            {\n                \"@type\": \"/cosmos.bank.v1beta1.MsgSend\",\n                \"from_address\": \"dst18289xqh4ej6p7sucd6car6tch87h9vket6myxu\",\n                \"to_address\": \"dst1xe6xf2t9krt0694alapp9w095g5elyqj6tchpv\",\n                \"amount\": [\n                    {\n                        \"denom\": \"dst\",\n                        \"amount\": \"5000000000000000000\"\n                    }\n                ]\n            }\n        ],\n        \"memo\": \"\",\n        \"timeout_height\": \"0\",\n        \"extension_options\": [\n\n        ],\n        \"non_critical_extension_options\": [\n\n        ]\n    },\n    \"auth_info\": {\n        \"signer_infos\": [\n\n        ],\n        \"fee\": {\n            \"amount\": [\n                {\n                    \"denom\": \"dst\",\n                    \"amount\": \"1000000000000000\"\n                }\n            ],\n            \"gas_limit\": \"200000\",\n            \"payer\": \"\",\n            \"granter\": \"\"\n        },\n        \"tip\": null\n    },\n    \"signatures\": [\n\n    ]\n}\n</code></pre>"},{"location":"protocol/multsign/#step-3","title":"Step 3: \u200b\u55ae\u7368\u200b\u7c3d\u540d","text":"<p>\u200b\u4f7f\u7528\u200b <code>test1</code> \u200b\u548c\u200b <code>test2</code> \u200b\u7c3d\u540d\u200b\u4e26\u5275\u200b\u5efa\u500b\u200b\u4eba\u200b\u7c3d\u540d\u200b\u3002</p> <pre><code>stcd tx sign \\\n    unsignedTx.json \\\n    --multisig=dst18289xqh4ej6p7sucd6car6tch87h9vket6myxu \\\n    --from=test1 \\\n    --output-document=test1sig.json \\\n    --chain-id=daodst_7777-1\n</code></pre> <pre><code>stcd tx sign \\\n    unsignedTx.json \\\n    --multisig=dst18289xqh4ej6p7sucd6car6tch87h9vket6myxu \\\n    --from=test2 \\\n    --output-document=test2sig.json \\\n    --chain-id=daodst_7777-1\n</code></pre>"},{"location":"protocol/multsign/#step-4","title":"Step 4: \u200b\u5275\u5efa\u200b\u591a\u91cd\u200b\u7c3d\u540d","text":"<p>\u200b\u7d50\u5408\u200b\u7c3d\u540d\u200b\u4f86\u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\u3002</p> <pre><code>stcd tx multisign \\\n    unsignedTx.json \\\n    multi \\\n    test1sig.json test2sig.json \\\n    --output-document=signedTx.json \\\n    --chain-id=daodst_7777-1\n</code></pre> <p>TX \u200b\u73fe\u5df2\u200b\u7c3d\u7f72\u200b\uff1a</p> <pre><code>{\n    \"body\": {\n        \"messages\": [\n            {\n                \"@type\": \"/cosmos.bank.v1beta1.MsgSend\",\n                \"from_address\": \"dst18289xqh4ej6p7sucd6car6tch87h9vket6myxu\",\n                \"to_address\": \"dst1xe6xf2t9krt0694alapp9w095g5elyqj6tchpv\",\n                \"amount\": [\n                    {\n                        \"denom\": \"dst\",\n                        \"amount\": \"5000000000000000000\"\n                    }\n                ]\n            }\n        ],\n        \"memo\": \"\",\n        \"timeout_height\": \"0\",\n        \"extension_options\": [\n\n        ],\n        \"non_critical_extension_options\": [\n\n        ]\n    },\n    \"auth_info\": {\n        \"signer_infos\": [\n            {\n                \"public_key\": {\n                    \"@type\": \"/cosmos.crypto.multisig.LegacyAminoPubKey\",\n                    \"threshold\": 2,\n                    \"public_keys\": [\n                        {\n                            \"@type\": \"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\n                            \"key\": \"A+WM1PhFFV6XSI4xEdb6/l19TjUoGp4DW7m8VJk5hxbV\"\n                        },\n                        {\n                            \"@type\": \"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\n                            \"key\": \"A3uJG64OFWiIlhjBQqIGxa/pioP10jX0gmU3Cfoet+OT\"\n                        },\n                        {\n                            \"@type\": \"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\n                            \"key\": \"A/wAMQvrs34IaRK6wSuRdBPJ9Ju99Csys5P3vjDGqx7b\"\n                        }\n                    ]\n                },\n                \"mode_info\": {\n                    \"multi\": {\n                        \"bitarray\": {\n                            \"extra_bits_stored\": 3,\n                            \"elems\": \"YA==\"\n                        },\n                        \"mode_infos\": [\n                            {\n                                \"single\": {\n                                    \"mode\": \"SIGN_MODE_LEGACY_AMINO_JSON\"\n                                }\n                            },\n                            {\n                                \"single\": {\n                                    \"mode\": \"SIGN_MODE_LEGACY_AMINO_JSON\"\n                                }\n                            }\n                        ]\n                    }\n                },\n                \"sequence\": \"1\"\n            }\n        ],\n        \"fee\": {\n            \"amount\": [\n                {\n                    \"denom\": \"dst\",\n                    \"amount\": \"1000000000000000\"\n                }\n            ],\n            \"gas_limit\": \"200000\",\n            \"payer\": \"\",\n            \"granter\": \"\"\n        },\n        \"tip\": null\n    },\n    \"signatures\": [\n        \"CkFYWWA1mhNbp68GellgJZYMFzQTYi/BkuK3ccinQlDj8xF/rkl3HjqmKQ4D36XCSCFg3tPBsoBMxtLPfzyNeJADAApBcbAT7BsSYLZUh5502sun5FHPvQ/aMf5ziWUp2KoZnOZIhNbtgfL4IREoZv2PrGhy9RaIAOXBeSQPeHr6ANUKGgA=\"\n    ]\n}\n</code></pre>"},{"location":"protocol/multsign/#step-5","title":"Step 5: \u200b\u5ee3\u64ad\u200b\u4ea4\u6613","text":"<pre><code>stcd tx broadcast signedTx.json \\\n    --chain-id=daodst_7777-1 \\\n    --broadcast-mode=block\n</code></pre>"},{"location":"protocol/pending/","title":"\u7b49\u5f85\u200b\u968a\u5217","text":"<p>\u200b\u7576\u4e00\u7b46\u200b\u4ea4\u6613\u200b\u88ab\u200b\u63d0\u4ea4\u200b\u5230\u200b\u4ee5\u592a\u200b\u574a\u200b\u7db2\u7d61\u6642\u200b\uff0c\u200b\u5b83\u200b\u9996\u5148\u200b\u9032\u5165\u200b\u5f85\u200b\u8655\u7406\u200b\u72c0\u614b\u200b\uff0c\u200b\u7b49\u5f85\u200b\u7bc0\u9ede\u200b\u57f7\u884c\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u4ea4\u6613\u200b\u4e2d\u200b\u7684\u200b gas \u200b\u50f9\u683c\u200b\u8a2d\u7f6e\u200b\u5f97\u200b\u975e\u5e38\u4f4e\u200b\u4e26\u4e14\u200b\u7bc0\u9ede\u200b\u6b63\u5fd9\u200b\u65bc\u200b\u8655\u7406\u200b\u5176\u4ed6\u200b\u66f4\u9ad8\u200b gas \u200b\u50f9\u683c\u200b\u7684\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5247\u200b\u4ea4\u6613\u200b\u53ef\u80fd\u200b\u6703\u200b\u5728\u200b\u66f4\u9577\u200b\u7684\u200b\u6642\u9593\u200b\u5167\u8655\u200b\u65bc\u200b\u5f85\u200b\u8655\u7406\u200b\u72c0\u614b\u200b\u3002</p> <p>\u200b\u5728\u200b\u639b\u8d77\u200b\u72c0\u614b\u200b\u671f\u9593\u200b\uff0c\u200b\u5141\u8a31\u200b\u4ea4\u6613\u200b\u767c\u8d77\u8005\u200b\u96a8\u6642\u200b\u66f4\u6539\u200b\u4ea4\u6613\u200b\u5b57\u200b\u6bb5\u200b\u3002</p> <p>\u200b\u4ed6\u5011\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u767c\u9001\u200b\u5177\u6709\u200b\u76f8\u540c\u200b\u96a8\u6a5f\u6578\u200b\u7684\u200b\u53e6\u200b\u4e00\u7b46\u200b\u4ea4\u6613\u200b\u4f86\u200b\u505a\u5230\u200b\u9019\u4e00\u9ede\u200b\u3002</p>"},{"location":"protocol/pending/#_1","title":"\u5148\u6c7a\u200b\u689d\u4ef6\u200b\u95b1\u8b80","text":"<ul> <li>Cosmos SDK Mempool</li> </ul>"},{"location":"protocol/pending/#daodst-ethereum","title":"Daodst \u200b\u5c0d\u200b\u6bd4\u200b Ethereum","text":"<p>\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u200b\u4e2d\u200b\uff0c\u200b\u5f85\u200b\u8655\u7406\u200b\u7684\u200b\u5340\u584a\u200b\u662f\u200b\u5728\u200b\u7926\u5de5\u200b\u6392\u968a\u200b\u7b49\u5f85\u200b\u751f\u7522\u6642\u200b\u751f\u6210\u200b\u7684\u200b\u3002</p> <p>\u200b\u9019\u4e9b\u200b\u672a\u200b\u6c7a\u5340\u200b\u584a\u200b\u5305\u62ec\u200b\u7926\u5de5\u200b\u6839\u64da\u200b\u652f\u4ed8\u200b\u7684\u200b\u6700\u9ad8\u200b gas \u200b\u734e\u52f5\u200b\u6311\u9078\u51fa\u200b\u7684\u200b\u672a\u6c7a\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u9019\u7a2e\u200b\u6a5f\u5236\u200b\u7684\u200b\u5b58\u5728\u200b\u662f\u200b\u56e0\u70ba\u200b\u5728\u200b\u4ee5\u592a\u200b\u574a\u200b\u7db2\u7d61\u200b\u4e0a\u200b\u4e0d\u200b\u53ef\u80fd\u200b\u5be6\u73fe\u200b\u5340\u584a\u200b\u6700\u200b\u7d42\u6027\u200b\u3002</p> <p>\u200b\u584a\u200b\u4ee5\u200b\u6982\u7387\u200b\u78ba\u200b\u5b9a\u6027\u200b\u63d0\u4ea4\u200b\uff0c\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u96a8\u8457\u200b\u6642\u9593\u200b\uff08\u200b\u548c\u200b\u584a\u200b\uff09\u200b\u7684\u200b\u6d41\u901d\u200b\uff0c\u200b\u4ea4\u6613\u200b\u548c\u200b\u584a\u200b\u8b8a\u5f97\u200b\u4e0d\u592a\u53ef\u80fd\u200b\u88ab\u200b\u9084\u539f\u200b\u3002</p> <p>Daodst \u200b\u5728\u200b\u9019\u200b\u65b9\u9762\u200b\u7684\u200b\u8a2d\u8a08\u200b\u5b8c\u5168\u200b\u4e0d\u540c\u200b\uff0c\u200b\u56e0\u70ba\u200b\u6c92\u6709\u200b\u201c\u200b\u5f85\u5b9a\u200b\u72c0\u614b\u200b\u201d\u200b\u7684\u200b\u6982\u5ff5\u200b\u3002</p> <p>Daodst \u200b\u4f7f\u7528\u200b Tendermint Core BFT \u200b\u5171\u8b58\u200b\uff0c\u200b\u70ba\u200b\u4ea4\u6613\u200b\u63d0\u4f9b\u200b\u5373\u200b\u6642\u7d42\u200b\u7d50\u6027\u200b\u3002</p> <p>\u200b\u51fa\u200b\u65bc\u200b\u9019\u500b\u200b\u539f\u56e0\u200b\uff0cEthermint \u200b\u4e0d\u200b\u9700\u8981\u200b\u639b\u8d77\u200b\u72c0\u614b\u200b\u6a5f\u5236\u200b\uff0c\u200b\u56e0\u70ba\u200b\u6240\u6709\u200b\uff08\u200b\u5982\u679c\u200b\u4e0d\u662f\u200b\u5927\u591a\u200b\u6578\u200b\uff09\u200b\u4ea4\u6613\u200b\u90fd\u5c07\u200b\u63d0\u4ea4\u200b\u5230\u200b\u4e0b\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\uff08Cosmos \u200b\u93c8\u4e0a\u200b\u7684\u200b\u5e73\u5747\u200b\u5340\u584a\u200b\u6642\u9593\u200b\u7d04\u200b\u70ba\u200b 8 \u200b\u79d2\u200b\uff09\u3002</p> <p>\u200b\u7136\u800c\u200b\uff0c\u200b\u9019\u6703\u200b\u5c0e\u81f4\u200b\u4e00\u4e9b\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b Web3 \u200b\u517c\u5bb9\u200b\u7684\u200b\u67e5\u8a62\u200b\u51fa\u73fe\u200b\u554f\u984c\u200b\uff0c\u200b\u9019\u4e9b\u200b\u67e5\u8a62\u200b\u53ef\u80fd\u200b\u6703\u200b\u9032\u5165\u200b\u639b\u8d77\u200b\u72c0\u614b\u200b\u3002</p> <p>\u200b\u8207\u200b\u4ee5\u592a\u200b\u574a\u200b\u7684\u200b\u53e6\u200b\u4e00\u500b\u200b\u986f\u8457\u5340\u200b\u5225\u200b\u662f\u200b\uff0c\u200b\u5340\u584a\u200b\u662f\u200b\u7531\u9a57\u200b\u8b49\u8005\u200b\u6216\u5340\u200b\u584a\u200b\u751f\u7522\u8005\u200b\u751f\u6210\u200b\u7684\u200b\uff0c\u200b\u4ed6\u5011\u200b\u4ee5\u200b\u5148\u9032\u200b\u5148\u51fa\u200b (FIFO) \u200b\u7684\u200b\u65b9\u5f0f\u200b\u5c07\u200b\u672c\u5730\u200b\u5167\u5b58\u6c60\u200b\u4e2d\u200b\u7684\u200b\u4ea4\u6613\u200b\u5305\u542b\u200b\u5230\u5340\u200b\u584a\u200b\u4e2d\u200b\u3002</p> <p>Daodst \u200b\u4e0a\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e0d\u80fd\u200b\u5f9e\u200b Tendermint \u200b\u7bc0\u9ede\u200b mempool \u200b\u4e2d\u200b\u6392\u5e8f\u200b\u6216\u200b\u6311\u9078\u51fa\u200b\u4f86\u200b\u3002</p>"},{"location":"protocol/pending/#pending","title":"Pending \u200b\u72c0\u614b\u200b\u968a\u5217","text":"<p>Daodst \u200b\u5c07\u9032\u884c\u200b\u67e5\u8a62\u200b\uff0c\u200b\u4ee5\u200b\u8aaa\u200b\u660e\u7bc0\u9ede\u200b\u4ea4\u6613\u200b\u5167\u5b58\u6c60\u200b\u4e2d\u200b\u5b58\u5728\u200b\u7684\u200b\u4efb\u4f55\u200b\u672a\u200b\u78ba\u8a8d\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u9032\u884c\u200b\u7684\u200b\u639b\u8d77\u200b\u72c0\u614b\u200b\u67e5\u8a62\u200b\u5c07\u662f\u200b\u4e3b\u89c0\u200b\u7684\u200b\uff0c\u200b\u4e26\u4e14\u200b\u5c07\u5728\u200b\u76ee\u6a19\u200b\u7bc0\u9ede\u200b\u7684\u200b\u5167\u5b58\u200b\u6c60\u4e0a\u200b\u9032\u884c\u200b\u67e5\u8a62\u200b\u3002</p> <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5c0d\u200b\u65bc\u200b\u5169\u500b\u200b\u4e0d\u540c\u200b\u7bc0\u9ede\u200b\u7684\u200b\u76f8\u540c\u200b\u67e5\u8a62\u200b\uff0c\u200b\u639b\u8d77\u200b\u72c0\u614b\u5c07\u200b\u4e0d\u200b\u76f8\u540c\u200b\u3002</p> <p>** JSON-RPC Calls on Pending Transactions **</p> <ul> <li><code>eth_getBalance</code></li> <li><code>eth_getTransactionCount</code></li> <li><code>eth_getBlockTransactionCountByNumber</code></li> <li><code>eth_getBlockByNumber</code></li> <li><code>eth_getTransactionByHash</code></li> <li><code>eth_getTransactionByBlockNumberAndIndex</code></li> <li><code>eth_sendTransaction</code></li> </ul>"},{"location":"protocol/state-migrate/","title":"\u72c0\u614b\u200b\u5c0e\u5165\u200b\u5c0e\u51fa","text":"<p>Daodst \u200b\u53ef\u4ee5\u200b\u5c07\u6574\u200b\u500b\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u72c0\u614b\u200b\u8f49\u5132\u5230\u200b\u4e00\u500b\u200b JSON \u200b\u6587\u4ef6\u200b\u4e2d\u200b\u3002 \u200b\u9664\u4e86\u200b \u200b\u5347\u7d1a\u200b\uff0c\u200b\u9019\u5c0d\u200b\u65bc\u200b\u5728\u200b\u6307\u5b9a\u200b\u9ad8\u5ea6\u200b\u624b\u52d5\u200b\u5206\u6790\u200b\u72c0\u614b\u200b\u5f88\u200b\u6709\u7528\u200b\u3002</p>"},{"location":"protocol/state-migrate/#_1","title":"\u5c0e\u51fa\u200b\u72c0\u614b","text":"<p>\u200b\u5c0e\u51fa\u200b\u72c0\u614b\u200b\uff1a</p> <pre><code>stcd export &gt; new_genesis.json\n</code></pre> <p>\u200b\u60a8\u9084\u200b\u53ef\u4ee5\u200b\u5f9e\u200b\u7279\u5b9a\u200b\u9ad8\u5ea6\u200b\u5c0e\u51fa\u200b\u72c0\u614b\u200b\uff08\u200b\u5728\u200b\u8655\u7406\u200b\u8a72\u200b\u9ad8\u5ea6\u200b\u7684\u200b\u584a\u200b\u7d50\u675f\u200b\u6642\u200b\uff09\uff1a</p> <pre><code>stcd export --height [height] &gt; new_genesis.json\n</code></pre> <p>\u200b\u5982\u679c\u200b\u60a8\u200b\u8a08\u5283\u200b\u5f9e\u5c0e\u51fa\u200b\u72c0\u614b\u200b\u958b\u59cb\u200b\u4e00\u500b\u200b\u9ad8\u5ea6\u200b\u70ba\u200b 0\uff08\u200b\u5373\u200b\u5275\u4e16\u7d00\u200b\uff09\u200b\u7684\u200b\u65b0\u200b\u7db2\u7d61\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b <code>--for-zero-height</code> \u200b\u6a19\u8a8c\u200b\u5c0e\u51fa\u200b\uff1a</p> <pre><code>stcd export --height [height] --for-zero-height &gt; new_genesis.json\n</code></pre>"},{"location":"protocol/state-migrate/#_2","title":"\u624b\u52d5\u200b\u9077\u79fb\u200b\u72c0\u614b","text":"<p>\u200b\u5982\u679c\u200b\u4f60\u200b\u60f3\u200b\u624b\u52d5\u200b\u9077\u79fb\u200b\u72c0\u614b\u200b\uff0c\u200b\u4f8b\u5982\u200b\u7528\u200b\u65bc\u200b\u672c\u5730\u200b\u6e2c\u8a66\u200b\u76ee\u7684\u200b\u3002 \u200b\u8acb\u200b\u6ce8\u610f\u200b\uff0c\u200b\u5c0d\u200b\u65bc\u200b\u5e38\u898f\u93c8\u200b\u5347\u7d1a\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u624b\u52d5\u200b\u72c0\u614b\u200b\u9077\u79fb\u200b\u3002</p> <p>\u200b\u5c07\u72c0\u614b\u200b\u5c0e\u51fa\u200b\u5230\u200b json \u200b\u6587\u4ef6\u200b\u5f8c\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5c07\u820a\u200b\u7684\u200b <code>genesis.json</code> \u200b\u66ff\u63db\u200b\u70ba\u200b <code>new_genesis.json</code></p> <pre><code>cp -f genesis.json new_genesis.json\nmv new_genesis.json genesis.json\n</code></pre> <p>\u200b\u6b64\u6642\u200b\uff0c\u200b\u60a8\u200b\u53ef\u80fd\u200b\u60f3\u8981\u200b\u904b\u884c\u200b\u4e00\u500b\u200b\u8173\u672c\u4f86\u200b\u5c07\u5c0e\u51fa\u200b\u7684\u200b\u5275\u4e16\u7d00\u200b\u66f4\u65b0\u200b\u70ba\u200b\u8207\u200b\u60a8\u200b\u7684\u200b\u65b0\u200b\u7248\u672c\u200b\u517c\u5bb9\u200b\u7684\u200b\u5275\u4e16\u72c0\u614b\u200b\u3002</p> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>migrate</code> \u200b\u547d\u4ee4\u200b\u5f9e\u200b\u7d66\u5b9a\u200b\u7248\u672c\u200b\u9077\u79fb\u200b\u5230\u200b\u4e0b\u200b\u4e00\u500b\u200b\u7248\u672c\u200b\uff08\u200b\u4f8b\u5982\u200b\uff1a<code>v0.X.X</code> \u200b\u5230\u200b <code>v1.X.X</code>\uff09\uff1a</p> <pre><code>stcd migrate TARGET_VERSION GENESIS_FILE --chain-id=&lt;new_chain_id&gt; --genesis-time=&lt;yyyy-mm-ddThh:mm:ssZ&gt;\n</code></pre>"},{"location":"protocol/transfer/","title":"\u4ea4\u6613","text":"<p>\u200b\u4ea4\u6613\u200b\u662f\u200b\u6307\u200b\u7531\u200b\u8cec\u6236\u200b\u767c\u8d77\u200b\u7684\u200b\u6539\u8b8a\u5340\u200b\u584a\u200b\u93c8\u200b\u72c0\u614b\u200b\u7684\u200b\u52d5\u4f5c\u200b\u3002\u200b\u70ba\u200b\u4e86\u200b\u6709\u6548\u200b\u5730\u200b\u57f7\u884c\u200b\u72c0\u614b\u200b\u66f4\u6539\u200b\uff0c\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u90fd\u200b\u6703\u5ee3\u200b\u64ad\u5230\u200b\u6574\u500b\u200b\u7db2\u7d61\u200b\u3002</p> <p>\u200b\u4efb\u4f55\u200b\u7bc0\u9ede\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u5ee3\u64ad\u200b\u8acb\u6c42\u200b\u5728\u200b\u5340\u584a\u200b\u93c8\u72c0\u614b\u200b\u6a5f\u4e0a\u200b\u57f7\u884c\u200b\u7684\u200b\u4ea4\u6613\u200b\uff1b\u200b\u767c\u751f\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u5f8c\u200b\uff0c\u200b\u9a57\u8b49\u5668\u200b\u5c07\u9a57\u8b49\u200b\u3001\u200b\u57f7\u884c\u200b\u4ea4\u6613\u200b\u4e26\u5c07\u200b\u7522\u751f\u200b\u7684\u200b\u72c0\u614b\u200b\u66f4\u6539\u200b\u50b3\u200b\u64ad\u5230\u200b\u7db2\u7d61\u200b\u7684\u200b\u5176\u9918\u200b\u90e8\u5206\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u8655\u7406\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\uff0c\u200b\u7db2\u7d61\u200b\u4e0a\u200b\u7684\u200b\u8a08\u7b97\u200b\u8cc7\u6e90\u200b\u90fd\u200b\u6703\u200b\u88ab\u200b\u6d88\u8017\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c<code>gas</code>\u200b\u7684\u200b\u6982\u5ff5\u200b\u662f\u200b\u4f5c\u70ba\u9a57\u200b\u8b49\u8005\u200b\u8655\u7406\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200b\u8a08\u7b97\u200b\u7684\u200b\u53c3\u8003\u200b\u800c\u200b\u51fa\u73fe\u200b\u7684\u200b\u3002</p> <p>\u200b\u7528\u6236\u200b\u5fc5\u9808\u200b\u70ba\u200b\u6b64\u8a08\u7b97\u200b\u4ed8\u8cbb\u200b\uff0c\u200b\u6240\u6709\u200b\u4ea4\u6613\u200b\u90fd\u200b\u9700\u8981\u200b\u76f8\u95dc\u200b\u8cbb\u7528\u200b\u3002\u200b\u8a72\u8cbb\u7528\u200b\u662f\u200b\u6839\u64da\u200b\u57f7\u884c\u200b\u4ea4\u6613\u6240\u200b\u9700\u200b\u7684\u200b gas \u200b\u548c\u200b gas \u200b\u50f9\u683c\u200b\u8a08\u7b97\u200b\u7684\u200b\u3002</p> <p>\u200b\u6b64\u5916\u200b\uff0c\u200b\u4ea4\u6613\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b\u767c\u9001\u65b9\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\u9032\u884c\u200b\u7c3d\u540d\u200b\u3002\u200b\u9019\u8b49\u660e\u200b\u4ea4\u6613\u200b\u53ea\u80fd\u200b\u4f86\u200b\u81ea\u767c\u4ef6\u200b\u4eba\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u6b3a\u8a50\u6027\u200b\u767c\u9001\u200b\u3002</p> <p>\u200b\u7c21\u200b\u800c\u8a00\u200b\u4e4b\u200b\uff0c\u200b\u5c07\u7c3d\u200b\u540d\u200b\u4ea4\u6613\u200b\u63d0\u4ea4\u200b\u5230\u200b\u7db2\u7d61\u200b\u5f8c\u200b\u7684\u200b\u4ea4\u6613\u200b\u751f\u547d\u200b\u9031\u671f\u200b\u5982\u4e0b\u200b\uff1a</p> <ul> <li>\u200b\u4ea4\u6613\u200b\u54c8\u5e0c\u200b\u662f\u200b\u52a0\u5bc6\u200b\u751f\u6210\u200b\u7684\u200b\u3002</li> <li>\u200b\u8a72\u200b\u4ea4\u6613\u200b\u88ab\u5ee3\u200b\u64ad\u5230\u200b\u7db2\u7d61\u4e26\u200b\u6dfb\u52a0\u200b\u5230\u200b\u7531\u200b\u6240\u6709\u200b\u5176\u4ed6\u200b\u672a\u6c7a\u200b\u7db2\u7d61\u200b\u4ea4\u6613\u200b\u7d44\u6210\u200b\u7684\u200b\u4ea4\u6613\u200b\u6c60\u4e2d\u200b\u3002</li> <li>\u200b\u9a57\u8b49\u8005\u200b\u5fc5\u9808\u200b\u9078\u64c7\u200b\u4f60\u200b\u7684\u200b\u4ea4\u6613\u200b\u4e26\u5c07\u200b\u5176\u200b\u5305\u542b\u200b\u5728\u200b\u4e00\u500b\u200b\u584a\u200b\u4e2d\u200b\uff0c\u200b\u4ee5\u9a57\u8b49\u200b\u4ea4\u6613\u200b\u4e26\u8a8d\u200b\u70ba\u200b\u5b83\u200b\u201c\u200b\u6210\u529f\u200b\u201d\u3002</li> </ul> <p>\u200b\u95dc\u65bc\u200b\u4ea4\u6613\u200b\u751f\u547d\u200b\u9031\u671f\u200b\u7684\u200b\u66f4\u200b\u8a73\u7d30\u200b\u89e3\u91cb\u200b\uff0c\u200b\u8acb\u200b\u53c3\u898b\u200b\u76f8\u61c9\u200b\u90e8\u5206\u200b\u3002</p> <p>\u200b\u4ea4\u6613\u200b\u54c8\u5e0c\u200b\u662f\u200b\u4e00\u500b\u200b\u552f\u4e00\u200b\u6a19\u8b58\u7b26\u200b\uff0c\u200b\u53ef\u7528\u200b\u65bc\u200b\u6aa2\u67e5\u200b\u4ea4\u6613\u200b\u4fe1\u606f\u200b\uff0c\u200b\u4f8b\u5982\u200b\uff0c\u200b\u767c\u51fa\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u662f\u5426\u200b\u6210\u529f\u200b\u3002</p> <p>\u200b\u4ea4\u6613\u200b\u53ef\u80fd\u200b\u56e0\u200b\u5404\u7a2e\u200b\u539f\u56e0\u200b\u800c\u200b\u5931\u6557\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u63d0\u4f9b\u200b\u7684\u200b gas \u200b\u6216\u8cbb\u7528\u200b\u53ef\u80fd\u200b\u4e0d\u8db3\u200b\u3002\u200b\u6b64\u5916\u200b\uff0c\u200b\u4ea4\u6613\u200b\u9a57\u8b49\u200b\u53ef\u80fd\u200b\u6703\u200b\u5931\u6557\u200b\u3002</p> <p>\u200b\u6bcf\u7b46\u200b\u4ea4\u6613\u200b\u90fd\u200b\u6709\u200b\u7279\u5b9a\u200b\u7684\u200b\u689d\u4ef6\u200b\uff0c\u200b\u5fc5\u9808\u200b\u6eff\u8db3\u200b\u9019\u4e9b\u200b\u689d\u4ef6\u200b\u624d\u80fd\u200b\u88ab\u8996\u200b\u70ba\u200b\u6709\u6548\u200b\u3002\u200b\u4e00\u500b\u200b\u5ee3\u6cdb\u200b\u7684\u200b\u9a57\u8b49\u200b\u662f\u200b\u767c\u9001\u8005\u200b\u662f\u200b\u4ea4\u6613\u200b\u7c3d\u540d\u8005\u200b\u3002</p> <p>\u200b\u5728\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u5982\u679c\u200b\u60a8\u200b\u5728\u200b\u767c\u4ef6\u200b\u4eba\u200b\u5730\u5740\u200b\u8207\u200b\u7c3d\u540d\u8005\u200b\u5730\u5740\u200b\u4e0d\u540c\u200b\u7684\u200b\u5730\u65b9\u200b\u767c\u9001\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5373\u4f7f\u200b\u8cbb\u7528\u200b\u8db3\u5920\u200b\uff0c\u200b\u4ea4\u6613\u200b\u4e5f\u200b\u6703\u200b\u5931\u6557\u200b\u3002</p> <p>\u200b\u5982\u4eca\u200b\uff0c\u200b\u4ea4\u6613\u200b\u4e0d\u50c5\u200b\u53ef\u4ee5\u200b\u5728\u200b\u63d0\u4ea4\u200b\u7684\u200b\u93c8\u200b\u4e0a\u200b\u9032\u884c\u200b\u72c0\u614b\u200b\u8f49\u63db\u200b\uff0c\u200b\u9084\u200b\u53ef\u4ee5\u200b\u5728\u200b\u53e6\u200b\u4e00\u689d\u5340\u200b\u584a\u200b\u93c8\u200b\u4e0a\u200b\u9032\u884c\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u93c8\u9593\u200b\u4ea4\u6613\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b \u200b\u5340\u584a\u200b\u93c8\u9593\u200b\u901a\u4fe1\u200b\u5354\u8b70\u200b (IBC) \u200b\u5be6\u73fe\u200b\u3002</p> <p>\u200b\u5728\u200b\u4e0b\u9762\u200b\u7684\u200b\u90e8\u5206\u200b\u4e2d\u200b\u627e\u5230\u200b\u66f4\u200b\u8a73\u7d30\u200b\u7684\u200b\u89e3\u91cb\u200b\u3002</p>"},{"location":"protocol/transfer/#_1","title":"\u4ea4\u6613\u200b\u985e\u578b","text":"<p>Daodst \u200b\u652f\u6301\u200b\u5169\u7a2e\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\uff1a</p> <ol> <li>Cosmos \u200b\u4ea4\u6613\u200b</li> <li>Ethereum \u200b\u4ea4\u6613\u200b</li> </ol> <p>\u200b\u9019\u662f\u200b\u53ef\u80fd\u200b\u7684\u200b\uff0c\u200b\u56e0\u70ba\u200b Daodst \u200b\u4f7f\u7528\u200b Cosmos-SDK \u200b\u4e26\u5be6\u73fe\u200b\u4e86\u200b \u200b\u4ee5\u592a\u200b\u574a\u200b\u865b\u64ec\u6a5f\u200b \u200b\u4f5c\u70ba\u200b\u4e00\u500b\u200b\u6a21\u584a\u200b\u3002</p> <p>\u200b\u901a\u904e\u200b\u9019\u7a2e\u200b\u65b9\u5f0f\u200b\uff0cDaodst \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4ee5\u592a\u200b\u574a\u200b\u548c\u200b Cosmos \u200b\u93c8\u7d44\u5408\u200b\u7684\u200b\u7279\u6027\u200b\u548c\u200b\u529f\u80fd\u200b\uff0c\u200b\u7b49\u7b49\u200b\u3002</p> <p>\u200b\u5118\u200b\u7ba1\u200b\u9019\u200b\u5169\u200b\u7a2e\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u4e2d\u200b\u5305\u542b\u200b\u7684\u200b\u5927\u90e8\u5206\u200b\u4fe1\u606f\u200b\u76f8\u4f3c\u200b\uff0c\u200b\u4f46\u200b\u5b83\u5011\u200b\u4e4b\u9593\u200b\u5b58\u5728\u200b\u5dee\u7570\u200b\u3002</p> <p>\u200b\u4e00\u500b\u200b\u91cd\u8981\u200b\u7684\u200b\u5340\u5225\u200b\u662f\u200b\uff0cCosmos \u200b\u4ea4\u6613\u200b\u5141\u8a31\u200b\u5728\u200b\u540c\u4e00\u200b\u4ea4\u6613\u200b\u4e2d\u767c\u200b\u9001\u200b\u591a\u689d\u200b\u6d88\u606f\u200b\u3002</p> <p>\u200b\u76f8\u53cd\u200b\uff0c\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u5247\u6c92\u6709\u200b\u9019\u7a2e\u200b\u53ef\u80fd\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u5c07\u200b\u9019\u5169\u7a2e\u200b\u985e\u578b\u200b\u7d50\u200b\u5408\u5728\u4e00\u8d77\u200b\uff0cDaodst \u200b\u5c07\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u5be6\u73fe\u200b\u70ba\u200b\u55ae\u500b\u200b <code>sdk.Msg</code> \u200b\u5305\u542b\u200b\u5728\u200b <code>auth.StdTx</code> \u200b\u4e2d\u200b\u3002</p> <p>\u200b\u6b64\u200b\u6d88\u606f\u200b\u4e2d\u200b\u5305\u542b\u200b\u6240\u6709\u200b\u76f8\u95dc\u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u4fe1\u606f\u200b\u3002</p> <p>\u200b\u9019\u200b\u5305\u62ec\u200b\u7c3d\u540d\u200b\u3001\u200b\u6c23\u9ad4\u200b\u3001\u200b\u6709\u6548\u200b\u8f09\u8377\u200b\u7b49\u200b\u3002</p> <p>\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u90e8\u5206\u200b\u4e2d\u200b\u627e\u5230\u200b\u6709\u95dc\u200b\u9019\u5169\u7a2e\u200b\u985e\u578b\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"protocol/transfer/#cosmos","title":"Cosmos \u200b\u4ea4\u6613","text":"<p>\u200b\u5728\u200b Cosmos \u200b\u93c8\u4e0a\u200b\uff0c\u200b\u4e8b\u52d9\u200b\u7531\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u4fdd\u5b58\u200b\u7684\u200b\u5143\u200b\u6578\u64da\u200b\u548c\u200b\u901a\u904e\u200b\u6a21\u584a\u200b\u7684\u200b Protobuf Msg \u200b\u670d\u52d9\u200b \u200b\u89f8\u767c\u200b\u6a21\u584a\u200b\u5167\u200b\u72c0\u614b\u200b\u66f4\u6539\u200b\u7684\u200b <code>sdk.Msg</code> \u200b\u7d44\u6210\u200b/\u200b\u6d88\u606f\u200b\u670d\u52d9\u200b\uff09\u3002</p> <p>\u200b\u7576\u7528\u6236\u200b\u60f3\u8981\u200b\u8207\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4ea4\u4e92\u200b\u4e26\u200b\u66f4\u6539\u200b\u72c0\u614b\u200b\uff08\u200b\u4f8b\u5982\u200b\u767c\u9001\u200b\u786c\u5e63\u200b\uff09\u200b\u6642\u200b\uff0c\u200b\u4ed6\u5011\u200b\u6703\u200b\u5275\u5efa\u200b\u4ea4\u6613\u200b\u3002 Cosmos \u200b\u4ea4\u6613\u200b\u53ef\u4ee5\u200b\u6709\u591a\u500b\u200b <code>sdk.Msg</code>\u3002 \u200b\u5728\u5c07\u200b\u4ea4\u6613\u200b\u5ee3\u200b\u64ad\u5230\u200b\u7db2\u7d61\u200b\u4e4b\u524d\u200b\uff0c\u200b\u5fc5\u9808\u200b\u4f7f\u7528\u200b\u8207\u200b\u9069\u7576\u200b\u5e33\u6236\u200b\u95dc\u806f\u200b\u7684\u200b\u79c1\u200b\u9470\u200b\u5c0d\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u200b\u4e00\u500b\u200b\u9032\u884c\u200b\u7c3d\u540d\u200b\u3002</p> <p>\u200b\u4e00\u7b46\u200b Cosmos \u200b\u4ea4\u6613\u200b\u5305\u62ec\u200b\u4ee5\u4e0b\u200b\u4fe1\u606f\u200b\uff1a</p> <ul> <li><code>Msgs</code>\uff1a\u200b\u4e00\u7d44\u200b\u6d88\u606f\u200b\uff08<code>sdk.Msg</code>\uff09</li> <li><code>GasLimit</code>\uff1a\u200b\u7528\u6236\u200b\u9078\u64c7\u200b\u7684\u200b\u9078\u9805\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u8a08\u7b97\u200b\u4ed6\u5011\u200b\u9700\u8981\u200b\u652f\u4ed8\u200b\u591a\u5c11\u200b gas</li> <li><code>FeeAmount</code>\uff1a\u200b\u7528\u6236\u200b\u9858\u610f\u200b\u652f\u4ed8\u200b\u7684\u200b\u6700\u5927\u200b\u8cbb\u7528\u200b</li> <li><code>TimeoutHeight</code>\uff1a\u200b\u4ea4\u6613\u200b\u6709\u6548\u200b\u7684\u200b\u5340\u584a\u200b\u9ad8\u5ea6\u200b</li> <li><code>Signatures</code>\uff1a\u200b\u4f86\u200b\u81ea\u200b tx \u200b\u7684\u200b\u6240\u6709\u200b\u7c3d\u540d\u8005\u200b\u7684\u200b\u7c3d\u540d\u200b\u6578\u7d44\u200b</li> <li><code>Memo</code>\uff1a\u200b\u8207\u200b\u4ea4\u6613\u200b\u4e00\u8d77\u200b\u767c\u9001\u200b\u7684\u200b\u8a3b\u200b\u91cb\u200b\u6216\u200b\u8a55\u200b\u8ad6\u200b</li> </ul> <p>\u200b\u8981\u200b\u63d0\u4ea4\u200b Cosmos \u200b\u4ea4\u6613\u200b\uff0c\u200b\u7528\u6236\u200b\u5fc5\u9808\u200b\u4f7f\u7528\u200b\u63d0\u4f9b\u200b\u7684\u200b\u5ba2\u6236\u200b\u7aef\u200b\u4e4b\u4e00\u200b\u3002</p>"},{"location":"protocol/transfer/#ethereum","title":"Ethereum \u200b\u4ea4\u6613","text":"<p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u662f\u200b\u6307\u200b\u7531\u200b EOA\uff08\u200b\u5916\u90e8\u200b\u64c1\u6709\u200b\u7684\u200b\u8cec\u6236\u200b\uff0c\u200b\u7531\u4eba\u200b\u7ba1\u7406\u200b\uff09\u200b\u767c\u8d77\u200b\u7684\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u5167\u90e8\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u8abf\u7528\u200b\u3002 \u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u6703\u200b\u6539\u8b8a\u200b EVM \u200b\u7684\u200b\u72c0\u614b\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5fc5\u9808\u5ee3\u200b\u64ad\u5230\u200b\u6574\u500b\u200b\u7db2\u7d61\u200b\u3002</p> <p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u4e5f\u200b\u9700\u8981\u200b\u8cbb\u7528\u200b\uff0c\u200b\u7a31\u70ba\u200b <code>gas</code>\u3002 (EIP-1559) \u200b\u5f15\u5165\u200b\u4e86\u200b\u57fa\u672c\u200b\u8cbb\u7528\u200b\u7684\u200b\u6982\u5ff5\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u512a\u5148\u8cbb\u7528\u200b\uff0c\u200b\u4ee5\u6fc0\u52f5\u200b\u7926\u5de5\u5c07\u200b\u7279\u5b9a\u200b\u4ea4\u6613\u200b\u5305\u542b\u200b\u5728\u200b\u5340\u584a\u200b\u4e2d\u200b.</p> <p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u5206\u70ba\u200b\u5e7e\u985e\u200b\uff1a</p> <ul> <li>\u200b\u5e38\u898f\u200b\u4ea4\u6613\u200b\uff1a\u200b\u5f9e\u200b\u4e00\u500b\u200b\u8cec\u6236\u200b\u5230\u200b\u53e6\u200b\u4e00\u500b\u200b\u8cec\u6236\u200b\u7684\u200b\u4ea4\u6613\u200b</li> <li>\u200b\u5408\u7d04\u200b\u90e8\u7f72\u200b\u4ea4\u6613\u200b\uff1a\u200b\u6c92\u6709\u200b <code>to</code> \u200b\u5730\u5740\u200b\u7684\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5408\u7d04\u4ee3\u78bc\u200b\u5728\u200b <code>data</code> \u200b\u5b57\u6bb5\u200b\u4e2d\u200b\u767c\u9001\u200b</li> <li>\u200b\u5408\u7d04\u200b\u7684\u200b\u57f7\u884c\u200b\uff1a\u200b\u8207\u200b\u90e8\u7f72\u200b\u7684\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u4ea4\u4e92\u200b\u7684\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5176\u4e2d\u200b <code>to</code> \u200b\u5730\u5740\u200b\u662f\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u5730\u5740\u200b</li> </ul> <p>\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u5305\u62ec\u200b\u4ee5\u4e0b\u200b\u4fe1\u606f\u200b\uff1a</p> <ul> <li><code>recipient</code>: \u200b\u63a5\u6536\u200b\u5730\u5740\u200b</li> <li><code>signature</code>: \u200b\u767c\u4ef6\u200b\u4eba\u200b\u7684\u200b\u7c3d\u540d\u200b</li> <li><code>nonce</code>\uff1a\u200b\u4f86\u200b\u81ea\u8cec\u200b\u6236\u200b\u7684\u200b tx \u200b\u7de8\u865f\u200b\u7684\u200b\u8a08\u6578\u5668\u200b</li> <li><code>value</code>\uff1a\u200b\u8981\u200b\u8f49\u79fb\u200b\u7684\u200b ETH \u200b\u6578\u91cf\u200b\uff08\u200b\u4ee5\u200b wei \u200b\u70ba\u200b\u55ae\u4f4d\u200b\uff09</li> <li><code>data</code>\uff1a\u200b\u5305\u62ec\u200b\u4efb\u610f\u200b\u6578\u64da\u200b\u3002\u200b\u5728\u200b\u90e8\u7f72\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u6216\u200b\u9032\u884c\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u65b9\u6cd5\u200b\u8abf\u7528\u200b\u6642\u200b\u4f7f\u7528\u200b</li> <li><code>gasLimit</code>\uff1a\u200b\u8981\u200b\u6d88\u8017\u200b\u7684\u200b\u6700\u5927\u200b\u6c23\u9ad4\u91cf\u200b</li> <li><code>maxPriorityFeePerGas</code>\uff1a\u200b\u4f5c\u70ba\u9a57\u200b\u8b49\u8005\u200b\u5c0f\u8cbb\u200b\u7684\u200b mas gas</li> <li><code>maxFeePerGas</code>\uff1a\u200b\u70ba\u200b tx \u200b\u652f\u4ed8\u200b\u7684\u200b\u6700\u5927\u200b gas \u200b\u91cf\u200b</li> </ul> <p>\u200b\u6709\u95dc\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u548c\u200b\u4ea4\u6613\u200b\u751f\u547d\u200b\u9031\u671f\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8f49\u5230\u200b\u6b64\u8655\u200b\u3002</p> <p>Daodst \u200b\u652f\u6301\u200b\u4ee5\u4e0b\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b : \u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u4e0d\u200b\u652f\u6301\u200b\u672a\u53d7\u200b\u4fdd\u8b77\u200b\u7684\u200b\u907a\u7559\u200b\u4e8b\u52d9\u200b\u3002 :::</p> <ul> <li>\u200b\u52d5\u614b\u200b\u8cbb\u7528\u200b\u4ea4\u6613\u200b\uff08EIP-1559\uff09</li> <li>\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b\u4ea4\u6613\u200b\uff08EIP-2930\uff09</li> <li>\u200b\u907a\u7559\u200b\u4ea4\u6613\u200b\uff08EIP-2718\uff09</li> </ul> <p>Daodst\u200b\u80fd\u8db3\u5920\u200b\u901a\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u5305\u200b\u5728\u200b<code>sdk.Msg</code>\u200b\u4e0a\u4f86\u200b\u8655\u7406\u200b\u5b83\u5011\u200b\u3002 Daodst \u200b\u901a\u904e\u200b\u4f7f\u7528\u200b <code>MsgEthereumTx</code> \u200b\u4f86\u200b\u5be6\u73fe\u200b\u9019\u4e00\u9ede\u200b\u3002 \u200b\u6b64\u200b\u6d88\u606f\u200b\u5c07\u200b\u4ee5\u592a\u200b\u574a\u200b\u4ea4\u6613\u200b\u5c01\u88dd\u200b\u70ba\u200bSDK\u200b\u6d88\u606f\u200b\uff0c\u200b\u4e26\u200b\u5305\u542b\u200b\u5fc5\u9808\u200b\u7684\u200b\u4ea4\u6613\u200b\u6578\u64da\u200b\u5b57\u200b\u6bb5\u200b\u3002</p> <p>\u200b\u95dc\u65bc\u200b<code>MsgEthereumTx</code> \u200b\u7684\u200b\u4e00\u500b\u200b\u8aaa\u660e\u200b\u662f\u200b\u5b83\u200b\u540c\u6642\u200b\u5be6\u73fe\u200b\u4e86\u200b<code>sdk.Msg</code> \u200b\u548c\u200b<code>sdk.Tx</code> \u200b\u63a5\u53e3\u200b\uff08\u200b\u4e00\u822c\u200bSDK\u200b\u6d88\u606f\u200b\u53ea\u200b\u51fa\u73fe\u200b\u5728\u200b\u524d\u8005\u200b\uff0c\u200b\u800c\u5f8c\u8005\u200b\u662f\u200b\u4e00\u7d44\u200b\u6d88\u606f\u200b\u5728\u200b\u525d\u843d\u200b\u3002</p> <p>\u200b\u9019\u6a23\u200b\u505a\u200b\u7684\u200b\u539f\u56e0\u200b\u662f\u200b\u56e0\u70ba\u200b <code>MsgEthereumTx</code> \u200b\u4e0d\u80fd\u200b\u5305\u542b\u200b\u5728\u200b <code>auth.StdTx</code>\uff08SDK \u200b\u7684\u200b\u6a19\u6e96\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\uff09\u200b\u4e2d\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u200b\u4f7f\u7528\u200b Geth \u200b\u7684\u200b\u4ee5\u592a\u200b\u574a\u200b\u767c\u9001\u200b\u800c\u200b\u4e0d\u662f\u200b Cosmos SDK `\u200b\u5728\u200b\u6b0a\u6756\u200bAn\u200b\u4e2d\u200b\u3002</p>"},{"location":"protocol/transfer/#_2","title":"\u93c8\u9593\u200b\u4ea4\u6613","text":"<p>\u200b\u8de8\u93c8\u200b\u4ea4\u6613\u200b\u662f\u200b\u6307\u6578\u200b\u5b57\u200b\u8cc7\u7522\u200b\u6216\u200b\u6578\u64da\u200b\u5728\u200b\u5169\u500b\u200b\u6216\u200b\u591a\u500b\u200b\u4e0d\u540c\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u4e4b\u9593\u200b\u7684\u200b\u8f49\u79fb\u200b\u3002</p> <p>\u200b\u6bcf\u500b\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u90fd\u200b\u6709\u200b\u81ea\u5df1\u200b\u7368\u7279\u200b\u7684\u200b\u5354\u8b70\u200b\u548c\u200b\u6578\u64da\u200b\u7d50\u69cb\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5f88\u200b\u96e3\u5c07\u200b\u8cc7\u7522\u200b\u6216\u200b\u6578\u64da\u200b\u5f9e\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u93c8\u200b\u76f4\u63a5\u200b\u8f49\u79fb\u200b\u5230\u200b\u53e6\u200b\u4e00\u500b\u200b\u5340\u584a\u200b\u93c8\u200b\u3002 \u200b\u8de8\u93c8\u200b\u4ea4\u6613\u200b\u5141\u8a31\u200b\u901a\u904e\u200b\u4f7f\u7528\u200b\u4e2d\u4ecb\u200b\u6a5f\u200b\u88fd\u200b\u6216\u200b\u5354\u200b\u8b70\u200b\u5728\u200b\u4e0d\u540c\u200b\u5340\u584a\u200b\u93c8\u4e4b\u9593\u200b\u50b3\u8f38\u200b\u8cc7\u7522\u200b\u548c\u200b\u6578\u64da\u200b\u3002</p> <p>\u200b\u4e00\u7a2e\u200b\u9019\u6a23\u200b\u7684\u200b\u6a5f\u5236\u200b\u662f\u200b\u8de8\u200b\u93c8\u6a4b\u200b\uff0c\u200b\u5b83\u200b\u5145\u7576\u200b\u4e0d\u540c\u200b\u5340\u584a\u200b\u93c8\u4e4b\u9593\u200b\u7684\u9023\u200b\u63a5\u5668\u200b\uff0c\u200b\u5be6\u73fe\u200b\u8cc7\u7522\u200b\u6216\u200b\u6578\u64da\u200b\u7684\u200b\u50b3\u8f38\u200b\u3002</p> <p>\u200b\u8de8\u200b\u93c8\u6a4b\u200b\u901a\u5e38\u200b\u9700\u8981\u200b\u67d0\u7a2e\u200b\u5f62\u5f0f\u200b\u7684\u200b\u4fe1\u4efb\u200b\u6216\u5171\u8b58\u200b\u6a5f\u5236\u200b\u4f86\u200b\u78ba\u4fdd\u200b\u4ea4\u6613\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\u548c\u200b\u5b8c\u6574\u6027\u200b\u3002</p> <p>\u200b\u53e6\u200b\u4e00\u7a2e\u200b\u53ef\u80fd\u6027\u200b\u662f\u200b\u4f7f\u7528\u200b IBC\uff08\u200b\u5340\u584a\u200b\u93c8\u9593\u200b\u901a\u4fe1\u200b\uff09 \u200b\u5354\u8b70\u200b\u3002</p> <p>\u200b\u8981\u200b\u4f7f\u7528\u200b IBC \u200b\u9032\u884c\u200b\u8de8\u93c8\u200b\u4ea4\u6613\u200b\uff0c\u200b\u7528\u6236\u200b\u9700\u8981\u200b\uff1a</p> <ul> <li>\u200b\u9078\u64c7\u200b\u7528\u6236\u200b\u60f3\u8981\u200b\u5728\u200b\u5176\u9593\u200b\u50b3\u8f38\u200b\u8cc7\u7522\u200b\u6216\u200b\u6578\u64da\u200b\u7684\u200b\u6e90\u200b\u548c\u200b\u76ee\u6a19\u5340\u200b\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u3002</li> <li>\u200b\u78ba\u4fdd\u200b\u5169\u500b\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u90fd\u200b\u5be6\u73fe\u200b\u4e86\u200b IBC \u200b\u5354\u8b70\u200b</li> <li>\u200b\u78ba\u4fdd\u200b\u4f7f\u7528\u200b IBC \u200b\u5728\u200b\u5169\u500b\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u4e4b\u9593\u200b\u5efa\u7acb\u200b\u9023\u63a5\u200b\u548c\u200b\u901a\u9053\u200b</li> <li>\u200b\u555f\u52d5\u200b\u8cc7\u7522\u200b\u6216\u200b\u6578\u64da\u200b\u7684\u200b\u8f49\u79fb\u200b\uff1a\u200b\u9019\u662f\u200b\u901a\u904e\u200b IBC \u200b\u901a\u9053\u200b\u5f9e\u6e90\u5340\u200b\u584a\u200b\u93c8\u200b\u5411\u200b\u76ee\u6a19\u5340\u200b\u584a\u200b\u93c8\u200b\u767c\u9001\u200b\u4ea4\u6613\u200b\u4f86\u200b\u5b8c\u6210\u200b\u7684\u200b</li> </ul> <p>\u200b\u96a8\u8457\u200b\u4e0d\u540c\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u548c\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u6578\u91cf\u200b\u7684\u200b\u6301\u7e8c\u200b\u589e\u9577\u200b\uff0c\u200b\u8de8\u93c8\u200b\u4ea4\u6613\u200b\u8b8a\u5f97\u200b\u8d8a\u4f86\u200b\u8d8a\u200b\u91cd\u8981\u200b\u3002 \u200b\u5b83\u5011\u200b\u652f\u6301\u200b\u4e0d\u540c\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u7684\u200b\u4e92\u64cd\u4f5c\u6027\u200b\uff0c\u200b\u5f9e\u200b\u800c\u200b\u5728\u200b\u6578\u5b57\u200b\u8cc7\u7522\u200b\u548c\u200b\u6578\u64da\u200b\u7684\u200b\u50b3\u8f38\u200b\u4e2d\u200b\u5be6\u73fe\u200b\u66f4\u200b\u5927\u7684\u9748\u200b\u6d3b\u6027\u200b\u548c\u200b\u6548\u7387\u200b\u3002</p>"},{"location":"protocol/transfer/#_3","title":"\u4ea4\u6613\u200b\u6191\u8b49","text":"<p>\u200b\u4ea4\u6613\u200b\u6536\u64da\u200b\u986f\u793a\u200b\u4ee5\u592a\u200b\u574a\u200b\u5ba2\u6236\u200b\u7aef\u200b\u8fd4\u56de\u200b\u7684\u200b\u6578\u64da\u200b\u4ee5\u200b\u8868\u793a\u200b\u7279\u5b9a\u200b\u4ea4\u6613\u200b\u7684\u200b\u7d50\u679c\u200b\uff0c\u200b\u5305\u62ec\u200b\u4ea4\u6613\u200b\u7684\u200b\u54c8\u5e0c\u200b\u503c\u200b\u3001\u200b\u5340\u584a\u200b\u7de8\u865f\u200b\u3001\u200b\u4f7f\u7528\u200b\u7684\u200b\u6c23\u9ad4\u91cf\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u5728\u200b\u90e8\u7f72\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u5408\u7ea6\u200b\u5730\u5740\u200b\u3002 \u200b\u6b64\u5916\u200b\uff0c\u200b\u5b83\u9084\u200b\u5305\u62ec\u200b\u4f86\u200b\u81ea\u200b\u667a\u80fd\u200b\u5408\u7d04\u200b\u4e2d\u200b\u767c\u51fa\u200b\u7684\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u81ea\u5b9a\u7fa9\u200b\u4fe1\u606f\u200b\u3002</p> <p>\u200b\u6536\u64da\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u4fe1\u606f\u200b\uff1a</p> <ul> <li><code>transactionHash</code>\uff1a\u200b\u4ea4\u6613\u200b\u7684\u200b\u54c8\u5e0c\u200b\u503c\u200b\u3002</li> <li><code>transactionIndex</code>\uff1a\u200b\u5340\u584a\u200b\u4e2d\u200b\u4ea4\u6613\u200b\u7d22\u5f15\u200b\u4f4d\u7f6e\u200b\u7684\u200b\u6574\u6578\u200b\u3002</li> <li><code>blockHash</code>\uff1a\u200b\u8a72\u200b\u4ea4\u6613\u6240\u200b\u5728\u200b\u5340\u584a\u200b\u7684\u200b\u54c8\u5e0c\u200b\u503c\u200b\u3002</li> <li><code>blockNumber</code>\uff1a\u200b\u8a72\u200b\u4ea4\u6613\u6240\u200b\u5728\u200b\u7684\u200b\u5340\u584a\u200b\u7de8\u865f\u200b\u3002</li> <li><code>from</code>\uff1a\u200b\u767c\u4ef6\u200b\u4eba\u200b\u7684\u200b\u5730\u5740\u200b\u3002</li> <li><code>to</code>: \u200b\u63a5\u6536\u8005\u200b\u7684\u200b\u5730\u5740\u200b\u3002\u200b\u7576\u5b83\u200b\u662f\u200b\u5408\u7d04\u200b\u5275\u5efa\u200b\u4ea4\u6613\u200b\u6642\u70ba\u200b null\u3002</li> <li><code>cumulativeGasUsed</code>\uff1a\u200b\u5728\u200b\u5340\u584a\u200b\u4e2d\u200b\u57f7\u884c\u200b\u6b64\u200b\u4ea4\u6613\u200b\u6642\u200b\u4f7f\u7528\u200b\u7684\u200b\u6c23\u9ad4\u200b\u7e3d\u91cf\u200b\u3002</li> <li><code>effectiveGasPrice</code>\uff1a\u200b\u57fa\u672c\u200b\u8cbb\u7528\u200b\u548c\u200b\u6bcf\u200b\u55ae\u4f4d\u200b gas \u200b\u652f\u4ed8\u200b\u7684\u200b\u5c0f\u8cbb\u200b\u7684\u200b\u7e3d\u200b\u548c\u200b\u3002</li> <li><code>gasUsed</code>\uff1a\u200b\u50c5\u6b64\u200b\u7279\u5b9a\u200b\u4ea4\u6613\u200b\u4f7f\u7528\u200b\u7684\u200b\u6c23\u9ad4\u91cf\u200b\u3002</li> <li><code>contractAddress</code>\uff1a\u200b\u5275\u5efa\u200b\u7684\u200b\u5408\u7d04\u200b\u5730\u5740\u200b\uff0c\u200b\u5982\u679c\u200b\u4ea4\u6613\u200b\u662f\u200b\u5408\u7d04\u200b\u5275\u5efa\u200b\uff0c\u200b\u5426\u5247\u200b\u70ba\u200b\u7a7a\u200b\u3002</li> <li><code>logs</code>\uff1a\u200b\u6b64\u4e8b\u200b\u52d9\u200b\u751f\u6210\u200b\u7684\u200b\u65e5\u8a8c\u200b\u5c0d\u200b\u50cf\u200b\u6578\u7d44\u200b\u3002</li> <li><code>logsBloom</code>\uff1a\u200b\u7528\u200b\u65bc\u200b\u8f15\u200b\u5ba2\u6236\u200b\u7aef\u7684\u200b Bloom \u200b\u904e\u6ffe\u5668\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u5feb\u901f\u200b\u6aa2\u7d22\u200b\u76f8\u95dc\u200b\u65e5\u8a8c\u200b\u3002</li> <li><code>type</code>\uff1a\u200b\u4ea4\u6613\u200b\u985e\u578b\u200b\u7684\u200b\u6574\u6578\u200b\uff0c\u200b\u820a\u200b\u4ea4\u6613\u200b\u70ba\u200b 0x00\uff0c\u200b\u8a2a\u554f\u200b\u5217\u8868\u200b\u985e\u578b\u200b\u70ba\u200b 0x01\uff0c   0x02 \u200b\u7528\u200b\u65bc\u200b\u52d5\u614b\u200b\u8cbb\u7528\u200b\u3002\u200b\u5b83\u200b\u4e5f\u200b\u8fd4\u56de\u200b\u3002</li> <li><code>root</code>\uff1a\u200b\u4e8b\u52d9\u200b\u72c0\u614b\u200b\u6839\u200b\uff08\u200b\u62dc\u5360\u5ead\u200b\u4e4b\u524d\u200b\uff09</li> <li><code>status</code>\uff1a1\uff08\u200b\u6210\u529f\u200b\uff09\u200b\u6216\u200b 0\uff08\u200b\u5931\u6557\u200b\uff09</li> </ul>"},{"location":"protocol/stcd/","title":"CLI","text":"<p><code>stcd</code> \u200b\u662f\u200b\u4e00\u9ad4\u5316\u200b\u547d\u4ee4\u884c\u200b\u754c\u9762\u200b (CLI)\u3002\u200b\u5b83\u200b\u5141\u8a31\u200b\u60a8\u200b\u904b\u884c\u200b Daodst \u200b\u93c8\u7bc0\u9ede\u200b\u3001\u200b\u7ba1\u7406\u200b\u9322\u200b\u5305\u4e26\u200b\u901a\u904e\u200b\u67e5\u8a62\u200b\u548c\u200b\u4ea4\u6613\u200b\u8207\u200b Daodst \u200b\u7db2\u7d61\u200b\u4ea4\u4e92\u200b\u3002\u200b\u672c\u200b\u7c21\u4ecb\u5c07\u200b\u89e3\u91cb\u200b\u5982\u4f55\u200b\u5c07\u200b <code>stcd</code> \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u5b89\u88dd\u200b\u5230\u200b\u60a8\u200b\u7684\u200b\u7cfb\u7d71\u200b\u4e0a\u200b\uff0c\u200b\u4e26\u901a\u904e\u200b\u4e00\u4e9b\u200b\u7c21\u55ae\u200b\u7684\u200b\u793a\u4f8b\u200b\u6307\u5c0e\u200b\u60a8\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200b stcd\u3002</p>"},{"location":"protocol/stcd/#_1","title":"\u5148\u6c7a\u200b\u689d\u4ef6","text":""},{"location":"protocol/stcd/#go","title":"Go","text":"<p>Daodst \u200b\u662f\u200b\u4f7f\u7528\u200b Go \u200b\u7248\u672c\u200b <code>1.20+</code> \u200b\u69cb\u5efa\u200b\u7684\u200b\u3002\u200b\u6aa2\u67e5\u200b\u4f60\u200b\u7684\u200b\u7248\u672c\u200b\uff1a</p> <pre><code>go version\n</code></pre> <p>\u200b\u5b89\u88dd\u200b\u6b63\u78ba\u200b\u7684\u200b\u7248\u672c\u200b\u5f8c\u200b\uff0c\u200b\u901a\u904e\u200b\u904b\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u4e26\u5c07\u200b\u5176\u200b\u6dfb\u52a0\u200b\u5230\u200b shell \u200b\u555f\u52d5\u200b\u8173\u672c\u200b\u4e2d\u200b\uff0c\u200b\u78ba\u8a8d\u200b\u60a8\u200b\u7684\u200b <code>GOPATH</code> \u200b\u5df2\u6b63\u78ba\u200b\u914d\u7f6e\u200b\uff1a</p> <pre><code>export PATH=$PATH:$(go env GOPATH)/bin\n</code></pre>"},{"location":"protocol/stcd/#jq","title":"jq","text":"<p>Daodst \u200b\u8173\u672c\u200b\u4f7f\u7528\u200b jq \u200b\u7248\u672c\u200b <code>1.6+</code>\u3002\u200b\u6aa2\u67e5\u200b\u4f60\u200b\u7684\u200b\u7248\u672c\u200b\uff1a</p> <pre><code>jq --version\n</code></pre>"},{"location":"protocol/stcd/#_2","title":"\u5b89\u88dd","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5f9e\u6e90\u4ee3\u200b\u78bc\u69cb\u200b\u5efa\u5b89\u200b\u88dd\u200b <code>stcd</code> \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u3002</p>"},{"location":"protocol/stcd/#_3","title":"\u5f9e\u6e90\u4ee3\u78bc\u200b\u69cb\u5efa","text":"<p>\u200b\u4f7f\u7528\u200b <code>git</code> \u200b\u5f9e\u6e90\u4ee3\u78bc\u200b\u514b\u9686\u200b\u548c\u200b\u69cb\u5efa\u200b Daodst\u3002 <code>&lt;tag&gt;</code> \u200b\u662f\u200b\u6307\u200b Github \u200b\u4e0a\u200b\u7684\u200b\u767c\u5e03\u6a19\u200b\u7c64\u200b\u3002\u200b\u6700\u65b0\u200b\u7684\u200bDaodst  \u200b\u7248\u672c\u200b </p> <pre><code>git clone https://github.com/daodst/blockchain.git\ncd blockchain\ngit fetch\ngit checkout &lt;tag&gt;\nmake install\n</code></pre> <p>\u200b\u5b89\u88dd\u200b\u5b8c\u6210\u200b\u5f8c\u200b\uff0c\u200b\u6aa2\u67e5\u200b stcd \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u662f\u5426\u200b\u5df2\u200b\u6210\u529f\u200b\u5b89\u88dd\u200b\uff1a</p> <pre><code>stcd version\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u5982\u679c\u200b\u8fd4\u56de\u200b <code>stcd: command not found</code> \u200b\u932f\u8aa4\u200b\u6d88\u606f\u200b\uff0c\u200b\u8acb\u200b\u78ba\u8a8d\u200b\u60a8\u200b\u5df2\u200b\u6b63\u78ba\u200b\u914d\u7f6e\u200b Go\u3002</p>"},{"location":"protocol/stcd/#daodst","title":"\u904b\u884c\u200b Daodst \u200b\u7bc0\u9ede","text":"<p>\u200b\u8981\u200b\u719f\u6089\u200b Daodst\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u904b\u884c\u200b\u4e00\u500b\u200b\u672c\u5730\u200b\u5340\u584a\u200b\u93c8\u7bc0\u200b\u9ede\u4f86\u200b\u751f\u6210\u200b\u584a\u200b\u4e26\u516c\u958b\u200b EVM \u200b\u548c\u200b Cosmos \u200b\u7aef\u9ede\u200b\u3002\u200b\u9019\u5141\u8a31\u200b\u60a8\u200b\u5728\u200b\u672c\u5730\u200b\u90e8\u7f72\u200b\u667a\u80fd\u200b\u5408\u7d04\u4e26\u200b\u8207\u200b\u4e4b\u200b\u4ea4\u4e92\u200b\u6216\u200b\u6e2c\u8a66\u200b\u6838\u5fc3\u200b\u5354\u8b70\u200b\u529f\u80fd\u200b\u3002</p> <p>\u200b\u901a\u904e\u200b\u5728\u200b\u5b58\u5132\u5eab\u200b\u7684\u200b\u57fa\u76ee\u200b\u9304\u4e2d\u200b\u57f7\u884c\u200b <code>local_node.sh</code> \u200b\u8173\u672c\u4f86\u200b\u904b\u884c\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b\uff1a</p> <pre><code>./local_node.sh\n</code></pre> <p>\u200b\u8a72\u200b\u8173\u672c\u5b58\u200b\u5132\u7bc0\u9ede\u200b\u914d\u7f6e\u200b\uff0c\u200b\u5305\u62ec\u200b <code>~/.tmp-stcd/config/config.toml</code> \u200b\u4e0b\u200b\u7684\u200b\u672c\u5730\u200b\u9ed8\u8a8d\u200b\u7aef\u9ede\u200b\u3002 \u200b\u5982\u679c\u200b\u60a8\u200b\u4e4b\u524d\u200b\u904b\u884c\u200b\u904e\u8a72\u200b\u8173\u672c\u200b\uff0c\u200b\u8a72\u200b\u8173\u672c\u200b\u5141\u8a31\u200b\u60a8\u200b\u8986\u84cb\u73fe\u200b\u6709\u200b\u914d\u7f6e\u200b\u4e26\u555f\u200b\u52d5\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b\u3002</p> <p>\u200b\u7bc0\u9ede\u200b\u904b\u884c\u200b\u5f8c\u200b\uff0c\u200b\u60a8\u5c07\u200b\u770b\u5230\u200b\u5b83\u200b\u5728\u200b\u672c\u5730\u200b Daodst \u200b\u5340\u584a\u200b\u93c8\u200b\u4e2d\u9a57\u8b49\u200b\u548c\u200b\u751f\u6210\u200b\u584a\u200b\uff1a</p> <pre><code>12:59PM INF executed block height=1 module=state num_invalid_txs=0 num_valid_txs=0 server=node\n# ...\n1:00PM INF indexed block exents height=7 module=txindex server=node\n</code></pre> <p>\u200b\u6709\u95dc\u200b\u5982\u4f55\u200b\u81ea\u5b9a\u7fa9\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u8f49\u5230\u200b \u200b\u55ae\u7bc0\u9ede\u200b \u200b\u9801\u9762\u200b\u3002</p>"},{"location":"protocol/stcd/#stcd","title":"\u4f7f\u7528\u200b <code>stcd</code>","text":"<p>\u200b\u5b89\u88dd\u200b <code>stcd</code> \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u5f8c\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u904b\u884c\u200b\u547d\u4ee4\u200b\uff1a</p> <pre><code>stcd [command]\n</code></pre> <p>\u200b\u9084\u6709\u200b\u4e00\u500b\u200b <code>-h</code>, <code>--help</code> \u200b\u547d\u4ee4\u200b\u53ef\u7528\u200b</p> <pre><code>stcd -h\n</code></pre> <p>\u200b\u53ef\u4ee5\u200b\u540c\u6642\u200b\u7dad\u8b77\u200b\u591a\u500b\u200b\u7bc0\u9ede\u200b\u914d\u7f6e\u200b\u3002\u200b\u8981\u200b\u6307\u5b9a\u200b\u914d\u7f6e\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b <code>--home</code> \u200b\u6a19\u8a18\u200b\u3002\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u793a\u4f8b\u200b\u4e2d\u200b\uff0c\u200b\u6211\u5011\u5c07\u200b\u4f7f\u7528\u200b\u4f4d\u200b\u65bc\u200b<code>~/.tmp-stcd</code>\u200b\u7684\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b\u7684\u200b\u9ed8\u8a8d\u200b\u914d\u7f6e\u200b\u3002</p>"},{"location":"protocol/stcd/#_4","title":"\u7ba1\u7406\u200b\u9322\u5305","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b stcd \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u4f86\u200b\u7ba1\u7406\u200b\u60a8\u200b\u7684\u200b\u9322\u200b\u5305\u200b\uff0c\u200b\u4ee5\u5b58\u200b\u5132\u79c1\u200b\u9470\u200b\u4e26\u901a\u904e\u200b CLI \u200b\u7c3d\u7f72\u200b\u4ea4\u6613\u200b\u3002\u200b\u8981\u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u5bc6\u9470\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b\uff1a</p> <pre><code>stcd keys list \\\n--home ~/.tmp-stcd \\\n--keyring-backend test\n\n# Example Output:\n# - address: dst19xnmslvl0pcmydu4m52h2gf0std5ee5pfgpyuf\n#   name: dev0\n#   pubkey: '{\"@type\":\"/ethermint.crypto.v1.ethsecp256k1.PubKey\",\"key\":\"AzKouyoUL0UUS1qRUZdqyVsTPkCAFWwxx3+BTOw36nKp\"}'\n#   type: local\n</code></pre> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>$NAME</code> \u200b\u751f\u6210\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b/\u200b\u52a9\u8a18\u7b26\u200b\uff1a</p> <pre><code>stcd keys add [name] \\\n--home ~/.tmp-stcd \\\n--keyring-backend test\n</code></pre> <p>\u200b\u5c07\u60a8\u200b\u7684\u200b daodst \u200b\u5bc6\u9470\u5c0e\u200b\u51fa\u70ba\u200b\u4ee5\u592a\u200b\u574a\u200b\u79c1\u200b\u9470\u7528\u200b\u65bc\u200b [Metamask] \u200b\u4f8b\u5982\u200b\uff09\uff1a</p> <pre><code>stcd keys unsafe-export-eth-key [name] \\\n--home ~/.tmp-stcd \\\n--keyring-backend test\n</code></pre> <p>\u200b\u6709\u95dc\u200b\u53ef\u7528\u200b\u9375\u200b\u547d\u4ee4\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b <code>--help</code> \u200b\u6a19\u8a8c\u200b</p> <pre><code>stcd keys -h\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u6709\u95dc\u200b Keyring \u200b\u53ca\u5176\u200b\u5f8c\u200b\u7aef\u200b\u9078\u9805\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u55ae\u64ca\u200b \u200b\u6b64\u8655\u200b\u3002 :::</p>"},{"location":"protocol/stcd/#_5","title":"\u8207\u200b\u7db2\u7d61\u200b\u4e92\u52d5","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b stcd \u200b\u5728\u200b\u5340\u584a\u200b\u93c8\u4e0a\u200b\u67e5\u8a62\u200b\u4fe1\u606f\u200b\u6216\u200b\u63d0\u4ea4\u200b\u4ea4\u6613\u200b\u3002\u200b\u67e5\u8a62\u200b\u548c\u200b\u4ea4\u6613\u200b\u662f\u200b\u60a8\u200b\u901a\u904e\u200b Tendermint RPC \u200b\u767c\u200b\u9001\u5230\u200b Daodst \u200b\u7bc0\u9ede\u200b\u7684\u200b\u8acb\u6c42\u200b\u3002</p> <p>\ud83d\udce3 \ud83d\udc49 \u200b\u8981\u200b\u4f7f\u7528\u200b CLI\uff0c\u200b\u60a8\u200b\u9700\u8981\u200b\u70ba\u200b <code>--node</code> \u200b\u6a19\u8a8c\u200b\u63d0\u4f9b\u200b Tendermint RPC \u200b\u5730\u5740\u200b\u3002 \u200b\u5728\u200b [Networks]\u200b\u9801\u200b\u9762\u4e2d\u200b\u67e5\u627e\u200b\u6e2c\u8a66\u200b\u7db2\u548c\u4e3b\u7db2\u200b\u7684\u200b\u516c\u958b\u200b\u53ef\u7528\u200b\u5730\u5740\u200b\u3002</p>"},{"location":"protocol/stcd/#_6","title":"\u8a2d\u7f6e\u200b\u7db2\u7d61\u200b\u914d\u7f6e","text":"<p>\u200b\u5728\u200b\u672c\u5730\u200b\u8a2d\u7f6e\u200b\u4e2d\u200b\uff0c\u200b\u7bc0\u9ede\u200b\u8a2d\u7f6e\u200b\u70ba\u200b<code>tcp://localhost:26657</code>\u3002\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u65b9\u5f0f\u200b\u67e5\u770b\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u914d\u7f6e\u200b\uff1a</p> <pre><code>stcd config \\\n--home ~/.tmp-stcd\n# Example Output\n# {\n#   \"chain-id\": \"daodst_7000-1\",\n#   \"keyring-backend\": \"test\",\n#   \"output\": \"text\",\n#   \"node\": \"tcp://localhost:26657\",\n#   \"broadcast-mode\": \"sync\"\n# }\n</code></pre> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u66f4\u6539\u200b\u7aef\u9ede\u200b\u4f86\u200b\u8a2d\u7f6e\u200b\u7bc0\u9ede\u200b\u914d\u7f6e\u200b\u4ee5\u5c07\u200b\u8acb\u200b\u6c42\u767c\u200b\u9001\u5230\u200b\u4e0d\u540c\u200b\u7684\u200b\u7db2\u7d61\u200b\uff1a</p> <pre><code>stcd config node [tendermint-rpc-endpoint] \\\n--home ~/.tmp-stcd\n</code></pre> <p>\u200b\u6b64\u8655\u200b \u200b\u4e86\u89e3\u200b\u66f4\u591a\u200b\u7bc0\u9ede\u200b\u914d\u7f6e\u200b\u3002</p>"},{"location":"protocol/stcd/#_7","title":"\u67e5\u8a62","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b<code>stcd query</code>\uff08\u200b\u7c21\u7a31\u200b<code>stcd q</code>\uff09\u200b\u67e5\u8a62\u200b\u5340\u584a\u200b\u93c8\u200b\u4e0a\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002\u200b\u6309\u200b\u5176\u200b\u67e5\u770b\u200b\u8cec\u6236\u200b\u9918\u984d\u200b \u200b\u5b58\u5132\u200b\u5728\u200b\u9280\u884c\u200b\u6a21\u584a\u200b\u4e2d\u200b\u7684\u200b\u5730\u5740\u200b\uff0c\u200b\u4f7f\u7528\u200b\uff1a</p> <pre><code>stcd q bank balances [adress] \\\n--home ~/.tmp-stcd\n# # Example Output:\n# balances:\n# - amount: \"99999000000000000000002500\"\n#   denom: dst\n</code></pre> <p>\u200b\u8981\u200b\u67e5\u770b\u200b\u5176\u4ed6\u200b\u53ef\u7528\u200b\u7684\u200b\u67e5\u8a62\u200b\u547d\u4ee4\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b\uff1a</p> <pre><code># for all Queries\nstcd q\n\n# for querying commands in the bank module\nstcd q bank\n</code></pre>"},{"location":"protocol/stcd/#_8","title":"\u4ea4\u6613","text":"<p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b<code>stcd tx</code>\u200b\u5411\u200b\u7db2\u7d61\u200b\u63d0\u4ea4\u200b\u4ea4\u6613\u200b\u3002\u200b\u9019\u5728\u200b\u4e00\u500b\u200b\u547d\u4ee4\u200b\u4e2d\u200b\u5275\u5efa\u200b\u3001\u200b\u7c3d\u540d\u200b\u548c\u200b\u5ee3\u64ad\u200b tx\u3002\u200b\u8981\u200b\u4f7f\u7528\u200b bank \u200b\u6a21\u584a\u5c07\u200b\u4ee4\u724c\u200b\u5f9e\u5bc6\u200b\u9470\u200b\u74b0\u4e2d\u200b\u7684\u200b\u5e33\u6236\u200b\u767c\u200b\u9001\u5230\u200b\u53e6\u200b\u4e00\u500b\u200b\u5730\u5740\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b\uff1a</p> <pre><code>stcd tx bank send [from_key_or_address] [to_address] [amount] \\\n--home ~/.tmp-stcd \\\n--fees 50000000000dst \\\n-b block\n\n# Example Output:\n# ...\n# txhash: 7BA2618295B789CC24BB13E654D9187CDD264F61FC446EB756EAC07AF3E7C40A\n</code></pre> <p>\u200b\u8981\u200b\u67e5\u770b\u200b\u5176\u4ed6\u200b\u53ef\u7528\u200b\u7684\u200b\u4e8b\u52d9\u200b\u547d\u4ee4\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b\uff1a</p> <pre><code># for all transaction commands\nstcd tx\n\n# for Bank transaction subcommands\nstcd tx bank\n</code></pre> <p>\u200b\u73fe\u5728\u200b\u60a8\u200b\u5df2\u7d93\u200b\u4e86\u89e3\u200b\u77ad\u200b\u5982\u4f55\u200b\u904b\u884c\u200b Daodst \u200b\u7db2\u7d61\u4e26\u200b\u8207\u200b\u4e4b\u200b\u4ea4\u4e92\u200b\u7684\u200b\u57fa\u790e\u200b\u77e5\u8b58\u200b\uff0c\u200b\u8acb\u200b\u8f49\u5230\u200b \u200b\u914d\u7f6e\u200b \u200b\u9032\u884c\u200b\u9032\u200b\u4e00\u6b65\u200b\u7684\u200b\u81ea\u5b9a\u7fa9\u200b\u3002</p>"},{"location":"protocol/stcd/command/","title":"CLI \u200b\u547d\u4ee4","text":""},{"location":"protocol/stcd/command/#cli_1","title":"CLI \u200b\u6a19\u8a8c","text":"<p>\u200b\u4e0b\u9762\u200b\u5217\u51fa\u200b\u4e86\u200b stcd \u200b\u7684\u200b\u5e38\u7528\u200b\u6a19\u8a8c\u200b\u5217\u8868\u200b\uff1a</p> \u200b\u9078\u9805\u200b \u200b\u8aaa\u660e\u200b \u200b\u985e\u578b\u200b \u200b\u9ed8\u200b\u8a8d\u503c\u200b <code>--chain-id</code> \u200b\u5168\u93c8\u200bID <code>string</code> <code>\"\"</code> <code>--home</code> \u200b\u914d\u7f6e\u200b\u548c\u200b\u6578\u64da\u200b\u76ee\u9304\u200b <code>string</code> <code>\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u6240\u5728\u200b\u76ee\u9304\u200b/.stcd</code> <code>--keyring-backend</code> \u200b\u9078\u64c7\u5bc6\u200b\u9470\u74b0\u200b\u7684\u200b\u5f8c\u200b\u7aef\u200b <code>string</code> <code>\"os\"</code> <code>--output</code> \u200b\u8f38\u51fa\u200b\u683c\u5f0f\u200b <code>string</code> <code>\"text\"</code> <code>--node</code> Tendermint RPC \u200b\u63a5\u53e3\u200b\u5730\u5740\u200b <code>&lt;host&gt;:&lt;port&gt;</code> <code>\"tcp://localhost:26657\"</code> <code>--from</code> \u200b\u7528\u200b\u65bc\u200b\u7c3d\u540d\u200b\u7684\u200b\u5e33\u6236\u200b\u7684\u200b\u540d\u7a31\u200b\u6216\u200b\u5730\u5740\u200b <code>string</code> <code>\"\"</code>"},{"location":"protocol/stcd/command/#_1","title":"\u547d\u4ee4\u200b\u5217\u8868","text":"<p>\u200b\u5e38\u7528\u200b\u7684\u200b <code>stcd</code> \u200b\u547d\u4ee4\u200b\u5217\u8868\u200b\u3002\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>stcd -h</code> \u200b\u547d\u4ee4\u200b\u7372\u53d6\u200b\u5b8c\u6574\u200b\u5217\u8868\u200b\u3002</p> \u200b\u547d\u4ee4\u200b \u200b\u8aaa\u660e\u200b \u200b\u5b50\u200b\u547d\u4ee4\u200b (example) <code>keys</code> \u200b\u5bc6\u9470\u200b\u7ba1\u7406\u200b <code>list</code>, <code>show</code>, <code>add</code>, <code>add --recover</code>, <code>delete</code> <code>tx</code> \u200b\u4ea4\u6613\u200b\u5b50\u200b\u547d\u4ee4\u200b <code>bank send</code>, <code>ibc-transfer transfer</code>, <code>distribution withdraw-all-rewards</code> <code>query</code> \u200b\u67e5\u8a62\u5b50\u200b\u547d\u4ee4\u200b <code>bank balance</code>, <code>staking validators</code>, <code>gov proposals</code> <code>tendermint</code> Tendermint \u200b\u5b50\u200b\u547d\u4ee4\u200b <code>show-address</code>, <code>show-node-id</code>, <code>version</code> <code>config</code> Client \u200b\u914d\u7f6e\u200b <code>init</code> \u200b\u521d\u59cb\u5316\u200bdaodst <code>daemon</code> \u200b\u555f\u52d5\u200bdaodst <code>version</code> Daodst\u200b\u7248\u672c\u200b <code>validate-genesis</code> \u200b\u9a57\u8b49\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b <code>status</code> Query \u200b\u9060\u7a0b\u200b\u7bc0\u9ede\u200b\u72c0\u614b"},{"location":"protocol/stcd/config/","title":"\u914d\u7f6e","text":"<p>\uff03 \u200b\u914d\u7f6e\u200b</p> <p>\u200b\u4ee5\u4e0b\u200b\u9801\u200b\u9762\u5c07\u200b\u6307\u5c0e\u200b\u60a8\u200b\u5b8c\u6210\u200b\u7bc0\u9ede\u200b\u548c\u200b\u5ba2\u6236\u200b\u7aef\u7684\u200b\u914d\u7f6e\u200b\u3002 \u200b\u8a72\u200b\u7bc0\u9ede\u200b\u7528\u200b\u65bc\u200b\u904b\u884c\u5340\u200b\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u3001\u200b\u751f\u7522\u5340\u200b\u584a\u200b\u548c\u200b\u9a57\u8b49\u200b\u4ea4\u6613\u200b\u3002 \u200b\u5ba2\u6236\u200b\u7aef\u200b\u7528\u4f5c\u200b\u7db2\u95dc\u200b\uff0c\u200b\u901a\u904e\u200b\u767c\u9001\u200b\u4ea4\u6613\u200b\u548c\u200b\u67e5\u8a62\u200b\u72c0\u614b\u200b\u8207\u200b\u5340\u584a\u200b\u934a\u200b\u7db2\u7d61\u200b\u9032\u884c\u200b\u4ea4\u4e92\u200b\u3002 \u200b\u6b64\u5916\u200b\uff0c\u200b\u6211\u5011\u200b\u9084\u4ecb\u7d39\u200b\u4e86\u200b \u200b\u904b\u884c\u200b JSON-RPC \u200b\u670d\u52d9\u5668\u200b\u3002</p> <p>\u200b\u9019\u4e9b\u200b\u914d\u7f6e\u200b\u6703\u200b\u5f71\u97ff\u200b\u7bc0\u9ede\u200b\u7684\u200b\u6027\u80fd\u200b\u3001\u200b\u5b89\u5168\u6027\u200b\u548c\u200b\u529f\u80fd\u200b\u3002 \u200b\u56e0\u6b64\u200b\uff0c\u200b\u4e86\u89e3\u200b\u4e26\u6b63\u78ba\u200b\u914d\u7f6e\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u548c\u200b\u5ba2\u6236\u200b\u7aef\u200b\u81f3\u95dc\u200b\u91cd\u8981\u200b\u3002</p>"},{"location":"protocol/stcd/config/#_1","title":"\u914d\u7f6e\u200b\u548c\u200b\u6578\u64da\u200b\u76ee\u9304","text":"<p>\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u60a8\u200b\u7684\u200b\u914d\u7f6e\u200b\u548c\u200b\u6578\u64da\u200b\u5b58\u5132\u200b\u5728\u4f4d\u200b\u65bc\u200b ~/.stcd \u200b\u76ee\u9304\u200b\u7684\u200b\u6587\u4ef6\u200b\u593e\u4e2d\u200b\u3002 \u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>--home</code> \u200b\u6a19\u8a8c\u200b\u8f15\u200b\u9b06\u200b\u66f4\u6539\u200b\u9ed8\u8a8d\u200b\u76ee\u9304\u200b\u3002 \u200b\u8acb\u52d9\u5fc5\u200b\u6ce8\u610f\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u6709\u591a\u500b\u200b\u4e3b\u76ee\u9304\u200b\uff0c\u200b\u6bcf\u500b\u200b\u4e3b\u76ee\u9304\u200b\u4ee3\u8868\u200b\u4e0d\u540c\u200b\u7684\u200b\u5340\u584a\u200b\u93c8\u200b\u3002</p> <pre><code>.                                   # ~/.stcd\n  \u251c\u2500\u2500 data/                           # Contains the databases used by the node.\n  \u2514\u2500\u2500 config/\n      \u251c\u2500\u2500 app.toml                   # Application-related configuration file.\n      \u251c\u2500\u2500 config.toml                # Tendermint-related configuration file.\n      \u251c\u2500\u2500 genesis.json               # The genesis file.\n      \u251c\u2500\u2500 node_key.json              # Private key to use for node authentication in the p2p protocol.\n      \u2514\u2500\u2500 priv_validator_key.json    # Private key to use as a validator in the consensus protocol.\n</code></pre> <p>\u200b\u6307\u5b9a\u200b<code>stcd</code>\u200b\u914d\u7f6e\u200b\u548c\u200b\u6578\u64da\u200b\u5b58\u5132\u200b\u76ee\u9304\u200b\uff1b\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u5168\u5c40\u200b\u6a19\u8a8c\u200b <code>--home &lt;directory&gt;</code> \u200b\u66f4\u65b0\u200b\u5b83\u200b\u3002</p>"},{"location":"protocol/stcd/config/#_2","title":"\u7bc0\u9ede\u200b\u914d\u7f6e","text":"<p>Cosmos SDK \u200b\u5728\u200b <code>~/.stcd/config</code> \u200b\u4e2d\u81ea\u52d5\u200b\u751f\u6210\u200b\u5169\u500b\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff1a</p> <ul> <li><code>config.toml</code>\uff1a\u200b\u7528\u200b\u65bc\u200b\u914d\u7f6e\u200b Tendermint\uff0c\u200b\u5728\u200b Tendermint \u200b\u7684\u200b\u6587\u6a94\u200b \u200b\u4e2d\u200b\u4e86\u89e3\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c- <code>app.toml</code> \uff1a\u200b\u7531\u200b Cosmos SDK \u200b\u751f\u6210\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u914d\u7f6e\u200b\u60a8\u200b\u7684\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u4f8b\u5982\u200b\u72c0\u614b\u200b\u4fee\u526a\u200b\u7b56\u7565\u200b\u3001\u200b\u9059\u6e2c\u200b\u3001gRPC \u200b\u548c\u200b REST \u200b\u670d\u52d9\u5668\u200b\u914d\u7f6e\u200b\u3001\u200b\u72c0\u614b\u200b\u540c\u6b65\u200b\u3001JSON-RPC \u200b\u7b49\u200b\u3002</li> </ul> <p>\u200b\u9019\u5169\u500b\u200b\u6587\u4ef6\u200b\u90fd\u200b\u6709\u200b\u5927\u91cf\u200b\u8a55\u8ad6\u200b\uff0c\u200b\u8acb\u200b\u76f4\u63a5\u200b\u53c3\u8003\u200b\u5b83\u5011\u200b\u4ee5\u200b\u8abf\u6574\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u3002</p> <p>\u200b\u4e00\u500b\u200b\u8981\u200b\u8abf\u6574\u200b\u7684\u200b\u793a\u4f8b\u200b\u914d\u7f6e\u200b\u662f\u200b <code>app.toml</code> \u200b\u4e2d\u200b\u7684\u200b <code>minimum-gas-prices</code> \u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u5b83\u5b9a\u200b\u7fa9\u4e86\u200b\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u9858\u610f\u200b\u63a5\u53d7\u200b\u7684\u200b\u7528\u200b\u65bc\u200b\u8655\u7406\u200b\u4ea4\u6613\u200b\u7684\u200b\u6700\u5c0f\u200b\u6578\u91cf\u200b\u3002\u200b\u9019\u662f\u200b\u4e00\u7a2e\u200b\u53cd\u5783\u573e\u200b\u90f5\u4ef6\u200b\u6a5f\u5236\u200b\uff0c\u200b\u5b83\u5c07\u200b\u62d2\u7d55\u200b\u4f4e\u200b\u65bc\u200b\u6700\u4f4e\u200b gas \u200b\u50f9\u683c\u200b\u7684\u200b\u50b3\u5165\u200b\u4ea4\u6613\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5b83\u200b\u662f\u200b\u7a7a\u200b\u7684\u200b\uff0c\u200b\u8acb\u200b\u78ba\u4fdd\u200b\u4f7f\u7528\u200b\u4e00\u4e9b\u200b\u503c\u200b\u7de8\u8f2f\u200b\u8a72\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u4f8b\u5982\u200b<code>0dst</code>\uff0c\u200b\u5426\u5247\u200b\u7bc0\u9ede\u5c07\u200b\u5728\u200b\u555f\u52d5\u6642\u200b\u505c\u6b62\u200b\u3002</p> <pre><code> # The minimum gas prices a validator is willing to accept for processing a\n # transaction. A transaction's fees must meet the minimum of any denomination\n # specified in this config (e.g. 0.25token1;0.0001token2).\n minimum-gas-prices = \"0dst\"\n</code></pre>"},{"location":"protocol/stcd/config/#_3","title":"\u72c0\u614b\u200b\u4fee\u526a","text":"<p>\u200b\u4fee\u526a\u200b\u72c0\u614b\u200b\u6709\u200b\u56db\u7a2e\u200b\u7b56\u7565\u200b\u3002\u200b\u9019\u4e9b\u200b\u7b56\u7565\u200b\u53ea\u200b\u9069\u7528\u200b\u65bc\u200b\u72c0\u614b\u200b\uff0c\u200b\u4e0d\u200b\u9069\u7528\u200b\u65bc\u200b\u584a\u200b\u5b58\u5132\u200b\u3002 \u200b\u8981\u200b\u8a2d\u7f6e\u200b\u4fee\u526a\u200b\uff0c\u200b\u8acb\u200b\u8abf\u6574\u200b <code>~/.stcd/config/app.toml</code> \u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b <code>pruning</code> \u200b\u53c3\u6578\u200b\u3002 \u200b\u4ee5\u4e0b\u200b\u4fee\u526a\u200b\u72c0\u614b\u200b\u8a2d\u7f6e\u200b\u53ef\u7528\u200b\uff1a</p> <ul> <li><code>everything</code>\uff1a\u200b\u4fee\u526a\u200b\u7576\u524d\u200b\u72c0\u614b\u200b\u4ee5\u5916\u200b\u7684\u200b\u6240\u6709\u200b\u4fdd\u5b58\u200b\u72c0\u614b\u200b\u3002</li> <li><code>nothing</code>\uff1a\u200b\u4fdd\u5b58\u200b\u6240\u6709\u200b\u72c0\u614b\u200b\uff0c\u200b\u4e0d\u200b\u522a\u9664\u200b\u4efb\u4f55\u200b\u5167\u5bb9\u200b\u3002</li> <li><code>default</code>\uff1a\u200b\u4fdd\u5b58\u200b\u6700\u200b\u5f8c\u200b 100 \u200b\u500b\u200b\u72c0\u614b\u200b\u548c\u200b\u6bcf\u200b 10,000 \u200b\u500b\u584a\u200b\u7684\u200b\u72c0\u614b\u200b\u3002</li> <li><code>custom</code>\uff1a\u200b\u4f7f\u7528\u200b <code>pruning-keep-recent</code>\u3001<code>pruning-keep-every</code> \u200b\u548c\u200b <code>pruning-interval</code> \u200b\u53c3\u6578\u200b\u6307\u5b9a\u200b\u4fee\u526a\u200b\u8a2d\u7f6e\u200b\u3002</li> </ul> <p>\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u6bcf\u500b\u200b\u7bc0\u9ede\u200b\u90fd\u200b\u8655\u200b\u65bc\u200b<code>default</code> \u200b\u6a21\u5f0f\u200b\uff0c\u200b\u9019\u662f\u200b\u5927\u591a\u200b\u6578\u74b0\u5883\u200b\u7684\u200b\u63a8\u85a6\u200b\u8a2d\u7f6e\u200b\u3002 \u200b\u5982\u679c\u200b\u4f60\u200b\u60f3\u200b\u6539\u8b8a\u200b\u4f60\u200b\u7684\u200b\u7bc0\u9ede\u200b\u4fee\u526a\u200b\u7b56\u7565\u200b\uff0c\u200b\u90a3\u9ebc\u200b\u4f60\u200b\u5fc5\u9808\u200b\u5728\u200b\u7bc0\u9ede\u200b\u521d\u59cb\u5316\u200b\u6642\u200b\u9019\u6a23\u200b\u505a\u200b\u3002\u200b\u5728\u200b\u555f\u52d5\u200b <code>daodst</code> \u200b\u6642\u50b3\u905e\u200b\u4e00\u500b\u200b\u6a19\u8a8c\u200b\u5c07\u59cb\u200b\u7d42\u8986\u84cb\u200b <code>app.toml</code> \u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u8a2d\u7f6e\u200b\uff0c\u200b\u5982\u679c\u200b\u60a8\u200b\u60f3\u200b\u5c07\u7bc0\u9ede\u200b\u66f4\u6539\u200b\u70ba\u200b <code>everything</code> \u200b\u6a21\u5f0f\u200b\uff0c\u200b\u90a3\u9ebc\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5728\u200b\u8abf\u7528\u200b\u6642\u200b\u50b3\u905e\u200b <code>--pruning everything</code> \u200b\u6a19\u8a8c\u200b<code>stcd stc-start</code>\u3002</p> <p>\ud83d\udea8 \u200b\u5371\u96aa\u200b\uff1a \u200b\u7576\u4f60\u200b\u4fee\u526a\u200b\u72c0\u614b\u200b\u6642\u200b\uff0c\u200b\u4f60\u200b\u5c07\u7121\u6cd5\u200b\u67e5\u8a62\u200b\u5df2\u200b\u88ab\u200b\u4fee\u526a\u200b\u6389\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u3002</p>"},{"location":"protocol/stcd/config/#_4","title":"\u5ba2\u6236\u200b\u7aef\u200b\u914d\u7f6e","text":"<p>\u200b\u6211\u5011\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>stcd config</code> \u200b\u547d\u4ee4\u200b\u67e5\u770b\u200b\u9ed8\u8a8d\u200b\u7684\u200b\u5ba2\u6236\u200b\u7aef\u200b\u914d\u7f6e\u200b\u8a2d\u7f6e\u200b\uff1a</p> <pre><code>stcd config\n{\n \"chain-id\": \"\",\n \"keyring-backend\": \"os\",\n \"output\": \"text\",\n \"node\": \"tcp://localhost:26657\",\n \"broadcast-mode\": \"sync\"\n}\n</code></pre> <p>\u200b\u6211\u5011\u200b\u53ef\u4ee5\u200b\u6839\u64da\u200b\u81ea\u5df1\u200b\u7684\u200b\u9078\u64c7\u200b\u5c0d\u9ed8\u8a8d\u200b\u8a2d\u7f6e\u200b\u9032\u884c\u200b\u66f4\u6539\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5b83\u200b\u5141\u8a31\u200b\u7528\u6236\u200b\u4e00\u6b21\u6027\u200b\u9810\u5148\u200b\u8a2d\u7f6e\u200b\u6240\u6709\u200b\u914d\u7f6e\u200b\uff0c\u200b\u9019\u6a23\u200b\u4e4b\u200b\u5f8c\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b\u7684\u200b\u914d\u7f6e\u200b\u4e86\u200b\u3002</p> <p>\u200b\u4f8b\u5982\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u5c07\u93c8\u200b\u6a19\u8b58\u7b26\u200b\u5f9e\u200b\u7a7a\u767d\u200b\u540d\u7a31\u200b\u66f4\u6539\u200b\u70ba\u200b <code>daodst_7000-1</code>\uff1a</p> <pre><code>stcd config \"chain-id\" daodst_7000-1\nstcd config\n{\n \"chain-id\": \"daodst_7000-1\",\n \"keyring-backend\": \"os\",\n \"output\": \"text\",\n \"node\": \"tcp://localhost:26657\",\n \"broadcast-mode\": \"sync\"\n}\n</code></pre> <p>\u200b\u53ef\u4ee5\u200b\u7528\u200b\u540c\u6a23\u200b\u7684\u200b\u65b9\u5f0f\u200b\u66f4\u6539\u200b\u5176\u4ed6\u200b\u503c\u200b\u3002</p> <p>\u200b\u6216\u8005\u200b\uff0c\u200b\u6211\u5011\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u5728\u200b client.toml \u200b\u7684\u200b\u4e00\u500b\u200b\u5730\u65b9\u200b\u66f4\u6539\u200b\u914d\u7f6e\u200b\u503c\u200b\u3002</p> <p>\u200b\u5728\u200b\u6211\u5011\u200b\u5b89\u88dd\u200bdaodst\u200b\u7684\u200b\u6587\u4ef6\u200b\u593e\u4e2d\u200b\u7684\u200b<code>.stcd/config/client.toml</code>\u200b\u8def\u5f91\u200b\u4e0b\u200b\uff1a</p> <pre><code>############################################################################\n### Client Configuration ###\n\n############################################################################\n\n# The network chain ID\n\nchain-id = \"daodst_7000-1\"\n\n# The keyring's backend, where the keys are stored (os|file|kwallet|pass|test|memory)\n\nkeyring-backend = \"os\"\n\n# CLI output format (text|json)\n\noutput = \"number\"\n\n# &lt;host&gt;:&lt;port&gt; to Tendermint RPC interface for this chain\n\nnode = \"tcp://localhost:26657\"\n\n# Transaction broadcasting mode (sync|async|block)\n\nbroadcast-mode = \"sync\"\n</code></pre> <p>\u200b\u5728\u200b <code>client.toml</code> \u200b\u4e2d\u200b\u9032\u884c\u200b\u5fc5\u8981\u200b\u7684\u200b\u66f4\u6539\u200b\u5f8c\u200b\uff0c\u200b\u7136\u200b\u5f8c\u200b\u4fdd\u5b58\u200b\u3002\u200b\u6bd4\u5982\u200b\u6211\u5011\u200b\u76f4\u63a5\u200b\u628a\u200bchain-id\u200b\u5f9e\u200b<code>daodst_7000-1</code>\u200b\u6539\u6210\u200b<code>daodst_7000-2</code>\uff0c\u200b\u8f38\u51fa\u200b\u6210\u200bnumber\uff0c\u200b\u6703\u77ac\u9593\u200b\u8b8a\u200b\u5982\u4e0b\u200b\u5716\u200b\u3002</p> <pre><code>stcd config\n{\n \"chain-id\": \"daodst_7000-2\",\n \"keyring-backend\": \"os\",\n \"output\": \"number\",\n \"node\": \"tcp://localhost:26657\",\n \"broadcast-mode\": \"sync\"\n}\n</code></pre>"},{"location":"protocol/stcd/config/#json-rpc","title":"\u904b\u884c\u200b JSON-RPC \u200b\u670d\u52d9\u5668","text":"<p>\u200b\u672c\u7bc0\u200b\u4ecb\u7d39\u200b\u555f\u7528\u200b JSON-RPC \u200b\u670d\u52d9\u5668\u200b\u7684\u200b\u6b65\u9a5f\u200b\u3002 JSON-RPC \u200b\u5728\u200b\u591a\u7a2e\u200b\u50b3\u8f38\u200b\u4e0a\u200b\u63d0\u4f9b\u200b\u3002 Daodst \u200b\u652f\u6301\u200b\u57fa\u200b\u65bc\u200b HTTP \u200b\u548c\u200b WebSocket \u200b\u7684\u200b JSON-RPC\u3002 \u200b\u5c31\u200b\u8981\u6c42\u200b\u800c\u8a00\u200b\uff0c\u200b\u6211\u5011\u200b\u5efa\u8b70\u200b\u4f7f\u7528\u200b\u81f3\u5c11\u200b 8 \u200b\u6838\u200b CPU \u200b\u548c\u200b 64GB RAM \u200b\u7684\u200b\u670d\u52d9\u5668\u200b\u3002 \u200b\u60a8\u200b\u5fc5\u9808\u200b\u5728\u200b\u9632\u706b\u200b\u7246\u4e0a\u200b\u6253\u958b\u200b\u7aef\u53e3\u200b 8545 \u200b\u548c\u200b 8546\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a\u200b\u9664\u975e\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u5728\u200b\u672c\u5730\u200b\u5b58\u5132\u5340\u200b\u584a\u200b\u93c8\u200b\u7684\u200b\u6574\u500b\u200b\u526f\u672c\u200b\uff0c\u200b\u5426\u5247\u200b\u60a8\u200b\u4e0d\u80fd\u200b\u4f7f\u7528\u200b\u6240\u6709\u200b JSON RPC \u200b\u65b9\u6cd5\u200b\u3002\u200b\u60a8\u200b\u9700\u8981\u200b\u6211\u5011\u200b\u7db2\u7d61\u200b\u7684\u200b\u6a94\u6848\u200b/\u200b\u5feb\u7167\u200b\u55ce\u200b\uff1f\u200b\u8f49\u5230\u200b\u672c\u7bc0\u200b\u3002</p>"},{"location":"protocol/stcd/config/#_5","title":"\u555f\u7528\u200b\u670d\u52d9\u5668","text":"<p>\u200b\u8981\u200b\u555f\u7528\u200b RPC \u200b\u670d\u52d9\u5668\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u6a19\u8a8c\u200b\uff08\u200b\u9ed8\u8a8d\u200b\u8a2d\u7f6e\u200b\u70ba\u200b true\uff09\u3002</p> <pre><code>stcd start --json-rpc.enable\n</code></pre>"},{"location":"protocol/stcd/config/#_6","title":"\u5b9a\u7fa9\u200b\u547d\u540d\u200b\u7a7a\u9593","text":"<p><code>Eth</code>\u3001<code>Net</code> \u200b\u548c\u200b <code>Web3</code> \u200b\u547d\u540d\u200b\u7a7a\u9593\u200b\u9ed8\u8a8d\u200b\u555f\u7528\u200b\uff0c\u200b\u4f46\u200b\u5c0d\u200b\u65bc\u200b JSON-RPC\uff0c\u200b\u60a8\u200b\u9700\u8981\u200b\u6dfb\u52a0\u200b\u66f4\u200b\u591a\u200b\u547d\u540d\u200b\u7a7a\u9593\u200b\u3002 \u200b\u70ba\u200b\u4e86\u200b\u555f\u7528\u200b\u5176\u4ed6\u200b\u547d\u540d\u200b\u7a7a\u9593\u200b\uff0c\u200b\u8acb\u200b\u7de8\u8f2f\u200b app.toml \u200b\u6587\u4ef6\u200b\u3002</p> <pre><code># API defines a list of JSON-RPC namespaces that should be enabled\n# Example: \"eth,txpool,personal,net,debug,web3\"\napi = \"eth,net,web3,txpool,debug,personal\"\n</code></pre>"},{"location":"protocol/stcd/config/#gas","title":"\u8a2d\u7f6e\u200b\u4e00\u500b\u200b Gas \u200b\u91cf","text":"<p><code>eth_call</code> \u200b\u548c\u200b <code>eth_estimateGas</code> \u200b\u70ba\u200b DoS \u200b\u4fdd\u8b77\u5b9a\u200b\u7fa9\u4e86\u200b\u4e00\u500b\u200b\u5168\u5c40\u200b gas cap over rpc\u3002\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u5728\u200b app.toml \u200b\u4e2d\u50b3\u905e\u200b\u81ea\u5b9a\u200b\u7fa9\u503c\u200b\u4f86\u200b\u8986\u84cb\u9ed8\u8a8d\u200b\u7684\u200b gas cap \u200b\u503c\u200b 25,000,000\uff1a</p> <pre><code># GasCap sets a cap on gas that can be used in eth_call/estimateGas (0=infinite). Default: 25,000,000.\ngas-cap = 25000000\n</code></pre>"},{"location":"protocol/stcd/config/#cors","title":"CORS","text":"<p>\u200b\u5982\u679c\u200b\u5f9e\u200b\u700f\u89bd\u5668\u200b\u8a2a\u554f\u200b RPC\uff0c\u200b\u5247\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b\u9069\u7576\u200b\u7684\u200b\u57df\u200b\u96c6\u555f\u200b\u7528\u200b CORS\u3002\u200b\u5426\u5247\u200b\uff0cJavaScript \u200b\u8abf\u7528\u200b\u53d7\u200b\u540c\u6e90\u200b\u7b56\u7565\u200b\u9650\u5236\u200b\uff0c\u200b\u8acb\u6c42\u200b\u5c07\u5931\u6557\u200b\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u5f9e\u200b <code>app.toml</code> \u200b\u66f4\u65b0\u200b CORS \u200b\u8a2d\u7f6e\u200b</p> <pre><code>###############################################################################\n###                           API Configuration                             ###\n###############################################################################\n\n[api]\n\n# ...\n\n# EnableUnsafeCORS defines if CORS should be enabled (unsafe - use it at your own risk).\nenabled-unsafe-cors = true # default false\n</code></pre>"},{"location":"protocol/stcd/config/#_7","title":"\u4fee\u526a","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u4f7f\u200b\u6240\u6709\u200b\u65b9\u6cd5\u200b\u6b63\u5e38\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u5fc5\u9808\u200b\u662f\u200b\u5b58\u6a94\u200b\u7684\u200b\uff08\u200b\u5728\u200b\u672c\u5730\u200b\u5b58\u5132\u5340\u200b\u584a\u200b\u93c8\u200b\u7684\u200b\u6574\u500b\u200b\u526f\u672c\u200b\uff09\u3002\u200b\u5fc5\u9808\u200b\u7981\u7528\u200b\u4fee\u526a\u200b\u3002 \u200b\u4fee\u526a\u200b\u8a2d\u7f6e\u200b\u53ef\u4ee5\u200b\u5f9e\u200b <code>app.toml</code> \u200b\u66f4\u65b0\u200b</p> <pre><code>###############################################################################\n###                           Base Configuration                            ###\n###############################################################################\n\n# The minimum gas prices a validator is willing to accept for processing a\n# transaction. A transaction's fees must meet the minimum of any denomination\n# specified in this config (e.g. 0.25token1;0.0001token2).\n\n# ...\n\n# default: the last 100 states are kept in addition to every 500th state; pruning at 10 block intervals\n# nothing: all historic states will be saved, nothing will be deleted (i.e. archiving node)\n# everything: all saved states will be deleted, storing only the current state; pruning at 10 block intervals\n# custom: allow pruning options to be manually specified through 'pruning-keep-recent', 'pruning-keep-every', &gt;\npruning = \"nothing\"\npruning-keep-recent = \"0\"\npruning-keep-every = \"0\"\npruning-interval = \"0\"\n</code></pre>"},{"location":"protocol/stcd/config/#websocket","title":"WebSocket \u200b\u670d\u52d9\u5668","text":"<p>Websocket \u200b\u662f\u200b\u4e00\u7a2e\u200b\u96d9\u5411\u200b\u50b3\u8f38\u200b\u5354\u8b70\u200b\u3002 Websocket \u200b\u9023\u63a5\u200b\u7531\u200b\u5ba2\u6236\u200b\u7aef\u200b\u548c\u670d\u200b\u52d9\u5668\u200b\u7dad\u8b77\u200b\uff0c\u200b\u76f4\u5230\u200b\u5b83\u200b\u88ab\u200b\u4e00\u500b\u200b\u986f\u5f0f\u200b\u7d42\u6b62\u200b\u3002\u200b\u5927\u591a\u200b\u6578\u73fe\u200b\u4ee3\u200b\u700f\u89bd\u5668\u200b\u90fd\u200b\u652f\u6301\u200b Websocket\uff0c\u200b\u9019\u200b\u610f\u5473\u8457\u200b\u5b83\u200b\u6709\u200b\u5f88\u200b\u597d\u200b\u7684\u200b\u5de5\u5177\u200b\u3002</p> <p>\u200b\u56e0\u70ba\u200b Websocket \u200b\u662f\u200b\u96d9\u5411\u200b\u7684\u200b\uff0c\u200b\u670d\u52d9\u5668\u200b\u53ef\u4ee5\u200b\u5c07\u200b\u4e8b\u4ef6\u200b\u63a8\u9001\u200b\u7d66\u5ba2\u200b\u6236\u7aef\u200b\u3002\u200b\u9019\u200b\u4f7f\u5f97\u200b Websocket \u200b\u6210\u70ba\u200b\u6d89\u53ca\u200b\u4e8b\u4ef6\u200b\u8a02\u95b1\u200b\u7684\u200b\u7528\u4f8b\u200b\u7684\u200b\u4e0d\u932f\u200b\u9078\u64c7\u200b\u3002 Websocket \u200b\u7684\u200b\u53e6\u200b\u4e00\u500b\u200b\u597d\u200b\u8655\u200b\u662f\u200b\u5728\u200b\u63e1\u624b\u200b\u904e\u7a0b\u200b\u4e4b\u200b\u5f8c\u200b\uff0c\u200b\u55ae\u500b\u200b\u6d88\u606f\u200b\u7684\u200b\u958b\u92b7\u200b\u5f88\u200b\u4f4e\u200b\uff0c\u200b\u975e\u5e38\u200b\u9069\u5408\u200b\u767c\u9001\u200b\u5927\u91cf\u200b\u8acb\u6c42\u200b\u3002 \u200b\u53ef\u4ee5\u200b\u5f9e\u200b <code>app.toml</code> \u200b\u555f\u7528\u200b WebSocket \u200b\u670d\u52d9\u5668\u200b</p> <pre><code># Address defines the EVM WebSocket server address to bind to.\nws-address = \"0.0.0.0:8546\"\n</code></pre>"},{"location":"protocol/stcd/single-node/","title":"\u55ae\u7bc0\u9ede","text":"<p>\u200b\u5728\u200b\u6b64\u9801\u200b\u9762\u200b\u4e4b\u200b\u5f8c\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u624b\u52d5\u200b\u6216\u200b\u4f7f\u7528\u200b\u5df2\u7d93\u200b\u6e96\u5099\u200b\u597d\u200b\u7684\u200b\u81ea\u52d5\u5316\u200b\u8173\u672c\u200b\u904b\u884c\u200b\u55ae\u7bc0\u9ede\u200b\u672c\u5730\u200b\u7db2\u7d61\u200b\u3002\u200b\u904b\u884c\u200b\u55ae\u7bc0\u9ede\u200b\u8a2d\u7f6e\u200b\u5c0d\u200b\u65bc\u200b\u60f3\u8981\u200b\u6e2c\u8a66\u200b\u5176\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u548c\u200b\u5354\u8b70\u200b\u529f\u80fd\u200b\u7684\u200b\u958b\u200b\u767c\u4eba\u54e1\u200b\u975e\u5e38\u200b\u6709\u7528\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u200b\u7684\u200b\u7c21\u55ae\u6027\u200b\u548c\u200b\u901f\u5ea6\u200b\u3002\u200b\u5c0d\u200b\u65bc\u200b\u66f4\u200b\u8907\u200b\u96dc\u7684\u200b\u8a2d\u7f6e\u200b\uff0c\u200b\u8acb\u200b\u53c3\u8003\u200b\u591a\u200b\u7bc0\u9ede\u200b\u8a2d\u7f6e\u200b\u9801\u200b\u9762\u200b\u3002</p>"},{"location":"protocol/stcd/single-node/#_2","title":"\u5148\u6c7a\u200b\u689d\u4ef6","text":"<ul> <li>\u200b\u5b89\u88dd\u200b</li> </ul>"},{"location":"protocol/stcd/single-node/#_3","title":"\u81ea\u52d5\u5316\u200b\u8173\u672c","text":"<p>\u200b\u555f\u52d5\u200b\u672c\u5730\u200b Daodst \u200b\u7bc0\u9ede\u200b\u7684\u200b\u6700\u200b\u7c21\u55ae\u200b\u65b9\u6cd5\u200b\u662f\u200b\u4f7f\u7528\u200b\u63d0\u4f9b\u200b\u7684\u200b\u5e6b\u52a9\u200b\u8173\u672c\u200b\uff0c\u200b\u5b83\u200b\u5c07\u70ba\u200b\u6e2c\u8a66\u200b\u76ee\u7684\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u5408\u7406\u200b\u7684\u200b\u9ed8\u8a8d\u200b\u914d\u7f6e\u200b\uff1a</p> <pre><code>$ local_node.sh\n...\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u4f86\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88dd\u200b <code>stcd</code> \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f91\u200b</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u70ba\u200b\u4e86\u200b\u907f\u514d\u200b\u8986\u84cb\u200b\u751f\u7522\u4e2d\u200b\u4f7f\u7528\u200b\u7684\u200b\u771f\u5be6\u200b\u7bc0\u9ede\u200b\u7684\u200b\u4efb\u4f55\u200b\u6578\u64da\u200b\uff0c\u200b\u6c7a\u5b9a\u200b\u5c07\u81ea\u52d5\u200b\u751f\u6210\u200b\u7684\u200b\u6e2c\u8a66\u200b\u914d\u7f6e\u200b\u5b58\u5132\u200b\u5728\u200b <code>~/.tmp-stcd</code> \u200b\u800c\u200b\u4e0d\u662f\u200b\u9ed8\u8a8d\u200b\u7684\u200b <code>$install_path/.stcd</code> \u3002</p> <p>\u200b\u4f7f\u7528\u200b<code>local_node.sh</code>\u200b\u8173\u672c\u6642\u200b\uff0c\u200b\u6709\u200b\u5fc5\u8981\u200b\u4f7f\u7528\u200b<code>--home ~/.tmp-stcd</code>\u200b\u6a19\u8a8c\u200b\u64f4\u5c55\u200b\u6240\u6709\u200b\u4ee5\u200b\u672c\u5730\u200b\u6e2c\u8a66\u200b\u7bc0\u9ede\u200b\u70ba\u200b\u76ee\u6a19\u200b\u7684\u200b<code>stcd</code>\u200b\u547d\u4ee4\u200b\u3002\u200b\u9019\u662f\u200b\u5f37\u5236\u6027\u200b\u7684\u200b\uff0c\u200b\u56e0\u70ba\u200b <code>home</code> \u200b\u76ee\u9304\u200b\u4e0d\u80fd\u200b\u5b58\u5132\u200b\u5728\u200b <code>stcd</code> \u200b\u914d\u7f6e\u200b\u4e2d\u200b\uff0c\u200b\u9019\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4e0b\u9762\u200b\u7684\u200b\u8f38\u51fa\u200b\u4e2d\u200b\u770b\u5230\u200b\u3002\u200b\u70ba\u200b\u4e86\u200b\u4fbf\u200b\u65bc\u200b\u4f7f\u7528\u200b\uff0c\u200b\u5c07\u6b64\u200b\u76ee\u9304\u200b\u8def\u5f91\u200b\u5c0e\u51fa\u200b\u70ba\u200b\u74b0\u5883\u200b\u8b8a\u91cf\u200b\u53ef\u80fd\u200b\u662f\u200b\u660e\u667a\u200b\u7684\u200b\uff1a</p> <pre><code>$ export TMP=$HOME/.tmp-stcd`\n$ stcd config --home $TMP\n{\n\"chain-id\": \"daodst_7000-1\",\n\"keyring-backend\": \"test\",\n\"output\": \"text\",\n\"node\": \"tcp://localhost:26657\",\n\"broadcast-mode\": \"sync\"\n}\n</code></pre> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u66f4\u6539\u200b\u914d\u7f6e\u200b\u8b8a\u91cf\u200b\u4f86\u200b\u81ea\u5b9a\u7fa9\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b\u8173\u672c\u200b\u3002 \u200b\u6709\u95dc\u200b\u53ef\u8abf\u200b\u6574\u5167\u5bb9\u200b\u7684\u200b\u60f3\u6cd5\u200b\uff0c\u200b\u8acb\u200b\u53c3\u95b1\u200b\u4ee5\u4e0b\u200b\u8173\u672c\u200b\u6458\u9304\u200b\uff1a</p> <pre><code># Customize the name of your keys, the chain-id, moniker of the node, keyring backend, and more\nKEYS[0]=\"dev0\"\nKEYS[1]=\"dev1\"\nKEYS[2]=\"dev2\"\nCHAINID=\"daodst_7000-1\"\nMONIKER=\"localtestnet\"\n# Remember to change to other types of keyring like 'file' in-case exposing to outside world,\n# otherwise your balance will be wiped quickly\n# The keyring test does not require private key to steal tokens from you\nKEYRING=\"test\"\nKEYALGO=\"eth_secp256k1\"\nLOGLEVEL=\"info\"\n# Set dedicated home directory for the daodst instance\nHOMEDIR=\"$HOME/.tmp-stcd\"\n# to trace evm\n#TRACE=\"--trace\"\nTRACE=\"\"\n\n[...]\n\n  # Adjust this set a different maximum gas limit\n  jq '.consensus_params[\"block\"][\"max_gas\"]=\"10000000\"' \"$GENESIS\" &gt;\"$TMP_GENESIS\" &amp;&amp; mv \"$TMP_GENESIS\" \"$GENESIS\"\n\n[...]\n\n</code></pre>"},{"location":"protocol/stcd/single-node/#_4","title":"\u624b\u52d5\u200b\u90e8\u7f72","text":"<p>\u200b\u672c\u200b\u6307\u5357\u200b\u5e6b\u200b\u52a9\u60a8\u200b\u5275\u5efa\u200b\u55ae\u500b\u9a57\u200b\u8b49\u5668\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u8a72\u200b\u7bc0\u9ede\u200b\u5728\u200b\u672c\u5730\u200b\u904b\u884c\u200b\u7db2\u7d61\u200b\u4ee5\u7528\u200b\u65bc\u200b\u6e2c\u8a66\u200b\u548c\u200b\u5176\u4ed6\u200b\u958b\u767c\u200b\u76f8\u95dc\u200b\u7528\u9014\u200b\u3002</p>"},{"location":"protocol/stcd/single-node/#_5","title":"\u521d\u59cb\u5316\u200b\u93c8","text":"<p>\u200b\u5728\u200b\u5be6\u969b\u200b\u904b\u884c\u200b\u7bc0\u9ede\u200b\u4e4b\u524d\u200b\uff0c\u200b\u6211\u5011\u200b\u9700\u8981\u200b\u521d\u59cb\u5316\u200b\u93c8\u200b\uff0c\u200b\u6700\u200b\u91cd\u8981\u200b\u7684\u200b\u662f\u200b\u5b83\u200b\u7684\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\u3002\u200b\u9019\u662f\u200b\u901a\u904e\u200b <code>init</code> \u200b\u5b50\u200b\u547d\u4ee4\u200b\u5b8c\u6210\u200b\u7684\u200b\uff1a</p> <pre><code>$MONIKER=testing\n$KEY=dev0\n$CHAINID=\"daodst_7000-1\"\n\n# The argument $MONIKER is the custom username of your node, it should be human-readable.\nstcd init $MONIKER --chain-id=$CHAINID\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u60a8\u200b\u53ef\u4ee5\u200b\u7a0d\u5f8c\u901a\u904e\u200b\u66f4\u65b0\u200b <code>config.toml</code> \u200b\u6587\u4ef6\u200b\u4f86\u200b \u200b\u4fee\u6539\u200b \u200b\u9019\u500b\u200b moniker \u3002</p> <p>\u200b\u4e0a\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u5275\u5efa\u200b\u4e86\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u548c\u9a57\u200b\u8b49\u5668\u200b\u904b\u884c\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6240\u6709\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4e00\u500b\u200b\u9ed8\u8a8d\u200b\u7684\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5b83\u5b9a\u200b\u7fa9\u4e86\u200b\u7db2\u7d61\u200b\u7684\u200b\u521d\u59cb\u200b\u72c0\u614b\u200b\u3002\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u6240\u6709\u200b\u9019\u4e9b\u200b\u914d\u7f6e\u6587\u4ef6\u200b \u200b\u90fd\u200b\u5728\u200b<code>~/.stcd</code> \u200b\u4e2d\u200b\uff0c\u200b\u4f46\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u50b3\u905e\u200b<code>--home</code> \u200b\u6a19\u8a8c\u200b\u4f86\u200b\u8986\u84cb\u6b64\u200b\u6587\u4ef6\u200b\u593e\u7684\u200b\u4f4d\u7f6e\u200b\u3002</p>"},{"location":"protocol/stcd/single-node/#_6","title":"\u5275\u4e16\u200b\u7a0b\u5e8f","text":""},{"location":"protocol/stcd/single-node/#_7","title":"\u6dfb\u52a0\u200b\u5275\u4e16\u200b\u8cec\u6236","text":"<p>\u200b\u5728\u200b\u555f\u52d5\u93c8\u200b\u4e4b\u524d\u200b\uff0c\u200b\u60a8\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b keyring \u200b\u7528\u200b\u81f3\u5c11\u200b\u4e00\u500b\u200b\u5e33\u6236\u200b\u586b\u5145\u200b\u72c0\u614b\u200b\uff1a</p> <pre><code>stcd keys add my_validator\n</code></pre> <p>\u200b\u5275\u5efa\u200b\u672c\u5730\u200b\u5e33\u6236\u200b\u5f8c\u200b\uff0c\u200b\u7e7c\u7e8c\u200b\u5728\u200b\u93c8\u200b\u7684\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\u4e2d\u70ba\u200b\u5176\u200b\u6388\u4e88\u200b\u4e00\u4e9b\u200b<code>dst</code>\u200b\u4ee4\u724c\u200b\u3002\u200b\u9019\u6a23\u200b\u505a\u200b\u9084\u5c07\u200b\u78ba\u4fdd\u200b\u60a8\u200b\u7684\u200b\u93c8\u200b\u77e5\u9053\u200b\u6b64\u200b\u5e33\u6236\u200b\u7684\u200b\u5b58\u5728\u200b\uff1a</p> <pre><code>stcd add-genesis-account my_validator 10000000000dst\n</code></pre> <p>\u200b\u73fe\u5728\u200b\u60a8\u200b\u7684\u200b\u5e33\u6236\u200b\u5df2\u7d93\u200b\u6709\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u4ee3\u5e63\u200b\uff0c\u200b\u60a8\u200b\u9700\u8981\u200b\u5411\u200b\u60a8\u200b\u7684\u200b\u93c8\u200b\u6dfb\u52a0\u200b\u4e00\u500b\u9a57\u200b\u8b49\u5668\u200b\u3002</p> <p>\u200b\u5c0d\u200b\u65bc\u200b\u672c\u200b\u6307\u5357\u200b\uff0c\u200b\u60a8\u5c07\u200b\u6dfb\u52a0\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b\uff08\u200b\u901a\u904e\u200b\u4e0a\u9762\u200b\u7684\u200b<code>init</code>\u200b\u547d\u4ee4\u200b\u5275\u5efa\u200b\uff09\u200b\u4f5c\u70ba\u200b\u93c8\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u3002 \u200b\u9a57\u8b49\u5668\u200b\u53ef\u4ee5\u200b\u5728\u200b\u93c8\u200b\u9996\u6b21\u200b\u555f\u52d5\u200b\u4e4b\u524d\u200b\u901a\u904e\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5305\u542b\u200b\u7684\u200b\u7a31\u200b\u70ba\u200b<code>gentx</code>\u200b\u7684\u200b\u7279\u6b8a\u200b\u4ea4\u6613\u200b\u4f86\u200b\u8072\u660e\u200b\uff1a</p> <pre><code># Create a gentx\n# NOTE: this command lets you set the number of coins.\n# Make sure this account has some coins with the genesis.app_state.staking.params.bond_denom denom\nstcd add-genesis-account my_validator 1000000000dst,10000000000fm\n</code></pre> <p><code>gentx</code> \u200b\u505a\u200b\u4e09\u4ef6\u200b\u4e8b\u200b\uff1a</p> <ol> <li>\u200b\u5c07\u60a8\u200b\u5275\u5efa\u200b\u7684\u200b<code>validator</code>\u200b\u8cec\u200b\u6236\u200b\u8a3b\u200b\u518a\u200b\u70ba\u200b\u9a57\u200b\u8b49\u200b\u8005\u200b\u64cd\u4f5c\u8005\u200b\u8cec\u6236\u200b\uff08\u200b\u5373\u200b\u63a7\u5236\u200b\u9a57\u8b49\u8005\u200b\u7684\u200b\u8cec\u6236\u200b\uff09\u3002</li> <li>\u200b\u81ea\u884c\u200b\u59d4\u200b\u8a17\u200b\u6240\u200b\u63d0\u4f9b\u200b\u7684\u200b<code>amount</code>\u200b\u7684\u200b\u8cea\u62bc\u4ee3\u5e63\u200b\u3002</li> <li>\u200b\u5c07\u200b\u64cd\u4f5c\u200b\u54e1\u200b\u5e33\u6236\u200b\u8207\u200b\u5c07\u7528\u200b\u65bc\u200b\u7c3d\u7f72\u200b\u5340\u584a\u200b\u7684\u200b Tendermint \u200b\u7bc0\u9ede\u200b\u516c\u9470\u95dc\u200b\u806f\u8d77\u200b\u4f86\u200b\u3002\u200b\u5982\u679c\u200b\u672a\u200b\u63d0\u4f9b\u200b <code>--pubkey</code> \u200b\u6a19\u8a8c\u200b\uff0c\u200b\u5247\u9ed8\u200b\u8a8d\u70ba\u200b\u901a\u904e\u200b\u4e0a\u9762\u200b\u7684\u200b <code>stcd init</code> \u200b\u547d\u4ee4\u200b\u5275\u5efa\u200b\u7684\u200b\u672c\u5730\u200b\u7bc0\u9ede\u200b pubkey\u3002</li> </ol> <p>\u200b\u6709\u95dc\u200b <code>gentx</code> \u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a</p> <pre><code>stcd gentx --help\n</code></pre>"},{"location":"protocol/stcd/single-node/#gentx","title":"\u6536\u96c6\u200b<code>gentx</code>","text":"<p>\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\uff0c\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5305\u542b\u200b\u4efb\u4f55\u200b <code>gentxs</code>\u3002 <code>gentx</code> \u200b\u662f\u200b\u4e00\u7a2e\u200b\u4ea4\u6613\u200b\uff0c\u200b\u5b83\u5c07\u200b\u5b58\u5728\u200b\u65bc\u200b <code>accounts</code> \u200b\u4e0b\u200b\u7684\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u8cea\u62bc\u200b\u4ee4\u724c\u200b\u7d81\u5b9a\u200b\u5230\u9a57\u200b\u8b49\u5668\u200b\uff0c\u200b\u672c\u8cea\u200b\u4e0a\u200b\u662f\u200b\u5728\u200b\u5275\u4e16\u6642\u200b\u5275\u5efa\u200b\u4e00\u500b\u9a57\u200b\u8b49\u5668\u200b\u3002 \u200b\u4e00\u65e6\u200b\u4f5c\u70ba\u200b\u6709\u6548\u200b <code>gentx</code> \u200b\u63a5\u6536\u8005\u200b\u7684\u200b 2/3 \u200b\u4ee5\u4e0a\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\uff08\u200b\u6309\u200b\u6295\u7968\u200b\u6b0a\u52a0\u6b0a\u200b\uff09\u200b\u5728\u200b <code>genesis_time</code> \u200b\u4e4b\u5f8c\u4e0a\u200b\u7dda\u200b\uff0c\u200b\u8a72\u93c8\u200b\u5c31\u200b\u6703\u200b\u555f\u52d5\u200b\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u624b\u52d5\u5c07\u200b <code>gentx</code> \u200b\u6dfb\u52a0\u200b\u5230\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\uff0c\u200b\u6216\u200b\u901a\u904e\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff1a</p> <pre><code># Add the gentx to the genesis file\nstcd collect-gentxs\n</code></pre> <p>\u200b\u6b64\u200b\u547d\u4ee4\u200b\u6703\u5c07\u200b\u5b58\u5132\u200b\u5728\u200b <code>~/.stcd/config/gentx</code> \u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b <code>gentxs</code> \u200b\u6dfb\u52a0\u200b\u5230\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u3002</p>"},{"location":"protocol/stcd/single-node/#daemon","title":"daemon \u200b\u904b\u884c\u200b\u55ae\u7bc0\u9ede","text":"<p>\u200b\u6700\u200b\u5f8c\u200b\uff0c\u200b\u6aa2\u67e5\u200b <code>genesis.json</code> \u200b\u6587\u4ef6\u200b\u7684\u200b\u6b63\u200b\u78ba\u6027\u200b\uff1a</p> <pre><code>stcd validate-genesis\n</code></pre> <p>\u200b\u73fe\u5728\u200b\u4e00\u5207\u200b\u90fd\u200b\u5df2\u200b\u8a2d\u7f6e\u200b\u597d\u200b\uff0c\u200b\u60a8\u7d42\u200b\u65bc\u200b\u53ef\u4ee5\u200b\u555f\u52d5\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u4e86\u200b\uff1a</p> <pre><code>stcd daemon\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u8981\u200b\u5728\u200b\u904b\u884c\u200b\u7bc0\u9ede\u200b\u6642\u200b\u6aa2\u67e5\u200b\u6240\u6709\u200b\u53ef\u7528\u200b\u7684\u200b\u53ef\u200b\u81ea\u5b9a\u200b\u7fa9\u9078\u9805\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b --help \u200b\u6a19\u8a8c\u200b\u3002</p> <p>\u200b\u4f60\u200b\u61c9\u8a72\u200b\u770b\u5230\u200b\u584a\u200b\u9032\u4f86\u200b\u4e86\u200b\u3002</p> <p>\u200b\u524d\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\u5141\u8a31\u200b\u60a8\u200b\u904b\u884c\u200b\u55ae\u500b\u200b\u7bc0\u9ede\u200b\u3002\u200b\u9019\u5c0d\u200b\u65bc\u200b\u4e0b\u200b\u4e00\u7bc0\u95dc\u200b\u65bc\u200b\u8207\u200b\u8a72\u200b\u7bc0\u9ede\u200b\u4ea4\u4e92\u200b\u7684\u200b\u90e8\u5206\u200b\u4f86\u200b\u8aaa\u200b\u5df2\u200b\u7d93\u8db3\u5920\u200b\u4e86\u200b\uff0c \u200b\u4f46\u200b\u60a8\u200b\u53ef\u80fd\u200b\u5e0c\u671b\u200b\u540c\u6642\u200b\u904b\u884c\u200b\u591a\u500b\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u4e26\u200b\u67e5\u770b\u200b\u5b83\u5011\u200b\u4e4b\u9593\u200b\u5982\u4f55\u200b\u9054\u200b\u6210\u5171\u8b58\u200b\u3002</p> <p>\u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>Ctrl+C</code> \u200b\u505c\u6b62\u200b\u7bc0\u9ede\u200b\u3002</p>"},{"location":"protocol/stcd/single-node/#_8","title":"\u9032\u200b\u4e00\u6b65\u200b\u914d\u7f6e","text":""},{"location":"protocol/stcd/single-node/#_9","title":"\u5bc6\u9470\u200b\u7ba1\u7406","text":"<p>\u200b\u6bcf\u6b21\u200b\u904b\u884c\u200b\u5177\u6709\u200b\u76f8\u540c\u200b\u5bc6\u200b\u9470\u200b\u7684\u200b\u7bc0\u9ede\u200b\uff1a\u200b\u5c07\u200b <code>./local_node.sh</code> \u200b\u4e2d\u200b\u7684\u200b <code>stcd keys add $KEY</code> \u200b\u66ff\u63db\u200b\u70ba\u200b\uff1a</p> <pre><code>echo \"your mnemonic here\" | stcd keys add $KEY --recover\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a Daodst \u200b\u76ee\u524d\u200b\u652f\u6301\u200b12\u200b\u500b\u200b\u55ae\u8a5e\u200b\u7684\u200b\u52a9\u200b\u8a18\u8a5e\u200b\u3002 :::</p> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u65b9\u6cd5\u200b\u751f\u6210\u200b\u65b0\u200b\u7684\u200b\u5bc6\u200b\u9470\u200b/\u200b\u52a9\u8a18\u7b26\u200b\uff1a</p> <pre><code>stcd keys add $KEY\n</code></pre> <p>\u200b\u5c07\u60a8\u200b\u7684\u200b Daodst \u200b\u5bc6\u9470\u5c0e\u200b\u51fa\u70ba\u200b\u4ee5\u592a\u200b\u574a\u200b\u79c1\u200b\u9470\u200b\uff08\u200b\u7528\u200b\u65bc\u200b Metamask \u200b\u4f8b\u5982\u200b\uff09\uff1a</p> <pre><code>stcd keys unsafe-export-eth-key $KEY\n</code></pre> <p>\u200b\u6709\u95dc\u200b\u53ef\u7528\u200b\u9375\u200b\u547d\u4ee4\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b <code>--help</code> \u200b\u6a19\u8a8c\u200b</p> <pre><code>stcd keys -h\n</code></pre>"},{"location":"protocol/stcd/single-node/#keyring","title":"Keyring \u200b\u5f8c\u200b\u7aef\u200b\u9078\u9805","text":"<p>\u200b\u4e0a\u9762\u200b\u7684\u200b\u8aaa\u660e\u200b\u5305\u62ec\u200b\u4f7f\u7528\u200b <code>test</code> \u200b\u4f5c\u70ba\u200b <code>keyring-backend</code> \u200b\u7684\u200b\u547d\u4ee4\u200b\u3002 \u200b\u9019\u662f\u200b\u4e00\u500b\u200b\u4e0d\u200b\u5b89\u5168\u200b\u7684\u200b\u5bc6\u200b\u9470\u74b0\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u8f38\u5165\u200b\u5bc6\u78bc\u200b\uff0c\u200b\u4e0d\u61c9\u200b\u5728\u200b\u751f\u7522\u4e2d\u200b\u4f7f\u7528\u200b\u3002 \u200b\u5426\u5247\u200b\uff0cDaodst \u200b\u652f\u6301\u200b\u4f7f\u7528\u200b\u6587\u4ef6\u200b\u6216\u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u5bc6\u200b\u9470\u200b\u74b0\u5f8c\u7aef\u200b\u9032\u884c\u5bc6\u200b\u9470\u200b\u5b58\u5132\u200b\u3002 \u200b\u8981\u200b\u5275\u5efa\u200b\u548c\u200b\u4f7f\u7528\u200b\u6587\u4ef6\u200b\u5b58\u5132\u5bc6\u200b\u9470\u200b\u800c\u200b\u4e0d\u662f\u200b\u9ed8\u8a8d\u200b\u70ba\u200b\u64cd\u4f5c\u200b\u7cfb\u7d71\u5bc6\u200b\u9470\u74b0\u200b\uff0c\u200b\u8acb\u5c07\u200b\u6a19\u8a8c\u200b <code>--keyring-backend file</code> \u200b\u6dfb\u52a0\u200b\u5230\u200b\u4efb\u4f55\u200b\u76f8\u95dc\u200b\u547d\u4ee4\u200b\uff0c\u200b\u5bc6\u78bc\u200b\u63d0\u793a\u200b\u5c07\u901a\u904e\u200b\u547d\u4ee4\u884c\u200b\u51fa\u73fe\u200b\u3002 \u200b\u9019\u4e5f\u200b\u53ef\u4ee5\u200b\u4fdd\u5b58\u200b\u70ba\u200b CLI \u200b\u914d\u7f6e\u200b\u9078\u9805\u200b\uff1a</p> <pre><code>stcd config keyring-backend file\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u6709\u95dc\u200b Keyring \u200b\u53ca\u5176\u200b\u5f8c\u200b\u7aef\u200b\u9078\u9805\u200b\u7684\u200b\u66f4\u200b\u591a\u200b\u4fe1\u606f\u200b\uff0c\u200b\u8acb\u200b\u55ae\u64ca\u200b \u200b\u6b64\u8655\u200b\u3002</p>"},{"location":"protocol/stcd/single-node/#_10","title":"\u555f\u7528\u200b\u8ddf\u8e2a","text":"<p>\u200b\u8981\u200b\u5728\u200b\u904b\u884c\u200b\u7bc0\u9ede\u200b\u6642\u200b\u555f\u7528\u200b\u8ddf\u8e2a\u200b\uff0c\u200b\u8acb\u5c07\u200b <code>local_node.sh</code> \u200b\u8173\u672c\u200b\u7684\u200b\u6700\u200b\u5f8c\u200b\u4e00\u884c\u200b\u4fee\u6539\u200b\u70ba\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff0c \u200b\u5728\u200b\u54ea\u88e1\u200b\uff1a</p> <ul> <li><code>$TRACER</code> \u200b\u662f\u200b EVM \u200b\u8ddf\u8e2a\u5668\u200b\u985e\u578b\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u5f9e\u200b EVM \u200b\u4e8b\u52d9\u200b\u200b\u200b\u200b\u57f7\u884c\u200b\u4e2d\u200b\u6536\u96c6\u200b\u57f7\u884c\u200b\u8ddf\u8e2a\u200b\uff08\u200b\u4f8b\u5982\u200b <code>json|struct|access_list|markdown</code>\uff09</li> <li><code>$TRACESTORE</code> \u200b\u662f\u200b\u5305\u542b\u200b KVStore \u200b\u8ddf\u8e2a\u200b\u7684\u200b\u8f38\u51fa\u200b\u6587\u4ef6\u200b\uff08\u200b\u4f8b\u5982\u200b <code>store.txt</code>\uff09</li> </ul> <pre><code>stcd start --evm.tracer $TRACER --tracestore $TRACESTORE --pruning=nothing $TRACE --log_level $LOGLEVEL --minimum-gas-prices=0.0001dst --json-rpc.api eth,txpool,personal,net,debug,web3\n</code></pre>"},{"location":"protocol/stcd/single-node/#_11","title":"\u5f9e\u93c8\u200b\u4e2d\u200b\u6e05\u9664\u200b\u6578\u64da","text":""},{"location":"protocol/stcd/single-node/#_12","title":"\u91cd\u7f6e\u200b\u6578\u64da","text":"<p>\u200b\u6216\u8005\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u91cd\u7f6e\u200b\u5340\u584a\u200b\u93c8\u200b\u6578\u64da\u5eab\u200b\uff0c\u200b\u522a\u9664\u200b\u7bc0\u9ede\u200b\u7684\u200b\u5730\u5740\u200b\u7c3f\u200b\u6587\u4ef6\u200b\uff0c\u200b\u4e26\u5c07\u200b <code>priv_validator.json</code> \u200b\u91cd\u7f6e\u200b\u70ba\u200b\u5275\u4e16\u72c0\u614b\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u5982\u679c\u200b\u60a8\u200b\u904b\u884c\u200b\u7684\u200b\u662f\u200b\u9a57\u8b49\u5668\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u8acb\u200b\u5728\u200b\u57f7\u884c\u200b <code>stcd unsafe-reset-all</code> \u200b\u6642\u59cb\u7d42\u200b\u5c0f\u5fc3\u200b\u3002 \u200b\u5982\u679c\u200b\u60a8\u200b\u4e0d\u5207\u63db\u200b <code>chain-id</code>\uff0c\u200b\u5247\u6c38\u9060\u200b\u4e0d\u8981\u200b\u4f7f\u7528\u200b\u6b64\u200b\u547d\u4ee4\u200b\u3002</p> <p>\ud83d\udea8 \u200b\u5371\u96aa\u200b\uff1a\u200b\u78ba\u4fdd\u200b\u6bcf\u500b\u200b\u7bc0\u9ede\u200b\u90fd\u200b\u6709\u200b\u4e00\u500b\u200b\u552f\u4e00\u200b\u7684\u200b <code>priv_validator.json</code>\u3002 \u200b\u4e0d\u8981\u200b\u5c07\u200b <code>priv_validator.json</code> \u200b\u5f9e\u820a\u200b\u7bc0\u9ede\u200b\u8907\u200b\u88fd\u200b\u5230\u200b\u591a\u200b\u500b\u200b\u65b0\u200b\u7bc0\u200b\u9ede\u200b\u3002\u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b\u7684\u200b <code>priv_validator.json</code> \u200b\u904b\u884c\u200b\u5169\u500b\u200b\u7bc0\u9ede\u200b\u5c07\u5c0e\u81f4\u200b\u60a8\u200b\u7522\u751f\u200b \u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b \u200b\u4e26\u4e14\u200b\u5c07\u88ab\u200b \u200b\u6c38\u4e45\u200b\u76e3\u7981\u200b !</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u4f86\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88dd\u200b <code>stcd</code> \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f91\u200b</p> <p>\u200b\u9996\u5148\u200b\uff0c\u200b\u522a\u9664\u200b\u904e\u6642\u200b\u7684\u200b\u6587\u4ef6\u200b\u4e26\u200b\u91cd\u7f6e\u200b\u6578\u64da\u200b\u3002</p> <pre><code>rm $install_path/.stcd/config/addrbook.json $install_path/.stcd/config/genesis.json\nstcd tendermint unsafe-reset-all --home .stcd\n</code></pre> <p>\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u73fe\u200b\u5728\u200b\u8655\u200b\u65bc\u200b\u539f\u59cb\u200b\u72c0\u614b\u200b\uff0c\u200b\u540c\u6642\u200b\u4fdd\u7559\u200b\u539f\u59cb\u200b\u7684\u200b <code>priv_validator.json</code> \u200b\u548c\u200b <code>config.toml</code>\u3002 \u200b\u5982\u679c\u200b\u60a8\u200b\u4e4b\u524d\u200b\u8a2d\u7f6e\u200b\u4e86\u200b\u4efb\u4f55\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u6216\u200b\u5b8c\u6574\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u4ecd\u200b\u5c07\u5617\u200b\u8a66\u9023\u200b\u63a5\u5230\u200b\u5b83\u5011\u200b\uff0c\u200b\u4f46\u200b\u5982\u679c\u200b\u5b83\u5011\u200b\u9084\u6c92\u6709\u200b\u5347\u7d1a\u200b\uff0c\u200b\u5247\u200b\u53ef\u80fd\u200b\u6703\u200b\u5931\u6557\u200b\u3002</p>"},{"location":"protocol/stcd/single-node/#_13","title":"\u522a\u9664\u200b\u6578\u64da","text":"<p>\u200b\u4e8c\u9032\u200b\u5236\u6578\u200b\u64da\u6703\u9ed8\u200b\u8a8d\u5b58\u200b\u5132\u5728\u200b <code>$install_path/.stcd</code>\uff0c\u200b\u8981\u200b\u522a\u9664\u200b\u73fe\u6709\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u548c\u200b\u914d\u7f6e\u200b\uff0c\u200b\u8acb\u904b\u884c\u200b\uff1a</p> <pre><code>rm -rf $install_path/.stcd\n</code></pre> <p>\u200b\u8981\u200b\u6e05\u9664\u200b\u5bc6\u9470\u200b\u5b58\u5132\u200b\u4ee5\u5916\u200b\u7684\u200b\u6240\u6709\u200b\u6578\u64da\u200b\uff08\u200b\u5982\u679c\u200b\u9078\u64c7\u200b\u4e86\u200bkeyring\u200b\u5f8c\u200b\u7aef\u200b\uff09\uff0c\u200b\u7136\u200b\u5f8c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5f9e\u200b\u4e0a\u9762\u200b\u91cd\u65b0\u200b\u904b\u884c\u200b\u5b8c\u6574\u200b\u7bc0\u9ede\u200b\u5b89\u88dd\u200b\u547d\u4ee4\u200b\u4ee5\u200b\u518d\u6b21\u200b\u555f\u52d5\u200b\u7bc0\u9ede\u200b\u3002</p>"},{"location":"protocol/stcd/single-node/#tps","title":"\u6bcf\u79d2\u200b\u8a18\u9304\u200b\u4ea4\u6613\u200b (TPS)","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u7372\u5f97\u200b\u6bcf\u79d2\u200b\u4e8b\u52d9\u200b\u7684\u200b\u7d2f\u200b\u9032\u503c\u200b\uff0c\u200b\u6211\u5011\u200b\u4f7f\u7528\u200b Prometheus \u200b\u8fd4\u56de\u503c\u200b\u3002 Prometheus \u200b\u5c0e\u51fa\u5668\u200b\u5728\u200b\u5730\u5740\u200b http://localhost:8877 \u200b\u904b\u884c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8acb\u200b\u5c07\u6b64\u200b\u90e8\u5206\u200b\u6dfb\u52a0\u200b\u5230\u200b\u60a8\u200b\u7684\u200b Prometheus \u200b\u5b89\u88dd\u200b config.yaml \u200b\u6587\u4ef6\u200b\u4e2d\u200b\uff0c\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b</p> <pre><code>global:\nscrape_interval: 10s\n\nexternal_labels:\n  monitor: 'daodst'\n\nscrape_configs:\n- job_name: 'daodst'\n\n  scrape_interval: 10s\n\n  static_configs:\n    - targets: ['localhost:8877']\n</code></pre> <p>\u200b\u7136\u5f8c\u50cf\u200b\u9019\u6a23\u200b\u904b\u884c\u200b Prometheus</p> <pre><code>prometheus --config.file=prom_config.yaml\n</code></pre> <p>\u200b\u7136\u5f8c\u8a2a\u200b\u554f\u4f4d\u200b\u65bc\u200b http://localhost:9090/ \u200b\u7684\u200b Prometheus \u200b\u5100\u8868\u677f\u200b\uff0c\u200b\u7136\u5f8c\u5c0e\u200b\u822a\u5230\u200b\u8868\u9054\u5f0f\u200b\u5340\u57df\u200b\u4e26\u8f38\u5165\u200b\u4ee5\u4e0b\u200b\u8868\u9054\u5f0f\u200b</p> <pre><code>rate(daodst_transactions_processed[1m])\n</code></pre> <p>\u200b\u9019\u5c07\u200b\u986f\u793a\u200b\u8655\u7406\u200b\u7684\u200b\u4ea4\u6613\u200b\u901f\u5ea6\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a Daodst \u200b\u76ee\u524d\u200b\u652f\u6301\u200b 12\u200b\u500b\u200b\u55ae\u8a5e\u200b\u7684\u200b\u52a9\u200b\u8a18\u8a5e\u200b\u3002</p>"},{"location":"ttts/ttts/","title":"TTTS\u200b\u670d\u52a1\u200b\u8bf4\u660e","text":"<p>TTTS\u200b\u670d\u52a1\u200b\u662f\u200b\u9009\u62e9\u200b\u5f00\u542f\u200b\u914d\u7f6e\u200b\uff0c\u200b\u901a\u8fc7\u200b\u7f51\u5173\u200b\u670d\u52a1\u200b\u4e0b\u200b\u7684\u200bconfig.toml--&gt;ttts.enabled\u200b\u9009\u9879\u200b\u63a7\u5236\u200b\u5f00\u542f\u200b\u5173\u95ed\u200b\u3002</p>"},{"location":"ttts/ttts/#_1","title":"\u524d\u7f6e\u6761\u4ef6","text":"<p>TTTS\u200b\u670d\u52a1\u200b\u5185\u90e8\u200b\u4f9d\u8d56\u200bpython\u200b\u7684\u200bnumpy\u200b\u6a21\u5757\u200b\uff0c\u200b\u8be5\u200b\u6a21\u5757\u200b\u9700\u8981\u200bVC++\u200b\u7684\u200b\u7f16\u8bd1\u200b\u73af\u5883\u200b\uff0c\u200b\u5728\u200bWindows\u200b\u7248\u200b\u7684\u200bttts\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u9644\u5e26\u200b\u4e86\u200b\u540d\u4e3a\u200bvs_BuildTools.exe\u200b\u7684\u200b\u5b89\u88c5\u7a0b\u5e8f\u200b\u3002 \u200b\u53cc\u51fb\u200b\u8fd0\u884c\u200b\uff0c\u200b\u5982\u4e0b\u200b\u56fe\u52fe\u9009\u200b\uff1a </p> <p>\u200b\u5b89\u88c5\u200b\u5b8c\u6210\u200b\u5373\u53ef\u200b\u4fee\u6539\u200b\u914d\u7f6e\u200b\u9879\u200b\u542f\u52a8\u200bTTTS\u200b\u670d\u52a1\u200b\uff0c\u200b\u5e76\u200b\u7b49\u5f85\u200b\u670d\u52a1\u200b\u521d\u59cb\u5316\u200b\u5b8c\u6210\u200b\u3002</p> <p>\u200b\u6ce8\u200b\uff1a Linux\u200b\u7248\u200b\u7531\u4e8e\u200bvc++\u200b\u73af\u5883\u200b\u5b89\u88c5\u200b\u8f83\u200bWindows\u200b\u7b80\u5355\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4fee\u6539\u200b\u914d\u7f6e\u200b\u9879\u200b\uff0c\u200b\u542f\u52a8\u200b\u670d\u52a1\u200b\uff08\u200b\u4f9d\u8d56\u200b\u9879\u4f1a\u200b\u81ea\u52a8\u200b\u5b89\u88c5\u200b\uff09\u3002</p>"},{"location":"upgrade/","title":"\u6982\u8ff0","text":"<p>\u200b\u4e86\u89e3\u200b\u5982\u4f55\u200b\u7ba1\u7406\u200b\u5b8c\u6574\u200b\u7bc0\u9ede\u200b\u548c\u200b\u9a57\u8b49\u200b\u7bc0\u9ede\u200b\u7684\u200b\u93c8\u5347\u7d1a\u200b\u3002\u200b\u6709\u200b 3 \u200b\u7a2e\u200b\u4e0d\u540c\u200b\u7684\u200b\u5347\u7d1a\u200b\u985e\u5225\u200b\uff1a</p> <ul> <li>\u200b\u8a08\u5283\u200b\u5167\u200b\u6216\u200b\u8a08\u5283\u200b\u5916\u200b\uff1a\u200b\u934a\u200b\u5f0f\u200b\u5347\u7d1a\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u5347\u7d1a\u200b\u5efa\u8b70\u200b\u8a08\u5283\u200b\u5b89\u6392\u200b\u5728\u200b\u7d66\u5b9a\u200b\u9ad8\u5ea6\u200b\u3002</li> <li>\u200b\u4e2d\u65b7\u200b\u6216\u975e\u200b\u4e2d\u65b7\u200b\uff1a\u200b\u5347\u7d1a\u200b\u53ef\u4ee5\u200b\u662f\u200b API \u200b\u6216\u200b\u72c0\u614b\u200b\u6a5f\u4e2d\u65b7\u200b\uff0c\u200b\u9019\u6703\u200b\u5f71\u97ff\u200b\u5411\u200b\u5f8c\u200b\u517c\u5bb9\u6027\u200b\u3002   \u200b\u70ba\u200b\u4e86\u89e3\u200b\u6c7a\u200b\u9019\u500b\u200b\u554f\u984c\u200b\uff0c\u200b\u9700\u8981\u200b\u9077\u79fb\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u72c0\u614b\u200b\u6216\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\u4ee5\u200b\u6e96\u5099\u200b\u5347\u7d1a\u200b\u3002</li> <li>\u200b\u6578\u64da\u200b\u91cd\u7f6e\u200b\u5347\u7d1a\u200b\uff1a\u200b\u4e00\u4e9b\u200b\u5347\u7d1a\u200b\u9700\u8981\u200b\u5b8c\u5168\u200b\u6578\u64da\u200b\u91cd\u7f6e\u200b\u624d\u80fd\u200b\u6e05\u7406\u200b\u72c0\u614b\u200b\u3002\u200b\u9019\u6709\u200b\u6642\u6703\u200b\u767c\u751f\u200b\u5728\u200b\u56de\u6efe\u200b\u6216\u200b\u786c\u200b\u5206\u53c9\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u3002</li> </ul> <p>\u200b\u6b64\u5916\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u6839\u64da\u200b\u81ea\u5df1\u200b\u7684\u200b\u504f\u597d\u200b\u9078\u64c7\u200b\u5982\u4f55\u200b\u7ba1\u7406\u200b\u5347\u7d1a\u200b\uff1a</p> <ul> <li>\u200b\u81ea\u52d5\u200b\u6216\u200b\u624b\u52d5\u200b\u5347\u7d1a\u200b\uff1a\u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u904b\u884c\u200b <code>cosmovisor</code> \u200b\u9032\u7a0b\u200b\u4f86\u200b\u81ea\u52d5\u200b\u57f7\u884c\u200b\u5347\u7d1a\u200b\u6216\u200b\u624b\u52d5\u200b\u57f7\u884c\u200b\u5347\u7d1a\u200b\u3002</li> </ul>"},{"location":"upgrade/#_2","title":"\u8a08\u5283\u200b\u5347\u7d1a","text":"<p>\u200b\u8a08\u5283\u200b\u5347\u7d1a\u200b\u662f\u200b\u4f7f\u7528\u200b \u200b\u5347\u7d1a\u200b\u6a21\u584a\u200b \u200b\u908f\u8f2f\u200b\u7684\u200b\u5354\u8abf\u200b\u8a08\u5283\u200b\u5347\u7d1a\u200b\u3002 \u200b\u9019\u200b\u6709\u52a9\u200b\u65bc\u5c07\u200b Daodst \u200b\u9806\u200b\u5229\u5347\u200b\u7d1a\u200b\u5230\u200b\u65b0\u200b\u7684\u200b\uff08\u200b\u4e2d\u65b7\u200b\u7684\u200b\uff09\u200b\u8edf\u4ef6\u200b\u7248\u672c\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5b83\u200b\u6703\u200b\u81ea\u52d5\u200b\u8655\u7406\u200b\u65b0\u200b\u7248\u672c\u200b\u7684\u200b\u72c0\u614b\u200b\u9077\u79fb\u200b\u3002</p>"},{"location":"upgrade/#_3","title":"\u6cbb\u7406\u200b\u63d0\u6848","text":""},{"location":"upgrade/#_4","title":"\u6cbb\u7406\u200b\u63d0\u6848","text":"<p>\u200b\u6cbb\u7406\u200b\u63d0\u6848\u200b\u662f\u200b\u4e00\u7a2e\u200b\u4f7f\u7528\u200b<code>SoftwareProposal</code> \u200b\u5728\u200b\u7d66\u5b9a\u200b\u9ad8\u5ea6\u200b\u6216\u200b\u6642\u9593\u200b\u5354\u8abf\u200b\u5347\u7d1a\u200b\u7684\u200b\u6a5f\u5236\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u6240\u6709\u200b\u6cbb\u7406\u200b\u63d0\u6848\u200b\uff0c\u200b\u5305\u62ec\u200b\u8edf\u4ef6\u200b\u5347\u7d1a\u200b\uff0c\u200b\u90fd\u200b\u9700\u8981\u200b\u7b49\u5f85\u200b\u6295\u7968\u200b\u671f\u7d50\u675f\u200b\u5f8c\u200b\u624d\u80fd\u200b\u57f7\u884c\u200b\u5347\u7d1a\u200b\u3002\u200b\u63d0\u4ea4\u200b\u8edf\u4ef6\u200b\u5347\u7d1a\u200b\u5efa\u8b70\u200b\u6642\u200b\u8acb\u200b\u8003\u616e\u200b\u6b64\u6301\u7e8c\u200b\u6642\u9593\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u63d0\u6848\u200b\u901a\u904e\u200b\uff0c\u200b\u5247\u91dd\u200b\u5c0d\u200b\u7279\u5b9a\u200b\u5347\u7d1a\u200b\u908f\u8f2f\u200b\u4ee5\u200b\u9077\u79fb\u200b\u72c0\u614b\u200b\u7684\u200b\u5347\u7d1a\u200b<code>\u200b\u8a08\u5283\u200b</code>\u200b\u5c07\u200b\u6301\u4e45\u200b\u4fdd\u5b58\u200b\u5230\u5340\u200b\u584a\u200b\u93c8\u200b\u72c0\u614b\u200b\uff0c\u200b\u4e26\u5728\u200b\u7d66\u5b9a\u200b\u7684\u200b\u5347\u7d1a\u200b\u9ad8\u5ea6\u200b\u9032\u884c\u200b\u8abf\u5ea6\u200b\u3002\u200b\u901a\u904e\u200b\u66f4\u65b0\u200b\u65b0\u200b\u63d0\u6848\u200b\u4e2d\u200b\u7684\u200b<code>Plan.Height</code>\u200b\u53ef\u4ee5\u200b\u5ef6\u9072\u200b\u6216\u200b\u52a0\u5feb\u200b\u5347\u7d1a\u200b\u3002</p>"},{"location":"upgrade/#_5","title":"\u786c\u200b\u5206\u53c9","text":"<p>\u200b\u4e00\u7a2e\u200b\u7279\u6b8a\u200b\u985e\u578b\u200b\u7684\u200b\u8a08\u5283\u200b\u5347\u7d1a\u200b\u662f\u200b \u200b\u786c\u200b\u5206\u53c9\u200b\u3002\u200b\u8207\u200b\u6cbb\u7406\u200b\u63d0\u6848\u200b\u76f8\u53cd\u200b\uff0c\u200b\u786c\u200b\u5206\u53c9\u200b\u4e0d\u200b\u9700\u8981\u200b\u7b49\u5f85\u200b\u6574\u500b\u200b\u6295\u7968\u200b\u671f\u200b\u3002 \u200b\u9019\u4f7f\u200b\u5b83\u5011\u200b\u6210\u70ba\u200b\u5354\u8abf\u200b\u5b89\u5168\u6f0f\u6d1e\u200b\u548c\u200b\u88dc\u4e01\u200b\u7684\u200b\u7406\u60f3\u200b\u9078\u64c7\u200b\u3002</p> <p>\u200b\u5347\u7d1a\u200b\uff08\u200b\u5206\u53c9\u200b\uff09\u200b\u584a\u200b\u9ad8\u5ea6\u200b\u5728\u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u7684\u200b<code>BeginBlock</code>\u200b\u4e2d\u8a2d\u200b\u7f6e\u200b\uff08\u200b\u5373\u200b\u5728\u200b\u70ba\u200b\u584a\u200b\u8655\u200b\u7406\u4e8b\u200b\u52d9\u200b\u4e4b\u524d\u200b\uff09\u3002 \u200b\u4e00\u65e6\u200b\u5340\u584a\u200b\u93c8\u9054\u200b\u5230\u200b\u8a72\u200b\u9ad8\u5ea6\u200b\uff0c\u200b\u5b83\u6703\u200b\u81ea\u52d5\u200b\u70ba\u200b\u76f8\u540c\u200b\u9ad8\u5ea6\u200b\u5b89\u6392\u200b\u5347\u7d1a\u200b\u201c\u200b\u8a08\u5283\u200b\u201d\uff0c\u200b\u7136\u5f8c\u89f8\u200b\u767c\u5347\u7d1a\u200b\u904e\u7a0b\u200b\u3002 \u200b\u5347\u7d1a\u200b\u5f8c\u200b\uff0c\u200b\u584a\u200b\u64cd\u4f5c\u200b\uff08<code>BeginBlock</code>\u3001\u200b\u4e8b\u52d9\u200b\u8655\u7406\u200b\u548c\u200b\u72c0\u614b\u200b<code>Commit</code>\uff09\u200b\u7e7c\u7e8c\u200b\u6b63\u5e38\u200b\u9032\u884c\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u70ba\u200b\u4e86\u200b\u57f7\u884c\u200b\u5347\u7d1a\u200b\u786c\u200b\u5206\u53c9\u200b\uff0c\u200b\u9700\u8981\u200b\u9996\u5148\u200b\u4f7f\u7528\u200b<code>BeginBlock</code>\u200b\u5347\u7d1a\u200b\u8abf\u5ea6\u200b\u908f\u8f2f\u200b\u767c\u5e03\u200b\u88dc\u4e01\u200b\u7248\u672c\u200b\u3002 \u200b\u5728\u200b +2/3 \u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u5347\u7d1a\u200b\u5230\u200b\u65b0\u200b\u7684\u200b\u88dc\u4e01\u200b\u7248\u672c\u200b\u5f8c\u200b\uff0c\u200b\u4ed6\u5011\u200b\u7684\u200b\u7bc0\u9ede\u200b\u5c07\u81ea\u52d5\u200b\u505c\u6b62\u200b\u4f75\u200b\u5347\u7d1a\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u3002</p>"},{"location":"upgrade/#_6","title":"\u8a08\u5283\u200b\u5916\u5347\u7d1a","text":"<p>\u200b\u8a08\u5283\u200b\u5916\u5347\u7d1a\u200b\u662f\u200b\u6307\u200b\u6240\u6709\u200b\u9a57\u8b49\u8005\u200b\u90fd\u200b\u9700\u8981\u200b\u5728\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u540c\u4e00\u200b\u6642\u523b\u200b\u512a\u96c5\u5730\u200b\u505c\u6b62\u200b\u548c\u200b\u95dc\u9589\u200b\u5176\u200b\u7bc0\u9ede\u200b\u7684\u200b\u5347\u7d1a\u200b\u3002 \u200b\u9019\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u5728\u200b\u904b\u884c\u200b <code>stcd start</code> \u200b\u547d\u4ee4\u200b\u6642\u8a2d\u200b\u7f6e\u200b <code>--halt-height</code> \u200b\u6a19\u8a8c\u200b\u4f86\u200b\u5b8c\u6210\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5728\u200b\u8a08\u5283\u200b\u5916\u5347\u7d1a\u200b\u671f\u9593\u200b\u767c\u751f\u200b\u91cd\u5927\u200b\u66f4\u6539\u200b\uff08\u200b\u898b\u200b\u4e0b\u6587\u200b\uff09\uff0c\u200b\u9a57\u8b49\u8005\u5c07\u200b\u9700\u8981\u200b\u5728\u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b\u5176\u200b\u7bc0\u9ede\u200b\u4e4b\u524d\u200b\u9077\u79fb\u200b\u72c0\u614b\u200b\u548c\u200b\u8d77\u6e90\u200b\u3002</p> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b\uff1a \u200b\u8a08\u5283\u200b\u5916\u5347\u7d1a\u200b\u7684\u200b\u4e3b\u8981\u200b\u8003\u616e\u200b\u662f\u200b\u9700\u8981\u200b\u5c0e\u51fa\u200b\u5275\u4e16\u72c0\u614b\u200b\u4e26\u4e14\u200b\u9700\u8981\u200b[\u200b\u91cd\u7f6e\u200b]\uff08#data-reset-upgrades\uff09\u200b\u5340\u584a\u200b\u93c8\u200b\u6578\u64da\u200b\u3002 \u200b\u9019\u200b\u4e3b\u8981\u200b\u5f71\u97ff\u200b\u57fa\u790e\u200b\u8a2d\u65bd\u200b\u63d0\u4f9b\u5546\u200b\u3001\u200b\u5de5\u5177\u200b\u548c\u200b\u5ba2\u6236\u200b\u7aef\u200b\uff0c\u200b\u5982\u5340\u200b\u584a\u200b\u700f\u89bd\u5668\u200b\u548c\u200b\u5ba2\u6236\u200b\u7aef\u200b\uff0c\u200b\u5b83\u5011\u200b\u5fc5\u9808\u200b\u4f7f\u7528\u200b\u5b58\u6a94\u200b\u7bc0\u9ede\u200b\u4f86\u200b\u70ba\u200b\u5347\u7d1a\u200b\u524d\u200b\u7684\u200b\u9ad8\u5ea6\u200b\u63d0\u4f9b\u200b\u67e5\u8a62\u200b\u670d\u52d9\u200b\u3002</p>"},{"location":"upgrade/#_7","title":"\u7834\u58de\u6027\u200b\u548c\u200b\u975e\u7834\u58de\u200b\u6027\u5347\u7d1a","text":"<p>\u200b\u6839\u64da\u200b\u76f8\u61c9\u200b\u8edf\u4ef6\u200b\u767c\u5e03\u200b\u7248\u672c\u200b\u7684\u200b\u8a9e\u7fa9\u200b\u7248\u672c\u63a7\u5236\u200b(Semver)\uff0c\u200b\u5347\u7d1a\u200b\u53ef\u4ee5\u200b\u5206\u70ba\u200b\u4e2d\u65b7\u200b\u6216\u975e\u200b\u4e2d\u65b7\u200b/releases)(\u200b\u5373\u200b<code>vX.Y.Z</code>):</p> <ul> <li>\u200b\u4e3b\u8981\u200b\u7248\u672c\u200b (<code>X</code>)\uff1a\u200b\u5411\u200b\u5f8c\u200b\u4e0d\u200b\u517c\u5bb9\u200b\u7684\u200b API \u200b\u548c\u200b\u72c0\u614b\u200b\u6a5f\u4e2d\u65b7\u200b\u66f4\u6539\u200b\u3002</li> <li>\u200b\u6b21\u8981\u200b\u7248\u672c\u200b (<code>Y</code>)\uff1a\u200b\u65b0\u200b\u7684\u200b\u5411\u200b\u5f8c\u200b\u517c\u5bb9\u200b\u529f\u80fd\u200b\u3002\u200b\u9019\u4e9b\u200b\u4e5f\u200b\u53ef\u80fd\u200b\u662f\u200b\u72c0\u614b\u200b\u6a5f\u4e2d\u65b7\u200b\u3002</li> <li>\u200b\u88dc\u4e01\u200b\u7248\u672c\u200b (<code>Z</code>)\uff1a\u200b\u5411\u200b\u5f8c\u200b\u517c\u5bb9\u200b\u7684\u200b\u932f\u8aa4\u200b\u4fee\u200b\u5fa9\u200b\u3001\u200b\u5c0f\u200b\u7684\u200b\u91cd\u69cb\u200b\u548c\u200b\u6539\u9032\u200b\u3002</li> </ul>"},{"location":"upgrade/#_8","title":"\u4e3b\u8981\u200b\u7248\u672c","text":"<p>\u200b\u5982\u679c\u200b\u60a8\u200b\u8981\u200b\u5347\u7d1a\u200b\u5230\u200b\u7684\u200b\u65b0\u200b\u7248\u672c\u200b\u6709\u200b\u91cd\u5927\u200b\u66f4\u6539\u200b\uff0c\u200b\u60a8\u200b\u5c07\u5fc5\u9808\u200b\uff1a</p> <ul> <li>\u200b\u9077\u79fb\u200b\u5275\u4e16\u200bJSON</li> <li>\u200b\u9077\u79fb\u200b\u61c9\u7528\u200b\u72c0\u614b\u200b</li> <li>\u200b\u91cd\u555f\u200b\u7bc0\u9ede\u200b</li> </ul> <p>\u200b\u9700\u8981\u200b\u9019\u6a23\u200b\u505a\u200b\u4ee5\u200b\u9632\u6b62\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\u6216\u200b\u5728\u200b\u5171\u8b58\u200b\u671f\u9593\u200b\u505c\u6b62\u200b\u93c8\u200b\u3002</p> <p>\u200b\u8981\u200b\u5347\u7d1a\u200b\u5275\u4e16\u200b\u6587\u4ef6\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5f9e\u200b\u53ef\u4fe1\u200b\u4f86\u6e90\u200b\u7372\u53d6\u200b\u5b83\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b <code>stcd export</code> \u200b\u547d\u4ee4\u200b\u5c07\u5176\u5c0e\u200b\u51fa\u5230\u200b\u672c\u5730\u200b\u3002</p>"},{"location":"upgrade/#_9","title":"\u6b21\u8981\u200b\u7248\u672c","text":"<p>\u200b\u5982\u679c\u200b\u60a8\u200b\u8981\u200b\u5347\u7d1a\u200b\u5230\u200b\u7684\u200b\u65b0\u200b\u7248\u672c\u200b\u6709\u200b\u91cd\u5927\u200b\u66f4\u6539\u200b\uff0c\u200b\u60a8\u200b\u5c07\u5fc5\u9808\u200b\uff1a</p> <ul> <li>\u200b\u9077\u79fb\u200b\u72c0\u614b\u200b\uff08\u200b\u5982\u679c\u200b\u9069\u7528\u200b\uff09</li> <li>\u200b\u91cd\u555f\u200b\u7bc0\u9ede\u200b</li> </ul>"},{"location":"upgrade/#_10","title":"\u88dc\u4e01\u200b\u7248\u672c","text":"<p>\u200b\u70ba\u200b\u4e86\u200b\u66f4\u65b0\u200b\u88dc\u4e01\u200b\uff1a</p> <ul> <li>\u200b\u505c\u6b62\u200b\u7bc0\u9ede\u200b</li> <li>\u200b\u624b\u52d5\u200b\u4e0b\u8f09\u200b\u65b0\u200b\u7248\u672c\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b</li> <li>\u200b\u91cd\u555f\u200b\u7bc0\u9ede\u200b</li> </ul>"},{"location":"upgrade/#_11","title":"\u6578\u64da\u200b\u91cd\u7f6e\u200b\u5347\u7d1a","text":"<p>\u200b\u6578\u64da\u200b\u91cd\u7f6e\u200b\u5347\u7d1a\u200b\u8981\u6c42\u200b\u7bc0\u9ede\u200b\u904b\u71df\u5546\u200b\u5b8c\u5168\u200b\u91cd\u7f6e\u200b\u5340\u584a\u200b\u93c8\u72c0\u614b\u200b\u4e26\u5f9e\u200b\u4e7e\u6de8\u200b\u72c0\u614b\u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b\u5176\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u4f46\u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b\u7684\u200b\u9a57\u8b49\u5668\u200b\u5bc6\u200b\u9470\u200b\u3002</p>"},{"location":"upgrade/#_12","title":"\u81ea\u52d5\u200b\u6216\u200b\u624b\u52d5\u200b\u5347\u7d1a","text":"<p>\u200b\u5c0d\u200b\u65bc\u200b\u6bcf\u500b\u200b\u65b0\u200b\u8edf\u4ef6\u200b\u7248\u672c\u200b\uff0c\u200b\u6211\u5011\u200b\u5f37\u70c8\u200b\u5efa\u8b70\u200b\u5168\u7bc0\u200b\u9ede\u548c\u9a57\u200b\u8b49\u5668\u200b\u64cd\u4f5c\u200b\u54e1\u200b\u57f7\u884c\u200b\u8edf\u4ef6\u200b\u5347\u7d1a\u200b\u3002</p> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u4ee5\u4e0b\u200b\u4efb\u4e00\u200b\u65b9\u5f0f\u200b\u5347\u7d1a\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\uff1a</p> <ul> <li>\u200b\u81ea\u52d5\u200b \u200b\u5347\u7d1a\u200b\u8edf\u4ef6\u200b\u7248\u672c\u200b\u4e26\u5728\u200b\u5347\u7d1a\u200b\u767c\u751f\u200b\u5f8c\u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u6216\u8005\u200b</li> <li>\u200b\u4e0b\u8f09\u200b\u65b0\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u4e26\u57f7\u884c\u200b\u624b\u52d5\u200b\u5347\u7d1a\u200b</li> </ul> <p>\u200b\u6309\u7167\u200b\u4e0a\u9762\u200b\u9078\u9805\u200b\u4e2d\u200b\u7684\u200b\u93c8\u63a5\u200b\u4e86\u89e3\u200b\u5982\u4f55\u200b\u6839\u64da\u200b\u60a8\u200b\u7684\u200b\u9996\u9078\u200b\u9078\u9805\u200b\u5347\u7d1a\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u3002</p>"},{"location":"upgrade/auto/","title":"\u81ea\u52d5\u200b\u5347\u7d1a","text":"<p>\u200b\u6211\u5011\u200b\u5f37\u70c8\u200b\u5efa\u8b70\u9a57\u200b\u8b49\u8005\u200b\u4f7f\u7528\u200b Cosmovisor \u200b\u4f86\u200b\u904b\u884c\u200b\u4ed6\u5011\u200b\u7684\u200b\u7bc0\u9ede\u200b\u3002 \u200b\u9019\u5c07\u200b\u4f7f\u200b\u4f4e\u200b\u505c\u6a5f\u200b\u6642\u9593\u200b\u7684\u200b\u5347\u7d1a\u200b\u66f4\u52a0\u200b\u9806\u66a2\u200b\uff0c\u200b\u56e0\u70ba\u9a57\u200b\u8b49\u8005\u200b\u4e0d\u5fc5\u200b\u5728\u200b\u5347\u7d1a\u200b\u671f\u9593\u200b \u200b\u624b\u52d5\u200b\u5347\u7d1a\u200b \u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u3002 \u200b\u76f8\u53cd\u200b\uff0c\u200b\u7528\u6236\u200b\u53ef\u4ee5\u200b\u9810\u5b89\u88dd\u200b\u65b0\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\uff0cCosmovisor \u200b\u5c07\u6839\u64da\u200b\u93c8\u4e0a\u200b\u8edf\u4ef6\u200b\u5347\u7d1a\u200b\u5efa\u8b70\u200b\u81ea\u52d5\u200b\u66f4\u65b0\u200b\u5b83\u5011\u200b\u3002</p> <p><code>cosmovisor</code> \u200b\u662f\u200b Cosmos SDK \u200b\u61c9\u7528\u200b\u7a0b\u5e8f\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u7684\u200b\u5c0f\u578b\u200b\u6d41\u7a0b\u200b\u7ba1\u7406\u5668\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u76e3\u63a7\u200b\u50b3\u5165\u200b\u93c8\u5347\u7d1a\u200b\u63d0\u6848\u200b\u7684\u200b\u6cbb\u7406\u200b\u6a21\u584a\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5b83\u200b\u770b\u5230\u200b\u4e00\u500b\u200b\u63d0\u6848\u200b\u88ab\u200b\u6279\u51c6\u200b\uff0ccosmovisor \u200b\u53ef\u4ee5\u200b\u81ea\u52d5\u200b\u4e0b\u8f09\u200b\u65b0\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\uff0c\u200b\u505c\u6b62\u200b\u7576\u524d\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5f9e\u200b\u820a\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u5207\u63db\u200b\u5230\u200b\u65b0\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\uff0c\u200b\u6700\u5f8c\u7528\u200b\u65b0\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u91cd\u555f\u200b\u7bc0\u9ede\u200b\u3002</p>"},{"location":"upgrade/auto/#_2","title":"\u5148\u6c7a\u200b\u689d\u4ef6","text":"<ul> <li>\u200b\u5b89\u88c5\u200b Cosmovisor</li> </ul>"},{"location":"upgrade/auto/#1-cosmovisor","title":"1. \u200b\u914d\u7f6e\u200b Cosmovisor","text":"<p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u6765\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88c5\u200b <code>stcd</code> \u200b\u4e8c\u8fdb\u5236\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f84\u200b</p> <p>\u200b\u8a2d\u7f6e\u200b Cosmovisor \u200b\u74b0\u5883\u200b\u8b8a\u91cf\u200b\u3002\u200b\u6211\u5011\u200b\u5efa\u8b70\u200b\u5728\u200b\u60a8\u200b\u7684\u200b <code>.profile</code> \u200b\u4e2d\u8a2d\u200b\u7f6e\u200b\u9019\u4e9b\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u5728\u200b\u6bcf\u500b\u200b\u6703\u200b\u8a71\u200b\u4e2d\u200b\u81ea\u52d5\u200b\u8a2d\u7f6e\u200b\u3002</p> <pre><code>echo \"# Setup Cosmovisor\" &gt;&gt; ~/.profile\necho \"export DAEMON_NAME=stcd\" &gt;&gt; ~/.profile\necho \"export DAEMON_HOME=$install_path/.stcd\" &gt;&gt; ~/.profile\nsource ~/.profile\n</code></pre> <p>\u200b\u5728\u200b\u6b64\u200b\u4e4b\u200b\u5f8c\u200b\uff0c\u200b\u60a8\u200b\u5fc5\u9808\u200b\u5728\u200b\u60a8\u200b\u7684\u200b <code>DAEMON_HOME</code> \u200b\u76ee\u9304\u200b (<code>$install_path/.stcd</code>) \u200b\u4e2d\u70ba\u200b <code>cosmosvisor</code> \u200b\u5275\u5efa\u200b\u5fc5\u8981\u200b\u7684\u200b\u6587\u4ef6\u200b\u593e\u200b\uff0c\u200b\u4e26\u200b\u8907\u200b\u5236\u7576\u524d\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u3002</p> <pre><code>mkdir -p $install_path/.stcd/cosmovisor\nmkdir -p $install_path/.stcd/cosmovisor/genesis\nmkdir -p $install_path/.stcd/cosmovisor/genesis/bin\nmkdir -p $install_path/.stcd/cosmovisor/upgrades\n\ncp $GOPATH/bin/stcd $install_path/.stcd/cosmovisor/genesis/bin\n</code></pre> <p>\u200b\u8981\u200b\u6aa2\u67e5\u200b\u60a8\u200b\u662f\u5426\u200b\u6b63\u78ba\u200b\u57f7\u884c\u200b\u6b64\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u8acb\u200b\u78ba\u4fdd\u200b\u60a8\u200b\u7684\u200b <code>cosmovisor</code> \u200b\u548c\u200b <code>stcd</code> \u200b\u7248\u672c\u200b\u76f8\u540c\u200b\uff1a</p> <pre><code>cosmovisor run version\nstcd version\n</code></pre>"},{"location":"upgrade/auto/#2-daodst","title":"2. \u200b\u4e0b\u8f09\u200b Daodst \u200b\u7248\u672c","text":""},{"location":"upgrade/auto/#_3","title":"\u624b\u52d5\u200b\u4e0b\u8f09","text":"<p>Cosmovisor \u200b\u5c07\u4e0d\u65b7\u200b\u8f2a\u8a62\u200b <code>$DAEMON_HOME/data/upgrade-info.json</code> \u200b\u4ee5\u200b\u7372\u53d6\u200b\u65b0\u200b\u7684\u200b\u5347\u7d1a\u200b\u8aaa\u660e\u200b\u3002</p> <ol> <li>\u200b\u4e0b\u8f09\u200b\uff08\u200b\u672a\u5b89\u88dd\u200b\uff09\u200b\u65b0\u200b\u7248\u672c\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b</li> <li>\u200b\u5c07\u5176\u200b\u653e\u5728\u200b<code>$DAEMON_HOME/cosmovisor/upgrades/&lt;name&gt;/bin</code>\u200b\u4e0b\u200b\uff0c\u200b\u5176\u4e2d\u200b<code>&lt;name&gt;</code>\u200b\u662f\u200b\u8edf\u4ef6\u200b\u5347\u7d1a\u200b\u8a08\u5283\u200b\u4e2d\u200b\u6307\u5b9a\u200b\u7684\u200b\u5347\u7d1a\u200b\u7684\u200b URI \u200b\u7de8\u78bc\u200b\u540d\u7a31\u200b\u3002</li> </ol> <p>\u200b\u8303\u4f8b\u200b: \u200b\u5c0d\u200b\u65bc\u200b\u540d\u70ba\u200b<code>v3.0.0</code>\u200b\u7684\u200b<code>\u200b\u8a08\u5283\u200b</code>\u200b\u4ee5\u53ca\u200b\u4ee5\u4e0b\u200b<code>upgrade-info.json</code>\uff1a</p> <pre><code>{\n    \"binaries\": {\n        \"linux/arm64\": \"https://github.com/daodst/blockchain/releases/download/v3.0.0/daodst_3.0.0_Linux_arm64.tar.gz\",\n        \"linux/amd64\": \"https://github.com/daodst/blockchain/releases/download/v3.0.0/daodst_3.0.0_Linux_amd64.tar.gz\",\n        \"windows/x86_64\": \"https://github.com/daodst/blockchain/releases/download/v3.0.0/daodst_3.0.0_Windows_x86_64.zip\"\n    }\n}\n</code></pre> <p>\u200b\u4f60\u200b\u7684\u200b <code>cosmovisor/</code> \u200b\u76ee\u9304\u200b\u61c9\u8a72\u200b\u662f\u200b\u9019\u6a23\u200b\u7684\u200b\uff1a</p> <pre><code>cosmovisor/\n\u251c\u2500\u2500 current/   # either genesis or upgrades/&lt;name&gt;\n\u251c\u2500\u2500 genesis\n\u2502   \u2514\u2500\u2500 bin\n\u2502       \u2514\u2500\u2500 stcd\n\u2514\u2500\u2500 upgrades\n    \u2514\u2500\u2500 v3.0.0\n        \u251c\u2500\u2500 bin\n        \u2502   \u2514\u2500\u2500 stcd\n        \u2514\u2500\u2500 upgrade-info.json\n</code></pre>"},{"location":"upgrade/auto/#_4","title":"\u81ea\u52d5\u200b\u4e0b\u8f09","text":"<p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b : \u200b\u81ea\u52d5\u200b\u4e0b\u8f09\u200b\u4e0d\u6703\u200b\u63d0\u524d\u200b\u9a57\u8b49\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u662f\u5426\u200b\u53ef\u7528\u200b\u3002\u200b\u5982\u679c\u200b\u4e0b\u8f09\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u6709\u200b\u4efb\u4f55\u200b\u554f\u984c\u200b\uff0c<code>cosmovisor</code> \u200b\u5c07\u200b\u505c\u6b62\u200b\u4e26\u4e14\u200b\u4e0d\u6703\u200b\u91cd\u65b0\u200b\u555f\u52d5\u93c8\u200b\uff08\u200b\u9019\u200b\u53ef\u80fd\u200b\u6703\u5c0e\u81f4\u200b\u5b83\u200b\u505c\u6b62\u200b\uff09\u3002</p> <p>\u200b\u53ef\u4ee5\u200b\u8b93\u200b Cosmovisor \u200b\u81ea\u52d5\u200b\u4e0b\u8f09\u200b \u200b\u65b0\u200b\u7684\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u3002 \u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u81ea\u52d5\u200b\u4e0b\u8f09\u200b\u9078\u9805\u200b\u4f86\u200b\u9632\u6b62\u200b\u5347\u7d1a\u200b\u904e\u7a0b\u200b\u4e2d\u200b\u4e0d\u5fc5\u8981\u200b\u7684\u200b\u505c\u6a5f\u200b\u3002</p> <p>\u200b\u4e00\u65e6\u200b\u93c8\u200b\u5728\u5efa\u200b\u8b70\u200b\u7684\u200b upgrade-height \u200b\u8655\u200b\u505c\u6b62\u200b\uff0c\u200b\u6b64\u9078\u200b\u9805\u5c07\u200b\u4f7f\u7528\u200b\u5347\u7d1a\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u81ea\u52d5\u91cd\u200b\u555f\u93c8\u200b\u3002</p> <p>\u200b\u6b64\u9078\u9805\u200b\u7684\u200b\u4e3b\u8981\u200b\u597d\u8655\u200b\u662f\u200b\u9a57\u8b49\u8005\u200b\u53ef\u4ee5\u200b\u63d0\u524d\u200b\u6e96\u5099\u200b\u5347\u7d1a\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\uff0c\u200b\u7136\u5f8c\u5728\u200b\u5347\u7d1a\u200b\u6642\u200b\u653e\u200b\u9b06\u200b\u3002</p> <p>\u200b\u8981\u200b\u8a2d\u7f6e\u200b\u81ea\u52d5\u200b\u4e0b\u8f09\u200b\u4f7f\u7528\u200b\u8a2d\u7f6e\u200b\u4ee5\u4e0b\u200b\u74b0\u5883\u200b\u8b8a\u91cf\u200b\uff1a</p> <pre><code>echo \"export DAEMON_ALLOW_DOWNLOAD_BINARIES=true\" &gt;&gt; ~/.profile\n</code></pre>"},{"location":"upgrade/auto/#3","title":"3. \u200b\u555f\u52d5\u200b\u4f60\u200b\u7684\u200b\u7bc0\u9ede","text":"<p>\u200b\u73fe\u5728\u200b\u4e00\u5207\u200b\u90fd\u200b\u5df2\u200b\u8a2d\u7f6e\u200b\u4e26\u6e96\u5099\u200b\u5c31\u7dd2\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u555f\u52d5\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u3002</p> <pre><code>cosmovisor run start\n</code></pre> <p>\u200b\u60a8\u5c07\u200b\u9700\u8981\u200b\u4e00\u4e9b\u200b\u65b9\u6cd5\u200b\u4f86\u200b\u4fdd\u6301\u200b\u9032\u7a0b\u59cb\u200b\u7d42\u904b\u884c\u200b\u3002\u200b\u5982\u679c\u200b\u4f60\u200b\u5728\u200b linux \u200b\u4e0a\u200b\uff0c\u200b\u4f60\u200b\u53ef\u4ee5\u200b\u901a\u904e\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u670d\u52d9\u4f86\u200b\u505a\u5230\u200b\u9019\u4e00\u9ede\u200b\u3002</p> <pre><code>sudo tee /etc/systemd/system/stcd.service &gt; /dev/null &lt;&lt;EOF\n[Unit]\nDescription=Daodst Chain Daemon\nAfter=network-online.target\n\n[Service]\nUser=$USER\nExecStart=$(which cosmovisor) start\nRestart=always\nRestartSec=3\nLimitNOFILE=infinity\n\nEnvironment=\"DAEMON_HOME=$HOME/.stcd\"\nEnvironment=\"DAEMON_NAME=stcd\"\nEnvironment=\"DAEMON_ALLOW_DOWNLOAD_BINARIES=false\"\nEnvironment=\"DAEMON_RESTART_AFTER_UPGRADE=true\"\n\n[Install]\nWantedBy=multi-user.target\nEOF\n</code></pre> <p>\u200b\u7136\u200b\u5f8c\u200b\u66f4\u65b0\u200b\u4e26\u555f\u200b\u52d5\u7bc0\u9ede\u200b</p> <pre><code>sudo -S systemctl daemon-reload\nsudo -S systemctl enable stcd\nsudo -S systemctl start stcd\n</code></pre> <p>\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u65b9\u5f0f\u200b\u6aa2\u67e5\u200b\u72c0\u614b\u200b\uff1a</p> <pre><code>systemctl status stcd\n</code></pre>"},{"location":"upgrade/hard-fork/","title":"\u786c\u200b\u5206\u53c9\u200b\u5347\u7d1a","text":"<p>\u200b\u6b63\u5e38\u200b\u5347\u7d1a\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u91cd\u5927\u200b\u9650\u5236\u200b\u4e4b\u4e00\u200b \u200b\u793e\u533a\u200b\u6cbb\u7406\u200b \u200b\u662f\u200b\u5b83\u200b\u9700\u8981\u200b\u7b49\u5f85\u200b\u6574\u500b\u200b\u6295\u7968\u200b\u671f\u200b\u3002</p> <p>\u200b\u6b64\u6301\u7e8c\u200b\u6642\u9593\u200b\u4f7f\u200b\u5176\u200b\u4e0d\u200b\u9069\u5408\u200b\u6d89\u53ca\u200b\u5b89\u5168\u6f0f\u6d1e\u200b\u6216\u200b\u5176\u4ed6\u200b\u95dc\u9375\u200b\u7d44\u4ef6\u200b\u88dc\u4e01\u200b\u7684\u200b\u81ea\u52d5\u200b\u5347\u7d1a\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u6cbb\u7406\u200b\u7684\u200b\u4e00\u7a2e\u200b\u66f4\u200b\u5feb\u200b\u7684\u200b\u66ff\u4ee3\u200b\u65b9\u6cd5\u200b\u662f\u200b\u5275\u5efa\u786c\u200b\u5206\u53c9\u200b\u7a0b\u5e8f\u200b\u3002 \u200b\u6b64\u200b\u904e\u7a0b\u200b\u81ea\u52d5\u200b\u61c9\u7528\u200b\u5347\u7d1a\u200b\u8a08\u5283\u200b\u7684\u200b\u66f4\u6539\u200b\uff0c\u200b\u5141\u8a31\u200b\u5b83\u5011\u200b\u5728\u200b\u7d66\u5b9a\u200b\u7684\u200b\u5340\u584a\u200b\u9ad8\u5ea6\u200b\u57f7\u884c\u200b\uff0c\u200b\u800c\u200b\u7121\u200b\u9700\u200b\u5275\u5efa\u200b\u6cbb\u7406\u200b\u63d0\u6848\u200b\u3002</p> <p>\u200b\u5354\u8abf\u200b\u5347\u7d1a\u200b\u7684\u200b\u9ad8\u7d1a\u200b\u7b56\u7565\u200b\u5982\u4e0b\u200b\uff1a</p> <ul> <li>\u200b\u6f0f\u6d1e\u200b\u4fee\u200b\u5fa9\u200b\u5728\u200b\u5305\u542b\u200b\u91cd\u5927\u200b\u66f4\u6539\u200b\u7684\u200b\u79c1\u6709\u200b\u5206\u652f\u200b\u4e0a\u200b\u3002</li> <li>\u200b\u9700\u8981\u200b\u5275\u5efa\u200b\u4e00\u500b\u200b\u65b0\u200b\u7684\u200b\u88dc\u4e01\u200b\u7248\u672c\u200b\uff08\u200b\u4f8b\u5982\u200b <code>v8.0.0</code> -&gt; <code>v8.0.1</code>\uff09\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u786c\u200b\u5206\u53c9\u200b\u908f\u8f2f\u200b\u4e26\u57f7\u884c\u200b\u5347\u7d1a\u200b\u5230\u200b\u4e0b\u200b\u4e00\u500b\u200b\u4e2d\u65b7\u200b\u7248\u672c\u200b\uff08\u200b\u4f8b\u5982\u200b <code>v9.0.0</code>\uff09\u200b\u9810\u5b9a\u200b\u7fa9\u584a\u200b\u9ad8\u5ea6\u200b\u3002</li> <li>\u200b\u9a57\u8b49\u8005\u5c07\u200b\u4ed6\u5011\u200b\u7684\u200b\u7bc0\u9ede\u200b\u5347\u7d1a\u200b\u5230\u200b\u88dc\u4e01\u200b\u7248\u672c\u200b\uff08\u200b\u4f8b\u5982\u200b<code>v8.0.1</code>\uff09\u3002 \u200b\u70ba\u200b\u4e86\u200b\u6210\u529f\u200b\u57f7\u884c\u200b\u786c\u200b\u5206\u53c9\u200b\uff0c\u200b\u91cd\u8981\u200b\u7684\u200b\u662f\u200b\u6709\u200b\u8db3\u5920\u200b\u591a\u200b\u7684\u200b\u9a57\u8b49\u8005\u200b\u5347\u7d1a\u200b\u5230\u200b\u88dc\u4e01\u200b\u7248\u672c\u200b\uff0c\u200b\u9019\u6a23\u200b\u4ed6\u5011\u200b\u81f3\u5c11\u200b\u4f54\u9a57\u200b\u8b49\u8005\u200b\u7e3d\u200b\u6295\u7968\u200b\u6b0a\u7684\u200b 2/3\u3002</li> <li>\u200b\u5347\u7d1a\u200b\u6642\u9593\u200b\u524d\u200b\u4e00\u5c0f\u200b\u6642\u200b\uff08\u200b\u5c0d\u200b\u61c9\u5347\u7d1a\u200b\u5340\u584a\u200b\u9ad8\u5ea6\u200b\uff09\uff0c\u200b\u767c\u5e03\u200b\u5305\u542b\u200b\u6f0f\u6d1e\u200b\u4fee\u200b\u5fa9\u200b\u7684\u200b\u65b0\u4e3b\u200b\u7248\u672c\u200b\uff08\u200b\u5982\u200b<code>v9.0.0</code>\uff09\u3002</li> </ul> <p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b : \u200b\u767c\u5e03\u200b\u9700\u8981\u200b\u63d0\u524d\u200b 1 \u200b\u5c0f\u6642\u200b\u5275\u5efa\u200b\uff0c\u200b\u56e0\u70ba\u200b\u5275\u5efa\u200b\u767c\u5e03\u200b\u4e8c\u200b\u9032\u200b\u88fd\u200b\u6587\u4ef6\u200b\u5927\u7d04\u200b\u9700\u8981\u200b 30 \u200b\u5206\u9418\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u9700\u8981\u200b\u7de9\u885d\u200b\u6642\u9593\u200b\u4f86\u200b\u4e0b\u8f09\u200b\u5b83\u5011\u4e26\u200b\u66f4\u65b0\u200b\u5b83\u5011\u200b\u7684\u200b\u8a2d\u7f6e\u200b\u3002</p>"},{"location":"upgrade/list/","title":"\u5347\u7d1a\u200b\u6e05\u55ae","text":"<p>\u200b\u6aa2\u67e5\u200b\u6bcf\u500b\u200b\u4e3b\u7db2\u200b\u548c\u200b\u6e2c\u8a66\u200b\u7db2\u5347\u7d1a\u200b\u7684\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\u548c\u200b\u8981\u6c42\u200b\u3002</p>"},{"location":"upgrade/list/#_2","title":"\u4e3b\u7db2","text":"\u7248\u672c\u200b \u200b\u8a08\u5283\u200b \u200b\u4e2d\u65ad\u200b \u200b\u6578\u64da\u200b\u91cd\u7f6e\u200b \u200b\u50c5\u624b\u52d5\u200b\u5347\u7d1a\u200b \u200b\u5347\u7d1a\u200b\u9ad8\u5ea6\u200b <code>v1.0.0</code> (genesis) <code>N/A</code> <code>N/A</code> <code>N/A</code> \u274c 1"},{"location":"upgrade/list/#_3","title":"\u6e2c\u8a66\u7db2","text":"\u7248\u672c\u200b \u200b\u8a08\u5283\u200b \u200b\u4e2d\u65ad\u200b \u200b\u6578\u64da\u200b\u91cd\u7f6e\u200b \u200b\u50c5\u624b\u52d5\u200b\u5347\u7d1a\u200b \u200b\u5347\u7d1a\u200b\u9ad8\u5ea6\u200b <code>v1.0.0-beta1</code> (genesis) <code>N/A</code> <code>N/A</code> <code>N/A</code> \u274c 1"},{"location":"upgrade/manual/","title":"\u624b\u52d5\u200b\u5347\u7d1a","text":"<p>\u200b\u4e86\u89e3\u200b\u5982\u4f55\u200b\u624b\u52d5\u200b\u5347\u7d1a\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u3002</p>"},{"location":"upgrade/manual/#_2","title":"\u5148\u6c7a\u200b\u689d\u4ef6","text":"<ul> <li>\u200b\u5b89\u88c5\u200b stcd</li> </ul>"},{"location":"upgrade/manual/#1-daodst","title":"1. \u200b\u5347\u7d1a\u200b Daodst \u200b\u7248\u672c","text":"<p>\u200b\u5728\u200b\u5347\u7d1a\u200b Daodst \u200b\u7248\u672c\u200b\u4e4b\u524d\u200b\u3002\u200b\u4f7f\u7528\u200b <code>Ctrl/Cmd+C</code> \u200b\u505c\u6b62\u200b\u60a8\u200b\u7684\u200b daodst \u200b\u5be6\u4f8b\u200b\u3002</p> <p>\u200b\u63a5\u4e0b\u200b\u4f86\u200b\uff0c\u200b\u5c07\u8edf\u4ef6\u200b\u5347\u7d1a\u200b\u5230\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u767c\u884c\u200b\u7248\u672c\u200b\u3002\u200b\u67e5\u770b\u200b Daodst \u200b\u767c\u5e03\u9801\u200b\u9762\u200b \u200b\u6709\u95dc\u200b\u6bcf\u500b\u200b\u7248\u672c\u200b\u7684\u200b\u8a73\u7d30\u200b\u4fe1\u606f\u200b\u3002</p> <p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b : \u200b\u78ba\u200b\u4fdd\u5b89\u200b\u88dd\u7684\u200b\u7248\u672c\u200b\u8207\u200b\u60a8\u200b\u6b63\u5728\u200b\u904b\u884c\u200b\u7684\u200b\u7db2\u7d61\u200b\uff08\u200b\u4e3b\u7db2\u200b\u6216\u200b\u6e2c\u8a66\u7db2\u200b\uff09\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u7248\u672c\u200b\u76f8\u5339\u914d\u200b\u3002</p> <pre><code>cd blockchain\ngit fetch --all &amp;&amp; git checkout &lt;new_version&gt;\nmake install\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  \u200b\u5982\u679c\u200b\u60a8\u200b\u5728\u200b\u9019\u200b\u4e00\u6b65\u200b\u9047\u5230\u200b\u554f\u984c\u200b\uff0c\u200b\u8acb\u200b\u6aa2\u67e5\u200b\u60a8\u200b\u662f\u5426\u200b\u5b89\u88dd\u200b\u4e86\u200b\u6700\u65b0\u200b\u7a69\u5b9a\u200b\u7248\u672c\u200b\u7684\u200b Golang\u3002</p> <p>\u200b\u4f7f\u7528\u200b <code>version</code> \u200b\u547d\u4ee4\u200b\u9a57\u8b49\u200b\u60a8\u200b\u662f\u5426\u200b\u5df2\u200b\u5728\u200b\u7cfb\u7d71\u200b\u4e0a\u200b\u6210\u529f\u200b\u5b89\u88dd\u200b Daodst\uff1a</p> <pre><code>$ stcd version --long\n\nname: daodst\nserver_name: daodst\nversion: 3.0.0\ncommit: \nbuild_tags: \ngo: go version go1.20 darwin/amd64\n...\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  \u200b\u5982\u679c\u200b\u8edf\u4ef6\u200b\u7248\u672c\u200b\u4e0d\u200b\u5339\u914d\u200b\uff0c\u200b\u8acb\u200b\u6aa2\u67e5\u200b\u60a8\u200b\u7684\u200b <code>$PATH</code> \u200b\u4ee5\u78ba\u200b\u4fdd\u6b63\u78ba\u200b\u7684\u200b <code>stcd</code> \u200b\u6b63\u5728\u200b\u904b\u884c\u200b\u3002</p>"},{"location":"upgrade/manual/#2","title":"2. \u200b\u66ff\u63db\u200b\u5275\u4e16\u7d00\u200b\u6587\u4ef6","text":"<p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  \u200b\u60a8\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4ee5\u4e0b\u200b\u5b58\u5132\u5eab\u200b\u4e2d\u200b\u627e\u5230\u200b\u4e3b\u7db2\u200b\u6216\u200b\u6e2c\u8a66\u7db2\u200b\u7684\u200b\u6700\u65b0\u200b <code>genesis.json</code> \u200b\u6587\u4ef6\u200b\uff1a</p> <ul> <li>\u200b\u4e3b\u7db2\u200b: github.com/daodst/mainnet</li> <li>\u200b\u6e2c\u8a66\u7db2\u200b: github.com/daodst/testnets</li> </ul> <p>\u200b\u5c07\u65b0\u200b\u7684\u200b\u5275\u4e16\u8a18\u200b\u4fdd\u5b58\u200b\u70ba\u200b<code>new_genesis.json</code>\u3002\u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u5c07\u4f4d\u200b\u65bc\u200b <code>config/</code> \u200b\u76ee\u9304\u200b\u4e2d\u200b\u7684\u200b\u820a\u200b <code>genesis.json</code> \u200b\u66ff\u63db\u200b\u70ba\u200b <code>new_genesis.json</code>\uff1a</p> <pre><code>cd $install_path/.stcd/config\ncp -f genesis.json new_genesis.json\nmv new_genesis.json genesis.json\n</code></pre> <p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  </p> <p>\u200b\u6211\u5011\u200b\u5efa\u8b70\u200b\u4f7f\u7528\u200b <code>sha256sum</code> \u200b\u4f86\u200b\u6aa2\u67e5\u200b\u4e0b\u8f09\u200b\u7684\u200b\u8d77\u6e90\u200b\u8207\u200b\u9810\u671f\u200b\u8d77\u6e90\u200b\u7684\u200b\u54c8\u5e0c\u200b\u503c\u200b\u3002</p> <pre><code>cd ~/.stcd/config\necho \"&lt;expected_hash&gt;  genesis.json\" | sha256sum -c\n</code></pre> <p>:::</p>"},{"location":"upgrade/manual/#3","title":"3. \u200b\u6578\u64da\u200b\u91cd\u7f6e","text":"<p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b :  \u200b\u5982\u679c\u200b\u60a8\u200b\u8981\u200b\u5347\u7d1a\u200b\u7684\u200b\u7248\u672c\u200b\u9700\u8981\u200b\u6578\u64da\u200b\u91cd\u7f6e\u200b\uff08\u200b\u786c\u200b\u5206\u53c9\u200b\uff09\uff0c\u200b\u8acb\u200b\u6aa2\u67e5\u200b \u200b\u6b64\u8655\u200b\u3002\u200b\u5982\u679c\u200b\u4e0d\u662f\u200b\u9019\u7a2e\u200b\u60c5\u6cc1\u200b\uff0c\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u8df3\u200b\u5230\u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b\u3002</p> <p>\u200b\u522a\u9664\u200b\u904e\u6642\u200b\u7684\u200b\u6587\u4ef6\u200b\u4e26\u200b\u91cd\u7f6e\u200b\u6578\u64da\u200b\uff1a</p> <pre><code>rm $install_path/.stcd/config/addrbook.json\nstcd tendermint unsafe-reset-all --home $install_path/.stcd\n</code></pre> <p>\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u73fe\u200b\u5728\u200b\u8655\u200b\u65bc\u200b\u539f\u59cb\u200b\u72c0\u614b\u200b\uff0c\u200b\u540c\u6642\u200b\u4fdd\u7559\u200b\u539f\u59cb\u200b\u7684\u200b <code>priv_validator.json</code> \u200b\u548c\u200b <code>config.toml</code>\u3002\u200b\u5982\u679c\u200b\u60a8\u200b\u4e4b\u524d\u200b\u8a2d\u7f6e\u200b\u4e86\u200b\u4efb\u4f55\u200b\u54e8\u5175\u200b\u7bc0\u9ede\u200b\u6216\u200b\u5b8c\u6574\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u60a8\u200b\u7684\u200b\u7bc0\u9ede\u200b\u4ecd\u200b\u5c07\u5617\u200b\u8a66\u9023\u200b\u63a5\u5230\u200b\u5b83\u5011\u200b\uff0c\u200b\u4f46\u200b\u5982\u679c\u200b\u5b83\u5011\u200b\u9084\u6c92\u6709\u200b\u5347\u7d1a\u200b\uff0c\u200b\u5247\u200b\u53ef\u80fd\u200b\u6703\u200b\u5931\u6557\u200b\u3002</p> <p>\ud83d\udea8 \u200b\u91cd\u8981\u200b\u7684\u200b \ud83d\udea8</p> <p>\u200b\u78ba\u4fdd\u200b\u6bcf\u500b\u200b\u7bc0\u9ede\u200b\u90fd\u200b\u6709\u200b\u4e00\u500b\u200b\u552f\u4e00\u200b\u7684\u200b <code>priv_validator.json</code>\u3002 \u200b\u4e0d\u8981\u200b\u5c07\u200b <code>priv_validator.json</code> \u200b\u5f9e\u820a\u200b\u7bc0\u9ede\u200b\u8907\u200b\u88fd\u200b\u5230\u200b\u591a\u200b\u500b\u200b\u65b0\u200b\u7bc0\u200b\u9ede\u200b\u3002 \u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b\u7684\u200b <code>priv_validator.json</code> \u200b\u904b\u884c\u200b\u5169\u500b\u200b\u7bc0\u9ede\u200b\u5c07\u5c0e\u81f4\u200b\u60a8\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\u3002</p>"},{"location":"upgrade/manual/#4","title":"4. \u200b\u91cd\u555f\u200b\u7bc0\u9ede","text":"<p>\u200b\u8981\u200b\u5728\u200b\u65b0\u200b\u5275\u4e16\u200b\u66f4\u65b0\u200b\u5f8c\u200b\u91cd\u65b0\u200b\u555f\u52d5\u200b\u7bc0\u9ede\u200b\uff0c\u200b\u8acb\u200b\u4f7f\u7528\u200b<code>daemon</code>\u200b\u547d\u4ee4\u200b\uff1a</p> <pre><code>stcd daemon\n</code></pre>"},{"location":"upgrade/rollback/","title":"\u56de\u6efe","text":"<p>\ud83d\udce3 \u200b\u63d0\u793a\u200b :  <code>$install_path</code> \u200b\u7528\u6765\u200b\u8868\u793a\u200b\u60a8\u200b\u5b89\u88c5\u200b <code>stcd</code> \u200b\u4e8c\u8fdb\u5236\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8def\u5f84\u200b</p> <p>\u200b\u4e86\u89e3\u200b\u5982\u4f55\u200b\u5728\u200b\u93c8\u5347\u7d1a\u200b\u5931\u6557\u200b\u7684\u200b\u60c5\u6cc1\u200b\u4e0b\u56de\u200b\u6efe\u93c8\u200b\u7248\u672c\u200b\u3002</p> <p>\u200b\u70ba\u200b\u4e86\u200b\u6062\u200b\u5fa9\u200b\u4ee5\u524d\u200b\u7684\u200b\u93c8\u200b\u7248\u672c\u200b\uff0c\u200b\u9a57\u8b49\u8005\u200b\u5fc5\u9808\u200b\u6062\u200b\u5fa9\u200b\u4ee5\u4e0b\u200b\u6578\u64da\u200b\uff1a</p> <ul> <li>\u200b\u5305\u542b\u200b\u4e0a\u200b\u4e00\u689d\u200b\u93c8\u72c0\u614b\u200b\u7684\u200b\u6578\u64da\u5eab\u200b\uff08\u200b\u9ed8\u8a8d\u200b\u5728\u200b <code>$install_path/.stcd/data</code> \u200b\u4e2d\u200b\uff09</li> <li>\u200b\u9a57\u8b49\u5668\u200b\u7684\u200b <code>priv_validator_state.json</code> \u200b\u6587\u4ef6\u200b\uff08\u200b\u9ed8\u8a8d\u200b\u4e5f\u200b\u5728\u200b <code>$install_path/.stcd/data</code> \u200b\u4e2d\u200b\uff09</li> </ul> <p>\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u4e0d\u200b\u64c1\u6709\u200b\u4ed6\u5011\u200b\u7684\u200b\u6578\u64da\u5eab\u200b\u6578\u64da\u200b\uff0c\u200b\u5247\u200b\u53e6\u200b\u4e00\u500b\u9a57\u200b\u8b49\u8005\u200b\u61c9\u8a72\u200b\u5171\u4eab\u200b\u6578\u64da\u5eab\u200b\u7684\u200b\u526f\u672c\u200b\u3002\u200b\u9a57\u8b49\u8005\u200b\u5c07\u80fd\u5920\u200b\u4e0b\u8f09\u200b\u6578\u64da\u200b\u526f\u672c\u200b\u4e26\u5728\u200b\u555f\u52d5\u200b\u5176\u200b\u7bc0\u9ede\u200b\u4e4b\u524d\u200b\u5c0d\u200b\u5176\u200b\u9032\u884c\u9a57\u8b49\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u9a57\u8b49\u8005\u200b\u6c92\u6709\u200b\u5099\u4efd\u200b\u7684\u200b<code>priv_validator_state.json</code> \u200b\u6587\u4ef6\u200b\uff0c\u200b\u90a3\u9ebc\u200b\u9019\u4e9b\u200b\u9a57\u8b49\u8005\u200b\u5c07\u4e0d\u6703\u200b\u5728\u200b\u4ed6\u5011\u200b\u7684\u200b\u7b2c\u4e00\u200b\u500b\u5340\u200b\u584a\u200b\u4e0a\u200b\u6709\u200b\u96d9\u91cd\u200b\u7c3d\u540d\u200b\u4fdd\u8b77\u200b\u3002</p>"},{"location":"upgrade/rollback/#_2","title":"\u6062\u200b\u5fa9\u200b\u72b6\u6001\u200b\u7a0b\u5e8f","text":"<ul> <li> <p>\u200b\u9996\u5148\u200b\uff0c\u200b\u505c\u6b62\u200b\u4f60\u200b\u7684\u200b\u7bc0\u9ede\u200b\u3002</p> </li> <li> <p>\u200b\u7136\u200b\u5f8c\u200b\uff0c\u200b\u5c07\u5099\u200b\u4efd\u200b\u6578\u64da\u200b\u76ee\u9304\u200b\u7684\u200b\u5167\u5bb9\u200b\u8907\u200b\u88fd\u200b\u56de\u200b<code>$DAODST_HOME/data</code>\u200b\u76ee\u9304\u200b\uff08\u200b\u9ed8\u8a8d\u200b\u60c5\u6cc1\u200b\u4e0b\u200b\u61c9\u70ba\u200b<code>$install_path/.stcd/data</code>\uff09</p> </li> </ul> <pre><code># Assumes backup is stored in \"backup\" directory\nrm -rf $install_path/.stcd/data\nmv backup/.stcd/data $install_path/.stcd/data\n</code></pre> <ul> <li>\u200b\u63a5\u4e0b\u200b\u4f86\u200b\uff0c\u200b\u5b89\u88dd\u200b\u4ee5\u524d\u200b\u7248\u672c\u200b\u7684\u200b Daodst\u3002</li> </ul> <pre><code># from daodst directory\ngit checkout &lt;prev_version&gt;\nmake install\n## verify version\nstcd version --long\n</code></pre> <ul> <li>\u200b\u6700\u200b\u5f8c\u200b\uff0c\u200b\u555f\u52d5\u200b\u7bc0\u9ede\u200b\u3002</li> </ul> <pre><code>stcd daemon\n</code></pre>"},{"location":"upgrade/template/","title":"\u5347\u7d1a\u200b\u63d0\u6848\u200b\u5167\u5bb9\u200b\u6a21\u677f","text":"<p>\u200b\u5347\u7d1a\u200b\u5305\u62ec\u200b\u4e09\u200b\u90e8\u5206\u200b\u5167\u5bb9\u200b\uff0c\u200b\u7db2\u95dc\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5347\u7d1a\u200b\u3001\u200b\u4e3b\u93c8\u200b\u7bc0\u9ede\u200b\u5347\u7d1a\u200b\u3001APP\u200b\u5347\u7d1a\u200b\u3002\u200b\u7db2\u95dc\u200b\u548c\u200b\u4e3b\u93c8\u200b\u5206\u70ba\u200blinux\u200b\u548c\u200bwindows\u200b\u5169\u500b\u200b\u7248\u672c\u200b\uff0c\u200b\u53ea\u200b\u652f\u6301\u200b64\u200b\u4f4d\u7cfb\u7d71\u200b\u3002 \u200b\u5347\u7d1a\u200b\u6587\u4ef6\u200b\u5305\u200b\u9700\u8981\u200b\u9032\u884c\u200bsha256\u200b\u7de8\u78bc\u200b\uff0c\u200b\u7136\u200b\u5f8c\u200b\u6309\u7167\u200b\u7d66\u5b9a\u200b\u7684\u200b\u683c\u5f0f\u200b\u62fc\u63a5\u200b\u5230\u200b\u4e0b\u8f09\u200b\u93c8\u200b\u63a5\u4e0a\u200b\uff0c\u200b\u7528\u200b\u65bc\u200b\u6587\u4ef6\u200b\u7684\u200b\u6709\u6548\u6027\u200b\u6821\u9a57\u200b\u3002 upgrade_script \u200b\u8173\u672c\u200b\u9069\u7528\u200b\u65bc\u200b\u5347\u7d1a\u200b\u9664\u200b\u5ba2\u6236\u200b\u7aef\u5916\u200b\u9700\u8981\u200b\u984d\u5916\u200b\u8655\u7406\u200b\u7684\u200b\u6578\u64da\u200b\u6216\u200b\u7a0b\u5e8f\u200b\u3002</p> <p>\u200b\u57f7\u884c\u200bsha256\u200b\u547d\u4ee4\u200b:</p> <pre><code>sha256sum file\n#output:    \n27a1ed5d502d4148f837f2a74c6d87b574ce52391fda253618e60486e0304c5b  file\n</code></pre> <ul> <li>\u200b\u7db2\u95dc\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5347\u7d1a\u200b\u63d0\u6848\u200b\u5167\u5bb9\u200b:</li> </ul> <p>\u26a0\ufe0f\u200b\u6ce8\u610f\u200b :\u200b\u7db2\u95dc\u200b\u5ba2\u6236\u200b\u7aef\u200b\u5347\u7d1a\u200b\u9700\u8981\u200b\u6309\u7167\u200b\u56fa\u5b9a\u200b\u683c\u5f0f\u200b\u9032\u884c\u200b\u6253\u5305\u200b\uff0c\u200b\u5982\u200b: resources/gateway/gateway</p> <pre><code>{\n  \"gateway\": {\n        \"version\": \"22.09.07\",\n        \"binaries\": {\n            \"linux/amd64\": {\n                \"url\": \"https://example.com/daodst.zip?checksum=sha256:aec070645fe53ee3b3763059376134f058cc337247c978add178b6ccdfb0019f\",\n                \"size\": 123877163\n            },\n            \"windows/amd64\": {\n                \"url\": \"https://example.com/daodst.zip?checksum=sha256:aec070645fe53ee3b3763059376134f058cc337247c978add178b6ccdfb0019f\",\n                \"size\": 123877163\n            }\n        }\n    }\n\n}\n</code></pre> <ul> <li>\u200b\u4e3b\u93c8\u200b\u7bc0\u9ede\u200b\u5347\u7d1a\u200b\u63d0\u6848\u200b\u5167\u5bb9\u200b:</li> </ul> <pre><code>{\n  \"blockchain\": {\n        \"version\": \"22.10.08\",\n        \"binaries\": {\n            \"linux/amd64\": {\n                \"url\": \"https://example.com/daodst.zip?checksum=sha256:aec070645fe53ee3b3763059376134f058cc337247c978add178b6ccdfb0019f\",\n                \"size\": 123877163\n            },\n            \"windows/amd64\": {\n                \"url\": \"https://example.com/daodst.zip?checksum=sha256:aec070645fe53ee3b3763059376134f058cc337247c978add178b6ccdfb0019f\",\n                \"size\": 123877163\n            }\n        }\n    }\n}\n</code></pre> <ul> <li>APP\u200b\u5347\u7d1a\u200b\u63d0\u6848\u200b\u5167\u5bb9\u200b:</li> </ul> <pre><code>{\n    \"app\": {\n        \"version\": \"22.09.07\",\n        \"binaries\": {\n            \"android\": {\n                \"url\": \"https://example.com/gaia.zip?checksum=sha256:aec070645fe53ee3b3763059376134f058cc337247c978add178b6ccdfb0019f\",\n                \"size\": 123877163\n            }\n        }\n    }\n}\n</code></pre> <p>\u200b\u652f\u6301\u200b\u4e00\u6b21\u200b\u63d0\u6848\u200b\u5347\u7d1a\u200b\u591a\u500b\u200b\u7a0b\u5e8f\u200b:</p> <pre><code>{\n  \"gateway\": {\n        \"version\": \"22.09.07\",\n        \"binaries\": {\n            \"linux/amd64\": {\n                \"url\": \"https://example.com/gaia.zip?checksum=sha256:aec070645fe53ee3b3763059376134f058cc337247c978add178b6ccdfb0019f\",\n                \"size\": 123877163\n            },\n            \"windows/amd64\": {\n                \"url\": \"https://example.com/gaia.zip?checksum=sha256:aec070645fe53ee3b3763059376134f058cc337247c978add178b6ccdfb0019f\",\n                \"size\": 123877163\n            }\n        }\n    },\n  \"blockchain\": {\n        \"version\": \"22.10.08\",\n        \"binaries\": {\n            \"linux/amd64\": {\n                \"url\": \"https://example.com/gaia.zip?checksum=sha256:aec070645fe53ee3b3763059376134f058cc337247c978add178b6ccdfb0019f\",\n                \"size\": 123877163\n            },\n            \"windows/amd64\": {\n                \"url\": \"https://example.com/gaia.zip?checksum=sha256:aec070645fe53ee3b3763059376134f058cc337247c978add178b6ccdfb0019f\",\n                \"size\": 123877163\n            }\n        }\n    },\n    \"app\": {\n        \"version\": \"22.09.07\",\n        \"binaries\": {\n            \"android\": {\n                \"url\": \"https://example.com/gaia.zip?checksum=sha256:aec070645fe53ee3b3763059376134f058cc337247c978add178b6ccdfb0019f\",\n                \"size\": 123877163,\n                \"sha512\":\"\"\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"window/info/","title":"\u4f7f\u7528\u200b\u8aaa\u660e","text":""},{"location":"window/info/#1","title":"1.\u200b\u8f38\u5165\u200b\u5bc6\u78bc\u200b\u767b\u9304\u200b\uff0c\u200b\u8a18\u5f97\u200b\u4fdd\u5b58\u200b\u597d\u6b64\u200b\u5bc6\u78bc","text":""},{"location":"window/info/#2","title":"2.\u200b\u8f38\u5165\u200b\u79c1\u200b\u9470\u200b\u52a0\u5165\u200b\u9322\u5305\u200b\u5730\u5740","text":""},{"location":"window/info/#3","title":"3.\u200b\u5efa\u7acb\u200b\u8a02\u55ae\u200b\u4efb\u52d9","text":"<p>\u200b\u5982\u679c\u200bUSDT\u200b\u8cb7\u5165\u200b\u6578\u91cf\u200b\u586b\u5beb\u200b100\uff0cUSDT\u200b\u514c\u63db\u200b\u6bd4\u4f8b\u200b\u586b\u5beb\u200b0.9\uff0c\u200b\u610f\u5473\u8457\u200b\u6263\u9664\u200b\u8ce3\u51fa\u200b\u93c8\u200b90USDT\uff0c\u200b\u7372\u5f97\u200b\u76ee\u6a19\u200b\u93c8\u200b100USDT\u3002</p> <p>\u200b\u6302\u55ae\u200b\u4fdd\u6301\u200b\u6578\u91cf\u200b\uff1a\u200b\u5982\u679c\u200b\u586b\u5beb\u200b0\uff0c\u200b\u53ea\u6703\u200b\u6302\u200b\u4e00\u7b46\u200b\u8a02\u55ae\u200b\uff0c\u200b\u4ea4\u6613\u200b\u5b8c\u6210\u200b\u5f8c\u200b\u4e0d\u6703\u200b\u5728\u200b\u9032\u884c\u200b\u88dc\u55ae\u200b\uff0c\u200b\u5982\u679c\u200b\u586b\u5beb\u200b\u5927\u200b\u65bc\u200b0\u200b\u7684\u200b\u6578\u5b57\u200b\uff0c\u200b\u8a02\u55ae\u200b\u5b8c\u6210\u200b\u540e\u5c07\u200b\u81ea\u52d5\u200b\u88dc\u55ae\u200b\u3002</p> <p></p>"},{"location":"window/info/#4","title":"4.\u200b\u67e5\u770b\u200b\u8a02\u55ae\u200b\u4efb\u52d9\u200b\u6e05\u55ae","text":""},{"location":"window/info/#5","title":"5.\u200b\u67e5\u770b\u200b\u8a02\u55ae\u200b\u6e05\u55ae","text":""},{"location":"window/info/#6","title":"6.\u200b\u8de8\u93c8\u200b\u5408\u7d04\u200b\u6e05\u55ae","text":"<p>\u200b\u4fee\u6539\u200bRPC:\u200b\u53ef\u4ee5\u200b\u4fee\u6539\u200b\u9ed8\u8a8d\u200b\u7684\u200bRPC</p> <p>\u200b\u91cd\u7f6e\u200bRPC:\u200b\u53ef\u4ee5\u200b\u6539\u56de\u200b\u9ed8\u8a8d\u200b\u7684\u200bRPC</p> <p></p>"},{"location":"window/info/#7rpc","title":"7.\u200b\u53d6\u5f97\u200b\u7b2c\u4e09\u65b9\u200bRPC\u200b\u7bc0\u9ede","text":""},{"location":"window/info/#1chainlist","title":"1.Chainlist","text":""},{"location":"window/info/#2getblock","title":"2.Getblock","text":""},{"location":"window/info/#3quicknode","title":"3.Quicknode","text":""},{"location":"window/info/#4tron-network","title":"4.Tron network","text":""},{"location":"window/introduce/","title":"\u4ecb\u7d39","text":""},{"location":"window/introduce/#_1","title":"\u529f\u80fd\u200b\u8bf4\u660e","text":"<p>\u200b\u8ce3\u5bb6\u200b\u900f\u904e\u200b\u6b64\u200b\u7a0b\u5f0f\u200b\u5be6\u73fe\u200b\u4e86\u200b\u5efa\u7acb\u200b\u639b\u55ae\u200b\u4efb\u52d9\u200b\uff0c\u200b\u81ea\u52d5\u200b\u6839\u64da\u200b\u639b\u55ae\u200b\u4efb\u52d9\u200b\u9032\u884c\u200b\u639b\u55ae\u200b\uff0c\u200b\u81ea\u52d5\u200b\u63d0\u6b3e\u200b\uff0c\u200b\u81ea\u52d5\u200b\u53d6\u6d88\u200b\u639b\u55ae\u200b\u7b49\u200b\u529f\u80fd\u200b\uff0c\u200b\u8de8\u200b\u934a\u200b\u662f\u200b\u900f\u904e\u200bHASH\u200b\u9396\u5b9a\u200b\u5408\u7d04\u200b\u5be6\u73fe\u200b\u4e86\u200b\u5b8c\u5168\u200b\u53bb\u200b\u4e2d\u5fc3\u5316\u200b\u7684\u200b\u9ede\u5c0d\u9ede\u200b\u7684\u200b\u8de8\u93c8\u200b\u3002</p> <p>\u200b\u5c0d\u200b\u65bc\u200bDST\u200b\u93c8\u200b\uff0c\u200b\u5982\u679c\u200b\u672c\u5730\u200b\u6c92\u6709\u200b\u555f\u52d5\u200b\u5168\u7bc0\u9ede\u200b\uff0c\u200b\u6703\u9ed8\u8a8d\u200b\u555f\u52d5\u200b\u5168\u7bc0\u9ede\u200b\uff0c\u200b\u63d0\u4f9b\u200b\u4ea4\u6613\u6240\u200b\u7528\u200b\u7684\u200bRPC\uff0c\u200b\u93c8\u63a5\u200b\u70ba\u200bhttp://127.0.0.1:8545 \uff0c\u200b\u4f60\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u914d\u7f6e\u200b\u4f60\u200b\u81ea\u5df1\u200b\u7684\u200bRPC\u200b\u93c8\u63a5\u200b</p>"},{"location":"window/introduce/#hash","title":"HASH\u200b\u9396\u5b9a\u200b\u5408\u7d04\u200b\u6d41\u7a0b\u200b\u4ecb\u7d39","text":"<p>\u200b\u5047\u8a2d\u200b\u6709\u200bA\u3001B\u200b\u5169\u500b\u200b\u93c8\u200b Tom\u200b\u4f5c\u70ba\u200b\u8ce3\u5bb6\u200b\u64c1\u6709\u200bA\u200b\u93c8\u200b\u7684\u200bUSDT\u200b\u8cc7\u7522\u200b\u60f3\u8981\u200b\u514c\u63db\u6210\u200bB\u200b\u93c8\u200b\u7684\u200bUSDT\u200b\u8cc7\u7522\u200b\uff0cAlice\u200b\u4f5c\u70ba\u200b\u8cb7\u5bb6\u200b\u6709\u200bB\u200b\u93c8\u200b\u7684\u200bUSDT\u200b\u8cc7\u7522\u200b\u60f3\u8981\u200b\u514c\u63db\u6210\u200bA\u200b\u93c8\u200b\u7684\u200bUSDT</p> <ol> <li> <p>Tom\u200b\u9700\u8981\u200b\u8abf\u7528\u200bA\u200b\u93c8\u200b\u7684\u200bHASH\u200b\u9396\u5b9a\u200b\u7684\u200b\u8de8\u200b\u93c8\u5408\u7d04\u200b\u7684\u200b\u5275\u5efa\u8ce3\u200b\u55ae\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u50b3\u5165\u200bB\u200b\u93c8\u200b\u7684\u200b\u93c8\u200bID\u3001\u200b\u8ce3\u51fa\u200b\u6578\u91cf\u200b\u3001\u200b\u9396\u5b9a\u200b\u6642\u9593\u200b\u3001\u200b\u548c\u200b\u93c8\u4e0b\u200b\u751f\u6210\u200b\u7684\u200bsignature\uff08\u200b\u8ce3\u5bb6\u200b\u6839\u64da\u200bA\u200b\u93c8\u200b\u7684\u200b\u93c8\u200bID\uff0c B\u200b\u93c8\u200b\u7684\u200b\u93c8\u200bID\uff0c \u200b\u8ce3\u5bb6\u200b\u81ea\u8a02\u200b\u7684\u200b\u5bc6\u78bc\u200b\uff0c\u200b\u6578\u91cf\u200b\u7c3d\u7ae0\u200b\u6240\u5f97\u200b\uff09\u200b\u7522\u751f\u200b\u8a02\u55ae\u200b\uff0c\u200b\u8a02\u55ae\u200b\u6709\u200b\u552f\u4e00\u200b\u7684\u200bKey(sha256(signature)\u200b\u6240\u5f97\u200b)\uff0c\u200b\u4e26\u628a\u200b\u5c0d\u200b\u61c9\u6578\u91cf\u200b\u7684\u200bUSDT\u200b\u8cc7\u7522\u200b\u8f49\u5165\u200b\u5230\u200b\u5408\u7d04\u200b</p> </li> <li> <p>Alice\u200b\u60f3\u8981\u200b\u8cfc\u8cb7\u200b\u9996\u5148\u200b\u8abf\u7528\u200bA\u200b\u93c8\u200bHASH\u200b\u9396\u5b9a\u200b\u7684\u200b\u8de8\u200b\u93c8\u5408\u7d04\u200b\u7684\u200b\u8cfc\u8cb7\u8a02\u200b\u55ae\u200b\u7684\u200b\u5408\u7d04\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u78ba\u5b9a\u200b\u8981\u200b\u8cb7\u200bTom\u200b\u7684\u200b\u8a02\u55ae\u200b\uff0c \u200b\u6b64\u6642\u8a02\u200b\u55ae\u8655\u200b\u65bc\u200b\u9396\u5b9a\u200b\u72c0\u614b\u200b\uff0c</p> </li> <li> <p>\u200b\u5176\u6b21\u200bAlice\u200b\u9700\u651c\u5e36\u200b\u8a02\u55ae\u200b\u7684\u200bKey\u3001A\u200b\u93c8\u200b\u7684\u200b\u93c8\u200bID\uff0c \u200b\u8ce3\u51fa\u200b\u6578\u91cf\u200b\u3001\u200b\u8a02\u55ae\u200b\u7d50\u675f\u200b\u6642\u9593\u200b\u3001signature\u3001\u200b\u8cb7\u5bb6\u5b9a\u200b\u7fa9\u7684\u200b\u63d0\u6b3e\u200b\u9396\u5b9a\u200b\u6642\u9593\u200b\uff08\u200b\u8a02\u55ae\u200b\u7d50\u675f\u200b\u6642\u9593\u200b&gt;=\u200b\u63d0\u6b3e\u200b\u9396\u5b9a\u200b\u6642\u9593\u200b+\u200b\u7576\u524d\u200b\u6642\u9593\u200b\uff09\u200b\u8abf\u7528\u200bB\u200b\u93c8\u200b HASH\u200b\u9396\u5b9a\u200b\u7684\u200b\u8de8\u200b\u93c8\u5408\u7d04\u200b\u7684\u200b\u5275\u5efa\u8ce3\u200b\u55ae\u200b\u65b9\u6cd5\u200b\u4e26\u628a\u200bB\u200b\u93c8\u200b\u7684\u200bUSDT\u200b\u8cc7\u7522\u200b\u8f49\u5165\u200b\u5408\u7d04\u200b</p> </li> <li> <p>Tom\u200b\u770b\u5230\u200bAlice\u200b\u5df2\u7d93\u200b\u5728\u200bB\u200b\u93c8\u200b\u4ed8\u6b3e\u200b\u6210\u529f\u200b\u5f8c\u200b\uff0c\u200b\u8abf\u7528\u200bB\u200b\u93c8\u200b\u7684\u200b\u63d0\u53d6\u200b\u8a02\u55ae\u200b\u8cc7\u7522\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u50b3\u5165\u200b\u5275\u5efa\u8a02\u200b\u55ae\u6642\u200b\u8ce3\u5bb6\u200b\u81ea\u5b9a\u200b\u7fa9\u7684\u200b\u5bc6\u78bc\u200b\uff0c\u200b\u4ea4\u6613\u200b\u6210\u529f\u200b\u5f8c\u200b\u5bc6\u78bc\u200b\u5c07\u516c\u958b\u7d66\u200bAlice</p> </li> <li> <p>Alice\u200b\u5f97\u5230\u200b\u5bc6\u78bc\u200b\u5f8c\u200b\u9700\u8981\u200b\u8abf\u7528\u200bA\u200b\u93c8\u200b\u7684\u200b\u63d0\u53d6\u200b\u8a02\u55ae\u200b\u8cc7\u7522\u200b\u7684\u200b\u65b9\u6cd5\u200b\u50b3\u5165\u200b\u5bc6\u78bc\u200b\uff0c \u200b\u7372\u5f97\u200bA\u200b\u93c8\u200b\u7684\u200bUSDT\u200b\u7684\u200b\u8cc7\u7522\u200b</p> </li> </ol>"}]}